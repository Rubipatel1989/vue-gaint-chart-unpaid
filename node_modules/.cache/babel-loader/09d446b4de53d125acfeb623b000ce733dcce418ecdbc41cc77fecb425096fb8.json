{"ast":null,"code":"import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase, isIDevice, getTooltipText } from '../base/util';\nimport { updateDropDownFontFormatLocale } from '../base/util';\nimport * as model from '../models/items';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\nimport { ColorPickerInput } from './color-picker';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar Toolbar = /** @class */function () {\n  function Toolbar(parent, serviceLocator) {\n    this.tools = {};\n    this.parent = parent;\n    this.isDestroyed = false;\n    this.isToolbar = false;\n    this.locator = serviceLocator;\n    this.isTransformChild = false;\n    this.renderFactory = this.locator.getService('rendererFactory');\n    model.updateDropDownLocale(this.parent);\n    updateDropDownFontFormatLocale(this.parent);\n    this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n    this.addEventListener();\n    if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n      extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n    } else {\n      this.tools = model.tools;\n    }\n  }\n  Toolbar.prototype.initializeInstance = function () {\n    this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n    this.editableElement = this.contentRenderer.getEditPanel();\n    this.editPanel = this.contentRenderer.getPanel();\n  };\n  Toolbar.prototype.toolbarBindEvent = function () {\n    if (!this.parent.inlineMode.enable) {\n      this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n        keyAction: this.toolBarKeyDown.bind(this),\n        keyConfigs: this.parent.formatter.keyConfig,\n        eventName: 'keydown'\n      });\n    }\n  };\n  Toolbar.prototype.toolBarKeyDown = function (e) {\n    switch (e.action) {\n      case 'escape':\n        this.parent.contentModule.getEditPanel().focus();\n        break;\n      case 'enter':\n        if (!isNOU(e.target) && (e.target.classList.contains('e-rte-fontcolor-dropdown') || e.target.classList.contains('e-rte-backgroundcolor-dropdown'))) {\n          this.parent.notify(events.showColorPicker, {\n            toolbarClick: e.target.classList.contains('e-rte-fontcolor-dropdown') ? 'fontcolor' : 'backgroundcolor'\n          });\n        }\n    }\n  };\n  Toolbar.prototype.createToolbarElement = function () {\n    this.tbElement = this.parent.createElement('div', {\n      id: this.parent.getID() + '_toolbar'\n    });\n    if (!Browser.isDevice && this.parent.inlineMode.enable && isIDevice()) {\n      return;\n    } else {\n      if (!this.parent.inlineMode.enable) {\n        this.tbWrapper = this.parent.createElement('div', {\n          id: this.parent.getID() + '_toolbar_wrapper',\n          innerHTML: this.tbElement.outerHTML,\n          className: classes.CLS_TB_WRAP\n        });\n        this.tbElement = this.tbWrapper.firstElementChild;\n        this.parent.rootContainer.insertBefore(this.tbWrapper, this.editPanel);\n      } else {\n        this.parent.rootContainer.insertBefore(this.tbElement, this.editPanel);\n      }\n    }\n  };\n  Toolbar.prototype.getToolbarMode = function () {\n    var tbMode;\n    switch (this.parent.toolbarSettings.type) {\n      case ToolbarType.Expand:\n        tbMode = 'Extended';\n        break;\n      case ToolbarType.Scrollable:\n        tbMode = 'Scrollable';\n        break;\n      default:\n        tbMode = 'MultiRow';\n    }\n    if (isIDevice() && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      tbMode = ToolbarType.Scrollable;\n    }\n    return tbMode;\n  };\n  Toolbar.prototype.checkToolbarResponsive = function (ele) {\n    if (!Browser.isDevice || isIDevice()) {\n      return false;\n    }\n    var tBarMode;\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      tBarMode = ToolbarType.MultiRow;\n    } else {\n      tBarMode = this.parent.toolbarSettings.type;\n    }\n    this.baseToolbar.render({\n      container: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items,\n      mode: tBarMode,\n      target: ele,\n      cssClass: this.parent.getCssClass()\n    });\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      addClass([ele], ['e-rte-tb-mobile']);\n      if (this.parent.inlineMode.enable) {\n        this.addFixedTBarClass();\n      } else {\n        addClass([ele], [classes.CLS_TB_STATIC]);\n      }\n    }\n    this.wireEvents();\n    this.dropDownModule.renderDropDowns({\n      container: ele,\n      containerType: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items\n    });\n    this.renderColorPicker({\n      container: this.tbElement,\n      containerType: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items\n    });\n    return true;\n  };\n  Toolbar.prototype.checkIsTransformChild = function () {\n    this.isTransformChild = false;\n    var transformElements = selectAll('[style*=\"transform\"]', document);\n    for (var i = 0; i < transformElements.length; i++) {\n      // eslint-disable-next-line max-len\n      if (!isNullOrUndefined(transformElements[i].contains) && transformElements[i].contains(this.parent.element)) {\n        this.isTransformChild = true;\n        break;\n      }\n    }\n  };\n  Toolbar.prototype.toggleFloatClass = function () {\n    var floatOffset = this.parent.floatingToolbarOffset;\n    if (this.parent.toolbarSettings.enableFloating) {\n      addClass([this.tbElement.parentElement], [classes.CLS_TB_FLOAT]);\n      setStyleAttribute(this.tbElement.parentElement, {\n        top: floatOffset + 'px'\n      });\n    } else {\n      removeClass([this.tbElement.parentElement], [classes.CLS_TB_FLOAT]);\n      setStyleAttribute(this.tbElement.parentElement, {\n        top: ''\n      });\n    }\n  };\n  Toolbar.prototype.renderToolbar = function () {\n    this.initializeInstance();\n    this.createToolbarElement();\n    if (this.checkToolbarResponsive(this.tbElement)) {\n      return;\n    }\n    if (this.parent.inlineMode.enable) {\n      this.parent.notify(events.renderInlineToolbar, {});\n    } else {\n      this.baseToolbar.render({\n        container: 'toolbar',\n        items: this.parent.toolbarSettings.items,\n        mode: this.getToolbarMode(),\n        target: this.tbElement,\n        cssClass: this.parent.getCssClass()\n      });\n      if (this.parent.element.classList.contains('e-rte-full-screen')) {\n        this.updateItem({\n          targetItem: 'Maximize',\n          updateItem: 'Minimize',\n          baseToolbar: this.parent.getBaseToolbarObject()\n        });\n      }\n      if (!this.parent.inlineMode.enable) {\n        if (this.parent.toolbarSettings.enableFloating) {\n          this.checkIsTransformChild();\n          this.toggleFloatClass();\n        }\n        addClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n          addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n        }\n      }\n    }\n    this.wireEvents();\n    if (this.parent.inlineMode.enable && !isIDevice()) {\n      this.addFixedTBarClass();\n    }\n    if (!this.parent.inlineMode.enable) {\n      this.dropDownModule.renderDropDowns({\n        container: this.tbElement,\n        containerType: 'toolbar',\n        items: this.parent.toolbarSettings.items\n      });\n      this.renderColorPicker({\n        container: this.tbElement,\n        containerType: 'toolbar',\n        items: this.parent.toolbarSettings.items\n      });\n      this.refreshToolbarOverflow();\n    }\n    if (this.parent.rootContainer && this.parent.rootContainer.classList.contains('e-source-code-enabled')) {\n      this.parent.notify(events.updateToolbarItem, {\n        targetItem: 'SourceCode',\n        updateItem: 'Preview',\n        baseToolbar: this.parent.getBaseToolbarObject()\n      });\n      this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n    }\n  };\n  /**\n   * addFixedTBarClass method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.addFixedTBarClass = function () {\n    addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n  };\n  /**\n   * removeFixedTBarClass method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.removeFixedTBarClass = function () {\n    removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n  };\n  Toolbar.prototype.showFixedTBar = function () {\n    addClass([this.tbElement], [classes.CLS_SHOW]);\n    if (Browser.isIos) {\n      addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n    }\n  };\n  Toolbar.prototype.hideFixedTBar = function () {\n    // eslint-disable-next-line\n    !this.isToolbar ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n  };\n  /**\n   * updateItem method\n   *\n   * @param {IUpdateItemsModel} args - specifies the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.updateItem = function (args) {\n    var item = this.tools[args.updateItem.toLocaleLowerCase()];\n    if (getTooltipText(args.updateItem.toLocaleLowerCase(), this.locator) !== 'Code View' && getTooltipText(args.updateItem.toLocaleLowerCase(), this.locator) !== 'Preview' || this.parent.locale !== 'en-US') {\n      item.tooltip = getTooltipText(args.updateItem.toLocaleLowerCase(), this.locator);\n    }\n    var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n    var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n    if (!isNOU(index)) {\n      var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n      args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n      args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n      args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n      args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n      args.baseToolbar.toolbarObj.dataBind();\n      args.baseToolbar.toolbarObj.refreshOverflow();\n    } else {\n      this.addTBarItem(args, 0);\n    }\n  };\n  Toolbar.prototype.updateToolbarStatus = function (args) {\n    if (!this.tbElement || this.parent.inlineMode.enable && (isIDevice() || !Browser.isDevice)) {\n      return;\n    }\n    var options = {\n      args: args,\n      dropDownModule: this.dropDownModule,\n      parent: this.parent,\n      tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n      tbItems: this.baseToolbar.toolbarObj.items\n    };\n    setToolbarStatus(options, this.parent.inlineMode.enable ? true : false, this.parent);\n  };\n  Toolbar.prototype.fullScreen = function (e) {\n    this.parent.fullScreenModule.showFullScreen(e);\n  };\n  Toolbar.prototype.hideScreen = function (e) {\n    this.parent.fullScreenModule.hideFullScreen(e);\n  };\n  /**\n   * getBaseToolbar method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getBaseToolbar = function () {\n    return this.baseToolbar;\n  };\n  /**\n   * addTBarItem method\n   *\n   * @param {IUpdateItemsModel} args - specifies the arguments.\n   * @param {number} index - specifies the index value.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.addTBarItem = function (args, index) {\n    args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n  };\n  /**\n   * enableTBarItems method\n   *\n   * @param {BaseToolbar} baseToolbar - specifies the toolbar.\n   * @param {string} items - specifies the string value.\n   * @param {boolean} isEnable - specifies the boolean value.\n   * @param {boolean} muteToolbarUpdate - specifies the toolbar.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable, muteToolbarUpdate) {\n    var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n    this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n    for (var i = 0; i < trgItems.length; i++) {\n      var item = this.tbItems[trgItems[i]];\n      if (item) {\n        baseToolbar.toolbarObj.enableItems(item, isEnable);\n      }\n    }\n    if (!select('.' + classes.CLS_RTE_SOURCE_CODE_TXTAREA, this.parent.element) && !muteToolbarUpdate) {\n      updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n    }\n  };\n  /**\n   * removeTBarItems method\n   *\n   * @param {string} items - specifies the string value.\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.removeTBarItems = function (items) {\n    if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n      this.baseToolbar = this.parent.getBaseToolbarObject();\n    }\n    var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n    this.tbItems = this.parent.inlineMode.enable ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element) : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n    for (var i = 0; i < trgItems.length; i++) {\n      this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n    }\n  };\n  /**\n   * getExpandTBarPopHeight method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getExpandTBarPopHeight = function () {\n    var popHeight = 0;\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n      var expandPopup = select('.e-toolbar-extended', this.tbElement);\n      if (expandPopup && this.tbElement.classList.contains('e-expand-open') || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n        addClass([expandPopup], [classes.CLS_VISIBLE]);\n        popHeight = popHeight + expandPopup.offsetHeight;\n        removeClass([expandPopup], [classes.CLS_VISIBLE]);\n      } else {\n        removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n      }\n    }\n    return popHeight;\n  };\n  /**\n   * getToolbarHeight method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getToolbarHeight = function () {\n    return this.tbElement.offsetHeight;\n  };\n  /**\n   * getToolbarElement method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.getToolbarElement = function () {\n    return this.parent && this.parent.element ? select('.' + classes.CLS_TOOLBAR, this.parent.element) : null;\n  };\n  /**\n   * refreshToolbarOverflow method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.refreshToolbarOverflow = function () {\n    this.parent.element.classList.remove(classes.CLS_RTL);\n    this.baseToolbar.toolbarObj.refreshOverflow();\n    if (this.parent.enableRtl) {\n      this.parent.element.classList.add(classes.CLS_RTL);\n    }\n  };\n  Toolbar.prototype.isToolbarDestroyed = function () {\n    return this.baseToolbar && this.baseToolbar.toolbarObj && this.baseToolbar.toolbarObj.isDestroyed ? true : false;\n  };\n  Toolbar.prototype.destroyToolbar = function () {\n    if (!this.isToolbarDestroyed()) {\n      this.parent.unWireScrollElementsEvents();\n      this.unWireEvents();\n      this.dropDownModule.destroy();\n      if (this.parent.emojiPickerModule && !this.parent.emojiPickerModule.isPopupDestroyed) {\n        this.parent.emojiPickerModule.childDestroy();\n      }\n      this.dropDownModule = null;\n      this.colorPickerModule.destroy();\n      this.colorPickerModule = null;\n      if (this.keyBoardModule) {\n        this.keyBoardModule.destroy();\n        this.keyBoardModule = null;\n      }\n      this.baseToolbar.destroy();\n      this.removeEventListener();\n      removeClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n      removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n      var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n      var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n      if (!isNullOrUndefined(tbWrapper)) {\n        detach(tbWrapper);\n      }\n      if (!isNullOrUndefined(tbElement)) {\n        detach(tbElement);\n      }\n    }\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.destroy = function () {\n    if (this.isDestroyed) {\n      return;\n    }\n    if (!this.isToolbarDestroyed()) {\n      this.destroyToolbar();\n    }\n    this.toolbarObj = null;\n    this.editPanel = null;\n    this.isToolbar = null;\n    this.editableElement = null;\n    this.tbItems = null;\n    this.baseToolbar = null;\n    this.tbElement = null;\n    this.tbWrapper = null;\n    this.isTransformChild = null;\n    this.contentRenderer = null;\n    this.dropDownModule = null;\n    this.colorPickerModule = null;\n    this.toolbarActionModule = null;\n    this.tools = null;\n    this.locator = null;\n    this.renderFactory = null;\n    this.isDestroyed = true;\n  };\n  Toolbar.prototype.mouseDownHandler = function () {\n    if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n      this.showFixedTBar();\n    }\n  };\n  Toolbar.prototype.focusChangeHandler = function () {\n    if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n      this.isToolbar = false;\n      this.hideFixedTBar();\n    }\n  };\n  Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n    this.isToolbar = true;\n  };\n  // eslint-disable-next-line\n  Toolbar.prototype.tbFocusHandler = function (e) {\n    var activeElm = document.activeElement;\n    var isToolbaractive = closest(activeElm, '.e-rte-toolbar');\n    if (activeElm === this.parent.getToolbarElement() || isToolbaractive === this.parent.getToolbarElement()) {\n      var toolbarItem = this.parent.getToolbarElement().querySelectorAll('.e-expended-nav');\n      for (var i = 0; i < toolbarItem.length; i++) {\n        if (isNOU(this.parent.getToolbarElement().querySelector('.e-insert-table-btn'))) {\n          toolbarItem[i].setAttribute('tabindex', '0');\n        } else {\n          toolbarItem[i].setAttribute('tabindex', '1');\n        }\n      }\n    }\n  };\n  Toolbar.prototype.wireEvents = function () {\n    if (this.parent.inlineMode.enable && isIDevice()) {\n      return;\n    }\n    EventHandler.add(this.tbElement, 'focusin', this.tbFocusHandler, this);\n  };\n  Toolbar.prototype.unWireEvents = function () {\n    EventHandler.remove(this.tbElement, 'focusin', this.tbFocusHandler);\n  };\n  Toolbar.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n    this.toolbarActionModule = new ToolbarAction(this.parent);\n    this.colorPickerModule = new ColorPickerInput(this.parent, this.locator);\n    this.parent.on(events.initialEnd, this.renderToolbar, this);\n    this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n    this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.parent.on(events.refreshBegin, this.onRefresh, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.enableFullScreen, this.fullScreen, this);\n    this.parent.on(events.disableFullScreen, this.hideScreen, this);\n    this.parent.on(events.updateToolbarItem, this.updateItem, this);\n    this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n    this.parent.on(events.focusChange, this.focusChangeHandler, this);\n    this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n    this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n    this.parent.on(events.bindCssClass, this.setCssClass, this);\n  };\n  Toolbar.prototype.removeEventListener = function () {\n    this.parent.off(events.initialEnd, this.renderToolbar);\n    this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n    this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.parent.off(events.refreshBegin, this.onRefresh);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n    this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n    this.parent.off(events.updateToolbarItem, this.updateItem);\n    this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n    this.parent.off(events.focusChange, this.focusChangeHandler);\n    this.parent.off(events.mouseDown, this.mouseDownHandler);\n    this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n    this.parent.off(events.bindCssClass, this.setCssClass);\n  };\n  // eslint-disable-next-line @typescript-eslint/tslint/config\n  Toolbar.prototype.setCssClass = function (e) {\n    if (this.toolbarObj && e.cssClass) {\n      if (isNullOrUndefined(e.oldCssClass)) {\n        this.toolbarObj.setProperties({\n          cssClass: (this.toolbarObj.cssClass + ' ' + e.cssClass).trim()\n        });\n      } else {\n        this.toolbarObj.setProperties({\n          cssClass: (this.toolbarObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim()\n        });\n      }\n    }\n  };\n  Toolbar.prototype.onRefresh = function () {\n    if (!this.parent.inlineMode.enable) {\n      this.refreshToolbarOverflow();\n    }\n    this.parent.autoResize();\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {RichTextEditorModel} e - specifies the string value\n   * @returns {void}\n   * @hidden\n    */\n  Toolbar.prototype.onPropertyChanged = function (e) {\n    if (!isNullOrUndefined(e.newProp.inlineMode)) {\n      for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n        var prop = _a[_i];\n        switch (prop) {\n          case 'enable':\n            this.refreshToolbar();\n            break;\n        }\n      }\n    }\n    if (!isNullOrUndefined(e.newProp.toolbarSettings)) {\n      if (!isNullOrUndefined(e.newProp.toolbarSettings.enableFloating)) {\n        this.toggleFloatClass();\n      }\n    }\n    if (e.module !== this.getModuleName()) {\n      return;\n    }\n    this.refreshToolbar();\n  };\n  Toolbar.prototype.refreshToolbar = function () {\n    if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n      this.baseToolbar = this.parent.getBaseToolbarObject();\n    }\n    var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n    var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n    if (tbElement || tbWrapper) {\n      this.destroyToolbar();\n    }\n    if (this.parent.toolbarSettings.enable) {\n      if (this.baseToolbar && this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed) {\n        this.baseToolbar.destroy();\n      }\n      this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n      this.addEventListener();\n      this.renderToolbar();\n      this.parent.wireScrollElementsEvents();\n      if (!select('.' + classes.CLS_RTE_SOURCE_CODE_TXTAREA, this.parent.element) && !this.parent.inlineMode.enable) {\n        updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n      }\n      this.parent.notify(events.dynamicModule, {});\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Toolbar.prototype.getModuleName = function () {\n    return 'toolbar';\n  };\n  Toolbar.prototype.renderColorPicker = function (args) {\n    this.colorPickerModule.renderColorPickerInput(args);\n  };\n  return Toolbar;\n}();\nexport { Toolbar };","map":{"version":3,"names":["addClass","Browser","EventHandler","detach","removeClass","select","selectAll","KeyboardEvents","isNullOrUndefined","isNOU","closest","setStyleAttribute","extend","events","classes","RenderType","ToolbarType","setToolbarStatus","updateUndoRedoStatus","getTBarItemsIndex","getCollection","toObjectLowerCase","isIDevice","getTooltipText","updateDropDownFontFormatLocale","model","BaseToolbar","DropDownButtons","ToolbarAction","ColorPickerInput","Toolbar","parent","serviceLocator","tools","isDestroyed","isToolbar","locator","isTransformChild","renderFactory","getService","updateDropDownLocale","baseToolbar","addEventListener","toolbarSettings","Object","keys","itemConfigs","length","prototype","initializeInstance","contentRenderer","getRenderer","Content","editableElement","getEditPanel","editPanel","getPanel","toolbarBindEvent","inlineMode","enable","keyBoardModule","getToolbarElement","keyAction","toolBarKeyDown","bind","keyConfigs","formatter","keyConfig","eventName","e","action","contentModule","focus","target","classList","contains","notify","showColorPicker","toolbarClick","createToolbarElement","tbElement","createElement","id","getID","isDevice","tbWrapper","innerHTML","outerHTML","className","CLS_TB_WRAP","firstElementChild","rootContainer","insertBefore","getToolbarMode","tbMode","type","Expand","Scrollable","checkToolbarResponsive","ele","tBarMode","MultiRow","render","container","items","mode","cssClass","getCssClass","addFixedTBarClass","CLS_TB_STATIC","wireEvents","dropDownModule","renderDropDowns","containerType","renderColorPicker","checkIsTransformChild","transformElements","document","i","element","toggleFloatClass","floatOffset","floatingToolbarOffset","enableFloating","parentElement","CLS_TB_FLOAT","top","renderToolbar","renderInlineToolbar","updateItem","targetItem","getBaseToolbarObject","CLS_RTE_TB_ENABLED","CLS_RTE_EXPAND_TB","refreshToolbarOverflow","updateToolbarItem","disableToolbarItem","CLS_TB_FIXED","removeFixedTBarClass","showFixedTBar","CLS_SHOW","isIos","CLS_TB_IOS_FIX","hideFixedTBar","args","item","toLocaleLowerCase","locale","tooltip","trgItem","index","subCommand","toolbarObj","prefixId","prefixIcon","icon","tooltipText","dataBind","refreshOverflow","addTBarItem","updateToolbarStatus","options","tbElements","CLS_TB_ITEM","tbItems","fullScreen","fullScreenModule","showFullScreen","hideScreen","hideFullScreen","getBaseToolbar","addItems","getObject","enableTBarItems","isEnable","muteToolbarUpdate","trgItems","enableItems","CLS_RTE_SOURCE_CODE_TXTAREA","editorManager","undoRedoManager","getUndoStatus","removeTBarItems","removeItems","getExpandTBarPopHeight","popHeight","expandPopup","CLS_VISIBLE","offsetHeight","CLS_EXPAND_OPEN","getToolbarHeight","CLS_TOOLBAR","remove","CLS_RTL","enableRtl","add","isToolbarDestroyed","destroyToolbar","unWireScrollElementsEvents","unWireEvents","destroy","emojiPickerModule","isPopupDestroyed","childDestroy","colorPickerModule","removeEventListener","toolbarActionModule","mouseDownHandler","focusChangeHandler","dropDownBeforeOpenHandler","tbFocusHandler","activeElm","activeElement","isToolbaractive","toolbarItem","querySelectorAll","querySelector","setAttribute","on","initialEnd","bindOnEnd","toolbarUpdated","modelChanged","onPropertyChanged","refreshBegin","onRefresh","enableFullScreen","disableFullScreen","beforeDropDownOpen","focusChange","mouseDown","sourceCodeMouseDown","bindCssClass","setCssClass","off","oldCssClass","setProperties","trim","replace","autoResize","newProp","_i","_a","prop","refreshToolbar","module","getModuleName","wireScrollElementsEvents","dynamicModule","renderColorPickerInput"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/toolbar.js"],"sourcesContent":["import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase, isIDevice, getTooltipText } from '../base/util';\nimport { updateDropDownFontFormatLocale } from '../base/util';\nimport * as model from '../models/items';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\nimport { ColorPickerInput } from './color-picker';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.tools = {};\n        this.parent = parent;\n        this.isDestroyed = false;\n        this.isToolbar = false;\n        this.locator = serviceLocator;\n        this.isTransformChild = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        model.updateDropDownLocale(this.parent);\n        updateDropDownFontFormatLocale(this.parent);\n        this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = model.tools;\n        }\n    }\n    Toolbar.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editableElement = this.contentRenderer.getEditPanel();\n        this.editPanel = this.contentRenderer.getPanel();\n    };\n    Toolbar.prototype.toolbarBindEvent = function () {\n        if (!this.parent.inlineMode.enable) {\n            this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n                keyAction: this.toolBarKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n            });\n        }\n    };\n    Toolbar.prototype.toolBarKeyDown = function (e) {\n        switch (e.action) {\n            case 'escape':\n                this.parent.contentModule.getEditPanel().focus();\n                break;\n            case 'enter':\n                if (!isNOU(e.target) && (e.target.classList.contains('e-rte-fontcolor-dropdown') || e.target.classList.contains('e-rte-backgroundcolor-dropdown'))) {\n                    this.parent.notify(events.showColorPicker, { toolbarClick: e.target.classList.contains('e-rte-fontcolor-dropdown') ? 'fontcolor' : 'backgroundcolor' });\n                }\n        }\n    };\n    Toolbar.prototype.createToolbarElement = function () {\n        this.tbElement = this.parent.createElement('div', { id: this.parent.getID() + '_toolbar' });\n        if (!Browser.isDevice && this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        else {\n            if (!this.parent.inlineMode.enable) {\n                this.tbWrapper = this.parent.createElement('div', {\n                    id: this.parent.getID() + '_toolbar_wrapper',\n                    innerHTML: this.tbElement.outerHTML,\n                    className: classes.CLS_TB_WRAP\n                });\n                this.tbElement = this.tbWrapper.firstElementChild;\n                this.parent.rootContainer.insertBefore(this.tbWrapper, this.editPanel);\n            }\n            else {\n                this.parent.rootContainer.insertBefore(this.tbElement, this.editPanel);\n            }\n        }\n    };\n    Toolbar.prototype.getToolbarMode = function () {\n        var tbMode;\n        switch (this.parent.toolbarSettings.type) {\n            case ToolbarType.Expand:\n                tbMode = 'Extended';\n                break;\n            case ToolbarType.Scrollable:\n                tbMode = 'Scrollable';\n                break;\n            default:\n                tbMode = 'MultiRow';\n        }\n        if (isIDevice() && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            tbMode = ToolbarType.Scrollable;\n        }\n        return tbMode;\n    };\n    Toolbar.prototype.checkToolbarResponsive = function (ele) {\n        if (!Browser.isDevice || isIDevice()) {\n            return false;\n        }\n        var tBarMode;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            tBarMode = ToolbarType.MultiRow;\n        }\n        else {\n            tBarMode = this.parent.toolbarSettings.type;\n        }\n        this.baseToolbar.render({\n            container: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items,\n            mode: tBarMode,\n            target: ele,\n            cssClass: this.parent.getCssClass()\n        });\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            addClass([ele], ['e-rte-tb-mobile']);\n            if (this.parent.inlineMode.enable) {\n                this.addFixedTBarClass();\n            }\n            else {\n                addClass([ele], [classes.CLS_TB_STATIC]);\n            }\n        }\n        this.wireEvents();\n        this.dropDownModule.renderDropDowns({\n            container: ele,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        this.renderColorPicker({ container: this.tbElement, containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'), items: this.parent.toolbarSettings.items });\n        return true;\n    };\n    Toolbar.prototype.checkIsTransformChild = function () {\n        this.isTransformChild = false;\n        var transformElements = selectAll('[style*=\"transform\"]', document);\n        for (var i = 0; i < transformElements.length; i++) {\n            // eslint-disable-next-line max-len\n            if (!isNullOrUndefined(transformElements[i].contains) && transformElements[i].contains(this.parent.element)) {\n                this.isTransformChild = true;\n                break;\n            }\n        }\n    };\n    Toolbar.prototype.toggleFloatClass = function () {\n        var floatOffset = this.parent.floatingToolbarOffset;\n        if (this.parent.toolbarSettings.enableFloating) {\n            addClass([this.tbElement.parentElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement.parentElement, { top: (floatOffset) + 'px' });\n        }\n        else {\n            removeClass([this.tbElement.parentElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement.parentElement, { top: '' });\n        }\n    };\n    Toolbar.prototype.renderToolbar = function () {\n        this.initializeInstance();\n        this.createToolbarElement();\n        if (this.checkToolbarResponsive(this.tbElement)) {\n            return;\n        }\n        if (this.parent.inlineMode.enable) {\n            this.parent.notify(events.renderInlineToolbar, {});\n        }\n        else {\n            this.baseToolbar.render({\n                container: 'toolbar',\n                items: this.parent.toolbarSettings.items,\n                mode: this.getToolbarMode(),\n                target: this.tbElement,\n                cssClass: this.parent.getCssClass()\n            });\n            if (this.parent.element.classList.contains('e-rte-full-screen')) {\n                this.updateItem({\n                    targetItem: 'Maximize',\n                    updateItem: 'Minimize',\n                    baseToolbar: this.parent.getBaseToolbarObject()\n                });\n            }\n            if (!this.parent.inlineMode.enable) {\n                if (this.parent.toolbarSettings.enableFloating) {\n                    this.checkIsTransformChild();\n                    this.toggleFloatClass();\n                }\n                addClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n                if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n                    addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n                }\n            }\n        }\n        this.wireEvents();\n        if (this.parent.inlineMode.enable && !isIDevice()) {\n            this.addFixedTBarClass();\n        }\n        if (!this.parent.inlineMode.enable) {\n            this.dropDownModule.renderDropDowns({\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.renderColorPicker({ container: this.tbElement, containerType: 'toolbar', items: this.parent.toolbarSettings.items });\n            this.refreshToolbarOverflow();\n        }\n        if (this.parent.rootContainer && this.parent.rootContainer.classList.contains('e-source-code-enabled')) {\n            this.parent.notify(events.updateToolbarItem, {\n                targetItem: 'SourceCode', updateItem: 'Preview',\n                baseToolbar: this.parent.getBaseToolbarObject()\n            });\n            this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n        }\n    };\n    /**\n     * addFixedTBarClass method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.addFixedTBarClass = function () {\n        addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    /**\n     * removeFixedTBarClass method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.removeFixedTBarClass = function () {\n        removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    Toolbar.prototype.showFixedTBar = function () {\n        addClass([this.tbElement], [classes.CLS_SHOW]);\n        if (Browser.isIos) {\n            addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n        }\n    };\n    Toolbar.prototype.hideFixedTBar = function () {\n        // eslint-disable-next-line\n        (!this.isToolbar) ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n    };\n    /**\n     * updateItem method\n     *\n     * @param {IUpdateItemsModel} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.updateItem = function (args) {\n        var item = this.tools[args.updateItem.toLocaleLowerCase()];\n        if ((getTooltipText(args.updateItem.toLocaleLowerCase(), this.locator) !== 'Code View' && getTooltipText(args.updateItem.toLocaleLowerCase(), this.locator) !== 'Preview') || this.parent.locale !== 'en-US') {\n            item.tooltip = getTooltipText(args.updateItem.toLocaleLowerCase(), this.locator);\n        }\n        var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n        var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n        if (!isNOU(index)) {\n            var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n            args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n            args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n            args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n            args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n            args.baseToolbar.toolbarObj.dataBind();\n            args.baseToolbar.toolbarObj.refreshOverflow();\n        }\n        else {\n            this.addTBarItem(args, 0);\n        }\n    };\n    Toolbar.prototype.updateToolbarStatus = function (args) {\n        if (!this.tbElement || (this.parent.inlineMode.enable && (isIDevice() || !Browser.isDevice))) {\n            return;\n        }\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownModule,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n            tbItems: this.baseToolbar.toolbarObj.items\n        };\n        setToolbarStatus(options, (this.parent.inlineMode.enable ? true : false), this.parent);\n    };\n    Toolbar.prototype.fullScreen = function (e) {\n        this.parent.fullScreenModule.showFullScreen(e);\n    };\n    Toolbar.prototype.hideScreen = function (e) {\n        this.parent.fullScreenModule.hideFullScreen(e);\n    };\n    /**\n     * getBaseToolbar method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getBaseToolbar = function () {\n        return this.baseToolbar;\n    };\n    /**\n     * addTBarItem method\n     *\n     * @param {IUpdateItemsModel} args - specifies the arguments.\n     * @param {number} index - specifies the index value.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.addTBarItem = function (args, index) {\n        args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n    };\n    /**\n     * enableTBarItems method\n     *\n     * @param {BaseToolbar} baseToolbar - specifies the toolbar.\n     * @param {string} items - specifies the string value.\n     * @param {boolean} isEnable - specifies the boolean value.\n     * @param {boolean} muteToolbarUpdate - specifies the toolbar.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable, muteToolbarUpdate) {\n        var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n        this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            var item = this.tbItems[trgItems[i]];\n            if (item) {\n                baseToolbar.toolbarObj.enableItems(item, isEnable);\n            }\n        }\n        if (!select('.' + classes.CLS_RTE_SOURCE_CODE_TXTAREA, this.parent.element) && !muteToolbarUpdate) {\n            updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    /**\n     * removeTBarItems method\n     *\n     * @param {string} items - specifies the string value.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.removeTBarItems = function (items) {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n        this.tbItems = (this.parent.inlineMode.enable) ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element)\n            : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n        }\n    };\n    /**\n     * getExpandTBarPopHeight method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getExpandTBarPopHeight = function () {\n        var popHeight = 0;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n            var expandPopup = select('.e-toolbar-extended', this.tbElement);\n            if (expandPopup && this.tbElement.classList.contains('e-expand-open')\n                || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n                addClass([expandPopup], [classes.CLS_VISIBLE]);\n                popHeight = popHeight + expandPopup.offsetHeight;\n                removeClass([expandPopup], [classes.CLS_VISIBLE]);\n            }\n            else {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n            }\n        }\n        return popHeight;\n    };\n    /**\n     * getToolbarHeight method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getToolbarHeight = function () {\n        return this.tbElement.offsetHeight;\n    };\n    /**\n     * getToolbarElement method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getToolbarElement = function () {\n        return this.parent && this.parent.element ? select('.' + classes.CLS_TOOLBAR, this.parent.element) : null;\n    };\n    /**\n     * refreshToolbarOverflow method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.refreshToolbarOverflow = function () {\n        this.parent.element.classList.remove(classes.CLS_RTL);\n        this.baseToolbar.toolbarObj.refreshOverflow();\n        if (this.parent.enableRtl) {\n            this.parent.element.classList.add(classes.CLS_RTL);\n        }\n    };\n    Toolbar.prototype.isToolbarDestroyed = function () {\n        return this.baseToolbar && this.baseToolbar.toolbarObj && this.baseToolbar.toolbarObj.isDestroyed ? true : false;\n    };\n    Toolbar.prototype.destroyToolbar = function () {\n        if (!this.isToolbarDestroyed()) {\n            this.parent.unWireScrollElementsEvents();\n            this.unWireEvents();\n            this.dropDownModule.destroy();\n            if (this.parent.emojiPickerModule && !this.parent.emojiPickerModule.isPopupDestroyed) {\n                this.parent.emojiPickerModule.childDestroy();\n            }\n            this.dropDownModule = null;\n            this.colorPickerModule.destroy();\n            this.colorPickerModule = null;\n            if (this.keyBoardModule) {\n                this.keyBoardModule.destroy();\n                this.keyBoardModule = null;\n            }\n            this.baseToolbar.destroy();\n            this.removeEventListener();\n            removeClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n            removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n            var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n            var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n            if (!isNullOrUndefined(tbWrapper)) {\n                detach(tbWrapper);\n            }\n            if (!isNullOrUndefined(tbElement)) {\n                detach(tbElement);\n            }\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (!this.isToolbarDestroyed()) {\n            this.destroyToolbar();\n        }\n        this.toolbarObj = null;\n        this.editPanel = null;\n        this.isToolbar = null;\n        this.editableElement = null;\n        this.tbItems = null;\n        this.baseToolbar = null;\n        this.tbElement = null;\n        this.tbWrapper = null;\n        this.isTransformChild = null;\n        this.contentRenderer = null;\n        this.dropDownModule = null;\n        this.colorPickerModule = null;\n        this.toolbarActionModule = null;\n        this.tools = null;\n        this.locator = null;\n        this.renderFactory = null;\n        this.isDestroyed = true;\n    };\n    Toolbar.prototype.mouseDownHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.showFixedTBar();\n        }\n    };\n    Toolbar.prototype.focusChangeHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.isToolbar = false;\n            this.hideFixedTBar();\n        }\n    };\n    Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n        this.isToolbar = true;\n    };\n    // eslint-disable-next-line\n    Toolbar.prototype.tbFocusHandler = function (e) {\n        var activeElm = document.activeElement;\n        var isToolbaractive = closest(activeElm, '.e-rte-toolbar');\n        if (activeElm === this.parent.getToolbarElement() || isToolbaractive === this.parent.getToolbarElement()) {\n            var toolbarItem = this.parent.getToolbarElement().querySelectorAll('.e-expended-nav');\n            for (var i = 0; i < toolbarItem.length; i++) {\n                if (isNOU(this.parent.getToolbarElement().querySelector('.e-insert-table-btn'))) {\n                    toolbarItem[i].setAttribute('tabindex', '0');\n                }\n                else {\n                    toolbarItem[i].setAttribute('tabindex', '1');\n                }\n            }\n        }\n    };\n    Toolbar.prototype.wireEvents = function () {\n        if (this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        EventHandler.add(this.tbElement, 'focusin', this.tbFocusHandler, this);\n    };\n    Toolbar.prototype.unWireEvents = function () {\n        EventHandler.remove(this.tbElement, 'focusin', this.tbFocusHandler);\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n        this.toolbarActionModule = new ToolbarAction(this.parent);\n        this.colorPickerModule = new ColorPickerInput(this.parent, this.locator);\n        this.parent.on(events.initialEnd, this.renderToolbar, this);\n        this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n        this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.refreshBegin, this.onRefresh, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.enableFullScreen, this.fullScreen, this);\n        this.parent.on(events.disableFullScreen, this.hideScreen, this);\n        this.parent.on(events.updateToolbarItem, this.updateItem, this);\n        this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n        this.parent.on(events.focusChange, this.focusChangeHandler, this);\n        this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        this.parent.off(events.initialEnd, this.renderToolbar);\n        this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n        this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.refreshBegin, this.onRefresh);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n        this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n        this.parent.off(events.updateToolbarItem, this.updateItem);\n        this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n        this.parent.off(events.focusChange, this.focusChangeHandler);\n        this.parent.off(events.mouseDown, this.mouseDownHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n    };\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    Toolbar.prototype.setCssClass = function (e) {\n        if (this.toolbarObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                this.toolbarObj.setProperties({ cssClass: (this.toolbarObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                this.toolbarObj.setProperties({ cssClass: (this.toolbarObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    Toolbar.prototype.onRefresh = function () {\n        if (!this.parent.inlineMode.enable) {\n            this.refreshToolbarOverflow();\n        }\n        this.parent.autoResize();\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} e - specifies the string value\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        this.refreshToolbar();\n                        break;\n                }\n            }\n        }\n        if (!isNullOrUndefined(e.newProp.toolbarSettings)) {\n            if (!isNullOrUndefined(e.newProp.toolbarSettings.enableFloating)) {\n                this.toggleFloatClass();\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.refreshToolbar();\n    };\n    Toolbar.prototype.refreshToolbar = function () {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n        var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n        if (tbElement || tbWrapper) {\n            this.destroyToolbar();\n        }\n        if (this.parent.toolbarSettings.enable) {\n            if (this.baseToolbar && this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed) {\n                this.baseToolbar.destroy();\n            }\n            this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n            this.addEventListener();\n            this.renderToolbar();\n            this.parent.wireScrollElementsEvents();\n            if (!select('.' + classes.CLS_RTE_SOURCE_CODE_TXTAREA, this.parent.element) && !this.parent.inlineMode.enable) {\n                updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n            }\n            this.parent.notify(events.dynamicModule, {});\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    Toolbar.prototype.renderColorPicker = function (args) {\n        this.colorPickerModule.renderColorPickerInput(args);\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}