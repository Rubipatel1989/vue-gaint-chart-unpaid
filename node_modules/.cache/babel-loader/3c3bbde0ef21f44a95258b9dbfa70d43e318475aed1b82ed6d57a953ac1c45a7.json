{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Toolbar as BaseToolbar } from '@syncfusion/ej2-navigations';\nimport { select, isNullOrUndefined as isNOU, closest, selectAll } from '@syncfusion/ej2-base';\nimport { createDialog } from '../pop-up/dialog';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\nimport { refresh, getPathObject, getLocaleText, getCssClass, sortbyClickHandler } from '../common/utility';\nimport { createDeniedDialog, updateLayout } from '../common/utility';\nimport { GetDetails } from '../common/operations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { cutFiles, copyFiles, pasteHandler, hasEditAccess } from '../common/index';\nimport { doDownload, createNewFolder, uploadItem } from '../common/index';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */function () {\n  /**\n   * Constructor for the Toolbar module\n   *\n   * @hidden\n   * @param {IFileManager} parent - specifies the parent element.\n   * @private\n   */\n  function Toolbar(parent) {\n    this.default = ['Delete', 'Rename', 'Download', 'Cut', 'Copy', 'Paste'];\n    this.single = ['Delete', 'Rename', 'Download', 'Cut', 'Copy'];\n    this.multiple = ['Delete', 'Download', 'Cut', 'Copy', 'Refresh'];\n    this.selection = ['NewFolder', 'Upload', 'SortBy', 'Refresh'];\n    this.parent = parent;\n    this.render();\n    this.addEventListener();\n  }\n  Toolbar.prototype.render = function () {\n    var _this = this;\n    this.items = this.toolbarItemData(this.getItems(this.parent.toolbarSettings.items.map(function (item) {\n      return item.trim();\n    })));\n    var eventArgs = {\n      items: this.items\n    };\n    this.parent.trigger('toolbarCreate', eventArgs, function (toolbarCreateArgs) {\n      _this.items = toolbarCreateArgs.items;\n      _this.toolbarObj = new BaseToolbar({\n        items: _this.items,\n        created: _this.toolbarCreateHandler.bind(_this),\n        overflowMode: 'Popup',\n        clicked: _this.onClicked.bind(_this),\n        enableHtmlSanitizer: _this.parent.enableHtmlSanitizer,\n        enableRtl: _this.parent.enableRtl\n      });\n      _this.toolbarObj.isStringTemplate = true;\n      _this.toolbarObj.root = _this.parent.root ? _this.parent.root : _this.parent;\n      _this.toolbarObj.appendTo('#' + _this.parent.element.id + CLS.TOOLBAR_ID);\n    });\n  };\n  Toolbar.prototype.getItemIndex = function (item) {\n    var itemId = this.getId(item);\n    for (var i = 0; i < this.items.length; i++) {\n      if (this.items[i].id === itemId) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  Toolbar.prototype.getItems = function (items) {\n    var currItems = items.slice();\n    if (this.parent.isDevice && this.parent.allowMultiSelection) {\n      currItems.push('SelectAll');\n    }\n    if (this.parent.toolbarItems.length > 0) {\n      currItems = this.parent.toolbarItems.map(function (item) {\n        return item.name;\n      });\n    }\n    return currItems;\n  };\n  /* istanbul ignore next */\n  Toolbar.prototype.onClicked = function (args) {\n    var _this = this;\n    if (isNOU(args.item) || !args.item.id) {\n      return;\n    }\n    var tool = args.item.id.substr((this.parent.element.id + '_tb_').length);\n    var details;\n    if (tool === 'refresh' || tool === 'newfolder' || tool === 'upload') {\n      details = [getPathObject(this.parent)];\n      this.parent.itemData = details;\n    } else {\n      this.parent.notify(events.selectedData, {});\n      details = this.parent.itemData;\n    }\n    var eventArgs = {\n      cancel: false,\n      fileDetails: details,\n      item: args.item\n    };\n    this.parent.trigger('toolbarClick', eventArgs, function (toolbarClickArgs) {\n      var sItems;\n      var target;\n      if (!toolbarClickArgs.cancel) {\n        switch (tool) {\n          case 'sortby':\n            target = closest(args.originalEvent.target, '.' + CLS.TB_ITEM);\n            if (target && target.classList.contains('e-toolbar-popup')) {\n              args.cancel = true;\n            }\n            break;\n          case 'newfolder':\n            createNewFolder(_this.parent);\n            break;\n          case 'cut':\n            cutFiles(_this.parent);\n            break;\n          case 'copy':\n            copyFiles(_this.parent);\n            break;\n          case 'delete':\n            for (var i = 0; i < details.length; i++) {\n              if (!hasEditAccess(details[i])) {\n                createDeniedDialog(_this.parent, details[i], events.permissionEdit);\n                return;\n              }\n            }\n            createDialog(_this.parent, 'Delete');\n            break;\n          case 'details':\n            _this.parent.notify(events.detailsInit, {});\n            sItems = _this.parent.selectedItems;\n            if (_this.parent.activeModule === 'navigationpane') {\n              sItems = [];\n            }\n            GetDetails(_this.parent, sItems, _this.parent.path, 'details');\n            break;\n          case 'paste':\n            _this.parent.folderPath = '';\n            pasteHandler(_this.parent);\n            break;\n          case 'refresh':\n            refresh(_this.parent);\n            break;\n          case 'download':\n            doDownload(_this.parent);\n            break;\n          case 'rename':\n            if (!hasEditAccess(details[0])) {\n              createDeniedDialog(_this.parent, details[0], events.permissionEdit);\n            } else {\n              _this.parent.notify(events.renameInit, {});\n              createDialog(_this.parent, 'Rename');\n            }\n            break;\n          case 'upload':\n            uploadItem(_this.parent);\n            break;\n          case 'selectall':\n            _this.parent.notify(events.selectAllInit, {});\n            break;\n          case 'selection':\n            _this.parent.notify(events.clearAllInit, {});\n            break;\n        }\n      }\n    });\n  };\n  Toolbar.prototype.toolbarCreateHandler = function () {\n    var _this = this;\n    if (!isNOU(select('#' + this.getId('SortBy'), this.parent.element))) {\n      var items = [{\n        id: this.getPupupId('name'),\n        text: getLocaleText(this.parent, 'Name'),\n        iconCss: this.parent.sortBy === 'name' ? CLS.TB_OPTION_DOT : ''\n      }, {\n        id: this.getPupupId('size'),\n        text: getLocaleText(this.parent, 'Size'),\n        iconCss: this.parent.sortBy === 'size' ? CLS.TB_OPTION_DOT : ''\n      }, {\n        id: this.getPupupId('date'),\n        text: getLocaleText(this.parent, 'DateModified'),\n        iconCss: this.parent.sortBy === '_fm_modified' ? CLS.TB_OPTION_DOT : ''\n      }, {\n        separator: true\n      }, {\n        id: this.getPupupId('ascending'),\n        text: getLocaleText(this.parent, 'Ascending'),\n        iconCss: this.parent.sortOrder === 'Ascending' ? CLS.TB_OPTION_TICK : ''\n      }, {\n        id: this.getPupupId('descending'),\n        text: getLocaleText(this.parent, 'Descending'),\n        iconCss: this.parent.sortOrder === 'Descending' ? CLS.TB_OPTION_TICK : ''\n      }, {\n        id: this.getPupupId('none'),\n        text: getLocaleText(this.parent, 'None'),\n        iconCss: this.parent.sortOrder === 'None' ? CLS.TB_OPTION_TICK : ''\n      }];\n      this.buttonObj = new DropDownButton({\n        items: items,\n        cssClass: getCssClass(this.parent, CLS.ROOT_POPUP),\n        select: sortbyClickHandler.bind(this, this.parent),\n        enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n        enableRtl: this.parent.enableRtl,\n        iconCss: CLS.ICON_SHORTBY\n      });\n      this.buttonObj.isStringTemplate = true;\n      this.buttonObj.appendTo('#' + this.getId('SortBy'));\n    }\n    if (!isNOU(select('#' + this.getId('View'), this.parent.element))) {\n      var gridSpan_1 = '<span class=\"' + CLS.ICON_GRID + ' ' + CLS.MENU_ICON + '\"></span>';\n      var largeIconSpan_1 = '<span class=\"' + CLS.ICON_LARGE + ' ' + CLS.MENU_ICON + '\"></span>';\n      var layoutItems = [{\n        id: this.getPupupId('large'),\n        text: getLocaleText(this.parent, 'View-LargeIcons'),\n        iconCss: this.parent.view === 'Details' ? '' : CLS.TB_OPTION_TICK\n      }, {\n        id: this.getPupupId('details'),\n        text: getLocaleText(this.parent, 'View-Details'),\n        iconCss: this.parent.view === 'Details' ? CLS.TB_OPTION_TICK : ''\n      }];\n      this.layoutBtnObj = new DropDownButton({\n        iconCss: this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE,\n        cssClass: getCssClass(this.parent, 'e-caret-hide ' + CLS.ROOT_POPUP),\n        items: layoutItems,\n        select: this.layoutChange.bind(this),\n        enableRtl: this.parent.enableRtl,\n        content: '<span class=\"e-tbar-btn-text\">' + getLocaleText(this.parent, 'View') + '</span>',\n        beforeItemRender: function (args) {\n          var tickIcon = args.item.iconCss;\n          var viewText = args.item.text === getLocaleText(_this.parent, 'View-LargeIcons');\n          var iconClass = tickIcon ? ' e-menu-icon ' + tickIcon : '';\n          args.element.innerHTML = '<span class=\"' + iconClass + '\"></span>' + (viewText ? largeIconSpan_1 : gridSpan_1) + args.item.text;\n          var span = args.element.firstChild;\n          if (span && span.className === '') {\n            args.element.removeChild(span);\n          }\n        }\n      });\n      this.layoutBtnObj.isStringTemplate = true;\n      this.layoutBtnObj.appendTo('#' + this.getId('View'));\n    }\n    this.hideItems(this.default, true);\n    this.hideStatus();\n    if (this.parent.portals && this.toolbarObj.portals) {\n      this.parent.portals = this.parent.portals.concat(this.toolbarObj.portals);\n      this.parent['renderReactTemplates']();\n    }\n    var btnElement = selectAll('.e-btn', this.toolbarObj.element);\n    var _loop_1 = function (btnCount) {\n      /* istanbul ignore next */\n      btnElement[btnCount].onkeydown = function (e) {\n        if (e.keyCode === 13 && !e.target.classList.contains('e-fe-popup')) {\n          e.preventDefault();\n        }\n      };\n      btnElement[btnCount].onkeyup = function (e) {\n        if (e.keyCode === 13 && !e.target.classList.contains('e-fe-popup')) {\n          btnElement[btnCount].click();\n        }\n      };\n    };\n    for (var btnCount = 0; btnCount < btnElement.length; btnCount++) {\n      _loop_1(btnCount);\n    }\n    this.parent.refreshLayout();\n  };\n  Toolbar.prototype.updateSortByButton = function () {\n    if (this.buttonObj) {\n      var items = this.buttonObj.items;\n      for (var itemCount = 0; itemCount < items.length; itemCount++) {\n        if (items[itemCount].id === this.getPupupId('name')) {\n          items[itemCount].iconCss = this.parent.sortBy === 'name' ? CLS.TB_OPTION_DOT : '';\n        } else if (items[itemCount].id === this.getPupupId('size')) {\n          items[itemCount].iconCss = this.parent.sortBy === 'size' ? CLS.TB_OPTION_DOT : '';\n        } else if (items[itemCount].id === this.getPupupId('date')) {\n          if (this.parent.sortBy === 'dateModified' || this.parent.sortBy === 'dateCreated') {\n            items[itemCount].iconCss = this.parent.sortBy === this.parent.sortBy ? CLS.TB_OPTION_DOT : '';\n          } else {\n            items[itemCount].iconCss = this.parent.sortBy === '_fm_modified' ? CLS.TB_OPTION_DOT : '';\n          }\n        } else if (items[itemCount].id === this.getPupupId('ascending')) {\n          items[itemCount].iconCss = this.parent.sortOrder === 'Ascending' ? CLS.TB_OPTION_TICK : '';\n        } else if (items[itemCount].id === this.getPupupId('descending')) {\n          items[itemCount].iconCss = this.parent.sortOrder === 'Descending' ? CLS.TB_OPTION_TICK : '';\n        } else if (items[itemCount].id === this.getPupupId('none')) {\n          items[itemCount].iconCss = this.parent.sortOrder === 'None' ? CLS.TB_OPTION_TICK : '';\n        }\n      }\n    }\n  };\n  Toolbar.prototype.getPupupId = function (id) {\n    return this.parent.element.id + '_ddl_' + id.toLowerCase();\n  };\n  Toolbar.prototype.layoutChange = function (args) {\n    if (this.parent.view === 'Details') {\n      if (args.item.id === this.getPupupId('large')) {\n        updateLayout(this.parent, 'LargeIcons');\n      }\n    } else {\n      if (args.item.id === this.getPupupId('details')) {\n        updateLayout(this.parent, 'Details');\n      }\n    }\n  };\n  Toolbar.prototype.toolbarItemData = function (data) {\n    var items = [];\n    var mode = 'Both';\n    if (this.parent.isMobile) {\n      mode = 'Overflow';\n    }\n    for (var i = 0; i < data.length; i++) {\n      var item = void 0;\n      var propItem = void 0;\n      if (this.parent.toolbarItems.length > 0) {\n        propItem = this.getItemModel(this.parent.toolbarItems[parseInt(i.toString(), 10)]);\n      }\n      var itemId = this.getId(data[i]);\n      var itemText = getLocaleText(this.parent, data[i]);\n      var itemTooltip = getLocaleText(this.parent, 'Tooltip-' + data[i]);\n      switch (data[i]) {\n        case '|':\n          item = {\n            type: 'Separator'\n          };\n          break;\n        case 'Upload':\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            prefixIcon: CLS.ICON_UPLOAD,\n            showTextOn: mode\n          };\n          break;\n        case 'SortBy':\n          {\n            var spanElement = '<span class=\"e-tbar-btn-text e-tbar-ddb-text\">' + itemText + '</span>';\n            if (propItem && propItem.text) {\n              spanElement = '<span class=\"e-tbar-btn-text e-tbar-ddb-text\">' + propItem.text + '</span>';\n            }\n            item = {\n              id: itemId,\n              tooltipText: itemTooltip,\n              template: '<button id=\"' + itemId + '\" class=\"e-tbar-btn e-tbtn-txt\" tabindex=\"-1\">' + spanElement + '</button>'\n            };\n            break;\n          }\n        case 'Refresh':\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            prefixIcon: CLS.ICON_REFRESH,\n            showTextOn: mode\n          };\n          break;\n        case 'Selection':\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            suffixIcon: CLS.ICON_CLEAR,\n            overflow: 'Show',\n            align: 'Right'\n          };\n          break;\n        case 'View':\n          {\n            var viewText = void 0;\n            if (propItem && propItem.text) {\n              viewText = propItem.text;\n            } else {\n              viewText = getLocaleText(this.parent, 'View');\n            }\n            item = {\n              id: itemId,\n              tooltipText: itemTooltip,\n              prefixIcon: this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE,\n              overflow: 'Show',\n              align: 'Right',\n              text: itemText,\n              showTextOn: 'Overflow',\n              template: '<button id=\"' + itemId + '\" class=\"e-tbar-btn e-tbtn-txt\" tabindex=\"-1\" aria-label=' + viewText + '></button>'\n            };\n            break;\n          }\n        case 'Details':\n          item = {\n            id: itemId,\n            tooltipText: itemTooltip,\n            prefixIcon: CLS.ICON_DETAILS,\n            overflow: 'Show',\n            align: 'Right',\n            text: itemText,\n            showTextOn: 'Overflow'\n          };\n          break;\n        case 'NewFolder':\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            prefixIcon: CLS.ICON_NEWFOLDER,\n            showTextOn: mode\n          };\n          break;\n        case 'Cut':\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            prefixIcon: CLS.ICON_CUT,\n            showTextOn: mode\n          };\n          break;\n        case 'Copy':\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            prefixIcon: CLS.ICON_COPY,\n            showTextOn: mode\n          };\n          break;\n        case 'Paste':\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            prefixIcon: CLS.ICON_PASTE,\n            showTextOn: mode\n          };\n          break;\n        case 'Delete':\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            prefixIcon: CLS.ICON_DELETE,\n            showTextOn: mode\n          };\n          break;\n        case 'Rename':\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            prefixIcon: CLS.ICON_RENAME,\n            showTextOn: mode\n          };\n          break;\n        case 'Download':\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            prefixIcon: CLS.ICON_DOWNLOAD,\n            showTextOn: mode\n          };\n          break;\n        case 'SelectAll':\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            prefixIcon: CLS.ICON_SELECTALL,\n            showTextOn: mode\n          };\n          break;\n        default:\n          item = {\n            id: itemId,\n            text: itemText,\n            tooltipText: itemTooltip,\n            template: ''\n          };\n          break;\n      }\n      if (this.parent.toolbarItems.length > 0 && propItem) {\n        var mergedItems = Object.assign({}, item, propItem);\n        items.push(mergedItems);\n      } else {\n        items.push(item);\n      }\n    }\n    return items;\n  };\n  Toolbar.prototype.getItemModel = function (propItem) {\n    var item = {};\n    if (propItem.id) {\n      item.id = propItem.id;\n    }\n    if (propItem.text) {\n      item.text = propItem.text;\n    }\n    if (propItem.tooltipText) {\n      item.tooltipText = propItem.tooltipText;\n    }\n    if (propItem.prefixIcon) {\n      item.prefixIcon = propItem.prefixIcon;\n    }\n    if (propItem.cssClass) {\n      item.cssClass = propItem.cssClass;\n    }\n    if (propItem.showTextOn !== 'Both') {\n      item.showTextOn = propItem.showTextOn;\n    }\n    if (propItem.template) {\n      item.template = propItem.template;\n    }\n    if (propItem.disabled) {\n      item.disabled = propItem.disabled;\n    }\n    if (propItem.width !== 'auto') {\n      item.width = propItem.width;\n    }\n    if (propItem.suffixIcon) {\n      item.suffixIcon = propItem.suffixIcon;\n    }\n    if (propItem.align !== 'Left') {\n      item.align = propItem.align;\n    }\n    if (propItem.overflow !== 'None') {\n      item.overflow = propItem.overflow;\n    }\n    if (propItem.htmlAttributes) {\n      item.htmlAttributes = propItem.htmlAttributes;\n    }\n    if (propItem.type !== 'Button') {\n      item.type = propItem.type;\n    }\n    if (propItem.visible !== true) {\n      item.visible = propItem.visible;\n    }\n    if (propItem.showAlwaysInPopup) {\n      item.showAlwaysInPopup = propItem.showAlwaysInPopup;\n    }\n    if (propItem.tabIndex !== -1) {\n      item.tabIndex = propItem.tabIndex;\n    }\n    return item;\n  };\n  Toolbar.prototype.getId = function (id) {\n    return this.parent.element.id + '_tb_' + id.toLowerCase();\n  };\n  Toolbar.prototype.addEventListener = function () {\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.parent.on(events.selectionChanged, this.onSelectionChanged, this);\n    this.parent.on(events.layoutChange, this.onLayoutChange, this);\n    this.parent.on(events.showPaste, this.showPaste, this);\n    this.parent.on(events.hidePaste, this.hidePaste, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.sortByChange, this.updateSortByButton, this);\n  };\n  Toolbar.prototype.reRenderToolbar = function (e) {\n    var _this = this;\n    var itemsToProcess = [];\n    if (this.parent.toolbarItems.length > 0) {\n      itemsToProcess = this.parent.toolbarItems.map(function (item) {\n        return item.name;\n      });\n    } else if (e.newProp.toolbarSettings.items !== undefined) {\n      itemsToProcess = e.newProp.toolbarSettings.items.map(function (item) {\n        return item.trim();\n      });\n    }\n    if (itemsToProcess.length > 0) {\n      this.items = this.toolbarItemData(this.getItems(itemsToProcess));\n      var eventArgs = {\n        items: this.items\n      };\n      this.parent.trigger('toolbarCreate', eventArgs, function (toolbarCreateArgs) {\n        if (_this.buttonObj) {\n          _this.buttonObj.destroy();\n        }\n        if (_this.layoutBtnObj) {\n          _this.layoutBtnObj.destroy();\n        }\n        _this.items = toolbarCreateArgs.items;\n        _this.toolbarObj.items = _this.items;\n        _this.toolbarObj.dataBind();\n        _this.toolbarCreateHandler();\n      });\n    }\n  };\n  Toolbar.prototype.onSelectionChanged = function () {\n    this.hideStatus();\n    this.hideItems(this.single, true);\n    this.hideItems(this.selection, false);\n    if (this.parent.selectedItems.length === 1) {\n      this.hideItems(this.single, false);\n      this.hideItems(this.selection, true);\n    } else if (this.parent.selectedItems.length > 1) {\n      this.hideItems(this.multiple, false);\n      this.hideItems(this.selection, true);\n    }\n    var ele = select('#' + this.getId('Selection'), this.toolbarObj.element);\n    if (this.parent.selectedItems.length > 0 && ele && !this.parent.enableVirtualization) {\n      var txt = void 0;\n      if (this.parent.selectedItems.length === 1) {\n        txt = this.parent.selectedItems.length + ' ' + getLocaleText(this.parent, 'Item-Selection');\n      } else {\n        txt = this.parent.selectedItems.length + ' ' + getLocaleText(this.parent, 'Items-Selection');\n      }\n      select('.e-tbar-btn-text', ele).textContent = txt;\n      this.toolbarObj.hideItem(ele.parentElement, false);\n    }\n  };\n  Toolbar.prototype.hideItems = function (tools, toHide) {\n    for (var i = 0; i < tools.length; i++) {\n      var ele = select('#' + this.getId(tools[i]), this.parent.element);\n      if (ele) {\n        this.toolbarObj.hideItem(ele.parentElement, toHide);\n      }\n    }\n  };\n  Toolbar.prototype.hideStatus = function () {\n    var ele = select('#' + this.getId('Selection'), this.toolbarObj.element);\n    if (ele) {\n      this.toolbarObj.hideItem(ele.parentElement, true);\n    }\n  };\n  Toolbar.prototype.showPaste = function () {\n    this.hideItems(['Paste'], false);\n  };\n  Toolbar.prototype.hidePaste = function () {\n    this.hideItems(['Paste'], true);\n  };\n  Toolbar.prototype.onLayoutChange = function () {\n    if (this.layoutBtnObj) {\n      this.layoutBtnObj.iconCss = this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE;\n      var items = this.layoutBtnObj.items;\n      for (var itemCount = 0; itemCount < items.length; itemCount++) {\n        if (items[itemCount].id === this.getPupupId('large')) {\n          items[itemCount].iconCss = this.parent.view === 'LargeIcons' ? CLS.TB_OPTION_TICK : '';\n        } else if (items[itemCount].id === this.getPupupId('details')) {\n          items[itemCount].iconCss = this.parent.view === 'Details' ? CLS.TB_OPTION_TICK : '';\n        }\n      }\n    }\n  };\n  Toolbar.prototype.removeEventListener = function () {\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.parent.off(events.selectionChanged, this.onSelectionChanged);\n    this.parent.off(events.layoutChange, this.onLayoutChange);\n    this.parent.off(events.showPaste, this.showPaste);\n    this.parent.off(events.hidePaste, this.hidePaste);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.sortByChange, this.updateSortByButton);\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns module name.\n   * @private\n   */\n  Toolbar.prototype.getModuleName = function () {\n    return 'toolbar';\n  };\n  Toolbar.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName() && e.module !== 'common') {\n      /* istanbul ignore next */\n      return;\n    }\n    for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'cssClass':\n          if (this.buttonObj) {\n            this.buttonObj.cssClass = getCssClass(this.parent, CLS.ROOT_POPUP);\n          }\n          if (this.layoutBtnObj) {\n            this.layoutBtnObj.cssClass = getCssClass(this.parent, 'e-caret-hide ' + CLS.ROOT_POPUP);\n          }\n          break;\n        case 'height':\n        case 'width':\n          this.toolbarObj.refreshOverflow();\n          break;\n        case 'toolbarSettings':\n        case 'toolbarItems':\n          this.reRenderToolbar(e);\n          break;\n      }\n    }\n  };\n  Toolbar.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.removeEventListener();\n    if (this.buttonObj) {\n      this.buttonObj.destroy();\n    }\n    if (this.layoutBtnObj) {\n      this.layoutBtnObj.destroy();\n    }\n    this.toolbarObj.destroy();\n    this.parent.refreshLayout();\n  };\n  Toolbar.prototype.enableItems = function (items, isEnable) {\n    for (var i = 0; i < items.length; i++) {\n      var ele = select('#' + this.getId(items[i]), this.parent.element);\n      if (ele) {\n        this.toolbarObj.enableItems(ele.parentElement, isEnable);\n      }\n    }\n  };\n  return Toolbar;\n}();\nexport { Toolbar };","map":{"version":3,"names":["Toolbar","BaseToolbar","select","isNullOrUndefined","isNOU","closest","selectAll","createDialog","events","CLS","refresh","getPathObject","getLocaleText","getCssClass","sortbyClickHandler","createDeniedDialog","updateLayout","GetDetails","DropDownButton","cutFiles","copyFiles","pasteHandler","hasEditAccess","doDownload","createNewFolder","uploadItem","parent","default","single","multiple","selection","render","addEventListener","prototype","_this","items","toolbarItemData","getItems","toolbarSettings","map","item","trim","eventArgs","trigger","toolbarCreateArgs","toolbarObj","created","toolbarCreateHandler","bind","overflowMode","clicked","onClicked","enableHtmlSanitizer","enableRtl","isStringTemplate","root","appendTo","element","id","TOOLBAR_ID","getItemIndex","itemId","getId","i","length","currItems","slice","isDevice","allowMultiSelection","push","toolbarItems","name","args","tool","substr","details","itemData","notify","selectedData","cancel","fileDetails","toolbarClickArgs","sItems","target","originalEvent","TB_ITEM","classList","contains","permissionEdit","detailsInit","selectedItems","activeModule","path","folderPath","renameInit","selectAllInit","clearAllInit","getPupupId","text","iconCss","sortBy","TB_OPTION_DOT","separator","sortOrder","TB_OPTION_TICK","buttonObj","cssClass","ROOT_POPUP","ICON_SHORTBY","gridSpan_1","ICON_GRID","MENU_ICON","largeIconSpan_1","ICON_LARGE","layoutItems","view","layoutBtnObj","layoutChange","content","beforeItemRender","tickIcon","viewText","iconClass","innerHTML","span","firstChild","className","removeChild","hideItems","hideStatus","portals","concat","btnElement","_loop_1","btnCount","onkeydown","e","keyCode","preventDefault","onkeyup","click","refreshLayout","updateSortByButton","itemCount","toLowerCase","data","mode","isMobile","propItem","getItemModel","parseInt","toString","itemText","itemTooltip","type","tooltipText","prefixIcon","ICON_UPLOAD","showTextOn","spanElement","template","ICON_REFRESH","suffixIcon","ICON_CLEAR","overflow","align","ICON_DETAILS","ICON_NEWFOLDER","ICON_CUT","ICON_COPY","ICON_PASTE","ICON_DELETE","ICON_RENAME","ICON_DOWNLOAD","ICON_SELECTALL","mergedItems","Object","assign","disabled","width","htmlAttributes","visible","showAlwaysInPopup","tabIndex","on","modelChanged","onPropertyChanged","selectionChanged","onSelectionChanged","onLayoutChange","showPaste","hidePaste","destroy","sortByChange","reRenderToolbar","itemsToProcess","newProp","undefined","dataBind","ele","enableVirtualization","txt","textContent","hideItem","parentElement","tools","toHide","removeEventListener","off","getModuleName","module","_i","_a","keys","prop","refreshOverflow","isDestroyed","enableItems","isEnable"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-filemanager/src/file-manager/actions/toolbar.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Toolbar as BaseToolbar } from '@syncfusion/ej2-navigations';\nimport { select, isNullOrUndefined as isNOU, closest, selectAll } from '@syncfusion/ej2-base';\nimport { createDialog } from '../pop-up/dialog';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\nimport { refresh, getPathObject, getLocaleText, getCssClass, sortbyClickHandler } from '../common/utility';\nimport { createDeniedDialog, updateLayout } from '../common/utility';\nimport { GetDetails } from '../common/operations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { cutFiles, copyFiles, pasteHandler, hasEditAccess } from '../common/index';\nimport { doDownload, createNewFolder, uploadItem } from '../common/index';\n/**\n * Toolbar module\n */\nvar Toolbar = /** @class */ (function () {\n    /**\n     * Constructor for the Toolbar module\n     *\n     * @hidden\n     * @param {IFileManager} parent - specifies the parent element.\n     * @private\n     */\n    function Toolbar(parent) {\n        this.default = ['Delete', 'Rename', 'Download', 'Cut', 'Copy', 'Paste'];\n        this.single = ['Delete', 'Rename', 'Download', 'Cut', 'Copy'];\n        this.multiple = ['Delete', 'Download', 'Cut', 'Copy', 'Refresh'];\n        this.selection = ['NewFolder', 'Upload', 'SortBy', 'Refresh'];\n        this.parent = parent;\n        this.render();\n        this.addEventListener();\n    }\n    Toolbar.prototype.render = function () {\n        var _this = this;\n        this.items = this.toolbarItemData(this.getItems(this.parent.toolbarSettings.items.map(function (item) { return item.trim(); })));\n        var eventArgs = { items: this.items };\n        this.parent.trigger('toolbarCreate', eventArgs, function (toolbarCreateArgs) {\n            _this.items = toolbarCreateArgs.items;\n            _this.toolbarObj = new BaseToolbar({\n                items: _this.items,\n                created: _this.toolbarCreateHandler.bind(_this),\n                overflowMode: 'Popup',\n                clicked: _this.onClicked.bind(_this),\n                enableHtmlSanitizer: _this.parent.enableHtmlSanitizer,\n                enableRtl: _this.parent.enableRtl\n            });\n            _this.toolbarObj.isStringTemplate = true;\n            _this.toolbarObj.root = _this.parent.root ? _this.parent.root : _this.parent;\n            _this.toolbarObj.appendTo('#' + _this.parent.element.id + CLS.TOOLBAR_ID);\n        });\n    };\n    Toolbar.prototype.getItemIndex = function (item) {\n        var itemId = this.getId(item);\n        for (var i = 0; i < this.items.length; i++) {\n            if (this.items[i].id === itemId) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    Toolbar.prototype.getItems = function (items) {\n        var currItems = items.slice();\n        if (this.parent.isDevice && this.parent.allowMultiSelection) {\n            currItems.push('SelectAll');\n        }\n        if (this.parent.toolbarItems.length > 0) {\n            currItems = this.parent.toolbarItems.map(function (item) { return item.name; });\n        }\n        return currItems;\n    };\n    /* istanbul ignore next */\n    Toolbar.prototype.onClicked = function (args) {\n        var _this = this;\n        if (isNOU(args.item) || !args.item.id) {\n            return;\n        }\n        var tool = args.item.id.substr((this.parent.element.id + '_tb_').length);\n        var details;\n        if (tool === 'refresh' || tool === 'newfolder' || tool === 'upload') {\n            details = [getPathObject(this.parent)];\n            this.parent.itemData = details;\n        }\n        else {\n            this.parent.notify(events.selectedData, {});\n            details = this.parent.itemData;\n        }\n        var eventArgs = { cancel: false, fileDetails: details, item: args.item };\n        this.parent.trigger('toolbarClick', eventArgs, function (toolbarClickArgs) {\n            var sItems;\n            var target;\n            if (!toolbarClickArgs.cancel) {\n                switch (tool) {\n                    case 'sortby':\n                        target = closest(args.originalEvent.target, '.' + CLS.TB_ITEM);\n                        if (target && target.classList.contains('e-toolbar-popup')) {\n                            args.cancel = true;\n                        }\n                        break;\n                    case 'newfolder':\n                        createNewFolder(_this.parent);\n                        break;\n                    case 'cut':\n                        cutFiles(_this.parent);\n                        break;\n                    case 'copy':\n                        copyFiles(_this.parent);\n                        break;\n                    case 'delete':\n                        for (var i = 0; i < details.length; i++) {\n                            if (!hasEditAccess(details[i])) {\n                                createDeniedDialog(_this.parent, details[i], events.permissionEdit);\n                                return;\n                            }\n                        }\n                        createDialog(_this.parent, 'Delete');\n                        break;\n                    case 'details':\n                        _this.parent.notify(events.detailsInit, {});\n                        sItems = _this.parent.selectedItems;\n                        if (_this.parent.activeModule === 'navigationpane') {\n                            sItems = [];\n                        }\n                        GetDetails(_this.parent, sItems, _this.parent.path, 'details');\n                        break;\n                    case 'paste':\n                        _this.parent.folderPath = '';\n                        pasteHandler(_this.parent);\n                        break;\n                    case 'refresh':\n                        refresh(_this.parent);\n                        break;\n                    case 'download':\n                        doDownload(_this.parent);\n                        break;\n                    case 'rename':\n                        if (!hasEditAccess(details[0])) {\n                            createDeniedDialog(_this.parent, details[0], events.permissionEdit);\n                        }\n                        else {\n                            _this.parent.notify(events.renameInit, {});\n                            createDialog(_this.parent, 'Rename');\n                        }\n                        break;\n                    case 'upload':\n                        uploadItem(_this.parent);\n                        break;\n                    case 'selectall':\n                        _this.parent.notify(events.selectAllInit, {});\n                        break;\n                    case 'selection':\n                        _this.parent.notify(events.clearAllInit, {});\n                        break;\n                }\n            }\n        });\n    };\n    Toolbar.prototype.toolbarCreateHandler = function () {\n        var _this = this;\n        if (!isNOU(select('#' + this.getId('SortBy'), this.parent.element))) {\n            var items = [\n                { id: this.getPupupId('name'), text: getLocaleText(this.parent, 'Name'),\n                    iconCss: this.parent.sortBy === 'name' ? CLS.TB_OPTION_DOT : '' },\n                { id: this.getPupupId('size'), text: getLocaleText(this.parent, 'Size'),\n                    iconCss: this.parent.sortBy === 'size' ? CLS.TB_OPTION_DOT : '' },\n                { id: this.getPupupId('date'), text: getLocaleText(this.parent, 'DateModified'),\n                    iconCss: this.parent.sortBy === '_fm_modified' ? CLS.TB_OPTION_DOT : '' },\n                { separator: true },\n                { id: this.getPupupId('ascending'), text: getLocaleText(this.parent, 'Ascending'),\n                    iconCss: this.parent.sortOrder === 'Ascending' ? CLS.TB_OPTION_TICK : '' },\n                { id: this.getPupupId('descending'), text: getLocaleText(this.parent, 'Descending'),\n                    iconCss: this.parent.sortOrder === 'Descending' ? CLS.TB_OPTION_TICK : '' },\n                { id: this.getPupupId('none'), text: getLocaleText(this.parent, 'None'),\n                    iconCss: this.parent.sortOrder === 'None' ? CLS.TB_OPTION_TICK : '' }\n            ];\n            this.buttonObj = new DropDownButton({\n                items: items, cssClass: getCssClass(this.parent, CLS.ROOT_POPUP),\n                select: sortbyClickHandler.bind(this, this.parent),\n                enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                enableRtl: this.parent.enableRtl, iconCss: CLS.ICON_SHORTBY\n            });\n            this.buttonObj.isStringTemplate = true;\n            this.buttonObj.appendTo('#' + this.getId('SortBy'));\n        }\n        if (!isNOU(select('#' + this.getId('View'), this.parent.element))) {\n            var gridSpan_1 = '<span class=\"' + CLS.ICON_GRID + ' ' + CLS.MENU_ICON + '\"></span>';\n            var largeIconSpan_1 = '<span class=\"' + CLS.ICON_LARGE + ' ' + CLS.MENU_ICON + '\"></span>';\n            var layoutItems = [\n                {\n                    id: this.getPupupId('large'), text: getLocaleText(this.parent, 'View-LargeIcons'),\n                    iconCss: this.parent.view === 'Details' ? '' : CLS.TB_OPTION_TICK\n                },\n                {\n                    id: this.getPupupId('details'), text: getLocaleText(this.parent, 'View-Details'),\n                    iconCss: this.parent.view === 'Details' ? CLS.TB_OPTION_TICK : ''\n                }\n            ];\n            this.layoutBtnObj = new DropDownButton({\n                iconCss: this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE,\n                cssClass: getCssClass(this.parent, 'e-caret-hide ' + CLS.ROOT_POPUP),\n                items: layoutItems, select: this.layoutChange.bind(this),\n                enableRtl: this.parent.enableRtl,\n                content: '<span class=\"e-tbar-btn-text\">' + getLocaleText(this.parent, 'View') + '</span>',\n                beforeItemRender: function (args) {\n                    var tickIcon = args.item.iconCss;\n                    var viewText = args.item.text === getLocaleText(_this.parent, 'View-LargeIcons');\n                    var iconClass = tickIcon ? ' e-menu-icon ' + tickIcon : '';\n                    args.element.innerHTML = '<span class=\"' + iconClass + '\"></span>' + (viewText ? largeIconSpan_1 : gridSpan_1) + args.item.text;\n                    var span = args.element.firstChild;\n                    if (span && span.className === '') {\n                        args.element.removeChild(span);\n                    }\n                }\n            });\n            this.layoutBtnObj.isStringTemplate = true;\n            this.layoutBtnObj.appendTo('#' + this.getId('View'));\n        }\n        this.hideItems(this.default, true);\n        this.hideStatus();\n        if (this.parent.portals && this.toolbarObj.portals) {\n            this.parent.portals = this.parent.portals.concat(this.toolbarObj.portals);\n            this.parent['renderReactTemplates']();\n        }\n        var btnElement = selectAll('.e-btn', this.toolbarObj.element);\n        var _loop_1 = function (btnCount) {\n            /* istanbul ignore next */\n            btnElement[btnCount].onkeydown = function (e) {\n                if (e.keyCode === 13 && !e.target.classList.contains('e-fe-popup')) {\n                    e.preventDefault();\n                }\n            };\n            btnElement[btnCount].onkeyup = function (e) {\n                if (e.keyCode === 13 && !e.target.classList.contains('e-fe-popup')) {\n                    btnElement[btnCount].click();\n                }\n            };\n        };\n        for (var btnCount = 0; btnCount < btnElement.length; btnCount++) {\n            _loop_1(btnCount);\n        }\n        this.parent.refreshLayout();\n    };\n    Toolbar.prototype.updateSortByButton = function () {\n        if (this.buttonObj) {\n            var items = this.buttonObj.items;\n            for (var itemCount = 0; itemCount < items.length; itemCount++) {\n                if (items[itemCount].id === this.getPupupId('name')) {\n                    items[itemCount].iconCss = this.parent.sortBy === 'name' ? CLS.TB_OPTION_DOT : '';\n                }\n                else if (items[itemCount].id === this.getPupupId('size')) {\n                    items[itemCount].iconCss = this.parent.sortBy === 'size' ? CLS.TB_OPTION_DOT : '';\n                }\n                else if (items[itemCount].id === this.getPupupId('date')) {\n                    if (this.parent.sortBy === 'dateModified' || this.parent.sortBy === 'dateCreated') {\n                        items[itemCount].iconCss = this.parent.sortBy === this.parent.sortBy ? CLS.TB_OPTION_DOT : '';\n                    }\n                    else {\n                        items[itemCount].iconCss = this.parent.sortBy === '_fm_modified' ? CLS.TB_OPTION_DOT : '';\n                    }\n                }\n                else if (items[itemCount].id === this.getPupupId('ascending')) {\n                    items[itemCount].iconCss = this.parent.sortOrder === 'Ascending' ? CLS.TB_OPTION_TICK : '';\n                }\n                else if (items[itemCount].id === this.getPupupId('descending')) {\n                    items[itemCount].iconCss = this.parent.sortOrder === 'Descending' ? CLS.TB_OPTION_TICK : '';\n                }\n                else if (items[itemCount].id === this.getPupupId('none')) {\n                    items[itemCount].iconCss = this.parent.sortOrder === 'None' ? CLS.TB_OPTION_TICK : '';\n                }\n            }\n        }\n    };\n    Toolbar.prototype.getPupupId = function (id) {\n        return this.parent.element.id + '_ddl_' + id.toLowerCase();\n    };\n    Toolbar.prototype.layoutChange = function (args) {\n        if (this.parent.view === 'Details') {\n            if (args.item.id === this.getPupupId('large')) {\n                updateLayout(this.parent, 'LargeIcons');\n            }\n        }\n        else {\n            if (args.item.id === this.getPupupId('details')) {\n                updateLayout(this.parent, 'Details');\n            }\n        }\n    };\n    Toolbar.prototype.toolbarItemData = function (data) {\n        var items = [];\n        var mode = 'Both';\n        if (this.parent.isMobile) {\n            mode = 'Overflow';\n        }\n        for (var i = 0; i < data.length; i++) {\n            var item = void 0;\n            var propItem = void 0;\n            if (this.parent.toolbarItems.length > 0) {\n                propItem = this.getItemModel(this.parent.toolbarItems[parseInt(i.toString(), 10)]);\n            }\n            var itemId = this.getId(data[i]);\n            var itemText = getLocaleText(this.parent, data[i]);\n            var itemTooltip = getLocaleText(this.parent, 'Tooltip-' + data[i]);\n            switch (data[i]) {\n                case '|':\n                    item = { type: 'Separator' };\n                    break;\n                case 'Upload':\n                    item = { id: itemId, text: itemText, tooltipText: itemTooltip, prefixIcon: CLS.ICON_UPLOAD, showTextOn: mode };\n                    break;\n                case 'SortBy': {\n                    var spanElement = '<span class=\"e-tbar-btn-text e-tbar-ddb-text\">' + itemText + '</span>';\n                    if (propItem && propItem.text) {\n                        spanElement = '<span class=\"e-tbar-btn-text e-tbar-ddb-text\">' + propItem.text + '</span>';\n                    }\n                    item = {\n                        id: itemId, tooltipText: itemTooltip,\n                        template: '<button id=\"' + itemId + '\" class=\"e-tbar-btn e-tbtn-txt\" tabindex=\"-1\">' + spanElement + '</button>'\n                    };\n                    break;\n                }\n                case 'Refresh':\n                    item = { id: itemId, text: itemText, tooltipText: itemTooltip, prefixIcon: CLS.ICON_REFRESH, showTextOn: mode };\n                    break;\n                case 'Selection':\n                    item = {\n                        id: itemId, text: itemText, tooltipText: itemTooltip, suffixIcon: CLS.ICON_CLEAR, overflow: 'Show',\n                        align: 'Right'\n                    };\n                    break;\n                case 'View': {\n                    var viewText = void 0;\n                    if (propItem && propItem.text) {\n                        viewText = propItem.text;\n                    }\n                    else {\n                        viewText = getLocaleText(this.parent, 'View');\n                    }\n                    item = {\n                        id: itemId, tooltipText: itemTooltip, prefixIcon: this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE,\n                        overflow: 'Show', align: 'Right', text: itemText, showTextOn: 'Overflow',\n                        template: '<button id=\"' + itemId + '\" class=\"e-tbar-btn e-tbtn-txt\" tabindex=\"-1\" aria-label=' +\n                            viewText + '></button>'\n                    };\n                    break;\n                }\n                case 'Details':\n                    item = {\n                        id: itemId, tooltipText: itemTooltip, prefixIcon: CLS.ICON_DETAILS, overflow: 'Show', align: 'Right',\n                        text: itemText, showTextOn: 'Overflow'\n                    };\n                    break;\n                case 'NewFolder':\n                    item = { id: itemId, text: itemText, tooltipText: itemTooltip, prefixIcon: CLS.ICON_NEWFOLDER, showTextOn: mode };\n                    break;\n                case 'Cut':\n                    item = { id: itemId, text: itemText, tooltipText: itemTooltip, prefixIcon: CLS.ICON_CUT, showTextOn: mode };\n                    break;\n                case 'Copy':\n                    item = { id: itemId, text: itemText, tooltipText: itemTooltip, prefixIcon: CLS.ICON_COPY, showTextOn: mode };\n                    break;\n                case 'Paste':\n                    item = { id: itemId, text: itemText, tooltipText: itemTooltip, prefixIcon: CLS.ICON_PASTE, showTextOn: mode };\n                    break;\n                case 'Delete':\n                    item = { id: itemId, text: itemText, tooltipText: itemTooltip, prefixIcon: CLS.ICON_DELETE, showTextOn: mode };\n                    break;\n                case 'Rename':\n                    item = { id: itemId, text: itemText, tooltipText: itemTooltip, prefixIcon: CLS.ICON_RENAME, showTextOn: mode };\n                    break;\n                case 'Download':\n                    item = { id: itemId, text: itemText, tooltipText: itemTooltip, prefixIcon: CLS.ICON_DOWNLOAD, showTextOn: mode };\n                    break;\n                case 'SelectAll':\n                    item = { id: itemId, text: itemText, tooltipText: itemTooltip, prefixIcon: CLS.ICON_SELECTALL, showTextOn: mode };\n                    break;\n                default:\n                    item = { id: itemId, text: itemText, tooltipText: itemTooltip, template: '' };\n                    break;\n            }\n            if (this.parent.toolbarItems.length > 0 && propItem) {\n                var mergedItems = Object.assign({}, item, propItem);\n                items.push(mergedItems);\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    Toolbar.prototype.getItemModel = function (propItem) {\n        var item = {};\n        if (propItem.id) {\n            item.id = propItem.id;\n        }\n        if (propItem.text) {\n            item.text = propItem.text;\n        }\n        if (propItem.tooltipText) {\n            item.tooltipText = propItem.tooltipText;\n        }\n        if (propItem.prefixIcon) {\n            item.prefixIcon = propItem.prefixIcon;\n        }\n        if (propItem.cssClass) {\n            item.cssClass = propItem.cssClass;\n        }\n        if (propItem.showTextOn !== 'Both') {\n            item.showTextOn = propItem.showTextOn;\n        }\n        if (propItem.template) {\n            item.template = propItem.template;\n        }\n        if (propItem.disabled) {\n            item.disabled = propItem.disabled;\n        }\n        if (propItem.width !== 'auto') {\n            item.width = propItem.width;\n        }\n        if (propItem.suffixIcon) {\n            item.suffixIcon = propItem.suffixIcon;\n        }\n        if (propItem.align !== 'Left') {\n            item.align = propItem.align;\n        }\n        if (propItem.overflow !== 'None') {\n            item.overflow = propItem.overflow;\n        }\n        if (propItem.htmlAttributes) {\n            item.htmlAttributes = propItem.htmlAttributes;\n        }\n        if (propItem.type !== 'Button') {\n            item.type = propItem.type;\n        }\n        if (propItem.visible !== true) {\n            item.visible = propItem.visible;\n        }\n        if (propItem.showAlwaysInPopup) {\n            item.showAlwaysInPopup = propItem.showAlwaysInPopup;\n        }\n        if (propItem.tabIndex !== -1) {\n            item.tabIndex = propItem.tabIndex;\n        }\n        return item;\n    };\n    Toolbar.prototype.getId = function (id) {\n        return this.parent.element.id + '_tb_' + id.toLowerCase();\n    };\n    Toolbar.prototype.addEventListener = function () {\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.selectionChanged, this.onSelectionChanged, this);\n        this.parent.on(events.layoutChange, this.onLayoutChange, this);\n        this.parent.on(events.showPaste, this.showPaste, this);\n        this.parent.on(events.hidePaste, this.hidePaste, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.sortByChange, this.updateSortByButton, this);\n    };\n    Toolbar.prototype.reRenderToolbar = function (e) {\n        var _this = this;\n        var itemsToProcess = [];\n        if (this.parent.toolbarItems.length > 0) {\n            itemsToProcess = this.parent.toolbarItems.map(function (item) {\n                return item.name;\n            });\n        }\n        else if (e.newProp.toolbarSettings.items !== undefined) {\n            itemsToProcess = e.newProp.toolbarSettings.items.map(function (item) {\n                return item.trim();\n            });\n        }\n        if (itemsToProcess.length > 0) {\n            this.items = this.toolbarItemData(this.getItems(itemsToProcess));\n            var eventArgs = { items: this.items };\n            this.parent.trigger('toolbarCreate', eventArgs, function (toolbarCreateArgs) {\n                if (_this.buttonObj) {\n                    _this.buttonObj.destroy();\n                }\n                if (_this.layoutBtnObj) {\n                    _this.layoutBtnObj.destroy();\n                }\n                _this.items = toolbarCreateArgs.items;\n                _this.toolbarObj.items = _this.items;\n                _this.toolbarObj.dataBind();\n                _this.toolbarCreateHandler();\n            });\n        }\n    };\n    Toolbar.prototype.onSelectionChanged = function () {\n        this.hideStatus();\n        this.hideItems(this.single, true);\n        this.hideItems(this.selection, false);\n        if (this.parent.selectedItems.length === 1) {\n            this.hideItems(this.single, false);\n            this.hideItems(this.selection, true);\n        }\n        else if (this.parent.selectedItems.length > 1) {\n            this.hideItems(this.multiple, false);\n            this.hideItems(this.selection, true);\n        }\n        var ele = select('#' + this.getId('Selection'), this.toolbarObj.element);\n        if (this.parent.selectedItems.length > 0 && ele && !this.parent.enableVirtualization) {\n            var txt = void 0;\n            if (this.parent.selectedItems.length === 1) {\n                txt = this.parent.selectedItems.length + ' ' + getLocaleText(this.parent, 'Item-Selection');\n            }\n            else {\n                txt = this.parent.selectedItems.length + ' ' + getLocaleText(this.parent, 'Items-Selection');\n            }\n            select('.e-tbar-btn-text', ele).textContent = txt;\n            this.toolbarObj.hideItem(ele.parentElement, false);\n        }\n    };\n    Toolbar.prototype.hideItems = function (tools, toHide) {\n        for (var i = 0; i < tools.length; i++) {\n            var ele = select('#' + this.getId(tools[i]), this.parent.element);\n            if (ele) {\n                this.toolbarObj.hideItem(ele.parentElement, toHide);\n            }\n        }\n    };\n    Toolbar.prototype.hideStatus = function () {\n        var ele = select('#' + this.getId('Selection'), this.toolbarObj.element);\n        if (ele) {\n            this.toolbarObj.hideItem(ele.parentElement, true);\n        }\n    };\n    Toolbar.prototype.showPaste = function () {\n        this.hideItems(['Paste'], false);\n    };\n    Toolbar.prototype.hidePaste = function () {\n        this.hideItems(['Paste'], true);\n    };\n    Toolbar.prototype.onLayoutChange = function () {\n        if (this.layoutBtnObj) {\n            this.layoutBtnObj.iconCss = this.parent.view === 'Details' ? CLS.ICON_GRID : CLS.ICON_LARGE;\n            var items = this.layoutBtnObj.items;\n            for (var itemCount = 0; itemCount < items.length; itemCount++) {\n                if (items[itemCount].id === this.getPupupId('large')) {\n                    items[itemCount].iconCss = this.parent.view === 'LargeIcons' ? CLS.TB_OPTION_TICK : '';\n                }\n                else if (items[itemCount].id === this.getPupupId('details')) {\n                    items[itemCount].iconCss = this.parent.view === 'Details' ? CLS.TB_OPTION_TICK : '';\n                }\n            }\n        }\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.selectionChanged, this.onSelectionChanged);\n        this.parent.off(events.layoutChange, this.onLayoutChange);\n        this.parent.off(events.showPaste, this.showPaste);\n        this.parent.off(events.hidePaste, this.hidePaste);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.sortByChange, this.updateSortByButton);\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns module name.\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() && e.module !== 'common') {\n            /* istanbul ignore next */\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (this.buttonObj) {\n                        this.buttonObj.cssClass = getCssClass(this.parent, CLS.ROOT_POPUP);\n                    }\n                    if (this.layoutBtnObj) {\n                        this.layoutBtnObj.cssClass = getCssClass(this.parent, 'e-caret-hide ' + CLS.ROOT_POPUP);\n                    }\n                    break;\n                case 'height':\n                case 'width':\n                    this.toolbarObj.refreshOverflow();\n                    break;\n                case 'toolbarSettings':\n                case 'toolbarItems':\n                    this.reRenderToolbar(e);\n                    break;\n            }\n        }\n    };\n    Toolbar.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        if (this.buttonObj) {\n            this.buttonObj.destroy();\n        }\n        if (this.layoutBtnObj) {\n            this.layoutBtnObj.destroy();\n        }\n        this.toolbarObj.destroy();\n        this.parent.refreshLayout();\n    };\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        for (var i = 0; i < items.length; i++) {\n            var ele = select('#' + this.getId(items[i]), this.parent.element);\n            if (ele) {\n                this.toolbarObj.enableItems(ele.parentElement, isEnable);\n            }\n        }\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}