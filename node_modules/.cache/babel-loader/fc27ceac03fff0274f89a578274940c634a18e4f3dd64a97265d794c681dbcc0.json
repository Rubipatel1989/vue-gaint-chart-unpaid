{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { PdfGanttTaskbarCollection } from './pdf-taskbar';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { PointF, PdfPen, PdfColor } from '@syncfusion/ej2-pdf-export';\nimport { PdfTreeGrid } from './pdf-treegrid';\nimport { PdfTimeline } from './pdf-timeline';\nimport { pixelToPoint, pointToPixel } from '../base/utils';\nimport { PdfGanttPredecessor } from './pdf-connector-line';\nimport { EventMarker } from './pdf-event-marker';\n/**\n *\n */\nvar PdfGantt = /** @class */function (_super) {\n  __extends(PdfGantt, _super);\n  function PdfGantt(parent) {\n    var _this = _super.call(this) || this;\n    _this.exportProps = {};\n    _this.changeCloneProjectDates = false;\n    _this.parent = parent;\n    _this.chartHeader = new PdfTimeline(_this);\n    _this.eventMarker = new EventMarker(parent);\n    _this.predecessor = new PdfGanttPredecessor(parent, _this);\n    _this.headerDetails = [];\n    _this.pdfPageDetail = [];\n    _this.taskbarCollection = [];\n    _this.predecessorCollection = [];\n    return _this;\n  }\n  Object.defineProperty(PdfGantt.prototype, \"taskbar\", {\n    get: function () {\n      if (isNullOrUndefined(this.taskbars)) {\n        this.taskbars = new PdfGanttTaskbarCollection(this.parent);\n      }\n      return this.taskbars;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  PdfGantt.prototype.drawChart = function (result) {\n    this.result = result;\n    this.totalPages = this.result.page.section.count;\n    this.perColumnPages = this.totalPages / this.layouter.columnRanges.length;\n    this.calculateRange();\n    this.drawGantttChart();\n    this.drawPageBorder();\n  };\n  //Calcualte the header range for each pdf page based on schedule start and end date.\n  PdfGantt.prototype.calculateRange = function () {\n    var lastColumnRange = this.layouter.columnRanges[this.layouter.columnRanges.length - 1];\n    var totalColumnWidth = 0;\n    var isPageFinished = true;\n    var pageWidth = 0;\n    var remainWidth = 0;\n    var point = 0;\n    var headerWidth = pixelToPoint(this.chartHeader.width);\n    var timelineSettings = this.parent.timelineModule;\n    for (var index = lastColumnRange[0]; index <= lastColumnRange[1]; index++) {\n      totalColumnWidth += this.layouter.treegrid.columns.getColumn(index).width;\n    }\n    totalColumnWidth += 0.5;\n    if (totalColumnWidth + 100 < this.result.page.getClientSize().width) {\n      remainWidth = this.result.page.getClientSize().width - totalColumnWidth;\n      this.chartPageIndex = this.startPageIndex = this.totalPages - this.perColumnPages;\n      isPageFinished = false;\n      this.startPoint = new PointF(totalColumnWidth, 0);\n    } else {\n      this.result.page.section.add();\n      this.chartPageIndex = this.startPageIndex = this.totalPages;\n      isPageFinished = true;\n      this.startPoint = new PointF(point, 0);\n    }\n    while (Math.round(point) < Math.round(headerWidth)) {\n      if (isPageFinished) {\n        pageWidth = this.result.page.getClientSize().width;\n      } else {\n        pageWidth = remainWidth;\n        isPageFinished = true;\n      }\n      var detail = {};\n      var range = [];\n      var convertedWidth = pixelToPoint(this.chartHeader.bottomTierCellWidth);\n      var width = 0;\n      if (this.chartHeader.bottomTierCellWidth !== 0) {\n        width = Math.floor(pageWidth / convertedWidth) * convertedWidth;\n      }\n      range[0] = point;\n      if (headerWidth - point <= width) {\n        range[1] = headerWidth;\n        detail.totalWidth = pointToPixel(headerWidth - point);\n      } else {\n        range[1] = point + width;\n        detail.totalWidth = pointToPixel(width);\n      }\n      detail.startPoint = range[0];\n      detail.endPoint = range[1];\n      if (this.parent.cloneProjectStartDate.getHours() === 0 && this.parent.cloneProjectStartDate.getMinutes() === 0 && this.parent.cloneProjectStartDate.getSeconds() === 0) {\n        this.changeCloneProjectDates = true;\n        this.parent.cloneProjectStartDate.setHours(8);\n      }\n      var timelineStartDate = this.parent.dataOperation.getDateFromFormat(this.parent.timelineModule.timelineStartDate);\n      var count = isNullOrUndefined(timelineSettings.customTimelineSettings.bottomTier.count) ? timelineSettings.customTimelineSettings.topTier.count : timelineSettings.customTimelineSettings.bottomTier.count;\n      var scheduleType = timelineSettings.customTimelineSettings.bottomTier.unit === 'None' ? timelineSettings.customTimelineSettings.topTier.unit : timelineSettings.customTimelineSettings.bottomTier.unit;\n      switch (scheduleType) {\n        case 'Minutes':\n          {\n            detail.startDate = new Date(timelineStartDate.getTime());\n            var sDays = Math.floor(pointToPixel(detail.startPoint) / this.chartHeader.bottomTierCellWidth);\n            detail.startDate.setMinutes(detail.startDate.getMinutes() + sDays * count);\n            detail.startDate.setSeconds(detail.startDate.getSeconds() + 1);\n            detail.endDate = new Date(detail.startDate.getTime());\n            var eDays = Math.floor(pointToPixel(detail.endPoint - detail.startPoint) / this.chartHeader.bottomTierCellWidth);\n            detail.endDate.setMinutes(detail.endDate.getMinutes() + eDays * count);\n            break;\n          }\n        case 'Hour':\n          {\n            detail.startDate = new Date(timelineStartDate.getTime());\n            var sDays1 = Math.floor(pointToPixel(detail.startPoint) / this.chartHeader.bottomTierCellWidth);\n            detail.startDate.setHours(detail.startDate.getHours() + sDays1 * count);\n            detail.startDate.setMinutes(detail.startDate.getMinutes() + 1);\n            detail.endDate = new Date(detail.startDate.getTime());\n            var eDays1 = Math.floor(pointToPixel(detail.endPoint - detail.startPoint) / this.chartHeader.bottomTierCellWidth);\n            detail.endDate.setHours(detail.endDate.getHours() + eDays1 * count);\n            break;\n          }\n        case 'Day':\n          {\n            detail.startDate = new Date(timelineStartDate.getTime());\n            var startDays = Math.round(detail.startPoint / pixelToPoint(this.chartHeader.bottomTierCellWidth));\n            detail.startDate.setDate(detail.startDate.getDate() + startDays * count);\n            var endDays = Math.round((detail.endPoint - detail.startPoint) / pixelToPoint(this.chartHeader.bottomTierCellWidth)) - 1;\n            var startdate = detail.startDate;\n            startdate.setHours(0, 0, 0);\n            var secondsToAdd = this.parent.workingTimeRanges[0].to * 1000;\n            detail.endDate = new Date(startdate.getTime() + secondsToAdd);\n            detail.endDate.setDate(detail.startDate.getDate() + endDays * count);\n            break;\n          }\n        case 'Week':\n          {\n            detail.startDate = new Date(timelineStartDate.getTime());\n            var startDays1 = detail.startPoint / pixelToPoint(this.chartHeader.bottomTierCellWidth) * 7;\n            detail.startDate.setDate(detail.startDate.getDate() + startDays1 * count);\n            var endDays1 = Math.round((detail.endPoint - detail.startPoint) / pixelToPoint(this.chartHeader.bottomTierCellWidth)) * 7 - 1;\n            detail.endDate = new Date(detail.startDate.getTime());\n            detail.endDate.setDate(detail.startDate.getDate() + endDays1 * count);\n            break;\n          }\n        case 'Month':\n          {\n            detail.startDate = new Date(timelineStartDate.getTime());\n            var startDays2 = detail.startPoint / pixelToPoint(this.chartHeader.bottomTierCellWidth) * 31;\n            detail.startDate.setDate(detail.startDate.getDate() + startDays2 * count);\n            var endDays2 = Math.round((detail.endPoint - detail.startPoint) / pixelToPoint(this.chartHeader.bottomTierCellWidth)) * 31 - 1;\n            detail.endDate = new Date(detail.startDate.getTime());\n            detail.endDate.setDate(detail.startDate.getDate() + endDays2 * count);\n            break;\n          }\n        case 'Year':\n          {\n            detail.startDate = new Date(timelineStartDate.getTime());\n            var startDays3 = detail.startPoint / pixelToPoint(this.chartHeader.bottomTierCellWidth) * 365;\n            detail.startDate.setDate(detail.startDate.getDate() + startDays3 * count);\n            var endDays3 = Math.round((detail.endPoint - detail.startPoint) / pixelToPoint(this.chartHeader.bottomTierCellWidth)) * 365 - 1;\n            detail.endDate = new Date(detail.startDate.getTime());\n            detail.endDate.setDate(detail.startDate.getDate() + endDays3 * count);\n            break;\n          }\n      }\n      this.headerDetails.push(detail);\n      point += width;\n    }\n  };\n  PdfGantt.prototype.drawPageBorder = function () {\n    var pages = this.result.page.section.getPages();\n    for (var index = 0; index < pages.length; index++) {\n      var page = pages[index];\n      var graphics = page.graphics;\n      var pageSize = page.getClientSize();\n      var pen = new PdfPen(new PdfColor(206, 206, 206));\n      graphics.drawRectangle(pen, 0, 0, pageSize.width, pageSize.height);\n    }\n  };\n  //Draw the gantt chart side\n  PdfGantt.prototype.drawGantttChart = function () {\n    var _this = this;\n    var taskbarPoint = this.startPoint;\n    var pagePoint = new PointF();\n    var pageStartX = 0;\n    var cumulativeWidth = 0;\n    var cumulativeHeight = 0;\n    var pageData;\n    this.headerDetails.forEach(function (detail, index) {\n      var page = _this.result.page.section.getPages()[_this.startPageIndex];\n      page['contentWidth'] = _this.parent.pdfExportModule.gantt.taskbar.isAutoFit() ? pointToPixel(_this.headerDetails[index].endPoint - _this.headerDetails[index].startPoint) : _this.headerDetails[index].endPoint - _this.headerDetails[index].startPoint;\n      _this.chartHeader.drawTimeline(page, _this.startPoint, detail);\n      taskbarPoint.y = taskbarPoint.y + pixelToPoint(_this.parent.timelineModule.isSingleTier ? 45 : 60); // headerHeight\n      pageStartX = taskbarPoint.x;\n      cumulativeHeight = pixelToPoint(_this.parent.timelineModule.isSingleTier ? 45 : 60); // headerHeight\n      _this.headerDetails[_this.headerDetails.indexOf(detail)].startIndex = _this.startPageIndex;\n      _this.headerDetails[_this.headerDetails.indexOf(detail)].pageStartPoint = taskbarPoint;\n      _this.parent.eventMarkerColloction.map(function (eventMarker) {\n        var timelimeHeight = pixelToPoint(_this.parent.timelineModule.isSingleTier ? 45 : 60);\n        var pdfPage = _this.result.page.section.getPages()[_this.startPageIndex];\n        _this.eventMarker.drawEventMarker(pdfPage, taskbarPoint, cumulativeWidth, detail, eventMarker, timelimeHeight);\n      });\n      for (var i = 0; i < _this.taskbarCollection.length; i++) {\n        var task = _this.taskbarCollection[i];\n        var rowHeight = _this.rows.getRow(i + 1).height;\n        var pdfPage = _this.result.page.section.getPages()[_this.startPageIndex];\n        var graphics = pdfPage.graphics;\n        var pen = new PdfPen(new PdfColor(206, 206, 206));\n        var lineWidth = void 0;\n        if (page['contentWidth'] && (_this.parent.gridLines === 'Both' || _this.parent.gridLines === 'Horizontal')) {\n          lineWidth = _this.chartHeader.timelineWidth;\n          graphics.drawRectangle(pen, pageStartX, taskbarPoint.y, page['contentWidth'] + 0.5, rowHeight);\n        }\n        var isNextPage = task.drawTaskbar(pdfPage, taskbarPoint, detail, cumulativeWidth, rowHeight, _this.taskbarCollection[parseInt(i.toString(), 10)], lineWidth);\n        if (isNextPage) {\n          if (_this.enableHeader) {\n            taskbarPoint.y = pixelToPoint(_this.parent.timelineModule.isSingleTier ? 45 : 60);\n          } else {\n            taskbarPoint.y = 0;\n          }\n          _this.startPageIndex++;\n          pageData = {};\n          pageData.height = cumulativeHeight;\n          pageData.pageStartX = pageStartX;\n          pageData.startPoint = __assign({}, pagePoint);\n          if (_this.parent.pdfExportModule.gantt.taskbar.isAutoFit()) {\n            pageData.width = detail.totalWidth;\n          } else {\n            pageData.width = detail.totalWidth;\n          }\n          _this.pdfPageDetail.push(pageData);\n          pagePoint.y += pageData.height;\n          if (_this.enableHeader) {\n            cumulativeHeight = _this.chartHeader.height;\n          } else {\n            taskbarPoint.y = 0;\n            cumulativeHeight = 0;\n          }\n        }\n        taskbarPoint.y += rowHeight;\n        cumulativeHeight += rowHeight;\n        _this.parent.eventMarkerColloction.map(function (eventMarker) {\n          var timelimeHeight = pixelToPoint(_this.parent.timelineModule.isSingleTier ? 45 : 60);\n          var pdfPage = _this.result.page.section.getPages()[_this.startPageIndex];\n          _this.eventMarker.drawEventMarker(pdfPage, taskbarPoint, cumulativeWidth, detail, eventMarker, timelimeHeight);\n        });\n      }\n      _this.headerDetails[index].endIndex = _this.startPageIndex;\n      cumulativeWidth += detail.totalWidth;\n      pageData = {};\n      pageData.height = cumulativeHeight;\n      pageData.pageStartX = pageStartX;\n      pageData.startPoint = __assign({}, pagePoint);\n      if (_this.parent.pdfExportModule.gantt.taskbar.isAutoFit()) {\n        pageData.width = detail.totalWidth;\n      } else {\n        pageData.width = pixelToPoint(detail.totalWidth);\n      }\n      _this.pdfPageDetail.push(pageData);\n      pagePoint.x += pageData.width;\n      pagePoint.y = 0;\n      if (_this.enableHeader) {\n        cumulativeHeight = _this.chartHeader.height;\n      } else {\n        taskbarPoint.y = 0;\n      }\n      if (_this.headerDetails.indexOf(detail) !== _this.headerDetails.length - 1) {\n        _this.result.page.section.add();\n        _this.startPageIndex = _this.result.page.section.count - 1;\n        taskbarPoint = _this.startPoint = new PointF(0, 0);\n      }\n    });\n    // Draw predecessor line.\n    for (var i = 0; i < this.predecessorCollection.length; i++) {\n      var predecessor = this.predecessorCollection[i];\n      predecessor.drawPredecessor(this);\n    }\n  };\n  return PdfGantt;\n}(PdfTreeGrid);\nexport { PdfGantt };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","PdfGanttTaskbarCollection","isNullOrUndefined","PointF","PdfPen","PdfColor","PdfTreeGrid","PdfTimeline","pixelToPoint","pointToPixel","PdfGanttPredecessor","EventMarker","PdfGantt","_super","parent","_this","exportProps","changeCloneProjectDates","chartHeader","eventMarker","predecessor","headerDetails","pdfPageDetail","taskbarCollection","predecessorCollection","defineProperty","get","taskbars","enumerable","configurable","drawChart","result","totalPages","page","section","count","perColumnPages","layouter","columnRanges","calculateRange","drawGantttChart","drawPageBorder","lastColumnRange","totalColumnWidth","isPageFinished","pageWidth","remainWidth","point","headerWidth","width","timelineSettings","timelineModule","index","treegrid","columns","getColumn","getClientSize","chartPageIndex","startPageIndex","startPoint","add","Math","round","detail","range","convertedWidth","bottomTierCellWidth","floor","totalWidth","endPoint","cloneProjectStartDate","getHours","getMinutes","getSeconds","setHours","timelineStartDate","dataOperation","getDateFromFormat","customTimelineSettings","bottomTier","topTier","scheduleType","unit","startDate","Date","getTime","sDays","setMinutes","setSeconds","endDate","eDays","sDays1","eDays1","startDays","setDate","getDate","endDays","startdate","secondsToAdd","workingTimeRanges","to","startDays1","endDays1","startDays2","endDays2","startDays3","endDays3","push","pages","getPages","graphics","pageSize","pen","drawRectangle","height","taskbarPoint","pagePoint","pageStartX","cumulativeWidth","cumulativeHeight","pageData","forEach","pdfExportModule","gantt","taskbar","isAutoFit","drawTimeline","y","isSingleTier","x","indexOf","startIndex","pageStartPoint","eventMarkerColloction","map","timelimeHeight","pdfPage","drawEventMarker","task","rowHeight","rows","getRow","lineWidth","gridLines","timelineWidth","isNextPage","drawTaskbar","parseInt","toString","enableHeader","endIndex","drawPredecessor"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-gantt/src/gantt/export/pdf-gantt.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { PdfGanttTaskbarCollection } from './pdf-taskbar';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { PointF, PdfPen, PdfColor } from '@syncfusion/ej2-pdf-export';\nimport { PdfTreeGrid } from './pdf-treegrid';\nimport { PdfTimeline } from './pdf-timeline';\nimport { pixelToPoint, pointToPixel } from '../base/utils';\nimport { PdfGanttPredecessor } from './pdf-connector-line';\nimport { EventMarker } from './pdf-event-marker';\n/**\n *\n */\nvar PdfGantt = /** @class */ (function (_super) {\n    __extends(PdfGantt, _super);\n    function PdfGantt(parent) {\n        var _this = _super.call(this) || this;\n        _this.exportProps = {};\n        _this.changeCloneProjectDates = false;\n        _this.parent = parent;\n        _this.chartHeader = new PdfTimeline(_this);\n        _this.eventMarker = new EventMarker(parent);\n        _this.predecessor = new PdfGanttPredecessor(parent, _this);\n        _this.headerDetails = [];\n        _this.pdfPageDetail = [];\n        _this.taskbarCollection = [];\n        _this.predecessorCollection = [];\n        return _this;\n    }\n    Object.defineProperty(PdfGantt.prototype, \"taskbar\", {\n        get: function () {\n            if (isNullOrUndefined(this.taskbars)) {\n                this.taskbars = new PdfGanttTaskbarCollection(this.parent);\n            }\n            return this.taskbars;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfGantt.prototype.drawChart = function (result) {\n        this.result = result;\n        this.totalPages = this.result.page.section.count;\n        this.perColumnPages = this.totalPages / this.layouter.columnRanges.length;\n        this.calculateRange();\n        this.drawGantttChart();\n        this.drawPageBorder();\n    };\n    //Calcualte the header range for each pdf page based on schedule start and end date.\n    PdfGantt.prototype.calculateRange = function () {\n        var lastColumnRange = this.layouter.columnRanges[this.layouter.columnRanges.length - 1];\n        var totalColumnWidth = 0;\n        var isPageFinished = true;\n        var pageWidth = 0;\n        var remainWidth = 0;\n        var point = 0;\n        var headerWidth = pixelToPoint(this.chartHeader.width);\n        var timelineSettings = this.parent.timelineModule;\n        for (var index = lastColumnRange[0]; index <= lastColumnRange[1]; index++) {\n            totalColumnWidth += this.layouter.treegrid.columns.getColumn(index).width;\n        }\n        totalColumnWidth += 0.5;\n        if (totalColumnWidth + 100 < this.result.page.getClientSize().width) {\n            remainWidth = this.result.page.getClientSize().width - totalColumnWidth;\n            this.chartPageIndex = this.startPageIndex = this.totalPages - this.perColumnPages;\n            isPageFinished = false;\n            this.startPoint = new PointF(totalColumnWidth, 0);\n        }\n        else {\n            this.result.page.section.add();\n            this.chartPageIndex = this.startPageIndex = this.totalPages;\n            isPageFinished = true;\n            this.startPoint = new PointF(point, 0);\n        }\n        while (Math.round(point) < Math.round(headerWidth)) {\n            if (isPageFinished) {\n                pageWidth = this.result.page.getClientSize().width;\n            }\n            else {\n                pageWidth = remainWidth;\n                isPageFinished = true;\n            }\n            var detail = {};\n            var range = [];\n            var convertedWidth = pixelToPoint(this.chartHeader.bottomTierCellWidth);\n            var width = 0;\n            if (this.chartHeader.bottomTierCellWidth !== 0) {\n                width = (Math.floor(pageWidth / convertedWidth) * convertedWidth);\n            }\n            range[0] = point;\n            if (headerWidth - point <= width) {\n                range[1] = headerWidth;\n                detail.totalWidth = pointToPixel(headerWidth - point);\n            }\n            else {\n                range[1] = point + width;\n                detail.totalWidth = pointToPixel(width);\n            }\n            detail.startPoint = range[0];\n            detail.endPoint = range[1];\n            if (this.parent.cloneProjectStartDate.getHours() === 0 && this.parent.cloneProjectStartDate.getMinutes() === 0\n                && this.parent.cloneProjectStartDate.getSeconds() === 0) {\n                this.changeCloneProjectDates = true;\n                this.parent.cloneProjectStartDate.setHours(8);\n            }\n            var timelineStartDate = this.parent.dataOperation.getDateFromFormat(this.parent.timelineModule.timelineStartDate);\n            var count = isNullOrUndefined(timelineSettings.customTimelineSettings.bottomTier.count) ?\n                timelineSettings.customTimelineSettings.topTier.count : timelineSettings.customTimelineSettings.bottomTier.count;\n            var scheduleType = timelineSettings.customTimelineSettings.bottomTier.unit === 'None' ?\n                timelineSettings.customTimelineSettings.topTier.unit : timelineSettings.customTimelineSettings.bottomTier.unit;\n            switch (scheduleType) {\n                case 'Minutes':\n                    {\n                        detail.startDate = new Date(timelineStartDate.getTime());\n                        var sDays = Math.floor(pointToPixel(detail.startPoint) / (this.chartHeader.bottomTierCellWidth));\n                        detail.startDate.setMinutes(detail.startDate.getMinutes() + sDays * count);\n                        detail.startDate.setSeconds(detail.startDate.getSeconds() + 1);\n                        detail.endDate = new Date(detail.startDate.getTime());\n                        var eDays = Math.floor(pointToPixel(detail.endPoint - detail.startPoint)\n                            / (this.chartHeader.bottomTierCellWidth));\n                        detail.endDate.setMinutes(detail.endDate.getMinutes() + eDays * count);\n                        break;\n                    }\n                case 'Hour':\n                    {\n                        detail.startDate = new Date(timelineStartDate.getTime());\n                        var sDays1 = Math.floor(pointToPixel(detail.startPoint) / (this.chartHeader.bottomTierCellWidth));\n                        detail.startDate.setHours(detail.startDate.getHours() + sDays1 * count);\n                        detail.startDate.setMinutes(detail.startDate.getMinutes() + 1);\n                        detail.endDate = new Date(detail.startDate.getTime());\n                        var eDays1 = Math.floor(pointToPixel(detail.endPoint - detail.startPoint)\n                            / (this.chartHeader.bottomTierCellWidth));\n                        detail.endDate.setHours(detail.endDate.getHours() + eDays1 * count);\n                        break;\n                    }\n                case 'Day':\n                    {\n                        detail.startDate = new Date(timelineStartDate.getTime());\n                        var startDays = (Math.round(detail.startPoint / pixelToPoint(this.chartHeader.bottomTierCellWidth)));\n                        detail.startDate.setDate(detail.startDate.getDate() + startDays * count);\n                        var endDays = Math.round(((detail.endPoint - detail.startPoint)\n                            / pixelToPoint(this.chartHeader.bottomTierCellWidth))) - 1;\n                        var startdate = detail.startDate;\n                        startdate.setHours(0, 0, 0);\n                        var secondsToAdd = this.parent.workingTimeRanges[0].to * 1000;\n                        detail.endDate = new Date(startdate.getTime() + secondsToAdd);\n                        detail.endDate.setDate(detail.startDate.getDate() + endDays * count);\n                        break;\n                    }\n                case 'Week':\n                    {\n                        detail.startDate = new Date(timelineStartDate.getTime());\n                        var startDays1 = (detail.startPoint / pixelToPoint(this.chartHeader.bottomTierCellWidth) * 7);\n                        detail.startDate.setDate(detail.startDate.getDate() + startDays1 * count);\n                        var endDays1 = Math.round((detail.endPoint - detail.startPoint)\n                            / pixelToPoint(this.chartHeader.bottomTierCellWidth)) * 7 - 1;\n                        detail.endDate = new Date(detail.startDate.getTime());\n                        detail.endDate.setDate(detail.startDate.getDate() + endDays1 * count);\n                        break;\n                    }\n                case 'Month':\n                    {\n                        detail.startDate = new Date(timelineStartDate.getTime());\n                        var startDays2 = (detail.startPoint / pixelToPoint(this.chartHeader.bottomTierCellWidth) * 31);\n                        detail.startDate.setDate(detail.startDate.getDate() + startDays2 * count);\n                        var endDays2 = Math.round((detail.endPoint - detail.startPoint)\n                            / pixelToPoint(this.chartHeader.bottomTierCellWidth)) * 31 - 1;\n                        detail.endDate = new Date(detail.startDate.getTime());\n                        detail.endDate.setDate(detail.startDate.getDate() + endDays2 * count);\n                        break;\n                    }\n                case 'Year':\n                    {\n                        detail.startDate = new Date(timelineStartDate.getTime());\n                        var startDays3 = (detail.startPoint / pixelToPoint(this.chartHeader.bottomTierCellWidth) * 365);\n                        detail.startDate.setDate(detail.startDate.getDate() + startDays3 * count);\n                        var endDays3 = Math.round((detail.endPoint - detail.startPoint)\n                            / pixelToPoint(this.chartHeader.bottomTierCellWidth)) * 365 - 1;\n                        detail.endDate = new Date(detail.startDate.getTime());\n                        detail.endDate.setDate(detail.startDate.getDate() + endDays3 * count);\n                        break;\n                    }\n            }\n            this.headerDetails.push(detail);\n            point += width;\n        }\n    };\n    PdfGantt.prototype.drawPageBorder = function () {\n        var pages = this.result.page.section.getPages();\n        for (var index = 0; index < pages.length; index++) {\n            var page = pages[index];\n            var graphics = page.graphics;\n            var pageSize = page.getClientSize();\n            var pen = new PdfPen(new PdfColor(206, 206, 206));\n            graphics.drawRectangle(pen, 0, 0, pageSize.width, pageSize.height);\n        }\n    };\n    //Draw the gantt chart side\n    PdfGantt.prototype.drawGantttChart = function () {\n        var _this = this;\n        var taskbarPoint = this.startPoint;\n        var pagePoint = new PointF();\n        var pageStartX = 0;\n        var cumulativeWidth = 0;\n        var cumulativeHeight = 0;\n        var pageData;\n        this.headerDetails.forEach(function (detail, index) {\n            var page = _this.result.page.section.getPages()[_this.startPageIndex];\n            page['contentWidth'] = (_this.parent.pdfExportModule.gantt.taskbar.isAutoFit()) ? pointToPixel(_this.headerDetails[index].endPoint - _this.headerDetails[index].startPoint) : _this.headerDetails[index].endPoint - _this.headerDetails[index].startPoint;\n            _this.chartHeader.drawTimeline(page, _this.startPoint, detail);\n            taskbarPoint.y = taskbarPoint.y + pixelToPoint(_this.parent.timelineModule.isSingleTier ? 45 : 60); // headerHeight\n            pageStartX = taskbarPoint.x;\n            cumulativeHeight = pixelToPoint(_this.parent.timelineModule.isSingleTier ? 45 : 60); // headerHeight\n            _this.headerDetails[_this.headerDetails.indexOf(detail)].startIndex = _this.startPageIndex;\n            _this.headerDetails[_this.headerDetails.indexOf(detail)].pageStartPoint = taskbarPoint;\n            _this.parent.eventMarkerColloction.map(function (eventMarker) {\n                var timelimeHeight = pixelToPoint(_this.parent.timelineModule.isSingleTier ? 45 : 60);\n                var pdfPage = _this.result.page.section.getPages()[_this.startPageIndex];\n                _this.eventMarker.drawEventMarker(pdfPage, taskbarPoint, cumulativeWidth, detail, eventMarker, timelimeHeight);\n            });\n            for (var i = 0; i < _this.taskbarCollection.length; i++) {\n                var task = _this.taskbarCollection[i];\n                var rowHeight = _this.rows.getRow(i + 1).height;\n                var pdfPage = _this.result.page.section.getPages()[_this.startPageIndex];\n                var graphics = pdfPage.graphics;\n                var pen = new PdfPen(new PdfColor(206, 206, 206));\n                var lineWidth = void 0;\n                if (page['contentWidth'] && (_this.parent.gridLines === 'Both' || _this.parent.gridLines === 'Horizontal')) {\n                    lineWidth = _this.chartHeader.timelineWidth;\n                    graphics.drawRectangle(pen, pageStartX, taskbarPoint.y, page['contentWidth'] + 0.5, rowHeight);\n                }\n                var isNextPage = task.drawTaskbar(pdfPage, taskbarPoint, detail, cumulativeWidth, rowHeight, _this.taskbarCollection[parseInt(i.toString(), 10)], lineWidth);\n                if (isNextPage) {\n                    if (_this.enableHeader) {\n                        taskbarPoint.y = pixelToPoint(_this.parent.timelineModule.isSingleTier ? 45 : 60);\n                    }\n                    else {\n                        taskbarPoint.y = 0;\n                    }\n                    _this.startPageIndex++;\n                    pageData = {};\n                    pageData.height = cumulativeHeight;\n                    pageData.pageStartX = pageStartX;\n                    pageData.startPoint = __assign({}, pagePoint);\n                    if (_this.parent.pdfExportModule.gantt.taskbar.isAutoFit()) {\n                        pageData.width = (detail.totalWidth);\n                    }\n                    else {\n                        pageData.width = (detail.totalWidth);\n                    }\n                    _this.pdfPageDetail.push(pageData);\n                    pagePoint.y += pageData.height;\n                    if (_this.enableHeader) {\n                        cumulativeHeight = _this.chartHeader.height;\n                    }\n                    else {\n                        taskbarPoint.y = 0;\n                        cumulativeHeight = 0;\n                    }\n                }\n                taskbarPoint.y += rowHeight;\n                cumulativeHeight += rowHeight;\n                _this.parent.eventMarkerColloction.map(function (eventMarker) {\n                    var timelimeHeight = pixelToPoint(_this.parent.timelineModule.isSingleTier ? 45 : 60);\n                    var pdfPage = _this.result.page.section.getPages()[_this.startPageIndex];\n                    _this.eventMarker.drawEventMarker(pdfPage, taskbarPoint, cumulativeWidth, detail, eventMarker, timelimeHeight);\n                });\n            }\n            _this.headerDetails[index].endIndex = _this.startPageIndex;\n            cumulativeWidth += detail.totalWidth;\n            pageData = {};\n            pageData.height = cumulativeHeight;\n            pageData.pageStartX = pageStartX;\n            pageData.startPoint = __assign({}, pagePoint);\n            if (_this.parent.pdfExportModule.gantt.taskbar.isAutoFit()) {\n                pageData.width = (detail.totalWidth);\n            }\n            else {\n                pageData.width = pixelToPoint(detail.totalWidth);\n            }\n            _this.pdfPageDetail.push(pageData);\n            pagePoint.x += pageData.width;\n            pagePoint.y = 0;\n            if (_this.enableHeader) {\n                cumulativeHeight = _this.chartHeader.height;\n            }\n            else {\n                taskbarPoint.y = 0;\n            }\n            if (_this.headerDetails.indexOf(detail) !== _this.headerDetails.length - 1) {\n                _this.result.page.section.add();\n                _this.startPageIndex = _this.result.page.section.count - 1;\n                taskbarPoint = _this.startPoint = new PointF(0, 0);\n            }\n        });\n        // Draw predecessor line.\n        for (var i = 0; i < this.predecessorCollection.length; i++) {\n            var predecessor = this.predecessorCollection[i];\n            predecessor.drawPredecessor(this);\n        }\n    };\n    return PdfGantt;\n}(PdfTreeGrid));\nexport { PdfGantt };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}