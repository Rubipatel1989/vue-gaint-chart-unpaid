{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.every.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport { addClass, Browser, removeClass, formatUnit, isNullOrUndefined, isNullOrUndefined as isNOU, EventHandler, detach } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup, Tooltip } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER, CLS_CUSTOM_TILE, CLS_NOCOLOR_ITEM, CLS_BULLETFORMATLIST_TB_BTN, CLS_NUMBERFORMATLIST_TB_BTN, CLS_LIST_PRIMARY_CONTENT } from '../base/classes';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { hasClass } from '../base/util';\nimport { ToolbarStatus } from '../../editor-manager/plugin/toolbar-status';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n *\n * @hidden\n\n */\nvar ToolbarRenderer = /** @class */function () {\n  /**\n   * Constructor for toolbar renderer module\n   *\n   * @param {IRichTextEditor} parent - specifies the parent element.\n   * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n   */\n  function ToolbarRenderer(parent, serviceLocator) {\n    this.parent = parent;\n    this.isDestroyed = false;\n    if (serviceLocator) {\n      this.l10n = serviceLocator.getService('rteLocale');\n    }\n    this.wireEvent();\n  }\n  ToolbarRenderer.prototype.wireEvent = function () {\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.destroyTooltip, this.destroyTooltip, this);\n    this.parent.on(events.closeTooltip, this.closeTooltip, this);\n  };\n  ToolbarRenderer.prototype.destroyTooltip = function () {\n    var currentDocument = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().ownerDocument : this.parent.contentModule.getDocument();\n    if (!isNullOrUndefined(currentDocument.querySelector('.e-tooltip-wrap')) && !isNullOrUndefined(currentDocument.querySelector('[data-tooltip-id]'))) {\n      var tooltipTargetEle = currentDocument.querySelector('[data-tooltip-id]');\n      var event_1 = new MouseEvent('mouseleave', {\n        bubbles: true,\n        cancelable: true\n      });\n      tooltipTargetEle.dispatchEvent(event_1);\n    }\n  };\n  ToolbarRenderer.prototype.unWireEvent = function () {\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.destroyTooltip, this.destroyTooltip);\n    this.parent.off(events.closeTooltip, this.closeTooltip);\n  };\n  ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n    if (this.mode === 'Extended') {\n      e.enableCollision = false;\n    }\n  };\n  ToolbarRenderer.prototype.toolbarCreated = function () {\n    this.parent.notify(events.toolbarCreated, this);\n  };\n  ToolbarRenderer.prototype.toolbarClicked = function (args) {\n    if (!this.parent.enabled) {\n      return;\n    }\n    this.parent.trigger('toolbarClick', args);\n    if (!this.parent.readonly || isNullOrUndefined(args.item)) {\n      this.parent.notify(events.toolbarClick, args);\n    }\n  };\n  ToolbarRenderer.prototype.dropDownSelected = function (args) {\n    this.parent.notify(events.dropDownSelect, {\n      element: args.element,\n      item: args.item,\n      originalEvent: args.event\n    });\n    this.destroyTooltip();\n  };\n  ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n    if (this.parent.readonly || !this.parent.enabled) {\n      return;\n    }\n    this.parent.notify(events.beforeDropDownItemRender, args);\n  };\n  ToolbarRenderer.prototype.tooltipBeforeRender = function (args) {\n    if (!isNOU(args.target.getAttribute('title'))) {\n      var tooltipTarget = args.target.getAttribute('title');\n      var tooltipText = void 0;\n      switch (tooltipTarget) {\n        case 'Minimize':\n          tooltipText = this.l10n.getConstant('minimize');\n          args.target.setAttribute('title', tooltipText + ' (Esc)');\n          break;\n        case 'Maximize':\n          tooltipText = this.l10n.getConstant('maximize');\n          args.target.setAttribute('title', tooltipText + ' (Ctrl+Shift+F)');\n          break;\n      }\n    }\n    if (args.target.querySelector('.e-active')) {\n      args.cancel = true;\n      if (!isNOU(args.target.getAttribute('title'))) {\n        this.closeTooltip({\n          target: args.target,\n          isTitle: true\n        });\n      }\n    }\n  };\n  ToolbarRenderer.prototype.dropDownOpen = function (args) {\n    if (args.element.parentElement.getAttribute('id').indexOf('TableCell') > -1 && !isNOU(args.element.parentElement.querySelector('.e-cell-merge')) && (!isNOU(args.element.parentElement.querySelector('.e-cell-horizontal-split')) || !isNOU(args.element.parentElement.querySelector('.e-cell-vertical-split')))) {\n      var listEle = args.element.querySelectorAll('li');\n      var selectedEles_1 = this.parent.inputElement.querySelectorAll('.e-cell-select');\n      if (selectedEles_1.length === 1) {\n        addClass([listEle[0]], 'e-disabled');\n        removeClass([listEle[1], listEle[2]], 'e-disabled');\n      } else if (selectedEles_1.length > 1) {\n        if (!Array.from(selectedEles_1).every(function (element) {\n          return element.tagName.toLowerCase() === selectedEles_1[0].tagName.toLowerCase();\n        })) {\n          addClass([listEle[0]], 'e-disabled');\n        } else {\n          removeClass([listEle[0]], 'e-disabled');\n        }\n        addClass([listEle[1], listEle[2]], 'e-disabled');\n      }\n    }\n    this.parent.notify(events.selectionSave, args);\n  };\n  ToolbarRenderer.prototype.dropDownClose = function (args) {\n    this.parent.notify(events.selectionRestore, args);\n  };\n  /**\n   * renderToolbar method\n   *\n   * @param {IToolbarOptions} args - specifies the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderToolbar = function (args) {\n    this.setPanel(args.target);\n    this.renderPanel();\n    this.mode = args.overflowMode;\n    args.rteToolbarObj.toolbarObj = new Toolbar({\n      items: args.items,\n      width: '100%',\n      overflowMode: args.overflowMode,\n      beforeCreate: this.toolbarBeforeCreate.bind(this),\n      created: this.toolbarCreated.bind(this),\n      clicked: this.toolbarClicked.bind(this),\n      enablePersistence: args.enablePersistence,\n      enableRtl: args.enableRtl,\n      cssClass: args.cssClass\n    });\n    args.rteToolbarObj.toolbarObj.isStringTemplate = true;\n    args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n    args.rteToolbarObj.toolbarObj.appendTo(args.target);\n    if (this.parent.showTooltip && args.type === 'toolbar') {\n      this.tooltip = new Tooltip({\n        target: '#' + this.parent.getID() + '_toolbar_wrapper [title]',\n        showTipPointer: true,\n        openDelay: 400,\n        opensOn: 'Hover',\n        beforeRender: this.tooltipBeforeRender.bind(this),\n        beforeOpen: this.tooltipBeforeOpen.bind(this),\n        cssClass: this.parent.getCssClass(),\n        windowCollision: true,\n        position: 'BottomCenter'\n      });\n      this.tooltip.appendTo(args.target.parentElement);\n    }\n  };\n  ToolbarRenderer.prototype.tooltipBeforeOpen = function (args) {\n    if (args.element) {\n      args.element.setAttribute('data-rte-id', this.parent.getID());\n    }\n  };\n  /**\n   * renderDropDownButton method\n   *\n   * @param {IDropDownModel} args - specifies the the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n    var _this = this;\n    var css;\n    args.element.classList.add(CLS_DROPDOWN_BTN);\n    css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n    if (this.parent.inlineMode.enable && Browser.isDevice) {\n      css = css + ' ' + CLS_INLINE_DROPDOWN;\n    }\n    // eslint-disable-next-line\n    var proxy = this;\n    var dropDown = new DropDownButton({\n      items: args.items,\n      iconCss: args.iconCss,\n      cssClass: css,\n      content: args.content,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      select: this.dropDownSelected.bind(this),\n      beforeOpen: function (args) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          args.cancel = true;\n          return;\n        }\n        // Table styles dropdown preselect\n        if (proxy.parent.editorMode !== 'Markdown') {\n          var startNode = proxy.parent.getRange().startContainer.parentElement;\n          var tableEle = startNode.closest('table');\n          var trow = startNode.closest('tr');\n          if (!isNOU(tableEle) && tableEle.classList.contains('e-dashed-border')) {\n            for (var index = 0; index < args.element.childNodes.length; index++) {\n              if (args.element.childNodes[index].classList.contains('e-dashed-borders')) {\n                addClass([args.element.childNodes[index]], 'e-active');\n              }\n            }\n          } else if (!isNOU(tableEle) && !tableEle.classList.contains('e-dashed-border') && tableEle.classList.contains('e-alternate-rows') && window.getComputedStyle(trow).backgroundColor !== '') {\n            for (var index = 0; index < args.element.childNodes.length; index++) {\n              if (args.element.childNodes[index].classList.contains('e-alternate-rows')) {\n                addClass([args.element.childNodes[index]], 'e-active');\n              }\n            }\n          }\n          //Alignments preselect\n          var alignEle = proxy.parent.getRange().startContainer;\n          while (alignEle !== proxy.parent.inputElement && !isNOU(alignEle.parentElement)) {\n            if (alignEle.nodeName === '#text') {\n              alignEle = alignEle.parentElement;\n            }\n            var alignStyle = window.getComputedStyle(alignEle).textAlign;\n            if (!isNOU(args.items[0]) && args.items[0].command === 'Alignments') {\n              if (args.items[0].text === 'Align Left' && alignStyle === 'left' || alignStyle === 'start') {\n                addClass([args.element.childNodes[0]], 'e-active');\n                break;\n              } else if (args.items[1].text === 'Align Center' && alignStyle === 'center') {\n                addClass([args.element.childNodes[1]], 'e-active');\n                break;\n              } else if (args.items[2].text === 'Align Right' && alignStyle === 'right') {\n                addClass([args.element.childNodes[2]], 'e-active');\n                break;\n              } else if (args.items[3].text === 'Align Justify' && alignStyle === 'justify') {\n                addClass([args.element.childNodes[3]], 'e-active');\n                break;\n              }\n            }\n            alignEle = alignEle.parentElement;\n          }\n          //image preselect\n          var closestNode = startNode.closest('img');\n          var imageEle = closestNode ? closestNode : startNode.querySelector('img');\n          if (!isNOU(args.items[0]) && args.items[0].command === 'Images') {\n            if (!isNOU(imageEle)) {\n              var index = void 0;\n              if (imageEle.classList.contains('e-imgleft') || imageEle.classList.contains('e-imginline')) {\n                index = 0;\n              } else if (imageEle.classList.contains('e-imgcenter') || imageEle.classList.contains('e-imgbreak')) {\n                index = 1;\n              } else if (imageEle.classList.contains('e-imgright')) {\n                index = 2;\n              }\n              if (!isNOU(args.element.childNodes[index])) {\n                addClass([args.element.childNodes[index]], 'e-active');\n              }\n            }\n          }\n          //Formats preselect\n          if (!isNOU(args.items[0]) && (args.items[0].command === 'Formats' || args.items[0].command === 'Font')) {\n            var fontName_1 = [];\n            var formats_1 = [];\n            var hasUpdatedActive = false;\n            _this.parent.format.types.forEach(function (item) {\n              formats_1.push(item.value.toLocaleLowerCase());\n            });\n            _this.parent.fontFamily.items.forEach(function (item) {\n              fontName_1.push(item.value);\n            });\n            var toolbarStatus = ToolbarStatus.get(_this.parent.contentModule.getDocument(), _this.parent.contentModule.getEditPanel(), formats_1, null, fontName_1);\n            for (var index = 0; index < args.element.childNodes.length; index++) {\n              var divNode = _this.parent.createElement('div');\n              divNode.innerHTML = dropDown.content.trim();\n              if (!hasUpdatedActive && (divNode.textContent.trim() !== '' && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim() || args.items[0].command === 'Formats' && !isNOU(toolbarStatus.formats) && _this.parent.format.types[index].value.toLowerCase() === toolbarStatus.formats.toLowerCase() && args.element.childNodes[index].classList.contains(_this.parent.format.types[index].cssClass) || args.items[0].subCommand === 'FontName' && args.items[0].command === 'Font' && !isNOU(toolbarStatus.fontname) && !isNOU(_this.parent.fontFamily.items[index]) && _this.parent.fontFamily.items[index].value.toLowerCase() === toolbarStatus.fontname.toLowerCase() && args.element.childNodes[index].classList.contains(_this.parent.fontFamily.items[index].cssClass) || args.items[0].subCommand === 'FontName' && _this.parent.fontFamily.items[index].value === '' && isNullOrUndefined(toolbarStatus.fontname) && args.element.childNodes[index].classList.contains(_this.parent.fontFamily.items[index].cssClass) || args.items[0].subCommand === 'FontSize' && args.element.childNodes[index].textContent === 'Default' && divNode.textContent === 'Font Size' && _this.parent.fontSize.items[index].value === '' && !isNullOrUndefined(toolbarStatus.fontsize))) {\n                if (!args.element.childNodes[index].classList.contains('e-active')) {\n                  addClass([args.element.childNodes[index]], 'e-active');\n                  hasUpdatedActive = true;\n                }\n              } else {\n                removeClass([args.element.childNodes[index]], 'e-active');\n              }\n            }\n          }\n        } else if (proxy.parent.editorMode === 'Markdown') {\n          if (args.items[0].command === 'Formats') {\n            var formats_2 = [];\n            var hasUpdatedActive = false;\n            _this.parent.format.types.forEach(function (item) {\n              formats_2.push(item.value.toLocaleLowerCase());\n            });\n            var childNodes = args.element.childNodes;\n            for (var index = 0; index < childNodes.length; index++) {\n              var divNode = _this.parent.createElement('div');\n              divNode.innerHTML = dropDown.content.trim();\n              if (!hasUpdatedActive && divNode.textContent.trim() !== '' && childNodes[index].textContent.trim() === divNode.textContent.trim()) {\n                if (!childNodes[index].classList.contains('e-active')) {\n                  addClass([childNodes[index]], 'e-active');\n                  hasUpdatedActive = true;\n                }\n              } else {\n                removeClass([childNodes[index]], 'e-active');\n              }\n            }\n          }\n        }\n        proxy.parent.notify(events.beforeDropDownOpen, args);\n      },\n      close: this.dropDownClose.bind(this),\n      open: this.dropDownOpen.bind(this),\n      beforeItemRender: this.beforeDropDownItemRender.bind(this)\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    dropDown.appendTo(args.element);\n    args.element.tabIndex = -1;\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    return dropDown;\n  };\n  ToolbarRenderer.prototype.mouseOutHandler = function () {\n    if (!isNOU(this.tooltipTargetEle)) {\n      this.tooltipTargetEle.setAttribute('title', this.tooltipTargetEle.getAttribute('data-title'));\n    } else {\n      var currentDocument = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().ownerDocument : this.parent.contentModule.getDocument();\n      this.tooltipTargetEle = currentDocument.querySelector('[data-title]');\n      this.tooltipTargetEle.setAttribute('title', this.tooltipTargetEle.getAttribute('data-title'));\n    }\n    this.tooltipTargetEle.removeAttribute('data-title');\n    EventHandler.remove(this.tooltipTargetEle, 'mouseout', this.mouseOutHandler);\n  };\n  ToolbarRenderer.prototype.closeTooltip = function (args) {\n    if (args.isTitle) {\n      this.tooltipTargetEle = args.target;\n      this.tooltipTargetEle.setAttribute('data-title', this.tooltipTargetEle.getAttribute('title'));\n      this.tooltipTargetEle.removeAttribute('title');\n      EventHandler.add(this.tooltipTargetEle, 'mouseout', this.mouseOutHandler, this);\n    } else {\n      var currentDocument = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().ownerDocument : this.parent.contentModule.getDocument();\n      this.tooltipTargetEle = closest(args.target, '[data-tooltip-id]');\n      if (!isNOU(this.tooltipTargetEle) && this.parent.showTooltip && !isNOU(currentDocument.querySelector('.e-tooltip-wrap'))) {\n        this.destroyTooltip();\n        this.tooltipTargetEle.setAttribute('data-title', this.tooltipTargetEle.getAttribute('title'));\n        this.tooltipTargetEle.removeAttribute('title');\n        EventHandler.add(this.tooltipTargetEle, 'mouseout', this.mouseOutHandler, this);\n      }\n    }\n  };\n  /**\n   * renderListDropDown method\n   *\n   * @param {IDropDownModel} args - specifies the the arguments.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderListDropDown = function (args) {\n    var _this = this;\n    // eslint-disable-next-line\n    var proxy = this;\n    var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + (this.parent.inlineMode ? ' ' + CLS_INLINE_DROPDOWN : '');\n    css += ' ' + (args.itemName === 'NumberFormatList' ? CLS_NUMBERFORMATLIST_TB_BTN : CLS_BULLETFORMATLIST_TB_BTN);\n    var content = proxy.parent.createElement('span', {\n      className: CLS_LIST_PRIMARY_CONTENT\n    });\n    var inlineEle = proxy.parent.createElement('span', {\n      className: args.cssClass\n    });\n    content.appendChild(inlineEle);\n    var dropDown = new DropDownButton({\n      items: args.items,\n      cssClass: css,\n      content: args.content,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      select: this.dropDownSelected.bind(this),\n      beforeOpen: function (args) {\n        if (proxy.parent.editorMode !== 'Markdown') {\n          var startNode = proxy.parent.getRange().startContainer.parentElement;\n          var listElem = startNode.closest('LI');\n          var currentLiElem = !isNOU(listElem) ? listElem.parentElement : null;\n          if (!isNOU(currentLiElem) && (currentLiElem.nodeName === 'OL' || currentLiElem.nodeName === 'UL')) {\n            if (currentLiElem.nodeName === 'UL' && args.items[0].subCommand === 'NumberFormatList') {\n              addClass([args.element.childNodes[0]], 'e-active');\n            } else if (currentLiElem.nodeName === 'OL' && args.items[0].subCommand === 'BulletFormatList') {\n              addClass([args.element.childNodes[0]], 'e-active');\n            } else {\n              var currentListStyle = currentLiElem.style.listStyleType.split('-').join('').toLocaleLowerCase();\n              currentListStyle = currentListStyle === 'decimal' ? 'number' : currentListStyle;\n              for (var index = 0; index < args.element.childNodes.length; index++) {\n                if (currentListStyle === args.element.childNodes[index].innerHTML.split(' ').join('').toLocaleLowerCase()) {\n                  addClass([args.element.childNodes[index]], 'e-active');\n                  break;\n                } else if (currentListStyle === '' && args.element.childNodes[index].innerHTML !== 'None') {\n                  addClass([args.element.childNodes[index]], 'e-active');\n                  break;\n                }\n              }\n            }\n          } else {\n            addClass([args.element.childNodes[0]], 'e-active');\n          }\n        }\n        _this.closeTooltip({\n          target: args.event.target\n        });\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          args.cancel = true;\n          return;\n        }\n        proxy.parent.notify(events.selectionRestore, {});\n        var element = args.event ? args.event.target : null;\n        proxy.currentElement = dropDown.element;\n        proxy.currentDropdown = dropDown;\n        if (args.event && args.event.type === 'click' && (element.classList.contains(CLS_LIST_PRIMARY_CONTENT) || element.parentElement.classList.contains(CLS_LIST_PRIMARY_CONTENT))) {\n          args.cancel = true;\n          return;\n        }\n        proxy.parent.notify(events.beforeDropDownOpen, args);\n      },\n      close: this.dropDownClose.bind(this),\n      open: this.dropDownOpen.bind(this),\n      beforeItemRender: this.beforeDropDownItemRender.bind(this)\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    dropDown.appendTo(args.element);\n    args.element.tabIndex = -1;\n    args.element.setAttribute('role', 'button');\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    if (args.element.childElementCount === 1) {\n      dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n    }\n    args.element.tabIndex = -1;\n    dropDown.element.removeAttribute('type');\n    dropDown.element.onmousedown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n    dropDown.element.onkeydown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n    return dropDown;\n  };\n  ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n    var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n    removeClass(colorbox, 'e-selected');\n    var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n    colorbox.filter(function (colorbox) {\n      if (colorbox.style.backgroundColor === style) {\n        addClass([colorbox], 'e-selected');\n      }\n    });\n  };\n  /**\n   * renderColorPickerDropDown method\n   *\n   * @param {IColorPickerModel} args - specifies the arguments.\n   * @param {string} item - specifies the item.\n   * @param {ColorPicker} colorPicker - specifies the colorpicker.\n   * @param {string} defaultColor -specifies the defaultColor.\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker, defaultColor) {\n    var _this = this;\n    // eslint-disable-next-line\n    var proxy = this;\n    var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + (this.parent.inlineMode ? ' ' + CLS_INLINE_DROPDOWN : '');\n    css += ' ' + (item === 'backgroundcolor' ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN);\n    css += this.parent.getCssClass(true);\n    var content = proxy.parent.createElement('span', {\n      className: CLS_COLOR_CONTENT\n    });\n    var inlineEle = proxy.parent.createElement('span', {\n      className: args.cssClass\n    });\n    var range;\n    var initialBackgroundColor = isNullOrUndefined(defaultColor) ? proxy.parent.backgroundColor.default : defaultColor;\n    inlineEle.style.borderBottomColor = item === 'backgroundcolor' ? initialBackgroundColor : proxy.parent.fontColor.default;\n    content.appendChild(inlineEle);\n    var dropDown = new DropDownButton({\n      target: colorPicker.element.parentElement,\n      cssClass: css,\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      beforeOpen: function (dropDownArgs) {\n        if (proxy.parent.readonly || !proxy.parent.enabled) {\n          dropDownArgs.cancel = true;\n          return;\n        }\n        var element = dropDownArgs.event ? dropDownArgs.event.target : null;\n        proxy.currentElement = dropDown.element;\n        proxy.currentDropdown = dropDown;\n        proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n        if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT) || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n          dropDownArgs.cancel = true;\n          var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor : element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n          proxy.parent.notify(events.selectionRestore, {});\n          range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n          var parentNode = range.startContainer.parentNode;\n          var closestElement = closest(range.startContainer.parentNode, 'table');\n          if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || closest(range.startContainer.parentNode, 'td,th') || proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')) && range.collapsed && args.subCommand === 'BackgroundColor' && closest(closestElement, '.' + classes.CLS_RTE)) {\n            proxy.parent.notify(events.tableColorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          } else {\n            proxy.parent.notify(events.colorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          }\n          return;\n        } else {\n          var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n          var inst = getInstance(ele, ColorPicker);\n          inst.showButtons = dropDownArgs.element.querySelector('.e-color-palette') ? false : true;\n          inst.dataBind();\n        }\n        dropDownArgs.element.onclick = function (args) {\n          if (args.target.classList.contains('e-cancel')) {\n            dropDown.toggle();\n          }\n        };\n      },\n      open: function (dropDownArgs) {\n        _this.setColorPickerContentWidth(colorPicker);\n        var focusEle;\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        if (dropDownArgs.element.querySelector('.e-color-palette')) {\n          focusEle = ele.parentElement.querySelector('.e-palette');\n        } else {\n          focusEle = ele.parentElement.querySelector('e-handler');\n        }\n        if (focusEle) {\n          focusEle.focus();\n        }\n        _this.pickerRefresh(dropDownArgs);\n      },\n      beforeClose: function (dropDownArgs) {\n        var element = dropDownArgs.event ? dropDownArgs.event.target : null;\n        if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT) || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n          var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor : element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n          range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n          if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n            proxy.parent.notify(events.tableColorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          } else {\n            proxy.parent.notify(events.colorPickerChanged, {\n              item: {\n                command: args.command,\n                subCommand: args.subCommand,\n                value: colorpickerValue\n              }\n            });\n          }\n          return;\n        }\n      },\n      close: function () {\n        proxy.parent.notify(events.selectionRestore, {});\n      }\n    });\n    dropDown.isStringTemplate = true;\n    dropDown.createElement = proxy.parent.createElement;\n    args.element.setAttribute('role', 'button');\n    dropDown.appendTo(args.element);\n    var popupElement = document.getElementById(dropDown.element.id + '-popup');\n    popupElement.setAttribute('aria-owns', this.parent.getID());\n    dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n    args.element.tabIndex = -1;\n    dropDown.element.removeAttribute('type');\n    dropDown.element.onmousedown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n    dropDown.element.onkeydown = function () {\n      proxy.parent.notify(events.selectionSave, {});\n    };\n    return dropDown;\n  };\n  ToolbarRenderer.prototype.pickerRefresh = function (dropDownArgs) {\n    if (this.parent.backgroundColor.mode === 'Picker') {\n      var popupElem = dropDownArgs.element.parentElement;\n      popupElem.style.width = (popupElem.offsetWidth + 5).toString() + 'px';\n      getInstance(popupElem, Popup).refreshPosition(popupElem);\n      popupElem.style.width = (popupElem.offsetWidth - 5).toString() + 'px';\n    }\n  };\n  ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n    var colorPickerContent = colorPicker.element.nextSibling;\n    if (colorPickerContent.style.width === '0px') {\n      colorPickerContent.style.width = '';\n      var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n      colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth + borderWidth + borderWidth);\n    }\n  };\n  /**\n   * renderColorPicker method\n   *\n   * @param {IColorPickerModel} args - specifies the arguments\n   * @param {string} item - specifies the string values\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n    var _this = this;\n    // eslint-disable-next-line\n    var proxy = this;\n    var value;\n    var colorPicker = new ColorPicker({\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      inline: true,\n      value: null,\n      cssClass: (item === 'backgroundcolor' ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER) + ' ' + args.cssClass + ' ' + 'e-rte-picker-init',\n      created: function () {\n        var value = item === 'backgroundcolor' ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n        var cssClass = (item === 'backgroundcolor' ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER) + ' ' + args.cssClass;\n        colorPicker.setProperties({\n          value: value,\n          cssClass: cssClass\n        });\n      },\n      mode: item === 'backgroundcolor' ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode,\n      modeSwitcher: item === 'backgroundcolor' ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher,\n      presetColors: item === 'backgroundcolor' ? this.parent.backgroundColor.colorCode : this.parent.fontColor.colorCode,\n      columns: item === 'backgroundcolor' ? this.parent.backgroundColor.columns : this.parent.fontColor.columns,\n      beforeTileRender: function (args) {\n        args.element.classList.add(CLS_COLOR_PALETTE);\n        args.element.classList.add(CLS_CUSTOM_TILE);\n        if (!isNullOrUndefined(_this.parent.cssClass)) {\n          var allClassName = _this.parent.getCssClass().split(' ');\n          for (var i = 0; i < allClassName.length; i++) {\n            if (allClassName[i].trim() !== '') {\n              args.element.classList.add(allClassName[i]);\n            }\n          }\n        }\n        if (args.value === '') {\n          args.element.classList.add(CLS_NOCOLOR_ITEM);\n        }\n      },\n      change: function (colorPickerArgs) {\n        var colorpickerValue = colorPickerArgs.currentValue.rgba;\n        colorPickerArgs.item = {\n          command: args.command,\n          subCommand: args.subCommand,\n          value: colorpickerValue\n        };\n        proxy.parent.notify(events.selectionRestore, {});\n        proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n        var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n        var closestElement = closest(range.startContainer.parentNode, 'table');\n        if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || range.startContainer.nodeName === 'BODY' || closest(range.startContainer.parentNode, 'td,th')) && range.collapsed && args.subCommand === 'BackgroundColor' && closest(closestElement, '.' + classes.CLS_RTE)) {\n          proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n        } else {\n          proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n        }\n        proxy.currentDropdown.toggle();\n      },\n      beforeModeSwitch: function (args) {\n        value = colorPicker.value;\n        if (value === '') {\n          colorPicker.setProperties({\n            value: args.mode === 'Picker' ? '#008000ff' : ''\n          }, true);\n        }\n        colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n      }\n    });\n    colorPicker.isStringTemplate = true;\n    colorPicker.createElement = this.parent.createElement;\n    colorPicker.appendTo(document.getElementById(args.target));\n    return colorPicker;\n  };\n  /**\n   * The function is used to render Rich Text Editor toolbar\n   *\n   * @returns {void}\n   * @hidden\n    */\n  ToolbarRenderer.prototype.renderPanel = function () {\n    this.getPanel().classList.add(CLS_TOOLBAR);\n  };\n  /**\n   * Get the toolbar element of RichTextEditor\n   *\n   * @returns {Element} - specifies the element.\n   * @hidden\n    */\n  ToolbarRenderer.prototype.getPanel = function () {\n    return this.toolbarPanel;\n  };\n  /**\n   * Set the toolbar element of RichTextEditor\n   *\n   * @returns {void}\n   * @param  {Element} panel - specifies the element.\n   * @hidden\n    */\n  ToolbarRenderer.prototype.setPanel = function (panel) {\n    this.toolbarPanel = panel;\n  };\n  ToolbarRenderer.prototype.destroy = function () {\n    if (this.isDestroyed) {\n      return;\n    }\n    if (this.tooltip && !this.tooltip.isDestroyed) {\n      this.tooltip.destroy();\n      var tooltipElements = document.querySelectorAll('[data-rte-id=\"' + this.parent.getID() + '\"]');\n      for (var i = 0; i < tooltipElements.length; i++) {\n        var tooltipEle = tooltipElements[i];\n        if (this.parent.getID() === tooltipEle.getAttribute('data-rte-id')) {\n          detach(tooltipEle);\n        }\n      }\n    }\n    this.unWireEvent();\n    this.mode = null;\n    this.toolbarPanel = null;\n    this.currentElement = null;\n    this.currentDropdown = null;\n    this.tooltip = null;\n    this.tooltipTargetEle = null;\n    this.isDestroyed = true;\n  };\n  return ToolbarRenderer;\n}();\nexport { ToolbarRenderer };","map":{"version":3,"names":["addClass","Browser","removeClass","formatUnit","isNullOrUndefined","isNOU","EventHandler","detach","getInstance","closest","selectAll","Toolbar","DropDownButton","Popup","Tooltip","classes","events","CLS_TOOLBAR","CLS_DROPDOWN_BTN","CLS_RTE_ELEMENTS","CLS_TB_BTN","CLS_INLINE_DROPDOWN","CLS_COLOR_CONTENT","CLS_FONT_COLOR_DROPDOWN","CLS_BACKGROUND_COLOR_DROPDOWN","CLS_COLOR_PALETTE","CLS_FONT_COLOR_PICKER","CLS_BACKGROUND_COLOR_PICKER","CLS_CUSTOM_TILE","CLS_NOCOLOR_ITEM","CLS_BULLETFORMATLIST_TB_BTN","CLS_NUMBERFORMATLIST_TB_BTN","CLS_LIST_PRIMARY_CONTENT","ColorPicker","hasClass","ToolbarStatus","ToolbarRenderer","parent","serviceLocator","isDestroyed","l10n","getService","wireEvent","prototype","on","destroy","destroyTooltip","closeTooltip","currentDocument","iframeSettings","enable","contentModule","getPanel","ownerDocument","getDocument","querySelector","tooltipTargetEle","event_1","MouseEvent","bubbles","cancelable","dispatchEvent","unWireEvent","off","toolbarBeforeCreate","e","mode","enableCollision","toolbarCreated","notify","toolbarClicked","args","enabled","trigger","readonly","item","toolbarClick","dropDownSelected","dropDownSelect","element","originalEvent","event","beforeDropDownItemRender","tooltipBeforeRender","target","getAttribute","tooltipTarget","tooltipText","getConstant","setAttribute","cancel","isTitle","dropDownOpen","parentElement","indexOf","listEle","querySelectorAll","selectedEles_1","inputElement","length","Array","from","every","tagName","toLowerCase","selectionSave","dropDownClose","selectionRestore","renderToolbar","setPanel","renderPanel","overflowMode","rteToolbarObj","toolbarObj","items","width","beforeCreate","bind","created","clicked","enablePersistence","enableRtl","cssClass","isStringTemplate","createElement","appendTo","showTooltip","type","tooltip","getID","showTipPointer","openDelay","opensOn","beforeRender","beforeOpen","tooltipBeforeOpen","getCssClass","windowCollision","position","renderDropDownButton","_this","css","classList","add","inlineMode","isDevice","proxy","dropDown","iconCss","content","select","editorMode","startNode","getRange","startContainer","tableEle","trow","contains","index","childNodes","window","getComputedStyle","backgroundColor","alignEle","nodeName","alignStyle","textAlign","command","text","closestNode","imageEle","fontName_1","formats_1","hasUpdatedActive","format","types","forEach","push","value","toLocaleLowerCase","fontFamily","toolbarStatus","get","getEditPanel","divNode","innerHTML","trim","textContent","formats","subCommand","fontname","fontSize","fontsize","formats_2","beforeDropDownOpen","close","open","beforeItemRender","tabIndex","popupElement","document","getElementById","id","mouseOutHandler","removeAttribute","remove","renderListDropDown","itemName","className","inlineEle","appendChild","listElem","currentLiElem","currentListStyle","style","listStyleType","split","join","currentElement","currentDropdown","childElementCount","insertBefore","onmousedown","onkeydown","paletteSelection","dropDownArgs","ele","colorbox","slice","call","borderBottomColor","filter","renderColorPickerDropDown","colorPicker","defaultColor","range","initialBackgroundColor","default","fontColor","colorpickerValue","formatter","editorManager","nodeSelection","parentNode","closestElement","collapsed","CLS_RTE","tableColorPickerChanged","colorPickerChanged","inst","showButtons","dataBind","onclick","toggle","setColorPickerContentWidth","focusEle","focus","pickerRefresh","beforeClose","popupElem","offsetWidth","toString","refreshPosition","colorPickerContent","nextSibling","borderWidth","parseInt","borderBottomWidth","children","renderColorPicker","inline","setProperties","modeSwitcher","presetColors","colorCode","columns","beforeTileRender","allClassName","i","change","colorPickerArgs","currentValue","rgba","beforeModeSwitch","toolbarPanel","panel","tooltipElements","tooltipEle"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/toolbar-renderer.js"],"sourcesContent":["import { addClass, Browser, removeClass, formatUnit, isNullOrUndefined, isNullOrUndefined as isNOU, EventHandler, detach } from '@syncfusion/ej2-base';\nimport { getInstance, closest, selectAll } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { Popup, Tooltip } from '@syncfusion/ej2-popups';\nimport * as classes from '../base/classes';\nimport * as events from '../base/constant';\nimport { CLS_TOOLBAR, CLS_DROPDOWN_BTN, CLS_RTE_ELEMENTS, CLS_TB_BTN, CLS_INLINE_DROPDOWN, CLS_COLOR_CONTENT, CLS_FONT_COLOR_DROPDOWN, CLS_BACKGROUND_COLOR_DROPDOWN, CLS_COLOR_PALETTE, CLS_FONT_COLOR_PICKER, CLS_BACKGROUND_COLOR_PICKER, CLS_CUSTOM_TILE, CLS_NOCOLOR_ITEM, CLS_BULLETFORMATLIST_TB_BTN, CLS_NUMBERFORMATLIST_TB_BTN, CLS_LIST_PRIMARY_CONTENT } from '../base/classes';\nimport { ColorPicker } from '@syncfusion/ej2-inputs';\nimport { hasClass } from '../base/util';\nimport { ToolbarStatus } from '../../editor-manager/plugin/toolbar-status';\n/**\n * `Toolbar renderer` module is used to render toolbar in RichTextEditor.\n *\n * @hidden\n\n */\nvar ToolbarRenderer = /** @class */ (function () {\n    /**\n     * Constructor for toolbar renderer module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent element.\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     */\n    function ToolbarRenderer(parent, serviceLocator) {\n        this.parent = parent;\n        this.isDestroyed = false;\n        if (serviceLocator) {\n            this.l10n = serviceLocator.getService('rteLocale');\n        }\n        this.wireEvent();\n    }\n    ToolbarRenderer.prototype.wireEvent = function () {\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.destroyTooltip, this.destroyTooltip, this);\n        this.parent.on(events.closeTooltip, this.closeTooltip, this);\n    };\n    ToolbarRenderer.prototype.destroyTooltip = function () {\n        var currentDocument = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().ownerDocument :\n            this.parent.contentModule.getDocument();\n        if (!isNullOrUndefined(currentDocument.querySelector('.e-tooltip-wrap')) && !isNullOrUndefined(currentDocument.querySelector('[data-tooltip-id]'))) {\n            var tooltipTargetEle = currentDocument.querySelector('[data-tooltip-id]');\n            var event_1 = new MouseEvent('mouseleave', { bubbles: true, cancelable: true });\n            tooltipTargetEle.dispatchEvent(event_1);\n        }\n    };\n    ToolbarRenderer.prototype.unWireEvent = function () {\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.destroyTooltip, this.destroyTooltip);\n        this.parent.off(events.closeTooltip, this.closeTooltip);\n    };\n    ToolbarRenderer.prototype.toolbarBeforeCreate = function (e) {\n        if (this.mode === 'Extended') {\n            e.enableCollision = false;\n        }\n    };\n    ToolbarRenderer.prototype.toolbarCreated = function () {\n        this.parent.notify(events.toolbarCreated, this);\n    };\n    ToolbarRenderer.prototype.toolbarClicked = function (args) {\n        if (!this.parent.enabled) {\n            return;\n        }\n        this.parent.trigger('toolbarClick', args);\n        if (!this.parent.readonly || isNullOrUndefined(args.item)) {\n            this.parent.notify(events.toolbarClick, args);\n        }\n    };\n    ToolbarRenderer.prototype.dropDownSelected = function (args) {\n        this.parent.notify(events.dropDownSelect, { element: args.element, item: args.item, originalEvent: args.event });\n        this.destroyTooltip();\n    };\n    ToolbarRenderer.prototype.beforeDropDownItemRender = function (args) {\n        if (this.parent.readonly || !this.parent.enabled) {\n            return;\n        }\n        this.parent.notify(events.beforeDropDownItemRender, args);\n    };\n    ToolbarRenderer.prototype.tooltipBeforeRender = function (args) {\n        if (!isNOU(args.target.getAttribute('title'))) {\n            var tooltipTarget = args.target.getAttribute('title');\n            var tooltipText = void 0;\n            switch (tooltipTarget) {\n                case 'Minimize':\n                    tooltipText = this.l10n.getConstant('minimize');\n                    args.target.setAttribute('title', tooltipText + ' (Esc)');\n                    break;\n                case 'Maximize':\n                    tooltipText = this.l10n.getConstant('maximize');\n                    args.target.setAttribute('title', tooltipText + ' (Ctrl+Shift+F)');\n                    break;\n            }\n        }\n        if (args.target.querySelector('.e-active')) {\n            args.cancel = true;\n            if (!isNOU(args.target.getAttribute('title'))) {\n                this.closeTooltip({ target: args.target, isTitle: true });\n            }\n        }\n    };\n    ToolbarRenderer.prototype.dropDownOpen = function (args) {\n        if (args.element.parentElement.getAttribute('id').indexOf('TableCell') > -1 && !isNOU(args.element.parentElement.querySelector('.e-cell-merge')) &&\n            (!isNOU(args.element.parentElement.querySelector('.e-cell-horizontal-split')) || !isNOU(args.element.parentElement.querySelector('.e-cell-vertical-split')))) {\n            var listEle = args.element.querySelectorAll('li');\n            var selectedEles_1 = this.parent.inputElement.querySelectorAll('.e-cell-select');\n            if (selectedEles_1.length === 1) {\n                addClass([listEle[0]], 'e-disabled');\n                removeClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n            else if (selectedEles_1.length > 1) {\n                if (!Array.from(selectedEles_1).every(function (element) {\n                    return element.tagName.toLowerCase() === selectedEles_1[0].tagName.toLowerCase();\n                })) {\n                    addClass([listEle[0]], 'e-disabled');\n                }\n                else {\n                    removeClass([listEle[0]], 'e-disabled');\n                }\n                addClass([listEle[1], listEle[2]], 'e-disabled');\n            }\n        }\n        this.parent.notify(events.selectionSave, args);\n    };\n    ToolbarRenderer.prototype.dropDownClose = function (args) {\n        this.parent.notify(events.selectionRestore, args);\n    };\n    /**\n     * renderToolbar method\n     *\n     * @param {IToolbarOptions} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderToolbar = function (args) {\n        this.setPanel(args.target);\n        this.renderPanel();\n        this.mode = args.overflowMode;\n        args.rteToolbarObj.toolbarObj = new Toolbar({\n            items: args.items,\n            width: '100%',\n            overflowMode: args.overflowMode,\n            beforeCreate: this.toolbarBeforeCreate.bind(this),\n            created: this.toolbarCreated.bind(this),\n            clicked: this.toolbarClicked.bind(this),\n            enablePersistence: args.enablePersistence,\n            enableRtl: args.enableRtl,\n            cssClass: args.cssClass\n        });\n        args.rteToolbarObj.toolbarObj.isStringTemplate = true;\n        args.rteToolbarObj.toolbarObj.createElement = this.parent.createElement;\n        args.rteToolbarObj.toolbarObj.appendTo(args.target);\n        if (this.parent.showTooltip && args.type === 'toolbar') {\n            this.tooltip = new Tooltip({\n                target: '#' + this.parent.getID() + '_toolbar_wrapper [title]',\n                showTipPointer: true,\n                openDelay: 400,\n                opensOn: 'Hover',\n                beforeRender: this.tooltipBeforeRender.bind(this),\n                beforeOpen: this.tooltipBeforeOpen.bind(this),\n                cssClass: this.parent.getCssClass(),\n                windowCollision: true,\n                position: 'BottomCenter'\n            });\n            this.tooltip.appendTo(args.target.parentElement);\n        }\n    };\n    ToolbarRenderer.prototype.tooltipBeforeOpen = function (args) {\n        if (args.element) {\n            args.element.setAttribute('data-rte-id', this.parent.getID());\n        }\n    };\n    /**\n     * renderDropDownButton method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderDropDownButton = function (args) {\n        var _this = this;\n        var css;\n        args.element.classList.add(CLS_DROPDOWN_BTN);\n        css = args.cssClass + ' ' + CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN;\n        if (this.parent.inlineMode.enable && Browser.isDevice) {\n            css = css + ' ' + CLS_INLINE_DROPDOWN;\n        }\n        // eslint-disable-next-line\n        var proxy = this;\n        var dropDown = new DropDownButton({\n            items: args.items,\n            iconCss: args.iconCss,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                // Table styles dropdown preselect\n                if (proxy.parent.editorMode !== 'Markdown') {\n                    var startNode = proxy.parent.getRange().startContainer.parentElement;\n                    var tableEle = startNode.closest('table');\n                    var trow = startNode.closest('tr');\n                    if (!isNOU(tableEle) && tableEle.classList.contains('e-dashed-border')) {\n                        for (var index = 0; index < args.element.childNodes.length; index++) {\n                            if (args.element.childNodes[index].classList.contains('e-dashed-borders')) {\n                                addClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                    else if (!isNOU(tableEle) && !tableEle.classList.contains('e-dashed-border') && tableEle.classList.contains('e-alternate-rows') && window.getComputedStyle(trow).backgroundColor !== '') {\n                        for (var index = 0; index < args.element.childNodes.length; index++) {\n                            if (args.element.childNodes[index].classList.contains('e-alternate-rows')) {\n                                addClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                    //Alignments preselect\n                    var alignEle = proxy.parent.getRange().startContainer;\n                    while (alignEle !== proxy.parent.inputElement && !isNOU(alignEle.parentElement)) {\n                        if (alignEle.nodeName === '#text') {\n                            alignEle = alignEle.parentElement;\n                        }\n                        var alignStyle = window.getComputedStyle(alignEle).textAlign;\n                        if (!isNOU(args.items[0]) && args.items[0].command === 'Alignments') {\n                            if ((args.items[0].text === 'Align Left' && (alignStyle === 'left') || alignStyle === 'start')) {\n                                addClass([args.element.childNodes[0]], 'e-active');\n                                break;\n                            }\n                            else if (args.items[1].text === 'Align Center' && alignStyle === 'center') {\n                                addClass([args.element.childNodes[1]], 'e-active');\n                                break;\n                            }\n                            else if (args.items[2].text === 'Align Right' && alignStyle === 'right') {\n                                addClass([args.element.childNodes[2]], 'e-active');\n                                break;\n                            }\n                            else if (args.items[3].text === 'Align Justify' && alignStyle === 'justify') {\n                                addClass([args.element.childNodes[3]], 'e-active');\n                                break;\n                            }\n                        }\n                        alignEle = alignEle.parentElement;\n                    }\n                    //image preselect\n                    var closestNode = startNode.closest('img');\n                    var imageEle = closestNode ? closestNode : startNode.querySelector('img');\n                    if (!isNOU(args.items[0]) && args.items[0].command === 'Images') {\n                        if (!isNOU(imageEle)) {\n                            var index = void 0;\n                            if (imageEle.classList.contains('e-imgleft') || imageEle.classList.contains('e-imginline')) {\n                                index = 0;\n                            }\n                            else if (imageEle.classList.contains('e-imgcenter') || imageEle.classList.contains('e-imgbreak')) {\n                                index = 1;\n                            }\n                            else if (imageEle.classList.contains('e-imgright')) {\n                                index = 2;\n                            }\n                            if (!isNOU(args.element.childNodes[index])) {\n                                addClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                    //Formats preselect\n                    if (!isNOU(args.items[0]) && (args.items[0].command === 'Formats' || args.items[0].command === 'Font')) {\n                        var fontName_1 = [];\n                        var formats_1 = [];\n                        var hasUpdatedActive = false;\n                        _this.parent.format.types.forEach(function (item) {\n                            formats_1.push(item.value.toLocaleLowerCase());\n                        });\n                        _this.parent.fontFamily.items.forEach(function (item) {\n                            fontName_1.push(item.value);\n                        });\n                        var toolbarStatus = ToolbarStatus.get(_this.parent.contentModule.getDocument(), _this.parent.contentModule.getEditPanel(), formats_1, null, fontName_1);\n                        for (var index = 0; index < args.element.childNodes.length; index++) {\n                            var divNode = _this.parent.createElement('div');\n                            divNode.innerHTML = dropDown.content.trim();\n                            if (!hasUpdatedActive && ((divNode.textContent.trim() !== ''\n                                && args.element.childNodes[index].textContent.trim() === divNode.textContent.trim()) ||\n                                ((args.items[0].command === 'Formats' && !isNOU(toolbarStatus.formats) && _this.parent.format.types[index].value.toLowerCase() === toolbarStatus.formats.toLowerCase() && args.element.childNodes[index].classList.contains(_this.parent.format.types[index].cssClass))\n                                    || (args.items[0].subCommand === 'FontName' && args.items[0].command === 'Font' && !isNOU(toolbarStatus.fontname) && !isNOU(_this.parent.fontFamily.items[index]) && _this.parent.fontFamily.items[index].value.toLowerCase() === toolbarStatus.fontname.toLowerCase() && args.element.childNodes[index].classList.contains(_this.parent.fontFamily.items[index].cssClass)))\n                                || (((args.items[0].subCommand === 'FontName') && _this.parent.fontFamily.items[index].value === '' && isNullOrUndefined(toolbarStatus.fontname) && args.element.childNodes[index].classList.contains(_this.parent.fontFamily.items[index].cssClass)) ||\n                                    ((args.items[0].subCommand === 'FontSize') && args.element.childNodes[index].textContent === 'Default' && divNode.textContent === 'Font Size' && _this.parent.fontSize.items[index].value === '' && !isNullOrUndefined(toolbarStatus.fontsize))))) {\n                                if (!args.element.childNodes[index].classList.contains('e-active')) {\n                                    addClass([args.element.childNodes[index]], 'e-active');\n                                    hasUpdatedActive = true;\n                                }\n                            }\n                            else {\n                                removeClass([args.element.childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                }\n                else if (proxy.parent.editorMode === 'Markdown') {\n                    if (args.items[0].command === 'Formats') {\n                        var formats_2 = [];\n                        var hasUpdatedActive = false;\n                        _this.parent.format.types.forEach(function (item) {\n                            formats_2.push(item.value.toLocaleLowerCase());\n                        });\n                        var childNodes = args.element.childNodes;\n                        for (var index = 0; index < childNodes.length; index++) {\n                            var divNode = _this.parent.createElement('div');\n                            divNode.innerHTML = dropDown.content.trim();\n                            if (!hasUpdatedActive && ((divNode.textContent.trim() !== '' && childNodes[index].textContent.trim() === divNode.textContent.trim()))) {\n                                if (!childNodes[index].classList.contains('e-active')) {\n                                    addClass([childNodes[index]], 'e-active');\n                                    hasUpdatedActive = true;\n                                }\n                            }\n                            else {\n                                removeClass([childNodes[index]], 'e-active');\n                            }\n                        }\n                    }\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.mouseOutHandler = function () {\n        if (!isNOU(this.tooltipTargetEle)) {\n            this.tooltipTargetEle.setAttribute('title', this.tooltipTargetEle.getAttribute('data-title'));\n        }\n        else {\n            var currentDocument = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().ownerDocument :\n                this.parent.contentModule.getDocument();\n            this.tooltipTargetEle = currentDocument.querySelector('[data-title]');\n            this.tooltipTargetEle.setAttribute('title', this.tooltipTargetEle.getAttribute('data-title'));\n        }\n        this.tooltipTargetEle.removeAttribute('data-title');\n        EventHandler.remove(this.tooltipTargetEle, 'mouseout', this.mouseOutHandler);\n    };\n    ToolbarRenderer.prototype.closeTooltip = function (args) {\n        if (args.isTitle) {\n            this.tooltipTargetEle = args.target;\n            this.tooltipTargetEle.setAttribute('data-title', this.tooltipTargetEle.getAttribute('title'));\n            this.tooltipTargetEle.removeAttribute('title');\n            EventHandler.add(this.tooltipTargetEle, 'mouseout', this.mouseOutHandler, this);\n        }\n        else {\n            var currentDocument = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().ownerDocument :\n                this.parent.contentModule.getDocument();\n            this.tooltipTargetEle = closest(args.target, '[data-tooltip-id]');\n            if (!isNOU(this.tooltipTargetEle) && this.parent.showTooltip && !isNOU(currentDocument.querySelector('.e-tooltip-wrap'))) {\n                this.destroyTooltip();\n                this.tooltipTargetEle.setAttribute('data-title', this.tooltipTargetEle.getAttribute('title'));\n                this.tooltipTargetEle.removeAttribute('title');\n                EventHandler.add(this.tooltipTargetEle, 'mouseout', this.mouseOutHandler, this);\n            }\n        }\n    };\n    /**\n     * renderListDropDown method\n     *\n     * @param {IDropDownModel} args - specifies the the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderListDropDown = function (args) {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((args.itemName === 'NumberFormatList') ? CLS_NUMBERFORMATLIST_TB_BTN : CLS_BULLETFORMATLIST_TB_BTN));\n        var content = proxy.parent.createElement('span', { className: CLS_LIST_PRIMARY_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            items: args.items,\n            cssClass: css,\n            content: args.content,\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            select: this.dropDownSelected.bind(this),\n            beforeOpen: function (args) {\n                if (proxy.parent.editorMode !== 'Markdown') {\n                    var startNode = proxy.parent.getRange().startContainer.parentElement;\n                    var listElem = startNode.closest('LI');\n                    var currentLiElem = !isNOU(listElem) ? listElem.parentElement : null;\n                    if (!isNOU(currentLiElem) && (currentLiElem.nodeName === 'OL' || currentLiElem.nodeName === 'UL')) {\n                        if (currentLiElem.nodeName === 'UL' && args.items[0].subCommand === 'NumberFormatList') {\n                            addClass([args.element.childNodes[0]], 'e-active');\n                        }\n                        else if (currentLiElem.nodeName === 'OL' && args.items[0].subCommand === 'BulletFormatList') {\n                            addClass([args.element.childNodes[0]], 'e-active');\n                        }\n                        else {\n                            var currentListStyle = currentLiElem.style.listStyleType.split('-').join('').toLocaleLowerCase();\n                            currentListStyle = currentListStyle === 'decimal' ? 'number' : currentListStyle;\n                            for (var index = 0; index < args.element.childNodes.length; index++) {\n                                if (currentListStyle === args.element.childNodes[index].innerHTML.split(' ').join('').toLocaleLowerCase()) {\n                                    addClass([args.element.childNodes[index]], 'e-active');\n                                    break;\n                                }\n                                else if (currentListStyle === '' && args.element.childNodes[index].innerHTML !== 'None') {\n                                    addClass([args.element.childNodes[index]], 'e-active');\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        addClass([args.element.childNodes[0]], 'e-active');\n                    }\n                }\n                _this.closeTooltip({ target: args.event.target });\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    args.cancel = true;\n                    return;\n                }\n                proxy.parent.notify(events.selectionRestore, {});\n                var element = (args.event) ? args.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                if (args.event && args.event.type === 'click' && (element.classList.contains(CLS_LIST_PRIMARY_CONTENT)\n                    || element.parentElement.classList.contains(CLS_LIST_PRIMARY_CONTENT))) {\n                    args.cancel = true;\n                    return;\n                }\n                proxy.parent.notify(events.beforeDropDownOpen, args);\n            },\n            close: this.dropDownClose.bind(this),\n            open: this.dropDownOpen.bind(this),\n            beforeItemRender: this.beforeDropDownItemRender.bind(this)\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        dropDown.appendTo(args.element);\n        args.element.tabIndex = -1;\n        args.element.setAttribute('role', 'button');\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        if (args.element.childElementCount === 1) {\n            dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        }\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        dropDown.element.onmousedown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        dropDown.element.onkeydown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.paletteSelection = function (dropDownArgs, currentElement) {\n        var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n        var colorbox = [].slice.call(selectAll('.e-tile', ele.parentElement));\n        removeClass(colorbox, 'e-selected');\n        var style = currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n        (colorbox.filter(function (colorbox) {\n            if (colorbox.style.backgroundColor === style) {\n                addClass([colorbox], 'e-selected');\n            }\n        }));\n    };\n    /**\n     * renderColorPickerDropDown method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments.\n     * @param {string} item - specifies the item.\n     * @param {ColorPicker} colorPicker - specifies the colorpicker.\n     * @param {string} defaultColor -specifies the defaultColor.\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderColorPickerDropDown = function (args, item, colorPicker, defaultColor) {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        var css = CLS_RTE_ELEMENTS + ' ' + CLS_TB_BTN + ((this.parent.inlineMode) ? (' ' + CLS_INLINE_DROPDOWN) : '');\n        css += (' ' + ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_DROPDOWN : CLS_FONT_COLOR_DROPDOWN));\n        css += this.parent.getCssClass(true);\n        var content = proxy.parent.createElement('span', { className: CLS_COLOR_CONTENT });\n        var inlineEle = proxy.parent.createElement('span', { className: args.cssClass });\n        var range;\n        var initialBackgroundColor = (isNullOrUndefined(defaultColor)) ? proxy.parent.backgroundColor.default : defaultColor;\n        inlineEle.style.borderBottomColor = (item === 'backgroundcolor') ?\n            initialBackgroundColor : proxy.parent.fontColor.default;\n        content.appendChild(inlineEle);\n        var dropDown = new DropDownButton({\n            target: colorPicker.element.parentElement, cssClass: css,\n            enablePersistence: this.parent.enablePersistence, enableRtl: this.parent.enableRtl,\n            beforeOpen: function (dropDownArgs) {\n                if (proxy.parent.readonly || !proxy.parent.enabled) {\n                    dropDownArgs.cancel = true;\n                    return;\n                }\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                proxy.currentElement = dropDown.element;\n                proxy.currentDropdown = dropDown;\n                proxy.paletteSelection(dropDownArgs, proxy.currentElement);\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    dropDownArgs.cancel = true;\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    proxy.parent.notify(events.selectionRestore, {});\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    var parentNode = range.startContainer.parentNode;\n                    var closestElement = closest(range.startContainer.parentNode, 'table');\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        (closest(range.startContainer.parentNode, 'td,th')) ||\n                        (proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')))\n                        && range.collapsed && args.subCommand === 'BackgroundColor' && closest(closestElement, '.' + classes.CLS_RTE)) {\n                        proxy.parent.notify(events.tableColorPickerChanged, {\n                            item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n                else {\n                    var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                    var inst = getInstance(ele, ColorPicker);\n                    inst.showButtons = (dropDownArgs.element.querySelector('.e-color-palette')) ? false : true;\n                    inst.dataBind();\n                }\n                dropDownArgs.element.onclick = function (args) {\n                    if (args.target.classList.contains('e-cancel')) {\n                        dropDown.toggle();\n                    }\n                };\n            },\n            open: function (dropDownArgs) {\n                _this.setColorPickerContentWidth(colorPicker);\n                var focusEle;\n                var ele = dropDownArgs.element.querySelector('.e-control.e-colorpicker');\n                if (dropDownArgs.element.querySelector('.e-color-palette')) {\n                    focusEle = ele.parentElement.querySelector('.e-palette');\n                }\n                else {\n                    focusEle = ele.parentElement.querySelector('e-handler');\n                }\n                if (focusEle) {\n                    focusEle.focus();\n                }\n                _this.pickerRefresh(dropDownArgs);\n            },\n            beforeClose: function (dropDownArgs) {\n                var element = (dropDownArgs.event) ? dropDownArgs.event.target : null;\n                if (dropDownArgs.event && dropDownArgs.event.type === 'click' && (element.classList.contains(CLS_COLOR_CONTENT)\n                    || element.parentElement.classList.contains(CLS_COLOR_CONTENT))) {\n                    var colorpickerValue = element.classList.contains(CLS_RTE_ELEMENTS) ? element.style.borderBottomColor :\n                        element.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor;\n                    range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                    if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' ||\n                        closest(range.startContainer.parentNode, 'td,th')) && range.collapsed) {\n                        proxy.parent.notify(events.tableColorPickerChanged, { item: {\n                                command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue\n                            }\n                        });\n                    }\n                    else {\n                        proxy.parent.notify(events.colorPickerChanged, { item: { command: args.command, subCommand: args.subCommand,\n                                value: colorpickerValue }\n                        });\n                    }\n                    return;\n                }\n            },\n            close: function () {\n                proxy.parent.notify(events.selectionRestore, {});\n            }\n        });\n        dropDown.isStringTemplate = true;\n        dropDown.createElement = proxy.parent.createElement;\n        args.element.setAttribute('role', 'button');\n        dropDown.appendTo(args.element);\n        var popupElement = document.getElementById(dropDown.element.id + '-popup');\n        popupElement.setAttribute('aria-owns', this.parent.getID());\n        dropDown.element.insertBefore(content, dropDown.element.querySelector('.e-caret'));\n        args.element.tabIndex = -1;\n        dropDown.element.removeAttribute('type');\n        dropDown.element.onmousedown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        dropDown.element.onkeydown = function () {\n            proxy.parent.notify(events.selectionSave, {});\n        };\n        return dropDown;\n    };\n    ToolbarRenderer.prototype.pickerRefresh = function (dropDownArgs) {\n        if (this.parent.backgroundColor.mode === 'Picker') {\n            var popupElem = dropDownArgs.element.parentElement;\n            popupElem.style.width = (popupElem.offsetWidth + 5).toString() + 'px';\n            getInstance(popupElem, Popup).refreshPosition(popupElem);\n            popupElem.style.width = (popupElem.offsetWidth - 5).toString() + 'px';\n        }\n    };\n    ToolbarRenderer.prototype.setColorPickerContentWidth = function (colorPicker) {\n        var colorPickerContent = colorPicker.element.nextSibling;\n        if (colorPickerContent.style.width === '0px') {\n            colorPickerContent.style.width = '';\n            var borderWidth = parseInt(getComputedStyle(colorPickerContent).borderBottomWidth, 10);\n            colorPickerContent.style.width = formatUnit(colorPickerContent.children[0].offsetWidth\n                + borderWidth + borderWidth);\n        }\n    };\n    /**\n     * renderColorPicker method\n     *\n     * @param {IColorPickerModel} args - specifies the arguments\n     * @param {string} item - specifies the string values\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderColorPicker = function (args, item) {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        var value;\n        var colorPicker = new ColorPicker({\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            inline: true,\n            value: null,\n            cssClass: ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER) + ' ' + args.cssClass + ' ' + 'e-rte-picker-init',\n            created: function () {\n                var value = (item === 'backgroundcolor') ? proxy.parent.backgroundColor.default : proxy.parent.fontColor.default;\n                var cssClass = ((item === 'backgroundcolor') ? CLS_BACKGROUND_COLOR_PICKER : CLS_FONT_COLOR_PICKER) + ' ' + args.cssClass;\n                colorPicker.setProperties({ value: value, cssClass: cssClass });\n            },\n            mode: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.mode : proxy.parent.fontColor.mode),\n            modeSwitcher: ((item === 'backgroundcolor') ? proxy.parent.backgroundColor.modeSwitcher : proxy.parent.fontColor.modeSwitcher),\n            presetColors: (item === 'backgroundcolor') ? this.parent.backgroundColor.colorCode : this.parent.fontColor.colorCode,\n            columns: (item === 'backgroundcolor') ? this.parent.backgroundColor.columns : this.parent.fontColor.columns,\n            beforeTileRender: function (args) {\n                args.element.classList.add(CLS_COLOR_PALETTE);\n                args.element.classList.add(CLS_CUSTOM_TILE);\n                if (!isNullOrUndefined(_this.parent.cssClass)) {\n                    var allClassName = _this.parent.getCssClass().split(' ');\n                    for (var i = 0; i < allClassName.length; i++) {\n                        if (allClassName[i].trim() !== '') {\n                            args.element.classList.add(allClassName[i]);\n                        }\n                    }\n                }\n                if (args.value === '') {\n                    args.element.classList.add(CLS_NOCOLOR_ITEM);\n                }\n            },\n            change: function (colorPickerArgs) {\n                var colorpickerValue = colorPickerArgs.currentValue.rgba;\n                colorPickerArgs.item = {\n                    command: args.command,\n                    subCommand: args.subCommand,\n                    value: colorpickerValue\n                };\n                proxy.parent.notify(events.selectionRestore, {});\n                proxy.currentElement.querySelector('.' + CLS_RTE_ELEMENTS).style.borderBottomColor = colorpickerValue;\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.parent.contentModule.getDocument());\n                var closestElement = closest(range.startContainer.parentNode, 'table');\n                if ((range.startContainer.nodeName === 'TD' || range.startContainer.nodeName === 'TH' || range.startContainer.nodeName === 'BODY' ||\n                    closest(range.startContainer.parentNode, 'td,th')) && range.collapsed && args.subCommand === 'BackgroundColor' && closest(closestElement, '.' + classes.CLS_RTE)) {\n                    proxy.parent.notify(events.tableColorPickerChanged, colorPickerArgs);\n                }\n                else {\n                    proxy.parent.notify(events.colorPickerChanged, colorPickerArgs);\n                }\n                proxy.currentDropdown.toggle();\n            },\n            beforeModeSwitch: function (args) {\n                value = colorPicker.value;\n                if (value === '') {\n                    colorPicker.setProperties({ value: ((args.mode === 'Picker') ? '#008000ff' : '') }, true);\n                }\n                colorPicker.showButtons = args.mode === 'Palette' ? false : true;\n            }\n        });\n        colorPicker.isStringTemplate = true;\n        colorPicker.createElement = this.parent.createElement;\n        colorPicker.appendTo(document.getElementById(args.target));\n        return colorPicker;\n    };\n    /**\n     * The function is used to render Rich Text Editor toolbar\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.renderPanel = function () {\n        this.getPanel().classList.add(CLS_TOOLBAR);\n    };\n    /**\n     * Get the toolbar element of RichTextEditor\n     *\n     * @returns {Element} - specifies the element.\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.getPanel = function () {\n        return this.toolbarPanel;\n    };\n    /**\n     * Set the toolbar element of RichTextEditor\n     *\n     * @returns {void}\n     * @param  {Element} panel - specifies the element.\n     * @hidden\n\n     */\n    ToolbarRenderer.prototype.setPanel = function (panel) {\n        this.toolbarPanel = panel;\n    };\n    ToolbarRenderer.prototype.destroy = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (this.tooltip && !this.tooltip.isDestroyed) {\n            this.tooltip.destroy();\n            var tooltipElements = document.querySelectorAll('[data-rte-id=\"' + this.parent.getID() + '\"]');\n            for (var i = 0; i < tooltipElements.length; i++) {\n                var tooltipEle = tooltipElements[i];\n                if (this.parent.getID() === tooltipEle.getAttribute('data-rte-id')) {\n                    detach(tooltipEle);\n                }\n            }\n        }\n        this.unWireEvent();\n        this.mode = null;\n        this.toolbarPanel = null;\n        this.currentElement = null;\n        this.currentDropdown = null;\n        this.tooltip = null;\n        this.tooltipTargetEle = null;\n        this.isDestroyed = true;\n    };\n    return ToolbarRenderer;\n}());\nexport { ToolbarRenderer };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}