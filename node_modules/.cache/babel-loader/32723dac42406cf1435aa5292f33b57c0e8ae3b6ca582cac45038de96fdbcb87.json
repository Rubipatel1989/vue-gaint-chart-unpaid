{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { Cell, CellType } from '@syncfusion/ej2-grids';\nimport { VirtualContentRenderer } from '@syncfusion/ej2-grids';\nimport * as literals from '../base/constant';\nimport { InterSectionObserver } from '@syncfusion/ej2-grids';\nimport { TreeVirtualRowModelGenerator } from '../renderer/virtual-row-model-generator';\nimport * as events from '../base/constant';\nimport { isNullOrUndefined, EventHandler, getValue, setValue, Browser, debounce } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { isCountRequired } from '../utils';\nvar VirtualTreeContentRenderer = /** @class */function (_super) {\n  __extends(VirtualTreeContentRenderer, _super);\n  function VirtualTreeContentRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n    _this.isExpandCollapse = false;\n    _this.translateY = 0;\n    _this.maxiPage = 0;\n    _this.recordAdded = false;\n    /** @hidden */\n    _this.startIndex = -1;\n    _this.endIndex = -1;\n    _this.preTranslate = 0;\n    _this.isRemoteExpand = false;\n    /** @hidden */\n    _this.isDataSourceChanged = false;\n    _this.addEventListener();\n    return _this;\n  }\n  VirtualTreeContentRenderer.prototype.getModelGenerator = function () {\n    return new TreeVirtualRowModelGenerator(this.parent);\n  };\n  VirtualTreeContentRenderer.prototype.getRowByIndex = function (index) {\n    if (this.parent.enableVirtualization && this.parent.isFrozenGrid()) {\n      return this.getRowCollection(index, true);\n    }\n    var dataRows = this.parent.getDataRows();\n    var targetRow = dataRows.find(function (e) {\n      return parseInt(e.getAttribute('data-rowindex'), 10) === index;\n    });\n    if (!targetRow && this.parent.isEdit && this.parent.editSettings.mode === 'Batch') {\n      return index != null ? this.parent.getRows()[parseInt(index.toString(), 10)] : undefined;\n    }\n    return targetRow;\n  };\n  VirtualTreeContentRenderer.prototype.getFrozenRightVirtualRowByIndex = function (index) {\n    return this.getRowCollection(index, false, false, true);\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  VirtualTreeContentRenderer.prototype.getRowCollection = function (index, isMovable, isRowObject, isFrozenRight) {\n    var startIdx = parseInt(this.parent.getRows()[0].getAttribute(literals.dataRowIndex), 10);\n    var rowCollection = this.parent.getDataRows();\n    var collection = isRowObject ? this.parent.getCurrentViewRecords() : rowCollection;\n    var selectedRow = collection[index - startIdx];\n    if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n      if (!isRowObject) {\n        selectedRow = index <= this.parent.frozenRows ? rowCollection[parseInt(index.toString(), 10)] : rowCollection[index - startIdx + this.parent.frozenRows];\n      } else {\n        selectedRow = index <= this.parent.frozenRows ? this.parent.getRowsObject()[parseInt(index.toString(), 10)].data : selectedRow;\n      }\n    }\n    return selectedRow;\n  };\n  VirtualTreeContentRenderer.prototype.addEventListener = function () {\n    this.parent.on(events.virtualActionArgs, this.virtualOtherAction, this);\n    this.parent.on(events.indexModifier, this.indexModifier, this);\n  };\n  VirtualTreeContentRenderer.prototype.virtualOtherAction = function (args) {\n    if (args.setTop) {\n      this.translateY = 0;\n      this.startIndex = 0;\n      this.endIndex = this.parent.pageSettings.pageSize - 1;\n    } else if (args.isExpandCollapse) {\n      this.isExpandCollapse = true;\n    }\n  };\n  VirtualTreeContentRenderer.prototype.indexModifier = function (args) {\n    var content = this.parent.getContent().querySelector('.e-content');\n    if ((this.recordAdded || args.requestType === 'delete' && this.endIndex > args.count - this.parent.pageSettings.pageSize) && this.startIndex > -1 && this.endIndex > -1) {\n      if (this.endIndex > args.count - this.parent.pageSettings.pageSize) {\n        var nextSetResIndex = ~~(content.scrollTop / this.parent.getRowHeight());\n        var lastIndex = nextSetResIndex + this.parent.getRows().length;\n        if (lastIndex > args.count) {\n          lastIndex = nextSetResIndex + (args.count - nextSetResIndex);\n        }\n        this.startIndex = lastIndex - this.parent.getRows().length;\n        this.endIndex = lastIndex;\n      } else if (this.parent.root.editSettings.newRowPosition !== 'Top' && this.parent.root.editModule.selectedIndex !== -1 || this.parent.root.editModule.selectedIndex !== -1) {\n        this.startIndex += 1;\n        this.endIndex += 1;\n      }\n      this.recordAdded = false;\n    }\n    if (this.isDataSourceChanged) {\n      this.startIndex = 0;\n      this.endIndex = this.parent.pageSettings.pageSize - 1;\n    }\n    if (this.endIndex - this.startIndex !== this.parent.pageSettings.pageSize && this.totalRecords > this.parent.pageSettings.pageSize && this.endIndex === this.totalRecords) {\n      args.startIndex = this.endIndex - this.parent.pageSettings.pageSize;\n      args.endIndex = this.endIndex;\n    } else {\n      args.startIndex = this.startIndex;\n      args.endIndex = this.endIndex;\n    }\n  };\n  VirtualTreeContentRenderer.prototype.eventListener = function (action) {\n    var _this = this;\n    if (!(this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined && this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '') || !isCountRequired(this.parent)) {\n      this.parent[\"\" + action]('data-ready', this.onDataReady, this);\n      this.parent[\"\" + action]('refresh-virtual-block', this.refreshContentRows, this);\n      this.fn = function () {\n        _this.observers.observes(function (scrollArgs) {\n          return _this.scrollListeners(scrollArgs);\n        }, _this.onEnteredAction(), _this.parent);\n        var gObj = _this.parent;\n        if (gObj.root.enablePersistence && gObj.root.scrollPosition) {\n          _this.content.scrollTop = gObj.root.scrollPosition.top;\n          if (gObj.root.enableColumnVirtualization) {\n            _this.content.scrollLeft = gObj.root.scrollPosition.left;\n          }\n          var scrollValues = {\n            direction: 'down',\n            sentinel: _this.observer.sentinelInfo.down,\n            offset: gObj.root.scrollPosition,\n            focusElement: gObj.element\n          };\n          _this.scrollListeners(scrollValues);\n        }\n        _this.parent.off('content-ready', _this.fn);\n      };\n      this.parent.addEventListener('dataBound', this.dataBoundEvent.bind(this));\n      this.parent.addEventListener('rowSelected', this.rowSelectedEvent.bind(this));\n      this.parent[\"\" + action]('select-virtual-Row', this.toSelectVirtualRow, this);\n      this.parent.on('content-ready', this.fn, this);\n      this.parent.addEventListener(events.actionComplete, this.onActionComplete.bind(this));\n      this.parent[\"\" + action]('virtual-scroll-edit-action-begin', this.beginEdit, this);\n      this.parent[\"\" + action]('virtual-scroll-add-action-begin', this.beginAdd, this);\n      this.parent[\"\" + action]('virtual-scroll-edit-success', this.virtualEditSuccess, this);\n      this.parent[\"\" + action]('edit-reset', this.resetIseditValue, this);\n      this.parent[\"\" + action]('get-virtual-data', this.getData, this);\n      this.parent[\"\" + action]('virtual-scroll-edit-cancel', this.cancelEdit, this);\n      this.parent[\"\" + action]('select-row-on-context-open', this.toSelectRowOnContextOpen, this);\n      this.parent[\"\" + action]('refresh-virtual-editform-cells', this.refreshCell, this);\n      this.parent[\"\" + action]('virtaul-cell-focus', this.cellFocus, this);\n    } else {\n      _super.prototype.eventListener.call(this, 'on');\n    }\n  };\n  VirtualTreeContentRenderer.prototype.cellFocus = function (e) {\n    var virtualCellFocus = 'virtualCellFocus';\n    _super.prototype[\"\" + virtualCellFocus].call(this, e);\n  };\n  VirtualTreeContentRenderer.prototype.onDataReady = function (e) {\n    _super.prototype.onDataReady.call(this, e);\n    if (!(this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined && this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '') || !isCountRequired(this.parent)) {\n      if (!isNullOrUndefined(e.count)) {\n        this.totalRecords = e.count;\n        // To overcome the white space issue in last page when records collapsed\n        if (this.parent.isFrozenGrid() && e.count < Object.keys(this.parent.dataSource).length) {\n          var width = this.parent.enableColumnVirtualization ? this.getColumnOffset(this.parent.columns.length - 1) + 'px' : '100%';\n          var height = this.parent.getRowHeight() * e.count - this.parent.getRowHeight() * this.parent.pageSettings.pageSize;\n          getValue('virtualEle', this).setVirtualHeight(height, width);\n        }\n        if (!this.parent.enableColumnVirtualization && !this.parent.isFrozenGrid()) {\n          getValue('virtualEle', this).setVirtualHeight(this.parent.getRowHeight() * e.count, '100%');\n        }\n      }\n      if (!isNullOrUndefined(e.requestType) && e.requestType.toString() === 'collapseAll' || this.isDataSourceChanged && (this.startIndex === -1 || this.startIndex === 0 && this['preStartIndex'] === 0)) {\n        this.contents.scrollTop = 0;\n        this.isDataSourceChanged = false;\n      }\n    }\n  };\n  VirtualTreeContentRenderer.prototype.renderTable = function () {\n    _super.prototype.renderTable.call(this);\n    if (!(this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined && this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '') || !isCountRequired(this.parent)) {\n      getValue('observer', this).options.debounceEvent = false;\n      this.observers = new TreeInterSectionObserver(getValue('observer', this).element, getValue('observer', this).options);\n      this.contents = this.getPanel().firstChild;\n    }\n  };\n  VirtualTreeContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n    if (this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined && !this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '' || isCountRequired(this.parent)) {\n      if (this.isRemoteExpand) {\n        this.isRemoteExpand = false;\n        return this.preTranslate;\n      } else {\n        this.preTranslate = _super.prototype.getTranslateY.call(this, sTop, cHeight, info, isOnenter);\n        return _super.prototype.getTranslateY.call(this, sTop, cHeight, info, isOnenter);\n      }\n    } else {\n      return _super.prototype.getTranslateY.call(this, sTop, cHeight, info, isOnenter);\n    }\n  };\n  VirtualTreeContentRenderer.prototype.dataBoundEvent = function () {\n    var dataBoundEve = 'dataBound';\n    var initialRowTop = 'initialRowTop';\n    if (this.parent.getRows().length && !isNullOrUndefined(this.parent.getRowByIndex(0)) && !this[\"\" + initialRowTop]) {\n      var rowTop = this.parent.getRowByIndex(0).getBoundingClientRect().top;\n      var gridTop = this.parent.element.getBoundingClientRect().top;\n      if (rowTop > 0) {\n        this[\"\" + initialRowTop] = this.parent.getRowByIndex(0).getBoundingClientRect().top - gridTop;\n      } else {\n        this[\"\" + initialRowTop] = this.content.getBoundingClientRect().top - this.parent.getRowByIndex(0).getBoundingClientRect().height;\n      }\n    }\n    _super.prototype[\"\" + dataBoundEve].call(this);\n  };\n  VirtualTreeContentRenderer.prototype.rowSelectedEvent = function (args) {\n    var rowSelected = 'rowSelected';\n    _super.prototype[\"\" + rowSelected].call(this, args);\n    this.parent.notify('virtualTransform', {\n      requestType: 'transformChange'\n    });\n  };\n  VirtualTreeContentRenderer.prototype.toSelectVirtualRow = function (args) {\n    if (this.parent.isEdit) {\n      return;\n    }\n    var selectVirtualRow = 'selectVirtualRow';\n    var containerRect = 'containerRect';\n    if (isNullOrUndefined(this.observer[\"\" + containerRect])) {\n      this.observer[\"\" + containerRect] = this.observers[\"\" + containerRect];\n    }\n    if (isNullOrUndefined(this.parent.clipboardModule['treeGridParent'].editModule) || args.selectedIndex !== 0 || isNullOrUndefined(this.parent.clipboardModule['treeGridParent'].editModule['addRowIndex'])) {\n      _super.prototype[\"\" + selectVirtualRow].call(this, args);\n    }\n  };\n  VirtualTreeContentRenderer.prototype.refreshCell = function (rowObj) {\n    rowObj.cells = this.generateCells();\n  };\n  VirtualTreeContentRenderer.prototype.generateCells = function () {\n    var cells = [];\n    for (var i = 0; i < this.parent.columns.length; i++) {\n      cells.push(this.generateCell(this.parent.columns[parseInt(i.toString(), 10)]));\n    }\n    return cells;\n  };\n  VirtualTreeContentRenderer.prototype.generateCell = function (col, rowId, cellType, colSpan, oIndex, foreignKeyData) {\n    var opt = {\n      'visible': col.visible,\n      'isDataCell': !isNullOrUndefined(col.field || col.template),\n      'isTemplate': !isNullOrUndefined(col.template),\n      'rowID': rowId,\n      'column': col,\n      'cellType': !isNullOrUndefined(cellType) ? cellType : CellType.Data,\n      'colSpan': colSpan,\n      'commands': col.commands,\n      'isForeignKey': col.isForeignColumn && col.isForeignColumn(),\n      'foreignKeyData': col.isForeignColumn && col.isForeignColumn() && getValue(col.field, foreignKeyData)\n    };\n    if (opt.isDataCell || opt.column.type === 'checkbox' || opt.commands) {\n      opt.index = oIndex;\n    }\n    return new Cell(opt);\n  };\n  VirtualTreeContentRenderer.prototype.beginEdit = function (e) {\n    this['editedRowIndex'] = e.index;\n    var selector = '.e-row[data-rowindex=\"' + e.index + '\"]';\n    var index = this.parent.getContent().querySelector(selector).rowIndex;\n    var rowData = this.parent.getCurrentViewRecords()[parseInt(index.toString(), 10)];\n    e.data = rowData;\n  };\n  VirtualTreeContentRenderer.prototype.beginAdd = function (args) {\n    var addAction = 'addActionBegin';\n    var isAdd = 'isAdd';\n    var addArgs = {\n      newRowPosition: this.rowPosition,\n      addRowIndex: this.addRowIndex,\n      dataRowIndex: this.dataRowIndex\n    };\n    this.parent.notify('get-row-position', addArgs);\n    this.rowPosition = addArgs.newRowPosition;\n    this.addRowIndex = addArgs.addRowIndex;\n    this.dataRowIndex = addArgs.dataRowIndex;\n    var rows = this.parent.getRows();\n    var firstAriaIndex = rows.length ? +rows[0].getAttribute('data-rowindex') : 0;\n    var lastAriaIndex = rows.length ? +rows[rows.length - 1].getAttribute('data-rowindex') : 0;\n    var withInRange = this.parent.selectedRowIndex >= firstAriaIndex && this.parent.selectedRowIndex <= lastAriaIndex;\n    if (!(this.rowPosition === 'Top' || this.rowPosition === 'Bottom')) {\n      this[\"\" + isAdd] = true;\n    }\n    if (this.rowPosition === 'Top' || this.rowPosition === 'Bottom' || (!this.addRowIndex || this.addRowIndex === -1) && (this.parent.selectedRowIndex === -1 || !withInRange)) {\n      _super.prototype[\"\" + addAction].call(this, args);\n    }\n  };\n  VirtualTreeContentRenderer.prototype.restoreEditState = function () {\n    var restoreEdit = 'restoreEdit';\n    _super.prototype[\"\" + restoreEdit].call(this);\n  };\n  VirtualTreeContentRenderer.prototype.resetIseditValue = function () {\n    var resetIsEdit = 'resetIsedit';\n    var isAdd = 'isAdd';\n    this.parent.notify('reset-edit-props', {});\n    if ((this.rowPosition === 'Top' || this.rowPosition === 'Bottom') && this[\"\" + isAdd]) {\n      _super.prototype[\"\" + resetIsEdit].call(this);\n    }\n  };\n  VirtualTreeContentRenderer.prototype.virtualEditSuccess = function () {\n    var isAdd = 'isAdd';\n    var content = this.parent.getContent().querySelector('.e-content');\n    if (this[\"\" + isAdd] && content.querySelector('.e-addedrow')) {\n      this.recordAdded = true;\n    }\n  };\n  VirtualTreeContentRenderer.prototype.cancelEdit = function (args) {\n    var editCancel = 'editCancel';\n    _super.prototype[\"\" + editCancel].call(this, args);\n  };\n  VirtualTreeContentRenderer.prototype.toSelectRowOnContextOpen = function (args) {\n    var selectRowOnContextOpen = 'selectRowOnContextOpen';\n    _super.prototype[\"\" + selectRowOnContextOpen].call(this, args);\n  };\n  VirtualTreeContentRenderer.prototype.restoreNewRow = function () {\n    var isAdd = 'isAdd';\n    var content = this.parent.getContent().querySelector('.e-content');\n    if (this[\"\" + isAdd] && !content.querySelector('.e-addedrow')) {\n      this.parent.isEdit = false;\n      this.parent.editModule.addRecord(null, this.parent.root.editModule.selectedIndex);\n    }\n  };\n  VirtualTreeContentRenderer.prototype.getData = function (data) {\n    var getVirtualData = 'getVirtualData';\n    _super.prototype[\"\" + getVirtualData].call(this, data);\n  };\n  VirtualTreeContentRenderer.prototype.onActionComplete = function (args) {\n    if (args.requestType === 'add') {\n      var addArgs = {\n        newRowPosition: this.rowPosition,\n        addRowIndex: this.addRowIndex,\n        dataRowIndex: this.dataRowIndex\n      };\n      this.parent.notify('get-row-position', addArgs);\n      this.rowPosition = addArgs.newRowPosition;\n      this.addRowIndex = addArgs.addRowIndex;\n      this.dataRowIndex = this.parent.root.editModule.selectedIndex;\n    }\n    var actionComplete = 'actionComplete';\n    _super.prototype[\"\" + actionComplete].call(this, args);\n  };\n  VirtualTreeContentRenderer.prototype.onEnteredAction = function () {\n    var _this = this;\n    return function (element, current, direction, e, isWheel, check) {\n      var directVirtualRender = 'directVirtualRender';\n      if (!_this.parent[\"\" + directVirtualRender]) {\n        // with this property, columns are rendered without debouncing on horizontal scroll.\n        var preventEvent = 'preventEvent';\n        if (Browser.isIE && !isWheel && check && !_this[\"\" + preventEvent] && !_this.parent.enableVirtualMaskRow) {\n          _this.parent.showSpinner();\n        }\n        if (_this.parent.enableVirtualMaskRow && !_this[\"\" + preventEvent]) {\n          setTimeout(function () {\n            _this.parent.showMaskRow(current.axis);\n            _this.parent.notify('showGanttShimmer', {\n              requestType: 'showShimmer'\n            });\n          }, 0);\n        }\n        var height = _this.content.getBoundingClientRect().height;\n        var top_1 = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n        var xAxis = current.axis === 'X';\n        var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n        if (xAxis) {\n          var idx = Object.keys(_this.vgenerator.cOffsets).length - _this.prevInfo.columnIndexes.length;\n          var maxLeft = _this.vgenerator.cOffsets[idx - 1];\n          x = x > maxLeft ? maxLeft : x; //TODO: This fix horizontal scrollbar jumping issue in column virtualization.\n        }\n        var y = _this.getTranslateY(e.top, height, xAxis && top_1 === e.top ? _this.prevInfo : undefined, true);\n        if (!_this.parent.isFrozenGrid() || _this.parent.enableVirtualMaskRow) {\n          if (_this.parent.enableVirtualMaskRow) {\n            var upScroll = e.top - _this.translateY < 0;\n            y = Math.round(_this.translateY) > y && !upScroll ? Math.round(_this.translateY) : y;\n            _this.virtualEle.adjustTable(x, y);\n          } else {\n            _this.virtualEle.adjustTable(x, _this.translateY);\n          }\n          if (_this.parent.enableColumnVirtualization) {\n            _this.header.virtualEle.adjustTable(x, 0);\n          }\n        }\n      }\n    };\n  };\n  VirtualTreeContentRenderer.prototype.scrollListeners = function (scrollArgs) {\n    this['scrollAfterEdit']();\n    if (this.parent.root.enablePersistence) {\n      this.parent.root.scrollPosition = scrollArgs.offset;\n    }\n    var info = scrollArgs.sentinel;\n    var rowHeight = this.parent.getRowHeight();\n    var outBuffer = this.parent.pageSettings.pageSize - Math.ceil(this.parent.pageSettings.pageSize / 2);\n    var content;\n    if (!isNullOrUndefined(this.parent.contentModule)) {\n      content = this.parent.getContent().querySelector('.e-content');\n    }\n    var scrollHeight = outBuffer * rowHeight;\n    var upScroll = scrollArgs.offset.top - this.translateY < 0;\n    var downScroll = Math.ceil(scrollArgs.offset.top - this.translateY) + rowHeight >= scrollHeight;\n    var selectedRowIndex = 'selectedRowIndex';\n    var currentViewData = this.parent.currentViewData;\n    var indexValue = 'index';\n    if (upScroll && scrollArgs.direction !== 'right' && scrollArgs.direction !== 'left' && !isNullOrUndefined(content)) {\n      var vHeight = +(this.parent.height.toString().indexOf('%') < 0 ? parseInt(this.parent.height.toString(), 10) : this.parent.element.getBoundingClientRect().height);\n      var index = ~~(content.scrollTop / rowHeight) + Math.ceil(vHeight / rowHeight) - this.parent.pageSettings.pageSize;\n      index = index > 0 ? index : 0;\n      if (!isNullOrUndefined(this[\"\" + selectedRowIndex]) && this[\"\" + selectedRowIndex] !== -1 && index !== this[\"\" + selectedRowIndex] && this.parent.rowHeight * this.parent.pageSettings.pageSize < content.scrollTop) {\n        index = this[\"\" + selectedRowIndex];\n      }\n      this.startIndex = index;\n      this.endIndex = index + this.parent.pageSettings.pageSize;\n      if (this.endIndex > this.totalRecords) {\n        var lastInx = this.totalRecords;\n        var remains = this.endIndex % lastInx;\n        this.endIndex = lastInx;\n        this.startIndex = this.startIndex - remains < 0 ? 0 : this.startIndex - remains;\n      }\n      if (currentViewData.length && currentViewData[0][\"\" + indexValue] >= this.parent.pageSettings.pageSize / 2 && currentViewData[0][\"\" + indexValue] - this.startIndex < this.parent.pageSettings.pageSize / 2 && this.parent.selectionModule.isRowSelected) {\n        this.startIndex = currentViewData[0][\"\" + indexValue] - this.parent.pageSettings.pageSize / 2;\n        this.endIndex = this.startIndex + this.parent.pageSettings.pageSize;\n      }\n      //var firsttdinx = parseInt(this.parent.getContent().querySelector('.e-content td').getAttribute('index'), 0);\n      var rowPt = Math.ceil(scrollArgs.offset.top / rowHeight);\n      rowPt = rowPt % this.parent.pageSettings.pageSize;\n      var firsttdinx = 0;\n      if (!isNullOrUndefined(this.parent.getRows()[parseInt(rowPt.toString(), 10)]) && !isNullOrUndefined(this.parent.getContent().querySelectorAll('.e-content tr')[parseInt(rowPt.toString(), 10)])) {\n        var attr = this.parent.getContent().querySelectorAll('.e-content tr')[parseInt(rowPt.toString(), 10)].querySelector('td').getAttribute('index');\n        firsttdinx = +attr; // this.parent.getContent().querySelector('.e-content tr').getAttribute('data-rowindex');\n      }\n      if (firsttdinx === 0) {\n        if (this.endIndex - this.startIndex < this.parent.pageSettings.pageSize) {\n          this.translateY = !isNullOrUndefined(this.endIndex) ? (this.endIndex - this.parent.pageSettings.pageSize) * (this.parent.rowHeight ? this.parent.rowHeight : this.parent.getRowHeight()) : 0;\n        } else {\n          this.translateY = scrollArgs.offset.top - outBuffer * rowHeight > 0 ? scrollArgs.offset.top - outBuffer * rowHeight + rowHeight : 0;\n        }\n      } else if (this.parent.getFrozenColumns() > 0) {\n        scrollArgs.offset.top = scrollArgs.offset.top + 80;\n        this.translateY = scrollArgs.offset.top - outBuffer * rowHeight > 0 ? scrollArgs.offset.top - outBuffer * rowHeight + 10 : 0;\n      } else {\n        this.translateY = scrollArgs.offset.top - outBuffer * rowHeight > 0 ? scrollArgs.offset.top - outBuffer * rowHeight + 10 : 0;\n      }\n    } else if (downScroll && scrollArgs.direction !== 'right' && scrollArgs.direction !== 'left' && !isNullOrUndefined(content)) {\n      var nextSetResIndex = ~~(content.scrollTop / rowHeight);\n      var isLastBlock = this[\"\" + selectedRowIndex] + this.parent.pageSettings.pageSize < this.totalRecords ? false : true;\n      if (!isNullOrUndefined(this[\"\" + selectedRowIndex]) && this[\"\" + selectedRowIndex] !== -1 && nextSetResIndex !== this[\"\" + selectedRowIndex] && !isLastBlock) {\n        nextSetResIndex = this[\"\" + selectedRowIndex];\n      }\n      var lastIndex = nextSetResIndex + this.parent.pageSettings.pageSize;\n      if (lastIndex > this.totalRecords) {\n        lastIndex = nextSetResIndex + (this.totalRecords - nextSetResIndex);\n      }\n      this.startIndex = !isLastBlock || isNullOrUndefined(this['' + selectedRowIndex]) ? lastIndex - this.parent.pageSettings.pageSize : nextSetResIndex;\n      this.endIndex = lastIndex;\n      if (nextSetResIndex + this.parent.pageSettings.pageSize > this.totalRecords && this.endIndex - this.startIndex < this.parent.pageSettings.pageSize / 2 && this.endIndex - nextSetResIndex < this.parent.pageSettings.pageSize / 2) {\n        this.startIndex = lastIndex - this.parent.pageSettings.pageSize / 2;\n      }\n      if (currentViewData.length && this.startIndex > currentViewData[0][\"\" + indexValue] && this.startIndex - currentViewData[0][\"\" + indexValue] < this.parent.pageSettings.pageSize / 2 && this.parent.selectionModule.isRowSelected) {\n        this.startIndex = currentViewData[0][\"\" + indexValue] + this.parent.pageSettings.pageSize / 2;\n      }\n      var selectedIndex = this.parent.root.selectedRowIndex;\n      this.startIndex = selectedIndex !== -1 && selectedIndex !== this.startIndex ? this.startIndex - 1 : this.startIndex;\n      if (scrollArgs.offset.top > rowHeight * this.totalRecords) {\n        this.translateY = this.getTranslateY(scrollArgs.offset.top, content.getBoundingClientRect().height);\n      } else {\n        if (this.totalRecords === this.endIndex) {\n          this.translateY = this.totalRecords * rowHeight - (this.endIndex - this.startIndex) * rowHeight;\n        } else {\n          if (this.parent.getFrozenColumns() > 0) {\n            this.translateY = scrollArgs.offset.top - (rowHeight * 2 + this.parent.pageSettings.pageSize);\n          } else {\n            this.translateY = scrollArgs.offset.top;\n          }\n        }\n      }\n    }\n    if (downScroll && scrollArgs.offset.top < rowHeight * this.totalRecords || upScroll || scrollArgs.direction === 'right' || scrollArgs.direction === 'left' || this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined && !this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '' && (downScroll || upScroll) || isCountRequired(this.parent)) {\n      var viewInfo = this.currentInfo = getValue('getInfoFromView', this).apply(this, [scrollArgs.direction, info, scrollArgs.offset]);\n      this.previousInfo = viewInfo;\n      this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n      var page = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n      this.parent.setProperties({\n        pageSettings: {\n          currentPage: page\n        }\n      }, true);\n      if (downScroll && this.endIndex === this.totalRecords && viewInfo.loadNext) {\n        viewInfo.loadNext = false;\n      }\n      this.requestType = 'virtualscroll';\n      if (scrollArgs.direction !== 'right' && scrollArgs.direction !== 'left') {\n        viewInfo.event = viewInfo.event === 'refresh-virtual-block' ? 'model-changed' : viewInfo.event;\n      }\n      if (this.parent.enableVirtualMaskRow) {\n        this.parent.showMaskRow(info.axis);\n        this.parent.addShimmerEffect();\n        this.parent.notify('showGanttShimmer', {\n          requestType: 'showShimmer'\n        });\n      }\n      this.parent.notify(viewInfo.event, {\n        requestType: 'virtualscroll',\n        virtualInfo: viewInfo,\n        focusElement: scrollArgs.focusElement\n      });\n    } else {\n      if (this.parent.enableVirtualMaskRow) {\n        this.parent.removeMaskRow();\n        this.parent.notify('removeGanttShimmer', {\n          requestType: 'hideShimmer'\n        });\n      }\n    }\n  };\n  VirtualTreeContentRenderer.prototype.appendContent = function (target, newChild, e) {\n    if (this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined && !this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '' || isCountRequired(this.parent)) {\n      if (getValue('isExpandCollapse', e)) {\n        this.isRemoteExpand = true;\n      }\n      _super.prototype.appendContent.call(this, target, newChild, e);\n      if (getValue('requestTypes', this).indexOf('isFrozen') !== -1) {\n        getValue('requestTypes', this).splice(getValue('requestTypes', this).indexOf('isFrozen'), 1);\n        this.requestType = this.requestType === 'isFrozen' ? undefined : this.requestType;\n      }\n    } else {\n      var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && getValue('currentInfo', this).page && getValue('currentInfo', this).page !== e.virtualInfo.page ? getValue('currentInfo', this) : e.virtualInfo;\n      var cBlock = info.columnIndexes[0] - 1;\n      var cOffset = this.getColumnOffset(cBlock);\n      var width = void 0;\n      if (this.parent.enableColumnVirtualization) {\n        this.header.virtualEle.adjustTable(cOffset, 0);\n        var cIndex = info.columnIndexes;\n        width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n        this.header.virtualEle.setWrapperWidth(width);\n      }\n      this.virtualEle.setWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n      target = this.parent.createElement('tbody');\n      target.appendChild(newChild);\n      var replace = 'replaceWith';\n      this.getTable().querySelector('tbody')[\"\" + replace](target);\n      if (!this.isExpandCollapse || this.translateY === 0) {\n        this.translateY = this.translateY < 0 ? 0 : this.translateY;\n        getValue('virtualEle', this).adjustTable(cOffset, this.translateY);\n      } else {\n        this.isExpandCollapse = false;\n      }\n      setValue('prevInfo', this.previousInfo ? this.previousInfo : info, this);\n      if (e.requestType === 'virtualscroll' && e.virtualInfo.sentinelInfo.axis === 'X') {\n        this.parent.notify(events.autoCol, {});\n      }\n      var focusCell = 'focusCell';\n      var restoreAdd = 'restoreAdd';\n      var ensureSelectedRowPosition = 'ensureSelectedRowPosition';\n      _super.prototype[\"\" + focusCell].call(this, e);\n      var isAdd = 'isAdd';\n      if (this[\"\" + isAdd] && !this.parent.getContent().querySelector('.e-content').querySelector('.e-addedrow')) {\n        if (!(this.rowPosition === 'Top' || this.rowPosition === 'Bottom')) {\n          if (this.dataRowIndex >= this.startIndex) {\n            this.restoreNewRow();\n          } else if (this.addRowIndex && this.addRowIndex > -1) {\n            this[\"\" + isAdd] = false;\n            this.parent.isEdit = false;\n          }\n        }\n      }\n      this.restoreEditState();\n      _super.prototype[\"\" + restoreAdd].call(this);\n      _super.prototype[\"\" + ensureSelectedRowPosition].call(this);\n    }\n  };\n  VirtualTreeContentRenderer.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off('data-ready', this.onDataReady);\n    this.parent.off('content-ready', this.fn);\n    this.parent.off('select-virtual-Row', this.toSelectVirtualRow);\n    this.parent.off('dataBound', this.dataBoundEvent);\n    this.parent.off('rowSelected', this.rowSelectedEvent);\n    this.parent.off(events.virtualActionArgs, this.virtualOtherAction);\n    this.parent.off(events.indexModifier, this.indexModifier);\n    this.parent.off('virtual-scroll-edit-action-begin', this.beginEdit);\n    this.parent.off('virtual-scroll-add-action-begin', this.beginAdd);\n    this.parent.off('virtual-scroll-edit-success', this.virtualEditSuccess);\n    this.parent.off('edit-reset', this.resetIseditValue);\n    this.parent.off('get-virtual-data', this.getData);\n    this.parent.off('virtual-scroll-edit-cancel', this.cancelEdit);\n    this.parent.off('select-row-on-context-open', this.toSelectRowOnContextOpen);\n    this.parent.off('refresh-virtual-editform-cells', this.refreshCell);\n    this.parent.off('virtaul-cell-focus', this.cellFocus);\n  };\n  return VirtualTreeContentRenderer;\n}(VirtualContentRenderer);\nexport { VirtualTreeContentRenderer };\nvar TreeInterSectionObserver = /** @class */function (_super) {\n  __extends(TreeInterSectionObserver, _super);\n  function TreeInterSectionObserver() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.isWheeling = false;\n    _this.newPos = 0;\n    _this.lastPos = 0;\n    _this.timer = 0;\n    return _this;\n  }\n  TreeInterSectionObserver.prototype.observes = function (callback, onEnterCallback, instance) {\n    var containerRect = 'containerRect';\n    _super.prototype[\"\" + containerRect] = getValue('options', this).container.getBoundingClientRect();\n    EventHandler.add(getValue('options', this).container, 'scroll', this.virtualScrollHandlers(callback, onEnterCallback, instance), this);\n    if (getValue('options', this).movableContainer) {\n      var movableContainerRect = 'movableContainerRect';\n      _super.prototype[\"\" + movableContainerRect] = getValue('options', this).movableContainer.getBoundingClientRect();\n      EventHandler.add(getValue('options', this).movableContainer, 'scroll', this.virtualScrollHandlers(callback, onEnterCallback, instance), this);\n    }\n  };\n  TreeInterSectionObserver.prototype.clear = function () {\n    this.lastPos = null;\n  };\n  TreeInterSectionObserver.prototype.virtualScrollHandlers = function (callback, onEnterCallback, instance) {\n    var _this = this;\n    var delay = Browser.info.name === 'chrome' ? 200 : 100;\n    var options = 'options';\n    var movableEle = 'movableEle';\n    var element = 'element';\n    var fromWheel = 'fromWheel';\n    var debounced100 = debounce(callback, delay);\n    var debounced50 = debounce(callback, 50);\n    this[\"\" + options].prevTop = this[\"\" + options].prevLeft = 0;\n    var isScrollByFocus = 'isScrollByFocus';\n    return function (e) {\n      if (instance.isEdit && instance.root.editModule[\"\" + isScrollByFocus]) {\n        instance.root.editModule[\"\" + isScrollByFocus] = false;\n        return;\n      }\n      var top = _this[\"\" + options].movableContainer ? _this[\"\" + options].container.scrollTop : e.target.scrollTop;\n      var left = _this[\"\" + options].movableContainer ? _this[\"\" + options].scrollbar.scrollLeft : e.target.scrollLeft;\n      var direction = _this[\"\" + options].prevTop < top ? 'down' : 'up';\n      direction = _this[\"\" + options].prevLeft === left ? direction : _this[\"\" + options].prevLeft < left ? 'right' : 'left';\n      _this[\"\" + options].prevTop = top;\n      _this[\"\" + options].prevLeft = left;\n      var current = _this.sentinelInfo[\"\" + direction];\n      var delta = 0;\n      _this.newPos = top;\n      if (_this.lastPos != null) {\n        // && newPos < maxScroll\n        delta = _this.newPos - _this.lastPos;\n      }\n      _this.lastPos = _this.newPos;\n      if (_this.timer) {\n        clearTimeout(_this.timer);\n      }\n      _this.timer = setTimeout(_this.clear, 0);\n      if ((delta > 100 || delta < -100) && e && e.preventDefault) {\n        e.returnValue = false;\n        e.preventDefault();\n      }\n      if (_this[\"\" + options].axes.indexOf(current.axis) === -1) {\n        return;\n      }\n      var containerRect = 'containerRect';\n      _this[\"\" + containerRect] = _this[\"\" + options].container.getBoundingClientRect();\n      var check = _this.check(direction);\n      if (current.entered && (current.axis === 'X' || instance.enableVirtualMaskRow)) {\n        if (_this[\"\" + movableEle] && (direction === 'right' || direction === 'left')) {\n          onEnterCallback(_this[\"\" + movableEle], current, direction, {\n            top: top,\n            left: left\n          }, _this[\"\" + fromWheel], check);\n        } else {\n          onEnterCallback(_this[\"\" + element], current, direction, {\n            top: top,\n            left: left\n          }, _this[\"\" + fromWheel], check);\n        }\n      }\n      if (check) {\n        var fn = debounced50;\n        if (current.axis === 'X') {\n          fn({\n            direction: direction,\n            sentinel: current,\n            offset: {\n              top: top,\n              left: left\n            },\n            focusElement: document.activeElement\n          });\n        } else {\n          if (instance.dataSource instanceof DataManager && instance.dataSource.dataSource.url !== undefined && !instance.dataSource.dataSource.offline && instance.dataSource.dataSource.url !== '' || isCountRequired(instance) || instance.enableVirtualMaskRow) {\n            fn = instance.enableVirtualMaskRow ? debounced100 : fn;\n            fn({\n              direction: direction,\n              sentinel: current,\n              offset: {\n                top: top,\n                left: left\n              },\n              focusElement: document.activeElement\n            });\n          } else {\n            callback({\n              direction: direction,\n              sentinel: current,\n              offset: {\n                top: top,\n                left: left\n              },\n              focusElement: document.activeElement\n            });\n          }\n        }\n      }\n      _this[\"\" + fromWheel] = false;\n    };\n  };\n  return TreeInterSectionObserver;\n}(InterSectionObserver);\nexport { TreeInterSectionObserver };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Cell","CellType","VirtualContentRenderer","literals","InterSectionObserver","TreeVirtualRowModelGenerator","events","isNullOrUndefined","EventHandler","getValue","setValue","Browser","debounce","DataManager","isCountRequired","VirtualTreeContentRenderer","_super","parent","locator","_this","call","isExpandCollapse","translateY","maxiPage","recordAdded","startIndex","endIndex","preTranslate","isRemoteExpand","isDataSourceChanged","addEventListener","getModelGenerator","getRowByIndex","index","enableVirtualization","isFrozenGrid","getRowCollection","dataRows","getDataRows","targetRow","find","e","parseInt","getAttribute","isEdit","editSettings","mode","getRows","toString","undefined","getFrozenRightVirtualRowByIndex","isMovable","isRowObject","isFrozenRight","startIdx","dataRowIndex","rowCollection","collection","getCurrentViewRecords","selectedRow","frozenRows","pageSettings","currentPage","getRowsObject","data","on","virtualActionArgs","virtualOtherAction","indexModifier","args","setTop","pageSize","content","getContent","querySelector","requestType","count","nextSetResIndex","scrollTop","getRowHeight","lastIndex","length","root","newRowPosition","editModule","selectedIndex","totalRecords","eventListener","action","dataSource","url","offline","onDataReady","refreshContentRows","fn","observers","observes","scrollArgs","scrollListeners","onEnteredAction","gObj","enablePersistence","scrollPosition","top","enableColumnVirtualization","scrollLeft","left","scrollValues","direction","sentinel","observer","sentinelInfo","down","offset","focusElement","element","off","dataBoundEvent","bind","rowSelectedEvent","toSelectVirtualRow","actionComplete","onActionComplete","beginEdit","beginAdd","virtualEditSuccess","resetIseditValue","getData","cancelEdit","toSelectRowOnContextOpen","refreshCell","cellFocus","virtualCellFocus","keys","width","getColumnOffset","columns","height","setVirtualHeight","contents","renderTable","options","debounceEvent","TreeInterSectionObserver","getPanel","firstChild","getTranslateY","sTop","cHeight","info","isOnenter","dataBoundEve","initialRowTop","rowTop","getBoundingClientRect","gridTop","rowSelected","notify","selectVirtualRow","containerRect","clipboardModule","rowObj","cells","generateCells","i","push","generateCell","col","rowId","cellType","colSpan","oIndex","foreignKeyData","opt","visible","field","template","Data","commands","isForeignColumn","isDataCell","column","type","selector","rowIndex","rowData","addAction","isAdd","addArgs","rowPosition","addRowIndex","rows","firstAriaIndex","lastAriaIndex","withInRange","selectedRowIndex","restoreEditState","restoreEdit","resetIsEdit","editCancel","selectRowOnContextOpen","restoreNewRow","addRecord","getVirtualData","current","isWheel","check","directVirtualRender","preventEvent","isIE","enableVirtualMaskRow","showSpinner","setTimeout","showMaskRow","axis","top_1","prevInfo","offsets","xAxis","x","vgenerator","getColumnIndexes","columnIndexes","idx","cOffsets","maxLeft","y","upScroll","Math","round","virtualEle","adjustTable","header","rowHeight","outBuffer","ceil","contentModule","scrollHeight","downScroll","currentViewData","indexValue","vHeight","indexOf","lastInx","remains","selectionModule","isRowSelected","rowPt","firsttdinx","querySelectorAll","attr","getFrozenColumns","isLastBlock","viewInfo","currentInfo","apply","previousInfo","setColumnIndexesInView","page","loadNext","loadSelf","nextInfo","setProperties","event","addShimmerEffect","virtualInfo","removeMaskRow","appendContent","target","newChild","splice","cBlock","cOffset","cIndex","setWrapperWidth","name","createElement","appendChild","replace","getTable","autoCol","focusCell","restoreAdd","ensureSelectedRowPosition","removeEventListener","isDestroyed","arguments","isWheeling","newPos","lastPos","timer","callback","onEnterCallback","instance","container","add","virtualScrollHandlers","movableContainer","movableContainerRect","clear","delay","movableEle","fromWheel","debounced100","debounced50","prevTop","prevLeft","isScrollByFocus","scrollbar","delta","clearTimeout","preventDefault","returnValue","axes","entered","document","activeElement"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-treegrid/src/treegrid/renderer/virtual-tree-content-render.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Cell, CellType } from '@syncfusion/ej2-grids';\nimport { VirtualContentRenderer } from '@syncfusion/ej2-grids';\nimport * as literals from '../base/constant';\nimport { InterSectionObserver } from '@syncfusion/ej2-grids';\nimport { TreeVirtualRowModelGenerator } from '../renderer/virtual-row-model-generator';\nimport * as events from '../base/constant';\nimport { isNullOrUndefined, EventHandler, getValue, setValue, Browser, debounce } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { isCountRequired } from '../utils';\nvar VirtualTreeContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualTreeContentRenderer, _super);\n    function VirtualTreeContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.isExpandCollapse = false;\n        _this.translateY = 0;\n        _this.maxiPage = 0;\n        _this.recordAdded = false;\n        /** @hidden */\n        _this.startIndex = -1;\n        _this.endIndex = -1;\n        _this.preTranslate = 0;\n        _this.isRemoteExpand = false;\n        /** @hidden */\n        _this.isDataSourceChanged = false;\n        _this.addEventListener();\n        return _this;\n    }\n    VirtualTreeContentRenderer.prototype.getModelGenerator = function () {\n        return new TreeVirtualRowModelGenerator(this.parent);\n    };\n    VirtualTreeContentRenderer.prototype.getRowByIndex = function (index) {\n        if (this.parent.enableVirtualization && this.parent.isFrozenGrid()) {\n            return this.getRowCollection(index, true);\n        }\n        var dataRows = this.parent.getDataRows();\n        var targetRow = dataRows.find(function (e) { return parseInt(e.getAttribute('data-rowindex'), 10) === index; });\n        if (!targetRow && this.parent.isEdit && this.parent.editSettings.mode === 'Batch') {\n            return index != null ? this.parent.getRows()[parseInt(index.toString(), 10)] : undefined;\n        }\n        return targetRow;\n    };\n    VirtualTreeContentRenderer.prototype.getFrozenRightVirtualRowByIndex = function (index) {\n        return this.getRowCollection(index, false, false, true);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    VirtualTreeContentRenderer.prototype.getRowCollection = function (index, isMovable, isRowObject, isFrozenRight) {\n        var startIdx = parseInt(this.parent.getRows()[0].getAttribute(literals.dataRowIndex), 10);\n        var rowCollection = this.parent.getDataRows();\n        var collection = isRowObject ? this.parent.getCurrentViewRecords() : rowCollection;\n        var selectedRow = collection[index - startIdx];\n        if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n            if (!isRowObject) {\n                selectedRow = index <= this.parent.frozenRows ? rowCollection[parseInt(index.toString(), 10)]\n                    : rowCollection[(index - startIdx) + this.parent.frozenRows];\n            }\n            else {\n                selectedRow = index <= this.parent.frozenRows ?\n                    this.parent.getRowsObject()[parseInt(index.toString(), 10)].data : selectedRow;\n            }\n        }\n        return selectedRow;\n    };\n    VirtualTreeContentRenderer.prototype.addEventListener = function () {\n        this.parent.on(events.virtualActionArgs, this.virtualOtherAction, this);\n        this.parent.on(events.indexModifier, this.indexModifier, this);\n    };\n    VirtualTreeContentRenderer.prototype.virtualOtherAction = function (args) {\n        if (args.setTop) {\n            this.translateY = 0;\n            this.startIndex = 0;\n            this.endIndex = this.parent.pageSettings.pageSize - 1;\n        }\n        else if (args.isExpandCollapse) {\n            this.isExpandCollapse = true;\n        }\n    };\n    VirtualTreeContentRenderer.prototype.indexModifier = function (args) {\n        var content = this.parent.getContent().querySelector('.e-content');\n        if ((this.recordAdded || args.requestType === 'delete' && this.endIndex > args.count - this.parent.pageSettings.pageSize) && this.startIndex > -1 && this.endIndex > -1) {\n            if (this.endIndex > args.count - this.parent.pageSettings.pageSize) {\n                var nextSetResIndex = ~~(content.scrollTop / this.parent.getRowHeight());\n                var lastIndex = nextSetResIndex + this.parent.getRows().length;\n                if (lastIndex > args.count) {\n                    lastIndex = nextSetResIndex +\n                        (args.count - nextSetResIndex);\n                }\n                this.startIndex = lastIndex - this.parent.getRows().length;\n                this.endIndex = lastIndex;\n            }\n            else if (this.parent.root.editSettings.newRowPosition !== 'Top' && this.parent.root.editModule.selectedIndex !== -1 || this.parent.root.editModule.selectedIndex !== -1) {\n                this.startIndex += 1;\n                this.endIndex += 1;\n            }\n            this.recordAdded = false;\n        }\n        if (this.isDataSourceChanged) {\n            this.startIndex = 0;\n            this.endIndex = this.parent.pageSettings.pageSize - 1;\n        }\n        if ((this.endIndex - this.startIndex !== this.parent.pageSettings.pageSize) &&\n            (this.totalRecords > this.parent.pageSettings.pageSize)\n            && (this.endIndex === this.totalRecords)) {\n            args.startIndex = this.endIndex - this.parent.pageSettings.pageSize;\n            args.endIndex = this.endIndex;\n        }\n        else {\n            args.startIndex = this.startIndex;\n            args.endIndex = this.endIndex;\n        }\n    };\n    VirtualTreeContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        if (!(this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined\n            && this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '') || !isCountRequired(this.parent)) {\n            this.parent[\"\" + action]('data-ready', this.onDataReady, this);\n            this.parent[\"\" + action]('refresh-virtual-block', this.refreshContentRows, this);\n            this.fn = function () {\n                _this.observers.observes(function (scrollArgs) { return _this.scrollListeners(scrollArgs); }, _this.onEnteredAction(), _this.parent);\n                var gObj = _this.parent;\n                if (gObj.root.enablePersistence && gObj.root.scrollPosition) {\n                    _this.content.scrollTop = gObj.root.scrollPosition.top;\n                    if (gObj.root.enableColumnVirtualization) {\n                        _this.content.scrollLeft = gObj.root.scrollPosition.left;\n                    }\n                    var scrollValues = {\n                        direction: 'down', sentinel: _this.observer.sentinelInfo.down,\n                        offset: gObj.root.scrollPosition, focusElement: gObj.element\n                    };\n                    _this.scrollListeners(scrollValues);\n                }\n                _this.parent.off('content-ready', _this.fn);\n            };\n            this.parent.addEventListener('dataBound', this.dataBoundEvent.bind(this));\n            this.parent.addEventListener('rowSelected', this.rowSelectedEvent.bind(this));\n            this.parent[\"\" + action]('select-virtual-Row', this.toSelectVirtualRow, this);\n            this.parent.on('content-ready', this.fn, this);\n            this.parent.addEventListener(events.actionComplete, this.onActionComplete.bind(this));\n            this.parent[\"\" + action]('virtual-scroll-edit-action-begin', this.beginEdit, this);\n            this.parent[\"\" + action]('virtual-scroll-add-action-begin', this.beginAdd, this);\n            this.parent[\"\" + action]('virtual-scroll-edit-success', this.virtualEditSuccess, this);\n            this.parent[\"\" + action]('edit-reset', this.resetIseditValue, this);\n            this.parent[\"\" + action]('get-virtual-data', this.getData, this);\n            this.parent[\"\" + action]('virtual-scroll-edit-cancel', this.cancelEdit, this);\n            this.parent[\"\" + action]('select-row-on-context-open', this.toSelectRowOnContextOpen, this);\n            this.parent[\"\" + action]('refresh-virtual-editform-cells', this.refreshCell, this);\n            this.parent[\"\" + action]('virtaul-cell-focus', this.cellFocus, this);\n        }\n        else {\n            _super.prototype.eventListener.call(this, 'on');\n        }\n    };\n    VirtualTreeContentRenderer.prototype.cellFocus = function (e) {\n        var virtualCellFocus = 'virtualCellFocus';\n        _super.prototype[\"\" + virtualCellFocus].call(this, e);\n    };\n    VirtualTreeContentRenderer.prototype.onDataReady = function (e) {\n        _super.prototype.onDataReady.call(this, e);\n        if (!(this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined\n            && this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '') || !isCountRequired(this.parent)) {\n            if (!isNullOrUndefined(e.count)) {\n                this.totalRecords = e.count;\n                // To overcome the white space issue in last page when records collapsed\n                if (this.parent.isFrozenGrid() && e.count < Object.keys(this.parent.dataSource).length) {\n                    var width = this.parent.enableColumnVirtualization ?\n                        this.getColumnOffset(this.parent.columns.length - 1) + 'px' : '100%';\n                    var height = (this.parent.getRowHeight() * e.count) -\n                        (this.parent.getRowHeight() * this.parent.pageSettings.pageSize);\n                    getValue('virtualEle', this).setVirtualHeight(height, width);\n                }\n                if (!this.parent.enableColumnVirtualization && !this.parent.isFrozenGrid()) {\n                    getValue('virtualEle', this).setVirtualHeight(this.parent.getRowHeight() * e.count, '100%');\n                }\n            }\n            if ((!isNullOrUndefined(e.requestType) && e.requestType.toString() === 'collapseAll') || (this.isDataSourceChanged && (this.startIndex === -1 || this.startIndex === 0 && this['preStartIndex'] === 0))) {\n                this.contents.scrollTop = 0;\n                this.isDataSourceChanged = false;\n            }\n        }\n    };\n    VirtualTreeContentRenderer.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        if (!(this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined\n            && this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '') || !isCountRequired(this.parent)) {\n            getValue('observer', this).options.debounceEvent = false;\n            this.observers = new TreeInterSectionObserver(getValue('observer', this).element, getValue('observer', this).options);\n            this.contents = this.getPanel().firstChild;\n        }\n    };\n    VirtualTreeContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n        if ((this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined\n            && !this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '') || isCountRequired(this.parent)) {\n            if (this.isRemoteExpand) {\n                this.isRemoteExpand = false;\n                return this.preTranslate;\n            }\n            else {\n                this.preTranslate = _super.prototype.getTranslateY.call(this, sTop, cHeight, info, isOnenter);\n                return _super.prototype.getTranslateY.call(this, sTop, cHeight, info, isOnenter);\n            }\n        }\n        else {\n            return _super.prototype.getTranslateY.call(this, sTop, cHeight, info, isOnenter);\n        }\n    };\n    VirtualTreeContentRenderer.prototype.dataBoundEvent = function () {\n        var dataBoundEve = 'dataBound';\n        var initialRowTop = 'initialRowTop';\n        if (this.parent.getRows().length && !isNullOrUndefined(this.parent.getRowByIndex(0)) && !this[\"\" + initialRowTop]) {\n            var rowTop = this.parent.getRowByIndex(0).getBoundingClientRect().top;\n            var gridTop = this.parent.element.getBoundingClientRect().top;\n            if (rowTop > 0) {\n                this[\"\" + initialRowTop] = this.parent.getRowByIndex(0).getBoundingClientRect().top - gridTop;\n            }\n            else {\n                this[\"\" + initialRowTop] = this.content.getBoundingClientRect().top -\n                    this.parent.getRowByIndex(0).getBoundingClientRect().height;\n            }\n        }\n        _super.prototype[\"\" + dataBoundEve].call(this);\n    };\n    VirtualTreeContentRenderer.prototype.rowSelectedEvent = function (args) {\n        var rowSelected = 'rowSelected';\n        _super.prototype[\"\" + rowSelected].call(this, args);\n        this.parent.notify('virtualTransform', { requestType: 'transformChange' });\n    };\n    VirtualTreeContentRenderer.prototype.toSelectVirtualRow = function (args) {\n        if (this.parent.isEdit) {\n            return;\n        }\n        var selectVirtualRow = 'selectVirtualRow';\n        var containerRect = 'containerRect';\n        if (isNullOrUndefined(this.observer[\"\" + containerRect])) {\n            this.observer[\"\" + containerRect] = this.observers[\"\" + containerRect];\n        }\n        if (isNullOrUndefined(this.parent.clipboardModule['treeGridParent'].editModule) || args.selectedIndex !== 0 ||\n            isNullOrUndefined(this.parent.clipboardModule['treeGridParent'].editModule['addRowIndex'])) {\n            _super.prototype[\"\" + selectVirtualRow].call(this, args);\n        }\n    };\n    VirtualTreeContentRenderer.prototype.refreshCell = function (rowObj) {\n        rowObj.cells = this.generateCells();\n    };\n    VirtualTreeContentRenderer.prototype.generateCells = function () {\n        var cells = [];\n        for (var i = 0; i < this.parent.columns.length; i++) {\n            cells.push(this.generateCell(this.parent.columns[parseInt(i.toString(), 10)]));\n        }\n        return cells;\n    };\n    VirtualTreeContentRenderer.prototype.generateCell = function (col, rowId, cellType, colSpan, oIndex, foreignKeyData) {\n        var opt = {\n            'visible': col.visible,\n            'isDataCell': !isNullOrUndefined(col.field || col.template),\n            'isTemplate': !isNullOrUndefined(col.template),\n            'rowID': rowId,\n            'column': col,\n            'cellType': !isNullOrUndefined(cellType) ? cellType : CellType.Data,\n            'colSpan': colSpan,\n            'commands': col.commands,\n            'isForeignKey': col.isForeignColumn && col.isForeignColumn(),\n            'foreignKeyData': col.isForeignColumn && col.isForeignColumn() && getValue(col.field, foreignKeyData)\n        };\n        if (opt.isDataCell || opt.column.type === 'checkbox' || opt.commands) {\n            opt.index = oIndex;\n        }\n        return new Cell(opt);\n    };\n    VirtualTreeContentRenderer.prototype.beginEdit = function (e) {\n        this['editedRowIndex'] = e.index;\n        var selector = '.e-row[data-rowindex=\"' + e.index + '\"]';\n        var index = this.parent.getContent().querySelector(selector).rowIndex;\n        var rowData = this.parent.getCurrentViewRecords()[parseInt(index.toString(), 10)];\n        e.data = rowData;\n    };\n    VirtualTreeContentRenderer.prototype.beginAdd = function (args) {\n        var addAction = 'addActionBegin';\n        var isAdd = 'isAdd';\n        var addArgs = { newRowPosition: this.rowPosition, addRowIndex: this.addRowIndex, dataRowIndex: this.dataRowIndex };\n        this.parent.notify('get-row-position', addArgs);\n        this.rowPosition = addArgs.newRowPosition;\n        this.addRowIndex = addArgs.addRowIndex;\n        this.dataRowIndex = addArgs.dataRowIndex;\n        var rows = this.parent.getRows();\n        var firstAriaIndex = rows.length ? +rows[0].getAttribute('data-rowindex') : 0;\n        var lastAriaIndex = rows.length ? +rows[rows.length - 1].getAttribute('data-rowindex') : 0;\n        var withInRange = this.parent.selectedRowIndex >= firstAriaIndex && this.parent.selectedRowIndex <= lastAriaIndex;\n        if (!(this.rowPosition === 'Top' || this.rowPosition === 'Bottom')) {\n            this[\"\" + isAdd] = true;\n        }\n        if (this.rowPosition === 'Top' || this.rowPosition === 'Bottom' ||\n            ((!this.addRowIndex || this.addRowIndex === -1) && (this.parent.selectedRowIndex === -1 || !withInRange))) {\n            _super.prototype[\"\" + addAction].call(this, args);\n        }\n    };\n    VirtualTreeContentRenderer.prototype.restoreEditState = function () {\n        var restoreEdit = 'restoreEdit';\n        _super.prototype[\"\" + restoreEdit].call(this);\n    };\n    VirtualTreeContentRenderer.prototype.resetIseditValue = function () {\n        var resetIsEdit = 'resetIsedit';\n        var isAdd = 'isAdd';\n        this.parent.notify('reset-edit-props', {});\n        if ((this.rowPosition === 'Top' || this.rowPosition === 'Bottom') && this[\"\" + isAdd]) {\n            _super.prototype[\"\" + resetIsEdit].call(this);\n        }\n    };\n    VirtualTreeContentRenderer.prototype.virtualEditSuccess = function () {\n        var isAdd = 'isAdd';\n        var content = this.parent.getContent().querySelector('.e-content');\n        if (this[\"\" + isAdd] && content.querySelector('.e-addedrow')) {\n            this.recordAdded = true;\n        }\n    };\n    VirtualTreeContentRenderer.prototype.cancelEdit = function (args) {\n        var editCancel = 'editCancel';\n        _super.prototype[\"\" + editCancel].call(this, args);\n    };\n    VirtualTreeContentRenderer.prototype.toSelectRowOnContextOpen = function (args) {\n        var selectRowOnContextOpen = 'selectRowOnContextOpen';\n        _super.prototype[\"\" + selectRowOnContextOpen].call(this, args);\n    };\n    VirtualTreeContentRenderer.prototype.restoreNewRow = function () {\n        var isAdd = 'isAdd';\n        var content = this.parent.getContent().querySelector('.e-content');\n        if (this[\"\" + isAdd] && !content.querySelector('.e-addedrow')) {\n            this.parent.isEdit = false;\n            this.parent.editModule.addRecord(null, this.parent.root.editModule.selectedIndex);\n        }\n    };\n    VirtualTreeContentRenderer.prototype.getData = function (data) {\n        var getVirtualData = 'getVirtualData';\n        _super.prototype[\"\" + getVirtualData].call(this, data);\n    };\n    VirtualTreeContentRenderer.prototype.onActionComplete = function (args) {\n        if (args.requestType === 'add') {\n            var addArgs = { newRowPosition: this.rowPosition, addRowIndex: this.addRowIndex, dataRowIndex: this.dataRowIndex };\n            this.parent.notify('get-row-position', addArgs);\n            this.rowPosition = addArgs.newRowPosition;\n            this.addRowIndex = addArgs.addRowIndex;\n            this.dataRowIndex = this.parent.root.editModule.selectedIndex;\n        }\n        var actionComplete = 'actionComplete';\n        _super.prototype[\"\" + actionComplete].call(this, args);\n    };\n    VirtualTreeContentRenderer.prototype.onEnteredAction = function () {\n        var _this = this;\n        return function (element, current, direction, e, isWheel, check) {\n            var directVirtualRender = 'directVirtualRender';\n            if (!_this.parent[\"\" + directVirtualRender]) { // with this property, columns are rendered without debouncing on horizontal scroll.\n                var preventEvent = 'preventEvent';\n                if (Browser.isIE && !isWheel && check && !_this[\"\" + preventEvent] && !_this.parent.enableVirtualMaskRow) {\n                    _this.parent.showSpinner();\n                }\n                if (_this.parent.enableVirtualMaskRow && !_this[\"\" + preventEvent]) {\n                    setTimeout(function () {\n                        _this.parent.showMaskRow(current.axis);\n                        _this.parent.notify('showGanttShimmer', { requestType: 'showShimmer' });\n                    }, 0);\n                }\n                var height = _this.content.getBoundingClientRect().height;\n                var top_1 = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n                var xAxis = current.axis === 'X';\n                var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0]\n                    - 1);\n                if (xAxis) {\n                    var idx = Object.keys(_this.vgenerator.cOffsets).length - _this.prevInfo.columnIndexes.length;\n                    var maxLeft = _this.vgenerator.cOffsets[idx - 1];\n                    x = x > maxLeft ? maxLeft : x; //TODO: This fix horizontal scrollbar jumping issue in column virtualization.\n                }\n                var y = _this.getTranslateY(e.top, height, xAxis && top_1 === e.top ? _this.prevInfo : undefined, true);\n                if (!_this.parent.isFrozenGrid() || _this.parent.enableVirtualMaskRow) {\n                    if (_this.parent.enableVirtualMaskRow) {\n                        var upScroll = (e.top - _this.translateY) < 0;\n                        y = (Math.round(_this.translateY) > y && !upScroll) ? Math.round(_this.translateY) : y;\n                        _this.virtualEle.adjustTable(x, y);\n                    }\n                    else {\n                        _this.virtualEle.adjustTable(x, _this.translateY);\n                    }\n                    if (_this.parent.enableColumnVirtualization) {\n                        _this.header.virtualEle.adjustTable(x, 0);\n                    }\n                }\n            }\n        };\n    };\n    VirtualTreeContentRenderer.prototype.scrollListeners = function (scrollArgs) {\n        this['scrollAfterEdit']();\n        if (this.parent.root.enablePersistence) {\n            this.parent.root.scrollPosition = scrollArgs.offset;\n        }\n        var info = scrollArgs.sentinel;\n        var rowHeight = this.parent.getRowHeight();\n        var outBuffer = this.parent.pageSettings.pageSize - Math.ceil(this.parent.pageSettings.pageSize / 2);\n        var content;\n        if (!isNullOrUndefined(this.parent.contentModule)) {\n            content = this.parent.getContent().querySelector('.e-content');\n        }\n        var scrollHeight = outBuffer * rowHeight;\n        var upScroll = (scrollArgs.offset.top - this.translateY) < 0;\n        var downScroll = Math.ceil(scrollArgs.offset.top - this.translateY) + rowHeight >= scrollHeight;\n        var selectedRowIndex = 'selectedRowIndex';\n        var currentViewData = this.parent.currentViewData;\n        var indexValue = 'index';\n        if (upScroll && (scrollArgs.direction !== 'right' && scrollArgs.direction !== 'left') && !isNullOrUndefined(content)) {\n            var vHeight = +(this.parent.height.toString().indexOf('%') < 0 ? parseInt(this.parent.height.toString(), 10) :\n                this.parent.element.getBoundingClientRect().height);\n            var index = (~~(content.scrollTop / rowHeight)\n                + Math.ceil(vHeight / rowHeight))\n                - this.parent.pageSettings.pageSize;\n            index = (index > 0) ? index : 0;\n            if (!isNullOrUndefined(this[\"\" + selectedRowIndex]) && this[\"\" + selectedRowIndex] !== -1 && index !== this[\"\" + selectedRowIndex] &&\n                ((this.parent.rowHeight * this.parent.pageSettings.pageSize) < content.scrollTop)) {\n                index = this[\"\" + selectedRowIndex];\n            }\n            this.startIndex = index;\n            this.endIndex = index + this.parent.pageSettings.pageSize;\n            if (this.endIndex > this.totalRecords) {\n                var lastInx = this.totalRecords;\n                var remains = this.endIndex % lastInx;\n                this.endIndex = lastInx;\n                this.startIndex = (this.startIndex - remains) < 0 ? 0 : (this.startIndex - remains);\n            }\n            if (currentViewData.length && (currentViewData[0][\"\" + indexValue] >= this.parent.pageSettings.pageSize / 2) &&\n                ((currentViewData[0][\"\" + indexValue] - this.startIndex) < (this.parent.pageSettings.pageSize / 2)) && this.parent.selectionModule.isRowSelected) {\n                this.startIndex = currentViewData[0][\"\" + indexValue] - (this.parent.pageSettings.pageSize / 2);\n                this.endIndex = this.startIndex + this.parent.pageSettings.pageSize;\n            }\n            //var firsttdinx = parseInt(this.parent.getContent().querySelector('.e-content td').getAttribute('index'), 0);\n            var rowPt = Math.ceil(scrollArgs.offset.top / rowHeight);\n            rowPt = rowPt % this.parent.pageSettings.pageSize;\n            var firsttdinx = 0;\n            if (!isNullOrUndefined(this.parent.getRows()[parseInt(rowPt.toString(), 10)]) &&\n                !isNullOrUndefined(this.parent.getContent().querySelectorAll('.e-content tr')[parseInt(rowPt.toString(), 10)])) {\n                var attr = this.parent.getContent().querySelectorAll('.e-content tr')[parseInt(rowPt.toString(), 10)]\n                    .querySelector('td').getAttribute('index');\n                firsttdinx = +attr; // this.parent.getContent().querySelector('.e-content tr').getAttribute('data-rowindex');\n            }\n            if (firsttdinx === 0) {\n                if (this.endIndex - this.startIndex < this.parent.pageSettings.pageSize) {\n                    this.translateY = !isNullOrUndefined(this.endIndex) ?\n                        (this.endIndex - this.parent.pageSettings.pageSize) * (this.parent.rowHeight ?\n                            this.parent.rowHeight : this.parent.getRowHeight()) : 0;\n                }\n                else {\n                    this.translateY = (scrollArgs.offset.top - (outBuffer * rowHeight) > 0) ?\n                        scrollArgs.offset.top - (outBuffer * rowHeight) + rowHeight : 0;\n                }\n            }\n            else if (this.parent.getFrozenColumns() > 0) {\n                scrollArgs.offset.top = scrollArgs.offset.top + 80;\n                this.translateY = (scrollArgs.offset.top - (outBuffer * rowHeight) > 0) ?\n                    scrollArgs.offset.top - (outBuffer * rowHeight) + 10 : 0;\n            }\n            else {\n                this.translateY = (scrollArgs.offset.top - (outBuffer * rowHeight) > 0) ?\n                    scrollArgs.offset.top - (outBuffer * rowHeight) + 10 : 0;\n            }\n        }\n        else if (downScroll && (scrollArgs.direction !== 'right' && scrollArgs.direction !== 'left') && !isNullOrUndefined(content)) {\n            var nextSetResIndex = ~~(content.scrollTop / rowHeight);\n            var isLastBlock = (this[\"\" + selectedRowIndex] + this.parent.pageSettings.pageSize) < this.totalRecords ? false : true;\n            if (!isNullOrUndefined(this[\"\" + selectedRowIndex]) && this[\"\" + selectedRowIndex] !== -1 &&\n                nextSetResIndex !== this[\"\" + selectedRowIndex] && !isLastBlock) {\n                nextSetResIndex = this[\"\" + selectedRowIndex];\n            }\n            var lastIndex = nextSetResIndex + this.parent.pageSettings.pageSize;\n            if (lastIndex > this.totalRecords) {\n                lastIndex = nextSetResIndex +\n                    (this.totalRecords - nextSetResIndex);\n            }\n            this.startIndex = !isLastBlock || isNullOrUndefined(this['' + selectedRowIndex]) ? lastIndex - this.parent.pageSettings.pageSize : nextSetResIndex;\n            this.endIndex = lastIndex;\n            if ((nextSetResIndex + this.parent.pageSettings.pageSize) > this.totalRecords && (this.endIndex - this.startIndex) <\n                (this.parent.pageSettings.pageSize / 2) && (this.endIndex - nextSetResIndex) < (this.parent.pageSettings.pageSize / 2)) {\n                this.startIndex = lastIndex - (this.parent.pageSettings.pageSize / 2);\n            }\n            if (currentViewData.length && this.startIndex > currentViewData[0][\"\" + indexValue] &&\n                ((this.startIndex - currentViewData[0][\"\" + indexValue]) < (this.parent.pageSettings.pageSize / 2)) && this.parent.selectionModule.isRowSelected) {\n                this.startIndex = currentViewData[0][\"\" + indexValue] + (this.parent.pageSettings.pageSize / 2);\n            }\n            var selectedIndex = this.parent.root.selectedRowIndex;\n            this.startIndex = selectedIndex !== -1 && selectedIndex !== this.startIndex ? this.startIndex - 1 : this.startIndex;\n            if (scrollArgs.offset.top > (rowHeight * this.totalRecords)) {\n                this.translateY = this.getTranslateY(scrollArgs.offset.top, content.getBoundingClientRect().height);\n            }\n            else {\n                if (this.totalRecords === this.endIndex) {\n                    this.translateY = (this.totalRecords * rowHeight) - ((this.endIndex - this.startIndex) * rowHeight);\n                }\n                else {\n                    if (this.parent.getFrozenColumns() > 0) {\n                        this.translateY = scrollArgs.offset.top - ((rowHeight * 2) + this.parent.pageSettings.pageSize);\n                    }\n                    else {\n                        this.translateY = scrollArgs.offset.top;\n                    }\n                }\n            }\n        }\n        if (((downScroll && (scrollArgs.offset.top < (rowHeight * this.totalRecords)))\n            || (upScroll)) || (scrollArgs.direction === 'right' || scrollArgs.direction === 'left') ||\n            ((this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined\n                && !this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '') && (downScroll || upScroll) || isCountRequired(this.parent))) {\n            var viewInfo = this.currentInfo = getValue('getInfoFromView', this).apply(this, [scrollArgs.direction, info, scrollArgs.offset]);\n            this.previousInfo = viewInfo;\n            this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n            var page = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n            this.parent.setProperties({ pageSettings: { currentPage: page } }, true);\n            if (downScroll && this.endIndex === this.totalRecords && viewInfo.loadNext) {\n                viewInfo.loadNext = false;\n            }\n            this.requestType = 'virtualscroll';\n            if (scrollArgs.direction !== 'right' && scrollArgs.direction !== 'left') {\n                viewInfo.event = viewInfo.event === 'refresh-virtual-block' ? 'model-changed' : viewInfo.event;\n            }\n            if (this.parent.enableVirtualMaskRow) {\n                this.parent.showMaskRow(info.axis);\n                this.parent.addShimmerEffect();\n                this.parent.notify('showGanttShimmer', { requestType: 'showShimmer' });\n            }\n            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo, focusElement: scrollArgs.focusElement });\n        }\n        else {\n            if (this.parent.enableVirtualMaskRow) {\n                this.parent.removeMaskRow();\n                this.parent.notify('removeGanttShimmer', { requestType: 'hideShimmer' });\n            }\n        }\n    };\n    VirtualTreeContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        if ((this.parent.dataSource instanceof DataManager && this.parent.dataSource.dataSource.url !== undefined\n            && !this.parent.dataSource.dataSource.offline && this.parent.dataSource.dataSource.url !== '') || isCountRequired(this.parent)) {\n            if (getValue('isExpandCollapse', e)) {\n                this.isRemoteExpand = true;\n            }\n            _super.prototype.appendContent.call(this, target, newChild, e);\n            if (getValue('requestTypes', this).indexOf('isFrozen') !== -1) {\n                getValue('requestTypes', this).splice(getValue('requestTypes', this).indexOf('isFrozen'), 1);\n                this.requestType = this.requestType === 'isFrozen' ? undefined : this.requestType;\n            }\n        }\n        else {\n            var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' &&\n                getValue('currentInfo', this).page && getValue('currentInfo', this).page !== e.virtualInfo.page ?\n                getValue('currentInfo', this) : e.virtualInfo;\n            var cBlock = (info.columnIndexes[0]) - 1;\n            var cOffset = this.getColumnOffset(cBlock);\n            var width = void 0;\n            if (this.parent.enableColumnVirtualization) {\n                this.header.virtualEle.adjustTable(cOffset, 0);\n                var cIndex = info.columnIndexes;\n                width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n                this.header.virtualEle.setWrapperWidth(width);\n            }\n            this.virtualEle.setWrapperWidth(width, (Browser.isIE || Browser.info.name === 'edge'));\n            target = this.parent.createElement('tbody');\n            target.appendChild(newChild);\n            var replace = 'replaceWith';\n            this.getTable().querySelector('tbody')[\"\" + replace](target);\n            if (!this.isExpandCollapse || this.translateY === 0) {\n                this.translateY = this.translateY < 0 ? 0 : this.translateY;\n                getValue('virtualEle', this).adjustTable(cOffset, this.translateY);\n            }\n            else {\n                this.isExpandCollapse = false;\n            }\n            setValue('prevInfo', this.previousInfo ? this.previousInfo : info, this);\n            if (e.requestType === 'virtualscroll' && e.virtualInfo.sentinelInfo.axis === 'X') {\n                this.parent.notify(events.autoCol, {});\n            }\n            var focusCell = 'focusCell';\n            var restoreAdd = 'restoreAdd';\n            var ensureSelectedRowPosition = 'ensureSelectedRowPosition';\n            _super.prototype[\"\" + focusCell].call(this, e);\n            var isAdd = 'isAdd';\n            if (this[\"\" + isAdd] && !this.parent.getContent().querySelector('.e-content').querySelector('.e-addedrow')) {\n                if (!(this.rowPosition === 'Top' || this.rowPosition === 'Bottom')) {\n                    if (this.dataRowIndex >= this.startIndex) {\n                        this.restoreNewRow();\n                    }\n                    else if (this.addRowIndex && this.addRowIndex > -1) {\n                        this[\"\" + isAdd] = false;\n                        this.parent.isEdit = false;\n                    }\n                }\n            }\n            this.restoreEditState();\n            _super.prototype[\"\" + restoreAdd].call(this);\n            _super.prototype[\"\" + ensureSelectedRowPosition].call(this);\n        }\n    };\n    VirtualTreeContentRenderer.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('data-ready', this.onDataReady);\n        this.parent.off('content-ready', this.fn);\n        this.parent.off('select-virtual-Row', this.toSelectVirtualRow);\n        this.parent.off('dataBound', this.dataBoundEvent);\n        this.parent.off('rowSelected', this.rowSelectedEvent);\n        this.parent.off(events.virtualActionArgs, this.virtualOtherAction);\n        this.parent.off(events.indexModifier, this.indexModifier);\n        this.parent.off('virtual-scroll-edit-action-begin', this.beginEdit);\n        this.parent.off('virtual-scroll-add-action-begin', this.beginAdd);\n        this.parent.off('virtual-scroll-edit-success', this.virtualEditSuccess);\n        this.parent.off('edit-reset', this.resetIseditValue);\n        this.parent.off('get-virtual-data', this.getData);\n        this.parent.off('virtual-scroll-edit-cancel', this.cancelEdit);\n        this.parent.off('select-row-on-context-open', this.toSelectRowOnContextOpen);\n        this.parent.off('refresh-virtual-editform-cells', this.refreshCell);\n        this.parent.off('virtaul-cell-focus', this.cellFocus);\n    };\n    return VirtualTreeContentRenderer;\n}(VirtualContentRenderer));\nexport { VirtualTreeContentRenderer };\nvar TreeInterSectionObserver = /** @class */ (function (_super) {\n    __extends(TreeInterSectionObserver, _super);\n    function TreeInterSectionObserver() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isWheeling = false;\n        _this.newPos = 0;\n        _this.lastPos = 0;\n        _this.timer = 0;\n        return _this;\n    }\n    TreeInterSectionObserver.prototype.observes = function (callback, onEnterCallback, instance) {\n        var containerRect = 'containerRect';\n        _super.prototype[\"\" + containerRect] = getValue('options', this).container.getBoundingClientRect();\n        EventHandler.add(getValue('options', this).container, 'scroll', this.virtualScrollHandlers(callback, onEnterCallback, instance), this);\n        if (getValue('options', this).movableContainer) {\n            var movableContainerRect = 'movableContainerRect';\n            _super.prototype[\"\" + movableContainerRect] = getValue('options', this).movableContainer.getBoundingClientRect();\n            EventHandler.add(getValue('options', this).movableContainer, 'scroll', this.virtualScrollHandlers(callback, onEnterCallback, instance), this);\n        }\n    };\n    TreeInterSectionObserver.prototype.clear = function () {\n        this.lastPos = null;\n    };\n    TreeInterSectionObserver.prototype.virtualScrollHandlers = function (callback, onEnterCallback, instance) {\n        var _this = this;\n        var delay = Browser.info.name === 'chrome' ? 200 : 100;\n        var options = 'options';\n        var movableEle = 'movableEle';\n        var element = 'element';\n        var fromWheel = 'fromWheel';\n        var debounced100 = debounce(callback, delay);\n        var debounced50 = debounce(callback, 50);\n        this[\"\" + options].prevTop = this[\"\" + options].prevLeft = 0;\n        var isScrollByFocus = 'isScrollByFocus';\n        return function (e) {\n            if (instance.isEdit && instance.root.editModule[\"\" + isScrollByFocus]) {\n                instance.root.editModule[\"\" + isScrollByFocus] = false;\n                return;\n            }\n            var top = _this[\"\" + options].movableContainer ? _this[\"\" + options].container.scrollTop : e.target.scrollTop;\n            var left = _this[\"\" + options].movableContainer ? _this[\"\" + options].scrollbar.scrollLeft : e.target.scrollLeft;\n            var direction = _this[\"\" + options].prevTop < top ? 'down' : 'up';\n            direction = _this[\"\" + options].prevLeft === left ? direction : _this[\"\" + options].prevLeft < left ? 'right' : 'left';\n            _this[\"\" + options].prevTop = top;\n            _this[\"\" + options].prevLeft = left;\n            var current = _this.sentinelInfo[\"\" + direction];\n            var delta = 0;\n            _this.newPos = top;\n            if (_this.lastPos != null) { // && newPos < maxScroll\n                delta = _this.newPos - _this.lastPos;\n            }\n            _this.lastPos = _this.newPos;\n            if (_this.timer) {\n                clearTimeout(_this.timer);\n            }\n            _this.timer = setTimeout(_this.clear, 0);\n            if ((delta > 100 || delta < -100) && (e && e.preventDefault)) {\n                e.returnValue = false;\n                e.preventDefault();\n            }\n            if (_this[\"\" + options].axes.indexOf(current.axis) === -1) {\n                return;\n            }\n            var containerRect = 'containerRect';\n            _this[\"\" + containerRect] = _this[\"\" + options].container.getBoundingClientRect();\n            var check = _this.check(direction);\n            if (current.entered && (current.axis === 'X' || instance.enableVirtualMaskRow)) {\n                if (_this[\"\" + movableEle] && (direction === 'right' || direction === 'left')) {\n                    onEnterCallback(_this[\"\" + movableEle], current, direction, { top: top, left: left }, _this[\"\" + fromWheel], check);\n                }\n                else {\n                    onEnterCallback(_this[\"\" + element], current, direction, { top: top, left: left }, _this[\"\" + fromWheel], check);\n                }\n            }\n            if (check) {\n                var fn = debounced50;\n                if (current.axis === 'X') {\n                    fn({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                        focusElement: document.activeElement });\n                }\n                else {\n                    if ((instance.dataSource instanceof DataManager && instance.dataSource.dataSource.url !== undefined\n                        && !instance.dataSource.dataSource.offline && instance.dataSource.dataSource.url !== '') || isCountRequired(instance)\n                        || instance.enableVirtualMaskRow) {\n                        fn = instance.enableVirtualMaskRow ? debounced100 : fn;\n                        fn({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                            focusElement: document.activeElement });\n                    }\n                    else {\n                        callback({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                            focusElement: document.activeElement });\n                    }\n                }\n            }\n            _this[\"\" + fromWheel] = false;\n        };\n    };\n    return TreeInterSectionObserver;\n}(InterSectionObserver));\nexport { TreeInterSectionObserver };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}