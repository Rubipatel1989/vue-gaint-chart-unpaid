{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nvar UndoRedo = /** @class */function () {\n  function UndoRedo(parent) {\n    this.isUndoRedoPerformed = false;\n    this.changedRecords = [];\n    this.getRedoCollection = [];\n    this.getUndoCollection = [];\n    this.redoEnabled = false;\n    this.previousSortedColumns = [];\n    this.searchString = '';\n    this.isFromUndoRedo = false;\n    this.canUpdateIndex = true;\n    this.sortedColumnsLength = 0;\n    this.parent = parent;\n  }\n  /**\n   *Initiates an undo action to revert the most recent change performed.\n   *\n   * @returns {void}\n   * @public\n   */\n  UndoRedo.prototype.undoAction = function () {\n    var _this = this;\n    if (this.getUndoCollection.length > 0) {\n      var updateAction_1 = this.getUndoCollection[this.getUndoCollection.length - 1];\n      var previousActions = {};\n      if (updateAction_1['action'] === 'ZoomIn' || updateAction_1['action'] === 'ZoomOut' || updateAction_1['action'] === 'ZoomToFit') {\n        previousActions['action'] = updateAction_1['action'];\n        previousActions['previousZoomingLevel'] = extend({}, {}, this.parent.currentZoomingLevel, true);\n      } else if (updateAction_1['action'] === 'NextTimeSpan' || updateAction_1['action'] === 'PreviousTimeSpan') {\n        previousActions['action'] = updateAction_1['action'];\n        previousActions['previousTimelineStartDate'] = extend([], [this.parent.timelineModule.timelineStartDate], [], true)[0];\n        previousActions['previousTimelineEndDate'] = extend([], [this.parent.timelineModule.timelineEndDate], [], true)[0];\n      } else if (updateAction_1['action'] === 'Sorting') {\n        previousActions['action'] = 'Sorting';\n        previousActions['sortColumns'] = this.previousSortedColumns;\n      } else if (updateAction_1['action'] === 'Filtering') {\n        previousActions['action'] = 'Filtering';\n        previousActions['filteredColumns'] = updateAction_1['filteredColumns'];\n      } else if (updateAction_1['action'] === 'ColumnReorder') {\n        previousActions['action'] = updateAction_1['action'];\n        previousActions['toColumn'] = updateAction_1['fromColumn'];\n        previousActions['fromColumn'] = updateAction_1['toColumn'];\n        previousActions['fromIndex'] = updateAction_1['toIndex'];\n        previousActions['toIndex'] = updateAction_1['fromIndex'];\n      } else if (updateAction_1['action'] === 'Search') {\n        previousActions['action'] = updateAction_1['action'];\n        previousActions['searchString'] = this.searchString;\n      } else if (updateAction_1['action'] === 'ColumnState') {\n        previousActions['action'] = updateAction_1['action'];\n        previousActions['showhideColumns'] = updateAction_1['showhideColumns'];\n      } else if (updateAction_1['action'] === 'ColumnResize') {\n        previousActions['action'] = updateAction_1['action'];\n        previousActions['resizedColumn'] = __assign({}, this.parent.treeGrid.columns[updateAction_1['resizedColumn'].index]);\n      } else if (updateAction_1['action'] === 'RowDragAndDrop' || updateAction_1['action'] === 'TaskbarDragAndDrop') {\n        var rowItems = [];\n        for (var i = 0; i < updateAction_1['beforeDrop'].length; i++) {\n          if (this.parent.viewType === 'ProjectView') {\n            rowItems.push(this.parent.getRecordByID(updateAction_1['beforeDrop'][i]['data'].ganttProperties.taskId));\n          } else {\n            rowItems.push(this.parent.flatData[this.parent.taskIds.indexOf('T' + updateAction_1['beforeDrop'][i]['data'].ganttProperties.taskId.toString())]);\n          }\n        }\n        previousActions['action'] = updateAction_1['action'];\n        previousActions['beforeDrop'] = [];\n        var previousDetails = {};\n        var dropRecord = extend([], [], [this.parent.getRecordByID(updateAction_1['afterDrop'].dropRecord.ganttProperties.taskId)], true)[0];\n        previousDetails['data'] = [];\n        for (var i = 0; i < updateAction_1['afterDrop'].data.length; i++) {\n          if (this.parent.viewType === 'ProjectView') {\n            previousDetails['data'].push(extend([], [], [this.parent.getRecordByID(updateAction_1['afterDrop'].data[i].ganttProperties.taskId)], true)[0]);\n          } else {\n            previousDetails['data'].push(extend([], [], this.parent.flatData[this.parent.taskIds.indexOf('T' + updateAction_1['afterDrop'].data[i].ganttProperties.taskId)], true)[0]);\n          }\n        }\n        previousDetails['dropRecord'] = extend([], [], [dropRecord], true)[0];\n        previousDetails['dropPosition'] = updateAction_1['afterDrop'].dropPosition;\n        previousActions['afterDrop'] = previousDetails;\n        this['findPosition'](rowItems, previousActions, 'beforeDrop');\n      } else if (updateAction_1['action'] === 'Indent' || updateAction_1['action'] === 'Outdent') {\n        previousActions['selectedRowIndexes'] = updateAction_1['selectedRowIndexes'];\n        previousActions['droppedRecord'] = extend([], [], [this.parent.flatData[this.parent.ids.indexOf(updateAction_1['droppedRecord'].ganttProperties.taskId.toString())]], true)[0];\n        previousActions['modifiedRecord'] = [];\n        this.findPosition(extend([], [], [this.parent.flatData[this.parent.ids.indexOf(updateAction_1['modifiedRecord'][0].data.ganttProperties.taskId.toString())]], true), previousActions, 'modifiedRecord');\n        previousActions['action'] = updateAction_1['action'];\n      } else if (updateAction_1['action'] === 'Delete') {\n        previousActions['action'] = 'Delete';\n        previousActions['deleteRecords'] = [];\n        for (var i = 0; i < updateAction_1['deletedRecordsDetails'].length; i++) {\n          previousActions['deleteRecords'].push(updateAction_1['deletedRecordsDetails'][i].data);\n        }\n      } else if (updateAction_1['action'] === 'Add') {\n        previousActions['action'] = 'Add';\n        previousActions['deletedRecordsDetails'] = [];\n        var rowItems = updateAction_1['addedRecords'];\n        this.findPosition(rowItems, previousActions, 'deletedRecordsDetails');\n      } else {\n        previousActions['action'] = updateAction_1['action'];\n        previousActions['modifiedRecords'] = [];\n        for (var i = 0; i < updateAction_1['modifiedRecords'].length; i++) {\n          var index = void 0;\n          if (this.parent.viewType === 'ProjectView') {\n            index = this.parent.ids.indexOf(updateAction_1['modifiedRecords'][i].ganttProperties.taskId.toString());\n          } else {\n            if (updateAction_1['modifiedRecords'][i].hasChildRecords) {\n              index = this.parent.taskIds.indexOf('R' + updateAction_1['modifiedRecords'][i].ganttProperties.taskId);\n            } else {\n              index = this.parent.taskIds.indexOf('T' + updateAction_1['modifiedRecords'][i].ganttProperties.taskId);\n            }\n          }\n          previousActions['modifiedRecords'].push(extend([], [this.parent.flatData[index]], [], true)[0]);\n        }\n      }\n      this.getRedoCollection.push(previousActions);\n      this.isUndoRedoPerformed = true;\n      this.changedRecords = [];\n      this.currentAction = updateAction_1;\n      if (updateAction_1['action'] === 'ZoomIn' || updateAction_1['action'] === 'ZoomOut' || updateAction_1['action'] === 'ZoomToFit') {\n        this.parent.timelineSettings.timelineViewMode = updateAction_1['previousZoomingLevel'].timelineViewMode;\n        this.parent.timelineSettings.timelineUnitSize = updateAction_1['previousZoomingLevel'].timelineUnitSize;\n        this.parent.timelineSettings.updateTimescaleView = updateAction_1['previousZoomingLevel'].updateTimescaleView;\n        this.parent.timelineSettings.topTier.unit = updateAction_1['previousZoomingLevel'].topTier.unit;\n        this.parent.timelineSettings.topTier.count = updateAction_1['previousZoomingLevel'].topTier.count;\n        this.parent.timelineSettings.topTier.format = updateAction_1['previousZoomingLevel'].topTier.format;\n        this.parent.timelineSettings.bottomTier.unit = updateAction_1['previousZoomingLevel'].bottomTier.unit;\n        this.parent.timelineSettings.bottomTier.count = updateAction_1['previousZoomingLevel'].bottomTier.count;\n        this.parent.timelineSettings.bottomTier.format = updateAction_1['previousZoomingLevel'].bottomTier.format;\n        this.parent.timelineSettings.weekStartDay = updateAction_1['previousZoomingLevel'].weekStartDay;\n        this.parent.timelineSettings.weekendBackground = updateAction_1['previousZoomingLevel'].weekendBackground;\n        if (updateAction_1['action'] === 'ZoomToFit') {\n          this.parent.timelineModule.refreshTimeline();\n        }\n      } else if (updateAction_1['action'] === 'NextTimeSpan' || updateAction_1['action'] === 'PreviousTimeSpan') {\n        this.parent.updateProjectDates(updateAction_1['previousTimelineStartDate'], updateAction_1['previousTimelineEndDate'], false);\n      } else if (updateAction_1['action'] === 'Sorting') {\n        this.isFromUndoRedo = true;\n        this.sortedColumnsLength = 0;\n        if (updateAction_1['sortColumns'].length > 0) {\n          for (var i = 0; i < updateAction_1['sortColumns'].length; i++) {\n            this.parent.treeGrid.sortByColumn(updateAction_1['sortColumns'][i]['field'], updateAction_1['sortColumns'][i]['direction']);\n          }\n        } else {\n          this.parent.clearSorting();\n        }\n      } else if (updateAction_1['action'] === 'Filtering') {\n        this.isFromUndoRedo = true;\n        for (var i = this.getUndoCollection.length - 1; i >= 0; i--) {\n          if (this.getUndoCollection[i]['filteredColumns']) {\n            var columnsArray = [];\n            for (var j = 0; j < this.getUndoCollection[i]['filteredColumns'].length; j++) {\n              columnsArray.push(this.getUndoCollection[i]['filteredColumns'][j].field);\n            }\n            this.parent.clearFiltering(columnsArray);\n          }\n        }\n      } else if (updateAction_1['action'] === 'ColumnReorder') {\n        this.isFromUndoRedo = true;\n        var fromColumn = this.parent.treeGrid.columns[updateAction_1['fromIndex']]['field'];\n        var toColumn = this.parent.treeGrid.columns[updateAction_1['toIndex']]['field'];\n        this.parent.reorderColumns(fromColumn, toColumn);\n      } else if (updateAction_1['action'] === 'Search') {\n        this.isFromUndoRedo = true;\n        this.parent.search(updateAction_1['searchString']);\n      } else if (updateAction_1['action'] === 'ColumnState') {\n        this.isFromUndoRedo = true;\n        for (var i = 0; i < updateAction_1['showhideColumns'].length; i++) {\n          if (updateAction_1['showhideColumns'][i].visible) {\n            this.parent.hideColumn(updateAction_1['showhideColumns'][i].field, 'field');\n          } else {\n            this.parent.showColumn(updateAction_1['showhideColumns'][i].field, 'field');\n          }\n        }\n      } else if (updateAction_1['action'] === 'ColumnResize') {\n        this.parent.treeGrid.columns[updateAction_1['resizedColumn'].index]['width'] = updateAction_1['resizedColumn'].width;\n        this.parent.treeGrid.refreshColumns();\n      } else if (updateAction_1['action'] === 'RowDragAndDrop' || updateAction_1['action'] === 'TaskbarDragAndDrop') {\n        for (var i = 0; i < updateAction_1['beforeDrop'].length; i++) {\n          var fromIndex = void 0;\n          var toIndex = void 0;\n          if (this.parent.viewType === 'ProjectView') {\n            fromIndex = this.parent.ids.indexOf(updateAction_1['beforeDrop'][i].data.ganttProperties.taskId.toString());\n            toIndex = this.parent.ids.indexOf(updateAction_1['beforeDrop'][i]['id'].toString());\n          } else {\n            fromIndex = this.parent.ids.indexOf('T' + updateAction_1['beforeDrop'][i].data.ganttProperties.taskId.toString());\n            toIndex = this.parent.taskIds.indexOf(updateAction_1['beforeDrop'][i]['id'].toString());\n          }\n          this.parent.reorderRows([fromIndex], toIndex, updateAction_1['beforeDrop'][i].position);\n          this.parent.updateRecordByID(updateAction_1['beforeDrop'][i].data);\n          if (updateAction_1['afterDrop'].dropPosition === 'child') {\n            this.parent.updateRecordByID(updateAction_1['afterDrop'].dropRecord);\n          }\n        }\n      } else if (updateAction_1['action'] === 'Indent' || updateAction_1['action'] === 'Outdent') {\n        this.parent.selectRow(this.parent.ids.indexOf(updateAction_1['modifiedRecord'][0].data.ganttProperties.taskId.toString()));\n        if (updateAction_1['action'] === 'Indent') {\n          this.parent.outdent();\n        } else {\n          this.parent.indent();\n        }\n        setTimeout(function () {\n          _this.isUndoRedoPerformed = true;\n          _this.parent.updateRecordByID(updateAction_1['droppedRecord']);\n          _this.isUndoRedoPerformed = false;\n        });\n      } else if (updateAction_1['action'] === 'Delete') {\n        var rowIndex = void 0;\n        for (var i = 0; i < updateAction_1['deletedRecordsDetails'].length; i++) {\n          if (this.parent.viewType === 'ProjectView') {\n            rowIndex = this.parent.ids.indexOf(updateAction_1['deletedRecordsDetails'][i].id.toString());\n          } else {\n            rowIndex = this.parent.taskIds.indexOf(updateAction_1['deletedRecordsDetails'][i].id.toString());\n          }\n          var position = void 0;\n          if (updateAction_1['deletedRecordsDetails'][i].position === 'above') {\n            position = 'Above';\n          }\n          if (updateAction_1['deletedRecordsDetails'][i].position === 'below') {\n            position = 'Below';\n          }\n          if (updateAction_1['deletedRecordsDetails'][i].position === 'child') {\n            position = 'Child';\n          }\n          this.parent.addRecord(updateAction_1['deletedRecordsDetails'][i].data, position, rowIndex);\n        }\n      } else if (updateAction_1['action'] === 'Add') {\n        var isShowDeleteConfirmDialog = extend([], [this.parent.editSettings.showDeleteConfirmDialog], [], true)[0];\n        this.parent.editSettings.showDeleteConfirmDialog = false;\n        var deleteRec = updateAction_1['addedRecords'];\n        if (this.parent.viewType === 'ResourceView' && updateAction_1['addedRecords'].length === 1 && updateAction_1['addedRecords'][0].parentItem) {\n          var parentRec = this.parent.getTaskByUniqueID(updateAction_1['addedRecords'][0].parentItem.uniqueID);\n          if (parentRec.childRecords.length === 1 && parentRec.ganttProperties.taskName === 'Unassigned Task') {\n            deleteRec = parentRec;\n          }\n        }\n        this.parent.deleteRecord(deleteRec);\n        this.parent.editSettings.showDeleteConfirmDialog = isShowDeleteConfirmDialog;\n      } else {\n        this.parent.updateRecordByID(this.getUndoCollection[this.getUndoCollection.length - 1]['modifiedRecords'][0]);\n        if (updateAction_1['connectedRecords'] && this.parent.viewType === 'ProjectView') {\n          for (var i = 0; i < updateAction_1['connectedRecords'].length; i++) {\n            this.parent.updateRecordByID(updateAction_1['connectedRecords'][i]);\n          }\n        }\n      }\n      var args = {};\n      args = extend([], [], [this.getUndoCollection[this.getUndoCollection.length - 1]], true)[0];\n      args['requestType'] = 'afterUndoAction';\n      this.parent.trigger('onAfterUndo', args);\n      this.isUndoRedoPerformed = false;\n      if (this.getRedoCollection.length > 0) {\n        if (this.parent.toolbarModule) {\n          this.parent.toolbarModule.enableItems([this.parent.controlId + '_redo'], true);\n        }\n        this.redoEnabled = true;\n      }\n      this.getUndoCollection.splice(this.getUndoCollection.length - 1, 1);\n      if (this.getUndoCollection.length === 0 && this.parent.toolbarModule) {\n        this.parent.toolbarModule.enableItems([this.parent.controlId + '_undo'], false);\n      }\n    } else {\n      this.getUndoCollection.splice(this.getUndoCollection.length - 1, 1);\n      if (this.getUndoCollection.length === 0 && this.parent.toolbarModule) {\n        this.parent.toolbarModule.enableItems([this.parent.controlId + '_undo'], false);\n      }\n    }\n  };\n  /**\n   *Initiates an redo action to reapply the most recent undone change performed.\n   *\n   * @returns {void}\n   * @public\n   */\n  UndoRedo.prototype.redoAction = function () {\n    if (this.getRedoCollection.length > 0) {\n      var updateAction = this.getRedoCollection[this.getRedoCollection.length - 1];\n      var previousActions = {};\n      if (updateAction['action'] === 'ZoomIn' || updateAction['action'] === 'ZoomOut' || updateAction['action'] === 'ZoomToFit') {\n        previousActions['action'] = updateAction['action'];\n        previousActions['previousZoomingLevel'] = extend({}, {}, this.parent.currentZoomingLevel, true);\n      } else if (updateAction['action'] === 'NextTimeSpan' || updateAction['action'] === 'PreviousTimeSpan') {\n        previousActions['action'] = updateAction['action'];\n        previousActions['previousTimelineStartDate'] = extend([], [this.parent.timelineModule.timelineStartDate], [], true)[0];\n        previousActions['previousTimelineEndDate'] = extend([], [this.parent.timelineModule.timelineEndDate], [], true)[0];\n      } else if (updateAction['action'] === 'Sorting') {\n        previousActions['action'] = 'Sorting';\n        previousActions['sortColumns'] = extend([], this.parent.sortSettings.columns, [], true);\n      } else if (updateAction['action'] === 'Filtering') {\n        previousActions['action'] = 'Filtering';\n        previousActions['filteredColumns'] = updateAction['filteredColumns'];\n      } else if (updateAction['action'] === 'ColumnReorder') {\n        previousActions['action'] = updateAction['action'];\n        previousActions['toColumn'] = updateAction['fromColumn'];\n        previousActions['fromColumn'] = updateAction['toColumn'];\n        previousActions['fromIndex'] = updateAction['toIndex'];\n        previousActions['toIndex'] = updateAction['fromIndex'];\n      } else if (updateAction['action'] === 'Search') {\n        previousActions['action'] = updateAction['action'];\n        previousActions['searchString'] = extend([], [this.parent.searchSettings.key], [], true)[0];\n      } else if (updateAction['action'] === 'ColumnState') {\n        previousActions['action'] = updateAction['action'];\n        previousActions['showhideColumns'] = updateAction['showhideColumns'];\n      } else if (updateAction['action'] === 'ColumnResize') {\n        previousActions['action'] = updateAction['action'];\n        previousActions['resizedColumn'] = __assign({}, this.parent.treeGrid.columns[updateAction['resizedColumn'].index]);\n      } else if (updateAction['action'] === 'RowDragAndDrop' || updateAction['action'] === 'TaskbarDragAndDrop') {\n        var rowItems = [];\n        for (var i = 0; i < updateAction['beforeDrop'].length; i++) {\n          if (this.parent.viewType === 'ProjectView') {\n            rowItems.push(this.parent.getRecordByID(updateAction['beforeDrop'][i]['data'].ganttProperties.taskId));\n          } else {\n            rowItems.push(this.parent.flatData[this.parent.taskIds.indexOf('T' + updateAction['beforeDrop'][i]['data'].ganttProperties.taskId.toString())]);\n          }\n        }\n        previousActions['action'] = updateAction['action'];\n        previousActions['beforeDrop'] = [];\n        var previousDetails = {};\n        var dropRecord = void 0;\n        if (updateAction['afterDrop'].dropRecord) {\n          dropRecord = extend([], [], [this.parent.getRecordByID(updateAction['afterDrop'].dropRecord.ganttProperties.taskId)], true)[0];\n        }\n        previousDetails['data'] = [];\n        for (var i = 0; i < updateAction['afterDrop'].data.length; i++) {\n          if (this.parent.viewType === 'ProjectView') {\n            previousDetails['data'].push(extend([], [], [this.parent.getRecordByID(updateAction['afterDrop'].data[i].ganttProperties.taskId)], true)[0]);\n          } else {\n            if (updateAction['afterDrop'].data[i] !== undefined) {\n              previousDetails['data'].push(extend([], [], this.parent.flatData[this.parent.taskIds.indexOf('T' + updateAction['afterDrop'].data[i].ganttProperties.taskId)], true)[0]);\n            }\n          }\n        }\n        previousDetails['dropRecord'] = extend([], [], [dropRecord], true)[0];\n        previousDetails['dropPosition'] = updateAction['afterDrop'].dropPosition;\n        previousActions['afterDrop'] = previousDetails;\n        this['findPosition'](rowItems, previousActions, 'beforeDrop');\n      } else if (updateAction['action'] === 'Indent' || updateAction['action'] === 'Outdent') {\n        previousActions['selectedRowIndexes'] = updateAction['selectedRowIndexes'];\n        previousActions['droppedRecord'] = extend([], [], [this.parent.flatData[this.parent.ids.indexOf(updateAction['droppedRecord'].ganttProperties.taskId.toString())]], true)[0];\n        previousActions['modifiedRecord'] = [];\n        this.findPosition(extend([], [], [this.parent.flatData[this.parent.ids.indexOf(updateAction['modifiedRecord'][0].data.ganttProperties.taskId.toString())]], true), previousActions, 'modifiedRecord');\n        previousActions['action'] = updateAction['action'];\n      } else if (updateAction['action'] === 'Delete') {\n        previousActions['action'] = 'Delete';\n        previousActions['deletedRecordsDetails'] = [];\n        this['findPosition'](extend([], [], updateAction['deleteRecords'], true), previousActions, 'deletedRecordsDetails');\n      } else if (updateAction['action'] === 'Add') {\n        previousActions['action'] = 'Add';\n        previousActions['addedRecords'] = [updateAction['deletedRecordsDetails'][0].data];\n      } else {\n        previousActions['action'] = updateAction['action'];\n        previousActions['modifiedRecords'] = [];\n        for (var i = 0; i < updateAction['modifiedRecords'].length; i++) {\n          var index = void 0;\n          if (this.parent.viewType === 'ProjectView') {\n            index = this.parent.ids.indexOf(updateAction['modifiedRecords'][i].ganttProperties.taskId.toString());\n          } else {\n            if (updateAction['modifiedRecords'][i].hasChildRecords) {\n              index = this.parent.taskIds.indexOf('R' + updateAction['modifiedRecords'][i].ganttProperties.taskId);\n            } else {\n              index = this.parent.taskIds.indexOf('T' + updateAction['modifiedRecords'][i].ganttProperties.taskId);\n            }\n          }\n          previousActions['modifiedRecords'].push(extend([], [this.parent.flatData[index]], [], true)[0]);\n        }\n      }\n      this.getUndoCollection.push(previousActions);\n      this.isUndoRedoPerformed = true;\n      this.currentAction = updateAction;\n      if (updateAction['action'] === 'ZoomIn' || updateAction['action'] === 'ZoomOut' || updateAction['action'] === 'ZoomToFit') {\n        if (updateAction['action'] === 'ZoomToFit') {\n          this.parent.fitToProject();\n        } else {\n          this.parent.timelineSettings.timelineViewMode = updateAction['previousZoomingLevel'].timelineViewMode;\n          this.parent.timelineSettings.timelineUnitSize = updateAction['previousZoomingLevel'].timelineUnitSize;\n          this.parent.timelineSettings.updateTimescaleView = updateAction['previousZoomingLevel'].updateTimescaleView;\n          this.parent.timelineSettings.topTier.unit = updateAction['previousZoomingLevel'].topTier.unit;\n          this.parent.timelineSettings.topTier.count = updateAction['previousZoomingLevel'].topTier.count;\n          this.parent.timelineSettings.topTier.format = updateAction['previousZoomingLevel'].topTier.format;\n          this.parent.timelineSettings.bottomTier.unit = updateAction['previousZoomingLevel'].bottomTier.unit;\n          this.parent.timelineSettings.bottomTier.count = updateAction['previousZoomingLevel'].bottomTier.count;\n          this.parent.timelineSettings.bottomTier.format = updateAction['previousZoomingLevel'].bottomTier.format;\n          this.parent.timelineSettings.weekStartDay = updateAction['previousZoomingLevel'].weekStartDay;\n          this.parent.timelineSettings.weekendBackground = updateAction['previousZoomingLevel'].weekendBackground;\n        }\n      } else if (updateAction['action'] === 'NextTimeSpan' || updateAction['action'] === 'PreviousTimeSpan') {\n        this.parent.updateProjectDates(updateAction['previousTimelineStartDate'], updateAction['previousTimelineEndDate'], false);\n      } else if (updateAction['action'] === 'Sorting') {\n        this.isFromUndoRedo = true;\n        this.sortedColumnsLength = 0;\n        if (updateAction['sortColumns'].length === 0) {\n          this.parent.clearSorting();\n        } else {\n          for (var i = 0; i < updateAction['sortColumns'].length; i++) {\n            this.parent.treeGrid.sortByColumn(updateAction['sortColumns'][i]['field'], updateAction['sortColumns'][i]['direction'], updateAction['sortColumns'].length > 1 ? true : false);\n          }\n        }\n      } else if (updateAction['action'] === 'ColumnState') {\n        this.isFromUndoRedo = true;\n        for (var i = 0; i < updateAction['showhideColumns'].length; i++) {\n          if (updateAction['showhideColumns'][i].visible) {\n            this.parent.hideColumn(updateAction['showhideColumns'][i].field, 'field');\n          } else {\n            this.parent.showColumn(updateAction['showhideColumns'][i].field, 'field');\n          }\n        }\n      } else if (updateAction['action'] === 'Filtering') {\n        for (var j = 0; j < updateAction['filteredColumns'].length; j++) {\n          this.isFromUndoRedo = true;\n          this.parent.filterByColumn(updateAction['filteredColumns'][j].field, updateAction['filteredColumns'][j].operator, updateAction['filteredColumns'][j].value, updateAction['filteredColumns'][j].predicate, updateAction['filteredColumns'][j].matchCase, updateAction['filteredColumns'][j].ignoreAccent);\n        }\n      } else if (updateAction['action'] === 'ColumnReorder') {\n        this.isFromUndoRedo = true;\n        var fromColumn = this.parent.treeGrid.columns[updateAction['fromIndex']]['field'];\n        var toColumn = this.parent.treeGrid.columns[updateAction['toIndex']]['field'];\n        this.parent.reorderColumns(fromColumn, toColumn);\n      } else if (updateAction['action'] === 'Search') {\n        this.isFromUndoRedo = true;\n        this.parent.search(updateAction['searchString']);\n      } else if (updateAction['action'] === 'ColumnResize') {\n        this.parent.treeGrid.columns[updateAction['resizedColumn'].index]['width'] = updateAction['resizedColumn'].width;\n        this.parent.treeGrid.refreshColumns();\n      } else if (updateAction['action'] === 'RowDragAndDrop' || updateAction['action'] === 'TaskbarDragAndDrop') {\n        for (var i = 0; i < updateAction['beforeDrop'].length; i++) {\n          var fromIndex = void 0;\n          var toIndex = void 0;\n          if (this.parent.viewType === 'ProjectView') {\n            fromIndex = this.parent.ids.indexOf(updateAction['beforeDrop'][i].data.ganttProperties.taskId.toString());\n            toIndex = this.parent.ids.indexOf(updateAction['beforeDrop'][i]['id'].toString());\n          } else {\n            fromIndex = this.parent.ids.indexOf('T' + updateAction['beforeDrop'][i].data.ganttProperties.taskId.toString());\n            toIndex = this.parent.taskIds.indexOf(updateAction['beforeDrop'][i]['id'].toString());\n          }\n          this.parent.reorderRows([fromIndex], toIndex, updateAction['beforeDrop'][i].position);\n        }\n      } else if (updateAction['action'] === 'Indent' || updateAction['action'] === 'Outdent') {\n        this.parent.selectRow(updateAction['selectedRowIndexes'][0]);\n        if (updateAction['action'] === 'Indent') {\n          this.parent.indent();\n        }\n        if (updateAction['action'] === 'Outdent') {\n          this.parent.outdent();\n        }\n      } else if (updateAction['action'] === 'Delete') {\n        var isShowDeleteConfirmDialog = extend([], [this.parent.editSettings.showDeleteConfirmDialog], [], true)[0];\n        this.parent.editSettings.showDeleteConfirmDialog = false;\n        this.parent.deleteRecord(updateAction['deleteRecords']);\n        this.parent.editSettings.showDeleteConfirmDialog = isShowDeleteConfirmDialog;\n      } else if (updateAction['action'] === 'Add') {\n        if (this.parent.viewType === 'ResourceView' && updateAction['deletedRecordsDetails'].length > 1) {\n          this.parent.editModule.addRecord(extend([], [], updateAction['deletedRecordsDetails'], true));\n        } else {\n          var rowIndex = void 0;\n          for (var i = 0; i < updateAction['deletedRecordsDetails'].length; i++) {\n            if (this.parent.viewType === 'ProjectView') {\n              rowIndex = this.parent.ids.indexOf(updateAction['deletedRecordsDetails'][i].id.toString());\n            } else {\n              rowIndex = this.parent.taskIds.indexOf(updateAction['deletedRecordsDetails'][i].id.toString());\n            }\n            var position = void 0;\n            if (updateAction['deletedRecordsDetails'][i].position === 'above') {\n              position = 'Above';\n            }\n            if (updateAction['deletedRecordsDetails'][i].position === 'below') {\n              position = 'Below';\n            }\n            if (updateAction['deletedRecordsDetails'][i].position === 'child') {\n              position = 'Child';\n            }\n            if (updateAction['deletedRecordsDetails'][i].position === 'bottom') {\n              position = 'Bottom';\n            }\n            this.parent.editModule.addRecord(updateAction['deletedRecordsDetails'][i].data, position, rowIndex);\n          }\n        }\n      } else {\n        this.parent.updateRecordByID(updateAction['modifiedRecords'][0]);\n      }\n      this.isUndoRedoPerformed = false;\n      if (this.getUndoCollection.length > 0 && this.parent.toolbarModule) {\n        this.parent.toolbarModule.enableItems([this.parent.controlId + '_undo'], true);\n      }\n      this.getRedoCollection.splice(this.getRedoCollection.length - 1, 1);\n      if (this.getRedoCollection.length === 0 && this.parent.toolbarModule) {\n        this.redoEnabled = false;\n        this.parent.toolbarModule.enableItems([this.parent.controlId + '_redo'], false);\n      }\n    }\n  };\n  UndoRedo.prototype.createUndoCollection = function () {\n    if (this.parent['totalUndoAction'] + 1 > this.parent.undoRedoStepsCount && this.getUndoCollection.length === this.parent['totalUndoAction']) {\n      this.getUndoCollection.splice(0, 1);\n      this.disableRedo();\n    }\n    if (this.parent.toolbarModule) {\n      this.parent.toolbarModule.enableItems([this.parent.controlId + '_undo'], true);\n    }\n    if (this.getUndoCollection.length === 0) {\n      this.getUndoCollection[0] = [];\n      if (this.parent['totalUndoAction'] + 1 <= this.parent.undoRedoStepsCount) {\n        this.parent['totalUndoAction']++;\n      }\n    } else if (Object.keys(this['getUndoCollection'][this['getUndoCollection'].length - 1])['length'] > 0) {\n      this.getUndoCollection[this.getUndoCollection.length] = [];\n      if (this.parent['totalUndoAction'] + 1 <= this.parent.undoRedoStepsCount) {\n        this.parent['totalUndoAction']++;\n      }\n    }\n  };\n  UndoRedo.prototype.disableRedo = function () {\n    this.redoEnabled = false;\n    this.getRedoCollection = [];\n    if (this.parent.toolbarModule) {\n      this.parent.toolbarModule.enableItems([this.parent.controlId + '_redo'], false);\n    }\n  };\n  UndoRedo.prototype.findPosition = function (rowItems, records, detail) {\n    var _loop_1 = function (i) {\n      var record = {};\n      record['data'] = rowItems[i];\n      if (this_1.parent.viewType === 'ProjectView') {\n        if (!rowItems[i].hasChildRecords && rowItems[i].parentItem) {\n          var parentItem = this_1.parent.getRecordByID(rowItems[i].parentItem.taskId);\n          if (parentItem.childRecords.length > 1) {\n            var recIndex = this_1.parent.ids.indexOf(rowItems[i].ganttProperties.taskId.toString());\n            var previousRecord = this_1.parent.flatData[recIndex - 1];\n            if (previousRecord.parentItem && previousRecord.parentItem.taskId.toString() === parentItem.ganttProperties.taskId.toString()) {\n              record['position'] = 'below';\n              record['id'] = extend([], [this_1.parent.flatData[this_1.parent.ids.indexOf(rowItems[i].ganttProperties.taskId.toString()) - 1].ganttProperties.taskId], [], true)[0];\n            } else {\n              record['position'] = 'above';\n              var currentData = this_1.parent.flatData[this_1.parent.ids.indexOf(rowItems[i].ganttProperties.taskId.toString()) + 1];\n              var index = this_1.parent.ids.indexOf(rowItems[i].ganttProperties.taskId.toString()) + 1;\n              var rowIndex = i;\n              do {\n                var rowData = rowItems[rowIndex + 1];\n                if (!rowData || rowData && currentData.ganttProperties.taskId.toString() !== rowData.ganttProperties.taskId.toString()) {\n                  if (currentData && currentData.parentItem) {\n                    record['id'] = extend([], [currentData.ganttProperties.taskId], [], true)[0];\n                  } else {\n                    record['id'] = extend([], [rowItems[i].parentItem.taskId], [], true)[0];\n                    record['position'] = 'child';\n                  }\n                } else {\n                  rowIndex++;\n                  index++;\n                  currentData = this_1.parent.flatData[index];\n                }\n              } while (!record['id']);\n            }\n          } else {\n            record['position'] = 'child';\n            record['id'] = extend([], [parentItem.ganttProperties.taskId], [], true)[0];\n          }\n        } else if (!rowItems[i].hasChildRecords && !rowItems[i].parentItem) {\n          if (this_1.parent.ids.indexOf(rowItems[i].ganttProperties.taskId.toString()) === this_1.parent.ids.length - 1) {\n            record['position'] = 'below';\n          } else {\n            record['position'] = 'above';\n          }\n          var parentIndex = void 0;\n          var currentData = void 0;\n          var prevInd = void 0;\n          for (var k = 0; k < this_1.parent.treeGrid.parentData.length; k++) {\n            if (this_1.parent.treeGrid.parentData[k]['ganttProperties'].taskId.toString() === rowItems[i].ganttProperties.taskId.toString()) {\n              parentIndex = k;\n              currentData = this_1.parent.treeGrid.parentData[k + 1];\n              prevInd = k + 1;\n              break;\n            }\n          }\n          var rowIndex = i;\n          do {\n            var rowData = rowItems[rowIndex + 1];\n            if (!rowData || rowData && currentData['ganttProperties'].taskId.toString() !== rowData.ganttProperties.taskId.toString()) {\n              if (currentData) {\n                record['id'] = extend([], [currentData['ganttProperties'].taskId], [], true)[0];\n              } else {\n                currentData = this_1.parent.treeGrid.parentData[parentIndex - 1];\n                if (!currentData) {\n                  currentData = this_1.parent.treeGrid.parentData[parentIndex];\n                }\n                record['id'] = extend([], [currentData['ganttProperties'].taskId], [], true)[0];\n              }\n            } else {\n              rowIndex++;\n              prevInd++;\n              currentData = this_1.parent.treeGrid.parentData[prevInd];\n            }\n          } while (!record['id']);\n        } else if (rowItems[i].hasChildRecords && !rowItems[i].parentItem) {\n          var parentIndex = void 0;\n          var currentData = void 0;\n          var prevInd = void 0;\n          for (var k = 0; k < this_1.parent.treeGrid.parentData.length; k++) {\n            if (this_1.parent.treeGrid.parentData[k]['ganttProperties'].taskId.toString() === rowItems[i].ganttProperties.taskId.toString()) {\n              parentIndex = k;\n              currentData = this_1.parent.treeGrid.parentData[k + 1];\n              prevInd = k + 1;\n              break;\n            }\n          }\n          if (parentIndex !== -1) {\n            if (parentIndex === 0) {\n              record['position'] = 'above';\n              var rowIndex = i;\n              do {\n                var rowData = rowItems[rowIndex + 1];\n                if (!rowData || rowData && currentData['ganttProperties'].taskId.toString() !== rowData.ganttProperties.taskId.toString()) {\n                  if (!currentData) {\n                    currentData = this_1.parent.treeGrid.parentData[parentIndex];\n                  }\n                  record['id'] = extend([], [currentData['ganttProperties'].taskId], [], true)[0];\n                } else {\n                  rowIndex++;\n                  prevInd++;\n                  currentData = this_1.parent.treeGrid.parentData[prevInd];\n                }\n              } while (!record['id']);\n            } else {\n              record['position'] = 'below';\n              record['id'] = extend([], [this_1.parent.treeGrid.parentData[parentIndex - 1].ganttProperties.taskId], [], true)[0];\n            }\n          }\n        } else if (rowItems[i].hasChildRecords && rowItems[i].parentItem) {\n          var parentItem = this_1.parent.getRecordByID(rowItems[i].parentItem.taskId);\n          if (parentItem.childRecords.length === 1) {\n            record['position'] = 'child';\n            record['id'] = extend([], [rowItems[i].parentItem.taskId], [], true)[0];\n          } else {\n            var childIndex = void 0;\n            for (var k = 0; k < parentItem.childRecords.length; k++) {\n              if (parentItem.childRecords[i].ganttProperties.taskId.toString() === rowItems[i].ganttProperties.taskId.toString()) {\n                childIndex = k;\n                break;\n              }\n            }\n            if (!isNullOrUndefined(childIndex)) {\n              if (childIndex === 0) {\n                record['position'] = 'above';\n                record['id'] = extend([], [parentItem.childRecords[childIndex + 1].ganttProperties.taskId], [], true)[0];\n              } else {\n                record['position'] = 'below';\n                record['id'] = extend([], [parentItem.childRecords[childIndex - 1].ganttProperties.taskId], [], true)[0];\n              }\n            }\n          }\n        }\n      } else {\n        if (rowItems[i].parentItem) {\n          var parentRecord = void 0;\n          if (rowItems[i].parentItem.index) {\n            parentRecord = this_1.parent.flatData[rowItems[i].parentItem.index];\n          } else {\n            parentRecord = this_1.parent.flatData[this_1.parent.ids.indexOf(rowItems[i].parentItem.taskId)];\n          }\n          if (parentRecord.childRecords.length === 1) {\n            record['position'] = 'bottom';\n            record['id'] = 'R' + parentRecord.ganttProperties.taskId;\n            if (detail === 'deletedIndexes') {\n              record['position'] = 'child';\n              record['index'] = parentRecord.index;\n            }\n          } else {\n            var currentIndex = void 0;\n            for (var j = 0; j < parentRecord.childRecords.length; j++) {\n              if (parentRecord.childRecords[j].ganttProperties.taskId.toString() === rowItems[i].ganttProperties.taskId.toString()) {\n                currentIndex = j;\n                break;\n              }\n            }\n            var previousRecord = parentRecord.childRecords[currentIndex - 1];\n            if (previousRecord && previousRecord.parentItem && previousRecord.parentUniqueID === parentRecord.uniqueID) {\n              record['position'] = 'below';\n              record['id'] = extend([], ['T' + this_1.parent.flatData[this_1.parent.taskIds.indexOf('T' + rowItems[i].ganttProperties.taskId.toString()) - 1].ganttProperties.taskId], [], true)[0];\n              if (detail === 'deletedIndexes') {\n                record['index'] = this_1.parent.taskIds.indexOf('T' + rowItems[i].ganttProperties.taskId.toString()) - 1;\n              }\n            } else {\n              var index = void 0;\n              if (currentIndex !== parentRecord.childRecords.length - 1) {\n                record['position'] = 'above';\n                if (currentIndex === 0 && parentRecord.childRecords[1]) {\n                  index = parentRecord.childRecords[1].index;\n                } else if (parentRecord.childRecords[currentIndex - 1]) {\n                  index = parentRecord.childRecords[currentIndex - 1].index;\n                }\n                var currentData = this_1.parent.flatData[index];\n                var recIndex = index;\n                var rowIndex = i;\n                do {\n                  var rowData = rowItems[rowIndex + 1];\n                  if (!rowData || rowData && currentData.ganttProperties.taskId.toString() !== rowData.ganttProperties.taskId.toString()) {\n                    if (currentData.parentItem) {\n                      record['id'] = extend([], ['T' + currentData.ganttProperties.taskId], [], true)[0];\n                      if (detail === 'deletedIndexes') {\n                        record['index'] = extend([], [currentData.index], [], true)[0];\n                        if (currentIndex === 0 && parentRecord.childRecords[1].ganttProperties.taskId === currentData.ganttProperties.taskId) {\n                          record['index'] = record['index'] - 1;\n                        }\n                      }\n                    } else {\n                      record['id'] = extend([], ['R' + rowItems[i].parentItem.taskId], [], true)[0];\n                      record['position'] = 'child';\n                      if (detail === 'deletedIndexes') {\n                        record['index'] = rowItems[i].parentItem.index;\n                      }\n                    }\n                  } else {\n                    rowIndex++;\n                    recIndex++;\n                    currentData = this_1.parent.flatData[recIndex];\n                  }\n                } while (!record['id']);\n              } else {\n                if (currentIndex === parentRecord.childRecords.length - 1) {\n                  record['position'] = 'below';\n                } else {\n                  record['position'] = 'above';\n                }\n                record['id'] = 'T' + parentRecord.childRecords[currentIndex - 1].ganttProperties.taskId;\n                if (detail === 'deletedIndexes') {\n                  record['index'] = parentRecord.childRecords[currentIndex - 1].index;\n                }\n              }\n            }\n          }\n        } else {\n          var parentData = this_1.parent.treeGrid.parentData.filter(function (parentData) {\n            return parentData.ganttProperties.taskId === rowItems[i].ganttProperties.taskId;\n          })[0];\n          var parentDataIndex = this_1.parent.treeGrid.parentData.indexOf(parentData);\n          if (parentDataIndex === 0) {\n            record['position'] = 'above';\n            var currentData = void 0;\n            var prevInd = void 0;\n            for (var k = 0; k < this_1.parent.treeGrid.parentData.length; k++) {\n              if (this_1.parent.treeGrid.parentData[k]['ganttProperties'].taskId === rowItems[i].ganttProperties.taskId) {\n                currentData = this_1.parent.treeGrid.parentData[k + 1];\n                prevInd = k + 1;\n                break;\n              }\n            }\n            var rowIndex = i;\n            do {\n              var rowData = rowItems[rowIndex + 1];\n              if (!rowData || rowData && currentData['ganttProperties'].taskId !== rowData.ganttProperties.taskId) {\n                record['id'] = 'R' + currentData['ganttProperties'].taskId;\n                if (detail === 'deletedIndexes') {\n                  record['index'] = currentData['index'];\n                }\n              } else {\n                rowIndex++;\n                prevInd++;\n                currentData = this_1.parent.treeGrid.parentData[prevInd];\n              }\n            } while (!record['id']);\n          } else {\n            record['position'] = 'below';\n            record['id'] = 'R' + this_1.parent.treeGrid.parentData[parentDataIndex - 1]['ganttProperties']['taskId'];\n            if (detail === 'deletedIndexes') {\n              record['index'] = this_1.parent.treeGrid.parentData[parentDataIndex - 1]['index'];\n            }\n          }\n        }\n      }\n      if (detail === 'deletedIndexes') {\n        var parent_1 = this_1.parent.getTaskByUniqueID(record['data'].parentUniqueID);\n        if (this_1.parent.editModule.dialogModule.ganttResources.length === 0 && records[detail].indexOf(record) === -1) {\n          records[detail].push(record);\n        } else {\n          for (var j = 0; j < this_1.parent.editModule.dialogModule.ganttResources.length; j++) {\n            if (this_1.parent.editModule.dialogModule.ganttResources[j][this_1.parent.resourceFields.id] !== parent_1.ganttProperties.taskId && records[detail].indexOf(record) === -1) {\n              records[detail].push(record);\n            }\n          }\n        }\n      } else {\n        records[detail].push(record);\n      }\n    };\n    var this_1 = this;\n    for (var i = 0; i < rowItems.length; i++) {\n      _loop_1(i);\n    }\n  };\n  UndoRedo.prototype.getModuleName = function () {\n    return 'undoRedo';\n  };\n  /**\n   * Destroys the UndoRedo of Gantt.\n   *\n   * @returns {void} .\n   * @private\n   */\n  UndoRedo.prototype.destroy = function () {\n    if (!this.parent.enableUndoRedo && this.parent.undoRedoModule) {\n      this.parent.undoRedoModule = undefined;\n    }\n  };\n  return UndoRedo;\n}();\nexport { UndoRedo };","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","extend","isNullOrUndefined","UndoRedo","parent","isUndoRedoPerformed","changedRecords","getRedoCollection","getUndoCollection","redoEnabled","previousSortedColumns","searchString","isFromUndoRedo","canUpdateIndex","sortedColumnsLength","undoAction","_this","updateAction_1","previousActions","currentZoomingLevel","timelineModule","timelineStartDate","timelineEndDate","treeGrid","columns","index","rowItems","viewType","push","getRecordByID","ganttProperties","taskId","flatData","taskIds","indexOf","toString","previousDetails","dropRecord","data","dropPosition","ids","findPosition","hasChildRecords","currentAction","timelineSettings","timelineViewMode","timelineUnitSize","updateTimescaleView","topTier","unit","count","format","bottomTier","weekStartDay","weekendBackground","refreshTimeline","updateProjectDates","sortByColumn","clearSorting","columnsArray","j","field","clearFiltering","fromColumn","toColumn","reorderColumns","search","visible","hideColumn","showColumn","width","refreshColumns","fromIndex","toIndex","reorderRows","position","updateRecordByID","selectRow","outdent","indent","setTimeout","rowIndex","id","addRecord","isShowDeleteConfirmDialog","editSettings","showDeleteConfirmDialog","deleteRec","parentItem","parentRec","getTaskByUniqueID","uniqueID","childRecords","taskName","deleteRecord","args","trigger","toolbarModule","enableItems","controlId","splice","redoAction","updateAction","sortSettings","searchSettings","key","undefined","fitToProject","filterByColumn","operator","value","predicate","matchCase","ignoreAccent","editModule","createUndoCollection","undoRedoStepsCount","disableRedo","keys","records","detail","_loop_1","record","this_1","recIndex","previousRecord","currentData","rowData","parentIndex","prevInd","k","parentData","childIndex","parentRecord","currentIndex","parentUniqueID","filter","parentDataIndex","parent_1","dialogModule","ganttResources","resourceFields","getModuleName","destroy","enableUndoRedo","undoRedoModule"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-gantt/src/gantt/actions/undo-redo.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nvar UndoRedo = /** @class */ (function () {\n    function UndoRedo(parent) {\n        this.isUndoRedoPerformed = false;\n        this.changedRecords = [];\n        this.getRedoCollection = [];\n        this.getUndoCollection = [];\n        this.redoEnabled = false;\n        this.previousSortedColumns = [];\n        this.searchString = '';\n        this.isFromUndoRedo = false;\n        this.canUpdateIndex = true;\n        this.sortedColumnsLength = 0;\n        this.parent = parent;\n    }\n    /**\n     *Initiates an undo action to revert the most recent change performed.\n     *\n     * @returns {void}\n     * @public\n     */\n    UndoRedo.prototype.undoAction = function () {\n        var _this = this;\n        if (this.getUndoCollection.length > 0) {\n            var updateAction_1 = this.getUndoCollection[this.getUndoCollection.length - 1];\n            var previousActions = {};\n            if (updateAction_1['action'] === 'ZoomIn' || updateAction_1['action'] === 'ZoomOut' || updateAction_1['action'] === 'ZoomToFit') {\n                previousActions['action'] = updateAction_1['action'];\n                previousActions['previousZoomingLevel'] = extend({}, {}, this.parent.currentZoomingLevel, true);\n            }\n            else if (updateAction_1['action'] === 'NextTimeSpan' || updateAction_1['action'] === 'PreviousTimeSpan') {\n                previousActions['action'] = updateAction_1['action'];\n                previousActions['previousTimelineStartDate'] = extend([], [this.parent.timelineModule.timelineStartDate], [], true)[0];\n                previousActions['previousTimelineEndDate'] = extend([], [this.parent.timelineModule.timelineEndDate], [], true)[0];\n            }\n            else if (updateAction_1['action'] === 'Sorting') {\n                previousActions['action'] = 'Sorting';\n                previousActions['sortColumns'] = this.previousSortedColumns;\n            }\n            else if (updateAction_1['action'] === 'Filtering') {\n                previousActions['action'] = 'Filtering';\n                previousActions['filteredColumns'] = updateAction_1['filteredColumns'];\n            }\n            else if (updateAction_1['action'] === 'ColumnReorder') {\n                previousActions['action'] = updateAction_1['action'];\n                previousActions['toColumn'] = updateAction_1['fromColumn'];\n                previousActions['fromColumn'] = updateAction_1['toColumn'];\n                previousActions['fromIndex'] = updateAction_1['toIndex'];\n                previousActions['toIndex'] = updateAction_1['fromIndex'];\n            }\n            else if (updateAction_1['action'] === 'Search') {\n                previousActions['action'] = updateAction_1['action'];\n                previousActions['searchString'] = this.searchString;\n            }\n            else if (updateAction_1['action'] === 'ColumnState') {\n                previousActions['action'] = updateAction_1['action'];\n                previousActions['showhideColumns'] = updateAction_1['showhideColumns'];\n            }\n            else if (updateAction_1['action'] === 'ColumnResize') {\n                previousActions['action'] = updateAction_1['action'];\n                previousActions['resizedColumn'] = __assign({}, this.parent.treeGrid.columns[updateAction_1['resizedColumn'].index]);\n            }\n            else if (updateAction_1['action'] === 'RowDragAndDrop' || updateAction_1['action'] === 'TaskbarDragAndDrop') {\n                var rowItems = [];\n                for (var i = 0; i < updateAction_1['beforeDrop'].length; i++) {\n                    if (this.parent.viewType === 'ProjectView') {\n                        rowItems.push(this.parent.getRecordByID(updateAction_1['beforeDrop'][i]['data'].ganttProperties.taskId));\n                    }\n                    else {\n                        rowItems.push(this.parent.flatData[this.parent.taskIds.indexOf('T' + updateAction_1['beforeDrop'][i]['data'].ganttProperties.taskId.toString())]);\n                    }\n                }\n                previousActions['action'] = updateAction_1['action'];\n                previousActions['beforeDrop'] = [];\n                var previousDetails = {};\n                var dropRecord = extend([], [], [this.parent.getRecordByID(updateAction_1['afterDrop'].dropRecord.ganttProperties.taskId)], true)[0];\n                previousDetails['data'] = [];\n                for (var i = 0; i < updateAction_1['afterDrop'].data.length; i++) {\n                    if (this.parent.viewType === 'ProjectView') {\n                        previousDetails['data'].push(extend([], [], [this.parent.getRecordByID(updateAction_1['afterDrop'].data[i].ganttProperties.taskId)], true)[0]);\n                    }\n                    else {\n                        previousDetails['data'].push(extend([], [], this.parent.flatData[this.parent.taskIds.indexOf('T' + updateAction_1['afterDrop'].data[i].ganttProperties.taskId)], true)[0]);\n                    }\n                }\n                previousDetails['dropRecord'] = extend([], [], [dropRecord], true)[0];\n                previousDetails['dropPosition'] = updateAction_1['afterDrop'].dropPosition;\n                previousActions['afterDrop'] = previousDetails;\n                this['findPosition'](rowItems, previousActions, 'beforeDrop');\n            }\n            else if (updateAction_1['action'] === 'Indent' || updateAction_1['action'] === 'Outdent') {\n                previousActions['selectedRowIndexes'] = updateAction_1['selectedRowIndexes'];\n                previousActions['droppedRecord'] = extend([], [], [this.parent.flatData[this.parent.ids.indexOf(updateAction_1['droppedRecord'].ganttProperties.taskId.toString())]], true)[0];\n                previousActions['modifiedRecord'] = [];\n                this.findPosition(extend([], [], [this.parent.flatData[this.parent.ids.indexOf(updateAction_1['modifiedRecord'][0].data.ganttProperties.taskId.toString())]], true), previousActions, 'modifiedRecord');\n                previousActions['action'] = updateAction_1['action'];\n            }\n            else if (updateAction_1['action'] === 'Delete') {\n                previousActions['action'] = 'Delete';\n                previousActions['deleteRecords'] = [];\n                for (var i = 0; i < updateAction_1['deletedRecordsDetails'].length; i++) {\n                    previousActions['deleteRecords'].push(updateAction_1['deletedRecordsDetails'][i].data);\n                }\n            }\n            else if (updateAction_1['action'] === 'Add') {\n                previousActions['action'] = 'Add';\n                previousActions['deletedRecordsDetails'] = [];\n                var rowItems = updateAction_1['addedRecords'];\n                this.findPosition(rowItems, previousActions, 'deletedRecordsDetails');\n            }\n            else {\n                previousActions['action'] = updateAction_1['action'];\n                previousActions['modifiedRecords'] = [];\n                for (var i = 0; i < updateAction_1['modifiedRecords'].length; i++) {\n                    var index = void 0;\n                    if (this.parent.viewType === 'ProjectView') {\n                        index = this.parent.ids.indexOf(updateAction_1['modifiedRecords'][i].ganttProperties.taskId.toString());\n                    }\n                    else {\n                        if (updateAction_1['modifiedRecords'][i].hasChildRecords) {\n                            index = this.parent.taskIds.indexOf('R' + updateAction_1['modifiedRecords'][i].ganttProperties.taskId);\n                        }\n                        else {\n                            index = this.parent.taskIds.indexOf('T' + updateAction_1['modifiedRecords'][i].ganttProperties.taskId);\n                        }\n                    }\n                    previousActions['modifiedRecords'].push(extend([], [this.parent.flatData[index]], [], true)[0]);\n                }\n            }\n            this.getRedoCollection.push(previousActions);\n            this.isUndoRedoPerformed = true;\n            this.changedRecords = [];\n            this.currentAction = updateAction_1;\n            if (updateAction_1['action'] === 'ZoomIn' || updateAction_1['action'] === 'ZoomOut' || updateAction_1['action'] === 'ZoomToFit') {\n                this.parent.timelineSettings.timelineViewMode = updateAction_1['previousZoomingLevel'].timelineViewMode;\n                this.parent.timelineSettings.timelineUnitSize = updateAction_1['previousZoomingLevel'].timelineUnitSize;\n                this.parent.timelineSettings.updateTimescaleView = updateAction_1['previousZoomingLevel'].updateTimescaleView;\n                this.parent.timelineSettings.topTier.unit = updateAction_1['previousZoomingLevel'].topTier.unit;\n                this.parent.timelineSettings.topTier.count = updateAction_1['previousZoomingLevel'].topTier.count;\n                this.parent.timelineSettings.topTier.format = updateAction_1['previousZoomingLevel'].topTier.format;\n                this.parent.timelineSettings.bottomTier.unit = updateAction_1['previousZoomingLevel'].bottomTier.unit;\n                this.parent.timelineSettings.bottomTier.count = updateAction_1['previousZoomingLevel'].bottomTier.count;\n                this.parent.timelineSettings.bottomTier.format = updateAction_1['previousZoomingLevel'].bottomTier.format;\n                this.parent.timelineSettings.weekStartDay = updateAction_1['previousZoomingLevel'].weekStartDay;\n                this.parent.timelineSettings.weekendBackground = updateAction_1['previousZoomingLevel'].weekendBackground;\n                if (updateAction_1['action'] === 'ZoomToFit') {\n                    this.parent.timelineModule.refreshTimeline();\n                }\n            }\n            else if (updateAction_1['action'] === 'NextTimeSpan' || updateAction_1['action'] === 'PreviousTimeSpan') {\n                this.parent.updateProjectDates(updateAction_1['previousTimelineStartDate'], updateAction_1['previousTimelineEndDate'], false);\n            }\n            else if (updateAction_1['action'] === 'Sorting') {\n                this.isFromUndoRedo = true;\n                this.sortedColumnsLength = 0;\n                if (updateAction_1['sortColumns'].length > 0) {\n                    for (var i = 0; i < updateAction_1['sortColumns'].length; i++) {\n                        this.parent.treeGrid.sortByColumn(updateAction_1['sortColumns'][i]['field'], updateAction_1['sortColumns'][i]['direction']);\n                    }\n                }\n                else {\n                    this.parent.clearSorting();\n                }\n            }\n            else if (updateAction_1['action'] === 'Filtering') {\n                this.isFromUndoRedo = true;\n                for (var i = this.getUndoCollection.length - 1; i >= 0; i--) {\n                    if (this.getUndoCollection[i]['filteredColumns']) {\n                        var columnsArray = [];\n                        for (var j = 0; j < this.getUndoCollection[i]['filteredColumns'].length; j++) {\n                            columnsArray.push(this.getUndoCollection[i]['filteredColumns'][j].field);\n                        }\n                        this.parent.clearFiltering(columnsArray);\n                    }\n                }\n            }\n            else if (updateAction_1['action'] === 'ColumnReorder') {\n                this.isFromUndoRedo = true;\n                var fromColumn = this.parent.treeGrid.columns[updateAction_1['fromIndex']]['field'];\n                var toColumn = this.parent.treeGrid.columns[updateAction_1['toIndex']]['field'];\n                this.parent.reorderColumns(fromColumn, toColumn);\n            }\n            else if (updateAction_1['action'] === 'Search') {\n                this.isFromUndoRedo = true;\n                this.parent.search(updateAction_1['searchString']);\n            }\n            else if (updateAction_1['action'] === 'ColumnState') {\n                this.isFromUndoRedo = true;\n                for (var i = 0; i < updateAction_1['showhideColumns'].length; i++) {\n                    if (updateAction_1['showhideColumns'][i].visible) {\n                        this.parent.hideColumn(updateAction_1['showhideColumns'][i].field, 'field');\n                    }\n                    else {\n                        this.parent.showColumn(updateAction_1['showhideColumns'][i].field, 'field');\n                    }\n                }\n            }\n            else if (updateAction_1['action'] === 'ColumnResize') {\n                this.parent.treeGrid.columns[updateAction_1['resizedColumn'].index]['width'] = updateAction_1['resizedColumn'].width;\n                this.parent.treeGrid.refreshColumns();\n            }\n            else if (updateAction_1['action'] === 'RowDragAndDrop' || updateAction_1['action'] === 'TaskbarDragAndDrop') {\n                for (var i = 0; i < updateAction_1['beforeDrop'].length; i++) {\n                    var fromIndex = void 0;\n                    var toIndex = void 0;\n                    if (this.parent.viewType === 'ProjectView') {\n                        fromIndex = this.parent.ids.indexOf(updateAction_1['beforeDrop'][i].data.ganttProperties.taskId.toString());\n                        toIndex = this.parent.ids.indexOf(updateAction_1['beforeDrop'][i]['id'].toString());\n                    }\n                    else {\n                        fromIndex = this.parent.ids.indexOf('T' + updateAction_1['beforeDrop'][i].data.ganttProperties.taskId.toString());\n                        toIndex = this.parent.taskIds.indexOf(updateAction_1['beforeDrop'][i]['id'].toString());\n                    }\n                    this.parent.reorderRows([fromIndex], toIndex, updateAction_1['beforeDrop'][i].position);\n                    this.parent.updateRecordByID(updateAction_1['beforeDrop'][i].data);\n                    if (updateAction_1['afterDrop'].dropPosition === 'child') {\n                        this.parent.updateRecordByID(updateAction_1['afterDrop'].dropRecord);\n                    }\n                }\n            }\n            else if (updateAction_1['action'] === 'Indent' || updateAction_1['action'] === 'Outdent') {\n                this.parent.selectRow(this.parent.ids.indexOf(updateAction_1['modifiedRecord'][0].data.ganttProperties.taskId.toString()));\n                if (updateAction_1['action'] === 'Indent') {\n                    this.parent.outdent();\n                }\n                else {\n                    this.parent.indent();\n                }\n                setTimeout(function () {\n                    _this.isUndoRedoPerformed = true;\n                    _this.parent.updateRecordByID(updateAction_1['droppedRecord']);\n                    _this.isUndoRedoPerformed = false;\n                });\n            }\n            else if (updateAction_1['action'] === 'Delete') {\n                var rowIndex = void 0;\n                for (var i = 0; i < updateAction_1['deletedRecordsDetails'].length; i++) {\n                    if (this.parent.viewType === 'ProjectView') {\n                        rowIndex = this.parent.ids.indexOf(updateAction_1['deletedRecordsDetails'][i].id.toString());\n                    }\n                    else {\n                        rowIndex = this.parent.taskIds.indexOf(updateAction_1['deletedRecordsDetails'][i].id.toString());\n                    }\n                    var position = void 0;\n                    if (updateAction_1['deletedRecordsDetails'][i].position === 'above') {\n                        position = 'Above';\n                    }\n                    if (updateAction_1['deletedRecordsDetails'][i].position === 'below') {\n                        position = 'Below';\n                    }\n                    if (updateAction_1['deletedRecordsDetails'][i].position === 'child') {\n                        position = 'Child';\n                    }\n                    this.parent.addRecord(updateAction_1['deletedRecordsDetails'][i].data, position, rowIndex);\n                }\n            }\n            else if (updateAction_1['action'] === 'Add') {\n                var isShowDeleteConfirmDialog = extend([], [this.parent.editSettings.showDeleteConfirmDialog], [], true)[0];\n                this.parent.editSettings.showDeleteConfirmDialog = false;\n                var deleteRec = updateAction_1['addedRecords'];\n                if (this.parent.viewType === 'ResourceView' && updateAction_1['addedRecords'].length === 1 && updateAction_1['addedRecords'][0].parentItem) {\n                    var parentRec = this.parent.getTaskByUniqueID(updateAction_1['addedRecords'][0].parentItem.uniqueID);\n                    if (parentRec.childRecords.length === 1 && parentRec.ganttProperties.taskName === 'Unassigned Task') {\n                        deleteRec = parentRec;\n                    }\n                }\n                this.parent.deleteRecord(deleteRec);\n                this.parent.editSettings.showDeleteConfirmDialog = isShowDeleteConfirmDialog;\n            }\n            else {\n                this.parent.updateRecordByID(this.getUndoCollection[this.getUndoCollection.length - 1]['modifiedRecords'][0]);\n                if (updateAction_1['connectedRecords'] && this.parent.viewType === 'ProjectView') {\n                    for (var i = 0; i < updateAction_1['connectedRecords'].length; i++) {\n                        this.parent.updateRecordByID(updateAction_1['connectedRecords'][i]);\n                    }\n                }\n            }\n            var args = {};\n            args = extend([], [], [this.getUndoCollection[this.getUndoCollection.length - 1]], true)[0];\n            args['requestType'] = 'afterUndoAction';\n            this.parent.trigger('onAfterUndo', args);\n            this.isUndoRedoPerformed = false;\n            if (this.getRedoCollection.length > 0) {\n                if (this.parent.toolbarModule) {\n                    this.parent.toolbarModule.enableItems([this.parent.controlId + '_redo'], true);\n                }\n                this.redoEnabled = true;\n            }\n            this.getUndoCollection.splice(this.getUndoCollection.length - 1, 1);\n            if (this.getUndoCollection.length === 0 && this.parent.toolbarModule) {\n                this.parent.toolbarModule.enableItems([this.parent.controlId + '_undo'], false);\n            }\n        }\n        else {\n            this.getUndoCollection.splice(this.getUndoCollection.length - 1, 1);\n            if (this.getUndoCollection.length === 0 && this.parent.toolbarModule) {\n                this.parent.toolbarModule.enableItems([this.parent.controlId + '_undo'], false);\n            }\n        }\n    };\n    /**\n     *Initiates an redo action to reapply the most recent undone change performed.\n     *\n     * @returns {void}\n     * @public\n     */\n    UndoRedo.prototype.redoAction = function () {\n        if (this.getRedoCollection.length > 0) {\n            var updateAction = this.getRedoCollection[this.getRedoCollection.length - 1];\n            var previousActions = {};\n            if (updateAction['action'] === 'ZoomIn' || updateAction['action'] === 'ZoomOut' || updateAction['action'] === 'ZoomToFit') {\n                previousActions['action'] = updateAction['action'];\n                previousActions['previousZoomingLevel'] = extend({}, {}, this.parent.currentZoomingLevel, true);\n            }\n            else if (updateAction['action'] === 'NextTimeSpan' || updateAction['action'] === 'PreviousTimeSpan') {\n                previousActions['action'] = updateAction['action'];\n                previousActions['previousTimelineStartDate'] = extend([], [this.parent.timelineModule.timelineStartDate], [], true)[0];\n                previousActions['previousTimelineEndDate'] = extend([], [this.parent.timelineModule.timelineEndDate], [], true)[0];\n            }\n            else if (updateAction['action'] === 'Sorting') {\n                previousActions['action'] = 'Sorting';\n                previousActions['sortColumns'] = extend([], this.parent.sortSettings.columns, [], true);\n            }\n            else if (updateAction['action'] === 'Filtering') {\n                previousActions['action'] = 'Filtering';\n                previousActions['filteredColumns'] = updateAction['filteredColumns'];\n            }\n            else if (updateAction['action'] === 'ColumnReorder') {\n                previousActions['action'] = updateAction['action'];\n                previousActions['toColumn'] = updateAction['fromColumn'];\n                previousActions['fromColumn'] = updateAction['toColumn'];\n                previousActions['fromIndex'] = updateAction['toIndex'];\n                previousActions['toIndex'] = updateAction['fromIndex'];\n            }\n            else if (updateAction['action'] === 'Search') {\n                previousActions['action'] = updateAction['action'];\n                previousActions['searchString'] = extend([], [this.parent.searchSettings.key], [], true)[0];\n            }\n            else if (updateAction['action'] === 'ColumnState') {\n                previousActions['action'] = updateAction['action'];\n                previousActions['showhideColumns'] = updateAction['showhideColumns'];\n            }\n            else if (updateAction['action'] === 'ColumnResize') {\n                previousActions['action'] = updateAction['action'];\n                previousActions['resizedColumn'] = __assign({}, this.parent.treeGrid.columns[updateAction['resizedColumn'].index]);\n            }\n            else if (updateAction['action'] === 'RowDragAndDrop' || updateAction['action'] === 'TaskbarDragAndDrop') {\n                var rowItems = [];\n                for (var i = 0; i < updateAction['beforeDrop'].length; i++) {\n                    if (this.parent.viewType === 'ProjectView') {\n                        rowItems.push(this.parent.getRecordByID(updateAction['beforeDrop'][i]['data'].ganttProperties.taskId));\n                    }\n                    else {\n                        rowItems.push(this.parent.flatData[this.parent.taskIds.indexOf('T' + updateAction['beforeDrop'][i]['data'].ganttProperties.taskId.toString())]);\n                    }\n                }\n                previousActions['action'] = updateAction['action'];\n                previousActions['beforeDrop'] = [];\n                var previousDetails = {};\n                var dropRecord = void 0;\n                if (updateAction['afterDrop'].dropRecord) {\n                    dropRecord = extend([], [], [this.parent.getRecordByID(updateAction['afterDrop'].dropRecord.ganttProperties.taskId)], true)[0];\n                }\n                previousDetails['data'] = [];\n                for (var i = 0; i < updateAction['afterDrop'].data.length; i++) {\n                    if (this.parent.viewType === 'ProjectView') {\n                        previousDetails['data'].push(extend([], [], [this.parent.getRecordByID(updateAction['afterDrop'].data[i].ganttProperties.taskId)], true)[0]);\n                    }\n                    else {\n                        if (updateAction['afterDrop'].data[i] !== undefined) {\n                            previousDetails['data'].push(extend([], [], this.parent.flatData[this.parent.taskIds.indexOf('T' + updateAction['afterDrop'].data[i].ganttProperties.taskId)], true)[0]);\n                        }\n                    }\n                }\n                previousDetails['dropRecord'] = extend([], [], [dropRecord], true)[0];\n                previousDetails['dropPosition'] = updateAction['afterDrop'].dropPosition;\n                previousActions['afterDrop'] = previousDetails;\n                this['findPosition'](rowItems, previousActions, 'beforeDrop');\n            }\n            else if (updateAction['action'] === 'Indent' || updateAction['action'] === 'Outdent') {\n                previousActions['selectedRowIndexes'] = updateAction['selectedRowIndexes'];\n                previousActions['droppedRecord'] = extend([], [], [this.parent.flatData[this.parent.ids.indexOf(updateAction['droppedRecord'].ganttProperties.taskId.toString())]], true)[0];\n                previousActions['modifiedRecord'] = [];\n                this.findPosition(extend([], [], [this.parent.flatData[this.parent.ids.indexOf(updateAction['modifiedRecord'][0].data.ganttProperties.taskId.toString())]], true), previousActions, 'modifiedRecord');\n                previousActions['action'] = updateAction['action'];\n            }\n            else if (updateAction['action'] === 'Delete') {\n                previousActions['action'] = 'Delete';\n                previousActions['deletedRecordsDetails'] = [];\n                this['findPosition'](extend([], [], updateAction['deleteRecords'], true), previousActions, 'deletedRecordsDetails');\n            }\n            else if (updateAction['action'] === 'Add') {\n                previousActions['action'] = 'Add';\n                previousActions['addedRecords'] = [updateAction['deletedRecordsDetails'][0].data];\n            }\n            else {\n                previousActions['action'] = updateAction['action'];\n                previousActions['modifiedRecords'] = [];\n                for (var i = 0; i < updateAction['modifiedRecords'].length; i++) {\n                    var index = void 0;\n                    if (this.parent.viewType === 'ProjectView') {\n                        index = this.parent.ids.indexOf(updateAction['modifiedRecords'][i].ganttProperties.taskId.toString());\n                    }\n                    else {\n                        if (updateAction['modifiedRecords'][i].hasChildRecords) {\n                            index = this.parent.taskIds.indexOf('R' + updateAction['modifiedRecords'][i].ganttProperties.taskId);\n                        }\n                        else {\n                            index = this.parent.taskIds.indexOf('T' + updateAction['modifiedRecords'][i].ganttProperties.taskId);\n                        }\n                    }\n                    previousActions['modifiedRecords'].push(extend([], [this.parent.flatData[index]], [], true)[0]);\n                }\n            }\n            this.getUndoCollection.push(previousActions);\n            this.isUndoRedoPerformed = true;\n            this.currentAction = updateAction;\n            if (updateAction['action'] === 'ZoomIn' || updateAction['action'] === 'ZoomOut' || updateAction['action'] === 'ZoomToFit') {\n                if (updateAction['action'] === 'ZoomToFit') {\n                    this.parent.fitToProject();\n                }\n                else {\n                    this.parent.timelineSettings.timelineViewMode = updateAction['previousZoomingLevel'].timelineViewMode;\n                    this.parent.timelineSettings.timelineUnitSize = updateAction['previousZoomingLevel'].timelineUnitSize;\n                    this.parent.timelineSettings.updateTimescaleView = updateAction['previousZoomingLevel'].updateTimescaleView;\n                    this.parent.timelineSettings.topTier.unit = updateAction['previousZoomingLevel'].topTier.unit;\n                    this.parent.timelineSettings.topTier.count = updateAction['previousZoomingLevel'].topTier.count;\n                    this.parent.timelineSettings.topTier.format = updateAction['previousZoomingLevel'].topTier.format;\n                    this.parent.timelineSettings.bottomTier.unit = updateAction['previousZoomingLevel'].bottomTier.unit;\n                    this.parent.timelineSettings.bottomTier.count = updateAction['previousZoomingLevel'].bottomTier.count;\n                    this.parent.timelineSettings.bottomTier.format = updateAction['previousZoomingLevel'].bottomTier.format;\n                    this.parent.timelineSettings.weekStartDay = updateAction['previousZoomingLevel'].weekStartDay;\n                    this.parent.timelineSettings.weekendBackground = updateAction['previousZoomingLevel'].weekendBackground;\n                }\n            }\n            else if (updateAction['action'] === 'NextTimeSpan' || updateAction['action'] === 'PreviousTimeSpan') {\n                this.parent.updateProjectDates(updateAction['previousTimelineStartDate'], updateAction['previousTimelineEndDate'], false);\n            }\n            else if (updateAction['action'] === 'Sorting') {\n                this.isFromUndoRedo = true;\n                this.sortedColumnsLength = 0;\n                if (updateAction['sortColumns'].length === 0) {\n                    this.parent.clearSorting();\n                }\n                else {\n                    for (var i = 0; i < updateAction['sortColumns'].length; i++) {\n                        this.parent.treeGrid.sortByColumn(updateAction['sortColumns'][i]['field'], updateAction['sortColumns'][i]['direction'], (updateAction['sortColumns'].length > 1 ? true : false));\n                    }\n                }\n            }\n            else if (updateAction['action'] === 'ColumnState') {\n                this.isFromUndoRedo = true;\n                for (var i = 0; i < updateAction['showhideColumns'].length; i++) {\n                    if (updateAction['showhideColumns'][i].visible) {\n                        this.parent.hideColumn(updateAction['showhideColumns'][i].field, 'field');\n                    }\n                    else {\n                        this.parent.showColumn(updateAction['showhideColumns'][i].field, 'field');\n                    }\n                }\n            }\n            else if (updateAction['action'] === 'Filtering') {\n                for (var j = 0; j < updateAction['filteredColumns'].length; j++) {\n                    this.isFromUndoRedo = true;\n                    this.parent.filterByColumn(updateAction['filteredColumns'][j].field, updateAction['filteredColumns'][j].operator, updateAction['filteredColumns'][j].value, updateAction['filteredColumns'][j].predicate, updateAction['filteredColumns'][j].matchCase, updateAction['filteredColumns'][j].ignoreAccent);\n                }\n            }\n            else if (updateAction['action'] === 'ColumnReorder') {\n                this.isFromUndoRedo = true;\n                var fromColumn = this.parent.treeGrid.columns[updateAction['fromIndex']]['field'];\n                var toColumn = this.parent.treeGrid.columns[updateAction['toIndex']]['field'];\n                this.parent.reorderColumns(fromColumn, toColumn);\n            }\n            else if (updateAction['action'] === 'Search') {\n                this.isFromUndoRedo = true;\n                this.parent.search(updateAction['searchString']);\n            }\n            else if (updateAction['action'] === 'ColumnResize') {\n                this.parent.treeGrid.columns[updateAction['resizedColumn'].index]['width'] = updateAction['resizedColumn'].width;\n                this.parent.treeGrid.refreshColumns();\n            }\n            else if (updateAction['action'] === 'RowDragAndDrop' || updateAction['action'] === 'TaskbarDragAndDrop') {\n                for (var i = 0; i < updateAction['beforeDrop'].length; i++) {\n                    var fromIndex = void 0;\n                    var toIndex = void 0;\n                    if (this.parent.viewType === 'ProjectView') {\n                        fromIndex = this.parent.ids.indexOf(updateAction['beforeDrop'][i].data.ganttProperties.taskId.toString());\n                        toIndex = this.parent.ids.indexOf(updateAction['beforeDrop'][i]['id'].toString());\n                    }\n                    else {\n                        fromIndex = this.parent.ids.indexOf('T' + updateAction['beforeDrop'][i].data.ganttProperties.taskId.toString());\n                        toIndex = this.parent.taskIds.indexOf(updateAction['beforeDrop'][i]['id'].toString());\n                    }\n                    this.parent.reorderRows([fromIndex], toIndex, updateAction['beforeDrop'][i].position);\n                }\n            }\n            else if (updateAction['action'] === 'Indent' || updateAction['action'] === 'Outdent') {\n                this.parent.selectRow(updateAction['selectedRowIndexes'][0]);\n                if (updateAction['action'] === 'Indent') {\n                    this.parent.indent();\n                }\n                if (updateAction['action'] === 'Outdent') {\n                    this.parent.outdent();\n                }\n            }\n            else if (updateAction['action'] === 'Delete') {\n                var isShowDeleteConfirmDialog = extend([], [this.parent.editSettings.showDeleteConfirmDialog], [], true)[0];\n                this.parent.editSettings.showDeleteConfirmDialog = false;\n                this.parent.deleteRecord(updateAction['deleteRecords']);\n                this.parent.editSettings.showDeleteConfirmDialog = isShowDeleteConfirmDialog;\n            }\n            else if (updateAction['action'] === 'Add') {\n                if (this.parent.viewType === 'ResourceView' && updateAction['deletedRecordsDetails'].length > 1) {\n                    this.parent.editModule.addRecord(extend([], [], updateAction['deletedRecordsDetails'], true));\n                }\n                else {\n                    var rowIndex = void 0;\n                    for (var i = 0; i < updateAction['deletedRecordsDetails'].length; i++) {\n                        if (this.parent.viewType === 'ProjectView') {\n                            rowIndex = this.parent.ids.indexOf(updateAction['deletedRecordsDetails'][i].id.toString());\n                        }\n                        else {\n                            rowIndex = this.parent.taskIds.indexOf(updateAction['deletedRecordsDetails'][i].id.toString());\n                        }\n                        var position = void 0;\n                        if (updateAction['deletedRecordsDetails'][i].position === 'above') {\n                            position = 'Above';\n                        }\n                        if (updateAction['deletedRecordsDetails'][i].position === 'below') {\n                            position = 'Below';\n                        }\n                        if (updateAction['deletedRecordsDetails'][i].position === 'child') {\n                            position = 'Child';\n                        }\n                        if (updateAction['deletedRecordsDetails'][i].position === 'bottom') {\n                            position = 'Bottom';\n                        }\n                        this.parent.editModule.addRecord(updateAction['deletedRecordsDetails'][i].data, position, rowIndex);\n                    }\n                }\n            }\n            else {\n                this.parent.updateRecordByID(updateAction['modifiedRecords'][0]);\n            }\n            this.isUndoRedoPerformed = false;\n            if (this.getUndoCollection.length > 0 && this.parent.toolbarModule) {\n                this.parent.toolbarModule.enableItems([this.parent.controlId + '_undo'], true);\n            }\n            this.getRedoCollection.splice(this.getRedoCollection.length - 1, 1);\n            if (this.getRedoCollection.length === 0 && this.parent.toolbarModule) {\n                this.redoEnabled = false;\n                this.parent.toolbarModule.enableItems([this.parent.controlId + '_redo'], false);\n            }\n        }\n    };\n    UndoRedo.prototype.createUndoCollection = function () {\n        if (this.parent['totalUndoAction'] + 1 > this.parent.undoRedoStepsCount && this.getUndoCollection.length === this.parent['totalUndoAction']) {\n            this.getUndoCollection.splice(0, 1);\n            this.disableRedo();\n        }\n        if (this.parent.toolbarModule) {\n            this.parent.toolbarModule.enableItems([this.parent.controlId + '_undo'], true);\n        }\n        if (this.getUndoCollection.length === 0) {\n            this.getUndoCollection[0] = [];\n            if (this.parent['totalUndoAction'] + 1 <= this.parent.undoRedoStepsCount) {\n                this.parent['totalUndoAction']++;\n            }\n        }\n        else if (Object.keys(this['getUndoCollection'][this['getUndoCollection'].length - 1])['length'] > 0) {\n            this.getUndoCollection[this.getUndoCollection.length] = [];\n            if (this.parent['totalUndoAction'] + 1 <= this.parent.undoRedoStepsCount) {\n                this.parent['totalUndoAction']++;\n            }\n        }\n    };\n    UndoRedo.prototype.disableRedo = function () {\n        this.redoEnabled = false;\n        this.getRedoCollection = [];\n        if (this.parent.toolbarModule) {\n            this.parent.toolbarModule.enableItems([this.parent.controlId + '_redo'], false);\n        }\n    };\n    UndoRedo.prototype.findPosition = function (rowItems, records, detail) {\n        var _loop_1 = function (i) {\n            var record = {};\n            record['data'] = rowItems[i];\n            if (this_1.parent.viewType === 'ProjectView') {\n                if (!rowItems[i].hasChildRecords && rowItems[i].parentItem) {\n                    var parentItem = this_1.parent.getRecordByID(rowItems[i].parentItem.taskId);\n                    if (parentItem.childRecords.length > 1) {\n                        var recIndex = this_1.parent.ids.indexOf(rowItems[i].ganttProperties.taskId.toString());\n                        var previousRecord = this_1.parent.flatData[recIndex - 1];\n                        if (previousRecord.parentItem &&\n                            previousRecord.parentItem.taskId.toString() === parentItem.ganttProperties.taskId.toString()) {\n                            record['position'] = 'below';\n                            record['id'] = extend([], [this_1.parent.flatData[this_1.parent.ids.indexOf(rowItems[i].ganttProperties.taskId.toString()) - 1].ganttProperties.taskId], [], true)[0];\n                        }\n                        else {\n                            record['position'] = 'above';\n                            var currentData = this_1.parent.flatData[this_1.parent.ids.indexOf(rowItems[i].ganttProperties.taskId.toString()) + 1];\n                            var index = this_1.parent.ids.indexOf(rowItems[i].ganttProperties.taskId.toString()) + 1;\n                            var rowIndex = i;\n                            do {\n                                var rowData = rowItems[rowIndex + 1];\n                                if (!rowData ||\n                                    (rowData && currentData.ganttProperties.taskId.toString() !==\n                                        rowData.ganttProperties.taskId.toString())) {\n                                    if (currentData && currentData.parentItem) {\n                                        record['id'] = extend([], [currentData.ganttProperties.taskId], [], true)[0];\n                                    }\n                                    else {\n                                        record['id'] = extend([], [rowItems[i].parentItem.taskId], [], true)[0];\n                                        record['position'] = 'child';\n                                    }\n                                }\n                                else {\n                                    rowIndex++;\n                                    index++;\n                                    currentData = this_1.parent.flatData[index];\n                                }\n                            } while (!record['id']);\n                        }\n                    }\n                    else {\n                        record['position'] = 'child';\n                        record['id'] = extend([], [parentItem.ganttProperties.taskId], [], true)[0];\n                    }\n                }\n                else if (!rowItems[i].hasChildRecords && !rowItems[i].parentItem) {\n                    if (this_1.parent.ids.indexOf(rowItems[i].ganttProperties.taskId.toString()) === this_1.parent.ids.length - 1) {\n                        record['position'] = 'below';\n                    }\n                    else {\n                        record['position'] = 'above';\n                    }\n                    var parentIndex = void 0;\n                    var currentData = void 0;\n                    var prevInd = void 0;\n                    for (var k = 0; k < this_1.parent.treeGrid.parentData.length; k++) {\n                        if (this_1.parent.treeGrid.parentData[k]['ganttProperties'].taskId.toString() === rowItems[i].ganttProperties.taskId.toString()) {\n                            parentIndex = k;\n                            currentData = this_1.parent.treeGrid.parentData[k + 1];\n                            prevInd = k + 1;\n                            break;\n                        }\n                    }\n                    var rowIndex = i;\n                    do {\n                        var rowData = rowItems[rowIndex + 1];\n                        if (!rowData || (rowData && currentData['ganttProperties'].taskId.toString() !== rowData.ganttProperties.taskId.toString())) {\n                            if (currentData) {\n                                record['id'] = extend([], [currentData['ganttProperties'].taskId], [], true)[0];\n                            }\n                            else {\n                                currentData = this_1.parent.treeGrid.parentData[parentIndex - 1];\n                                if (!currentData) {\n                                    currentData = this_1.parent.treeGrid.parentData[parentIndex];\n                                }\n                                record['id'] = extend([], [currentData['ganttProperties'].taskId], [], true)[0];\n                            }\n                        }\n                        else {\n                            rowIndex++;\n                            prevInd++;\n                            currentData = this_1.parent.treeGrid.parentData[prevInd];\n                        }\n                    } while (!record['id']);\n                }\n                else if (rowItems[i].hasChildRecords && !rowItems[i].parentItem) {\n                    var parentIndex = void 0;\n                    var currentData = void 0;\n                    var prevInd = void 0;\n                    for (var k = 0; k < this_1.parent.treeGrid.parentData.length; k++) {\n                        if (this_1.parent.treeGrid.parentData[k]['ganttProperties'].taskId.toString() === rowItems[i].ganttProperties.taskId.toString()) {\n                            parentIndex = k;\n                            currentData = this_1.parent.treeGrid.parentData[k + 1];\n                            prevInd = k + 1;\n                            break;\n                        }\n                    }\n                    if (parentIndex !== -1) {\n                        if (parentIndex === 0) {\n                            record['position'] = 'above';\n                            var rowIndex = i;\n                            do {\n                                var rowData = rowItems[rowIndex + 1];\n                                if (!rowData || (rowData && currentData['ganttProperties'].taskId.toString() !== rowData.ganttProperties.taskId.toString())) {\n                                    if (!currentData) {\n                                        currentData = this_1.parent.treeGrid.parentData[parentIndex];\n                                    }\n                                    record['id'] = extend([], [currentData['ganttProperties'].taskId], [], true)[0];\n                                }\n                                else {\n                                    rowIndex++;\n                                    prevInd++;\n                                    currentData = this_1.parent.treeGrid.parentData[prevInd];\n                                }\n                            } while (!record['id']);\n                        }\n                        else {\n                            record['position'] = 'below';\n                            record['id'] = extend([], [this_1.parent.treeGrid.parentData[parentIndex - 1].ganttProperties.taskId], [], true)[0];\n                        }\n                    }\n                }\n                else if (rowItems[i].hasChildRecords && rowItems[i].parentItem) {\n                    var parentItem = this_1.parent.getRecordByID(rowItems[i].parentItem.taskId);\n                    if (parentItem.childRecords.length === 1) {\n                        record['position'] = 'child';\n                        record['id'] = extend([], [rowItems[i].parentItem.taskId], [], true)[0];\n                    }\n                    else {\n                        var childIndex = void 0;\n                        for (var k = 0; k < parentItem.childRecords.length; k++) {\n                            if (parentItem.childRecords[i].ganttProperties.taskId.toString() ===\n                                rowItems[i].ganttProperties.taskId.toString()) {\n                                childIndex = k;\n                                break;\n                            }\n                        }\n                        if (!isNullOrUndefined(childIndex)) {\n                            if (childIndex === 0) {\n                                record['position'] = 'above';\n                                record['id'] = extend([], [parentItem.childRecords[childIndex + 1].ganttProperties.taskId], [], true)[0];\n                            }\n                            else {\n                                record['position'] = 'below';\n                                record['id'] = extend([], [parentItem.childRecords[childIndex - 1].ganttProperties.taskId], [], true)[0];\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                if (rowItems[i].parentItem) {\n                    var parentRecord = void 0;\n                    if (rowItems[i].parentItem.index) {\n                        parentRecord = this_1.parent.flatData[rowItems[i].parentItem.index];\n                    }\n                    else {\n                        parentRecord = this_1.parent.flatData[this_1.parent.ids.indexOf(rowItems[i].parentItem.taskId)];\n                    }\n                    if (parentRecord.childRecords.length === 1) {\n                        record['position'] = 'bottom';\n                        record['id'] = 'R' + parentRecord.ganttProperties.taskId;\n                        if (detail === 'deletedIndexes') {\n                            record['position'] = 'child';\n                            record['index'] = parentRecord.index;\n                        }\n                    }\n                    else {\n                        var currentIndex = void 0;\n                        for (var j = 0; j < parentRecord.childRecords.length; j++) {\n                            if (parentRecord.childRecords[j].ganttProperties.taskId.toString() ===\n                                rowItems[i].ganttProperties.taskId.toString()) {\n                                currentIndex = j;\n                                break;\n                            }\n                        }\n                        var previousRecord = parentRecord.childRecords[currentIndex - 1];\n                        if (previousRecord && previousRecord.parentItem && previousRecord.parentUniqueID === parentRecord.uniqueID) {\n                            record['position'] = 'below';\n                            record['id'] = extend([], ['T' + this_1.parent.flatData[this_1.parent.taskIds.indexOf('T' + rowItems[i].ganttProperties.taskId.toString()) - 1].ganttProperties.taskId], [], true)[0];\n                            if (detail === 'deletedIndexes') {\n                                record['index'] = this_1.parent.taskIds.indexOf('T' + rowItems[i].ganttProperties.taskId.toString()) - 1;\n                            }\n                        }\n                        else {\n                            var index = void 0;\n                            if (currentIndex !== parentRecord.childRecords.length - 1) {\n                                record['position'] = 'above';\n                                if (currentIndex === 0 && parentRecord.childRecords[1]) {\n                                    index = parentRecord.childRecords[1].index;\n                                }\n                                else if (parentRecord.childRecords[currentIndex - 1]) {\n                                    index = parentRecord.childRecords[currentIndex - 1].index;\n                                }\n                                var currentData = this_1.parent.flatData[index];\n                                var recIndex = index;\n                                var rowIndex = i;\n                                do {\n                                    var rowData = rowItems[rowIndex + 1];\n                                    if (!rowData ||\n                                        (rowData && currentData.ganttProperties.taskId.toString() !==\n                                            rowData.ganttProperties.taskId.toString())) {\n                                        if (currentData.parentItem) {\n                                            record['id'] = extend([], ['T' + currentData.ganttProperties.taskId], [], true)[0];\n                                            if (detail === 'deletedIndexes') {\n                                                record['index'] = extend([], [currentData.index], [], true)[0];\n                                                if (currentIndex === 0 && parentRecord.childRecords[1].ganttProperties.taskId ===\n                                                    currentData.ganttProperties.taskId) {\n                                                    record['index'] = record['index'] - 1;\n                                                }\n                                            }\n                                        }\n                                        else {\n                                            record['id'] = extend([], ['R' + rowItems[i].parentItem.taskId], [], true)[0];\n                                            record['position'] = 'child';\n                                            if (detail === 'deletedIndexes') {\n                                                record['index'] = rowItems[i].parentItem.index;\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        rowIndex++;\n                                        recIndex++;\n                                        currentData = this_1.parent.flatData[recIndex];\n                                    }\n                                } while (!record['id']);\n                            }\n                            else {\n                                if (currentIndex === parentRecord.childRecords.length - 1) {\n                                    record['position'] = 'below';\n                                }\n                                else {\n                                    record['position'] = 'above';\n                                }\n                                record['id'] = 'T' + parentRecord.childRecords[currentIndex - 1].ganttProperties.taskId;\n                                if (detail === 'deletedIndexes') {\n                                    record['index'] = parentRecord.childRecords[currentIndex - 1].index;\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    var parentData = this_1.parent.treeGrid.parentData.filter(function (parentData) {\n                        return parentData.ganttProperties.taskId === rowItems[i].ganttProperties.taskId;\n                    })[0];\n                    var parentDataIndex = this_1.parent.treeGrid.parentData.indexOf(parentData);\n                    if (parentDataIndex === 0) {\n                        record['position'] = 'above';\n                        var currentData = void 0;\n                        var prevInd = void 0;\n                        for (var k = 0; k < this_1.parent.treeGrid.parentData.length; k++) {\n                            if (this_1.parent.treeGrid.parentData[k]['ganttProperties'].taskId === rowItems[i].ganttProperties.taskId) {\n                                currentData = this_1.parent.treeGrid.parentData[k + 1];\n                                prevInd = k + 1;\n                                break;\n                            }\n                        }\n                        var rowIndex = i;\n                        do {\n                            var rowData = rowItems[rowIndex + 1];\n                            if (!rowData || (rowData && currentData['ganttProperties'].taskId !== rowData.ganttProperties.taskId)) {\n                                record['id'] = 'R' + currentData['ganttProperties'].taskId;\n                                if (detail === 'deletedIndexes') {\n                                    record['index'] = currentData['index'];\n                                }\n                            }\n                            else {\n                                rowIndex++;\n                                prevInd++;\n                                currentData = this_1.parent.treeGrid.parentData[prevInd];\n                            }\n                        } while (!record['id']);\n                    }\n                    else {\n                        record['position'] = 'below';\n                        record['id'] = 'R' + this_1.parent.treeGrid.parentData[parentDataIndex - 1]['ganttProperties']['taskId'];\n                        if (detail === 'deletedIndexes') {\n                            record['index'] = this_1.parent.treeGrid.parentData[parentDataIndex - 1]['index'];\n                        }\n                    }\n                }\n            }\n            if (detail === 'deletedIndexes') {\n                var parent_1 = this_1.parent.getTaskByUniqueID(record['data'].parentUniqueID);\n                if (this_1.parent.editModule.dialogModule.ganttResources.length === 0 && records[detail].indexOf(record) === -1) {\n                    records[detail].push(record);\n                }\n                else {\n                    for (var j = 0; j < this_1.parent.editModule.dialogModule.ganttResources.length; j++) {\n                        if (this_1.parent.editModule.dialogModule.ganttResources[j][this_1.parent.resourceFields.id] !==\n                            parent_1.ganttProperties.taskId && records[detail].indexOf(record) === -1) {\n                            records[detail].push(record);\n                        }\n                    }\n                }\n            }\n            else {\n                records[detail].push(record);\n            }\n        };\n        var this_1 = this;\n        for (var i = 0; i < rowItems.length; i++) {\n            _loop_1(i);\n        }\n    };\n    UndoRedo.prototype.getModuleName = function () {\n        return 'undoRedo';\n    };\n    /**\n     * Destroys the UndoRedo of Gantt.\n     *\n     * @returns {void} .\n     * @private\n     */\n    UndoRedo.prototype.destroy = function () {\n        if (!this.parent.enableUndoRedo && this.parent.undoRedoModule) {\n            this.parent.undoRedoModule = undefined;\n        }\n    };\n    return UndoRedo;\n}());\nexport { UndoRedo };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}