{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.every.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport * as events from '../base/constant';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { RadioButton } from '@syncfusion/ej2-buttons';\nimport { isNullOrUndefined as isNOU, isNullOrUndefined, detach, extend, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { getUniqueID, Browser, closest } from '@syncfusion/ej2-base';\nimport { CLS_RTE_PASTE_KEEP_FORMAT, CLS_RTE_PASTE_REMOVE_FORMAT, CLS_RTE_PASTE_PLAIN_FORMAT } from '../base/classes';\nimport { CLS_RTE_PASTE_OK, CLS_RTE_PASTE_CANCEL, CLS_RTE_DIALOG_MIN_HEIGHT } from '../base/classes';\nimport { pasteCleanupGroupingTags } from '../../common/config';\nimport { NodeSelection } from '../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { RenderType, ImageInputSource } from '../base/enum';\nimport { Uploader } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { sanitizeHelper, convertToBlob } from '../base/util';\nimport { scrollToCursor } from '../../common/util';\n/**\n * PasteCleanup module called when pasting content in RichTextEditor\n */\nvar PasteCleanup = /** @class */function () {\n  function PasteCleanup(parent, serviceLocator) {\n    this.inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button', 'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress', 'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'sub', 'sup', 'svg', 'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n    this.blockNode = ['div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'address', 'blockquote', 'button', 'center', 'dd', 'dir', 'dl', 'dt', 'fieldset', 'frameset', 'hr', 'iframe', 'isindex', 'li', 'map', 'menu', 'noframes', 'noscript', 'object', 'ol', 'pre', 'td', 'tr', 'th', 'tbody', 'tfoot', 'thead', 'table', 'ul', 'header', 'article', 'nav', 'footer', 'section', 'aside', 'main', 'figure', 'figcaption'];\n    this.isNotFromHtml = false;\n    this.containsHtml = false;\n    this.cropImageData = [];\n    this.parent = parent;\n    this.locator = serviceLocator;\n    this.renderFactory = this.locator.getService('rendererFactory');\n    this.i10n = serviceLocator.getService('rteLocale');\n    this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n    this.addEventListener();\n    this.isDestroyed = false;\n  }\n  PasteCleanup.prototype.addEventListener = function () {\n    this.nodeSelectionObj = new NodeSelection(this.parent.inputElement);\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.pasteClean, this.pasteClean, this);\n    this.parent.on(events.bindCssClass, this.setCssClass, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.docClick, this.docClick, this);\n  };\n  PasteCleanup.prototype.destroy = function () {\n    if (this.isDestroyed) {\n      return;\n    }\n    if (this.fireFoxUploadTime) {\n      clearTimeout(this.fireFoxUploadTime);\n      this.fireFoxUploadTime = null;\n    }\n    if (this.refreshPopupTime) {\n      clearTimeout(this.refreshPopupTime);\n      this.refreshPopupTime = null;\n    }\n    if (this.popupCloseTime) {\n      clearTimeout(this.popupCloseTime);\n      this.popupCloseTime = null;\n    }\n    if (this.failureTime) {\n      clearTimeout(this.failureTime);\n      this.failureTime = null;\n    }\n    if (this.iframeUploadTime) {\n      clearTimeout(this.iframeUploadTime);\n      this.iframeUploadTime = null;\n    }\n    this.removeEventListener();\n    if (this.popupObj && !this.popupObj.isDestroyed) {\n      this.popupObj.destroy();\n      this.popupObj = null;\n    }\n    if (this.uploadObj && !this.uploadObj.isDestroyed) {\n      this.uploadObj.destroy();\n      this.uploadObj = null;\n    }\n    if (this.keepRadioButton && !this.keepRadioButton.isDestroyed) {\n      this.keepRadioButton.destroy();\n      this.keepRadioButton = null;\n    }\n    if (this.cleanRadioButton && !this.cleanRadioButton.isDestroyed) {\n      this.cleanRadioButton.destroy();\n      this.cleanRadioButton = null;\n    }\n    if (this.plainTextRadioButton && !this.plainTextRadioButton.isDestroyed) {\n      this.plainTextRadioButton.destroy();\n      this.plainTextRadioButton = null;\n    }\n    this.isDestroyed = true;\n  };\n  PasteCleanup.prototype.removeEventListener = function () {\n    this.parent.off(events.pasteClean, this.pasteClean);\n    this.parent.off(events.bindCssClass, this.setCssClass);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.docClick, this.docClick);\n  };\n  PasteCleanup.prototype.pasteClean = function (e) {\n    var _this = this;\n    var args = {\n      requestType: 'Paste',\n      editorMode: this.parent.editorMode,\n      event: e\n    };\n    var value = null;\n    var isClipboardHTMLDataNull = false;\n    var imageproperties;\n    var allowedTypes = this.parent.insertImageSettings.allowedTypes;\n    if (e.args && !isNOU(e.args.clipboardData)) {\n      value = e.args.clipboardData.getData('text/html');\n    }\n    if (e.args && value !== null && this.parent.editorMode === 'HTML') {\n      var file = void 0;\n      if (value.length === 0) {\n        var htmlRegex = new RegExp(/<\\/[a-z][\\s\\S]*>/i);\n        value = e.args.clipboardData.getData('text/plain');\n        this.parent.trigger(events.beforePasteCleanup, {\n          value: value\n        });\n        this.isNotFromHtml = value !== '' ? true : false;\n        value = value.replace(/</g, '&lt;');\n        value = value.replace(/>/g, '&gt;');\n        this.containsHtml = htmlRegex.test(value);\n        file = e && e.args.clipboardData && e.args.clipboardData.items.length > 0 ? e.args.clipboardData.items[0].getAsFile() === null ? !isNOU(e.args.clipboardData.items[1]) ? e.args.clipboardData.items[1].getAsFile() : null : e.args.clipboardData.items[0].getAsFile() : null;\n        if (file) {\n          var fileNameParts = file.name;\n          var imgType_1 = fileNameParts.substring(fileNameParts.lastIndexOf('.'));\n          if (allowedTypes.every(function (type) {\n            return type.toLowerCase() !== imgType_1;\n          })) {\n            e.args.preventDefault();\n            return;\n          }\n        }\n        this.parent.notify(events.paste, {\n          file: file,\n          args: e.args,\n          text: value,\n          callBack: function (b) {\n            imageproperties = b;\n            if (typeof imageproperties === 'object') {\n              _this.parent.formatter.editorManager.execCommand('Images', 'Image', e.args, _this.imageFormatting.bind(_this, args), 'pasteCleanup', imageproperties, 'pasteCleanupModule');\n            } else {\n              value = imageproperties;\n            }\n          }\n        });\n        if (!htmlRegex.test(value)) {\n          var divElement = this.parent.createElement('div');\n          divElement.innerHTML = this.splitBreakLine(value);\n          value = divElement.innerHTML;\n          isClipboardHTMLDataNull = true;\n        }\n      } else if (value.length > 0) {\n        this.parent.trigger(events.beforePasteCleanup, {\n          value: value\n        });\n        this.parent.formatter.editorManager.observer.notify(EVENTS.MS_WORD_CLEANUP, {\n          args: e.args,\n          text: e.text,\n          allowedStylePropertiesArray: this.parent.pasteCleanupSettings.allowedStyleProps,\n          callBack: function (a, cropImageData, pasteTableSource) {\n            args.pasteTableSource = pasteTableSource;\n            value = a.trim();\n            _this.cropImageData = cropImageData;\n          }\n        });\n      }\n      this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n      var currentDocument = this.contentRenderer.getDocument();\n      var range = this.nodeSelectionObj.getRange(currentDocument);\n      this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n      var tempDivElem = this.parent.createElement('div');\n      tempDivElem.innerHTML = value;\n      var unsupportedImg = tempDivElem.querySelectorAll('.e-rte-image-unsupported');\n      for (var index = 0; index < unsupportedImg.length; index++) {\n        unsupportedImg[index].setAttribute('alt', this.i10n.getConstant('unsupportedImage'));\n        unsupportedImg[index].classList.remove('e-rte-image-unsupported');\n      }\n      value = tempDivElem.innerHTML;\n      var isValueNotEmpty = tempDivElem.textContent !== '' || !isNOU(tempDivElem.querySelector('img')) || !isNOU(tempDivElem.querySelector('table'));\n      var imgElements = tempDivElem.querySelectorAll('img');\n      imgElements.forEach(function (imgElement) {\n        var imageFileFormat;\n        var imgElementSrc = imgElement.getAttribute('src');\n        if (!isNullOrUndefined(imgElementSrc) && imgElementSrc !== '') {\n          if (!isNullOrUndefined(imgElement.getAttribute('data-image-type'))) {\n            imageFileFormat = imgElement.getAttribute('data-image-type');\n          } else if (imgElementSrc.indexOf('base64') > -1 && imgElementSrc.indexOf('data:') > -1) {\n            imageFileFormat = imgElementSrc.split(';')[0].split('/')[1];\n          } else {\n            imageFileFormat = imgElementSrc.split('.').pop().toLowerCase();\n          }\n          if (!isNullOrUndefined(imageFileFormat) && allowedTypes.every(function (type) {\n            return imageFileFormat !== type.substring(1).toLowerCase();\n          }) && imgElementSrc.indexOf('blob') === -1) {\n            detach(imgElement);\n          }\n        }\n      });\n      value = tempDivElem.innerHTML;\n      this.parent.notify(events.cleanupResizeElements, {\n        value: value,\n        callBack: function (currentValue) {\n          value = currentValue;\n        }\n      });\n      if (this.parent.pasteCleanupSettings.prompt) {\n        if (isValueNotEmpty) {\n          e.args.preventDefault();\n          this.pasteDialog(value, args, isClipboardHTMLDataNull);\n        }\n      } else if (this.parent.pasteCleanupSettings.plainText) {\n        e.args.preventDefault();\n        this.plainFormatting(value, args, isClipboardHTMLDataNull);\n      } else if (this.parent.pasteCleanupSettings.keepFormat) {\n        e.args.preventDefault();\n        this.formatting(value, false, args);\n      } else {\n        e.args.preventDefault();\n        this.formatting(value, true, args);\n      }\n    }\n  };\n  PasteCleanup.prototype.splitBreakLine = function (value) {\n    var enterSplitText = value.split('\\r\\n\\r\\n');\n    var finalText = '';\n    var startNode = this.parent.enterKey === 'P' ? '<p>' : this.parent.enterKey === 'DIV' ? '<div>' : '';\n    var endNode = this.parent.enterKey === 'P' ? '</p>' : this.parent.enterKey === 'DIV' ? '</div>' : '<br>';\n    for (var i = 0; i < enterSplitText.length; i++) {\n      var content = enterSplitText[i];\n      var contentWithSpace = this.makeSpace(content);\n      var contentWithLineBreak = contentWithSpace.replace(/\\r\\n|\\n/g, '<br>');\n      if (i === 0) {\n        if (this.parent.enterKey === 'BR') {\n          finalText += contentWithLineBreak + endNode;\n        } else {\n          finalText += contentWithLineBreak; // In order to merge the content in current line. No P/Div tag is added.\n        }\n      } else {\n        if (this.parent.enterKey === 'BR') {\n          if (i === enterSplitText.length - 1) {\n            finalText += contentWithLineBreak + endNode;\n          } else {\n            finalText += contentWithLineBreak + endNode + endNode;\n          }\n        } else {\n          finalText += startNode + contentWithLineBreak + endNode;\n        }\n      }\n    }\n    return finalText;\n  };\n  PasteCleanup.prototype.makeSpace = function (text) {\n    var spacedContent = '';\n    if (text === '') {\n      return text;\n    }\n    var lineBreakSplitText = text.split(' ');\n    for (var i = 0; i < lineBreakSplitText.length; i++) {\n      var currentText = lineBreakSplitText[i];\n      if (currentText === '') {\n        spacedContent += '&nbsp;';\n      } else if (currentText === '\\t') {\n        spacedContent += '&nbsp;&nbsp;&nbsp;&nbsp;';\n      } else {\n        if (i > 0 && i < lineBreakSplitText.length) {\n          spacedContent += ' ';\n        }\n        spacedContent += currentText;\n      }\n    }\n    spacedContent = spacedContent.replace(/\\t/g, '&nbsp;&nbsp;&nbsp;&nbsp;');\n    spacedContent = spacedContent.replace(/&nbsp;&nbsp;/g, '&nbsp; ');\n    return spacedContent;\n  };\n  PasteCleanup.prototype.imgUploading = function (elm) {\n    var allImgElm = elm.querySelectorAll('.pasteContent_Img');\n    if (this.parent.insertImageSettings.saveUrl && allImgElm.length > 0) {\n      var base64Src = [];\n      var imgName = [];\n      var uploadImg = [];\n      for (var i = 0; i < allImgElm.length; i++) {\n        if (!isNOU(allImgElm[i].getAttribute('src')) && allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n          base64Src.push(allImgElm[i].getAttribute('src'));\n          imgName.push(getUniqueID('rte_image'));\n          uploadImg.push(allImgElm[i]);\n        }\n      }\n      var fileList = [];\n      for (var i = 0; i < base64Src.length; i++) {\n        fileList.push(this.base64ToFile(base64Src[i], imgName[i]));\n      }\n      for (var i = 0; i < fileList.length; i++) {\n        this.uploadMethod(fileList[i], uploadImg[i]);\n      }\n      if (isNOU(this.parent.insertImageSettings.path) && this.parent.insertImageSettings.saveFormat === 'Blob') {\n        this.getBlob(allImgElm);\n      }\n    } else if (this.parent.insertImageSettings.saveFormat === 'Blob') {\n      this.getBlob(allImgElm);\n    }\n    var allImgElmId = elm.querySelectorAll('.pasteContent_Img');\n    for (var i = 0; i < allImgElmId.length; i++) {\n      allImgElmId[i].classList.remove('pasteContent_Img');\n      if (allImgElmId[i].getAttribute('class').trim() === '') {\n        allImgElm[i].removeAttribute('class');\n      }\n    }\n  };\n  PasteCleanup.prototype.getBlob = function (allImgElm) {\n    for (var i = 0; i < allImgElm.length; i++) {\n      if (!isNOU(allImgElm[i].getAttribute('src')) && allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n        var blopUrl = URL.createObjectURL(convertToBlob(allImgElm[i].getAttribute('src')));\n        allImgElm[i].setAttribute('src', blopUrl);\n      }\n    }\n  };\n  PasteCleanup.prototype.toolbarEnableDisable = function (state) {\n    if (!this.parent.inlineMode.enable) {\n      this.parent.toolbarModule.baseToolbar.toolbarObj.disable(state);\n    }\n  };\n  PasteCleanup.prototype.uploadMethod = function (file, imgElem) {\n    var _this = this;\n    imgElem.style.opacity = '0.5';\n    var popupEle = this.parent.createElement('div');\n    this.parent.rootContainer.appendChild(popupEle);\n    var contentEle = this.parent.createElement('input', {\n      id: this.parent.getID() + '_upload',\n      attrs: {\n        type: 'File',\n        name: 'UploadFiles'\n      }\n    });\n    var offsetY = this.parent.iframeSettings.enable ? -50 : -90;\n    this.popupObj = new Popup(popupEle, {\n      relateTo: imgElem,\n      height: '85px',\n      width: '300px',\n      offsetY: offsetY,\n      content: contentEle,\n      viewPortElement: this.parent.element,\n      position: {\n        X: 'center',\n        Y: 'top'\n      },\n      enableRtl: this.parent.enableRtl,\n      zIndex: 10001,\n      // eslint-disable-next-line\n      close: function (event) {\n        _this.parent.isBlur = false;\n        _this.popupObj.destroy();\n        detach(_this.popupObj.element);\n      }\n    });\n    this.popupObj.element.style.display = 'none';\n    addClass([this.popupObj.element], [classes.CLS_POPUP_OPEN, classes.CLS_RTE_UPLOAD_POPUP]);\n    if (!isNOU(this.parent.cssClass)) {\n      addClass([this.popupObj.element], this.parent.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n    }\n    var timeOut = file.size > 1000000 ? 300 : 100;\n    this.refreshPopupTime = setTimeout(function () {\n      _this.refreshPopup(imgElem, _this.popupObj);\n    }, timeOut);\n    this.uploadObj = new Uploader({\n      asyncSettings: {\n        saveUrl: this.parent.insertImageSettings.saveUrl,\n        removeUrl: this.parent.insertImageSettings.removeUrl\n      },\n      cssClass: classes.CLS_RTE_DIALOG_UPLOAD,\n      dropArea: this.parent.inputElement,\n      allowedExtensions: this.parent.insertImageSettings.allowedTypes.toString(),\n      success: function (e) {\n        _this.popupClose(_this.popupObj, _this.uploadObj, imgElem, e);\n      },\n      uploading: function (e) {\n        if (!_this.parent.isServerRendered) {\n          _this.parent.trigger(events.imageUploading, e, function (imageUploadingArgs) {\n            if (imageUploadingArgs.cancel) {\n              if (!isNullOrUndefined(imgElem)) {\n                detach(imgElem);\n              }\n              if (!isNullOrUndefined(_this.popupObj.element)) {\n                detach(_this.popupObj.element);\n              }\n            } else {\n              _this.parent.inputElement.contentEditable = 'false';\n            }\n          });\n        }\n      },\n      beforeUpload: function (args) {\n        _this.parent.trigger(events.beforeImageUpload, args);\n        _this.toolbarEnableDisable(true);\n      },\n      failure: function (e) {\n        _this.failureTime = setTimeout(function () {\n          _this.uploadFailure(imgElem, _this.uploadObj, _this.popupObj, e);\n        }, 900);\n      },\n      canceling: function () {\n        _this.parent.inputElement.contentEditable = 'true';\n        if (imgElem.nextSibling.textContent === ' ') {\n          detach(imgElem.nextSibling);\n        }\n        detach(imgElem);\n        _this.popupObj.close();\n      },\n      selected: function (e) {\n        e.cancel = true;\n      },\n      removing: function () {\n        _this.parent.inputElement.contentEditable = 'true';\n        if (imgElem.nextSibling.textContent === ' ') {\n          detach(imgElem.nextSibling);\n        }\n        detach(imgElem);\n        _this.popupObj.close();\n      }\n    });\n    this.uploadObj.appendTo(this.popupObj.element.childNodes[0]);\n    var fileInfo = [{\n      name: file.name,\n      rawFile: file,\n      size: file.size,\n      type: file.type,\n      status: 'Ready to Upload',\n      validationMessages: {\n        minSize: '',\n        maxSize: ''\n      },\n      statusCode: '1'\n    }];\n    this.uploadObj.createFileList(fileInfo);\n    this.uploadObj.upload(fileInfo);\n    this.popupObj.element.getElementsByClassName('e-file-select-wrap')[0].style.display = 'none';\n    detach(this.popupObj.element.querySelector('.e-rte-dialog-upload .e-file-select-wrap'));\n  };\n  PasteCleanup.prototype.uploadFailure = function (imgElem, uploadObj, popupObj, e) {\n    if (this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.inputElement.contentEditable = 'true';\n    detach(imgElem);\n    if (popupObj) {\n      popupObj.close();\n    }\n    this.parent.trigger(events.imageUploadFailed, e);\n    if (uploadObj && document.body.contains(uploadObj.element)) {\n      uploadObj.destroy();\n    }\n  };\n  PasteCleanup.prototype.popupClose = function (popupObj, uploadObj, imgElem, e) {\n    var _this = this;\n    this.parent.inputElement.contentEditable = 'true';\n    e.element = imgElem;\n    e.detectImageSource = ImageInputSource.Pasted;\n    var element = e.file;\n    if (element.statusCode === '2') {\n      this.parent.trigger(events.imageUploadSuccess, e, function (e) {\n        if (!isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n          var url = _this.parent.insertImageSettings.path + e.file.name;\n          imgElem.src = url;\n          imgElem.setAttribute('alt', e.file.name);\n        }\n      });\n    } else if (element.statusCode === '5') {\n      this.parent.trigger(events.imageRemoving, e, function (e) {\n        if (!isNullOrUndefined(e.element.src)) {\n          e.element.src = '';\n        }\n      });\n    }\n    this.popupCloseTime = setTimeout(function () {\n      popupObj.close();\n      imgElem.style.opacity = '1';\n      _this.toolbarEnableDisable(false);\n      if (uploadObj && document.body.contains(uploadObj.element)) {\n        uploadObj.destroy();\n      }\n    }, 1500);\n  };\n  PasteCleanup.prototype.refreshPopup = function (imageElement, popupObj) {\n    var imgPosition = this.parent.iframeSettings.enable ? this.parent.element.offsetTop + imageElement.offsetTop : imageElement.offsetTop;\n    var rtePosition = this.parent.element.offsetTop + this.parent.element.offsetHeight;\n    if (imgPosition > rtePosition) {\n      popupObj.relateTo = this.parent.inputElement;\n      popupObj.offsetY = this.parent.iframeSettings.enable ? -30 : -65;\n      popupObj.element.style.display = 'block';\n    } else {\n      if (popupObj) {\n        popupObj.refreshPosition(imageElement);\n        popupObj.element.style.display = 'block';\n      }\n    }\n  };\n  PasteCleanup.prototype.base64ToFile = function (base64, filename) {\n    var baseStr = base64.split(',');\n    var typeStr = baseStr[0].match(/:(.*?);/)[1];\n    var extension = typeStr.split('/')[1];\n    var decodeStr = atob(baseStr[1]);\n    var strLen = decodeStr.length;\n    var decodeArr = new Uint8Array(strLen);\n    while (strLen--) {\n      decodeArr[strLen] = decodeStr.charCodeAt(strLen);\n    }\n    if (Browser.isIE || navigator.appVersion.indexOf('Edge') > -1) {\n      var blob = new Blob([decodeArr], {\n        type: extension\n      });\n      extend(blob, {\n        name: filename + '.' + (!isNOU(extension) ? extension : '')\n      });\n      return blob;\n    } else {\n      return new File([decodeArr], filename + '.' + (!isNOU(extension) ? extension : ''), {\n        type: extension\n      });\n    }\n  };\n  /**\n   * Method for image formatting when pasting\n   *\n   * @param {Object} pasteArgs - specifies the paste arguments.\n   * @param {Element []} imgElement - specifies the array elements.\n   * @returns {void}\n   * @hidden\n    */\n  PasteCleanup.prototype.imageFormatting = function (pasteArgs, imgElement) {\n    if (!isNOU(imgElement.elements[0].getAttribute('src'))) {\n      imgElement.elements[0].classList.add('pasteContent_Img');\n    }\n    var imageElement = this.parent.createElement('span');\n    imageElement.appendChild(imgElement.elements[0]);\n    var imageValue = imageElement.innerHTML;\n    this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n    var currentDocument = this.contentRenderer.getDocument();\n    var range = this.nodeSelectionObj.getRange(currentDocument);\n    this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n    if (this.parent.pasteCleanupSettings.prompt) {\n      this.pasteDialog(imageValue, pasteArgs, false);\n    } else if (this.parent.pasteCleanupSettings.plainText) {\n      this.plainFormatting(imageValue, pasteArgs, false);\n    } else if (this.parent.pasteCleanupSettings.keepFormat) {\n      this.formatting(imageValue, false, pasteArgs);\n    } else {\n      this.formatting(imageValue, true, pasteArgs);\n    }\n  };\n  PasteCleanup.prototype.radioRender = function () {\n    this.keepRadioButton = new RadioButton({\n      label: this.i10n.getConstant('keepFormat'),\n      name: 'pasteOption',\n      checked: true\n    });\n    this.keepRadioButton.isStringTemplate = true;\n    var keepFormatElement = this.parent.element.querySelector('#keepFormating');\n    this.keepRadioButton.appendTo(keepFormatElement);\n    this.cleanRadioButton = new RadioButton({\n      label: this.i10n.getConstant('cleanFormat'),\n      name: 'pasteOption'\n    });\n    this.cleanRadioButton.isStringTemplate = true;\n    var cleanFormatElement = this.parent.element.querySelector('#cleanFormat');\n    this.cleanRadioButton.appendTo(cleanFormatElement);\n    this.plainTextRadioButton = new RadioButton({\n      label: this.i10n.getConstant('plainText'),\n      name: 'pasteOption'\n    });\n    this.plainTextRadioButton.isStringTemplate = true;\n    var plainTextElement = this.parent.element.querySelector('#plainTextFormat');\n    this.plainTextRadioButton.appendTo(plainTextElement);\n  };\n  PasteCleanup.prototype.selectFormatting = function (value, args, keepChecked, cleanChecked, isClipboardHTMLDataNull) {\n    if (keepChecked) {\n      this.formatting(value, false, args);\n    } else if (cleanChecked) {\n      this.formatting(value, true, args);\n    } else {\n      this.plainFormatting(value, args, isClipboardHTMLDataNull);\n    }\n  };\n  PasteCleanup.prototype.pasteDialog = function (value, args, isClipboardHTMLDataNull) {\n    var _this = this;\n    var dialogModel = {\n      buttons: [{\n        click: function () {\n          if (!_this.dialogObj.isDestroyed) {\n            var keepChecked = _this.parent.element.querySelector('#keepFormating').checked;\n            var cleanChecked = _this.parent.element.querySelector('#cleanFormat').checked;\n            _this.dialogObj.hide();\n            var argument = _this.dialogObj;\n            _this.dialogRenderObj.close(argument);\n            _this.dialogObj.destroy();\n            _this.selectFormatting(value, args, keepChecked, cleanChecked, isClipboardHTMLDataNull);\n          }\n        },\n        buttonModel: {\n          isPrimary: true,\n          cssClass: 'e-flat ' + CLS_RTE_PASTE_OK,\n          content: this.i10n.getConstant('pasteDialogOk')\n        }\n      }, {\n        click: function () {\n          if (!_this.dialogObj.isDestroyed) {\n            _this.dialogObj.hide();\n            var args_1 = _this.dialogObj;\n            _this.dialogRenderObj.close(args_1);\n            _this.dialogObj.destroy();\n          }\n        },\n        buttonModel: {\n          cssClass: 'e-flat ' + CLS_RTE_PASTE_CANCEL,\n          content: this.i10n.getConstant('pasteDialogCancel')\n        }\n      }],\n      header: this.i10n.getConstant('pasteFormat'),\n      content: this.i10n.getConstant('pasteFormatContent') + '<br/><div><div style=\"padding-top:24px;\">' + '<input type=\"radio\" class=\"' + CLS_RTE_PASTE_KEEP_FORMAT + '\" id=\"keepFormating\"/>' + '</div><div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' + CLS_RTE_PASTE_REMOVE_FORMAT + '\" id=\"cleanFormat\"/></div>' + '<div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' + CLS_RTE_PASTE_PLAIN_FORMAT + '\" id=\"plainTextFormat\"/></div></div>',\n      target: this.parent.element,\n      width: '300px',\n      height: '265px',\n      cssClass: CLS_RTE_DIALOG_MIN_HEIGHT,\n      isModal: Browser.isDevice,\n      visible: false\n    };\n    this.dialogObj = this.dialogRenderObj.render(dialogModel);\n    var rteDialogWrapper = this.parent.element.querySelector('#' + this.parent.getID() + '_pasteCleanupDialog');\n    if (rteDialogWrapper !== null && rteDialogWrapper.innerHTML !== '') {\n      this.destroyDialog(rteDialogWrapper);\n    }\n    if (rteDialogWrapper === null) {\n      rteDialogWrapper = this.parent.createElement('div', {\n        id: this.parent.getID() + '_pasteCleanupDialog'\n      });\n      this.parent.rootContainer.appendChild(rteDialogWrapper);\n    }\n    this.dialogObj.appendTo(rteDialogWrapper);\n    this.radioRender();\n    this.dialogObj.show();\n    this.setCssClass({\n      cssClass: this.parent.getCssClass()\n    });\n  };\n  PasteCleanup.prototype.updateCss = function (currentObj, e) {\n    if (currentObj && e.cssClass) {\n      if (isNullOrUndefined(e.oldCssClass)) {\n        currentObj.setProperties({\n          cssClass: (currentObj.cssClass + ' ' + e.cssClass).trim()\n        });\n      } else {\n        currentObj.setProperties({\n          cssClass: (currentObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim()\n        });\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/tslint/config\n  PasteCleanup.prototype.setCssClass = function (e) {\n    if (this.popupObj && e.cssClass) {\n      if (isNullOrUndefined(e.oldCssClass)) {\n        addClass([this.popupObj.element], e.cssClass);\n      } else {\n        removeClass([this.popupObj.element], e.oldCssClass);\n        addClass([this.popupObj.element], e.cssClass);\n      }\n    }\n    this.updateCss(this.dialogObj, e);\n    this.updateCss(this.uploadObj, e);\n    this.updateCss(this.plainTextRadioButton, e);\n    this.updateCss(this.cleanRadioButton, e);\n    this.updateCss(this.keepRadioButton, e);\n  };\n  PasteCleanup.prototype.destroyDialog = function (rteDialogWrapper) {\n    var rteDialogContainer = this.parent.element.querySelector('.e-rte-dialog-minheight');\n    detach(rteDialogContainer);\n    var rteDialogWrapperChildLength = rteDialogWrapper.children.length;\n    for (var i = 0; i < rteDialogWrapperChildLength; i++) {\n      detach(rteDialogWrapper.children[0]);\n    }\n  };\n  PasteCleanup.prototype.docClick = function (e) {\n    var target = e.args.target;\n    if (target && target.classList && this.dialogObj && !closest(target, '[id=' + '\\'' + this.dialogObj.element.id + '\\'' + ']') && !target.classList.contains('e-toolbar-item')) {\n      if (this.dialogObj) {\n        this.dialogObj.hide();\n      }\n    }\n  };\n  PasteCleanup.prototype.cleanAppleClass = function (elem) {\n    var appleClassElem = elem.querySelectorAll('br.Apple-interchange-newline');\n    for (var i = 0; i < appleClassElem.length; i++) {\n      detach(appleClassElem[i]);\n    }\n    return elem;\n  };\n  PasteCleanup.prototype.formatting = function (value, clean, args) {\n    var _this = this;\n    var clipBoardElem = this.parent.createElement('div', {\n      className: 'pasteContent',\n      styles: 'display:inline;'\n    });\n    if (this.isNotFromHtml && this.containsHtml) {\n      value = this.splitBreakLine(value);\n    }\n    clipBoardElem.innerHTML = value;\n    clipBoardElem = this.cleanAppleClass(clipBoardElem);\n    if (this.parent.pasteCleanupSettings.deniedTags !== null) {\n      clipBoardElem = this.deniedTags(clipBoardElem);\n    }\n    if (clean) {\n      clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n    } else if (this.parent.pasteCleanupSettings.deniedAttrs !== null) {\n      clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n    }\n    if (this.parent.pasteCleanupSettings.allowedStyleProps !== null) {\n      clipBoardElem = this.allowedStyle(clipBoardElem);\n    }\n    this.saveSelection.restore();\n    var newText = clipBoardElem.innerHTML.split('&').join('&amp;');\n    clipBoardElem.innerHTML = this.sanitizeHelper(newText);\n    var allImg = clipBoardElem.querySelectorAll('img');\n    for (var i = 0; i < allImg.length; i++) {\n      if (!isNOU(allImg[i].getAttribute('src'))) {\n        allImg[i].classList.add('pasteContent_Img');\n      }\n      this.setImageProperties(allImg[i]);\n    }\n    this.addTempClass(clipBoardElem);\n    if (clipBoardElem.querySelectorAll('picture').length > 0) {\n      this.processPictureElement(clipBoardElem);\n    }\n    if (clipBoardElem.textContent !== '' || !isNOU(clipBoardElem.querySelector('img')) || !isNOU(clipBoardElem.querySelector('table'))) {\n      var tempWrapperElem = this.parent.createElement('div');\n      tempWrapperElem.innerHTML = value;\n      var filesData = [];\n      if (!isNOU(tempWrapperElem.querySelector('img'))) {\n        var imgElem = tempWrapperElem.querySelectorAll('img');\n        var base64Src = [];\n        var imgName = [];\n        var uploadImg = [];\n        for (var i = 0; i < imgElem.length; i++) {\n          if (imgElem[i].getAttribute('src') && imgElem[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n            base64Src.push(imgElem[i].getAttribute('src'));\n            imgName.push(getUniqueID('rte_image'));\n            uploadImg.push(imgElem[i]);\n          }\n        }\n        var fileList = [];\n        var currentData = void 0;\n        for (var i = 0; i < base64Src.length; i++) {\n          fileList.push(this.base64ToFile(base64Src[i], imgName[i]));\n          currentData = {\n            name: fileList[i].name,\n            rawFile: fileList[i],\n            size: fileList[i].size,\n            type: fileList[i].type,\n            status: '',\n            validationMessages: {\n              minSize: '',\n              maxSize: ''\n            },\n            statusCode: '1'\n          };\n          filesData.push(currentData);\n        }\n      }\n      this.parent.trigger(events.afterPasteCleanup, {\n        value: clipBoardElem.innerHTML,\n        filesData: filesData\n      }, function (updatedArgs) {\n        value = updatedArgs.value;\n      });\n      clipBoardElem.innerHTML = this.parent.addAnchorAriaLabel(value);\n      clipBoardElem = this.addTableClass(clipBoardElem, args.pasteTableSource);\n      this.parent.formatter.editorManager.execCommand('inserthtml', 'pasteCleanup', args, function (returnArgs) {\n        extend(args, {\n          elements: returnArgs.elements,\n          imageElements: returnArgs.imgElem\n        }, true);\n        _this.parent.formatter.onSuccess(_this.parent, args);\n      }, clipBoardElem, null, null, this.parent.enterKey);\n      this.parent.notify(events.autoResize, {});\n      scrollToCursor(this.parent.contentModule.getDocument(), this.parent.inputElement);\n      this.removeTempClass();\n      this.parent.notify(events.toolbarRefresh, {});\n      this.cropImageHandler(this.parent.inputElement);\n    }\n  };\n  PasteCleanup.prototype.convertBlobToBase64 = function (element) {\n    var imgElem = element.querySelectorAll('img');\n    var _loop_1 = function (i) {\n      if (imgElem[i].getAttribute('src') && imgElem[i].getAttribute('src').startsWith('blob')) {\n        var blobImageUrl = imgElem[i].getAttribute('src');\n        var img_1 = new Image();\n        var onImageLoadEvent_1 = function () {\n          var canvas = document.createElement('canvas');\n          var ctx = canvas.getContext('2d');\n          canvas.width = img_1.width;\n          canvas.height = img_1.height;\n          ctx.drawImage(img_1, 0, 0);\n          var base64String = canvas.toDataURL('image/png');\n          imgElem[i].src = base64String;\n          img_1.removeEventListener('load', onImageLoadEvent_1);\n        };\n        img_1.src = blobImageUrl;\n        img_1.addEventListener('load', onImageLoadEvent_1);\n      }\n    };\n    for (var i = 0; i < imgElem.length; i++) {\n      _loop_1(i);\n    }\n  };\n  PasteCleanup.prototype.cropImageHandler = function (element) {\n    var _this = this;\n    var allImgElm = element.querySelectorAll('.e-img-cropped');\n    if (allImgElm.length > 0) {\n      var _loop_2 = function (i) {\n        if (allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n          var image_1 = new Image();\n          image_1.src = allImgElm[i].getAttribute('src');\n          var canvas_1 = document.createElement('canvas');\n          var ctx_1 = canvas_1.getContext('2d');\n          image_1.onload = function () {\n            var wGoalWidth = _this.cropImageData[i].goalWidth / image_1.naturalWidth;\n            var hGoalHeight = _this.cropImageData[i].goalHeight / image_1.naturalHeight;\n            var cropLength = _this.cropImageData[i].cropLength / wGoalWidth;\n            var cropTop = _this.cropImageData[i].cropTop / hGoalHeight;\n            var cropWidth = (_this.cropImageData[i].goalWidth - _this.cropImageData[i].cropLength - _this.cropImageData[i].cropR) / wGoalWidth;\n            var cropHeight = (_this.cropImageData[i].goalHeight - _this.cropImageData[i].cropTop - _this.cropImageData[i].cropB) / hGoalHeight;\n            canvas_1.width = cropWidth;\n            canvas_1.height = cropHeight;\n            // Draw the cropped portion of the image onto the canvas\n            ctx_1.drawImage(image_1, cropLength, cropTop, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\n            // Convert the cropped canvas to a base64 encoded image\n            var croppedBase64 = canvas_1.toDataURL('image/png');\n            // Call the provided callback with the cropped base64 data\n            allImgElm[i].setAttribute('src', croppedBase64);\n            allImgElm[i].classList.remove('e-img-cropped');\n            _this.imgUploading(_this.parent.inputElement);\n            if (_this.parent.iframeSettings.enable) {\n              _this.parent.updateValue();\n            }\n          };\n        }\n      };\n      for (var i = 0; i < allImgElm.length; i++) {\n        _loop_2(i);\n      }\n    } else {\n      if (!isNOU(this.parent.insertImageSettings.saveUrl) && !isNOU(this.parent.insertImageSettings.path) && this.parent.inputElement.querySelectorAll('img').length > 0 && this.parent.inputElement.querySelectorAll('img')[0].src.startsWith('blob')) {\n        this.convertBlobToBase64(this.parent.inputElement);\n        this.iframeUploadTime = setTimeout(function () {\n          _this.imgUploading(_this.parent.inputElement);\n          if (_this.parent.iframeSettings.enable) {\n            _this.parent.updateValue();\n          }\n        }, 20);\n      } else {\n        this.imgUploading(this.parent.inputElement);\n        if (this.parent.iframeSettings.enable) {\n          this.parent.updateValue();\n        }\n      }\n    }\n  };\n  PasteCleanup.prototype.addTableClass = function (element, source) {\n    var tableElement = element.querySelectorAll('table');\n    for (var i = 0; i < tableElement.length; i++) {\n      var isMSTeamsTable = tableElement[i].parentElement.nodeName === 'FIGURE';\n      if (tableElement[i].classList.length > 0 && tableElement[i].classList.contains('e-rte-custom-table')) {\n        continue; // Skip the custom table class\n      }\n      if (this.parent.pasteCleanupSettings.keepFormat && source && !isMSTeamsTable) {\n        tableElement[i].classList.add('e-rte-paste-' + source + '-table');\n      } else if (!tableElement[i].classList.contains('e-rte-table')) {\n        tableElement[i].classList.add('e-rte-table');\n      }\n    }\n    return element;\n  };\n  PasteCleanup.prototype.setImageProperties = function (allImg) {\n    if (this.parent.insertImageSettings.width !== 'auto') {\n      allImg.setAttribute('width', this.parent.insertImageSettings.width);\n    }\n    if (this.parent.insertImageSettings.minWidth !== '0' && this.parent.insertImageSettings.minWidth !== 0) {\n      allImg.style.minWidth = this.parent.insertImageSettings.minWidth.toString();\n    }\n    if (this.parent.insertImageSettings.maxWidth !== null) {\n      allImg.style.maxWidth = this.parent.getInsertImgMaxWidth().toString();\n    }\n    if (this.parent.insertImageSettings.height !== 'auto') {\n      allImg.setAttribute('height', this.parent.insertImageSettings.height);\n    }\n    if (this.parent.insertImageSettings.minHeight !== '0' && this.parent.insertImageSettings.minHeight !== 0) {\n      allImg.style.minHeight = this.parent.insertImageSettings.minHeight.toString();\n    }\n    if (this.parent.insertImageSettings.maxHeight !== null) {\n      allImg.style.maxHeight = this.parent.insertImageSettings.maxHeight.toString();\n    }\n  };\n  PasteCleanup.prototype.addTempClass = function (clipBoardElem) {\n    var allChild = clipBoardElem.children;\n    for (var i = 0; i < allChild.length; i++) {\n      allChild[i].classList.add('pasteContent_RTE');\n    }\n  };\n  PasteCleanup.prototype.removeTempClass = function () {\n    var classElm = this.parent.inputElement.querySelectorAll('.pasteContent_RTE');\n    for (var i = 0; i < classElm.length; i++) {\n      classElm[i].classList.remove('pasteContent_RTE');\n      if (classElm[i].getAttribute('class') === '') {\n        classElm[i].removeAttribute('class');\n      }\n    }\n  };\n  PasteCleanup.prototype.sanitizeHelper = function (value) {\n    value = sanitizeHelper(value, this.parent);\n    return value;\n  };\n  //Plain Formatting\n  PasteCleanup.prototype.plainFormatting = function (value, args, isClipboardHTMLDataNull) {\n    var _this = this;\n    var clipBoardElem = this.parent.createElement('div', {\n      className: 'pasteContent',\n      styles: 'display:inline;'\n    });\n    clipBoardElem.innerHTML = value;\n    this.detachInlineElements(clipBoardElem);\n    this.getTextContent(clipBoardElem);\n    if (clipBoardElem.textContent.trim() !== '') {\n      if (!isNOU(clipBoardElem.firstElementChild) && clipBoardElem.firstElementChild.tagName !== 'BR') {\n        var firstElm = clipBoardElem.firstElementChild;\n        if (!isNOU(clipBoardElem.firstElementChild)) {\n          var spanElm = this.parent.createElement('span');\n          for (var i = 0, j = 0; i < firstElm.childNodes.length; i++, j++) {\n            if (firstElm.childNodes[i].nodeName === '#text') {\n              spanElm.appendChild(firstElm.childNodes[i]);\n              clipBoardElem.insertBefore(spanElm, clipBoardElem.firstElementChild);\n              i--;\n            } else if (firstElm.childNodes[i].nodeName !== '#text' && j === 0) {\n              for (var k = 0; k < firstElm.childNodes[i].childNodes.length; k++) {\n                spanElm.appendChild(firstElm.childNodes[i].childNodes[k]);\n                clipBoardElem.insertBefore(spanElm, clipBoardElem.firstElementChild);\n                k--;\n              }\n              i--;\n            } else {\n              break;\n            }\n          }\n          if (!firstElm.hasChildNodes()) {\n            detach(firstElm);\n          }\n        }\n      }\n      this.removeEmptyElements(clipBoardElem);\n      this.saveSelection.restore();\n      clipBoardElem.innerHTML = this.sanitizeHelper(clipBoardElem.innerHTML);\n      this.addTempClass(clipBoardElem);\n      this.removingComments(clipBoardElem);\n      if (this.parent.enterKey === 'BR' && !isClipboardHTMLDataNull) {\n        clipBoardElem = this.reframeToBrContent(clipBoardElem);\n      } else if (this.parent.enterKey === 'DIV') {\n        clipBoardElem.innerHTML = clipBoardElem.innerHTML.replace(/<p class=\"pasteContent_RTE\">/g, '<div>').replace(/<\\/p>/g, '</div>');\n      }\n      this.parent.trigger(events.afterPasteCleanup, {\n        value: clipBoardElem.innerHTML,\n        filesData: null\n      }, function (updatedArgs) {\n        value = updatedArgs.value;\n      });\n      clipBoardElem.innerHTML = value;\n      this.parent.formatter.editorManager.execCommand('inserthtml', 'pasteCleanup', args, function (returnArgs) {\n        extend(args, {\n          elements: returnArgs.elements,\n          imageElements: returnArgs.imgElem\n        }, true);\n        _this.parent.formatter.onSuccess(_this.parent, args);\n      }, clipBoardElem, null, null, this.parent.enterKey);\n      this.removeTempClass();\n    } else {\n      this.saveSelection.restore();\n      extend(args, {\n        elements: []\n      }, true);\n      this.parent.formatter.onSuccess(this.parent, args);\n    }\n  };\n  PasteCleanup.prototype.removingComments = function (elm) {\n    var innerElement = elm.innerHTML;\n    innerElement = innerElement.replace(/<!--[\\s\\S]*?-->/g, '');\n    elm.innerHTML = innerElement;\n  };\n  PasteCleanup.prototype.reframeToBrContent = function (clipBoardElem) {\n    var newClipBoardElem = this.parent.createElement('div', {\n      className: 'pasteContent',\n      styles: 'display:inline;'\n    });\n    while (!isNOU(clipBoardElem.firstChild)) {\n      var brElem = this.parent.createElement('br');\n      var currentFirstChild = clipBoardElem.firstChild;\n      if (currentFirstChild.nodeName === '#text') {\n        var isNextSibPresent = !isNOU(currentFirstChild.nextSibling);\n        newClipBoardElem.appendChild(currentFirstChild);\n        if (isNextSibPresent) {\n          newClipBoardElem.appendChild(brElem);\n        }\n      } else {\n        var isCurrentNodeBRElm = currentFirstChild.nodeName === 'BR';\n        if (isCurrentNodeBRElm) {\n          newClipBoardElem.appendChild(currentFirstChild);\n        } else {\n          newClipBoardElem.appendChild(currentFirstChild.childNodes[0]);\n        }\n        if (!isNOU(currentFirstChild) && !isNOU(currentFirstChild.nextSibling)) {\n          newClipBoardElem.appendChild(brElem);\n        }\n        if (!isCurrentNodeBRElm && !isNOU(currentFirstChild)) {\n          detach(currentFirstChild);\n        }\n      }\n    }\n    return newClipBoardElem;\n  };\n  PasteCleanup.prototype.getTextContent = function (clipBoardElem) {\n    for (var i = 0; i < this.blockNode.length; i++) {\n      var inElem = clipBoardElem.querySelectorAll(this.blockNode[i]);\n      for (var j = 0; j < inElem.length; j++) {\n        var parElem = void 0;\n        for (var k = 0, l = 0, preNode = void 0; k < inElem[j].childNodes.length; k++, l++) {\n          if (inElem[j].childNodes[k].nodeName === 'DIV' || inElem[j].childNodes[k].nodeName === 'P' || inElem[j].childNodes[k].nodeName === '#text' && inElem[j].childNodes[k].nodeValue.replace(/\\u00a0/g, '&nbsp;') !== '&nbsp;' && inElem[j].childNodes[k].textContent.trim() === '') {\n            parElem = inElem[j].childNodes[k].parentElement;\n            inElem[j].childNodes[k].parentElement.parentElement.insertBefore(inElem[j].childNodes[k], inElem[j].childNodes[k].parentElement);\n            k--;\n          } else {\n            parElem = inElem[j].childNodes[k].parentElement;\n            if (preNode === 'text') {\n              var previousElem = parElem.previousElementSibling;\n              previousElem.appendChild(inElem[j].childNodes[k]);\n            } else {\n              var divElement = this.parent.createElement('div', {\n                id: 'newDiv'\n              });\n              divElement.appendChild(inElem[j].childNodes[k]);\n              parElem.parentElement.insertBefore(divElement, parElem);\n            }\n            k--;\n            preNode = 'text';\n          }\n        }\n        if (!isNOU(parElem)) {\n          detach(parElem);\n        }\n      }\n    }\n    var allElems = clipBoardElem.querySelectorAll('*');\n    for (var i = 0; i < allElems.length; i++) {\n      var allAtr = allElems[i].attributes;\n      for (var j = 0; j < allAtr.length; j++) {\n        allElems[i].removeAttribute(allAtr[j].name);\n        j--;\n      }\n    }\n  };\n  PasteCleanup.prototype.detachInlineElements = function (clipBoardElem) {\n    for (var i = 0; i < this.inlineNode.length; i++) {\n      var inElem = clipBoardElem.querySelectorAll(this.inlineNode[i]);\n      for (var j = 0; j < inElem.length; j++) {\n        if (!(inElem[j] === clipBoardElem.firstChild && inElem[j].nodeName === 'SPAN')) {\n          var parElem = void 0;\n          for (var k = 0; k < inElem[j].childNodes.length; k++) {\n            parElem = inElem[j].childNodes[k].parentElement;\n            inElem[j].childNodes[k].parentElement.parentElement.insertBefore(inElem[j].childNodes[k], inElem[j].childNodes[k].parentElement);\n            k--;\n          }\n          if (!isNOU(parElem)) {\n            detach(parElem);\n          }\n        }\n      }\n    }\n  };\n  PasteCleanup.prototype.findDetachEmptyElem = function (element) {\n    var removableElement;\n    if (!isNOU(element) && !isNOU(element.parentElement)) {\n      var hasNbsp = element.parentElement.textContent.length > 0 && element.parentElement.textContent.match(/\\u00a0/g) && element.parentElement.textContent.match(/\\u00a0/g).length > 0;\n      if (!hasNbsp && element.parentElement.textContent.trim() === '' && element.parentElement.getAttribute('class') !== 'pasteContent') {\n        removableElement = this.findDetachEmptyElem(element.parentElement);\n      } else {\n        removableElement = element;\n      }\n    } else {\n      removableElement = null;\n    }\n    return removableElement;\n  };\n  PasteCleanup.prototype.removeEmptyElements = function (element) {\n    var emptyElements = element.querySelectorAll(':empty');\n    for (var i = 0; i < emptyElements.length; i++) {\n      if (emptyElements[i].tagName !== 'BR') {\n        var detachableElement = this.findDetachEmptyElem(emptyElements[i]);\n        if (!isNOU(detachableElement)) {\n          detach(detachableElement);\n        }\n      }\n    }\n  };\n  //GroupingTags\n  PasteCleanup.prototype.tagGrouping = function (deniedTags) {\n    var groupingTags = deniedTags.slice();\n    var keys = Object.keys(pasteCleanupGroupingTags);\n    var values = keys.map(function (key) {\n      return pasteCleanupGroupingTags[\"\" + key];\n    });\n    var addTags = [];\n    for (var i = 0; i < groupingTags.length; i++) {\n      //The value split using '[' because to retrieve the tag name from the user given format which may contain tag with attributes\n      if (groupingTags[i].split('[').length > 1) {\n        groupingTags[i] = groupingTags[i].split('[')[0].trim();\n      }\n      if (keys.indexOf(groupingTags[i]) > -1) {\n        for (var j = 0; j < values[keys.indexOf(groupingTags[i])].length; j++) {\n          if (groupingTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0 && addTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0) {\n            addTags.push(values[keys.indexOf(groupingTags[i])][j]);\n          }\n        }\n      }\n    }\n    return deniedTags = deniedTags.concat(addTags);\n  };\n  //Filter Attributes in Denied Tags\n  PasteCleanup.prototype.attributesfilter = function (deniedTags) {\n    for (var i = 0; i < deniedTags.length; i++) {\n      if (deniedTags[i].split('[').length > 1) {\n        var userAttributes = deniedTags[i].split('[')[1].split(']')[0].split(',');\n        var allowedAttributeArray = [];\n        var deniedAttributeArray = [];\n        for (var j = 0; j < userAttributes.length; j++) {\n          if (userAttributes[j].indexOf('!') < 0) {\n            allowedAttributeArray.push(userAttributes[j].trim());\n          } else {\n            deniedAttributeArray.push(userAttributes[j].split('!')[1].trim());\n          }\n        }\n        var allowedAttribute = allowedAttributeArray.length > 1 ? allowedAttributeArray.join('][') : allowedAttributeArray.join();\n        var deniedAttribute = deniedAttributeArray.length > 1 ? deniedAttributeArray.join('][') : deniedAttributeArray.join();\n        if (deniedAttribute.length > 0) {\n          var select = allowedAttribute !== '' ? deniedTags[i].split('[')[0] + '[' + allowedAttribute + ']' : deniedTags[i].split('[')[0];\n          deniedTags[i] = select + ':not([' + deniedAttribute + '])';\n        } else {\n          deniedTags[i] = deniedTags[i].split('[')[0] + '[' + allowedAttribute + ']';\n        }\n      }\n    }\n    return deniedTags;\n  };\n  //Denied Tags\n  PasteCleanup.prototype.deniedTags = function (clipBoardElem) {\n    var deniedTags = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedTags) ? [] : this.parent.pasteCleanupSettings.deniedTags.slice();\n    deniedTags = this.attributesfilter(deniedTags);\n    deniedTags = this.tagGrouping(deniedTags);\n    for (var i = 0; i < deniedTags.length; i++) {\n      var removableElement = clipBoardElem.querySelectorAll(deniedTags[i]);\n      for (var j = removableElement.length - 1; j >= 0; j--) {\n        var parentElem = removableElement[j].parentNode;\n        while (removableElement[j].firstChild) {\n          parentElem.insertBefore(removableElement[j].firstChild, removableElement[j]);\n        }\n        parentElem.removeChild(removableElement[j]);\n      }\n    }\n    return clipBoardElem;\n  };\n  //Denied Attributes\n  PasteCleanup.prototype.deniedAttributes = function (clipBoardElem, clean) {\n    var deniedAttrs = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedAttrs) ? [] : this.parent.pasteCleanupSettings.deniedAttrs.slice();\n    if (clean) {\n      deniedAttrs.push('style');\n    }\n    for (var i = 0; i < deniedAttrs.length; i++) {\n      var removableAttrElement = clipBoardElem.querySelectorAll('[' + deniedAttrs[i] + ']');\n      for (var j = 0; j < removableAttrElement.length; j++) {\n        removableAttrElement[j].removeAttribute(deniedAttrs[i]);\n      }\n    }\n    return clipBoardElem;\n  };\n  //Allowed Style Properties\n  PasteCleanup.prototype.allowedStyle = function (clipBoardElem) {\n    var allowedStyleProps = isNullOrUndefined(this.parent.pasteCleanupSettings.allowedStyleProps) ? [] : this.parent.pasteCleanupSettings.allowedStyleProps.slice();\n    allowedStyleProps.push('list-style-type', 'list-style');\n    var styleElement = clipBoardElem.querySelectorAll('[style]');\n    for (var i = 0; i < styleElement.length; i++) {\n      var allowedStyleValue = '';\n      var allowedStyleValueArray = [];\n      var styleValue = styleElement[i].getAttribute('style').split(';');\n      for (var k = 0; k < styleValue.length; k++) {\n        if (allowedStyleProps.indexOf(styleValue[k].split(':')[0].trim()) >= 0) {\n          allowedStyleValueArray.push(styleValue[k]);\n        }\n      }\n      styleElement[i].removeAttribute('style');\n      allowedStyleValue = allowedStyleValueArray.join(';').trim() === '' ? allowedStyleValueArray.join(';') : allowedStyleValueArray.join(';') + ';';\n      if (allowedStyleValue) {\n        styleElement[i].setAttribute('style', allowedStyleValue);\n      }\n    }\n    return clipBoardElem;\n  };\n  PasteCleanup.prototype.processPictureElement = function (clipBoardElem) {\n    var pictureElems = clipBoardElem.querySelectorAll('picture');\n    for (var i = 0; i < pictureElems.length; i++) {\n      var imgElem = pictureElems[i].querySelector('img');\n      var sourceElems = pictureElems[i].querySelectorAll('source');\n      if (imgElem && imgElem.getAttribute('src')) {\n        var srcValue = imgElem.getAttribute('src');\n        var url = new URL(srcValue);\n        for (var j = 0; j < sourceElems.length; j++) {\n          var srcset = sourceElems[j].getAttribute('srcset');\n          if (srcset) {\n            if (srcset.indexOf('http') === -1) {\n              var fullPath = url.origin + srcset;\n              sourceElems[j].setAttribute('srcset', fullPath);\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  PasteCleanup.prototype.getModuleName = function () {\n    return 'pasteCleanup';\n  };\n  return PasteCleanup;\n}();\nexport { PasteCleanup };","map":{"version":3,"names":["events","Popup","RadioButton","isNullOrUndefined","isNOU","detach","extend","addClass","removeClass","getUniqueID","Browser","closest","CLS_RTE_PASTE_KEEP_FORMAT","CLS_RTE_PASTE_REMOVE_FORMAT","CLS_RTE_PASTE_PLAIN_FORMAT","CLS_RTE_PASTE_OK","CLS_RTE_PASTE_CANCEL","CLS_RTE_DIALOG_MIN_HEIGHT","pasteCleanupGroupingTags","NodeSelection","EVENTS","RenderType","ImageInputSource","Uploader","classes","sanitizeHelper","convertToBlob","scrollToCursor","PasteCleanup","parent","serviceLocator","inlineNode","blockNode","isNotFromHtml","containsHtml","cropImageData","locator","renderFactory","getService","i10n","dialogRenderObj","addEventListener","isDestroyed","prototype","nodeSelectionObj","inputElement","on","pasteClean","bindCssClass","setCssClass","destroy","docClick","fireFoxUploadTime","clearTimeout","refreshPopupTime","popupCloseTime","failureTime","iframeUploadTime","removeEventListener","popupObj","uploadObj","keepRadioButton","cleanRadioButton","plainTextRadioButton","off","e","_this","args","requestType","editorMode","event","value","isClipboardHTMLDataNull","imageproperties","allowedTypes","insertImageSettings","clipboardData","getData","file","length","htmlRegex","RegExp","trigger","beforePasteCleanup","replace","test","items","getAsFile","fileNameParts","name","imgType_1","substring","lastIndexOf","every","type","toLowerCase","preventDefault","notify","paste","text","callBack","b","formatter","editorManager","execCommand","imageFormatting","bind","divElement","createElement","innerHTML","splitBreakLine","observer","MS_WORD_CLEANUP","allowedStylePropertiesArray","pasteCleanupSettings","allowedStyleProps","a","pasteTableSource","trim","contentRenderer","getRenderer","Content","currentDocument","getDocument","range","getRange","saveSelection","save","tempDivElem","unsupportedImg","querySelectorAll","index","setAttribute","getConstant","classList","remove","isValueNotEmpty","textContent","querySelector","imgElements","forEach","imgElement","imageFileFormat","imgElementSrc","getAttribute","indexOf","split","pop","cleanupResizeElements","currentValue","prompt","pasteDialog","plainText","plainFormatting","keepFormat","formatting","enterSplitText","finalText","startNode","enterKey","endNode","i","content","contentWithSpace","makeSpace","contentWithLineBreak","spacedContent","lineBreakSplitText","currentText","imgUploading","elm","allImgElm","saveUrl","base64Src","imgName","uploadImg","push","fileList","base64ToFile","uploadMethod","path","saveFormat","getBlob","allImgElmId","removeAttribute","blopUrl","URL","createObjectURL","toolbarEnableDisable","state","inlineMode","enable","toolbarModule","baseToolbar","toolbarObj","disable","imgElem","style","opacity","popupEle","rootContainer","appendChild","contentEle","id","getID","attrs","offsetY","iframeSettings","relateTo","height","width","viewPortElement","element","position","X","Y","enableRtl","zIndex","close","isBlur","display","CLS_POPUP_OPEN","CLS_RTE_UPLOAD_POPUP","cssClass","timeOut","size","setTimeout","refreshPopup","asyncSettings","removeUrl","CLS_RTE_DIALOG_UPLOAD","dropArea","allowedExtensions","toString","success","popupClose","uploading","isServerRendered","imageUploading","imageUploadingArgs","cancel","contentEditable","beforeUpload","beforeImageUpload","failure","uploadFailure","canceling","nextSibling","selected","removing","appendTo","childNodes","fileInfo","rawFile","status","validationMessages","minSize","maxSize","statusCode","createFileList","upload","getElementsByClassName","imageUploadFailed","document","body","contains","detectImageSource","Pasted","imageUploadSuccess","url","src","imageRemoving","imageElement","imgPosition","offsetTop","rtePosition","offsetHeight","refreshPosition","base64","filename","baseStr","typeStr","match","extension","decodeStr","atob","strLen","decodeArr","Uint8Array","charCodeAt","isIE","navigator","appVersion","blob","Blob","File","pasteArgs","elements","add","imageValue","radioRender","label","checked","isStringTemplate","keepFormatElement","cleanFormatElement","plainTextElement","selectFormatting","keepChecked","cleanChecked","dialogModel","buttons","click","dialogObj","hide","argument","buttonModel","isPrimary","args_1","header","target","isModal","isDevice","visible","render","rteDialogWrapper","destroyDialog","show","getCssClass","updateCss","currentObj","oldCssClass","setProperties","rteDialogContainer","rteDialogWrapperChildLength","children","cleanAppleClass","elem","appleClassElem","clean","clipBoardElem","className","styles","deniedTags","deniedAttributes","deniedAttrs","allowedStyle","restore","newText","join","allImg","setImageProperties","addTempClass","processPictureElement","tempWrapperElem","filesData","currentData","afterPasteCleanup","updatedArgs","addAnchorAriaLabel","addTableClass","returnArgs","imageElements","onSuccess","autoResize","contentModule","removeTempClass","toolbarRefresh","cropImageHandler","convertBlobToBase64","_loop_1","startsWith","blobImageUrl","img_1","Image","onImageLoadEvent_1","canvas","ctx","getContext","drawImage","base64String","toDataURL","_loop_2","image_1","canvas_1","ctx_1","onload","wGoalWidth","goalWidth","naturalWidth","hGoalHeight","goalHeight","naturalHeight","cropLength","cropTop","cropWidth","cropR","cropHeight","cropB","croppedBase64","updateValue","source","tableElement","isMSTeamsTable","parentElement","nodeName","minWidth","maxWidth","getInsertImgMaxWidth","minHeight","maxHeight","allChild","classElm","detachInlineElements","getTextContent","firstElementChild","tagName","firstElm","spanElm","j","insertBefore","k","hasChildNodes","removeEmptyElements","removingComments","reframeToBrContent","innerElement","newClipBoardElem","firstChild","brElem","currentFirstChild","isNextSibPresent","isCurrentNodeBRElm","inElem","parElem","l","preNode","nodeValue","previousElem","previousElementSibling","allElems","allAtr","attributes","findDetachEmptyElem","removableElement","hasNbsp","emptyElements","detachableElement","tagGrouping","groupingTags","slice","keys","Object","values","map","key","addTags","concat","attributesfilter","userAttributes","allowedAttributeArray","deniedAttributeArray","allowedAttribute","deniedAttribute","select","parentElem","parentNode","removeChild","removableAttrElement","styleElement","allowedStyleValue","allowedStyleValueArray","styleValue","pictureElems","sourceElems","srcValue","srcset","fullPath","origin","getModuleName"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/paste-clean-up.js"],"sourcesContent":["import * as events from '../base/constant';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { RadioButton } from '@syncfusion/ej2-buttons';\nimport { isNullOrUndefined as isNOU, isNullOrUndefined, detach, extend, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { getUniqueID, Browser, closest } from '@syncfusion/ej2-base';\nimport { CLS_RTE_PASTE_KEEP_FORMAT, CLS_RTE_PASTE_REMOVE_FORMAT, CLS_RTE_PASTE_PLAIN_FORMAT } from '../base/classes';\nimport { CLS_RTE_PASTE_OK, CLS_RTE_PASTE_CANCEL, CLS_RTE_DIALOG_MIN_HEIGHT } from '../base/classes';\nimport { pasteCleanupGroupingTags } from '../../common/config';\nimport { NodeSelection } from '../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { RenderType, ImageInputSource } from '../base/enum';\nimport { Uploader } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { sanitizeHelper, convertToBlob } from '../base/util';\nimport { scrollToCursor } from '../../common/util';\n/**\n * PasteCleanup module called when pasting content in RichTextEditor\n */\nvar PasteCleanup = /** @class */ (function () {\n    function PasteCleanup(parent, serviceLocator) {\n        this.inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button',\n            'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input',\n            'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress',\n            'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'sub', 'sup', 'svg',\n            'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n        this.blockNode = ['div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n            'address', 'blockquote', 'button', 'center', 'dd', 'dir', 'dl', 'dt', 'fieldset',\n            'frameset', 'hr', 'iframe', 'isindex', 'li', 'map', 'menu', 'noframes', 'noscript',\n            'object', 'ol', 'pre', 'td', 'tr', 'th', 'tbody', 'tfoot', 'thead', 'table', 'ul',\n            'header', 'article', 'nav', 'footer', 'section', 'aside', 'main', 'figure', 'figcaption'];\n        this.isNotFromHtml = false;\n        this.containsHtml = false;\n        this.cropImageData = [];\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n        this.isDestroyed = false;\n    }\n    PasteCleanup.prototype.addEventListener = function () {\n        this.nodeSelectionObj = new NodeSelection(this.parent.inputElement);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.pasteClean, this.pasteClean, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.docClick, this.docClick, this);\n    };\n    PasteCleanup.prototype.destroy = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (this.fireFoxUploadTime) {\n            clearTimeout(this.fireFoxUploadTime);\n            this.fireFoxUploadTime = null;\n        }\n        if (this.refreshPopupTime) {\n            clearTimeout(this.refreshPopupTime);\n            this.refreshPopupTime = null;\n        }\n        if (this.popupCloseTime) {\n            clearTimeout(this.popupCloseTime);\n            this.popupCloseTime = null;\n        }\n        if (this.failureTime) {\n            clearTimeout(this.failureTime);\n            this.failureTime = null;\n        }\n        if (this.iframeUploadTime) {\n            clearTimeout(this.iframeUploadTime);\n            this.iframeUploadTime = null;\n        }\n        this.removeEventListener();\n        if (this.popupObj && !this.popupObj.isDestroyed) {\n            this.popupObj.destroy();\n            this.popupObj = null;\n        }\n        if (this.uploadObj && !this.uploadObj.isDestroyed) {\n            this.uploadObj.destroy();\n            this.uploadObj = null;\n        }\n        if (this.keepRadioButton && !this.keepRadioButton.isDestroyed) {\n            this.keepRadioButton.destroy();\n            this.keepRadioButton = null;\n        }\n        if (this.cleanRadioButton && !this.cleanRadioButton.isDestroyed) {\n            this.cleanRadioButton.destroy();\n            this.cleanRadioButton = null;\n        }\n        if (this.plainTextRadioButton && !this.plainTextRadioButton.isDestroyed) {\n            this.plainTextRadioButton.destroy();\n            this.plainTextRadioButton = null;\n        }\n        this.isDestroyed = true;\n    };\n    PasteCleanup.prototype.removeEventListener = function () {\n        this.parent.off(events.pasteClean, this.pasteClean);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.docClick, this.docClick);\n    };\n    PasteCleanup.prototype.pasteClean = function (e) {\n        var _this = this;\n        var args = {\n            requestType: 'Paste',\n            editorMode: this.parent.editorMode,\n            event: e\n        };\n        var value = null;\n        var isClipboardHTMLDataNull = false;\n        var imageproperties;\n        var allowedTypes = this.parent.insertImageSettings.allowedTypes;\n        if (e.args && !isNOU(e.args.clipboardData)) {\n            value = e.args.clipboardData.getData('text/html');\n        }\n        if (e.args && value !== null && this.parent.editorMode === 'HTML') {\n            var file = void 0;\n            if (value.length === 0) {\n                var htmlRegex = new RegExp(/<\\/[a-z][\\s\\S]*>/i);\n                value = e.args.clipboardData.getData('text/plain');\n                this.parent.trigger(events.beforePasteCleanup, { value: value });\n                this.isNotFromHtml = value !== '' ? true : false;\n                value = value.replace(/</g, '&lt;');\n                value = value.replace(/>/g, '&gt;');\n                this.containsHtml = htmlRegex.test(value);\n                file = e && e.args.clipboardData &&\n                    e.args.clipboardData.items.length > 0 ?\n                    (e.args.clipboardData.items[0].getAsFile() === null ?\n                        (!isNOU(e.args.clipboardData.items[1]) ?\n                            e.args.clipboardData.items[1].getAsFile() : null) :\n                        e.args.clipboardData.items[0].getAsFile()) : null;\n                if (file) {\n                    var fileNameParts = file.name;\n                    var imgType_1 = fileNameParts.substring(fileNameParts.lastIndexOf('.'));\n                    if (allowedTypes.every(function (type) { return type.toLowerCase() !== imgType_1; })) {\n                        e.args.preventDefault();\n                        return;\n                    }\n                }\n                this.parent.notify(events.paste, {\n                    file: file,\n                    args: e.args,\n                    text: value,\n                    callBack: function (b) {\n                        imageproperties = b;\n                        if (typeof (imageproperties) === 'object') {\n                            _this.parent.formatter.editorManager.execCommand('Images', 'Image', e.args, _this.imageFormatting.bind(_this, args), 'pasteCleanup', imageproperties, 'pasteCleanupModule');\n                        }\n                        else {\n                            value = imageproperties;\n                        }\n                    }\n                });\n                if (!htmlRegex.test(value)) {\n                    var divElement = this.parent.createElement('div');\n                    divElement.innerHTML = this.splitBreakLine(value);\n                    value = divElement.innerHTML;\n                    isClipboardHTMLDataNull = true;\n                }\n            }\n            else if (value.length > 0) {\n                this.parent.trigger(events.beforePasteCleanup, { value: value });\n                this.parent.formatter.editorManager.observer.notify(EVENTS.MS_WORD_CLEANUP, {\n                    args: e.args,\n                    text: e.text,\n                    allowedStylePropertiesArray: this.parent.pasteCleanupSettings.allowedStyleProps,\n                    callBack: function (a, cropImageData, pasteTableSource) {\n                        args.pasteTableSource = pasteTableSource;\n                        value = a.trim();\n                        _this.cropImageData = cropImageData;\n                    }\n                });\n            }\n            this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n            var currentDocument = this.contentRenderer.getDocument();\n            var range = this.nodeSelectionObj.getRange(currentDocument);\n            this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n            var tempDivElem = this.parent.createElement('div');\n            tempDivElem.innerHTML = value;\n            var unsupportedImg = tempDivElem.querySelectorAll('.e-rte-image-unsupported');\n            for (var index = 0; index < unsupportedImg.length; index++) {\n                unsupportedImg[index].setAttribute('alt', this.i10n.getConstant('unsupportedImage'));\n                unsupportedImg[index].classList.remove('e-rte-image-unsupported');\n            }\n            value = tempDivElem.innerHTML;\n            var isValueNotEmpty = tempDivElem.textContent !== '' || !isNOU(tempDivElem.querySelector('img')) ||\n                !isNOU(tempDivElem.querySelector('table'));\n            var imgElements = tempDivElem.querySelectorAll('img');\n            imgElements.forEach(function (imgElement) {\n                var imageFileFormat;\n                var imgElementSrc = imgElement.getAttribute('src');\n                if (!isNullOrUndefined(imgElementSrc) && imgElementSrc !== '') {\n                    if (!isNullOrUndefined(imgElement.getAttribute('data-image-type'))) {\n                        imageFileFormat = imgElement.getAttribute('data-image-type');\n                    }\n                    else if (imgElementSrc.indexOf('base64') > -1 && imgElementSrc.indexOf('data:') > -1) {\n                        imageFileFormat = imgElementSrc.split(';')[0].split('/')[1];\n                    }\n                    else {\n                        imageFileFormat = imgElementSrc.split('.').pop().toLowerCase();\n                    }\n                    if (!isNullOrUndefined(imageFileFormat) &&\n                        allowedTypes.every(function (type) { return imageFileFormat !== type.substring(1).toLowerCase(); }) &&\n                        imgElementSrc.indexOf('blob') === -1) {\n                        detach(imgElement);\n                    }\n                }\n            });\n            value = tempDivElem.innerHTML;\n            this.parent.notify(events.cleanupResizeElements, {\n                value: value,\n                callBack: function (currentValue) {\n                    value = currentValue;\n                }\n            });\n            if (this.parent.pasteCleanupSettings.prompt) {\n                if (isValueNotEmpty) {\n                    e.args.preventDefault();\n                    this.pasteDialog(value, args, isClipboardHTMLDataNull);\n                }\n            }\n            else if (this.parent.pasteCleanupSettings.plainText) {\n                e.args.preventDefault();\n                this.plainFormatting(value, args, isClipboardHTMLDataNull);\n            }\n            else if (this.parent.pasteCleanupSettings.keepFormat) {\n                e.args.preventDefault();\n                this.formatting(value, false, args);\n            }\n            else {\n                e.args.preventDefault();\n                this.formatting(value, true, args);\n            }\n        }\n    };\n    PasteCleanup.prototype.splitBreakLine = function (value) {\n        var enterSplitText = value.split('\\r\\n\\r\\n');\n        var finalText = '';\n        var startNode = this.parent.enterKey === 'P' ? '<p>' : (this.parent.enterKey === 'DIV' ? '<div>' : '');\n        var endNode = this.parent.enterKey === 'P' ? '</p>' : (this.parent.enterKey === 'DIV' ? '</div>' : '<br>');\n        for (var i = 0; i < enterSplitText.length; i++) {\n            var content = enterSplitText[i];\n            var contentWithSpace = this.makeSpace(content);\n            var contentWithLineBreak = contentWithSpace.replace(/\\r\\n|\\n/g, '<br>');\n            if (i === 0) {\n                if (this.parent.enterKey === 'BR') {\n                    finalText += (contentWithLineBreak + endNode);\n                }\n                else {\n                    finalText += contentWithLineBreak; // In order to merge the content in current line. No P/Div tag is added.\n                }\n            }\n            else {\n                if (this.parent.enterKey === 'BR') {\n                    if (i === enterSplitText.length - 1) {\n                        finalText += (contentWithLineBreak + endNode);\n                    }\n                    else {\n                        finalText += (contentWithLineBreak + endNode + endNode);\n                    }\n                }\n                else {\n                    finalText += startNode + contentWithLineBreak + endNode;\n                }\n            }\n        }\n        return finalText;\n    };\n    PasteCleanup.prototype.makeSpace = function (text) {\n        var spacedContent = '';\n        if (text === '') {\n            return text;\n        }\n        var lineBreakSplitText = text.split(' ');\n        for (var i = 0; i < lineBreakSplitText.length; i++) {\n            var currentText = lineBreakSplitText[i];\n            if (currentText === '') {\n                spacedContent += '&nbsp;';\n            }\n            else if (currentText === '\\t') {\n                spacedContent += '&nbsp;&nbsp;&nbsp;&nbsp;';\n            }\n            else {\n                if (i > 0 && i < lineBreakSplitText.length) {\n                    spacedContent += ' ';\n                }\n                spacedContent += currentText;\n            }\n        }\n        spacedContent = spacedContent.replace(/\\t/g, '&nbsp;&nbsp;&nbsp;&nbsp;');\n        spacedContent = spacedContent.replace(/&nbsp;&nbsp;/g, '&nbsp; ');\n        return spacedContent;\n    };\n    PasteCleanup.prototype.imgUploading = function (elm) {\n        var allImgElm = elm.querySelectorAll('.pasteContent_Img');\n        if (this.parent.insertImageSettings.saveUrl && allImgElm.length > 0) {\n            var base64Src = [];\n            var imgName = [];\n            var uploadImg = [];\n            for (var i = 0; i < allImgElm.length; i++) {\n                if (!isNOU(allImgElm[i].getAttribute('src')) &&\n                    allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n                    base64Src.push(allImgElm[i].getAttribute('src'));\n                    imgName.push(getUniqueID('rte_image'));\n                    uploadImg.push(allImgElm[i]);\n                }\n            }\n            var fileList = [];\n            for (var i = 0; i < base64Src.length; i++) {\n                fileList.push(this.base64ToFile(base64Src[i], imgName[i]));\n            }\n            for (var i = 0; i < fileList.length; i++) {\n                this.uploadMethod(fileList[i], uploadImg[i]);\n            }\n            if (isNOU(this.parent.insertImageSettings.path) &&\n                this.parent.insertImageSettings.saveFormat === 'Blob') {\n                this.getBlob(allImgElm);\n            }\n        }\n        else if (this.parent.insertImageSettings.saveFormat === 'Blob') {\n            this.getBlob(allImgElm);\n        }\n        var allImgElmId = elm.querySelectorAll('.pasteContent_Img');\n        for (var i = 0; i < allImgElmId.length; i++) {\n            allImgElmId[i].classList.remove('pasteContent_Img');\n            if (allImgElmId[i].getAttribute('class').trim() === '') {\n                allImgElm[i].removeAttribute('class');\n            }\n        }\n    };\n    PasteCleanup.prototype.getBlob = function (allImgElm) {\n        for (var i = 0; i < allImgElm.length; i++) {\n            if (!isNOU(allImgElm[i].getAttribute('src')) &&\n                allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n                var blopUrl = URL.createObjectURL(convertToBlob(allImgElm[i].getAttribute('src')));\n                allImgElm[i].setAttribute('src', blopUrl);\n            }\n        }\n    };\n    PasteCleanup.prototype.toolbarEnableDisable = function (state) {\n        if (!this.parent.inlineMode.enable) {\n            this.parent.toolbarModule.baseToolbar.toolbarObj.disable(state);\n        }\n    };\n    PasteCleanup.prototype.uploadMethod = function (file, imgElem) {\n        var _this = this;\n        imgElem.style.opacity = '0.5';\n        var popupEle = this.parent.createElement('div');\n        this.parent.rootContainer.appendChild(popupEle);\n        var contentEle = this.parent.createElement('input', {\n            id: this.parent.getID() + '_upload', attrs: { type: 'File', name: 'UploadFiles' }\n        });\n        var offsetY = this.parent.iframeSettings.enable ? -50 : -90;\n        this.popupObj = new Popup(popupEle, {\n            relateTo: imgElem,\n            height: '85px',\n            width: '300px',\n            offsetY: offsetY,\n            content: contentEle,\n            viewPortElement: this.parent.element,\n            position: { X: 'center', Y: 'top' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            // eslint-disable-next-line\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n            }\n        });\n        this.popupObj.element.style.display = 'none';\n        addClass([this.popupObj.element], [classes.CLS_POPUP_OPEN, classes.CLS_RTE_UPLOAD_POPUP]);\n        if (!isNOU(this.parent.cssClass)) {\n            addClass([this.popupObj.element], this.parent.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        var timeOut = file.size > 1000000 ? 300 : 100;\n        this.refreshPopupTime = setTimeout(function () {\n            _this.refreshPopup(imgElem, _this.popupObj);\n        }, timeOut);\n        this.uploadObj = new Uploader({\n            asyncSettings: {\n                saveUrl: this.parent.insertImageSettings.saveUrl,\n                removeUrl: this.parent.insertImageSettings.removeUrl\n            },\n            cssClass: classes.CLS_RTE_DIALOG_UPLOAD,\n            dropArea: this.parent.inputElement,\n            allowedExtensions: this.parent.insertImageSettings.allowedTypes.toString(),\n            success: function (e) {\n                _this.popupClose(_this.popupObj, _this.uploadObj, imgElem, e);\n            },\n            uploading: function (e) {\n                if (!_this.parent.isServerRendered) {\n                    _this.parent.trigger(events.imageUploading, e, function (imageUploadingArgs) {\n                        if (imageUploadingArgs.cancel) {\n                            if (!isNullOrUndefined(imgElem)) {\n                                detach(imgElem);\n                            }\n                            if (!isNullOrUndefined(_this.popupObj.element)) {\n                                detach(_this.popupObj.element);\n                            }\n                        }\n                        else {\n                            _this.parent.inputElement.contentEditable = 'false';\n                        }\n                    });\n                }\n            },\n            beforeUpload: function (args) {\n                _this.parent.trigger(events.beforeImageUpload, args);\n                _this.toolbarEnableDisable(true);\n            },\n            failure: function (e) {\n                _this.failureTime = setTimeout(function () {\n                    _this.uploadFailure(imgElem, _this.uploadObj, _this.popupObj, e);\n                }, 900);\n            },\n            canceling: function () {\n                _this.parent.inputElement.contentEditable = 'true';\n                if (imgElem.nextSibling.textContent === ' ') {\n                    detach(imgElem.nextSibling);\n                }\n                detach(imgElem);\n                _this.popupObj.close();\n            },\n            selected: function (e) {\n                e.cancel = true;\n            },\n            removing: function () {\n                _this.parent.inputElement.contentEditable = 'true';\n                if (imgElem.nextSibling.textContent === ' ') {\n                    detach(imgElem.nextSibling);\n                }\n                detach(imgElem);\n                _this.popupObj.close();\n            }\n        });\n        this.uploadObj.appendTo(this.popupObj.element.childNodes[0]);\n        var fileInfo = [{\n                name: file.name,\n                rawFile: file,\n                size: file.size,\n                type: file.type,\n                status: 'Ready to Upload',\n                validationMessages: { minSize: '', maxSize: '' },\n                statusCode: '1'\n            }];\n        this.uploadObj.createFileList(fileInfo);\n        this.uploadObj.upload(fileInfo);\n        this.popupObj.element.getElementsByClassName('e-file-select-wrap')[0].style.display = 'none';\n        detach(this.popupObj.element.querySelector('.e-rte-dialog-upload .e-file-select-wrap'));\n    };\n    PasteCleanup.prototype.uploadFailure = function (imgElem, uploadObj, popupObj, e) {\n        if (this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.inputElement.contentEditable = 'true';\n        detach(imgElem);\n        if (popupObj) {\n            popupObj.close();\n        }\n        this.parent.trigger(events.imageUploadFailed, e);\n        if (uploadObj && document.body.contains(uploadObj.element)) {\n            uploadObj.destroy();\n        }\n    };\n    PasteCleanup.prototype.popupClose = function (popupObj, uploadObj, imgElem, e) {\n        var _this = this;\n        this.parent.inputElement.contentEditable = 'true';\n        e.element = imgElem;\n        e.detectImageSource = ImageInputSource.Pasted;\n        var element = e.file;\n        if (element.statusCode === '2') {\n            this.parent.trigger(events.imageUploadSuccess, e, function (e) {\n                if (!isNullOrUndefined(_this.parent.insertImageSettings.path)) {\n                    var url = _this.parent.insertImageSettings.path + e.file.name;\n                    imgElem.src = url;\n                    imgElem.setAttribute('alt', e.file.name);\n                }\n            });\n        }\n        else if (element.statusCode === '5') {\n            this.parent.trigger(events.imageRemoving, e, function (e) {\n                if (!isNullOrUndefined(e.element.src)) {\n                    e.element.src = '';\n                }\n            });\n        }\n        this.popupCloseTime = setTimeout(function () {\n            popupObj.close();\n            imgElem.style.opacity = '1';\n            _this.toolbarEnableDisable(false);\n            if (uploadObj && document.body.contains(uploadObj.element)) {\n                uploadObj.destroy();\n            }\n        }, 1500);\n    };\n    PasteCleanup.prototype.refreshPopup = function (imageElement, popupObj) {\n        var imgPosition = this.parent.iframeSettings.enable ? this.parent.element.offsetTop +\n            imageElement.offsetTop : imageElement.offsetTop;\n        var rtePosition = this.parent.element.offsetTop + this.parent.element.offsetHeight;\n        if (imgPosition > rtePosition) {\n            popupObj.relateTo = this.parent.inputElement;\n            popupObj.offsetY = this.parent.iframeSettings.enable ? -30 : -65;\n            popupObj.element.style.display = 'block';\n        }\n        else {\n            if (popupObj) {\n                popupObj.refreshPosition(imageElement);\n                popupObj.element.style.display = 'block';\n            }\n        }\n    };\n    PasteCleanup.prototype.base64ToFile = function (base64, filename) {\n        var baseStr = base64.split(',');\n        var typeStr = baseStr[0].match(/:(.*?);/)[1];\n        var extension = typeStr.split('/')[1];\n        var decodeStr = atob(baseStr[1]);\n        var strLen = decodeStr.length;\n        var decodeArr = new Uint8Array(strLen);\n        while (strLen--) {\n            decodeArr[strLen] = decodeStr.charCodeAt(strLen);\n        }\n        if (Browser.isIE || navigator.appVersion.indexOf('Edge') > -1) {\n            var blob = new Blob([decodeArr], { type: extension });\n            extend(blob, { name: filename + '.' + (!isNOU(extension) ? extension : '') });\n            return blob;\n        }\n        else {\n            return new File([decodeArr], filename + '.' + (!isNOU(extension) ? extension : ''), { type: extension });\n        }\n    };\n    /**\n     * Method for image formatting when pasting\n     *\n     * @param {Object} pasteArgs - specifies the paste arguments.\n     * @param {Element []} imgElement - specifies the array elements.\n     * @returns {void}\n     * @hidden\n\n     */\n    PasteCleanup.prototype.imageFormatting = function (pasteArgs, imgElement) {\n        if (!isNOU(imgElement.elements[0].getAttribute('src'))) {\n            imgElement.elements[0].classList.add('pasteContent_Img');\n        }\n        var imageElement = this.parent.createElement('span');\n        imageElement.appendChild(imgElement.elements[0]);\n        var imageValue = imageElement.innerHTML;\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        var currentDocument = this.contentRenderer.getDocument();\n        var range = this.nodeSelectionObj.getRange(currentDocument);\n        this.saveSelection = this.nodeSelectionObj.save(range, currentDocument);\n        if (this.parent.pasteCleanupSettings.prompt) {\n            this.pasteDialog(imageValue, pasteArgs, false);\n        }\n        else if (this.parent.pasteCleanupSettings.plainText) {\n            this.plainFormatting(imageValue, pasteArgs, false);\n        }\n        else if (this.parent.pasteCleanupSettings.keepFormat) {\n            this.formatting(imageValue, false, pasteArgs);\n        }\n        else {\n            this.formatting(imageValue, true, pasteArgs);\n        }\n    };\n    PasteCleanup.prototype.radioRender = function () {\n        this.keepRadioButton = new RadioButton({ label: this.i10n.getConstant('keepFormat'),\n            name: 'pasteOption', checked: true });\n        this.keepRadioButton.isStringTemplate = true;\n        var keepFormatElement = this.parent.element.querySelector('#keepFormating');\n        this.keepRadioButton.appendTo(keepFormatElement);\n        this.cleanRadioButton = new RadioButton({ label: this.i10n.getConstant('cleanFormat'), name: 'pasteOption' });\n        this.cleanRadioButton.isStringTemplate = true;\n        var cleanFormatElement = this.parent.element.querySelector('#cleanFormat');\n        this.cleanRadioButton.appendTo(cleanFormatElement);\n        this.plainTextRadioButton = new RadioButton({ label: this.i10n.getConstant('plainText'), name: 'pasteOption' });\n        this.plainTextRadioButton.isStringTemplate = true;\n        var plainTextElement = this.parent.element.querySelector('#plainTextFormat');\n        this.plainTextRadioButton.appendTo(plainTextElement);\n    };\n    PasteCleanup.prototype.selectFormatting = function (value, args, keepChecked, cleanChecked, isClipboardHTMLDataNull) {\n        if (keepChecked) {\n            this.formatting(value, false, args);\n        }\n        else if (cleanChecked) {\n            this.formatting(value, true, args);\n        }\n        else {\n            this.plainFormatting(value, args, isClipboardHTMLDataNull);\n        }\n    };\n    PasteCleanup.prototype.pasteDialog = function (value, args, isClipboardHTMLDataNull) {\n        var _this = this;\n        var dialogModel = {\n            buttons: [\n                {\n                    click: function () {\n                        if (!_this.dialogObj.isDestroyed) {\n                            var keepChecked = _this.parent.element.querySelector('#keepFormating').checked;\n                            var cleanChecked = _this.parent.element.querySelector('#cleanFormat').checked;\n                            _this.dialogObj.hide();\n                            var argument = _this.dialogObj;\n                            _this.dialogRenderObj.close(argument);\n                            _this.dialogObj.destroy();\n                            _this.selectFormatting(value, args, keepChecked, cleanChecked, isClipboardHTMLDataNull);\n                        }\n                    },\n                    buttonModel: {\n                        isPrimary: true,\n                        cssClass: 'e-flat ' + CLS_RTE_PASTE_OK,\n                        content: this.i10n.getConstant('pasteDialogOk')\n                    }\n                },\n                {\n                    click: function () {\n                        if (!_this.dialogObj.isDestroyed) {\n                            _this.dialogObj.hide();\n                            var args_1 = _this.dialogObj;\n                            _this.dialogRenderObj.close(args_1);\n                            _this.dialogObj.destroy();\n                        }\n                    },\n                    buttonModel: {\n                        cssClass: 'e-flat ' + CLS_RTE_PASTE_CANCEL,\n                        content: this.i10n.getConstant('pasteDialogCancel')\n                    }\n                }\n            ],\n            header: this.i10n.getConstant('pasteFormat'),\n            content: this.i10n.getConstant('pasteFormatContent') + '<br/><div><div style=\"padding-top:24px;\">' +\n                '<input type=\"radio\" class=\"' + CLS_RTE_PASTE_KEEP_FORMAT + '\" id=\"keepFormating\"/>' +\n                '</div><div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' +\n                CLS_RTE_PASTE_REMOVE_FORMAT + '\" id=\"cleanFormat\"/></div>' +\n                '<div style=\"padding-top:20px;\"><input type=\"radio\" class=\"' +\n                CLS_RTE_PASTE_PLAIN_FORMAT + '\" id=\"plainTextFormat\"/></div></div>',\n            target: this.parent.element,\n            width: '300px',\n            height: '265px',\n            cssClass: CLS_RTE_DIALOG_MIN_HEIGHT,\n            isModal: Browser.isDevice,\n            visible: false\n        };\n        this.dialogObj = this.dialogRenderObj.render(dialogModel);\n        var rteDialogWrapper = this.parent.element.querySelector('#' + this.parent.getID()\n            + '_pasteCleanupDialog');\n        if (rteDialogWrapper !== null && rteDialogWrapper.innerHTML !== '') {\n            this.destroyDialog(rteDialogWrapper);\n        }\n        if (rteDialogWrapper === null) {\n            rteDialogWrapper = this.parent.createElement('div', {\n                id: this.parent.getID() + '_pasteCleanupDialog'\n            });\n            this.parent.rootContainer.appendChild(rteDialogWrapper);\n        }\n        this.dialogObj.appendTo(rteDialogWrapper);\n        this.radioRender();\n        this.dialogObj.show();\n        this.setCssClass({ cssClass: this.parent.getCssClass() });\n    };\n    PasteCleanup.prototype.updateCss = function (currentObj, e) {\n        if (currentObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    PasteCleanup.prototype.setCssClass = function (e) {\n        if (this.popupObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                addClass([this.popupObj.element], e.cssClass);\n            }\n            else {\n                removeClass([this.popupObj.element], e.oldCssClass);\n                addClass([this.popupObj.element], e.cssClass);\n            }\n        }\n        this.updateCss(this.dialogObj, e);\n        this.updateCss(this.uploadObj, e);\n        this.updateCss(this.plainTextRadioButton, e);\n        this.updateCss(this.cleanRadioButton, e);\n        this.updateCss(this.keepRadioButton, e);\n    };\n    PasteCleanup.prototype.destroyDialog = function (rteDialogWrapper) {\n        var rteDialogContainer = this.parent.element.querySelector('.e-rte-dialog-minheight');\n        detach(rteDialogContainer);\n        var rteDialogWrapperChildLength = rteDialogWrapper.children.length;\n        for (var i = 0; i < rteDialogWrapperChildLength; i++) {\n            detach(rteDialogWrapper.children[0]);\n        }\n    };\n    PasteCleanup.prototype.docClick = function (e) {\n        var target = e.args.target;\n        if (target && target.classList && ((this.dialogObj && !closest(target, '[id=' + '\\'' + this.dialogObj.element.id + '\\'' + ']')))\n            && (!target.classList.contains('e-toolbar-item'))) {\n            if (this.dialogObj) {\n                this.dialogObj.hide();\n            }\n        }\n    };\n    PasteCleanup.prototype.cleanAppleClass = function (elem) {\n        var appleClassElem = elem.querySelectorAll('br.Apple-interchange-newline');\n        for (var i = 0; i < appleClassElem.length; i++) {\n            detach(appleClassElem[i]);\n        }\n        return elem;\n    };\n    PasteCleanup.prototype.formatting = function (value, clean, args) {\n        var _this = this;\n        var clipBoardElem = this.parent.createElement('div', { className: 'pasteContent', styles: 'display:inline;' });\n        if (this.isNotFromHtml && this.containsHtml) {\n            value = this.splitBreakLine(value);\n        }\n        clipBoardElem.innerHTML = value;\n        clipBoardElem = this.cleanAppleClass(clipBoardElem);\n        if (this.parent.pasteCleanupSettings.deniedTags !== null) {\n            clipBoardElem = this.deniedTags(clipBoardElem);\n        }\n        if (clean) {\n            clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n        }\n        else if (this.parent.pasteCleanupSettings.deniedAttrs !== null) {\n            clipBoardElem = this.deniedAttributes(clipBoardElem, clean);\n        }\n        if (this.parent.pasteCleanupSettings.allowedStyleProps !== null) {\n            clipBoardElem = this.allowedStyle(clipBoardElem);\n        }\n        this.saveSelection.restore();\n        var newText = clipBoardElem.innerHTML.split('&').join('&amp;');\n        clipBoardElem.innerHTML = this.sanitizeHelper(newText);\n        var allImg = clipBoardElem.querySelectorAll('img');\n        for (var i = 0; i < allImg.length; i++) {\n            if (!isNOU(allImg[i].getAttribute('src'))) {\n                allImg[i].classList.add('pasteContent_Img');\n            }\n            this.setImageProperties(allImg[i]);\n        }\n        this.addTempClass(clipBoardElem);\n        if (clipBoardElem.querySelectorAll('picture').length > 0) {\n            this.processPictureElement(clipBoardElem);\n        }\n        if (clipBoardElem.textContent !== '' || !isNOU(clipBoardElem.querySelector('img')) ||\n            !isNOU(clipBoardElem.querySelector('table'))) {\n            var tempWrapperElem = this.parent.createElement('div');\n            tempWrapperElem.innerHTML = value;\n            var filesData = [];\n            if (!isNOU(tempWrapperElem.querySelector('img'))) {\n                var imgElem = tempWrapperElem.querySelectorAll('img');\n                var base64Src = [];\n                var imgName = [];\n                var uploadImg = [];\n                for (var i = 0; i < imgElem.length; i++) {\n                    if (imgElem[i].getAttribute('src') &&\n                        imgElem[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n                        base64Src.push(imgElem[i].getAttribute('src'));\n                        imgName.push(getUniqueID('rte_image'));\n                        uploadImg.push(imgElem[i]);\n                    }\n                }\n                var fileList = [];\n                var currentData = void 0;\n                for (var i = 0; i < base64Src.length; i++) {\n                    fileList.push(this.base64ToFile(base64Src[i], imgName[i]));\n                    currentData = {\n                        name: fileList[i].name, rawFile: fileList[i],\n                        size: fileList[i].size, type: fileList[i].type,\n                        status: '', validationMessages: { minSize: '', maxSize: '' }, statusCode: '1'\n                    };\n                    filesData.push(currentData);\n                }\n            }\n            this.parent.trigger(events.afterPasteCleanup, { value: clipBoardElem.innerHTML, filesData: filesData }, function (updatedArgs) { value = updatedArgs.value; });\n            clipBoardElem.innerHTML = this.parent.addAnchorAriaLabel(value);\n            clipBoardElem = this.addTableClass(clipBoardElem, args.pasteTableSource);\n            this.parent.formatter.editorManager.execCommand('inserthtml', 'pasteCleanup', args, function (returnArgs) {\n                extend(args, { elements: returnArgs.elements, imageElements: returnArgs.imgElem }, true);\n                _this.parent.formatter.onSuccess(_this.parent, args);\n            }, clipBoardElem, null, null, this.parent.enterKey);\n            this.parent.notify(events.autoResize, {});\n            scrollToCursor(this.parent.contentModule.getDocument(), this.parent.inputElement);\n            this.removeTempClass();\n            this.parent.notify(events.toolbarRefresh, {});\n            this.cropImageHandler(this.parent.inputElement);\n        }\n    };\n    PasteCleanup.prototype.convertBlobToBase64 = function (element) {\n        var imgElem = element.querySelectorAll('img');\n        var _loop_1 = function (i) {\n            if (imgElem[i].getAttribute('src') &&\n                imgElem[i].getAttribute('src').startsWith('blob')) {\n                var blobImageUrl = imgElem[i].getAttribute('src');\n                var img_1 = new Image();\n                var onImageLoadEvent_1 = function () {\n                    var canvas = document.createElement('canvas');\n                    var ctx = canvas.getContext('2d');\n                    canvas.width = img_1.width;\n                    canvas.height = img_1.height;\n                    ctx.drawImage(img_1, 0, 0);\n                    var base64String = canvas.toDataURL('image/png');\n                    imgElem[i].src = base64String;\n                    img_1.removeEventListener('load', onImageLoadEvent_1);\n                };\n                img_1.src = blobImageUrl;\n                img_1.addEventListener('load', onImageLoadEvent_1);\n            }\n        };\n        for (var i = 0; i < imgElem.length; i++) {\n            _loop_1(i);\n        }\n    };\n    PasteCleanup.prototype.cropImageHandler = function (element) {\n        var _this = this;\n        var allImgElm = element.querySelectorAll('.e-img-cropped');\n        if (allImgElm.length > 0) {\n            var _loop_2 = function (i) {\n                if (allImgElm[i].getAttribute('src').split(',')[0].indexOf('base64') >= 0) {\n                    var image_1 = new Image();\n                    image_1.src = allImgElm[i].getAttribute('src');\n                    var canvas_1 = document.createElement('canvas');\n                    var ctx_1 = canvas_1.getContext('2d');\n                    image_1.onload = function () {\n                        var wGoalWidth = _this.cropImageData[i].goalWidth / image_1.naturalWidth;\n                        var hGoalHeight = _this.cropImageData[i].goalHeight / image_1.naturalHeight;\n                        var cropLength = _this.cropImageData[i].cropLength / wGoalWidth;\n                        var cropTop = _this.cropImageData[i].cropTop / hGoalHeight;\n                        var cropWidth = (_this.cropImageData[i].goalWidth -\n                            _this.cropImageData[i].cropLength -\n                            _this.cropImageData[i].cropR) / wGoalWidth;\n                        var cropHeight = (_this.cropImageData[i].goalHeight -\n                            _this.cropImageData[i].cropTop -\n                            _this.cropImageData[i].cropB) / hGoalHeight;\n                        canvas_1.width = cropWidth;\n                        canvas_1.height = cropHeight;\n                        // Draw the cropped portion of the image onto the canvas\n                        ctx_1.drawImage(image_1, cropLength, cropTop, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\n                        // Convert the cropped canvas to a base64 encoded image\n                        var croppedBase64 = canvas_1.toDataURL('image/png');\n                        // Call the provided callback with the cropped base64 data\n                        allImgElm[i].setAttribute('src', croppedBase64);\n                        allImgElm[i].classList.remove('e-img-cropped');\n                        _this.imgUploading(_this.parent.inputElement);\n                        if (_this.parent.iframeSettings.enable) {\n                            _this.parent.updateValue();\n                        }\n                    };\n                }\n            };\n            for (var i = 0; i < allImgElm.length; i++) {\n                _loop_2(i);\n            }\n        }\n        else {\n            if (!isNOU(this.parent.insertImageSettings.saveUrl) && !isNOU(this.parent.insertImageSettings.path) &&\n                this.parent.inputElement.querySelectorAll('img').length > 0 && this.parent.inputElement.querySelectorAll('img')[0].src.startsWith('blob')) {\n                this.convertBlobToBase64(this.parent.inputElement);\n                this.iframeUploadTime = setTimeout(function () {\n                    _this.imgUploading(_this.parent.inputElement);\n                    if (_this.parent.iframeSettings.enable) {\n                        _this.parent.updateValue();\n                    }\n                }, 20);\n            }\n            else {\n                this.imgUploading(this.parent.inputElement);\n                if (this.parent.iframeSettings.enable) {\n                    this.parent.updateValue();\n                }\n            }\n        }\n    };\n    PasteCleanup.prototype.addTableClass = function (element, source) {\n        var tableElement = element.querySelectorAll('table');\n        for (var i = 0; i < tableElement.length; i++) {\n            var isMSTeamsTable = tableElement[i].parentElement.nodeName === 'FIGURE';\n            if (tableElement[i].classList.length > 0 && tableElement[i].classList.contains('e-rte-custom-table')) {\n                continue; // Skip the custom table class\n            }\n            if (this.parent.pasteCleanupSettings.keepFormat && source && !isMSTeamsTable) {\n                tableElement[i].classList.add('e-rte-paste-' + source + '-table');\n            }\n            else if (!tableElement[i].classList.contains('e-rte-table')) {\n                tableElement[i].classList.add('e-rte-table');\n            }\n        }\n        return element;\n    };\n    PasteCleanup.prototype.setImageProperties = function (allImg) {\n        if (this.parent.insertImageSettings.width !== 'auto') {\n            allImg.setAttribute('width', this.parent.insertImageSettings.width);\n        }\n        if (this.parent.insertImageSettings.minWidth !== '0' && this.parent.insertImageSettings.minWidth !== 0) {\n            allImg.style.minWidth = this.parent.insertImageSettings.minWidth.toString();\n        }\n        if (this.parent.insertImageSettings.maxWidth !== null) {\n            allImg.style.maxWidth = this.parent.getInsertImgMaxWidth().toString();\n        }\n        if (this.parent.insertImageSettings.height !== 'auto') {\n            allImg.setAttribute('height', this.parent.insertImageSettings.height);\n        }\n        if (this.parent.insertImageSettings.minHeight !== '0' && this.parent.insertImageSettings.minHeight !== 0) {\n            allImg.style.minHeight = this.parent.insertImageSettings.minHeight.toString();\n        }\n        if (this.parent.insertImageSettings.maxHeight !== null) {\n            allImg.style.maxHeight = this.parent.insertImageSettings.maxHeight.toString();\n        }\n    };\n    PasteCleanup.prototype.addTempClass = function (clipBoardElem) {\n        var allChild = clipBoardElem.children;\n        for (var i = 0; i < allChild.length; i++) {\n            allChild[i].classList.add('pasteContent_RTE');\n        }\n    };\n    PasteCleanup.prototype.removeTempClass = function () {\n        var classElm = this.parent.inputElement.querySelectorAll('.pasteContent_RTE');\n        for (var i = 0; i < classElm.length; i++) {\n            classElm[i].classList.remove('pasteContent_RTE');\n            if (classElm[i].getAttribute('class') === '') {\n                classElm[i].removeAttribute('class');\n            }\n        }\n    };\n    PasteCleanup.prototype.sanitizeHelper = function (value) {\n        value = sanitizeHelper(value, this.parent);\n        return value;\n    };\n    //Plain Formatting\n    PasteCleanup.prototype.plainFormatting = function (value, args, isClipboardHTMLDataNull) {\n        var _this = this;\n        var clipBoardElem = this.parent.createElement('div', { className: 'pasteContent', styles: 'display:inline;' });\n        clipBoardElem.innerHTML = value;\n        this.detachInlineElements(clipBoardElem);\n        this.getTextContent(clipBoardElem);\n        if (clipBoardElem.textContent.trim() !== '') {\n            if (!isNOU(clipBoardElem.firstElementChild) && clipBoardElem.firstElementChild.tagName !== 'BR') {\n                var firstElm = clipBoardElem.firstElementChild;\n                if (!isNOU(clipBoardElem.firstElementChild)) {\n                    var spanElm = this.parent.createElement('span');\n                    for (var i = 0, j = 0; i < firstElm.childNodes.length; i++, j++) {\n                        if (firstElm.childNodes[i].nodeName === '#text') {\n                            spanElm.appendChild(firstElm.childNodes[i]);\n                            clipBoardElem.insertBefore(spanElm, clipBoardElem.firstElementChild);\n                            i--;\n                        }\n                        else if (firstElm.childNodes[i].nodeName !== '#text' && j === 0) {\n                            for (var k = 0; k < firstElm.childNodes[i].childNodes.length; k++) {\n                                spanElm.appendChild(firstElm.childNodes[i].childNodes[k]);\n                                clipBoardElem.insertBefore(spanElm, clipBoardElem.firstElementChild);\n                                k--;\n                            }\n                            i--;\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                    if (!firstElm.hasChildNodes()) {\n                        detach(firstElm);\n                    }\n                }\n            }\n            this.removeEmptyElements(clipBoardElem);\n            this.saveSelection.restore();\n            clipBoardElem.innerHTML = this.sanitizeHelper(clipBoardElem.innerHTML);\n            this.addTempClass(clipBoardElem);\n            this.removingComments(clipBoardElem);\n            if (this.parent.enterKey === 'BR' && !isClipboardHTMLDataNull) {\n                clipBoardElem = this.reframeToBrContent(clipBoardElem);\n            }\n            else if (this.parent.enterKey === 'DIV') {\n                clipBoardElem.innerHTML = clipBoardElem.innerHTML.replace(/<p class=\"pasteContent_RTE\">/g, '<div>').replace(/<\\/p>/g, '</div>');\n            }\n            this.parent.trigger(events.afterPasteCleanup, { value: clipBoardElem.innerHTML, filesData: null }, function (updatedArgs) { value = updatedArgs.value; });\n            clipBoardElem.innerHTML = value;\n            this.parent.formatter.editorManager.execCommand('inserthtml', 'pasteCleanup', args, function (returnArgs) {\n                extend(args, { elements: returnArgs.elements, imageElements: returnArgs.imgElem }, true);\n                _this.parent.formatter.onSuccess(_this.parent, args);\n            }, clipBoardElem, null, null, this.parent.enterKey);\n            this.removeTempClass();\n        }\n        else {\n            this.saveSelection.restore();\n            extend(args, { elements: [] }, true);\n            this.parent.formatter.onSuccess(this.parent, args);\n        }\n    };\n    PasteCleanup.prototype.removingComments = function (elm) {\n        var innerElement = elm.innerHTML;\n        innerElement = innerElement.replace(/<!--[\\s\\S]*?-->/g, '');\n        elm.innerHTML = innerElement;\n    };\n    PasteCleanup.prototype.reframeToBrContent = function (clipBoardElem) {\n        var newClipBoardElem = this.parent.createElement('div', { className: 'pasteContent', styles: 'display:inline;' });\n        while (!isNOU(clipBoardElem.firstChild)) {\n            var brElem = this.parent.createElement('br');\n            var currentFirstChild = clipBoardElem.firstChild;\n            if (currentFirstChild.nodeName === '#text') {\n                var isNextSibPresent = !isNOU(currentFirstChild.nextSibling);\n                newClipBoardElem.appendChild(currentFirstChild);\n                if (isNextSibPresent) {\n                    newClipBoardElem.appendChild(brElem);\n                }\n            }\n            else {\n                var isCurrentNodeBRElm = currentFirstChild.nodeName === 'BR';\n                if (isCurrentNodeBRElm) {\n                    newClipBoardElem.appendChild(currentFirstChild);\n                }\n                else {\n                    newClipBoardElem.appendChild(currentFirstChild.childNodes[0]);\n                }\n                if (!isNOU(currentFirstChild) && !isNOU(currentFirstChild.nextSibling)) {\n                    newClipBoardElem.appendChild(brElem);\n                }\n                if (!isCurrentNodeBRElm && !isNOU(currentFirstChild)) {\n                    detach(currentFirstChild);\n                }\n            }\n        }\n        return newClipBoardElem;\n    };\n    PasteCleanup.prototype.getTextContent = function (clipBoardElem) {\n        for (var i = 0; i < this.blockNode.length; i++) {\n            var inElem = clipBoardElem.querySelectorAll(this.blockNode[i]);\n            for (var j = 0; j < inElem.length; j++) {\n                var parElem = void 0;\n                for (var k = 0, l = 0, preNode = void 0; k < inElem[j].childNodes.length; k++, l++) {\n                    if (inElem[j].childNodes[k].nodeName === 'DIV' || inElem[j].childNodes[k].nodeName === 'P' ||\n                        (inElem[j].childNodes[k].nodeName === '#text' &&\n                            (inElem[j].childNodes[k].nodeValue.replace(/\\u00a0/g, '&nbsp;') !== '&nbsp;') &&\n                            inElem[j].childNodes[k].textContent.trim() === '')) {\n                        parElem = inElem[j].childNodes[k].parentElement;\n                        inElem[j].childNodes[k].parentElement.parentElement.insertBefore(inElem[j].childNodes[k], inElem[j].childNodes[k].parentElement);\n                        k--;\n                    }\n                    else {\n                        parElem = inElem[j].childNodes[k].parentElement;\n                        if (preNode === 'text') {\n                            var previousElem = parElem.previousElementSibling;\n                            previousElem.appendChild(inElem[j].childNodes[k]);\n                        }\n                        else {\n                            var divElement = this.parent.createElement('div', { id: 'newDiv' });\n                            divElement.appendChild(inElem[j].childNodes[k]);\n                            parElem.parentElement.insertBefore(divElement, parElem);\n                        }\n                        k--;\n                        preNode = 'text';\n                    }\n                }\n                if (!isNOU(parElem)) {\n                    detach(parElem);\n                }\n            }\n        }\n        var allElems = clipBoardElem.querySelectorAll('*');\n        for (var i = 0; i < allElems.length; i++) {\n            var allAtr = allElems[i].attributes;\n            for (var j = 0; j < allAtr.length; j++) {\n                allElems[i].removeAttribute(allAtr[j].name);\n                j--;\n            }\n        }\n    };\n    PasteCleanup.prototype.detachInlineElements = function (clipBoardElem) {\n        for (var i = 0; i < this.inlineNode.length; i++) {\n            var inElem = clipBoardElem.querySelectorAll(this.inlineNode[i]);\n            for (var j = 0; j < inElem.length; j++) {\n                if (!(inElem[j] === clipBoardElem.firstChild && inElem[j].nodeName === 'SPAN')) {\n                    var parElem = void 0;\n                    for (var k = 0; k < inElem[j].childNodes.length; k++) {\n                        parElem = inElem[j].childNodes[k].parentElement;\n                        inElem[j].childNodes[k].parentElement.parentElement.insertBefore(inElem[j].childNodes[k], inElem[j].childNodes[k].parentElement);\n                        k--;\n                    }\n                    if (!isNOU(parElem)) {\n                        detach(parElem);\n                    }\n                }\n            }\n        }\n    };\n    PasteCleanup.prototype.findDetachEmptyElem = function (element) {\n        var removableElement;\n        if (!isNOU(element) && !isNOU(element.parentElement)) {\n            var hasNbsp = element.parentElement.textContent.length > 0 && element.parentElement.textContent.match(/\\u00a0/g)\n                && element.parentElement.textContent.match(/\\u00a0/g).length > 0;\n            if (!hasNbsp && element.parentElement.textContent.trim() === '' &&\n                element.parentElement.getAttribute('class') !== 'pasteContent') {\n                removableElement = this.findDetachEmptyElem(element.parentElement);\n            }\n            else {\n                removableElement = element;\n            }\n        }\n        else {\n            removableElement = null;\n        }\n        return removableElement;\n    };\n    PasteCleanup.prototype.removeEmptyElements = function (element) {\n        var emptyElements = element.querySelectorAll(':empty');\n        for (var i = 0; i < emptyElements.length; i++) {\n            if (emptyElements[i].tagName !== 'BR') {\n                var detachableElement = this.findDetachEmptyElem(emptyElements[i]);\n                if (!isNOU(detachableElement)) {\n                    detach(detachableElement);\n                }\n            }\n        }\n    };\n    //GroupingTags\n    PasteCleanup.prototype.tagGrouping = function (deniedTags) {\n        var groupingTags = deniedTags.slice();\n        var keys = Object.keys(pasteCleanupGroupingTags);\n        var values = keys.map(function (key) {\n            return pasteCleanupGroupingTags[\"\" + key];\n        });\n        var addTags = [];\n        for (var i = 0; i < groupingTags.length; i++) {\n            //The value split using '[' because to retrieve the tag name from the user given format which may contain tag with attributes\n            if (groupingTags[i].split('[').length > 1) {\n                groupingTags[i] = groupingTags[i].split('[')[0].trim();\n            }\n            if (keys.indexOf(groupingTags[i]) > -1) {\n                for (var j = 0; j < values[keys.indexOf(groupingTags[i])].length; j++) {\n                    if (groupingTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0 &&\n                        addTags.indexOf(values[keys.indexOf(groupingTags[i])][j]) < 0) {\n                        addTags.push(values[keys.indexOf(groupingTags[i])][j]);\n                    }\n                }\n            }\n        }\n        return deniedTags = deniedTags.concat(addTags);\n    };\n    //Filter Attributes in Denied Tags\n    PasteCleanup.prototype.attributesfilter = function (deniedTags) {\n        for (var i = 0; i < deniedTags.length; i++) {\n            if (deniedTags[i].split('[').length > 1) {\n                var userAttributes = deniedTags[i].split('[')[1].split(']')[0].split(',');\n                var allowedAttributeArray = [];\n                var deniedAttributeArray = [];\n                for (var j = 0; j < userAttributes.length; j++) {\n                    if (userAttributes[j].indexOf('!') < 0) {\n                        allowedAttributeArray.push(userAttributes[j].trim());\n                    }\n                    else {\n                        deniedAttributeArray.push(userAttributes[j].split('!')[1].trim());\n                    }\n                }\n                var allowedAttribute = allowedAttributeArray.length > 1 ?\n                    (allowedAttributeArray.join('][')) : (allowedAttributeArray.join());\n                var deniedAttribute = deniedAttributeArray.length > 1 ?\n                    deniedAttributeArray.join('][') : (deniedAttributeArray.join());\n                if (deniedAttribute.length > 0) {\n                    var select = allowedAttribute !== '' ? deniedTags[i].split('[')[0] +\n                        '[' + allowedAttribute + ']' : deniedTags[i].split('[')[0];\n                    deniedTags[i] = select + ':not([' + deniedAttribute + '])';\n                }\n                else {\n                    deniedTags[i] = deniedTags[i].split('[')[0] + '[' + allowedAttribute + ']';\n                }\n            }\n        }\n        return deniedTags;\n    };\n    //Denied Tags\n    PasteCleanup.prototype.deniedTags = function (clipBoardElem) {\n        var deniedTags = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedTags) ? [] : this.parent.pasteCleanupSettings.deniedTags.slice();\n        deniedTags = this.attributesfilter(deniedTags);\n        deniedTags = this.tagGrouping(deniedTags);\n        for (var i = 0; i < deniedTags.length; i++) {\n            var removableElement = clipBoardElem.querySelectorAll(deniedTags[i]);\n            for (var j = removableElement.length - 1; j >= 0; j--) {\n                var parentElem = removableElement[j].parentNode;\n                while (removableElement[j].firstChild) {\n                    parentElem.insertBefore(removableElement[j].firstChild, removableElement[j]);\n                }\n                parentElem.removeChild(removableElement[j]);\n            }\n        }\n        return clipBoardElem;\n    };\n    //Denied Attributes\n    PasteCleanup.prototype.deniedAttributes = function (clipBoardElem, clean) {\n        var deniedAttrs = isNullOrUndefined(this.parent.pasteCleanupSettings.deniedAttrs) ? [] : this.parent.pasteCleanupSettings.deniedAttrs.slice();\n        if (clean) {\n            deniedAttrs.push('style');\n        }\n        for (var i = 0; i < deniedAttrs.length; i++) {\n            var removableAttrElement = clipBoardElem.\n                querySelectorAll('[' + deniedAttrs[i] + ']');\n            for (var j = 0; j < removableAttrElement.length; j++) {\n                removableAttrElement[j].removeAttribute(deniedAttrs[i]);\n            }\n        }\n        return clipBoardElem;\n    };\n    //Allowed Style Properties\n    PasteCleanup.prototype.allowedStyle = function (clipBoardElem) {\n        var allowedStyleProps = isNullOrUndefined(this.parent.pasteCleanupSettings.allowedStyleProps) ? [] : this.parent.pasteCleanupSettings.allowedStyleProps.slice();\n        allowedStyleProps.push('list-style-type', 'list-style');\n        var styleElement = clipBoardElem.querySelectorAll('[style]');\n        for (var i = 0; i < styleElement.length; i++) {\n            var allowedStyleValue = '';\n            var allowedStyleValueArray = [];\n            var styleValue = styleElement[i].getAttribute('style').split(';');\n            for (var k = 0; k < styleValue.length; k++) {\n                if (allowedStyleProps.indexOf(styleValue[k].split(':')[0].trim()) >= 0) {\n                    allowedStyleValueArray.push(styleValue[k]);\n                }\n            }\n            styleElement[i].removeAttribute('style');\n            allowedStyleValue = allowedStyleValueArray.join(';').trim() === '' ?\n                allowedStyleValueArray.join(';') : allowedStyleValueArray.join(';') + ';';\n            if (allowedStyleValue) {\n                styleElement[i].setAttribute('style', allowedStyleValue);\n            }\n        }\n        return clipBoardElem;\n    };\n    PasteCleanup.prototype.processPictureElement = function (clipBoardElem) {\n        var pictureElems = clipBoardElem.querySelectorAll('picture');\n        for (var i = 0; i < pictureElems.length; i++) {\n            var imgElem = pictureElems[i].querySelector('img');\n            var sourceElems = pictureElems[i].querySelectorAll('source');\n            if (imgElem && imgElem.getAttribute('src')) {\n                var srcValue = imgElem.getAttribute('src');\n                var url = new URL(srcValue);\n                for (var j = 0; j < sourceElems.length; j++) {\n                    var srcset = sourceElems[j].getAttribute('srcset');\n                    if (srcset) {\n                        if (srcset.indexOf('http') === -1) {\n                            var fullPath = url.origin + srcset;\n                            sourceElems[j].setAttribute('srcset', fullPath);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    PasteCleanup.prototype.getModuleName = function () {\n        return 'pasteCleanup';\n    };\n    return PasteCleanup;\n}());\nexport { PasteCleanup };\n"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,MAAM,MAAM,kBAAkB;AAC1C,SAASC,KAAK,QAAQ,wBAAwB;AAC9C,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,iBAAiB,IAAIC,KAAK,EAAED,iBAAiB,EAAEE,MAAM,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,sBAAsB;AAC3H,SAASC,WAAW,EAAEC,OAAO,EAAEC,OAAO,QAAQ,sBAAsB;AACpE,SAASC,yBAAyB,EAAEC,2BAA2B,EAAEC,0BAA0B,QAAQ,iBAAiB;AACpH,SAASC,gBAAgB,EAAEC,oBAAoB,EAAEC,yBAAyB,QAAQ,iBAAiB;AACnG,SAASC,wBAAwB,QAAQ,qBAAqB;AAC9D,SAASC,aAAa,QAAQ,2BAA2B;AACzD,OAAO,KAAKC,MAAM,MAAM,yBAAyB;AACjD,SAASC,UAAU,EAAEC,gBAAgB,QAAQ,cAAc;AAC3D,SAASC,QAAQ,QAAQ,wBAAwB;AACjD,OAAO,KAAKC,OAAO,MAAM,iBAAiB;AAC1C,SAASC,cAAc,EAAEC,aAAa,QAAQ,cAAc;AAC5D,SAASC,cAAc,QAAQ,mBAAmB;AAClD;AACA;AACA;AACA,IAAIC,YAAY,GAAG,aAAe,YAAY;EAC1C,SAASA,YAAYA,CAACC,MAAM,EAAEC,cAAc,EAAE;IAC1C,IAAI,CAACC,UAAU,GAAG,CAAC,GAAG,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EACxF,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAChH,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,EACpG,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACpG,UAAU,EAAE,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,CAAC;IACrE,IAAI,CAACC,SAAS,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EACvD,SAAS,EAAE,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,UAAU,EAChF,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,UAAU,EAAE,UAAU,EAClF,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EACjF,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,YAAY,CAAC;IAC7F,IAAI,CAACC,aAAa,GAAG,KAAK;IAC1B,IAAI,CAACC,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,aAAa,GAAG,EAAE;IACvB,IAAI,CAACN,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACO,OAAO,GAAGN,cAAc;IAC7B,IAAI,CAACO,aAAa,GAAG,IAAI,CAACD,OAAO,CAACE,UAAU,CAAC,iBAAiB,CAAC;IAC/D,IAAI,CAACC,IAAI,GAAGT,cAAc,CAACQ,UAAU,CAAC,WAAW,CAAC;IAClD,IAAI,CAACE,eAAe,GAAGV,cAAc,CAACQ,UAAU,CAAC,oBAAoB,CAAC;IACtE,IAAI,CAACG,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAACC,WAAW,GAAG,KAAK;EAC5B;EACAd,YAAY,CAACe,SAAS,CAACF,gBAAgB,GAAG,YAAY;IAClD,IAAI,CAACG,gBAAgB,GAAG,IAAIzB,aAAa,CAAC,IAAI,CAACU,MAAM,CAACgB,YAAY,CAAC;IACnE,IAAI,IAAI,CAAChB,MAAM,CAACa,WAAW,EAAE;MACzB;IACJ;IACA,IAAI,CAACb,MAAM,CAACiB,EAAE,CAAC9C,MAAM,CAAC+C,UAAU,EAAE,IAAI,CAACA,UAAU,EAAE,IAAI,CAAC;IACxD,IAAI,CAAClB,MAAM,CAACiB,EAAE,CAAC9C,MAAM,CAACgD,YAAY,EAAE,IAAI,CAACC,WAAW,EAAE,IAAI,CAAC;IAC3D,IAAI,CAACpB,MAAM,CAACiB,EAAE,CAAC9C,MAAM,CAACkD,OAAO,EAAE,IAAI,CAACA,OAAO,EAAE,IAAI,CAAC;IAClD,IAAI,CAACrB,MAAM,CAACiB,EAAE,CAAC9C,MAAM,CAACmD,QAAQ,EAAE,IAAI,CAACA,QAAQ,EAAE,IAAI,CAAC;EACxD,CAAC;EACDvB,YAAY,CAACe,SAAS,CAACO,OAAO,GAAG,YAAY;IACzC,IAAI,IAAI,CAACR,WAAW,EAAE;MAClB;IACJ;IACA,IAAI,IAAI,CAACU,iBAAiB,EAAE;MACxBC,YAAY,CAAC,IAAI,CAACD,iBAAiB,CAAC;MACpC,IAAI,CAACA,iBAAiB,GAAG,IAAI;IACjC;IACA,IAAI,IAAI,CAACE,gBAAgB,EAAE;MACvBD,YAAY,CAAC,IAAI,CAACC,gBAAgB,CAAC;MACnC,IAAI,CAACA,gBAAgB,GAAG,IAAI;IAChC;IACA,IAAI,IAAI,CAACC,cAAc,EAAE;MACrBF,YAAY,CAAC,IAAI,CAACE,cAAc,CAAC;MACjC,IAAI,CAACA,cAAc,GAAG,IAAI;IAC9B;IACA,IAAI,IAAI,CAACC,WAAW,EAAE;MAClBH,YAAY,CAAC,IAAI,CAACG,WAAW,CAAC;MAC9B,IAAI,CAACA,WAAW,GAAG,IAAI;IAC3B;IACA,IAAI,IAAI,CAACC,gBAAgB,EAAE;MACvBJ,YAAY,CAAC,IAAI,CAACI,gBAAgB,CAAC;MACnC,IAAI,CAACA,gBAAgB,GAAG,IAAI;IAChC;IACA,IAAI,CAACC,mBAAmB,CAAC,CAAC;IAC1B,IAAI,IAAI,CAACC,QAAQ,IAAI,CAAC,IAAI,CAACA,QAAQ,CAACjB,WAAW,EAAE;MAC7C,IAAI,CAACiB,QAAQ,CAACT,OAAO,CAAC,CAAC;MACvB,IAAI,CAACS,QAAQ,GAAG,IAAI;IACxB;IACA,IAAI,IAAI,CAACC,SAAS,IAAI,CAAC,IAAI,CAACA,SAAS,CAAClB,WAAW,EAAE;MAC/C,IAAI,CAACkB,SAAS,CAACV,OAAO,CAAC,CAAC;MACxB,IAAI,CAACU,SAAS,GAAG,IAAI;IACzB;IACA,IAAI,IAAI,CAACC,eAAe,IAAI,CAAC,IAAI,CAACA,eAAe,CAACnB,WAAW,EAAE;MAC3D,IAAI,CAACmB,eAAe,CAACX,OAAO,CAAC,CAAC;MAC9B,IAAI,CAACW,eAAe,GAAG,IAAI;IAC/B;IACA,IAAI,IAAI,CAACC,gBAAgB,IAAI,CAAC,IAAI,CAACA,gBAAgB,CAACpB,WAAW,EAAE;MAC7D,IAAI,CAACoB,gBAAgB,CAACZ,OAAO,CAAC,CAAC;MAC/B,IAAI,CAACY,gBAAgB,GAAG,IAAI;IAChC;IACA,IAAI,IAAI,CAACC,oBAAoB,IAAI,CAAC,IAAI,CAACA,oBAAoB,CAACrB,WAAW,EAAE;MACrE,IAAI,CAACqB,oBAAoB,CAACb,OAAO,CAAC,CAAC;MACnC,IAAI,CAACa,oBAAoB,GAAG,IAAI;IACpC;IACA,IAAI,CAACrB,WAAW,GAAG,IAAI;EAC3B,CAAC;EACDd,YAAY,CAACe,SAAS,CAACe,mBAAmB,GAAG,YAAY;IACrD,IAAI,CAAC7B,MAAM,CAACmC,GAAG,CAAChE,MAAM,CAAC+C,UAAU,EAAE,IAAI,CAACA,UAAU,CAAC;IACnD,IAAI,CAAClB,MAAM,CAACmC,GAAG,CAAChE,MAAM,CAACgD,YAAY,EAAE,IAAI,CAACC,WAAW,CAAC;IACtD,IAAI,CAACpB,MAAM,CAACmC,GAAG,CAAChE,MAAM,CAACkD,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC;IAC7C,IAAI,CAACrB,MAAM,CAACmC,GAAG,CAAChE,MAAM,CAACmD,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAAC;EACnD,CAAC;EACDvB,YAAY,CAACe,SAAS,CAACI,UAAU,GAAG,UAAUkB,CAAC,EAAE;IAC7C,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAIC,IAAI,GAAG;MACPC,WAAW,EAAE,OAAO;MACpBC,UAAU,EAAE,IAAI,CAACxC,MAAM,CAACwC,UAAU;MAClCC,KAAK,EAAEL;IACX,CAAC;IACD,IAAIM,KAAK,GAAG,IAAI;IAChB,IAAIC,uBAAuB,GAAG,KAAK;IACnC,IAAIC,eAAe;IACnB,IAAIC,YAAY,GAAG,IAAI,CAAC7C,MAAM,CAAC8C,mBAAmB,CAACD,YAAY;IAC/D,IAAIT,CAAC,CAACE,IAAI,IAAI,CAAC/D,KAAK,CAAC6D,CAAC,CAACE,IAAI,CAACS,aAAa,CAAC,EAAE;MACxCL,KAAK,GAAGN,CAAC,CAACE,IAAI,CAACS,aAAa,CAACC,OAAO,CAAC,WAAW,CAAC;IACrD;IACA,IAAIZ,CAAC,CAACE,IAAI,IAAII,KAAK,KAAK,IAAI,IAAI,IAAI,CAAC1C,MAAM,CAACwC,UAAU,KAAK,MAAM,EAAE;MAC/D,IAAIS,IAAI,GAAG,KAAK,CAAC;MACjB,IAAIP,KAAK,CAACQ,MAAM,KAAK,CAAC,EAAE;QACpB,IAAIC,SAAS,GAAG,IAAIC,MAAM,CAAC,mBAAmB,CAAC;QAC/CV,KAAK,GAAGN,CAAC,CAACE,IAAI,CAACS,aAAa,CAACC,OAAO,CAAC,YAAY,CAAC;QAClD,IAAI,CAAChD,MAAM,CAACqD,OAAO,CAAClF,MAAM,CAACmF,kBAAkB,EAAE;UAAEZ,KAAK,EAAEA;QAAM,CAAC,CAAC;QAChE,IAAI,CAACtC,aAAa,GAAGsC,KAAK,KAAK,EAAE,GAAG,IAAI,GAAG,KAAK;QAChDA,KAAK,GAAGA,KAAK,CAACa,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC;QACnCb,KAAK,GAAGA,KAAK,CAACa,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC;QACnC,IAAI,CAAClD,YAAY,GAAG8C,SAAS,CAACK,IAAI,CAACd,KAAK,CAAC;QACzCO,IAAI,GAAGb,CAAC,IAAIA,CAAC,CAACE,IAAI,CAACS,aAAa,IAC5BX,CAAC,CAACE,IAAI,CAACS,aAAa,CAACU,KAAK,CAACP,MAAM,GAAG,CAAC,GACpCd,CAAC,CAACE,IAAI,CAACS,aAAa,CAACU,KAAK,CAAC,CAAC,CAAC,CAACC,SAAS,CAAC,CAAC,KAAK,IAAI,GAC9C,CAACnF,KAAK,CAAC6D,CAAC,CAACE,IAAI,CAACS,aAAa,CAACU,KAAK,CAAC,CAAC,CAAC,CAAC,GAClCrB,CAAC,CAACE,IAAI,CAACS,aAAa,CAACU,KAAK,CAAC,CAAC,CAAC,CAACC,SAAS,CAAC,CAAC,GAAG,IAAI,GACpDtB,CAAC,CAACE,IAAI,CAACS,aAAa,CAACU,KAAK,CAAC,CAAC,CAAC,CAACC,SAAS,CAAC,CAAC,GAAI,IAAI;QACzD,IAAIT,IAAI,EAAE;UACN,IAAIU,aAAa,GAAGV,IAAI,CAACW,IAAI;UAC7B,IAAIC,SAAS,GAAGF,aAAa,CAACG,SAAS,CAACH,aAAa,CAACI,WAAW,CAAC,GAAG,CAAC,CAAC;UACvE,IAAIlB,YAAY,CAACmB,KAAK,CAAC,UAAUC,IAAI,EAAE;YAAE,OAAOA,IAAI,CAACC,WAAW,CAAC,CAAC,KAAKL,SAAS;UAAE,CAAC,CAAC,EAAE;YAClFzB,CAAC,CAACE,IAAI,CAAC6B,cAAc,CAAC,CAAC;YACvB;UACJ;QACJ;QACA,IAAI,CAACnE,MAAM,CAACoE,MAAM,CAACjG,MAAM,CAACkG,KAAK,EAAE;UAC7BpB,IAAI,EAAEA,IAAI;UACVX,IAAI,EAAEF,CAAC,CAACE,IAAI;UACZgC,IAAI,EAAE5B,KAAK;UACX6B,QAAQ,EAAE,SAAAA,CAAUC,CAAC,EAAE;YACnB5B,eAAe,GAAG4B,CAAC;YACnB,IAAI,OAAQ5B,eAAgB,KAAK,QAAQ,EAAE;cACvCP,KAAK,CAACrC,MAAM,CAACyE,SAAS,CAACC,aAAa,CAACC,WAAW,CAAC,QAAQ,EAAE,OAAO,EAAEvC,CAAC,CAACE,IAAI,EAAED,KAAK,CAACuC,eAAe,CAACC,IAAI,CAACxC,KAAK,EAAEC,IAAI,CAAC,EAAE,cAAc,EAAEM,eAAe,EAAE,oBAAoB,CAAC;YAC/K,CAAC,MACI;cACDF,KAAK,GAAGE,eAAe;YAC3B;UACJ;QACJ,CAAC,CAAC;QACF,IAAI,CAACO,SAAS,CAACK,IAAI,CAACd,KAAK,CAAC,EAAE;UACxB,IAAIoC,UAAU,GAAG,IAAI,CAAC9E,MAAM,CAAC+E,aAAa,CAAC,KAAK,CAAC;UACjDD,UAAU,CAACE,SAAS,GAAG,IAAI,CAACC,cAAc,CAACvC,KAAK,CAAC;UACjDA,KAAK,GAAGoC,UAAU,CAACE,SAAS;UAC5BrC,uBAAuB,GAAG,IAAI;QAClC;MACJ,CAAC,MACI,IAAID,KAAK,CAACQ,MAAM,GAAG,CAAC,EAAE;QACvB,IAAI,CAAClD,MAAM,CAACqD,OAAO,CAAClF,MAAM,CAACmF,kBAAkB,EAAE;UAAEZ,KAAK,EAAEA;QAAM,CAAC,CAAC;QAChE,IAAI,CAAC1C,MAAM,CAACyE,SAAS,CAACC,aAAa,CAACQ,QAAQ,CAACd,MAAM,CAAC7E,MAAM,CAAC4F,eAAe,EAAE;UACxE7C,IAAI,EAAEF,CAAC,CAACE,IAAI;UACZgC,IAAI,EAAElC,CAAC,CAACkC,IAAI;UACZc,2BAA2B,EAAE,IAAI,CAACpF,MAAM,CAACqF,oBAAoB,CAACC,iBAAiB;UAC/Ef,QAAQ,EAAE,SAAAA,CAAUgB,CAAC,EAAEjF,aAAa,EAAEkF,gBAAgB,EAAE;YACpDlD,IAAI,CAACkD,gBAAgB,GAAGA,gBAAgB;YACxC9C,KAAK,GAAG6C,CAAC,CAACE,IAAI,CAAC,CAAC;YAChBpD,KAAK,CAAC/B,aAAa,GAAGA,aAAa;UACvC;QACJ,CAAC,CAAC;MACN;MACA,IAAI,CAACoF,eAAe,GAAG,IAAI,CAAClF,aAAa,CAACmF,WAAW,CAACnG,UAAU,CAACoG,OAAO,CAAC;MACzE,IAAIC,eAAe,GAAG,IAAI,CAACH,eAAe,CAACI,WAAW,CAAC,CAAC;MACxD,IAAIC,KAAK,GAAG,IAAI,CAAChF,gBAAgB,CAACiF,QAAQ,CAACH,eAAe,CAAC;MAC3D,IAAI,CAACI,aAAa,GAAG,IAAI,CAAClF,gBAAgB,CAACmF,IAAI,CAACH,KAAK,EAAEF,eAAe,CAAC;MACvE,IAAIM,WAAW,GAAG,IAAI,CAACnG,MAAM,CAAC+E,aAAa,CAAC,KAAK,CAAC;MAClDoB,WAAW,CAACnB,SAAS,GAAGtC,KAAK;MAC7B,IAAI0D,cAAc,GAAGD,WAAW,CAACE,gBAAgB,CAAC,0BAA0B,CAAC;MAC7E,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGF,cAAc,CAAClD,MAAM,EAAEoD,KAAK,EAAE,EAAE;QACxDF,cAAc,CAACE,KAAK,CAAC,CAACC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC7F,IAAI,CAAC8F,WAAW,CAAC,kBAAkB,CAAC,CAAC;QACpFJ,cAAc,CAACE,KAAK,CAAC,CAACG,SAAS,CAACC,MAAM,CAAC,yBAAyB,CAAC;MACrE;MACAhE,KAAK,GAAGyD,WAAW,CAACnB,SAAS;MAC7B,IAAI2B,eAAe,GAAGR,WAAW,CAACS,WAAW,KAAK,EAAE,IAAI,CAACrI,KAAK,CAAC4H,WAAW,CAACU,aAAa,CAAC,KAAK,CAAC,CAAC,IAC5F,CAACtI,KAAK,CAAC4H,WAAW,CAACU,aAAa,CAAC,OAAO,CAAC,CAAC;MAC9C,IAAIC,WAAW,GAAGX,WAAW,CAACE,gBAAgB,CAAC,KAAK,CAAC;MACrDS,WAAW,CAACC,OAAO,CAAC,UAAUC,UAAU,EAAE;QACtC,IAAIC,eAAe;QACnB,IAAIC,aAAa,GAAGF,UAAU,CAACG,YAAY,CAAC,KAAK,CAAC;QAClD,IAAI,CAAC7I,iBAAiB,CAAC4I,aAAa,CAAC,IAAIA,aAAa,KAAK,EAAE,EAAE;UAC3D,IAAI,CAAC5I,iBAAiB,CAAC0I,UAAU,CAACG,YAAY,CAAC,iBAAiB,CAAC,CAAC,EAAE;YAChEF,eAAe,GAAGD,UAAU,CAACG,YAAY,CAAC,iBAAiB,CAAC;UAChE,CAAC,MACI,IAAID,aAAa,CAACE,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAIF,aAAa,CAACE,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE;YAClFH,eAAe,GAAGC,aAAa,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;UAC/D,CAAC,MACI;YACDJ,eAAe,GAAGC,aAAa,CAACG,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,CAACpD,WAAW,CAAC,CAAC;UAClE;UACA,IAAI,CAAC5F,iBAAiB,CAAC2I,eAAe,CAAC,IACnCpE,YAAY,CAACmB,KAAK,CAAC,UAAUC,IAAI,EAAE;YAAE,OAAOgD,eAAe,KAAKhD,IAAI,CAACH,SAAS,CAAC,CAAC,CAAC,CAACI,WAAW,CAAC,CAAC;UAAE,CAAC,CAAC,IACnGgD,aAAa,CAACE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;YACtC5I,MAAM,CAACwI,UAAU,CAAC;UACtB;QACJ;MACJ,CAAC,CAAC;MACFtE,KAAK,GAAGyD,WAAW,CAACnB,SAAS;MAC7B,IAAI,CAAChF,MAAM,CAACoE,MAAM,CAACjG,MAAM,CAACoJ,qBAAqB,EAAE;QAC7C7E,KAAK,EAAEA,KAAK;QACZ6B,QAAQ,EAAE,SAAAA,CAAUiD,YAAY,EAAE;UAC9B9E,KAAK,GAAG8E,YAAY;QACxB;MACJ,CAAC,CAAC;MACF,IAAI,IAAI,CAACxH,MAAM,CAACqF,oBAAoB,CAACoC,MAAM,EAAE;QACzC,IAAId,eAAe,EAAE;UACjBvE,CAAC,CAACE,IAAI,CAAC6B,cAAc,CAAC,CAAC;UACvB,IAAI,CAACuD,WAAW,CAAChF,KAAK,EAAEJ,IAAI,EAAEK,uBAAuB,CAAC;QAC1D;MACJ,CAAC,MACI,IAAI,IAAI,CAAC3C,MAAM,CAACqF,oBAAoB,CAACsC,SAAS,EAAE;QACjDvF,CAAC,CAACE,IAAI,CAAC6B,cAAc,CAAC,CAAC;QACvB,IAAI,CAACyD,eAAe,CAAClF,KAAK,EAAEJ,IAAI,EAAEK,uBAAuB,CAAC;MAC9D,CAAC,MACI,IAAI,IAAI,CAAC3C,MAAM,CAACqF,oBAAoB,CAACwC,UAAU,EAAE;QAClDzF,CAAC,CAACE,IAAI,CAAC6B,cAAc,CAAC,CAAC;QACvB,IAAI,CAAC2D,UAAU,CAACpF,KAAK,EAAE,KAAK,EAAEJ,IAAI,CAAC;MACvC,CAAC,MACI;QACDF,CAAC,CAACE,IAAI,CAAC6B,cAAc,CAAC,CAAC;QACvB,IAAI,CAAC2D,UAAU,CAACpF,KAAK,EAAE,IAAI,EAAEJ,IAAI,CAAC;MACtC;IACJ;EACJ,CAAC;EACDvC,YAAY,CAACe,SAAS,CAACmE,cAAc,GAAG,UAAUvC,KAAK,EAAE;IACrD,IAAIqF,cAAc,GAAGrF,KAAK,CAAC2E,KAAK,CAAC,UAAU,CAAC;IAC5C,IAAIW,SAAS,GAAG,EAAE;IAClB,IAAIC,SAAS,GAAG,IAAI,CAACjI,MAAM,CAACkI,QAAQ,KAAK,GAAG,GAAG,KAAK,GAAI,IAAI,CAAClI,MAAM,CAACkI,QAAQ,KAAK,KAAK,GAAG,OAAO,GAAG,EAAG;IACtG,IAAIC,OAAO,GAAG,IAAI,CAACnI,MAAM,CAACkI,QAAQ,KAAK,GAAG,GAAG,MAAM,GAAI,IAAI,CAAClI,MAAM,CAACkI,QAAQ,KAAK,KAAK,GAAG,QAAQ,GAAG,MAAO;IAC1G,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,cAAc,CAAC7E,MAAM,EAAEkF,CAAC,EAAE,EAAE;MAC5C,IAAIC,OAAO,GAAGN,cAAc,CAACK,CAAC,CAAC;MAC/B,IAAIE,gBAAgB,GAAG,IAAI,CAACC,SAAS,CAACF,OAAO,CAAC;MAC9C,IAAIG,oBAAoB,GAAGF,gBAAgB,CAAC/E,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC;MACvE,IAAI6E,CAAC,KAAK,CAAC,EAAE;QACT,IAAI,IAAI,CAACpI,MAAM,CAACkI,QAAQ,KAAK,IAAI,EAAE;UAC/BF,SAAS,IAAKQ,oBAAoB,GAAGL,OAAQ;QACjD,CAAC,MACI;UACDH,SAAS,IAAIQ,oBAAoB,CAAC,CAAC;QACvC;MACJ,CAAC,MACI;QACD,IAAI,IAAI,CAACxI,MAAM,CAACkI,QAAQ,KAAK,IAAI,EAAE;UAC/B,IAAIE,CAAC,KAAKL,cAAc,CAAC7E,MAAM,GAAG,CAAC,EAAE;YACjC8E,SAAS,IAAKQ,oBAAoB,GAAGL,OAAQ;UACjD,CAAC,MACI;YACDH,SAAS,IAAKQ,oBAAoB,GAAGL,OAAO,GAAGA,OAAQ;UAC3D;QACJ,CAAC,MACI;UACDH,SAAS,IAAIC,SAAS,GAAGO,oBAAoB,GAAGL,OAAO;QAC3D;MACJ;IACJ;IACA,OAAOH,SAAS;EACpB,CAAC;EACDjI,YAAY,CAACe,SAAS,CAACyH,SAAS,GAAG,UAAUjE,IAAI,EAAE;IAC/C,IAAImE,aAAa,GAAG,EAAE;IACtB,IAAInE,IAAI,KAAK,EAAE,EAAE;MACb,OAAOA,IAAI;IACf;IACA,IAAIoE,kBAAkB,GAAGpE,IAAI,CAAC+C,KAAK,CAAC,GAAG,CAAC;IACxC,KAAK,IAAIe,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGM,kBAAkB,CAACxF,MAAM,EAAEkF,CAAC,EAAE,EAAE;MAChD,IAAIO,WAAW,GAAGD,kBAAkB,CAACN,CAAC,CAAC;MACvC,IAAIO,WAAW,KAAK,EAAE,EAAE;QACpBF,aAAa,IAAI,QAAQ;MAC7B,CAAC,MACI,IAAIE,WAAW,KAAK,IAAI,EAAE;QAC3BF,aAAa,IAAI,0BAA0B;MAC/C,CAAC,MACI;QACD,IAAIL,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAGM,kBAAkB,CAACxF,MAAM,EAAE;UACxCuF,aAAa,IAAI,GAAG;QACxB;QACAA,aAAa,IAAIE,WAAW;MAChC;IACJ;IACAF,aAAa,GAAGA,aAAa,CAAClF,OAAO,CAAC,KAAK,EAAE,0BAA0B,CAAC;IACxEkF,aAAa,GAAGA,aAAa,CAAClF,OAAO,CAAC,eAAe,EAAE,SAAS,CAAC;IACjE,OAAOkF,aAAa;EACxB,CAAC;EACD1I,YAAY,CAACe,SAAS,CAAC8H,YAAY,GAAG,UAAUC,GAAG,EAAE;IACjD,IAAIC,SAAS,GAAGD,GAAG,CAACxC,gBAAgB,CAAC,mBAAmB,CAAC;IACzD,IAAI,IAAI,CAACrG,MAAM,CAAC8C,mBAAmB,CAACiG,OAAO,IAAID,SAAS,CAAC5F,MAAM,GAAG,CAAC,EAAE;MACjE,IAAI8F,SAAS,GAAG,EAAE;MAClB,IAAIC,OAAO,GAAG,EAAE;MAChB,IAAIC,SAAS,GAAG,EAAE;MAClB,KAAK,IAAId,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGU,SAAS,CAAC5F,MAAM,EAAEkF,CAAC,EAAE,EAAE;QACvC,IAAI,CAAC7J,KAAK,CAACuK,SAAS,CAACV,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,CAAC,IACxC2B,SAAS,CAACV,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACD,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;UACvE4B,SAAS,CAACG,IAAI,CAACL,SAAS,CAACV,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,CAAC;UAChD8B,OAAO,CAACE,IAAI,CAACvK,WAAW,CAAC,WAAW,CAAC,CAAC;UACtCsK,SAAS,CAACC,IAAI,CAACL,SAAS,CAACV,CAAC,CAAC,CAAC;QAChC;MACJ;MACA,IAAIgB,QAAQ,GAAG,EAAE;MACjB,KAAK,IAAIhB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGY,SAAS,CAAC9F,MAAM,EAAEkF,CAAC,EAAE,EAAE;QACvCgB,QAAQ,CAACD,IAAI,CAAC,IAAI,CAACE,YAAY,CAACL,SAAS,CAACZ,CAAC,CAAC,EAAEa,OAAO,CAACb,CAAC,CAAC,CAAC,CAAC;MAC9D;MACA,KAAK,IAAIA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgB,QAAQ,CAAClG,MAAM,EAAEkF,CAAC,EAAE,EAAE;QACtC,IAAI,CAACkB,YAAY,CAACF,QAAQ,CAAChB,CAAC,CAAC,EAAEc,SAAS,CAACd,CAAC,CAAC,CAAC;MAChD;MACA,IAAI7J,KAAK,CAAC,IAAI,CAACyB,MAAM,CAAC8C,mBAAmB,CAACyG,IAAI,CAAC,IAC3C,IAAI,CAACvJ,MAAM,CAAC8C,mBAAmB,CAAC0G,UAAU,KAAK,MAAM,EAAE;QACvD,IAAI,CAACC,OAAO,CAACX,SAAS,CAAC;MAC3B;IACJ,CAAC,MACI,IAAI,IAAI,CAAC9I,MAAM,CAAC8C,mBAAmB,CAAC0G,UAAU,KAAK,MAAM,EAAE;MAC5D,IAAI,CAACC,OAAO,CAACX,SAAS,CAAC;IAC3B;IACA,IAAIY,WAAW,GAAGb,GAAG,CAACxC,gBAAgB,CAAC,mBAAmB,CAAC;IAC3D,KAAK,IAAI+B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsB,WAAW,CAACxG,MAAM,EAAEkF,CAAC,EAAE,EAAE;MACzCsB,WAAW,CAACtB,CAAC,CAAC,CAAC3B,SAAS,CAACC,MAAM,CAAC,kBAAkB,CAAC;MACnD,IAAIgD,WAAW,CAACtB,CAAC,CAAC,CAACjB,YAAY,CAAC,OAAO,CAAC,CAAC1B,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;QACpDqD,SAAS,CAACV,CAAC,CAAC,CAACuB,eAAe,CAAC,OAAO,CAAC;MACzC;IACJ;EACJ,CAAC;EACD5J,YAAY,CAACe,SAAS,CAAC2I,OAAO,GAAG,UAAUX,SAAS,EAAE;IAClD,KAAK,IAAIV,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGU,SAAS,CAAC5F,MAAM,EAAEkF,CAAC,EAAE,EAAE;MACvC,IAAI,CAAC7J,KAAK,CAACuK,SAAS,CAACV,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,CAAC,IACxC2B,SAAS,CAACV,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACD,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;QACvE,IAAIwC,OAAO,GAAGC,GAAG,CAACC,eAAe,CAACjK,aAAa,CAACiJ,SAAS,CAACV,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;QAClF2B,SAAS,CAACV,CAAC,CAAC,CAAC7B,YAAY,CAAC,KAAK,EAAEqD,OAAO,CAAC;MAC7C;IACJ;EACJ,CAAC;EACD7J,YAAY,CAACe,SAAS,CAACiJ,oBAAoB,GAAG,UAAUC,KAAK,EAAE;IAC3D,IAAI,CAAC,IAAI,CAAChK,MAAM,CAACiK,UAAU,CAACC,MAAM,EAAE;MAChC,IAAI,CAAClK,MAAM,CAACmK,aAAa,CAACC,WAAW,CAACC,UAAU,CAACC,OAAO,CAACN,KAAK,CAAC;IACnE;EACJ,CAAC;EACDjK,YAAY,CAACe,SAAS,CAACwI,YAAY,GAAG,UAAUrG,IAAI,EAAEsH,OAAO,EAAE;IAC3D,IAAIlI,KAAK,GAAG,IAAI;IAChBkI,OAAO,CAACC,KAAK,CAACC,OAAO,GAAG,KAAK;IAC7B,IAAIC,QAAQ,GAAG,IAAI,CAAC1K,MAAM,CAAC+E,aAAa,CAAC,KAAK,CAAC;IAC/C,IAAI,CAAC/E,MAAM,CAAC2K,aAAa,CAACC,WAAW,CAACF,QAAQ,CAAC;IAC/C,IAAIG,UAAU,GAAG,IAAI,CAAC7K,MAAM,CAAC+E,aAAa,CAAC,OAAO,EAAE;MAChD+F,EAAE,EAAE,IAAI,CAAC9K,MAAM,CAAC+K,KAAK,CAAC,CAAC,GAAG,SAAS;MAAEC,KAAK,EAAE;QAAE/G,IAAI,EAAE,MAAM;QAAEL,IAAI,EAAE;MAAc;IACpF,CAAC,CAAC;IACF,IAAIqH,OAAO,GAAG,IAAI,CAACjL,MAAM,CAACkL,cAAc,CAAChB,MAAM,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE;IAC3D,IAAI,CAACpI,QAAQ,GAAG,IAAI1D,KAAK,CAACsM,QAAQ,EAAE;MAChCS,QAAQ,EAAEZ,OAAO;MACjBa,MAAM,EAAE,MAAM;MACdC,KAAK,EAAE,OAAO;MACdJ,OAAO,EAAEA,OAAO;MAChB5C,OAAO,EAAEwC,UAAU;MACnBS,eAAe,EAAE,IAAI,CAACtL,MAAM,CAACuL,OAAO;MACpCC,QAAQ,EAAE;QAAEC,CAAC,EAAE,QAAQ;QAAEC,CAAC,EAAE;MAAM,CAAC;MACnCC,SAAS,EAAE,IAAI,CAAC3L,MAAM,CAAC2L,SAAS;MAChCC,MAAM,EAAE,KAAK;MACb;MACAC,KAAK,EAAE,SAAAA,CAAUpJ,KAAK,EAAE;QACpBJ,KAAK,CAACrC,MAAM,CAAC8L,MAAM,GAAG,KAAK;QAC3BzJ,KAAK,CAACP,QAAQ,CAACT,OAAO,CAAC,CAAC;QACxB7C,MAAM,CAAC6D,KAAK,CAACP,QAAQ,CAACyJ,OAAO,CAAC;MAClC;IACJ,CAAC,CAAC;IACF,IAAI,CAACzJ,QAAQ,CAACyJ,OAAO,CAACf,KAAK,CAACuB,OAAO,GAAG,MAAM;IAC5CrN,QAAQ,CAAC,CAAC,IAAI,CAACoD,QAAQ,CAACyJ,OAAO,CAAC,EAAE,CAAC5L,OAAO,CAACqM,cAAc,EAAErM,OAAO,CAACsM,oBAAoB,CAAC,CAAC;IACzF,IAAI,CAAC1N,KAAK,CAAC,IAAI,CAACyB,MAAM,CAACkM,QAAQ,CAAC,EAAE;MAC9BxN,QAAQ,CAAC,CAAC,IAAI,CAACoD,QAAQ,CAACyJ,OAAO,CAAC,EAAE,IAAI,CAACvL,MAAM,CAACkM,QAAQ,CAAC3I,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAACkC,IAAI,CAAC,CAAC,CAAC4B,KAAK,CAAC,GAAG,CAAC,CAAC;IAClG;IACA,IAAI8E,OAAO,GAAGlJ,IAAI,CAACmJ,IAAI,GAAG,OAAO,GAAG,GAAG,GAAG,GAAG;IAC7C,IAAI,CAAC3K,gBAAgB,GAAG4K,UAAU,CAAC,YAAY;MAC3ChK,KAAK,CAACiK,YAAY,CAAC/B,OAAO,EAAElI,KAAK,CAACP,QAAQ,CAAC;IAC/C,CAAC,EAAEqK,OAAO,CAAC;IACX,IAAI,CAACpK,SAAS,GAAG,IAAIrC,QAAQ,CAAC;MAC1B6M,aAAa,EAAE;QACXxD,OAAO,EAAE,IAAI,CAAC/I,MAAM,CAAC8C,mBAAmB,CAACiG,OAAO;QAChDyD,SAAS,EAAE,IAAI,CAACxM,MAAM,CAAC8C,mBAAmB,CAAC0J;MAC/C,CAAC;MACDN,QAAQ,EAAEvM,OAAO,CAAC8M,qBAAqB;MACvCC,QAAQ,EAAE,IAAI,CAAC1M,MAAM,CAACgB,YAAY;MAClC2L,iBAAiB,EAAE,IAAI,CAAC3M,MAAM,CAAC8C,mBAAmB,CAACD,YAAY,CAAC+J,QAAQ,CAAC,CAAC;MAC1EC,OAAO,EAAE,SAAAA,CAAUzK,CAAC,EAAE;QAClBC,KAAK,CAACyK,UAAU,CAACzK,KAAK,CAACP,QAAQ,EAAEO,KAAK,CAACN,SAAS,EAAEwI,OAAO,EAAEnI,CAAC,CAAC;MACjE,CAAC;MACD2K,SAAS,EAAE,SAAAA,CAAU3K,CAAC,EAAE;QACpB,IAAI,CAACC,KAAK,CAACrC,MAAM,CAACgN,gBAAgB,EAAE;UAChC3K,KAAK,CAACrC,MAAM,CAACqD,OAAO,CAAClF,MAAM,CAAC8O,cAAc,EAAE7K,CAAC,EAAE,UAAU8K,kBAAkB,EAAE;YACzE,IAAIA,kBAAkB,CAACC,MAAM,EAAE;cAC3B,IAAI,CAAC7O,iBAAiB,CAACiM,OAAO,CAAC,EAAE;gBAC7B/L,MAAM,CAAC+L,OAAO,CAAC;cACnB;cACA,IAAI,CAACjM,iBAAiB,CAAC+D,KAAK,CAACP,QAAQ,CAACyJ,OAAO,CAAC,EAAE;gBAC5C/M,MAAM,CAAC6D,KAAK,CAACP,QAAQ,CAACyJ,OAAO,CAAC;cAClC;YACJ,CAAC,MACI;cACDlJ,KAAK,CAACrC,MAAM,CAACgB,YAAY,CAACoM,eAAe,GAAG,OAAO;YACvD;UACJ,CAAC,CAAC;QACN;MACJ,CAAC;MACDC,YAAY,EAAE,SAAAA,CAAU/K,IAAI,EAAE;QAC1BD,KAAK,CAACrC,MAAM,CAACqD,OAAO,CAAClF,MAAM,CAACmP,iBAAiB,EAAEhL,IAAI,CAAC;QACpDD,KAAK,CAAC0H,oBAAoB,CAAC,IAAI,CAAC;MACpC,CAAC;MACDwD,OAAO,EAAE,SAAAA,CAAUnL,CAAC,EAAE;QAClBC,KAAK,CAACV,WAAW,GAAG0K,UAAU,CAAC,YAAY;UACvChK,KAAK,CAACmL,aAAa,CAACjD,OAAO,EAAElI,KAAK,CAACN,SAAS,EAAEM,KAAK,CAACP,QAAQ,EAAEM,CAAC,CAAC;QACpE,CAAC,EAAE,GAAG,CAAC;MACX,CAAC;MACDqL,SAAS,EAAE,SAAAA,CAAA,EAAY;QACnBpL,KAAK,CAACrC,MAAM,CAACgB,YAAY,CAACoM,eAAe,GAAG,MAAM;QAClD,IAAI7C,OAAO,CAACmD,WAAW,CAAC9G,WAAW,KAAK,GAAG,EAAE;UACzCpI,MAAM,CAAC+L,OAAO,CAACmD,WAAW,CAAC;QAC/B;QACAlP,MAAM,CAAC+L,OAAO,CAAC;QACflI,KAAK,CAACP,QAAQ,CAAC+J,KAAK,CAAC,CAAC;MAC1B,CAAC;MACD8B,QAAQ,EAAE,SAAAA,CAAUvL,CAAC,EAAE;QACnBA,CAAC,CAAC+K,MAAM,GAAG,IAAI;MACnB,CAAC;MACDS,QAAQ,EAAE,SAAAA,CAAA,EAAY;QAClBvL,KAAK,CAACrC,MAAM,CAACgB,YAAY,CAACoM,eAAe,GAAG,MAAM;QAClD,IAAI7C,OAAO,CAACmD,WAAW,CAAC9G,WAAW,KAAK,GAAG,EAAE;UACzCpI,MAAM,CAAC+L,OAAO,CAACmD,WAAW,CAAC;QAC/B;QACAlP,MAAM,CAAC+L,OAAO,CAAC;QACflI,KAAK,CAACP,QAAQ,CAAC+J,KAAK,CAAC,CAAC;MAC1B;IACJ,CAAC,CAAC;IACF,IAAI,CAAC9J,SAAS,CAAC8L,QAAQ,CAAC,IAAI,CAAC/L,QAAQ,CAACyJ,OAAO,CAACuC,UAAU,CAAC,CAAC,CAAC,CAAC;IAC5D,IAAIC,QAAQ,GAAG,CAAC;MACRnK,IAAI,EAAEX,IAAI,CAACW,IAAI;MACfoK,OAAO,EAAE/K,IAAI;MACbmJ,IAAI,EAAEnJ,IAAI,CAACmJ,IAAI;MACfnI,IAAI,EAAEhB,IAAI,CAACgB,IAAI;MACfgK,MAAM,EAAE,iBAAiB;MACzBC,kBAAkB,EAAE;QAAEC,OAAO,EAAE,EAAE;QAAEC,OAAO,EAAE;MAAG,CAAC;MAChDC,UAAU,EAAE;IAChB,CAAC,CAAC;IACN,IAAI,CAACtM,SAAS,CAACuM,cAAc,CAACP,QAAQ,CAAC;IACvC,IAAI,CAAChM,SAAS,CAACwM,MAAM,CAACR,QAAQ,CAAC;IAC/B,IAAI,CAACjM,QAAQ,CAACyJ,OAAO,CAACiD,sBAAsB,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAChE,KAAK,CAACuB,OAAO,GAAG,MAAM;IAC5FvN,MAAM,CAAC,IAAI,CAACsD,QAAQ,CAACyJ,OAAO,CAAC1E,aAAa,CAAC,0CAA0C,CAAC,CAAC;EAC3F,CAAC;EACD9G,YAAY,CAACe,SAAS,CAAC0M,aAAa,GAAG,UAAUjD,OAAO,EAAExI,SAAS,EAAED,QAAQ,EAAEM,CAAC,EAAE;IAC9E,IAAI,IAAI,CAACpC,MAAM,IAAI,IAAI,CAACA,MAAM,CAACa,WAAW,EAAE;MACxC;IACJ;IACA,IAAI,CAACb,MAAM,CAACgB,YAAY,CAACoM,eAAe,GAAG,MAAM;IACjD5O,MAAM,CAAC+L,OAAO,CAAC;IACf,IAAIzI,QAAQ,EAAE;MACVA,QAAQ,CAAC+J,KAAK,CAAC,CAAC;IACpB;IACA,IAAI,CAAC7L,MAAM,CAACqD,OAAO,CAAClF,MAAM,CAACsQ,iBAAiB,EAAErM,CAAC,CAAC;IAChD,IAAIL,SAAS,IAAI2M,QAAQ,CAACC,IAAI,CAACC,QAAQ,CAAC7M,SAAS,CAACwJ,OAAO,CAAC,EAAE;MACxDxJ,SAAS,CAACV,OAAO,CAAC,CAAC;IACvB;EACJ,CAAC;EACDtB,YAAY,CAACe,SAAS,CAACgM,UAAU,GAAG,UAAUhL,QAAQ,EAAEC,SAAS,EAAEwI,OAAO,EAAEnI,CAAC,EAAE;IAC3E,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAI,CAACrC,MAAM,CAACgB,YAAY,CAACoM,eAAe,GAAG,MAAM;IACjDhL,CAAC,CAACmJ,OAAO,GAAGhB,OAAO;IACnBnI,CAAC,CAACyM,iBAAiB,GAAGpP,gBAAgB,CAACqP,MAAM;IAC7C,IAAIvD,OAAO,GAAGnJ,CAAC,CAACa,IAAI;IACpB,IAAIsI,OAAO,CAAC8C,UAAU,KAAK,GAAG,EAAE;MAC5B,IAAI,CAACrO,MAAM,CAACqD,OAAO,CAAClF,MAAM,CAAC4Q,kBAAkB,EAAE3M,CAAC,EAAE,UAAUA,CAAC,EAAE;QAC3D,IAAI,CAAC9D,iBAAiB,CAAC+D,KAAK,CAACrC,MAAM,CAAC8C,mBAAmB,CAACyG,IAAI,CAAC,EAAE;UAC3D,IAAIyF,GAAG,GAAG3M,KAAK,CAACrC,MAAM,CAAC8C,mBAAmB,CAACyG,IAAI,GAAGnH,CAAC,CAACa,IAAI,CAACW,IAAI;UAC7D2G,OAAO,CAAC0E,GAAG,GAAGD,GAAG;UACjBzE,OAAO,CAAChE,YAAY,CAAC,KAAK,EAAEnE,CAAC,CAACa,IAAI,CAACW,IAAI,CAAC;QAC5C;MACJ,CAAC,CAAC;IACN,CAAC,MACI,IAAI2H,OAAO,CAAC8C,UAAU,KAAK,GAAG,EAAE;MACjC,IAAI,CAACrO,MAAM,CAACqD,OAAO,CAAClF,MAAM,CAAC+Q,aAAa,EAAE9M,CAAC,EAAE,UAAUA,CAAC,EAAE;QACtD,IAAI,CAAC9D,iBAAiB,CAAC8D,CAAC,CAACmJ,OAAO,CAAC0D,GAAG,CAAC,EAAE;UACnC7M,CAAC,CAACmJ,OAAO,CAAC0D,GAAG,GAAG,EAAE;QACtB;MACJ,CAAC,CAAC;IACN;IACA,IAAI,CAACvN,cAAc,GAAG2K,UAAU,CAAC,YAAY;MACzCvK,QAAQ,CAAC+J,KAAK,CAAC,CAAC;MAChBtB,OAAO,CAACC,KAAK,CAACC,OAAO,GAAG,GAAG;MAC3BpI,KAAK,CAAC0H,oBAAoB,CAAC,KAAK,CAAC;MACjC,IAAIhI,SAAS,IAAI2M,QAAQ,CAACC,IAAI,CAACC,QAAQ,CAAC7M,SAAS,CAACwJ,OAAO,CAAC,EAAE;QACxDxJ,SAAS,CAACV,OAAO,CAAC,CAAC;MACvB;IACJ,CAAC,EAAE,IAAI,CAAC;EACZ,CAAC;EACDtB,YAAY,CAACe,SAAS,CAACwL,YAAY,GAAG,UAAU6C,YAAY,EAAErN,QAAQ,EAAE;IACpE,IAAIsN,WAAW,GAAG,IAAI,CAACpP,MAAM,CAACkL,cAAc,CAAChB,MAAM,GAAG,IAAI,CAAClK,MAAM,CAACuL,OAAO,CAAC8D,SAAS,GAC/EF,YAAY,CAACE,SAAS,GAAGF,YAAY,CAACE,SAAS;IACnD,IAAIC,WAAW,GAAG,IAAI,CAACtP,MAAM,CAACuL,OAAO,CAAC8D,SAAS,GAAG,IAAI,CAACrP,MAAM,CAACuL,OAAO,CAACgE,YAAY;IAClF,IAAIH,WAAW,GAAGE,WAAW,EAAE;MAC3BxN,QAAQ,CAACqJ,QAAQ,GAAG,IAAI,CAACnL,MAAM,CAACgB,YAAY;MAC5Cc,QAAQ,CAACmJ,OAAO,GAAG,IAAI,CAACjL,MAAM,CAACkL,cAAc,CAAChB,MAAM,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE;MAChEpI,QAAQ,CAACyJ,OAAO,CAACf,KAAK,CAACuB,OAAO,GAAG,OAAO;IAC5C,CAAC,MACI;MACD,IAAIjK,QAAQ,EAAE;QACVA,QAAQ,CAAC0N,eAAe,CAACL,YAAY,CAAC;QACtCrN,QAAQ,CAACyJ,OAAO,CAACf,KAAK,CAACuB,OAAO,GAAG,OAAO;MAC5C;IACJ;EACJ,CAAC;EACDhM,YAAY,CAACe,SAAS,CAACuI,YAAY,GAAG,UAAUoG,MAAM,EAAEC,QAAQ,EAAE;IAC9D,IAAIC,OAAO,GAAGF,MAAM,CAACpI,KAAK,CAAC,GAAG,CAAC;IAC/B,IAAIuI,OAAO,GAAGD,OAAO,CAAC,CAAC,CAAC,CAACE,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IAC5C,IAAIC,SAAS,GAAGF,OAAO,CAACvI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACrC,IAAI0I,SAAS,GAAGC,IAAI,CAACL,OAAO,CAAC,CAAC,CAAC,CAAC;IAChC,IAAIM,MAAM,GAAGF,SAAS,CAAC7M,MAAM;IAC7B,IAAIgN,SAAS,GAAG,IAAIC,UAAU,CAACF,MAAM,CAAC;IACtC,OAAOA,MAAM,EAAE,EAAE;MACbC,SAAS,CAACD,MAAM,CAAC,GAAGF,SAAS,CAACK,UAAU,CAACH,MAAM,CAAC;IACpD;IACA,IAAIpR,OAAO,CAACwR,IAAI,IAAIC,SAAS,CAACC,UAAU,CAACnJ,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;MAC3D,IAAIoJ,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACP,SAAS,CAAC,EAAE;QAAEjM,IAAI,EAAE6L;MAAU,CAAC,CAAC;MACrDrR,MAAM,CAAC+R,IAAI,EAAE;QAAE5M,IAAI,EAAE8L,QAAQ,GAAG,GAAG,IAAI,CAACnR,KAAK,CAACuR,SAAS,CAAC,GAAGA,SAAS,GAAG,EAAE;MAAE,CAAC,CAAC;MAC7E,OAAOU,IAAI;IACf,CAAC,MACI;MACD,OAAO,IAAIE,IAAI,CAAC,CAACR,SAAS,CAAC,EAAER,QAAQ,GAAG,GAAG,IAAI,CAACnR,KAAK,CAACuR,SAAS,CAAC,GAAGA,SAAS,GAAG,EAAE,CAAC,EAAE;QAAE7L,IAAI,EAAE6L;MAAU,CAAC,CAAC;IAC5G;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EAEI/P,YAAY,CAACe,SAAS,CAAC8D,eAAe,GAAG,UAAU+L,SAAS,EAAE3J,UAAU,EAAE;IACtE,IAAI,CAACzI,KAAK,CAACyI,UAAU,CAAC4J,QAAQ,CAAC,CAAC,CAAC,CAACzJ,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE;MACpDH,UAAU,CAAC4J,QAAQ,CAAC,CAAC,CAAC,CAACnK,SAAS,CAACoK,GAAG,CAAC,kBAAkB,CAAC;IAC5D;IACA,IAAI1B,YAAY,GAAG,IAAI,CAACnP,MAAM,CAAC+E,aAAa,CAAC,MAAM,CAAC;IACpDoK,YAAY,CAACvE,WAAW,CAAC5D,UAAU,CAAC4J,QAAQ,CAAC,CAAC,CAAC,CAAC;IAChD,IAAIE,UAAU,GAAG3B,YAAY,CAACnK,SAAS;IACvC,IAAI,CAACU,eAAe,GAAG,IAAI,CAAClF,aAAa,CAACmF,WAAW,CAACnG,UAAU,CAACoG,OAAO,CAAC;IACzE,IAAIC,eAAe,GAAG,IAAI,CAACH,eAAe,CAACI,WAAW,CAAC,CAAC;IACxD,IAAIC,KAAK,GAAG,IAAI,CAAChF,gBAAgB,CAACiF,QAAQ,CAACH,eAAe,CAAC;IAC3D,IAAI,CAACI,aAAa,GAAG,IAAI,CAAClF,gBAAgB,CAACmF,IAAI,CAACH,KAAK,EAAEF,eAAe,CAAC;IACvE,IAAI,IAAI,CAAC7F,MAAM,CAACqF,oBAAoB,CAACoC,MAAM,EAAE;MACzC,IAAI,CAACC,WAAW,CAACoJ,UAAU,EAAEH,SAAS,EAAE,KAAK,CAAC;IAClD,CAAC,MACI,IAAI,IAAI,CAAC3Q,MAAM,CAACqF,oBAAoB,CAACsC,SAAS,EAAE;MACjD,IAAI,CAACC,eAAe,CAACkJ,UAAU,EAAEH,SAAS,EAAE,KAAK,CAAC;IACtD,CAAC,MACI,IAAI,IAAI,CAAC3Q,MAAM,CAACqF,oBAAoB,CAACwC,UAAU,EAAE;MAClD,IAAI,CAACC,UAAU,CAACgJ,UAAU,EAAE,KAAK,EAAEH,SAAS,CAAC;IACjD,CAAC,MACI;MACD,IAAI,CAAC7I,UAAU,CAACgJ,UAAU,EAAE,IAAI,EAAEH,SAAS,CAAC;IAChD;EACJ,CAAC;EACD5Q,YAAY,CAACe,SAAS,CAACiQ,WAAW,GAAG,YAAY;IAC7C,IAAI,CAAC/O,eAAe,GAAG,IAAI3D,WAAW,CAAC;MAAE2S,KAAK,EAAE,IAAI,CAACtQ,IAAI,CAAC8F,WAAW,CAAC,YAAY,CAAC;MAC/E5C,IAAI,EAAE,aAAa;MAAEqN,OAAO,EAAE;IAAK,CAAC,CAAC;IACzC,IAAI,CAACjP,eAAe,CAACkP,gBAAgB,GAAG,IAAI;IAC5C,IAAIC,iBAAiB,GAAG,IAAI,CAACnR,MAAM,CAACuL,OAAO,CAAC1E,aAAa,CAAC,gBAAgB,CAAC;IAC3E,IAAI,CAAC7E,eAAe,CAAC6L,QAAQ,CAACsD,iBAAiB,CAAC;IAChD,IAAI,CAAClP,gBAAgB,GAAG,IAAI5D,WAAW,CAAC;MAAE2S,KAAK,EAAE,IAAI,CAACtQ,IAAI,CAAC8F,WAAW,CAAC,aAAa,CAAC;MAAE5C,IAAI,EAAE;IAAc,CAAC,CAAC;IAC7G,IAAI,CAAC3B,gBAAgB,CAACiP,gBAAgB,GAAG,IAAI;IAC7C,IAAIE,kBAAkB,GAAG,IAAI,CAACpR,MAAM,CAACuL,OAAO,CAAC1E,aAAa,CAAC,cAAc,CAAC;IAC1E,IAAI,CAAC5E,gBAAgB,CAAC4L,QAAQ,CAACuD,kBAAkB,CAAC;IAClD,IAAI,CAAClP,oBAAoB,GAAG,IAAI7D,WAAW,CAAC;MAAE2S,KAAK,EAAE,IAAI,CAACtQ,IAAI,CAAC8F,WAAW,CAAC,WAAW,CAAC;MAAE5C,IAAI,EAAE;IAAc,CAAC,CAAC;IAC/G,IAAI,CAAC1B,oBAAoB,CAACgP,gBAAgB,GAAG,IAAI;IACjD,IAAIG,gBAAgB,GAAG,IAAI,CAACrR,MAAM,CAACuL,OAAO,CAAC1E,aAAa,CAAC,kBAAkB,CAAC;IAC5E,IAAI,CAAC3E,oBAAoB,CAAC2L,QAAQ,CAACwD,gBAAgB,CAAC;EACxD,CAAC;EACDtR,YAAY,CAACe,SAAS,CAACwQ,gBAAgB,GAAG,UAAU5O,KAAK,EAAEJ,IAAI,EAAEiP,WAAW,EAAEC,YAAY,EAAE7O,uBAAuB,EAAE;IACjH,IAAI4O,WAAW,EAAE;MACb,IAAI,CAACzJ,UAAU,CAACpF,KAAK,EAAE,KAAK,EAAEJ,IAAI,CAAC;IACvC,CAAC,MACI,IAAIkP,YAAY,EAAE;MACnB,IAAI,CAAC1J,UAAU,CAACpF,KAAK,EAAE,IAAI,EAAEJ,IAAI,CAAC;IACtC,CAAC,MACI;MACD,IAAI,CAACsF,eAAe,CAAClF,KAAK,EAAEJ,IAAI,EAAEK,uBAAuB,CAAC;IAC9D;EACJ,CAAC;EACD5C,YAAY,CAACe,SAAS,CAAC4G,WAAW,GAAG,UAAUhF,KAAK,EAAEJ,IAAI,EAAEK,uBAAuB,EAAE;IACjF,IAAIN,KAAK,GAAG,IAAI;IAChB,IAAIoP,WAAW,GAAG;MACdC,OAAO,EAAE,CACL;QACIC,KAAK,EAAE,SAAAA,CAAA,EAAY;UACf,IAAI,CAACtP,KAAK,CAACuP,SAAS,CAAC/Q,WAAW,EAAE;YAC9B,IAAI0Q,WAAW,GAAGlP,KAAK,CAACrC,MAAM,CAACuL,OAAO,CAAC1E,aAAa,CAAC,gBAAgB,CAAC,CAACoK,OAAO;YAC9E,IAAIO,YAAY,GAAGnP,KAAK,CAACrC,MAAM,CAACuL,OAAO,CAAC1E,aAAa,CAAC,cAAc,CAAC,CAACoK,OAAO;YAC7E5O,KAAK,CAACuP,SAAS,CAACC,IAAI,CAAC,CAAC;YACtB,IAAIC,QAAQ,GAAGzP,KAAK,CAACuP,SAAS;YAC9BvP,KAAK,CAAC1B,eAAe,CAACkL,KAAK,CAACiG,QAAQ,CAAC;YACrCzP,KAAK,CAACuP,SAAS,CAACvQ,OAAO,CAAC,CAAC;YACzBgB,KAAK,CAACiP,gBAAgB,CAAC5O,KAAK,EAAEJ,IAAI,EAAEiP,WAAW,EAAEC,YAAY,EAAE7O,uBAAuB,CAAC;UAC3F;QACJ,CAAC;QACDoP,WAAW,EAAE;UACTC,SAAS,EAAE,IAAI;UACf9F,QAAQ,EAAE,SAAS,GAAGhN,gBAAgB;UACtCmJ,OAAO,EAAE,IAAI,CAAC3H,IAAI,CAAC8F,WAAW,CAAC,eAAe;QAClD;MACJ,CAAC,EACD;QACImL,KAAK,EAAE,SAAAA,CAAA,EAAY;UACf,IAAI,CAACtP,KAAK,CAACuP,SAAS,CAAC/Q,WAAW,EAAE;YAC9BwB,KAAK,CAACuP,SAAS,CAACC,IAAI,CAAC,CAAC;YACtB,IAAII,MAAM,GAAG5P,KAAK,CAACuP,SAAS;YAC5BvP,KAAK,CAAC1B,eAAe,CAACkL,KAAK,CAACoG,MAAM,CAAC;YACnC5P,KAAK,CAACuP,SAAS,CAACvQ,OAAO,CAAC,CAAC;UAC7B;QACJ,CAAC;QACD0Q,WAAW,EAAE;UACT7F,QAAQ,EAAE,SAAS,GAAG/M,oBAAoB;UAC1CkJ,OAAO,EAAE,IAAI,CAAC3H,IAAI,CAAC8F,WAAW,CAAC,mBAAmB;QACtD;MACJ,CAAC,CACJ;MACD0L,MAAM,EAAE,IAAI,CAACxR,IAAI,CAAC8F,WAAW,CAAC,aAAa,CAAC;MAC5C6B,OAAO,EAAE,IAAI,CAAC3H,IAAI,CAAC8F,WAAW,CAAC,oBAAoB,CAAC,GAAG,2CAA2C,GAC9F,6BAA6B,GAAGzH,yBAAyB,GAAG,wBAAwB,GACpF,kEAAkE,GAClEC,2BAA2B,GAAG,4BAA4B,GAC1D,4DAA4D,GAC5DC,0BAA0B,GAAG,sCAAsC;MACvEkT,MAAM,EAAE,IAAI,CAACnS,MAAM,CAACuL,OAAO;MAC3BF,KAAK,EAAE,OAAO;MACdD,MAAM,EAAE,OAAO;MACfc,QAAQ,EAAE9M,yBAAyB;MACnCgT,OAAO,EAAEvT,OAAO,CAACwT,QAAQ;MACzBC,OAAO,EAAE;IACb,CAAC;IACD,IAAI,CAACV,SAAS,GAAG,IAAI,CAACjR,eAAe,CAAC4R,MAAM,CAACd,WAAW,CAAC;IACzD,IAAIe,gBAAgB,GAAG,IAAI,CAACxS,MAAM,CAACuL,OAAO,CAAC1E,aAAa,CAAC,GAAG,GAAG,IAAI,CAAC7G,MAAM,CAAC+K,KAAK,CAAC,CAAC,GAC5E,qBAAqB,CAAC;IAC5B,IAAIyH,gBAAgB,KAAK,IAAI,IAAIA,gBAAgB,CAACxN,SAAS,KAAK,EAAE,EAAE;MAChE,IAAI,CAACyN,aAAa,CAACD,gBAAgB,CAAC;IACxC;IACA,IAAIA,gBAAgB,KAAK,IAAI,EAAE;MAC3BA,gBAAgB,GAAG,IAAI,CAACxS,MAAM,CAAC+E,aAAa,CAAC,KAAK,EAAE;QAChD+F,EAAE,EAAE,IAAI,CAAC9K,MAAM,CAAC+K,KAAK,CAAC,CAAC,GAAG;MAC9B,CAAC,CAAC;MACF,IAAI,CAAC/K,MAAM,CAAC2K,aAAa,CAACC,WAAW,CAAC4H,gBAAgB,CAAC;IAC3D;IACA,IAAI,CAACZ,SAAS,CAAC/D,QAAQ,CAAC2E,gBAAgB,CAAC;IACzC,IAAI,CAACzB,WAAW,CAAC,CAAC;IAClB,IAAI,CAACa,SAAS,CAACc,IAAI,CAAC,CAAC;IACrB,IAAI,CAACtR,WAAW,CAAC;MAAE8K,QAAQ,EAAE,IAAI,CAAClM,MAAM,CAAC2S,WAAW,CAAC;IAAE,CAAC,CAAC;EAC7D,CAAC;EACD5S,YAAY,CAACe,SAAS,CAAC8R,SAAS,GAAG,UAAUC,UAAU,EAAEzQ,CAAC,EAAE;IACxD,IAAIyQ,UAAU,IAAIzQ,CAAC,CAAC8J,QAAQ,EAAE;MAC1B,IAAI5N,iBAAiB,CAAC8D,CAAC,CAAC0Q,WAAW,CAAC,EAAE;QAClCD,UAAU,CAACE,aAAa,CAAC;UAAE7G,QAAQ,EAAE,CAAC2G,UAAU,CAAC3G,QAAQ,GAAG,GAAG,GAAG9J,CAAC,CAAC8J,QAAQ,EAAEzG,IAAI,CAAC;QAAE,CAAC,CAAC;MAC3F,CAAC,MACI;QACDoN,UAAU,CAACE,aAAa,CAAC;UAAE7G,QAAQ,EAAE,CAAC2G,UAAU,CAAC3G,QAAQ,CAAC3I,OAAO,CAACnB,CAAC,CAAC0Q,WAAW,EAAE,EAAE,CAAC,CAACrN,IAAI,CAAC,CAAC,GAAG,GAAG,GAAGrD,CAAC,CAAC8J,QAAQ,EAAEzG,IAAI,CAAC;QAAE,CAAC,CAAC;MAC7H;IACJ;EACJ,CAAC;EACD;EACA1F,YAAY,CAACe,SAAS,CAACM,WAAW,GAAG,UAAUgB,CAAC,EAAE;IAC9C,IAAI,IAAI,CAACN,QAAQ,IAAIM,CAAC,CAAC8J,QAAQ,EAAE;MAC7B,IAAI5N,iBAAiB,CAAC8D,CAAC,CAAC0Q,WAAW,CAAC,EAAE;QAClCpU,QAAQ,CAAC,CAAC,IAAI,CAACoD,QAAQ,CAACyJ,OAAO,CAAC,EAAEnJ,CAAC,CAAC8J,QAAQ,CAAC;MACjD,CAAC,MACI;QACDvN,WAAW,CAAC,CAAC,IAAI,CAACmD,QAAQ,CAACyJ,OAAO,CAAC,EAAEnJ,CAAC,CAAC0Q,WAAW,CAAC;QACnDpU,QAAQ,CAAC,CAAC,IAAI,CAACoD,QAAQ,CAACyJ,OAAO,CAAC,EAAEnJ,CAAC,CAAC8J,QAAQ,CAAC;MACjD;IACJ;IACA,IAAI,CAAC0G,SAAS,CAAC,IAAI,CAAChB,SAAS,EAAExP,CAAC,CAAC;IACjC,IAAI,CAACwQ,SAAS,CAAC,IAAI,CAAC7Q,SAAS,EAAEK,CAAC,CAAC;IACjC,IAAI,CAACwQ,SAAS,CAAC,IAAI,CAAC1Q,oBAAoB,EAAEE,CAAC,CAAC;IAC5C,IAAI,CAACwQ,SAAS,CAAC,IAAI,CAAC3Q,gBAAgB,EAAEG,CAAC,CAAC;IACxC,IAAI,CAACwQ,SAAS,CAAC,IAAI,CAAC5Q,eAAe,EAAEI,CAAC,CAAC;EAC3C,CAAC;EACDrC,YAAY,CAACe,SAAS,CAAC2R,aAAa,GAAG,UAAUD,gBAAgB,EAAE;IAC/D,IAAIQ,kBAAkB,GAAG,IAAI,CAAChT,MAAM,CAACuL,OAAO,CAAC1E,aAAa,CAAC,yBAAyB,CAAC;IACrFrI,MAAM,CAACwU,kBAAkB,CAAC;IAC1B,IAAIC,2BAA2B,GAAGT,gBAAgB,CAACU,QAAQ,CAAChQ,MAAM;IAClE,KAAK,IAAIkF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6K,2BAA2B,EAAE7K,CAAC,EAAE,EAAE;MAClD5J,MAAM,CAACgU,gBAAgB,CAACU,QAAQ,CAAC,CAAC,CAAC,CAAC;IACxC;EACJ,CAAC;EACDnT,YAAY,CAACe,SAAS,CAACQ,QAAQ,GAAG,UAAUc,CAAC,EAAE;IAC3C,IAAI+P,MAAM,GAAG/P,CAAC,CAACE,IAAI,CAAC6P,MAAM;IAC1B,IAAIA,MAAM,IAAIA,MAAM,CAAC1L,SAAS,IAAM,IAAI,CAACmL,SAAS,IAAI,CAAC9S,OAAO,CAACqT,MAAM,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,CAACP,SAAS,CAACrG,OAAO,CAACT,EAAE,GAAG,IAAI,GAAG,GAAG,CAAG,IACxH,CAACqH,MAAM,CAAC1L,SAAS,CAACmI,QAAQ,CAAC,gBAAgB,CAAE,EAAE;MACnD,IAAI,IAAI,CAACgD,SAAS,EAAE;QAChB,IAAI,CAACA,SAAS,CAACC,IAAI,CAAC,CAAC;MACzB;IACJ;EACJ,CAAC;EACD9R,YAAY,CAACe,SAAS,CAACqS,eAAe,GAAG,UAAUC,IAAI,EAAE;IACrD,IAAIC,cAAc,GAAGD,IAAI,CAAC/M,gBAAgB,CAAC,8BAA8B,CAAC;IAC1E,KAAK,IAAI+B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiL,cAAc,CAACnQ,MAAM,EAAEkF,CAAC,EAAE,EAAE;MAC5C5J,MAAM,CAAC6U,cAAc,CAACjL,CAAC,CAAC,CAAC;IAC7B;IACA,OAAOgL,IAAI;EACf,CAAC;EACDrT,YAAY,CAACe,SAAS,CAACgH,UAAU,GAAG,UAAUpF,KAAK,EAAE4Q,KAAK,EAAEhR,IAAI,EAAE;IAC9D,IAAID,KAAK,GAAG,IAAI;IAChB,IAAIkR,aAAa,GAAG,IAAI,CAACvT,MAAM,CAAC+E,aAAa,CAAC,KAAK,EAAE;MAAEyO,SAAS,EAAE,cAAc;MAAEC,MAAM,EAAE;IAAkB,CAAC,CAAC;IAC9G,IAAI,IAAI,CAACrT,aAAa,IAAI,IAAI,CAACC,YAAY,EAAE;MACzCqC,KAAK,GAAG,IAAI,CAACuC,cAAc,CAACvC,KAAK,CAAC;IACtC;IACA6Q,aAAa,CAACvO,SAAS,GAAGtC,KAAK;IAC/B6Q,aAAa,GAAG,IAAI,CAACJ,eAAe,CAACI,aAAa,CAAC;IACnD,IAAI,IAAI,CAACvT,MAAM,CAACqF,oBAAoB,CAACqO,UAAU,KAAK,IAAI,EAAE;MACtDH,aAAa,GAAG,IAAI,CAACG,UAAU,CAACH,aAAa,CAAC;IAClD;IACA,IAAID,KAAK,EAAE;MACPC,aAAa,GAAG,IAAI,CAACI,gBAAgB,CAACJ,aAAa,EAAED,KAAK,CAAC;IAC/D,CAAC,MACI,IAAI,IAAI,CAACtT,MAAM,CAACqF,oBAAoB,CAACuO,WAAW,KAAK,IAAI,EAAE;MAC5DL,aAAa,GAAG,IAAI,CAACI,gBAAgB,CAACJ,aAAa,EAAED,KAAK,CAAC;IAC/D;IACA,IAAI,IAAI,CAACtT,MAAM,CAACqF,oBAAoB,CAACC,iBAAiB,KAAK,IAAI,EAAE;MAC7DiO,aAAa,GAAG,IAAI,CAACM,YAAY,CAACN,aAAa,CAAC;IACpD;IACA,IAAI,CAACtN,aAAa,CAAC6N,OAAO,CAAC,CAAC;IAC5B,IAAIC,OAAO,GAAGR,aAAa,CAACvO,SAAS,CAACqC,KAAK,CAAC,GAAG,CAAC,CAAC2M,IAAI,CAAC,OAAO,CAAC;IAC9DT,aAAa,CAACvO,SAAS,GAAG,IAAI,CAACpF,cAAc,CAACmU,OAAO,CAAC;IACtD,IAAIE,MAAM,GAAGV,aAAa,CAAClN,gBAAgB,CAAC,KAAK,CAAC;IAClD,KAAK,IAAI+B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6L,MAAM,CAAC/Q,MAAM,EAAEkF,CAAC,EAAE,EAAE;MACpC,IAAI,CAAC7J,KAAK,CAAC0V,MAAM,CAAC7L,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE;QACvC8M,MAAM,CAAC7L,CAAC,CAAC,CAAC3B,SAAS,CAACoK,GAAG,CAAC,kBAAkB,CAAC;MAC/C;MACA,IAAI,CAACqD,kBAAkB,CAACD,MAAM,CAAC7L,CAAC,CAAC,CAAC;IACtC;IACA,IAAI,CAAC+L,YAAY,CAACZ,aAAa,CAAC;IAChC,IAAIA,aAAa,CAAClN,gBAAgB,CAAC,SAAS,CAAC,CAACnD,MAAM,GAAG,CAAC,EAAE;MACtD,IAAI,CAACkR,qBAAqB,CAACb,aAAa,CAAC;IAC7C;IACA,IAAIA,aAAa,CAAC3M,WAAW,KAAK,EAAE,IAAI,CAACrI,KAAK,CAACgV,aAAa,CAAC1M,aAAa,CAAC,KAAK,CAAC,CAAC,IAC9E,CAACtI,KAAK,CAACgV,aAAa,CAAC1M,aAAa,CAAC,OAAO,CAAC,CAAC,EAAE;MAC9C,IAAIwN,eAAe,GAAG,IAAI,CAACrU,MAAM,CAAC+E,aAAa,CAAC,KAAK,CAAC;MACtDsP,eAAe,CAACrP,SAAS,GAAGtC,KAAK;MACjC,IAAI4R,SAAS,GAAG,EAAE;MAClB,IAAI,CAAC/V,KAAK,CAAC8V,eAAe,CAACxN,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE;QAC9C,IAAI0D,OAAO,GAAG8J,eAAe,CAAChO,gBAAgB,CAAC,KAAK,CAAC;QACrD,IAAI2C,SAAS,GAAG,EAAE;QAClB,IAAIC,OAAO,GAAG,EAAE;QAChB,IAAIC,SAAS,GAAG,EAAE;QAClB,KAAK,IAAId,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmC,OAAO,CAACrH,MAAM,EAAEkF,CAAC,EAAE,EAAE;UACrC,IAAImC,OAAO,CAACnC,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,IAC9BoD,OAAO,CAACnC,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACD,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;YACrE4B,SAAS,CAACG,IAAI,CAACoB,OAAO,CAACnC,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,CAAC;YAC9C8B,OAAO,CAACE,IAAI,CAACvK,WAAW,CAAC,WAAW,CAAC,CAAC;YACtCsK,SAAS,CAACC,IAAI,CAACoB,OAAO,CAACnC,CAAC,CAAC,CAAC;UAC9B;QACJ;QACA,IAAIgB,QAAQ,GAAG,EAAE;QACjB,IAAImL,WAAW,GAAG,KAAK,CAAC;QACxB,KAAK,IAAInM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGY,SAAS,CAAC9F,MAAM,EAAEkF,CAAC,EAAE,EAAE;UACvCgB,QAAQ,CAACD,IAAI,CAAC,IAAI,CAACE,YAAY,CAACL,SAAS,CAACZ,CAAC,CAAC,EAAEa,OAAO,CAACb,CAAC,CAAC,CAAC,CAAC;UAC1DmM,WAAW,GAAG;YACV3Q,IAAI,EAAEwF,QAAQ,CAAChB,CAAC,CAAC,CAACxE,IAAI;YAAEoK,OAAO,EAAE5E,QAAQ,CAAChB,CAAC,CAAC;YAC5CgE,IAAI,EAAEhD,QAAQ,CAAChB,CAAC,CAAC,CAACgE,IAAI;YAAEnI,IAAI,EAAEmF,QAAQ,CAAChB,CAAC,CAAC,CAACnE,IAAI;YAC9CgK,MAAM,EAAE,EAAE;YAAEC,kBAAkB,EAAE;cAAEC,OAAO,EAAE,EAAE;cAAEC,OAAO,EAAE;YAAG,CAAC;YAAEC,UAAU,EAAE;UAC9E,CAAC;UACDiG,SAAS,CAACnL,IAAI,CAACoL,WAAW,CAAC;QAC/B;MACJ;MACA,IAAI,CAACvU,MAAM,CAACqD,OAAO,CAAClF,MAAM,CAACqW,iBAAiB,EAAE;QAAE9R,KAAK,EAAE6Q,aAAa,CAACvO,SAAS;QAAEsP,SAAS,EAAEA;MAAU,CAAC,EAAE,UAAUG,WAAW,EAAE;QAAE/R,KAAK,GAAG+R,WAAW,CAAC/R,KAAK;MAAE,CAAC,CAAC;MAC9J6Q,aAAa,CAACvO,SAAS,GAAG,IAAI,CAAChF,MAAM,CAAC0U,kBAAkB,CAAChS,KAAK,CAAC;MAC/D6Q,aAAa,GAAG,IAAI,CAACoB,aAAa,CAACpB,aAAa,EAAEjR,IAAI,CAACkD,gBAAgB,CAAC;MACxE,IAAI,CAACxF,MAAM,CAACyE,SAAS,CAACC,aAAa,CAACC,WAAW,CAAC,YAAY,EAAE,cAAc,EAAErC,IAAI,EAAE,UAAUsS,UAAU,EAAE;QACtGnW,MAAM,CAAC6D,IAAI,EAAE;UAAEsO,QAAQ,EAAEgE,UAAU,CAAChE,QAAQ;UAAEiE,aAAa,EAAED,UAAU,CAACrK;QAAQ,CAAC,EAAE,IAAI,CAAC;QACxFlI,KAAK,CAACrC,MAAM,CAACyE,SAAS,CAACqQ,SAAS,CAACzS,KAAK,CAACrC,MAAM,EAAEsC,IAAI,CAAC;MACxD,CAAC,EAAEiR,aAAa,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAACvT,MAAM,CAACkI,QAAQ,CAAC;MACnD,IAAI,CAAClI,MAAM,CAACoE,MAAM,CAACjG,MAAM,CAAC4W,UAAU,EAAE,CAAC,CAAC,CAAC;MACzCjV,cAAc,CAAC,IAAI,CAACE,MAAM,CAACgV,aAAa,CAAClP,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC9F,MAAM,CAACgB,YAAY,CAAC;MACjF,IAAI,CAACiU,eAAe,CAAC,CAAC;MACtB,IAAI,CAACjV,MAAM,CAACoE,MAAM,CAACjG,MAAM,CAAC+W,cAAc,EAAE,CAAC,CAAC,CAAC;MAC7C,IAAI,CAACC,gBAAgB,CAAC,IAAI,CAACnV,MAAM,CAACgB,YAAY,CAAC;IACnD;EACJ,CAAC;EACDjB,YAAY,CAACe,SAAS,CAACsU,mBAAmB,GAAG,UAAU7J,OAAO,EAAE;IAC5D,IAAIhB,OAAO,GAAGgB,OAAO,CAAClF,gBAAgB,CAAC,KAAK,CAAC;IAC7C,IAAIgP,OAAO,GAAG,SAAAA,CAAUjN,CAAC,EAAE;MACvB,IAAImC,OAAO,CAACnC,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,IAC9BoD,OAAO,CAACnC,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,CAACmO,UAAU,CAAC,MAAM,CAAC,EAAE;QACnD,IAAIC,YAAY,GAAGhL,OAAO,CAACnC,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC;QACjD,IAAIqO,KAAK,GAAG,IAAIC,KAAK,CAAC,CAAC;QACvB,IAAIC,kBAAkB,GAAG,SAAAA,CAAA,EAAY;UACjC,IAAIC,MAAM,GAAGjH,QAAQ,CAAC3J,aAAa,CAAC,QAAQ,CAAC;UAC7C,IAAI6Q,GAAG,GAAGD,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC;UACjCF,MAAM,CAACtK,KAAK,GAAGmK,KAAK,CAACnK,KAAK;UAC1BsK,MAAM,CAACvK,MAAM,GAAGoK,KAAK,CAACpK,MAAM;UAC5BwK,GAAG,CAACE,SAAS,CAACN,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;UAC1B,IAAIO,YAAY,GAAGJ,MAAM,CAACK,SAAS,CAAC,WAAW,CAAC;UAChDzL,OAAO,CAACnC,CAAC,CAAC,CAAC6G,GAAG,GAAG8G,YAAY;UAC7BP,KAAK,CAAC3T,mBAAmB,CAAC,MAAM,EAAE6T,kBAAkB,CAAC;QACzD,CAAC;QACDF,KAAK,CAACvG,GAAG,GAAGsG,YAAY;QACxBC,KAAK,CAAC5U,gBAAgB,CAAC,MAAM,EAAE8U,kBAAkB,CAAC;MACtD;IACJ,CAAC;IACD,KAAK,IAAItN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmC,OAAO,CAACrH,MAAM,EAAEkF,CAAC,EAAE,EAAE;MACrCiN,OAAO,CAACjN,CAAC,CAAC;IACd;EACJ,CAAC;EACDrI,YAAY,CAACe,SAAS,CAACqU,gBAAgB,GAAG,UAAU5J,OAAO,EAAE;IACzD,IAAIlJ,KAAK,GAAG,IAAI;IAChB,IAAIyG,SAAS,GAAGyC,OAAO,CAAClF,gBAAgB,CAAC,gBAAgB,CAAC;IAC1D,IAAIyC,SAAS,CAAC5F,MAAM,GAAG,CAAC,EAAE;MACtB,IAAI+S,OAAO,GAAG,SAAAA,CAAU7N,CAAC,EAAE;QACvB,IAAIU,SAAS,CAACV,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACD,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;UACvE,IAAI8O,OAAO,GAAG,IAAIT,KAAK,CAAC,CAAC;UACzBS,OAAO,CAACjH,GAAG,GAAGnG,SAAS,CAACV,CAAC,CAAC,CAACjB,YAAY,CAAC,KAAK,CAAC;UAC9C,IAAIgP,QAAQ,GAAGzH,QAAQ,CAAC3J,aAAa,CAAC,QAAQ,CAAC;UAC/C,IAAIqR,KAAK,GAAGD,QAAQ,CAACN,UAAU,CAAC,IAAI,CAAC;UACrCK,OAAO,CAACG,MAAM,GAAG,YAAY;YACzB,IAAIC,UAAU,GAAGjU,KAAK,CAAC/B,aAAa,CAAC8H,CAAC,CAAC,CAACmO,SAAS,GAAGL,OAAO,CAACM,YAAY;YACxE,IAAIC,WAAW,GAAGpU,KAAK,CAAC/B,aAAa,CAAC8H,CAAC,CAAC,CAACsO,UAAU,GAAGR,OAAO,CAACS,aAAa;YAC3E,IAAIC,UAAU,GAAGvU,KAAK,CAAC/B,aAAa,CAAC8H,CAAC,CAAC,CAACwO,UAAU,GAAGN,UAAU;YAC/D,IAAIO,OAAO,GAAGxU,KAAK,CAAC/B,aAAa,CAAC8H,CAAC,CAAC,CAACyO,OAAO,GAAGJ,WAAW;YAC1D,IAAIK,SAAS,GAAG,CAACzU,KAAK,CAAC/B,aAAa,CAAC8H,CAAC,CAAC,CAACmO,SAAS,GAC7ClU,KAAK,CAAC/B,aAAa,CAAC8H,CAAC,CAAC,CAACwO,UAAU,GACjCvU,KAAK,CAAC/B,aAAa,CAAC8H,CAAC,CAAC,CAAC2O,KAAK,IAAIT,UAAU;YAC9C,IAAIU,UAAU,GAAG,CAAC3U,KAAK,CAAC/B,aAAa,CAAC8H,CAAC,CAAC,CAACsO,UAAU,GAC/CrU,KAAK,CAAC/B,aAAa,CAAC8H,CAAC,CAAC,CAACyO,OAAO,GAC9BxU,KAAK,CAAC/B,aAAa,CAAC8H,CAAC,CAAC,CAAC6O,KAAK,IAAIR,WAAW;YAC/CN,QAAQ,CAAC9K,KAAK,GAAGyL,SAAS;YAC1BX,QAAQ,CAAC/K,MAAM,GAAG4L,UAAU;YAC5B;YACAZ,KAAK,CAACN,SAAS,CAACI,OAAO,EAAEU,UAAU,EAAEC,OAAO,EAAEC,SAAS,EAAEE,UAAU,EAAE,CAAC,EAAE,CAAC,EAAEF,SAAS,EAAEE,UAAU,CAAC;YACjG;YACA,IAAIE,aAAa,GAAGf,QAAQ,CAACH,SAAS,CAAC,WAAW,CAAC;YACnD;YACAlN,SAAS,CAACV,CAAC,CAAC,CAAC7B,YAAY,CAAC,KAAK,EAAE2Q,aAAa,CAAC;YAC/CpO,SAAS,CAACV,CAAC,CAAC,CAAC3B,SAAS,CAACC,MAAM,CAAC,eAAe,CAAC;YAC9CrE,KAAK,CAACuG,YAAY,CAACvG,KAAK,CAACrC,MAAM,CAACgB,YAAY,CAAC;YAC7C,IAAIqB,KAAK,CAACrC,MAAM,CAACkL,cAAc,CAAChB,MAAM,EAAE;cACpC7H,KAAK,CAACrC,MAAM,CAACmX,WAAW,CAAC,CAAC;YAC9B;UACJ,CAAC;QACL;MACJ,CAAC;MACD,KAAK,IAAI/O,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGU,SAAS,CAAC5F,MAAM,EAAEkF,CAAC,EAAE,EAAE;QACvC6N,OAAO,CAAC7N,CAAC,CAAC;MACd;IACJ,CAAC,MACI;MACD,IAAI,CAAC7J,KAAK,CAAC,IAAI,CAACyB,MAAM,CAAC8C,mBAAmB,CAACiG,OAAO,CAAC,IAAI,CAACxK,KAAK,CAAC,IAAI,CAACyB,MAAM,CAAC8C,mBAAmB,CAACyG,IAAI,CAAC,IAC/F,IAAI,CAACvJ,MAAM,CAACgB,YAAY,CAACqF,gBAAgB,CAAC,KAAK,CAAC,CAACnD,MAAM,GAAG,CAAC,IAAI,IAAI,CAAClD,MAAM,CAACgB,YAAY,CAACqF,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC4I,GAAG,CAACqG,UAAU,CAAC,MAAM,CAAC,EAAE;QAC3I,IAAI,CAACF,mBAAmB,CAAC,IAAI,CAACpV,MAAM,CAACgB,YAAY,CAAC;QAClD,IAAI,CAACY,gBAAgB,GAAGyK,UAAU,CAAC,YAAY;UAC3ChK,KAAK,CAACuG,YAAY,CAACvG,KAAK,CAACrC,MAAM,CAACgB,YAAY,CAAC;UAC7C,IAAIqB,KAAK,CAACrC,MAAM,CAACkL,cAAc,CAAChB,MAAM,EAAE;YACpC7H,KAAK,CAACrC,MAAM,CAACmX,WAAW,CAAC,CAAC;UAC9B;QACJ,CAAC,EAAE,EAAE,CAAC;MACV,CAAC,MACI;QACD,IAAI,CAACvO,YAAY,CAAC,IAAI,CAAC5I,MAAM,CAACgB,YAAY,CAAC;QAC3C,IAAI,IAAI,CAAChB,MAAM,CAACkL,cAAc,CAAChB,MAAM,EAAE;UACnC,IAAI,CAAClK,MAAM,CAACmX,WAAW,CAAC,CAAC;QAC7B;MACJ;IACJ;EACJ,CAAC;EACDpX,YAAY,CAACe,SAAS,CAAC6T,aAAa,GAAG,UAAUpJ,OAAO,EAAE6L,MAAM,EAAE;IAC9D,IAAIC,YAAY,GAAG9L,OAAO,CAAClF,gBAAgB,CAAC,OAAO,CAAC;IACpD,KAAK,IAAI+B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiP,YAAY,CAACnU,MAAM,EAAEkF,CAAC,EAAE,EAAE;MAC1C,IAAIkP,cAAc,GAAGD,YAAY,CAACjP,CAAC,CAAC,CAACmP,aAAa,CAACC,QAAQ,KAAK,QAAQ;MACxE,IAAIH,YAAY,CAACjP,CAAC,CAAC,CAAC3B,SAAS,CAACvD,MAAM,GAAG,CAAC,IAAImU,YAAY,CAACjP,CAAC,CAAC,CAAC3B,SAAS,CAACmI,QAAQ,CAAC,oBAAoB,CAAC,EAAE;QAClG,SAAS,CAAC;MACd;MACA,IAAI,IAAI,CAAC5O,MAAM,CAACqF,oBAAoB,CAACwC,UAAU,IAAIuP,MAAM,IAAI,CAACE,cAAc,EAAE;QAC1ED,YAAY,CAACjP,CAAC,CAAC,CAAC3B,SAAS,CAACoK,GAAG,CAAC,cAAc,GAAGuG,MAAM,GAAG,QAAQ,CAAC;MACrE,CAAC,MACI,IAAI,CAACC,YAAY,CAACjP,CAAC,CAAC,CAAC3B,SAAS,CAACmI,QAAQ,CAAC,aAAa,CAAC,EAAE;QACzDyI,YAAY,CAACjP,CAAC,CAAC,CAAC3B,SAAS,CAACoK,GAAG,CAAC,aAAa,CAAC;MAChD;IACJ;IACA,OAAOtF,OAAO;EAClB,CAAC;EACDxL,YAAY,CAACe,SAAS,CAACoT,kBAAkB,GAAG,UAAUD,MAAM,EAAE;IAC1D,IAAI,IAAI,CAACjU,MAAM,CAAC8C,mBAAmB,CAACuI,KAAK,KAAK,MAAM,EAAE;MAClD4I,MAAM,CAAC1N,YAAY,CAAC,OAAO,EAAE,IAAI,CAACvG,MAAM,CAAC8C,mBAAmB,CAACuI,KAAK,CAAC;IACvE;IACA,IAAI,IAAI,CAACrL,MAAM,CAAC8C,mBAAmB,CAAC2U,QAAQ,KAAK,GAAG,IAAI,IAAI,CAACzX,MAAM,CAAC8C,mBAAmB,CAAC2U,QAAQ,KAAK,CAAC,EAAE;MACpGxD,MAAM,CAACzJ,KAAK,CAACiN,QAAQ,GAAG,IAAI,CAACzX,MAAM,CAAC8C,mBAAmB,CAAC2U,QAAQ,CAAC7K,QAAQ,CAAC,CAAC;IAC/E;IACA,IAAI,IAAI,CAAC5M,MAAM,CAAC8C,mBAAmB,CAAC4U,QAAQ,KAAK,IAAI,EAAE;MACnDzD,MAAM,CAACzJ,KAAK,CAACkN,QAAQ,GAAG,IAAI,CAAC1X,MAAM,CAAC2X,oBAAoB,CAAC,CAAC,CAAC/K,QAAQ,CAAC,CAAC;IACzE;IACA,IAAI,IAAI,CAAC5M,MAAM,CAAC8C,mBAAmB,CAACsI,MAAM,KAAK,MAAM,EAAE;MACnD6I,MAAM,CAAC1N,YAAY,CAAC,QAAQ,EAAE,IAAI,CAACvG,MAAM,CAAC8C,mBAAmB,CAACsI,MAAM,CAAC;IACzE;IACA,IAAI,IAAI,CAACpL,MAAM,CAAC8C,mBAAmB,CAAC8U,SAAS,KAAK,GAAG,IAAI,IAAI,CAAC5X,MAAM,CAAC8C,mBAAmB,CAAC8U,SAAS,KAAK,CAAC,EAAE;MACtG3D,MAAM,CAACzJ,KAAK,CAACoN,SAAS,GAAG,IAAI,CAAC5X,MAAM,CAAC8C,mBAAmB,CAAC8U,SAAS,CAAChL,QAAQ,CAAC,CAAC;IACjF;IACA,IAAI,IAAI,CAAC5M,MAAM,CAAC8C,mBAAmB,CAAC+U,SAAS,KAAK,IAAI,EAAE;MACpD5D,MAAM,CAACzJ,KAAK,CAACqN,SAAS,GAAG,IAAI,CAAC7X,MAAM,CAAC8C,mBAAmB,CAAC+U,SAAS,CAACjL,QAAQ,CAAC,CAAC;IACjF;EACJ,CAAC;EACD7M,YAAY,CAACe,SAAS,CAACqT,YAAY,GAAG,UAAUZ,aAAa,EAAE;IAC3D,IAAIuE,QAAQ,GAAGvE,aAAa,CAACL,QAAQ;IACrC,KAAK,IAAI9K,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0P,QAAQ,CAAC5U,MAAM,EAAEkF,CAAC,EAAE,EAAE;MACtC0P,QAAQ,CAAC1P,CAAC,CAAC,CAAC3B,SAAS,CAACoK,GAAG,CAAC,kBAAkB,CAAC;IACjD;EACJ,CAAC;EACD9Q,YAAY,CAACe,SAAS,CAACmU,eAAe,GAAG,YAAY;IACjD,IAAI8C,QAAQ,GAAG,IAAI,CAAC/X,MAAM,CAACgB,YAAY,CAACqF,gBAAgB,CAAC,mBAAmB,CAAC;IAC7E,KAAK,IAAI+B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2P,QAAQ,CAAC7U,MAAM,EAAEkF,CAAC,EAAE,EAAE;MACtC2P,QAAQ,CAAC3P,CAAC,CAAC,CAAC3B,SAAS,CAACC,MAAM,CAAC,kBAAkB,CAAC;MAChD,IAAIqR,QAAQ,CAAC3P,CAAC,CAAC,CAACjB,YAAY,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE;QAC1C4Q,QAAQ,CAAC3P,CAAC,CAAC,CAACuB,eAAe,CAAC,OAAO,CAAC;MACxC;IACJ;EACJ,CAAC;EACD5J,YAAY,CAACe,SAAS,CAAClB,cAAc,GAAG,UAAU8C,KAAK,EAAE;IACrDA,KAAK,GAAG9C,cAAc,CAAC8C,KAAK,EAAE,IAAI,CAAC1C,MAAM,CAAC;IAC1C,OAAO0C,KAAK;EAChB,CAAC;EACD;EACA3C,YAAY,CAACe,SAAS,CAAC8G,eAAe,GAAG,UAAUlF,KAAK,EAAEJ,IAAI,EAAEK,uBAAuB,EAAE;IACrF,IAAIN,KAAK,GAAG,IAAI;IAChB,IAAIkR,aAAa,GAAG,IAAI,CAACvT,MAAM,CAAC+E,aAAa,CAAC,KAAK,EAAE;MAAEyO,SAAS,EAAE,cAAc;MAAEC,MAAM,EAAE;IAAkB,CAAC,CAAC;IAC9GF,aAAa,CAACvO,SAAS,GAAGtC,KAAK;IAC/B,IAAI,CAACsV,oBAAoB,CAACzE,aAAa,CAAC;IACxC,IAAI,CAAC0E,cAAc,CAAC1E,aAAa,CAAC;IAClC,IAAIA,aAAa,CAAC3M,WAAW,CAACnB,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;MACzC,IAAI,CAAClH,KAAK,CAACgV,aAAa,CAAC2E,iBAAiB,CAAC,IAAI3E,aAAa,CAAC2E,iBAAiB,CAACC,OAAO,KAAK,IAAI,EAAE;QAC7F,IAAIC,QAAQ,GAAG7E,aAAa,CAAC2E,iBAAiB;QAC9C,IAAI,CAAC3Z,KAAK,CAACgV,aAAa,CAAC2E,iBAAiB,CAAC,EAAE;UACzC,IAAIG,OAAO,GAAG,IAAI,CAACrY,MAAM,CAAC+E,aAAa,CAAC,MAAM,CAAC;UAC/C,KAAK,IAAIqD,CAAC,GAAG,CAAC,EAAEkQ,CAAC,GAAG,CAAC,EAAElQ,CAAC,GAAGgQ,QAAQ,CAACtK,UAAU,CAAC5K,MAAM,EAAEkF,CAAC,EAAE,EAAEkQ,CAAC,EAAE,EAAE;YAC7D,IAAIF,QAAQ,CAACtK,UAAU,CAAC1F,CAAC,CAAC,CAACoP,QAAQ,KAAK,OAAO,EAAE;cAC7Ca,OAAO,CAACzN,WAAW,CAACwN,QAAQ,CAACtK,UAAU,CAAC1F,CAAC,CAAC,CAAC;cAC3CmL,aAAa,CAACgF,YAAY,CAACF,OAAO,EAAE9E,aAAa,CAAC2E,iBAAiB,CAAC;cACpE9P,CAAC,EAAE;YACP,CAAC,MACI,IAAIgQ,QAAQ,CAACtK,UAAU,CAAC1F,CAAC,CAAC,CAACoP,QAAQ,KAAK,OAAO,IAAIc,CAAC,KAAK,CAAC,EAAE;cAC7D,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,QAAQ,CAACtK,UAAU,CAAC1F,CAAC,CAAC,CAAC0F,UAAU,CAAC5K,MAAM,EAAEsV,CAAC,EAAE,EAAE;gBAC/DH,OAAO,CAACzN,WAAW,CAACwN,QAAQ,CAACtK,UAAU,CAAC1F,CAAC,CAAC,CAAC0F,UAAU,CAAC0K,CAAC,CAAC,CAAC;gBACzDjF,aAAa,CAACgF,YAAY,CAACF,OAAO,EAAE9E,aAAa,CAAC2E,iBAAiB,CAAC;gBACpEM,CAAC,EAAE;cACP;cACApQ,CAAC,EAAE;YACP,CAAC,MACI;cACD;YACJ;UACJ;UACA,IAAI,CAACgQ,QAAQ,CAACK,aAAa,CAAC,CAAC,EAAE;YAC3Bja,MAAM,CAAC4Z,QAAQ,CAAC;UACpB;QACJ;MACJ;MACA,IAAI,CAACM,mBAAmB,CAACnF,aAAa,CAAC;MACvC,IAAI,CAACtN,aAAa,CAAC6N,OAAO,CAAC,CAAC;MAC5BP,aAAa,CAACvO,SAAS,GAAG,IAAI,CAACpF,cAAc,CAAC2T,aAAa,CAACvO,SAAS,CAAC;MACtE,IAAI,CAACmP,YAAY,CAACZ,aAAa,CAAC;MAChC,IAAI,CAACoF,gBAAgB,CAACpF,aAAa,CAAC;MACpC,IAAI,IAAI,CAACvT,MAAM,CAACkI,QAAQ,KAAK,IAAI,IAAI,CAACvF,uBAAuB,EAAE;QAC3D4Q,aAAa,GAAG,IAAI,CAACqF,kBAAkB,CAACrF,aAAa,CAAC;MAC1D,CAAC,MACI,IAAI,IAAI,CAACvT,MAAM,CAACkI,QAAQ,KAAK,KAAK,EAAE;QACrCqL,aAAa,CAACvO,SAAS,GAAGuO,aAAa,CAACvO,SAAS,CAACzB,OAAO,CAAC,+BAA+B,EAAE,OAAO,CAAC,CAACA,OAAO,CAAC,QAAQ,EAAE,QAAQ,CAAC;MACnI;MACA,IAAI,CAACvD,MAAM,CAACqD,OAAO,CAAClF,MAAM,CAACqW,iBAAiB,EAAE;QAAE9R,KAAK,EAAE6Q,aAAa,CAACvO,SAAS;QAAEsP,SAAS,EAAE;MAAK,CAAC,EAAE,UAAUG,WAAW,EAAE;QAAE/R,KAAK,GAAG+R,WAAW,CAAC/R,KAAK;MAAE,CAAC,CAAC;MACzJ6Q,aAAa,CAACvO,SAAS,GAAGtC,KAAK;MAC/B,IAAI,CAAC1C,MAAM,CAACyE,SAAS,CAACC,aAAa,CAACC,WAAW,CAAC,YAAY,EAAE,cAAc,EAAErC,IAAI,EAAE,UAAUsS,UAAU,EAAE;QACtGnW,MAAM,CAAC6D,IAAI,EAAE;UAAEsO,QAAQ,EAAEgE,UAAU,CAAChE,QAAQ;UAAEiE,aAAa,EAAED,UAAU,CAACrK;QAAQ,CAAC,EAAE,IAAI,CAAC;QACxFlI,KAAK,CAACrC,MAAM,CAACyE,SAAS,CAACqQ,SAAS,CAACzS,KAAK,CAACrC,MAAM,EAAEsC,IAAI,CAAC;MACxD,CAAC,EAAEiR,aAAa,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAACvT,MAAM,CAACkI,QAAQ,CAAC;MACnD,IAAI,CAAC+M,eAAe,CAAC,CAAC;IAC1B,CAAC,MACI;MACD,IAAI,CAAChP,aAAa,CAAC6N,OAAO,CAAC,CAAC;MAC5BrV,MAAM,CAAC6D,IAAI,EAAE;QAAEsO,QAAQ,EAAE;MAAG,CAAC,EAAE,IAAI,CAAC;MACpC,IAAI,CAAC5Q,MAAM,CAACyE,SAAS,CAACqQ,SAAS,CAAC,IAAI,CAAC9U,MAAM,EAAEsC,IAAI,CAAC;IACtD;EACJ,CAAC;EACDvC,YAAY,CAACe,SAAS,CAAC6X,gBAAgB,GAAG,UAAU9P,GAAG,EAAE;IACrD,IAAIgQ,YAAY,GAAGhQ,GAAG,CAAC7D,SAAS;IAChC6T,YAAY,GAAGA,YAAY,CAACtV,OAAO,CAAC,kBAAkB,EAAE,EAAE,CAAC;IAC3DsF,GAAG,CAAC7D,SAAS,GAAG6T,YAAY;EAChC,CAAC;EACD9Y,YAAY,CAACe,SAAS,CAAC8X,kBAAkB,GAAG,UAAUrF,aAAa,EAAE;IACjE,IAAIuF,gBAAgB,GAAG,IAAI,CAAC9Y,MAAM,CAAC+E,aAAa,CAAC,KAAK,EAAE;MAAEyO,SAAS,EAAE,cAAc;MAAEC,MAAM,EAAE;IAAkB,CAAC,CAAC;IACjH,OAAO,CAAClV,KAAK,CAACgV,aAAa,CAACwF,UAAU,CAAC,EAAE;MACrC,IAAIC,MAAM,GAAG,IAAI,CAAChZ,MAAM,CAAC+E,aAAa,CAAC,IAAI,CAAC;MAC5C,IAAIkU,iBAAiB,GAAG1F,aAAa,CAACwF,UAAU;MAChD,IAAIE,iBAAiB,CAACzB,QAAQ,KAAK,OAAO,EAAE;QACxC,IAAI0B,gBAAgB,GAAG,CAAC3a,KAAK,CAAC0a,iBAAiB,CAACvL,WAAW,CAAC;QAC5DoL,gBAAgB,CAAClO,WAAW,CAACqO,iBAAiB,CAAC;QAC/C,IAAIC,gBAAgB,EAAE;UAClBJ,gBAAgB,CAAClO,WAAW,CAACoO,MAAM,CAAC;QACxC;MACJ,CAAC,MACI;QACD,IAAIG,kBAAkB,GAAGF,iBAAiB,CAACzB,QAAQ,KAAK,IAAI;QAC5D,IAAI2B,kBAAkB,EAAE;UACpBL,gBAAgB,CAAClO,WAAW,CAACqO,iBAAiB,CAAC;QACnD,CAAC,MACI;UACDH,gBAAgB,CAAClO,WAAW,CAACqO,iBAAiB,CAACnL,UAAU,CAAC,CAAC,CAAC,CAAC;QACjE;QACA,IAAI,CAACvP,KAAK,CAAC0a,iBAAiB,CAAC,IAAI,CAAC1a,KAAK,CAAC0a,iBAAiB,CAACvL,WAAW,CAAC,EAAE;UACpEoL,gBAAgB,CAAClO,WAAW,CAACoO,MAAM,CAAC;QACxC;QACA,IAAI,CAACG,kBAAkB,IAAI,CAAC5a,KAAK,CAAC0a,iBAAiB,CAAC,EAAE;UAClDza,MAAM,CAACya,iBAAiB,CAAC;QAC7B;MACJ;IACJ;IACA,OAAOH,gBAAgB;EAC3B,CAAC;EACD/Y,YAAY,CAACe,SAAS,CAACmX,cAAc,GAAG,UAAU1E,aAAa,EAAE;IAC7D,KAAK,IAAInL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACjI,SAAS,CAAC+C,MAAM,EAAEkF,CAAC,EAAE,EAAE;MAC5C,IAAIgR,MAAM,GAAG7F,aAAa,CAAClN,gBAAgB,CAAC,IAAI,CAAClG,SAAS,CAACiI,CAAC,CAAC,CAAC;MAC9D,KAAK,IAAIkQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGc,MAAM,CAAClW,MAAM,EAAEoV,CAAC,EAAE,EAAE;QACpC,IAAIe,OAAO,GAAG,KAAK,CAAC;QACpB,KAAK,IAAIb,CAAC,GAAG,CAAC,EAAEc,CAAC,GAAG,CAAC,EAAEC,OAAO,GAAG,KAAK,CAAC,EAAEf,CAAC,GAAGY,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC5K,MAAM,EAAEsV,CAAC,EAAE,EAAEc,CAAC,EAAE,EAAE;UAChF,IAAIF,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAAChB,QAAQ,KAAK,KAAK,IAAI4B,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAAChB,QAAQ,KAAK,GAAG,IACrF4B,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAAChB,QAAQ,KAAK,OAAO,IACxC4B,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAACgB,SAAS,CAACjW,OAAO,CAAC,SAAS,EAAE,QAAQ,CAAC,KAAK,QAAS,IAC7E6V,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAAC5R,WAAW,CAACnB,IAAI,CAAC,CAAC,KAAK,EAAG,EAAE;YACxD4T,OAAO,GAAGD,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAACjB,aAAa;YAC/C6B,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAACjB,aAAa,CAACA,aAAa,CAACgB,YAAY,CAACa,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,EAAEY,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAACjB,aAAa,CAAC;YAChIiB,CAAC,EAAE;UACP,CAAC,MACI;YACDa,OAAO,GAAGD,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAACjB,aAAa;YAC/C,IAAIgC,OAAO,KAAK,MAAM,EAAE;cACpB,IAAIE,YAAY,GAAGJ,OAAO,CAACK,sBAAsB;cACjDD,YAAY,CAAC7O,WAAW,CAACwO,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAAC;YACrD,CAAC,MACI;cACD,IAAI1T,UAAU,GAAG,IAAI,CAAC9E,MAAM,CAAC+E,aAAa,CAAC,KAAK,EAAE;gBAAE+F,EAAE,EAAE;cAAS,CAAC,CAAC;cACnEhG,UAAU,CAAC8F,WAAW,CAACwO,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAAC;cAC/Ca,OAAO,CAAC9B,aAAa,CAACgB,YAAY,CAACzT,UAAU,EAAEuU,OAAO,CAAC;YAC3D;YACAb,CAAC,EAAE;YACHe,OAAO,GAAG,MAAM;UACpB;QACJ;QACA,IAAI,CAAChb,KAAK,CAAC8a,OAAO,CAAC,EAAE;UACjB7a,MAAM,CAAC6a,OAAO,CAAC;QACnB;MACJ;IACJ;IACA,IAAIM,QAAQ,GAAGpG,aAAa,CAAClN,gBAAgB,CAAC,GAAG,CAAC;IAClD,KAAK,IAAI+B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuR,QAAQ,CAACzW,MAAM,EAAEkF,CAAC,EAAE,EAAE;MACtC,IAAIwR,MAAM,GAAGD,QAAQ,CAACvR,CAAC,CAAC,CAACyR,UAAU;MACnC,KAAK,IAAIvB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsB,MAAM,CAAC1W,MAAM,EAAEoV,CAAC,EAAE,EAAE;QACpCqB,QAAQ,CAACvR,CAAC,CAAC,CAACuB,eAAe,CAACiQ,MAAM,CAACtB,CAAC,CAAC,CAAC1U,IAAI,CAAC;QAC3C0U,CAAC,EAAE;MACP;IACJ;EACJ,CAAC;EACDvY,YAAY,CAACe,SAAS,CAACkX,oBAAoB,GAAG,UAAUzE,aAAa,EAAE;IACnE,KAAK,IAAInL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAClI,UAAU,CAACgD,MAAM,EAAEkF,CAAC,EAAE,EAAE;MAC7C,IAAIgR,MAAM,GAAG7F,aAAa,CAAClN,gBAAgB,CAAC,IAAI,CAACnG,UAAU,CAACkI,CAAC,CAAC,CAAC;MAC/D,KAAK,IAAIkQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGc,MAAM,CAAClW,MAAM,EAAEoV,CAAC,EAAE,EAAE;QACpC,IAAI,EAAEc,MAAM,CAACd,CAAC,CAAC,KAAK/E,aAAa,CAACwF,UAAU,IAAIK,MAAM,CAACd,CAAC,CAAC,CAACd,QAAQ,KAAK,MAAM,CAAC,EAAE;UAC5E,IAAI6B,OAAO,GAAG,KAAK,CAAC;UACpB,KAAK,IAAIb,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGY,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC5K,MAAM,EAAEsV,CAAC,EAAE,EAAE;YAClDa,OAAO,GAAGD,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAACjB,aAAa;YAC/C6B,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAACjB,aAAa,CAACA,aAAa,CAACgB,YAAY,CAACa,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,EAAEY,MAAM,CAACd,CAAC,CAAC,CAACxK,UAAU,CAAC0K,CAAC,CAAC,CAACjB,aAAa,CAAC;YAChIiB,CAAC,EAAE;UACP;UACA,IAAI,CAACja,KAAK,CAAC8a,OAAO,CAAC,EAAE;YACjB7a,MAAM,CAAC6a,OAAO,CAAC;UACnB;QACJ;MACJ;IACJ;EACJ,CAAC;EACDtZ,YAAY,CAACe,SAAS,CAACgZ,mBAAmB,GAAG,UAAUvO,OAAO,EAAE;IAC5D,IAAIwO,gBAAgB;IACpB,IAAI,CAACxb,KAAK,CAACgN,OAAO,CAAC,IAAI,CAAChN,KAAK,CAACgN,OAAO,CAACgM,aAAa,CAAC,EAAE;MAClD,IAAIyC,OAAO,GAAGzO,OAAO,CAACgM,aAAa,CAAC3Q,WAAW,CAAC1D,MAAM,GAAG,CAAC,IAAIqI,OAAO,CAACgM,aAAa,CAAC3Q,WAAW,CAACiJ,KAAK,CAAC,SAAS,CAAC,IACzGtE,OAAO,CAACgM,aAAa,CAAC3Q,WAAW,CAACiJ,KAAK,CAAC,SAAS,CAAC,CAAC3M,MAAM,GAAG,CAAC;MACpE,IAAI,CAAC8W,OAAO,IAAIzO,OAAO,CAACgM,aAAa,CAAC3Q,WAAW,CAACnB,IAAI,CAAC,CAAC,KAAK,EAAE,IAC3D8F,OAAO,CAACgM,aAAa,CAACpQ,YAAY,CAAC,OAAO,CAAC,KAAK,cAAc,EAAE;QAChE4S,gBAAgB,GAAG,IAAI,CAACD,mBAAmB,CAACvO,OAAO,CAACgM,aAAa,CAAC;MACtE,CAAC,MACI;QACDwC,gBAAgB,GAAGxO,OAAO;MAC9B;IACJ,CAAC,MACI;MACDwO,gBAAgB,GAAG,IAAI;IAC3B;IACA,OAAOA,gBAAgB;EAC3B,CAAC;EACDha,YAAY,CAACe,SAAS,CAAC4X,mBAAmB,GAAG,UAAUnN,OAAO,EAAE;IAC5D,IAAI0O,aAAa,GAAG1O,OAAO,CAAClF,gBAAgB,CAAC,QAAQ,CAAC;IACtD,KAAK,IAAI+B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6R,aAAa,CAAC/W,MAAM,EAAEkF,CAAC,EAAE,EAAE;MAC3C,IAAI6R,aAAa,CAAC7R,CAAC,CAAC,CAAC+P,OAAO,KAAK,IAAI,EAAE;QACnC,IAAI+B,iBAAiB,GAAG,IAAI,CAACJ,mBAAmB,CAACG,aAAa,CAAC7R,CAAC,CAAC,CAAC;QAClE,IAAI,CAAC7J,KAAK,CAAC2b,iBAAiB,CAAC,EAAE;UAC3B1b,MAAM,CAAC0b,iBAAiB,CAAC;QAC7B;MACJ;IACJ;EACJ,CAAC;EACD;EACAna,YAAY,CAACe,SAAS,CAACqZ,WAAW,GAAG,UAAUzG,UAAU,EAAE;IACvD,IAAI0G,YAAY,GAAG1G,UAAU,CAAC2G,KAAK,CAAC,CAAC;IACrC,IAAIC,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACjb,wBAAwB,CAAC;IAChD,IAAImb,MAAM,GAAGF,IAAI,CAACG,GAAG,CAAC,UAAUC,GAAG,EAAE;MACjC,OAAOrb,wBAAwB,CAAC,EAAE,GAAGqb,GAAG,CAAC;IAC7C,CAAC,CAAC;IACF,IAAIC,OAAO,GAAG,EAAE;IAChB,KAAK,IAAIvS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgS,YAAY,CAAClX,MAAM,EAAEkF,CAAC,EAAE,EAAE;MAC1C;MACA,IAAIgS,YAAY,CAAChS,CAAC,CAAC,CAACf,KAAK,CAAC,GAAG,CAAC,CAACnE,MAAM,GAAG,CAAC,EAAE;QACvCkX,YAAY,CAAChS,CAAC,CAAC,GAAGgS,YAAY,CAAChS,CAAC,CAAC,CAACf,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC5B,IAAI,CAAC,CAAC;MAC1D;MACA,IAAI6U,IAAI,CAAClT,OAAO,CAACgT,YAAY,CAAChS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;QACpC,KAAK,IAAIkQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkC,MAAM,CAACF,IAAI,CAAClT,OAAO,CAACgT,YAAY,CAAChS,CAAC,CAAC,CAAC,CAAC,CAAClF,MAAM,EAAEoV,CAAC,EAAE,EAAE;UACnE,IAAI8B,YAAY,CAAChT,OAAO,CAACoT,MAAM,CAACF,IAAI,CAAClT,OAAO,CAACgT,YAAY,CAAChS,CAAC,CAAC,CAAC,CAAC,CAACkQ,CAAC,CAAC,CAAC,GAAG,CAAC,IAClEqC,OAAO,CAACvT,OAAO,CAACoT,MAAM,CAACF,IAAI,CAAClT,OAAO,CAACgT,YAAY,CAAChS,CAAC,CAAC,CAAC,CAAC,CAACkQ,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;YAC/DqC,OAAO,CAACxR,IAAI,CAACqR,MAAM,CAACF,IAAI,CAAClT,OAAO,CAACgT,YAAY,CAAChS,CAAC,CAAC,CAAC,CAAC,CAACkQ,CAAC,CAAC,CAAC;UAC1D;QACJ;MACJ;IACJ;IACA,OAAO5E,UAAU,GAAGA,UAAU,CAACkH,MAAM,CAACD,OAAO,CAAC;EAClD,CAAC;EACD;EACA5a,YAAY,CAACe,SAAS,CAAC+Z,gBAAgB,GAAG,UAAUnH,UAAU,EAAE;IAC5D,KAAK,IAAItL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsL,UAAU,CAACxQ,MAAM,EAAEkF,CAAC,EAAE,EAAE;MACxC,IAAIsL,UAAU,CAACtL,CAAC,CAAC,CAACf,KAAK,CAAC,GAAG,CAAC,CAACnE,MAAM,GAAG,CAAC,EAAE;QACrC,IAAI4X,cAAc,GAAGpH,UAAU,CAACtL,CAAC,CAAC,CAACf,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC;QACzE,IAAI0T,qBAAqB,GAAG,EAAE;QAC9B,IAAIC,oBAAoB,GAAG,EAAE;QAC7B,KAAK,IAAI1C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwC,cAAc,CAAC5X,MAAM,EAAEoV,CAAC,EAAE,EAAE;UAC5C,IAAIwC,cAAc,CAACxC,CAAC,CAAC,CAAClR,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;YACpC2T,qBAAqB,CAAC5R,IAAI,CAAC2R,cAAc,CAACxC,CAAC,CAAC,CAAC7S,IAAI,CAAC,CAAC,CAAC;UACxD,CAAC,MACI;YACDuV,oBAAoB,CAAC7R,IAAI,CAAC2R,cAAc,CAACxC,CAAC,CAAC,CAACjR,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC5B,IAAI,CAAC,CAAC,CAAC;UACrE;QACJ;QACA,IAAIwV,gBAAgB,GAAGF,qBAAqB,CAAC7X,MAAM,GAAG,CAAC,GAClD6X,qBAAqB,CAAC/G,IAAI,CAAC,IAAI,CAAC,GAAK+G,qBAAqB,CAAC/G,IAAI,CAAC,CAAE;QACvE,IAAIkH,eAAe,GAAGF,oBAAoB,CAAC9X,MAAM,GAAG,CAAC,GACjD8X,oBAAoB,CAAChH,IAAI,CAAC,IAAI,CAAC,GAAIgH,oBAAoB,CAAChH,IAAI,CAAC,CAAE;QACnE,IAAIkH,eAAe,CAAChY,MAAM,GAAG,CAAC,EAAE;UAC5B,IAAIiY,MAAM,GAAGF,gBAAgB,KAAK,EAAE,GAAGvH,UAAU,CAACtL,CAAC,CAAC,CAACf,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAC9D,GAAG,GAAG4T,gBAAgB,GAAG,GAAG,GAAGvH,UAAU,CAACtL,CAAC,CAAC,CAACf,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;UAC9DqM,UAAU,CAACtL,CAAC,CAAC,GAAG+S,MAAM,GAAG,QAAQ,GAAGD,eAAe,GAAG,IAAI;QAC9D,CAAC,MACI;UACDxH,UAAU,CAACtL,CAAC,CAAC,GAAGsL,UAAU,CAACtL,CAAC,CAAC,CAACf,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG4T,gBAAgB,GAAG,GAAG;QAC9E;MACJ;IACJ;IACA,OAAOvH,UAAU;EACrB,CAAC;EACD;EACA3T,YAAY,CAACe,SAAS,CAAC4S,UAAU,GAAG,UAAUH,aAAa,EAAE;IACzD,IAAIG,UAAU,GAAGpV,iBAAiB,CAAC,IAAI,CAAC0B,MAAM,CAACqF,oBAAoB,CAACqO,UAAU,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC1T,MAAM,CAACqF,oBAAoB,CAACqO,UAAU,CAAC2G,KAAK,CAAC,CAAC;IAC1I3G,UAAU,GAAG,IAAI,CAACmH,gBAAgB,CAACnH,UAAU,CAAC;IAC9CA,UAAU,GAAG,IAAI,CAACyG,WAAW,CAACzG,UAAU,CAAC;IACzC,KAAK,IAAItL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsL,UAAU,CAACxQ,MAAM,EAAEkF,CAAC,EAAE,EAAE;MACxC,IAAI2R,gBAAgB,GAAGxG,aAAa,CAAClN,gBAAgB,CAACqN,UAAU,CAACtL,CAAC,CAAC,CAAC;MACpE,KAAK,IAAIkQ,CAAC,GAAGyB,gBAAgB,CAAC7W,MAAM,GAAG,CAAC,EAAEoV,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QACnD,IAAI8C,UAAU,GAAGrB,gBAAgB,CAACzB,CAAC,CAAC,CAAC+C,UAAU;QAC/C,OAAOtB,gBAAgB,CAACzB,CAAC,CAAC,CAACS,UAAU,EAAE;UACnCqC,UAAU,CAAC7C,YAAY,CAACwB,gBAAgB,CAACzB,CAAC,CAAC,CAACS,UAAU,EAAEgB,gBAAgB,CAACzB,CAAC,CAAC,CAAC;QAChF;QACA8C,UAAU,CAACE,WAAW,CAACvB,gBAAgB,CAACzB,CAAC,CAAC,CAAC;MAC/C;IACJ;IACA,OAAO/E,aAAa;EACxB,CAAC;EACD;EACAxT,YAAY,CAACe,SAAS,CAAC6S,gBAAgB,GAAG,UAAUJ,aAAa,EAAED,KAAK,EAAE;IACtE,IAAIM,WAAW,GAAGtV,iBAAiB,CAAC,IAAI,CAAC0B,MAAM,CAACqF,oBAAoB,CAACuO,WAAW,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC5T,MAAM,CAACqF,oBAAoB,CAACuO,WAAW,CAACyG,KAAK,CAAC,CAAC;IAC7I,IAAI/G,KAAK,EAAE;MACPM,WAAW,CAACzK,IAAI,CAAC,OAAO,CAAC;IAC7B;IACA,KAAK,IAAIf,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwL,WAAW,CAAC1Q,MAAM,EAAEkF,CAAC,EAAE,EAAE;MACzC,IAAImT,oBAAoB,GAAGhI,aAAa,CACpClN,gBAAgB,CAAC,GAAG,GAAGuN,WAAW,CAACxL,CAAC,CAAC,GAAG,GAAG,CAAC;MAChD,KAAK,IAAIkQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiD,oBAAoB,CAACrY,MAAM,EAAEoV,CAAC,EAAE,EAAE;QAClDiD,oBAAoB,CAACjD,CAAC,CAAC,CAAC3O,eAAe,CAACiK,WAAW,CAACxL,CAAC,CAAC,CAAC;MAC3D;IACJ;IACA,OAAOmL,aAAa;EACxB,CAAC;EACD;EACAxT,YAAY,CAACe,SAAS,CAAC+S,YAAY,GAAG,UAAUN,aAAa,EAAE;IAC3D,IAAIjO,iBAAiB,GAAGhH,iBAAiB,CAAC,IAAI,CAAC0B,MAAM,CAACqF,oBAAoB,CAACC,iBAAiB,CAAC,GAAG,EAAE,GAAG,IAAI,CAACtF,MAAM,CAACqF,oBAAoB,CAACC,iBAAiB,CAAC+U,KAAK,CAAC,CAAC;IAC/J/U,iBAAiB,CAAC6D,IAAI,CAAC,iBAAiB,EAAE,YAAY,CAAC;IACvD,IAAIqS,YAAY,GAAGjI,aAAa,CAAClN,gBAAgB,CAAC,SAAS,CAAC;IAC5D,KAAK,IAAI+B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoT,YAAY,CAACtY,MAAM,EAAEkF,CAAC,EAAE,EAAE;MAC1C,IAAIqT,iBAAiB,GAAG,EAAE;MAC1B,IAAIC,sBAAsB,GAAG,EAAE;MAC/B,IAAIC,UAAU,GAAGH,YAAY,CAACpT,CAAC,CAAC,CAACjB,YAAY,CAAC,OAAO,CAAC,CAACE,KAAK,CAAC,GAAG,CAAC;MACjE,KAAK,IAAImR,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmD,UAAU,CAACzY,MAAM,EAAEsV,CAAC,EAAE,EAAE;QACxC,IAAIlT,iBAAiB,CAAC8B,OAAO,CAACuU,UAAU,CAACnD,CAAC,CAAC,CAACnR,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC5B,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;UACpEiW,sBAAsB,CAACvS,IAAI,CAACwS,UAAU,CAACnD,CAAC,CAAC,CAAC;QAC9C;MACJ;MACAgD,YAAY,CAACpT,CAAC,CAAC,CAACuB,eAAe,CAAC,OAAO,CAAC;MACxC8R,iBAAiB,GAAGC,sBAAsB,CAAC1H,IAAI,CAAC,GAAG,CAAC,CAACvO,IAAI,CAAC,CAAC,KAAK,EAAE,GAC9DiW,sBAAsB,CAAC1H,IAAI,CAAC,GAAG,CAAC,GAAG0H,sBAAsB,CAAC1H,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG;MAC7E,IAAIyH,iBAAiB,EAAE;QACnBD,YAAY,CAACpT,CAAC,CAAC,CAAC7B,YAAY,CAAC,OAAO,EAAEkV,iBAAiB,CAAC;MAC5D;IACJ;IACA,OAAOlI,aAAa;EACxB,CAAC;EACDxT,YAAY,CAACe,SAAS,CAACsT,qBAAqB,GAAG,UAAUb,aAAa,EAAE;IACpE,IAAIqI,YAAY,GAAGrI,aAAa,CAAClN,gBAAgB,CAAC,SAAS,CAAC;IAC5D,KAAK,IAAI+B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwT,YAAY,CAAC1Y,MAAM,EAAEkF,CAAC,EAAE,EAAE;MAC1C,IAAImC,OAAO,GAAGqR,YAAY,CAACxT,CAAC,CAAC,CAACvB,aAAa,CAAC,KAAK,CAAC;MAClD,IAAIgV,WAAW,GAAGD,YAAY,CAACxT,CAAC,CAAC,CAAC/B,gBAAgB,CAAC,QAAQ,CAAC;MAC5D,IAAIkE,OAAO,IAAIA,OAAO,CAACpD,YAAY,CAAC,KAAK,CAAC,EAAE;QACxC,IAAI2U,QAAQ,GAAGvR,OAAO,CAACpD,YAAY,CAAC,KAAK,CAAC;QAC1C,IAAI6H,GAAG,GAAG,IAAInF,GAAG,CAACiS,QAAQ,CAAC;QAC3B,KAAK,IAAIxD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuD,WAAW,CAAC3Y,MAAM,EAAEoV,CAAC,EAAE,EAAE;UACzC,IAAIyD,MAAM,GAAGF,WAAW,CAACvD,CAAC,CAAC,CAACnR,YAAY,CAAC,QAAQ,CAAC;UAClD,IAAI4U,MAAM,EAAE;YACR,IAAIA,MAAM,CAAC3U,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;cAC/B,IAAI4U,QAAQ,GAAGhN,GAAG,CAACiN,MAAM,GAAGF,MAAM;cAClCF,WAAW,CAACvD,CAAC,CAAC,CAAC/R,YAAY,CAAC,QAAQ,EAAEyV,QAAQ,CAAC;YACnD;UACJ;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIjc,YAAY,CAACe,SAAS,CAACob,aAAa,GAAG,YAAY;IAC/C,OAAO,cAAc;EACzB,CAAC;EACD,OAAOnc,YAAY;AACvB,CAAC,CAAC,CAAE;AACJ,SAASA,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}