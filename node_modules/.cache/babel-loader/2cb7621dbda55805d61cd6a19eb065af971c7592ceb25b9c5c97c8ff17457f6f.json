{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses, setChecked, resetDialogAppend, Global, appendChildren, getListHeight, infiniteRemoveElements, infiniteAppendElements } from '../base/util';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\nimport * as literals from '../base/string-literals';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */function () {\n  /**\n   * Constructor for the Grid ColumnChooser module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n   * @hidden\n   */\n  function ColumnChooser(parent, serviceLocator) {\n    this.filterColumns = [];\n    this.showColumn = [];\n    this.hideColumn = [];\n    this.changedColumns = [];\n    this.unchangedColumns = [];\n    this.infiniteLoadedElement = [];\n    this.isDlgOpen = false;\n    this.isColumnChooserOpen = false;\n    this.initialOpenDlg = true;\n    this.stateChangeColumns = [];\n    this.changedStateColumns = [];\n    this.isInitialOpen = false;\n    this.isCustomizeOpenCC = false;\n    this.searchOperator = 'startswith';\n    this.itemsCount = 50;\n    this.infiniteSkipCount = 0;\n    this.infiniteColumns = [];\n    this.infiniteInitialLoad = false;\n    this.prevInfiniteScrollDirection = '';\n    this.prevShowedCols = [];\n    this.hideDialogFunction = this.hideDialog.bind(this);\n    this.infiniteRenderMode = false;\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n    this.infiniteRenderMode = this.parent.enableColumnVirtualization ? true : false;\n    this.addEventListener();\n    this.cBoxTrue = createCheckBox(this.parent.createElement, false, {\n      checked: true,\n      label: ' '\n    });\n    this.cBoxFalse = createCheckBox(this.parent.createElement, false, {\n      checked: false,\n      label: ' '\n    });\n    this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden e-cc e-cc-chbox',\n      attrs: {\n        type: 'checkbox'\n      }\n    }), this.cBoxTrue.firstChild);\n    this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden e-cc e-cc-chbox',\n      attrs: {\n        'type': 'checkbox'\n      }\n    }), this.cBoxFalse.firstChild);\n    this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n    if (this.parent.enableRtl) {\n      addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n    }\n    if (this.parent.cssClass) {\n      if (this.parent.cssClass.indexOf(' ') !== -1) {\n        addClass([this.cBoxTrue, this.cBoxFalse], this.parent.cssClass.split(' '));\n      } else {\n        addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n      }\n    }\n    if (this.parent.enableAdaptiveUI) {\n      this.setFullScreenDialog();\n    }\n  }\n  ColumnChooser.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n    if (!gridElement.querySelector('.' + literals.gridContent) && !gridElement.querySelector('.' + literals.gridHeader) || !gridElement) {\n      return;\n    }\n    this.removeEventListener();\n    this.unWireEvents();\n    this.infiniteLoadedElement = null;\n    this.infiniteDiv = null;\n    if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n      this.dlgObj.destroy();\n    }\n  };\n  ColumnChooser.prototype.setFullScreenDialog = function () {\n    if (this.serviceLocator) {\n      this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isColumnChooser);\n    }\n    if (this.parent.enableAdaptiveUI) {\n      this.parent.on(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv, this);\n      this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n    }\n  };\n  ColumnChooser.prototype.rtlUpdate = function () {\n    if (!isNullOrUndefined(this.innerDiv)) {\n      if (this.parent.enableRtl) {\n        addClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n      } else {\n        removeClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n      }\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  ColumnChooser.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    EventHandler.add(document, 'click', this.clickHandler, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n    this.parent.on(events.initialEnd, this.render, this);\n    this.parent.addEventListener(events.dataBound, this.hideDialogFunction);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n    this.parent.on(events.resetColumns, this.onResetColumns, this);\n    this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n    if (this.parent.enableAdaptiveUI) {\n      this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n    }\n    if (this.infiniteRenderMode || this.parent.enableAdaptiveUI) {\n      this.parent.on(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv, this);\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  ColumnChooser.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    EventHandler.remove(document, 'click', this.clickHandler);\n    this.parent.off(events.initialEnd, this.render);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n    this.parent.off(events.rtlUpdated, this.rtlUpdate);\n    this.parent.off(events.resetColumns, this.onResetColumns);\n    this.parent.removeEventListener(events.dataBound, this.hideDialogFunction);\n    this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n    if (this.infiniteDiv) {\n      EventHandler.remove(this.infiniteDiv, 'scroll', this.infiniteScrollHandler);\n      EventHandler.remove(this.infiniteDiv, 'mouseup', this.infiniteScrollMouseKeyUpHandler);\n      EventHandler.remove(this.infiniteDiv, 'mousedown', this.infiniteScrollMouseKeyDownHandler);\n    }\n    if (this.parent.enableAdaptiveUI) {\n      this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n      this.parent.off(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction);\n    }\n    if (this.infiniteRenderMode || this.parent.enableAdaptiveUI) {\n      this.parent.off(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv);\n    }\n  };\n  ColumnChooser.prototype.render = function () {\n    this.l10n = this.serviceLocator.getService('localization');\n    if (!this.parent.enableAdaptiveUI) {\n      this.renderDlgContent();\n    }\n    this.getShowHideService = this.serviceLocator.getService('showHideService');\n  };\n  ColumnChooser.prototype.clickHandler = function (e) {\n    var targetElement = e.target;\n    if (!this.isCustomizeOpenCC) {\n      if (!isNullOrUndefined(closest(targetElement, '.e-cc-toolbar')) || !isNullOrUndefined(closest(targetElement, '.e-cc'))) {\n        if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n          if (this.initialOpenDlg && this.dlgObj.visible || !this.isDlgOpen) {\n            this.isDlgOpen = true;\n            return;\n          }\n        } else if (targetElement.classList.contains('e-cc-cancel')) {\n          targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n          this.columnChooserSearch('');\n          this.removeCancelIcon();\n          this.refreshCheckboxButton();\n        }\n      } else {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n          this.dlgObj.hide();\n          this.clearActions();\n          this.refreshCheckboxState();\n          // this.unWireEvents();\n          this.isDlgOpen = false;\n        }\n      }\n      if (this.parent.detailTemplate || this.parent.childGrid) {\n        this.targetdlg = e.target;\n      }\n    }\n    if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n      this.refreshCheckboxState();\n    }\n    if (!this.parent.enableAdaptiveUI) {\n      this.rtlUpdate();\n    } else {\n      if (this.parent.enableRtl) {\n        addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n      }\n    }\n  };\n  ColumnChooser.prototype.hideDialog = function () {\n    if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n      this.dlgObj.hide();\n      // this.unWireEvents();\n      this.isDlgOpen = false;\n    }\n  };\n  /**\n   * To render columnChooser when showColumnChooser enabled.\n   *\n   * @param {number} x - specifies the position x\n   * @param {number} y - specifies the position y\n   * @param {Element} target - specifies the target\n   * @returns {void}\n   * @hidden\n   */\n  ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n    if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n      this.hideOpenedDialog();\n    }\n    if (!this.dlgObj.visible) {\n      var args = this.beforeOpenColumnChooserEvent();\n      if (args.cancel) {\n        return;\n      }\n      if (target) {\n        this.targetdlg = target;\n      }\n      if (this.infiniteRenderMode) {\n        this.dlgObj.show();\n      }\n      this.refreshCheckboxState();\n      this.dlgObj.dataBind();\n      this.dlgObj.element.style.maxHeight = '430px';\n      var elementVisible = this.dlgObj.element.style.display;\n      this.dlgObj.element.style.display = 'block';\n      var isSticky = this.parent.getHeaderContent().classList.contains('e-sticky');\n      var toolbarItem = closest(target, '.e-toolbar-item');\n      var newpos = void 0;\n      if (document.getElementById(this.parent.element.id + '_e-popup') && document.getElementById(this.parent.element.id + '_e-popup').querySelector('.e-ccdlg')) {\n        this.parent.element.appendChild(this.dlgObj.element);\n      }\n      if (isSticky) {\n        newpos = toolbarItem.getBoundingClientRect();\n        this.dlgObj.element.classList.add('e-sticky');\n      } else {\n        this.dlgObj.element.classList.remove('e-sticky');\n        newpos = calculateRelativeBasedPosition(toolbarItem, this.dlgObj.element);\n      }\n      this.dlgObj.element.style.display = elementVisible;\n      this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n      var dlgWidth = 250;\n      if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n        this.dlgObj.width = 258;\n      }\n      if (Browser.isDevice) {\n        this.dlgObj.position = {\n          X: 'center',\n          Y: 'center'\n        };\n        this.dlgObj.refreshPosition();\n        this.dlgObj.open = this.mOpenDlg.bind(this);\n      } else {\n        if (this.parent.enableRtl) {\n          this.dlgObj.element.style.left = target.offsetLeft + 'px';\n        } else {\n          this.dlgObj.element.style.left = newpos.left - dlgWidth + closest(target, '.e-cc-toolbar').clientWidth + 2 + 'px';\n        }\n      }\n      this.removeCancelIcon();\n      if (!this.infiniteRenderMode) {\n        this.dlgObj.show();\n      }\n      if (this.parent.getContent().firstElementChild.offsetHeight < this.dlgObj.element.offsetHeight && !this.parent.element.classList.contains('e-drillthrough-grid')) {\n        resetDialogAppend(this.parent, this.dlgObj);\n        this.dlgObj.element.querySelector('.e-ccsearch').select();\n      }\n      this.parent.notify(events.columnChooserOpened, {\n        dialog: this.dlgObj\n      });\n    } else {\n      // this.unWireEvents();\n      this.hideDialog();\n      this.addcancelIcon();\n      this.clearActions();\n      this.refreshCheckboxState();\n    }\n    this.rtlUpdate();\n  };\n  /**\n   * Column chooser can be displayed on screen by given position(X and Y axis).\n   *\n   * @param  {number} X - Defines the X axis.\n   * @param  {number} Y - Defines the Y axis.\n   * @return {void}\n   */\n  ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n    this.isCustomizeOpenCC = true;\n    if (this.parent.enableAdaptiveUI) {\n      if (!this.isColumnChooserOpen) {\n        this.parent.showResponsiveCustomColumnChooser();\n      }\n      this.isColumnChooserOpen = false;\n      this.renderDlgContent();\n    }\n    if (this.dlgObj.visible) {\n      this.hideDialog();\n      return;\n    }\n    var args = this.beforeOpenColumnChooserEvent();\n    if (args.cancel) {\n      return;\n    }\n    if (this.infiniteRenderMode) {\n      this.dlgObj.show();\n    }\n    if (!this.isInitialOpen) {\n      this.dlgObj.content = this.renderChooserList();\n      this.updateIntermediateBtn();\n    } else {\n      this.refreshCheckboxState();\n    }\n    this.dlgObj.dataBind();\n    if (this.infiniteRenderMode) {\n      this.refreshCheckboxState();\n    }\n    this.dlgObj.position = {\n      X: 'center',\n      Y: 'center'\n    };\n    if (isNullOrUndefined(X)) {\n      if (this.parent.enableAdaptiveUI) {\n        this.dlgObj.position = {\n          X: '',\n          Y: ''\n        };\n      }\n      this.dlgObj.refreshPosition();\n    } else {\n      this.dlgObj.element.style.top = '';\n      this.dlgObj.element.style.left = '';\n      this.dlgObj.element.style.top = Y + 'px';\n      this.dlgObj.element.style.left = X + 'px';\n    }\n    this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n    if (!this.infiniteRenderMode) {\n      this.dlgObj.show();\n    }\n    if (this.parent.getContent().firstElementChild.offsetHeight < this.dlgObj.element.offsetHeight && !this.parent.element.classList.contains('e-drillthrough-grid')) {\n      resetDialogAppend(this.parent, this.dlgObj);\n    }\n    this.isInitialOpen = true;\n    this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n  };\n  ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      this.render();\n    }\n  };\n  ColumnChooser.prototype.keyUpHandler = function (e) {\n    if (e.key === 'Escape') {\n      this.resetColumnState();\n    }\n    this.setFocus(parentsUntil(e.target, 'e-cclist'));\n  };\n  ColumnChooser.prototype.setFocus = function (elem) {\n    var prevElem = this.dlgDiv.querySelector('.e-colfocus');\n    if (prevElem) {\n      prevElem.classList.remove('e-colfocus');\n    }\n    if (elem) {\n      elem.classList.add('e-colfocus');\n    }\n  };\n  ColumnChooser.prototype.customDialogOpen = function () {\n    var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n    EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n  };\n  ColumnChooser.prototype.customDialogClose = function () {\n    var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n    EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n  };\n  ColumnChooser.prototype.getColumns = function () {\n    var columns = (this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns()).filter(function (column) {\n      return column.type !== 'checkbox' && column.showInColumnChooser === true || column.type === 'checkbox' && column.field !== undefined;\n    });\n    return columns;\n  };\n  ColumnChooser.prototype.renderDlgContent = function () {\n    var isAdaptive = this.parent.enableAdaptiveUI;\n    this.dlgDiv = this.parent.createElement('div', {\n      className: 'e-ccdlg e-cc',\n      id: this.parent.element.id + '_ccdlg'\n    });\n    if (!isAdaptive) {\n      this.parent.element.appendChild(this.dlgDiv);\n    }\n    this.dlgObj = new Dialog({\n      header: this.parent.enableAdaptiveUI ? null : this.l10n.getConstant('ChooseColumns'),\n      showCloseIcon: false,\n      closeOnEscape: false,\n      locale: this.parent.locale,\n      visible: false,\n      enableRtl: this.parent.enableRtl,\n      target: document.getElementById(this.parent.element.id),\n      content: this.renderChooserList(),\n      width: 250,\n      cssClass: this.parent.cssClass ? 'e-cc' + ' ' + this.parent.cssClass : 'e-cc',\n      animationSettings: {\n        effect: 'None'\n      }\n    });\n    if (!isAdaptive) {\n      this.dlgObj.buttons = [{\n        click: this.confirmDlgBtnClick.bind(this),\n        buttonModel: {\n          content: this.l10n.getConstant('OKButton'),\n          isPrimary: true,\n          cssClass: this.parent.cssClass ? 'e-cc e-cc_okbtn' + ' ' + this.parent.cssClass : 'e-cc e-cc_okbtn'\n        }\n      }, {\n        click: this.clearBtnClick.bind(this),\n        buttonModel: {\n          cssClass: this.parent.cssClass ? 'e-flat e-cc e-cc-cnbtn' + ' ' + this.parent.cssClass : 'e-flat e-cc e-cc-cnbtn',\n          content: this.l10n.getConstant('CancelButton')\n        }\n      }];\n    }\n    var isStringTemplate = 'isStringTemplate';\n    this.dlgObj[\"\" + isStringTemplate] = true;\n    this.dlgObj.appendTo(this.dlgDiv);\n    if (isAdaptive) {\n      var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n      if (responsiveCnt) {\n        responsiveCnt.appendChild(this.dlgDiv);\n      }\n      this.dlgObj.open = this.mOpenDlg.bind(this);\n      this.dlgObj.target = document.querySelector('.e-rescolumnchooser > .e-dlg-content > .e-mainfilterdiv');\n    }\n    this.wireEvents();\n  };\n  ColumnChooser.prototype.renderChooserList = function () {\n    this.mainDiv = this.parent.createElement('div', {\n      className: 'e-main-div e-cc'\n    });\n    var searchDiv = this.parent.createElement('div', {\n      className: 'e-cc-searchdiv e-cc e-input-group'\n    });\n    var ccsearchele = this.parent.createElement('input', {\n      className: 'e-ccsearch e-cc e-input',\n      attrs: {\n        placeholder: this.l10n.getConstant('Search'),\n        cssClass: this.parent.cssClass\n      }\n    });\n    var ccsearchicon = this.parent.createElement('span', {\n      className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n      attrs: {\n        title: this.l10n.getConstant('Search')\n      }\n    });\n    var conDiv = this.parent.createElement('div', {\n      className: 'e-cc-contentdiv'\n    });\n    this.innerDiv = this.parent.createElement('div', {\n      className: 'e-innerdiv e-cc'\n    });\n    searchDiv.appendChild(ccsearchele);\n    searchDiv.appendChild(ccsearchicon);\n    this.searchBoxObj = new SearchBox(ccsearchele, this.serviceLocator);\n    var columns = this.getColumns();\n    if (this.infiniteRenderMode && !this.isInitialOpen) {\n      columns = this.parent.columns;\n      for (var i = 0; i < columns.length; i++) {\n        if (columns[parseInt(i.toString(), 10)].showInColumnChooser) {\n          this.infiniteColumns.push(columns[parseInt(i.toString(), 10)]);\n        }\n      }\n    }\n    var innerDivContent = this.refreshCheckboxList(columns);\n    this.innerDiv.appendChild(innerDivContent);\n    conDiv.appendChild(this.innerDiv);\n    if (this.parent.enableAdaptiveUI) {\n      var searchBoxDiv = this.parent.createElement('div', {\n        className: 'e-cc-searchBox'\n      });\n      searchBoxDiv.appendChild(searchDiv);\n      this.mainDiv.appendChild(searchBoxDiv);\n    } else {\n      this.mainDiv.appendChild(searchDiv);\n    }\n    this.mainDiv.appendChild(conDiv);\n    return this.mainDiv;\n  };\n  ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n    var _this = this;\n    this.stateChangeColumns = [];\n    this.changedStateColumns = [];\n    var columns = this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns();\n    var isCheckALL = (this.infiniteRenderMode ? this.mainDiv : this.ulElement).querySelector('.e-selectall.e-check');\n    if (this.searchValue && this.filterColumns.length && isCheckALL) {\n      this.changedColumns = this.filterColumns.map(function (column) {\n        return column.uid;\n      });\n      this.showColumn = [];\n      this.hideColumn = [];\n      columns.map(function (column) {\n        if (_this.changedColumns.indexOf(column.uid) !== -1) {\n          _this.showColumn.push(column.uid);\n        } else if (column.showInColumnChooser) {\n          _this.hideColumn.push(column.uid);\n        }\n      });\n    } else {\n      this.changedColumns = this.changedColumns.length > 0 ? this.changedColumns : this.unchangedColumns;\n    }\n    this.changedColumnState(this.changedColumns);\n    var uncheckedLength = this.infiniteRenderMode ? this.infiniteLoadedElement.filter(function (arr) {\n      return arr.querySelector('.e-uncheck');\n    }).length : this.ulElement.querySelector('.e-uncheck') && this.ulElement.querySelectorAll('.e-uncheck:not(.e-selectall)').length;\n    if (!isNullOrUndefined(args)) {\n      if (uncheckedLength < columns.length) {\n        if (this.hideColumn.length) {\n          this.columnStateChange(this.hideColumn, false);\n        }\n        if (this.showColumn.length) {\n          this.columnStateChange(this.showColumn, true);\n        }\n        this.getShowHideService.setVisible(this.stateChangeColumns, this.changedStateColumns);\n        this.clearActions();\n        this.parent.notify(events.tooltipDestroy, {\n          module: 'edit'\n        });\n        if (this.parent.getCurrentViewRecords().length === 0) {\n          var emptyRowCell = this.parent.element.querySelector('.e-emptyrow').querySelector('td');\n          emptyRowCell.setAttribute('colSpan', this.parent.getVisibleColumns().length.toString());\n        }\n      }\n      if (this.parent.enableAdaptiveUI && this.parent.scrollModule) {\n        this.parent.scrollModule.refresh();\n      }\n      if (this.parent.editSettings.showAddNewRow) {\n        this.parent.notify(events.showAddNewRowFocus, {});\n      }\n    }\n  };\n  ColumnChooser.prototype.onResetColumns = function (e) {\n    if (e.requestType === 'columnstate') {\n      this.resetColumnState();\n      return;\n    }\n  };\n  ColumnChooser.prototype.renderResponsiveColumnChooserDiv = function (args) {\n    if (args.action === 'open') {\n      this.isColumnChooserOpen = true;\n      this.openColumnChooser();\n    } else if (args.action === 'clear') {\n      this.clearBtnClick();\n    } else if (args.action === 'confirm') {\n      this.confirmDlgBtnClick(true);\n    }\n  };\n  ColumnChooser.prototype.resetColumnState = function () {\n    this.showColumn = [];\n    this.hideColumn = [];\n    this.changedColumns = [];\n    this.filterColumns = [];\n    this.searchValue = '';\n    if (this.infiniteRenderMode) {\n      var focusListElement = this.dlgDiv.querySelector('.e-cclist.e-cc-selectall.e-colfocus');\n      if (focusListElement) {\n        focusListElement.classList.remove('e-colfocus');\n      }\n    }\n    this.hideDialog();\n  };\n  ColumnChooser.prototype.changedColumnState = function (changedColumns) {\n    for (var index = 0; index < changedColumns.length; index++) {\n      var colUid = changedColumns[parseInt(index.toString(), 10)];\n      var currentColumn = this.parent.getColumnByUid(colUid, this.infiniteRenderMode);\n      this.changedStateColumns.push(currentColumn);\n    }\n  };\n  ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n    for (var index = 0; index < stateColumns.length; index++) {\n      var colUid = stateColumns[parseInt(index.toString(), 10)];\n      var currentColumn = this.parent.getColumnByUid(colUid, this.infiniteRenderMode);\n      if (currentColumn.type !== 'checkbox') {\n        currentColumn.visible = state;\n      }\n      this.stateChangeColumns.push(currentColumn);\n    }\n  };\n  ColumnChooser.prototype.clearActions = function () {\n    this.resetColumnState();\n    this.addcancelIcon();\n  };\n  ColumnChooser.prototype.clearBtnClick = function () {\n    this.clearActions();\n    this.parent.notify(events.columnChooserCancelBtnClick, {\n      dialog: this.dlgObj\n    });\n  };\n  ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid, selectAll) {\n    if (selectAll === void 0) {\n      selectAll = false;\n    }\n    var currentColumn = this.parent.getColumnByUid(coluid, this.infiniteRenderMode);\n    if (isChecked) {\n      if (this.hideColumn.indexOf(coluid) !== -1) {\n        this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n      }\n      if (this.showColumn.indexOf(coluid) === -1 && !(currentColumn && currentColumn.visible)) {\n        this.showColumn.push(coluid);\n      }\n    } else {\n      if (this.showColumn.indexOf(coluid) !== -1) {\n        this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n      }\n      if (this.hideColumn.indexOf(coluid) === -1 && currentColumn && currentColumn.visible) {\n        this.hideColumn.push(coluid);\n      }\n    }\n    if (selectAll) {\n      if (!isChecked) {\n        this.changedColumns.push(coluid);\n      } else {\n        this.unchangedColumns.push(coluid);\n      }\n    } else if (this.changedColumns.indexOf(coluid) !== -1) {\n      this.changedColumns.splice(this.changedColumns.indexOf(coluid), 1);\n    } else {\n      this.changedColumns.push(coluid);\n    }\n  };\n  ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n    var clearSearch = false;\n    var okButton;\n    var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n    var selectedCheckbox = this.ulElement.querySelector('.e-check') && this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n    if (this.infiniteRenderMode) {\n      selectedCheckbox = this.infiniteLoadedElement.filter(function (arr) {\n        return arr.querySelector('.e-check');\n      }).length;\n    }\n    this.isInitialOpen = true;\n    if (buttonEle) {\n      okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n    }\n    if (searchVal === '') {\n      this.removeCancelIcon();\n      this.filterColumns = this.getColumns();\n      clearSearch = true;\n    } else {\n      this.filterColumns = new DataManager(this.getColumns()).executeLocal(new Query().where('headerText', this.searchOperator, searchVal, true, this.parent.columnChooserSettings.ignoreAccent));\n    }\n    if (this.infiniteRenderMode) {\n      this.updateIfiniteSelectAll();\n    }\n    if (this.filterColumns.length) {\n      this.innerDiv.innerHTML = ' ';\n      this.innerDiv.classList.remove('e-ccnmdiv');\n      this.infiniteInitialLoad = true;\n      this.infiniteLoadedElement = [];\n      this.innerDiv.appendChild(this.refreshCheckboxList(this.filterColumns));\n      if (this.infiniteRenderMode) {\n        this.mainDiv.querySelector('.e-ccheck .e-selectall').parentElement.classList.remove('e-checkbox-disabled');\n        this.updateIntermediateBtn();\n      }\n      if (!clearSearch) {\n        this.addcancelIcon();\n        this.refreshCheckboxButton();\n      } else {\n        if (okButton && selectedCheckbox) {\n          okButton.disabled = false;\n        }\n        if (selectedCheckbox && this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n          this.parent.notify(events.refreshCustomFilterOkBtn, {\n            disabled: false\n          });\n        }\n      }\n    } else {\n      var nMatchele = this.parent.createElement('span', {\n        className: 'e-cc e-nmatch'\n      });\n      nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n      this.innerDiv.innerHTML = ' ';\n      if (this.infiniteRenderMode) {\n        removeClass([this.mainDiv.querySelector('.e-frame.e-selectall')], ['e-check', 'e-stop', 'e-uncheck']);\n        this.mainDiv.querySelector('.e-ccheck .e-selectall').parentElement.classList.add('e-checkbox-disabled');\n      }\n      this.innerDiv.appendChild(nMatchele);\n      this.innerDiv.classList.add('e-ccnmdiv');\n      if (okButton) {\n        okButton.disabled = true;\n      }\n      if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n        this.parent.notify(events.refreshCustomFilterOkBtn, {\n          disabled: true\n        });\n      }\n    }\n    this.flag = true;\n    this.stopTimer();\n  };\n  ColumnChooser.prototype.updateIfiniteSelectAll = function () {\n    this.changedColumns = [];\n    this.hideColumn = [];\n    this.showColumn = [];\n    var unCheckItem = this.infiniteLoadedElement.filter(function (arr) {\n      return arr.querySelector('.e-uncheck');\n    });\n    for (var i = 0; i < unCheckItem.length; i++) {\n      this.checkState(unCheckItem[parseInt(i.toString(), 10)].querySelector('.e-frame'), true);\n    }\n  };\n  ColumnChooser.prototype.wireEvents = function () {\n    EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n    EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n    EventHandler.add(this.dlgObj.element, 'keyup', this.keyUpHandler, this);\n    this.searchBoxObj.wireEvent();\n  };\n  ColumnChooser.prototype.unWireEvents = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    if (this.dlgObj && this.dlgObj.element) {\n      EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n      EventHandler.remove(this.dlgObj.element, 'keyup', this.keyUpHandler);\n    }\n    if (this.searchBoxObj) {\n      EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n      this.searchBoxObj.unWireEvent();\n    }\n  };\n  ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n    var checkstate;\n    var selectAllElement = parentsUntil(e.target, 'e-checkbox-wrapper');\n    var columns = this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns();\n    if (selectAllElement) {\n      var selectAll = selectAllElement.querySelector('.e-selectall');\n      if (selectAll) {\n        this.updateSelectAll(!selectAllElement.querySelector('.e-check'));\n      } else {\n        toogleCheckbox(selectAllElement.parentElement);\n      }\n      selectAllElement.querySelector('.e-chk-hidden').focus();\n      if (selectAllElement.querySelector('.e-check')) {\n        checkstate = true;\n      } else if (selectAllElement.querySelector('.e-uncheck')) {\n        checkstate = false;\n      }\n      if (!this.infiniteRenderMode) {\n        this.updateIntermediateBtn();\n      }\n      var columnUid = parentsUntil(selectAllElement, 'e-ccheck').getAttribute('uid');\n      var column = this.searchValue && this.searchValue.length ? this.filterColumns : columns;\n      if (columnUid === this.parent.element.id + '-selectAll') {\n        this.changedColumns = [];\n        this.unchangedColumns = [];\n        for (var i = 0; i < column.length; i++) {\n          if (column[parseInt(i.toString(), 10)].showInColumnChooser) {\n            this.checkstatecolumn(checkstate, column[parseInt(i.toString(), 10)].uid, true);\n          }\n        }\n      } else {\n        this.checkstatecolumn(checkstate, columnUid);\n      }\n      var isSelectAll = this.infiniteRenderMode && selectAllElement.querySelector('.e-selectall') && selectAllElement.querySelector('.e-uncheck') ? true : false;\n      this.refreshCheckboxButton(isSelectAll);\n      this.setFocus(parentsUntil(e.target, 'e-cclist'));\n      if (this.infiniteRenderMode) {\n        this.updateIntermediateBtn();\n      }\n    }\n  };\n  ColumnChooser.prototype.updateIntermediateBtn = function () {\n    var count = this.infiniteRenderMode ? this.infiniteLoadedElement.length : this.ulElement.children.length - 1;\n    var className = [];\n    var hideColumnsCount = 0;\n    var showColumnsCount = 0;\n    (this.searchValue && this.searchValue.length ? this.filterColumns : this.infiniteColumns).filter(function (column) {\n      if (column.visible === false) {\n        hideColumnsCount++;\n      } else {\n        showColumnsCount++;\n      }\n    });\n    var selectAllElement = (this.infiniteRenderMode && this.mainDiv.querySelector('.e-cc-selectall') ? this.mainDiv.querySelector('.e-cc-selectall') : this.ulElement.children[0]).querySelector('.e-frame');\n    var selected = this.infiniteRenderMode ? this.infiniteLoadedElement.filter(function (arr) {\n      return arr.querySelector('.e-check');\n    }).length : this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n    var btn;\n    if (!this.parent.enableAdaptiveUI) {\n      btn = this.dlgObj.btnObj[0];\n      btn.disabled = false;\n    } else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n      this.parent.notify(events.refreshCustomFilterOkBtn, {\n        disabled: false\n      });\n    }\n    var inputElem = selectAllElement.parentElement.querySelector('input');\n    if (count === selected && (!this.infiniteRenderMode || this.infiniteRenderMode && hideColumnsCount === this.showColumn.length)) {\n      className = ['e-check'];\n      setChecked(inputElem, true);\n    } else if (selected || this.infiniteRenderMode && !selected && showColumnsCount !== this.hideColumn.length) {\n      className = ['e-stop'];\n      inputElem.indeterminate = true;\n    } else {\n      className = ['e-uncheck'];\n      setChecked(inputElem, false);\n      if (!this.parent.enableAdaptiveUI) {\n        btn.disabled = true;\n      } else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n        this.parent.notify(events.refreshCustomFilterOkBtn, {\n          disabled: true\n        });\n      }\n    }\n    if (!this.parent.enableAdaptiveUI) {\n      btn.dataBind();\n    }\n    removeClass([selectAllElement], ['e-check', 'e-stop', 'e-uncheck']);\n    addClass([selectAllElement], className);\n  };\n  ColumnChooser.prototype.updateSelectAll = function (checked) {\n    var checkBoxItems = [].slice.call(this.ulElement.getElementsByClassName('e-frame'));\n    if (this.infiniteRenderMode) {\n      checkBoxItems = [];\n      this.infiniteLoadedElement.map(function (arr) {\n        return checkBoxItems.push(arr.querySelector('.e-frame'));\n      });\n      checkBoxItems.unshift(this.mainDiv.querySelector('.e-cc-selectall').querySelector('.e-frame'));\n    }\n    for (var _i = 0, checkBoxItems_1 = checkBoxItems; _i < checkBoxItems_1.length; _i++) {\n      var checkBoxItem = checkBoxItems_1[_i];\n      removeAddCboxClasses(checkBoxItem, checked);\n      var cBoxInput = checkBoxItem.parentElement.querySelector('input');\n      if (checkBoxItem.classList.contains('e-check')) {\n        setChecked(cBoxInput, true);\n      } else if (checkBoxItem.classList.contains('e-uncheck')) {\n        setChecked(cBoxInput, false);\n      }\n    }\n  };\n  ColumnChooser.prototype.refreshCheckboxButton = function (checkstate) {\n    var visibleCols = this.parent.getVisibleColumns();\n    for (var i = 0; i < visibleCols.length; i++) {\n      var columnUID = visibleCols[parseInt(i.toString(), 10)].uid;\n      if (this.prevShowedCols.indexOf(columnUID) === -1 && visibleCols[parseInt(i.toString(), 10)].type !== 'checkbox') {\n        this.prevShowedCols.push(columnUID);\n      }\n    }\n    for (var i = 0; i < this.hideColumn.length; i++) {\n      var index = this.prevShowedCols.indexOf(this.hideColumn[parseInt(i.toString(), 10)]);\n      if (index !== -1) {\n        this.prevShowedCols.splice(index, 1);\n      }\n    }\n    var selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n    if (this.infiniteRenderMode) {\n      selected = this.infiniteLoadedElement.filter(function (arr) {\n        return arr.querySelector('.e-uncheck');\n      }).length;\n    }\n    var btn;\n    if (!this.parent.enableAdaptiveUI) {\n      btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n      btn.disabled = false;\n    } else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n      this.parent.notify(events.refreshCustomFilterOkBtn, {\n        disabled: false\n      });\n    }\n    var sreachShowColumns = [];\n    var searchData = [].slice.call(document.getElementsByClassName('e-cc-chbox'));\n    for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n      var element = searchData[parseInt(i.toString(), 10)];\n      if (this.infiniteRenderMode && element.classList.contains('e-selectall')) {\n        continue;\n      }\n      var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n      sreachShowColumns.push(columnUID);\n    }\n    var hideColumns = this.showColumn.filter(function (column) {\n      return sreachShowColumns.indexOf(column) !== -1;\n    });\n    if (this.infiniteRenderMode && (checkstate || sreachShowColumns.length === selected) || !this.infiniteRenderMode && selected === 0 && hideColumns.length === 0) {\n      if (!this.parent.enableAdaptiveUI) {\n        btn.disabled = true;\n      } else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n        this.parent.notify(events.refreshCustomFilterOkBtn, {\n          disabled: true\n        });\n      }\n    }\n    if (!this.parent.enableAdaptiveUI) {\n      btn.dataBind();\n    }\n  };\n  ColumnChooser.prototype.refreshCheckboxList = function (chooserColumns) {\n    this.ulElement = this.parent.createElement('ul', {\n      className: 'e-ccul-ele e-cc'\n    });\n    var selectAllValue = this.l10n.getConstant('SelectAll');\n    var columnChooserList = this.parent.createElement('li', {\n      className: 'e-cclist e-cc e-cc-selectall',\n      'styles': this.infiniteRenderMode ? 'list-style:None' : ''\n    });\n    var selectAll = this.createCheckBox(selectAllValue, false, this.parent.element.id + '-selectAll');\n    if (chooserColumns.length) {\n      selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n      selectAll.querySelector('.e-frame').classList.add('e-selectall');\n      this.checkState(selectAll.querySelector('.e-icons'), true);\n      columnChooserList.appendChild(selectAll);\n      if (this.infiniteRenderMode) {\n        if (this.mainDiv.querySelector('.e-cc-contentdiv') && !this.mainDiv.querySelector('.e-cc-selectall')) {\n          this.infiniteDiv = this.mainDiv.querySelector('.e-cc-contentdiv');\n          this.mainDiv.insertBefore(columnChooserList, this.infiniteDiv);\n          this.infiniteDiv.classList.add('e-checkbox-infinitescroll');\n          EventHandler.add(this.infiniteDiv, 'scroll', this.infiniteScrollHandler, this);\n          EventHandler.add(this.infiniteDiv, 'mouseup', this.infiniteScrollMouseKeyUpHandler, this);\n          EventHandler.add(this.infiniteDiv, 'mousedown', this.infiniteScrollMouseKeyDownHandler, this);\n        }\n      } else {\n        this.ulElement.appendChild(columnChooserList);\n      }\n    }\n    if (this.parent.cssClass) {\n      if (this.parent.cssClass.indexOf(' ') !== -1) {\n        addClass([selectAll], this.parent.cssClass.split(' '));\n      } else {\n        addClass([selectAll], [this.parent.cssClass]);\n      }\n    }\n    if (this.infiniteRenderMode && chooserColumns.length > this.itemsCount * 3) {\n      this.infiniteSkipCount = this.itemsCount * 2;\n    }\n    this.renderCheckbox(chooserColumns.slice(0, this.infiniteRenderMode ? this.itemsCount * 3 : chooserColumns.length));\n    return this.ulElement;\n  };\n  ColumnChooser.prototype.infiniteScrollMouseKeyDownHandler = function () {\n    EventHandler.remove(this.infiniteDiv, 'scroll', this.infiniteScrollHandler);\n  };\n  ColumnChooser.prototype.infiniteScrollMouseKeyUpHandler = function (e) {\n    var _this = this;\n    EventHandler.add(this.infiniteDiv, 'scroll', this.infiniteScrollHandler, this);\n    var target = this.infiniteDiv;\n    if (this.ulElement.children.length > 1 && (target.scrollTop >= target.scrollHeight - target.offsetHeight || target.scrollTop <= 0)) {\n      this.infiniteScrollHandler();\n    }\n    Global.timer = setTimeout(function () {\n      _this.clickHandler(e);\n      Global.timer = null;\n    }, 0);\n  };\n  ColumnChooser.prototype.infiniteScrollHandler = function () {\n    var target = this.infiniteDiv;\n    var columns = this.searchValue && this.searchValue.length ? this.filterColumns : this.infiniteColumns;\n    if (target.scrollTop >= target.scrollHeight - target.offsetHeight && this.infiniteLoadedElement.length <= this.infiniteSkipCount + this.itemsCount && this.ulElement.children.length === this.itemsCount * 3 && (!columns.length || columns.length > this.infiniteSkipCount + this.itemsCount)) {\n      var diffcount = columns.length - (this.infiniteSkipCount + this.itemsCount);\n      var count = 0;\n      if (diffcount < this.itemsCount) {\n        count = diffcount;\n      }\n      infiniteRemoveElements([].slice.call(this.ulElement.children).splice(0, this.itemsCount));\n      this.infiniteInitialLoad = true;\n      this.infiniteSkipCount += this.itemsCount;\n      this.renderCheckbox(columns.slice(this.infiniteSkipCount, this.infiniteSkipCount + (count + this.itemsCount)));\n      this.prevInfiniteScrollDirection = 'down';\n    } else if (target.scrollTop >= target.scrollHeight - target.offsetHeight && this.infiniteLoadedElement.length > this.infiniteSkipCount + this.itemsCount && this.ulElement.children.length === this.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.ulElement.children).splice(0, this.itemsCount));\n      this.infiniteSkipCount += this.prevInfiniteScrollDirection === 'down' ? this.itemsCount : this.itemsCount * 3;\n      appendChildren(this.ulElement, this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.itemsCount + this.infiniteSkipCount));\n      this.prevInfiniteScrollDirection = 'down';\n    } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && this.infiniteSkipCount && this.infiniteLoadedElement.length && this.infiniteLoadedElement.length > this.itemsCount * 3 && this.ulElement.children.length === this.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.ulElement.children).splice(this.itemsCount * 2, this.itemsCount));\n      this.infiniteSkipCount -= this.prevInfiniteScrollDirection === 'up' ? this.itemsCount : this.itemsCount * 3;\n      infiniteAppendElements([].slice.call(this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.infiniteSkipCount + this.itemsCount)), this.ulElement);\n      this.prevInfiniteScrollDirection = 'up';\n      this.infiniteDiv.scrollTop = this.infiniteScrollAppendDiff;\n    } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && this.infiniteSkipCount && this.infiniteSkipCount > this.itemsCount * 2 && this.infiniteLoadedElement.length && this.ulElement.children.length < this.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.ulElement.children).splice(this.itemsCount * 2, columns.length % this.itemsCount));\n      this.infiniteSkipCount = (Math.floor(columns.length / this.itemsCount) - 3) * this.itemsCount;\n      infiniteAppendElements([].slice.call(this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.infiniteSkipCount + this.itemsCount)), this.ulElement);\n      this.infiniteDiv.scrollTop = this.infiniteScrollAppendDiff;\n      this.prevInfiniteScrollDirection = 'up';\n    }\n  };\n  ColumnChooser.prototype.refreshCheckboxState = function () {\n    this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n    this.columnChooserSearch('');\n    var gridObject = this.parent;\n    var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n    for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n      var element = currentCheckBoxColls[parseInt(i.toString(), 10)];\n      var columnUID = void 0;\n      if (this.parent.childGrid || this.parent.detailTemplate) {\n        columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[parseInt(i.toString(), 10)], 'e-ccheck').getAttribute('uid');\n      } else {\n        columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n      }\n      var column = gridObject.getColumnByUid(columnUID, this.infiniteRenderMode);\n      var uncheck = [].slice.call(element.parentElement.getElementsByClassName('e-uncheck'));\n      if (column.visible && !uncheck.length) {\n        element.checked = true;\n        this.checkState(element.parentElement.querySelector('.e-icons'), true);\n      } else {\n        element.checked = false;\n        this.checkState(element.parentElement.querySelector('.e-icons'), false);\n      }\n    }\n  };\n  ColumnChooser.prototype.checkState = function (element, state) {\n    if (state) {\n      classList(element, ['e-check'], ['e-uncheck']);\n    } else {\n      classList(element, ['e-uncheck'], ['e-check']);\n    }\n  };\n  ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n    var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n    if (!this.parent.enableAdaptiveUI && this.parent.enableRtl && !cbox.classList.contains('e-rtl')) {\n      cbox.classList.add('e-rtl');\n    }\n    var cboxLabel = cbox.querySelector('.e-label');\n    var inputcbox = cbox.querySelector('input');\n    setChecked(inputcbox, checked);\n    cboxLabel.setAttribute('id', uid + 'label');\n    cboxLabel.innerHTML = label;\n    inputcbox.setAttribute('aria-labelledby', cboxLabel.id);\n    return createCboxWithWrap(uid, cbox, 'e-ccheck');\n  };\n  ColumnChooser.prototype.renderCheckbox = function (columns) {\n    var _a;\n    var checkBoxItems = this.parent.createElement('div');\n    var offsetHeight = this.ulElement.offsetHeight;\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[parseInt(i.toString(), 10)];\n      if (column.showInColumnChooser) {\n        var columnChooserList = this.parent.createElement('li', {\n          className: 'e-cclist e-cc',\n          styles: 'list-style:None',\n          id: 'e-ccli_' + column.uid\n        });\n        var hideColumnState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n        var showColumnState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n        var columnchooserccheckboxlist = this.createCheckBox(column.headerText, column.visible && !hideColumnState || showColumnState, column.uid);\n        columnChooserList.appendChild(columnchooserccheckboxlist);\n        if (this.parent.cssClass) {\n          if (this.parent.cssClass.indexOf(' ') !== -1) {\n            addClass([columnchooserccheckboxlist], this.parent.cssClass.split(' '));\n          } else {\n            addClass([columnchooserccheckboxlist], [this.parent.cssClass]);\n          }\n        }\n        if (this.infiniteRenderMode && this.infiniteDiv) {\n          columnChooserList.style.height = getListHeight(this.infiniteDiv, true) + 'px';\n        }\n        checkBoxItems.appendChild(columnChooserList);\n      }\n    }\n    if (this.infiniteRenderMode && this.infiniteInitialLoad) {\n      (_a = this.infiniteLoadedElement).push.apply(_a, [].slice.call(checkBoxItems.children));\n      this.infiniteInitialLoad = false;\n    }\n    appendChildren(this.ulElement, [].slice.call(checkBoxItems.children));\n    if (this.infiniteRenderMode && !this.infiniteScrollAppendDiff) {\n      this.infiniteScrollAppendDiff = this.ulElement.offsetHeight - offsetHeight;\n    }\n    if (this.isInitialOpen) {\n      this.updateIntermediateBtn();\n    }\n  };\n  ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n    this.addcancelIcon();\n    this.searchValue = e.target.value;\n    this.stopTimer();\n    this.startTimer(e);\n  };\n  ColumnChooser.prototype.startTimer = function (e) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var proxy = this;\n    var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n    this.timer = window.setInterval(function () {\n      proxy.columnChooserSearch(proxy.searchValue);\n    }, interval);\n  };\n  ColumnChooser.prototype.stopTimer = function () {\n    window.clearInterval(this.timer);\n  };\n  ColumnChooser.prototype.addcancelIcon = function () {\n    this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    this.dlgDiv.querySelector('.e-cc-cancel').setAttribute('title', this.l10n.getConstant('Clear'));\n  };\n  ColumnChooser.prototype.removeCancelIcon = function () {\n    this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').setAttribute('title', this.l10n.getConstant('Search'));\n  };\n  ColumnChooser.prototype.mOpenDlg = function () {\n    if (Browser.isDevice) {\n      this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n      this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n    }\n    if (this.parent.enableAdaptiveUI) {\n      this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.add('e-input-focus');\n    }\n  };\n  // internally use\n  ColumnChooser.prototype.getModuleName = function () {\n    return 'columnChooser';\n  };\n  ColumnChooser.prototype.hideOpenedDialog = function () {\n    var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n      return dlgEle.classList.contains('e-popup-open');\n    });\n    for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n      if (this.parent.element.id + '_ccdlg' !== openCC[parseInt(i.toString(), 10)].id || openCC[parseInt(i.toString(), 10)].classList.contains('e-dialog')) {\n        openCC[parseInt(i.toString(), 10)].ej2_instances[0].hide();\n      }\n    }\n  };\n  ColumnChooser.prototype.beforeOpenColumnChooserEvent = function () {\n    var args1 = {\n      requestType: 'beforeOpenColumnChooser',\n      element: this.parent.element,\n      columns: this.getColumns(),\n      cancel: false,\n      searchOperator: this.parent.columnChooserSettings.operator\n    };\n    this.parent.trigger(events.beforeOpenColumnChooser, args1);\n    this.searchOperator = args1.searchOperator;\n    return args1;\n  };\n  ColumnChooser.prototype.renderResponsiveChangeAction = function (args) {\n    this.responsiveDialogRenderer.action = args.action;\n  };\n  /**\n   * To show the responsive custom sort dialog\n   *\n   * @param {boolean} enable - specifes dialog open\n   * @returns {void}\n   * @hidden\n   */\n  ColumnChooser.prototype.showCustomColumnChooser = function (enable) {\n    this.responsiveDialogRenderer.isCustomDialog = enable;\n    this.responsiveDialogRenderer.showResponsiveDialog();\n  };\n  return ColumnChooser;\n}();\nexport { ColumnChooser };","map":{"version":3,"names":["classList","addClass","removeClass","isNullOrUndefined","Browser","Query","DataManager","EventHandler","closest","events","Dialog","calculateRelativeBasedPosition","createCboxWithWrap","toogleCheckbox","parentsUntil","removeAddCboxClasses","setChecked","resetDialogAppend","Global","appendChildren","getListHeight","infiniteRemoveElements","infiniteAppendElements","ResponsiveDialogAction","createCheckBox","SearchBox","literals","ColumnChooser","parent","serviceLocator","filterColumns","showColumn","hideColumn","changedColumns","unchangedColumns","infiniteLoadedElement","isDlgOpen","isColumnChooserOpen","initialOpenDlg","stateChangeColumns","changedStateColumns","isInitialOpen","isCustomizeOpenCC","searchOperator","itemsCount","infiniteSkipCount","infiniteColumns","infiniteInitialLoad","prevInfiniteScrollDirection","prevShowedCols","hideDialogFunction","hideDialog","bind","infiniteRenderMode","enableColumnVirtualization","addEventListener","cBoxTrue","createElement","checked","label","cBoxFalse","insertBefore","className","attrs","type","firstChild","querySelector","add","enableRtl","cssClass","indexOf","split","enableAdaptiveUI","setFullScreenDialog","prototype","destroy","gridElement","element","gridContent","gridHeader","removeEventListener","unWireEvents","infiniteDiv","dlgObj","isDestroyed","registerAdaptiveService","isColumnChooser","on","renderResponsiveColumnChooserDiv","renderResponsiveChangeAction","rtlUpdate","innerDiv","slice","call","getElementsByClassName","document","clickHandler","uiUpdate","enableAfterRenderEle","initialEnd","render","dataBound","rtlUpdated","resetColumns","onResetColumns","remove","off","infiniteScrollHandler","infiniteScrollMouseKeyUpHandler","infiniteScrollMouseKeyDownHandler","l10n","getService","renderDlgContent","getShowHideService","e","targetElement","target","contains","visible","parentElement","value","columnChooserSearch","removeCancelIcon","refreshCheckboxButton","hide","clearActions","refreshCheckboxState","detailTemplate","childGrid","targetdlg","renderColumnChooser","x","y","hideOpenedDialog","args","beforeOpenColumnChooserEvent","cancel","show","dataBind","style","maxHeight","elementVisible","display","isSticky","getHeaderContent","toolbarItem","newpos","getElementById","id","appendChild","getBoundingClientRect","top","height","dlgWidth","width","isDevice","position","X","Y","refreshPosition","open","mOpenDlg","left","offsetLeft","clientWidth","getContent","firstElementChild","offsetHeight","select","notify","columnChooserOpened","dialog","addcancelIcon","openColumnChooser","showResponsiveCustomColumnChooser","content","renderChooserList","updateIntermediateBtn","beforeOpen","customDialogOpen","beforeClose","customDialogClose","module","getModuleName","enable","keyUpHandler","key","resetColumnState","setFocus","elem","prevElem","dlgDiv","searchElement","columnChooserManualSearch","getColumns","columns","filter","column","showInColumnChooser","field","undefined","isAdaptive","header","getConstant","showCloseIcon","closeOnEscape","locale","animationSettings","effect","buttons","click","confirmDlgBtnClick","buttonModel","isPrimary","clearBtnClick","isStringTemplate","appendTo","responsiveCnt","wireEvents","mainDiv","searchDiv","ccsearchele","placeholder","ccsearchicon","title","conDiv","searchBoxObj","i","length","parseInt","toString","push","innerDivContent","refreshCheckboxList","searchBoxDiv","_this","isCheckALL","ulElement","searchValue","map","uid","changedColumnState","uncheckedLength","arr","querySelectorAll","columnStateChange","setVisible","tooltipDestroy","getCurrentViewRecords","emptyRowCell","setAttribute","getVisibleColumns","scrollModule","refresh","editSettings","showAddNewRow","showAddNewRowFocus","requestType","action","focusListElement","index","colUid","currentColumn","getColumnByUid","stateColumns","state","columnChooserCancelBtnClick","checkstatecolumn","isChecked","coluid","selectAll","splice","searchVal","clearSearch","okButton","buttonEle","selectedCheckbox","ej2_instances","executeLocal","where","columnChooserSettings","ignoreAccent","updateIfiniteSelectAll","innerHTML","disabled","responsiveDialogRenderer","refreshCustomFilterOkBtn","nMatchele","flag","stopTimer","unCheckItem","checkState","checkBoxClickHandler","searchBox","wireEvent","unWireEvent","checkstate","selectAllElement","updateSelectAll","focus","columnUid","getAttribute","isSelectAll","count","children","hideColumnsCount","showColumnsCount","selected","btn","btnObj","inputElem","indeterminate","checkBoxItems","unshift","_i","checkBoxItems_1","checkBoxItem","cBoxInput","visibleCols","columnUID","sreachShowColumns","searchData","itemsLen","hideColumns","chooserColumns","selectAllValue","columnChooserList","renderCheckbox","scrollTop","scrollHeight","timer","setTimeout","diffcount","infiniteScrollAppendDiff","Math","floor","gridObject","currentCheckBoxColls","itemLen","uncheck","cbox","cloneNode","cboxLabel","inputcbox","_a","styles","hideColumnState","showColumnState","columnchooserccheckboxlist","headerText","apply","startTimer","proxy","interval","keyCode","window","setInterval","clearInterval","openCC","dlgEle","dlgLen","args1","operator","trigger","beforeOpenColumnChooser","showCustomColumnChooser","isCustomDialog","showResponsiveDialog"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-grids/src/grid/actions/column-chooser.js"],"sourcesContent":["import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses, setChecked, resetDialogAppend, Global, appendChildren, getListHeight, infiniteRemoveElements, infiniteAppendElements } from '../base/util';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\nimport * as literals from '../base/string-literals';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.filterColumns = [];\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.changedColumns = [];\n        this.unchangedColumns = [];\n        this.infiniteLoadedElement = [];\n        this.isDlgOpen = false;\n        this.isColumnChooserOpen = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.searchOperator = 'startswith';\n        this.itemsCount = 50;\n        this.infiniteSkipCount = 0;\n        this.infiniteColumns = [];\n        this.infiniteInitialLoad = false;\n        this.prevInfiniteScrollDirection = '';\n        this.prevShowedCols = [];\n        this.hideDialogFunction = this.hideDialog.bind(this);\n        this.infiniteRenderMode = false;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.infiniteRenderMode = this.parent.enableColumnVirtualization ? true : false;\n        this.addEventListener();\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n        if (this.parent.cssClass) {\n            if (this.parent.cssClass.indexOf(' ') !== -1) {\n                addClass([this.cBoxTrue, this.cBoxFalse], this.parent.cssClass.split(' '));\n            }\n            else {\n                addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n            }\n        }\n        if (this.parent.enableAdaptiveUI) {\n            this.setFullScreenDialog();\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement.querySelector('.' + literals.gridContent) && (!gridElement.querySelector('.' + literals.gridHeader)) || !gridElement) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        this.infiniteLoadedElement = null;\n        this.infiniteDiv = null;\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            this.dlgObj.destroy();\n        }\n    };\n    ColumnChooser.prototype.setFullScreenDialog = function () {\n        if (this.serviceLocator) {\n            this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isColumnChooser);\n        }\n        if (this.parent.enableAdaptiveUI) {\n            this.parent.on(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv, this);\n            this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (!isNullOrUndefined(this.innerDiv)) {\n            if (this.parent.enableRtl) {\n                addClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n            }\n            else {\n                removeClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n            }\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialogFunction);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n        this.parent.on(events.resetColumns, this.onResetColumns, this);\n        this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n        if (this.parent.enableAdaptiveUI) {\n            this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n        }\n        if (this.infiniteRenderMode || this.parent.enableAdaptiveUI) {\n            this.parent.on(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv, this);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(document, 'click', this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n        this.parent.off(events.resetColumns, this.onResetColumns);\n        this.parent.removeEventListener(events.dataBound, this.hideDialogFunction);\n        this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n        if (this.infiniteDiv) {\n            EventHandler.remove(this.infiniteDiv, 'scroll', this.infiniteScrollHandler);\n            EventHandler.remove(this.infiniteDiv, 'mouseup', this.infiniteScrollMouseKeyUpHandler);\n            EventHandler.remove(this.infiniteDiv, 'mousedown', this.infiniteScrollMouseKeyDownHandler);\n        }\n        if (this.parent.enableAdaptiveUI) {\n            this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n            this.parent.off(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction);\n        }\n        if (this.infiniteRenderMode || this.parent.enableAdaptiveUI) {\n            this.parent.off(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv);\n        }\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        if (!this.parent.enableAdaptiveUI) {\n            this.renderDlgContent();\n        }\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc-toolbar')) || !isNullOrUndefined(closest(targetElement, '.e-cc'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                    this.refreshCheckboxButton();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.targetdlg = e.target;\n            }\n        }\n        if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n            this.refreshCheckboxState();\n        }\n        if (!this.parent.enableAdaptiveUI) {\n            this.rtlUpdate();\n        }\n        else {\n            if (this.parent.enableRtl) {\n                addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n            }\n        }\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     *\n     * @param {number} x - specifies the position x\n     * @param {number} y - specifies the position y\n     * @param {Element} target - specifies the target\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n            this.hideOpenedDialog();\n        }\n        if (!this.dlgObj.visible) {\n            var args = this.beforeOpenColumnChooserEvent();\n            if (args.cancel) {\n                return;\n            }\n            if (target) {\n                this.targetdlg = target;\n            }\n            if (this.infiniteRenderMode) {\n                this.dlgObj.show();\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var isSticky = this.parent.getHeaderContent().classList.contains('e-sticky');\n            var toolbarItem = closest(target, '.e-toolbar-item');\n            var newpos = void 0;\n            if (document.getElementById(this.parent.element.id + '_e-popup') && document.getElementById(this.parent.element.id + '_e-popup').querySelector('.e-ccdlg')) {\n                this.parent.element.appendChild(this.dlgObj.element);\n            }\n            if (isSticky) {\n                newpos = toolbarItem.getBoundingClientRect();\n                this.dlgObj.element.classList.add('e-sticky');\n            }\n            else {\n                this.dlgObj.element.classList.remove('e-sticky');\n                newpos = calculateRelativeBasedPosition(toolbarItem, this.dlgObj.element);\n            }\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            if (!this.infiniteRenderMode) {\n                this.dlgObj.show();\n            }\n            if (this.parent.getContent().firstElementChild.offsetHeight < this.dlgObj.element.offsetHeight &&\n                !this.parent.element.classList.contains('e-drillthrough-grid')) {\n                resetDialogAppend(this.parent, this.dlgObj);\n                this.dlgObj.element.querySelector('.e-ccsearch').select();\n            }\n            this.parent.notify(events.columnChooserOpened, { dialog: this.dlgObj });\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n            this.clearActions();\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     *\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.parent.enableAdaptiveUI) {\n            if (!this.isColumnChooserOpen) {\n                this.parent.showResponsiveCustomColumnChooser();\n            }\n            this.isColumnChooserOpen = false;\n            this.renderDlgContent();\n        }\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        var args = this.beforeOpenColumnChooserEvent();\n        if (args.cancel) {\n            return;\n        }\n        if (this.infiniteRenderMode) {\n            this.dlgObj.show();\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n            this.updateIntermediateBtn();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        if (this.infiniteRenderMode) {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            if (this.parent.enableAdaptiveUI) {\n                this.dlgObj.position = { X: '', Y: '' };\n            }\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        if (!this.infiniteRenderMode) {\n            this.dlgObj.show();\n        }\n        if (this.parent.getContent().firstElementChild.offsetHeight < this.dlgObj.element.offsetHeight &&\n            !this.parent.element.classList.contains('e-drillthrough-grid')) {\n            resetDialogAppend(this.parent, this.dlgObj);\n        }\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.keyUpHandler = function (e) {\n        if (e.key === 'Escape') {\n            this.resetColumnState();\n        }\n        this.setFocus(parentsUntil(e.target, 'e-cclist'));\n    };\n    ColumnChooser.prototype.setFocus = function (elem) {\n        var prevElem = this.dlgDiv.querySelector('.e-colfocus');\n        if (prevElem) {\n            prevElem.classList.remove('e-colfocus');\n        }\n        if (elem) {\n            elem.classList.add('e-colfocus');\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = (this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns()).filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        var isAdaptive = this.parent.enableAdaptiveUI;\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        if (!isAdaptive) {\n            this.parent.element.appendChild(this.dlgDiv);\n        }\n        this.dlgObj = new Dialog({\n            header: this.parent.enableAdaptiveUI ? null : this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: this.parent.cssClass ? 'e-cc' + ' ' + this.parent.cssClass : 'e-cc',\n            animationSettings: { effect: 'None' }\n        });\n        if (!isAdaptive) {\n            this.dlgObj.buttons = [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: this.parent.cssClass ? 'e-cc e-cc_okbtn' + ' ' + this.parent.cssClass : 'e-cc e-cc_okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this),\n                    buttonModel: {\n                        cssClass: this.parent.cssClass ?\n                            'e-flat e-cc e-cc-cnbtn' + ' ' + this.parent.cssClass : 'e-flat e-cc e-cc-cnbtn',\n                        content: this.l10n.getConstant('CancelButton')\n                    }\n                }];\n        }\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[\"\" + isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n        if (isAdaptive) {\n            var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n            if (responsiveCnt) {\n                responsiveCnt.appendChild(this.dlgDiv);\n            }\n            this.dlgObj.open = this.mOpenDlg.bind(this);\n            this.dlgObj.target = document.querySelector('.e-rescolumnchooser > .e-dlg-content > .e-mainfilterdiv');\n        }\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = this.parent.createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = this.parent.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = this.parent.createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search'), cssClass: this.parent.cssClass }\n        });\n        var ccsearchicon = this.parent.createElement('span', {\n            className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') }\n        });\n        var conDiv = this.parent.createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = this.parent.createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele, this.serviceLocator);\n        var columns = this.getColumns();\n        if (this.infiniteRenderMode && !this.isInitialOpen) {\n            columns = this.parent.columns;\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[parseInt(i.toString(), 10)].showInColumnChooser) {\n                    this.infiniteColumns.push(columns[parseInt(i.toString(), 10)]);\n                }\n            }\n        }\n        var innerDivContent = this.refreshCheckboxList(columns);\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        if (this.parent.enableAdaptiveUI) {\n            var searchBoxDiv = this.parent.createElement('div', { className: 'e-cc-searchBox' });\n            searchBoxDiv.appendChild(searchDiv);\n            this.mainDiv.appendChild(searchBoxDiv);\n        }\n        else {\n            this.mainDiv.appendChild(searchDiv);\n        }\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        var _this = this;\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        var columns = this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns();\n        var isCheckALL = (this.infiniteRenderMode ? this.mainDiv : this.ulElement).querySelector('.e-selectall.e-check');\n        if (this.searchValue && this.filterColumns.length && isCheckALL) {\n            this.changedColumns = this.filterColumns.map(function (column) { return column.uid; });\n            this.showColumn = [];\n            this.hideColumn = [];\n            columns.map(function (column) {\n                if (_this.changedColumns.indexOf(column.uid) !== -1) {\n                    _this.showColumn.push(column.uid);\n                }\n                else if (column.showInColumnChooser) {\n                    _this.hideColumn.push(column.uid);\n                }\n            });\n        }\n        else {\n            this.changedColumns = (this.changedColumns.length > 0) ? this.changedColumns : this.unchangedColumns;\n        }\n        this.changedColumnState(this.changedColumns);\n        var uncheckedLength = this.infiniteRenderMode ? this.infiniteLoadedElement.filter(function (arr) { return arr.querySelector('.e-uncheck'); }).length : this.ulElement.querySelector('.e-uncheck') &&\n            this.ulElement.querySelectorAll('.e-uncheck:not(.e-selectall)').length;\n        if (!isNullOrUndefined(args)) {\n            if (uncheckedLength < columns.length) {\n                if (this.hideColumn.length) {\n                    this.columnStateChange(this.hideColumn, false);\n                }\n                if (this.showColumn.length) {\n                    this.columnStateChange(this.showColumn, true);\n                }\n                this.getShowHideService.setVisible(this.stateChangeColumns, this.changedStateColumns);\n                this.clearActions();\n                this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n                if (this.parent.getCurrentViewRecords().length === 0) {\n                    var emptyRowCell = this.parent.element.querySelector('.e-emptyrow').querySelector('td');\n                    emptyRowCell.setAttribute('colSpan', this.parent.getVisibleColumns().length.toString());\n                }\n            }\n            if (this.parent.enableAdaptiveUI && this.parent.scrollModule) {\n                this.parent.scrollModule.refresh();\n            }\n            if (this.parent.editSettings.showAddNewRow) {\n                this.parent.notify(events.showAddNewRowFocus, {});\n            }\n        }\n    };\n    ColumnChooser.prototype.onResetColumns = function (e) {\n        if (e.requestType === 'columnstate') {\n            this.resetColumnState();\n            return;\n        }\n    };\n    ColumnChooser.prototype.renderResponsiveColumnChooserDiv = function (args) {\n        if (args.action === 'open') {\n            this.isColumnChooserOpen = true;\n            this.openColumnChooser();\n        }\n        else if (args.action === 'clear') {\n            this.clearBtnClick();\n        }\n        else if (args.action === 'confirm') {\n            this.confirmDlgBtnClick(true);\n        }\n    };\n    ColumnChooser.prototype.resetColumnState = function () {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.changedColumns = [];\n        this.filterColumns = [];\n        this.searchValue = '';\n        if (this.infiniteRenderMode) {\n            var focusListElement = this.dlgDiv.querySelector('.e-cclist.e-cc-selectall.e-colfocus');\n            if (focusListElement) {\n                focusListElement.classList.remove('e-colfocus');\n            }\n        }\n        this.hideDialog();\n    };\n    ColumnChooser.prototype.changedColumnState = function (changedColumns) {\n        for (var index = 0; index < changedColumns.length; index++) {\n            var colUid = changedColumns[parseInt(index.toString(), 10)];\n            var currentColumn = this.parent.getColumnByUid(colUid, this.infiniteRenderMode);\n            this.changedStateColumns.push(currentColumn);\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[parseInt(index.toString(), 10)];\n            var currentColumn = this.parent.getColumnByUid(colUid, this.infiniteRenderMode);\n            if (currentColumn.type !== 'checkbox') {\n                currentColumn.visible = state;\n            }\n            this.stateChangeColumns.push(currentColumn);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.resetColumnState();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.clearBtnClick = function () {\n        this.clearActions();\n        this.parent.notify(events.columnChooserCancelBtnClick, { dialog: this.dlgObj });\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid, selectAll) {\n        if (selectAll === void 0) { selectAll = false; }\n        var currentColumn = this.parent.getColumnByUid(coluid, this.infiniteRenderMode);\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1 && !(currentColumn && currentColumn.visible)) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1 && (currentColumn && currentColumn.visible)) {\n                this.hideColumn.push(coluid);\n            }\n        }\n        if (selectAll) {\n            if (!isChecked) {\n                this.changedColumns.push(coluid);\n            }\n            else {\n                this.unchangedColumns.push(coluid);\n            }\n        }\n        else if (this.changedColumns.indexOf(coluid) !== -1) {\n            this.changedColumns.splice(this.changedColumns.indexOf(coluid), 1);\n        }\n        else {\n            this.changedColumns.push(coluid);\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var okButton;\n        var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n        var selectedCheckbox = this.ulElement.querySelector('.e-check') &&\n            this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        if (this.infiniteRenderMode) {\n            selectedCheckbox = this.infiniteLoadedElement.filter(function (arr) { return arr.querySelector('.e-check'); }).length;\n        }\n        this.isInitialOpen = true;\n        if (buttonEle) {\n            okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n        }\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            this.filterColumns = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            this.filterColumns = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', this.searchOperator, searchVal, true, this.parent.columnChooserSettings.ignoreAccent));\n        }\n        if (this.infiniteRenderMode) {\n            this.updateIfiniteSelectAll();\n        }\n        if (this.filterColumns.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.infiniteInitialLoad = true;\n            this.infiniteLoadedElement = [];\n            this.innerDiv.appendChild(this.refreshCheckboxList(this.filterColumns));\n            if (this.infiniteRenderMode) {\n                this.mainDiv.querySelector('.e-ccheck .e-selectall').parentElement.classList.remove('e-checkbox-disabled');\n                this.updateIntermediateBtn();\n            }\n            if (!clearSearch) {\n                this.addcancelIcon();\n                this.refreshCheckboxButton();\n            }\n            else {\n                if (okButton && selectedCheckbox) {\n                    okButton.disabled = false;\n                }\n                if (selectedCheckbox && this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n                    this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: false });\n                }\n            }\n        }\n        else {\n            var nMatchele = this.parent.createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            if (this.infiniteRenderMode) {\n                removeClass([this.mainDiv.querySelector('.e-frame.e-selectall')], ['e-check', 'e-stop', 'e-uncheck']);\n                this.mainDiv.querySelector('.e-ccheck .e-selectall').parentElement.classList.add('e-checkbox-disabled');\n            }\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n            if (okButton) {\n                okButton.disabled = true;\n            }\n            if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n                this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: true });\n            }\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.updateIfiniteSelectAll = function () {\n        this.changedColumns = [];\n        this.hideColumn = [];\n        this.showColumn = [];\n        var unCheckItem = this.infiniteLoadedElement.filter(function (arr) { return arr.querySelector('.e-uncheck'); });\n        for (var i = 0; i < unCheckItem.length; i++) {\n            this.checkState(unCheckItem[parseInt(i.toString(), 10)].querySelector('.e-frame'), true);\n        }\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        EventHandler.add(this.dlgObj.element, 'keyup', this.keyUpHandler, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj && this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n            EventHandler.remove(this.dlgObj.element, 'keyup', this.keyUpHandler);\n        }\n        if (this.searchBoxObj) {\n            EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n            this.searchBoxObj.unWireEvent();\n        }\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var checkstate;\n        var selectAllElement = parentsUntil(e.target, 'e-checkbox-wrapper');\n        var columns = this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns();\n        if (selectAllElement) {\n            var selectAll = selectAllElement.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateSelectAll(!selectAllElement.querySelector('.e-check'));\n            }\n            else {\n                toogleCheckbox(selectAllElement.parentElement);\n            }\n            selectAllElement.querySelector('.e-chk-hidden').focus();\n            if (selectAllElement.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (selectAllElement.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            if (!this.infiniteRenderMode) {\n                this.updateIntermediateBtn();\n            }\n            var columnUid = parentsUntil(selectAllElement, 'e-ccheck').getAttribute('uid');\n            var column = (this.searchValue && this.searchValue.length) ? this.filterColumns : columns;\n            if (columnUid === this.parent.element.id + '-selectAll') {\n                this.changedColumns = [];\n                this.unchangedColumns = [];\n                for (var i = 0; i < column.length; i++) {\n                    if (column[parseInt(i.toString(), 10)].showInColumnChooser) {\n                        this.checkstatecolumn(checkstate, column[parseInt(i.toString(), 10)].uid, true);\n                    }\n                }\n            }\n            else {\n                this.checkstatecolumn(checkstate, columnUid);\n            }\n            var isSelectAll = this.infiniteRenderMode && selectAllElement.querySelector('.e-selectall') &&\n                selectAllElement.querySelector('.e-uncheck') ? true : false;\n            this.refreshCheckboxButton(isSelectAll);\n            this.setFocus(parentsUntil(e.target, 'e-cclist'));\n            if (this.infiniteRenderMode) {\n                this.updateIntermediateBtn();\n            }\n        }\n    };\n    ColumnChooser.prototype.updateIntermediateBtn = function () {\n        var count = this.infiniteRenderMode ? this.infiniteLoadedElement.length : this.ulElement.children.length - 1;\n        var className = [];\n        var hideColumnsCount = 0;\n        var showColumnsCount = 0;\n        (this.searchValue && this.searchValue.length ? this.filterColumns : this.infiniteColumns).filter(function (column) {\n            if (column.visible === false) {\n                hideColumnsCount++;\n            }\n            else {\n                showColumnsCount++;\n            }\n        });\n        var selectAllElement = (this.infiniteRenderMode && this.mainDiv.querySelector('.e-cc-selectall') ?\n            this.mainDiv.querySelector('.e-cc-selectall') : this.ulElement.children[0]).querySelector('.e-frame');\n        var selected = this.infiniteRenderMode ? this.infiniteLoadedElement.filter(function (arr) { return arr.querySelector('.e-check'); }).length : this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn;\n        if (!this.parent.enableAdaptiveUI) {\n            btn = this.dlgObj.btnObj[0];\n            btn.disabled = false;\n        }\n        else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n            this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: false });\n        }\n        var inputElem = selectAllElement.parentElement.querySelector('input');\n        if (count === selected && (!this.infiniteRenderMode || (this.infiniteRenderMode &&\n            hideColumnsCount === this.showColumn.length))) {\n            className = ['e-check'];\n            setChecked(inputElem, true);\n        }\n        else if (selected || (this.infiniteRenderMode && !selected && showColumnsCount !== this.hideColumn.length)) {\n            className = ['e-stop'];\n            inputElem.indeterminate = true;\n        }\n        else {\n            className = ['e-uncheck'];\n            setChecked(inputElem, false);\n            if (!this.parent.enableAdaptiveUI) {\n                btn.disabled = true;\n            }\n            else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n                this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: true });\n            }\n        }\n        if (!this.parent.enableAdaptiveUI) {\n            btn.dataBind();\n        }\n        removeClass([selectAllElement], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([selectAllElement], className);\n    };\n    ColumnChooser.prototype.updateSelectAll = function (checked) {\n        var checkBoxItems = [].slice.call(this.ulElement.getElementsByClassName('e-frame'));\n        if (this.infiniteRenderMode) {\n            checkBoxItems = [];\n            this.infiniteLoadedElement.map(function (arr) { return checkBoxItems.push(arr.querySelector('.e-frame')); });\n            checkBoxItems.unshift(this.mainDiv.querySelector('.e-cc-selectall').querySelector('.e-frame'));\n        }\n        for (var _i = 0, checkBoxItems_1 = checkBoxItems; _i < checkBoxItems_1.length; _i++) {\n            var checkBoxItem = checkBoxItems_1[_i];\n            removeAddCboxClasses(checkBoxItem, checked);\n            var cBoxInput = checkBoxItem.parentElement.querySelector('input');\n            if (checkBoxItem.classList.contains('e-check')) {\n                setChecked(cBoxInput, true);\n            }\n            else if (checkBoxItem.classList.contains('e-uncheck')) {\n                setChecked(cBoxInput, false);\n            }\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function (checkstate) {\n        var visibleCols = this.parent.getVisibleColumns();\n        for (var i = 0; i < visibleCols.length; i++) {\n            var columnUID = visibleCols[parseInt(i.toString(), 10)].uid;\n            if (this.prevShowedCols.indexOf(columnUID) === -1 && visibleCols[parseInt(i.toString(), 10)].type !== 'checkbox') {\n                this.prevShowedCols.push(columnUID);\n            }\n        }\n        for (var i = 0; i < this.hideColumn.length; i++) {\n            var index = this.prevShowedCols.indexOf(this.hideColumn[parseInt(i.toString(), 10)]);\n            if (index !== -1) {\n                this.prevShowedCols.splice(index, 1);\n            }\n        }\n        var selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n        if (this.infiniteRenderMode) {\n            selected = this.infiniteLoadedElement.filter(function (arr) { return arr.querySelector('.e-uncheck'); }).length;\n        }\n        var btn;\n        if (!this.parent.enableAdaptiveUI) {\n            btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n            btn.disabled = false;\n        }\n        else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n            this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: false });\n        }\n        var sreachShowColumns = [];\n        var searchData = [].slice.call(document.getElementsByClassName('e-cc-chbox'));\n        for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n            var element = searchData[parseInt(i.toString(), 10)];\n            if (this.infiniteRenderMode && element.classList.contains('e-selectall')) {\n                continue;\n            }\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            sreachShowColumns.push(columnUID);\n        }\n        var hideColumns = this.showColumn.filter(function (column) { return sreachShowColumns.indexOf(column) !== -1; });\n        if ((this.infiniteRenderMode && (checkstate || sreachShowColumns.length === selected)) ||\n            (!this.infiniteRenderMode && selected === 0 && hideColumns.length === 0)) {\n            if (!this.parent.enableAdaptiveUI) {\n                btn.disabled = true;\n            }\n            else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n                this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: true });\n            }\n        }\n        if (!this.parent.enableAdaptiveUI) {\n            btn.dataBind();\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (chooserColumns) {\n        this.ulElement = this.parent.createElement('ul', { className: 'e-ccul-ele e-cc' });\n        var selectAllValue = this.l10n.getConstant('SelectAll');\n        var columnChooserList = this.parent.createElement('li', { className: 'e-cclist e-cc e-cc-selectall',\n            'styles': this.infiniteRenderMode ? 'list-style:None' : ''\n        });\n        var selectAll = this.createCheckBox(selectAllValue, false, this.parent.element.id + '-selectAll');\n        if (chooserColumns.length) {\n            selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            this.checkState(selectAll.querySelector('.e-icons'), true);\n            columnChooserList.appendChild(selectAll);\n            if (this.infiniteRenderMode) {\n                if (this.mainDiv.querySelector('.e-cc-contentdiv') && !this.mainDiv.querySelector('.e-cc-selectall')) {\n                    this.infiniteDiv = this.mainDiv.querySelector('.e-cc-contentdiv');\n                    this.mainDiv.insertBefore(columnChooserList, this.infiniteDiv);\n                    this.infiniteDiv.classList.add('e-checkbox-infinitescroll');\n                    EventHandler.add(this.infiniteDiv, 'scroll', this.infiniteScrollHandler, this);\n                    EventHandler.add(this.infiniteDiv, 'mouseup', this.infiniteScrollMouseKeyUpHandler, this);\n                    EventHandler.add(this.infiniteDiv, 'mousedown', this.infiniteScrollMouseKeyDownHandler, this);\n                }\n            }\n            else {\n                this.ulElement.appendChild(columnChooserList);\n            }\n        }\n        if (this.parent.cssClass) {\n            if (this.parent.cssClass.indexOf(' ') !== -1) {\n                addClass([selectAll], this.parent.cssClass.split(' '));\n            }\n            else {\n                addClass([selectAll], [this.parent.cssClass]);\n            }\n        }\n        if (this.infiniteRenderMode && chooserColumns.length > (this.itemsCount * 3)) {\n            this.infiniteSkipCount = this.itemsCount * 2;\n        }\n        this.renderCheckbox(chooserColumns.slice(0, this.infiniteRenderMode ? this.itemsCount * 3 : chooserColumns.length));\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.infiniteScrollMouseKeyDownHandler = function () {\n        EventHandler.remove(this.infiniteDiv, 'scroll', this.infiniteScrollHandler);\n    };\n    ColumnChooser.prototype.infiniteScrollMouseKeyUpHandler = function (e) {\n        var _this = this;\n        EventHandler.add(this.infiniteDiv, 'scroll', this.infiniteScrollHandler, this);\n        var target = this.infiniteDiv;\n        if (this.ulElement.children.length > 1 && (target.scrollTop >= target.scrollHeight - target.offsetHeight ||\n            target.scrollTop <= 0)) {\n            this.infiniteScrollHandler();\n        }\n        Global.timer = setTimeout(function () { _this.clickHandler(e); Global.timer = null; }, 0);\n    };\n    ColumnChooser.prototype.infiniteScrollHandler = function () {\n        var target = this.infiniteDiv;\n        var columns = this.searchValue && this.searchValue.length ? this.filterColumns : this.infiniteColumns;\n        if (target.scrollTop >= target.scrollHeight - target.offsetHeight\n            && this.infiniteLoadedElement.length <= (this.infiniteSkipCount + this.itemsCount)\n            && this.ulElement.children.length === this.itemsCount * 3\n            && (!columns.length || columns.length > (this.infiniteSkipCount + this.itemsCount))) {\n            var diffcount = columns.length - (this.infiniteSkipCount + this.itemsCount);\n            var count = 0;\n            if (diffcount < this.itemsCount) {\n                count = diffcount;\n            }\n            infiniteRemoveElements(([].slice.call(this.ulElement.children)).splice(0, this.itemsCount));\n            this.infiniteInitialLoad = true;\n            this.infiniteSkipCount += this.itemsCount;\n            this.renderCheckbox(columns.slice(this.infiniteSkipCount, this.infiniteSkipCount + (count + this.itemsCount)));\n            this.prevInfiniteScrollDirection = 'down';\n        }\n        else if (target.scrollTop >= target.scrollHeight - target.offsetHeight && this.infiniteLoadedElement.length > (this.infiniteSkipCount + this.itemsCount) && this.ulElement.children.length === this.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.ulElement.children)).splice(0, this.itemsCount));\n            this.infiniteSkipCount += this.prevInfiniteScrollDirection === 'down' ? this.itemsCount :\n                (this.itemsCount * 3);\n            appendChildren(this.ulElement, this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.itemsCount +\n                this.infiniteSkipCount));\n            this.prevInfiniteScrollDirection = 'down';\n        }\n        else if (target.scrollTop === 0 && !this.infiniteInitialLoad && this.infiniteSkipCount\n            && this.infiniteLoadedElement.length && this.infiniteLoadedElement.length > this.itemsCount * 3\n            && this.ulElement.children.length === this.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.ulElement.children)).splice(this.itemsCount * 2, this.itemsCount));\n            this.infiniteSkipCount -= this.prevInfiniteScrollDirection === 'up' ? this.itemsCount : this.itemsCount * 3;\n            infiniteAppendElements([].slice.call(this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.infiniteSkipCount +\n                this.itemsCount)), this.ulElement);\n            this.prevInfiniteScrollDirection = 'up';\n            this.infiniteDiv.scrollTop = this.infiniteScrollAppendDiff;\n        }\n        else if (target.scrollTop === 0 && !this.infiniteInitialLoad && this.infiniteSkipCount &&\n            (this.infiniteSkipCount > this.itemsCount * 2) && this.infiniteLoadedElement.length &&\n            this.ulElement.children.length < this.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.ulElement.children)).splice((this.itemsCount * 2), columns.length % this.itemsCount));\n            this.infiniteSkipCount = (Math.floor(columns.length / this.itemsCount) - 3) *\n                this.itemsCount;\n            infiniteAppendElements([].slice.call(this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.infiniteSkipCount +\n                this.itemsCount)), this.ulElement);\n            this.infiniteDiv.scrollTop = this.infiniteScrollAppendDiff;\n            this.prevInfiniteScrollDirection = 'up';\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        var gridObject = this.parent;\n        var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n        for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n            var element = currentCheckBoxColls[parseInt(i.toString(), 10)];\n            var columnUID = void 0;\n            if (this.parent.childGrid || this.parent.detailTemplate) {\n                columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[parseInt(i.toString(), 10)], 'e-ccheck').getAttribute('uid');\n            }\n            else {\n                columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            }\n            var column = gridObject.getColumnByUid(columnUID, this.infiniteRenderMode);\n            var uncheck = [].slice.call(element.parentElement.getElementsByClassName('e-uncheck'));\n            if (column.visible && !uncheck.length) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        if (state) {\n            classList(element, ['e-check'], ['e-uncheck']);\n        }\n        else {\n            classList(element, ['e-uncheck'], ['e-check']);\n        }\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        if (!this.parent.enableAdaptiveUI && this.parent.enableRtl && !cbox.classList.contains('e-rtl')) {\n            cbox.classList.add('e-rtl');\n        }\n        var cboxLabel = cbox.querySelector('.e-label');\n        var inputcbox = cbox.querySelector('input');\n        setChecked(inputcbox, checked);\n        cboxLabel.setAttribute('id', uid + 'label');\n        cboxLabel.innerHTML = label;\n        inputcbox.setAttribute('aria-labelledby', cboxLabel.id);\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (columns) {\n        var _a;\n        var checkBoxItems = this.parent.createElement('div');\n        var offsetHeight = this.ulElement.offsetHeight;\n        for (var i = 0; i < columns.length; i++) {\n            var column = columns[parseInt(i.toString(), 10)];\n            if (column.showInColumnChooser) {\n                var columnChooserList = this.parent.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n                var hideColumnState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n                var showColumnState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n                var columnchooserccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColumnState) || showColumnState, column.uid);\n                columnChooserList.appendChild(columnchooserccheckboxlist);\n                if (this.parent.cssClass) {\n                    if (this.parent.cssClass.indexOf(' ') !== -1) {\n                        addClass([columnchooserccheckboxlist], this.parent.cssClass.split(' '));\n                    }\n                    else {\n                        addClass([columnchooserccheckboxlist], [this.parent.cssClass]);\n                    }\n                }\n                if (this.infiniteRenderMode && this.infiniteDiv) {\n                    columnChooserList.style.height = getListHeight(this.infiniteDiv, true) + 'px';\n                }\n                checkBoxItems.appendChild(columnChooserList);\n            }\n        }\n        if (this.infiniteRenderMode && this.infiniteInitialLoad) {\n            (_a = this.infiniteLoadedElement).push.apply(_a, [].slice.call(checkBoxItems.children));\n            this.infiniteInitialLoad = false;\n        }\n        appendChildren(this.ulElement, [].slice.call(checkBoxItems.children));\n        if (this.infiniteRenderMode && !this.infiniteScrollAppendDiff) {\n            this.infiniteScrollAppendDiff = this.ulElement.offsetHeight - offsetHeight;\n        }\n        if (this.isInitialOpen) {\n            this.updateIntermediateBtn();\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n        this.dlgDiv.querySelector('.e-cc-cancel').setAttribute('title', this.l10n.getConstant('Clear'));\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').setAttribute('title', this.l10n.getConstant('Search'));\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n        if (this.parent.enableAdaptiveUI) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.add('e-input-focus');\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    ColumnChooser.prototype.hideOpenedDialog = function () {\n        var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n            return dlgEle.classList.contains('e-popup-open');\n        });\n        for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n            if (this.parent.element.id + '_ccdlg' !== openCC[parseInt(i.toString(), 10)].id || openCC[parseInt(i.toString(), 10)].classList.contains('e-dialog')) {\n                openCC[parseInt(i.toString(), 10)].ej2_instances[0].hide();\n            }\n        }\n    };\n    ColumnChooser.prototype.beforeOpenColumnChooserEvent = function () {\n        var args1 = {\n            requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n            columns: this.getColumns(), cancel: false,\n            searchOperator: this.parent.columnChooserSettings.operator\n        };\n        this.parent.trigger(events.beforeOpenColumnChooser, args1);\n        this.searchOperator = args1.searchOperator;\n        return args1;\n    };\n    ColumnChooser.prototype.renderResponsiveChangeAction = function (args) {\n        this.responsiveDialogRenderer.action = args.action;\n    };\n    /**\n     * To show the responsive custom sort dialog\n     *\n     * @param {boolean} enable - specifes dialog open\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.showCustomColumnChooser = function (enable) {\n        this.responsiveDialogRenderer.isCustomDialog = enable;\n        this.responsiveDialogRenderer.showResponsiveDialog();\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}