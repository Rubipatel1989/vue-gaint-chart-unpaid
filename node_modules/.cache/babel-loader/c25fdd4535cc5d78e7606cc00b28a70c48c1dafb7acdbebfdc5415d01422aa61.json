{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport * as events from '../base/constant';\nimport { detach, addClass, isNullOrUndefined as isNOU, removeClass, closest, createElement, EventHandler, getComponent } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { TextBox } from '@syncfusion/ej2-inputs';\nvar EmojiPicker = /** @class */function () {\n  function EmojiPicker(parent, serviceLocator) {\n    this.parent = parent;\n    this.locator = serviceLocator;\n    this.i10n = serviceLocator.getService('rteLocale');\n    this.renderFactory = this.locator.getService('rendererFactory');\n    this.addEventListener();\n    this.isDestroyed = false;\n    this.isPopupDestroyed = false;\n  }\n  /**\n   * Destroys the Count.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n  EmojiPicker.prototype.destroy = function () {\n    if (this.isDestroyed) {\n      return;\n    }\n    this.removeEventListener();\n    this.isDestroyed = true;\n  };\n  EmojiPicker.prototype.childDestroy = function () {\n    if (this.isPopupDestroyed) {\n      return;\n    }\n    if (this.popupObj && !this.popupObj.isDestroyed) {\n      if (this.popupObj.element && this.popupObj.element.querySelector('.e-rte-emoji-search')) {\n        var textBox = getComponent(this.popupObj.element.querySelector('.e-rte-emoji-search'), 'textbox');\n        if (textBox && !textBox.isDestroyed) {\n          textBox.destroy();\n        }\n      }\n      if (this.popupObj.element && this.popupObj.element.querySelector('.e-rte-emojipicker-toolbar')) {\n        var toolbar_1 = getComponent(this.popupObj.element.querySelector('.e-rte-emojipicker-toolbar'), 'toolbar');\n        if (toolbar_1 && !toolbar_1.isDestroyed) {\n          toolbar_1.destroy();\n        }\n      }\n      var closeIcon = this.popupObj.element.querySelector('.e-clear-icon');\n      if (!isNOU(closeIcon)) {\n        EventHandler.remove(closeIcon, 'mousedown', this.searchFilter);\n      }\n      this.popupObj.destroy();\n      this.isPopupDestroyed = true;\n    }\n    if (this.popDiv) {\n      EventHandler.remove(this.popDiv, 'keydown', this.onKeyDown);\n      EventHandler.remove(this.popDiv, 'keyup', this.searchFilter);\n      if (this.popDiv.querySelector('.e-rte-emojipicker-btn')) {\n        var btn = this.popDiv.querySelector('.e-rte-emojipicker-btn');\n        EventHandler.remove(btn, 'scroll', this.scrollEvent);\n        EventHandler.remove(btn, 'click', this.emojiBtnClick);\n      }\n    }\n  };\n  EmojiPicker.prototype.addEventListener = function () {\n    this.parent.on(events.emojiPicker, this.toolbarClick, this);\n    this.parent.on(events.docClick, this.docClick, this);\n    this.parent.on(events.keyDown, this.onkeyPress, this);\n    this.parent.on(events.keyUp, this.onkeyUp, this);\n    this.parent.on(events.contentscroll, this.contentscroll, this);\n    this.parent.on(events.scroll, this.contentscroll, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n  // eslint-disable-next-line\n  EmojiPicker.prototype.toolbarClick = function (args) {\n    var _this = this;\n    var _a, _b;\n    var spanElement;\n    if (!isNOU(this.parent.element.querySelector('.e-emoji'))) {\n      spanElement = this.parent.element.querySelector('.e-emoji');\n    } else if (this.parent.inlineMode.enable) {\n      spanElement = this.parent.element.ownerDocument.querySelector('.e-emoji');\n    }\n    this.divElement = spanElement.closest('div');\n    if (!this.parent.inputElement.contains(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).startContainer)) {\n      this.parent.contentModule.getEditPanel().focus();\n    }\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n    this.save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n    this.clickEvent = args.args;\n    var emojiPicker = this.parent.emojiPickerSettings.iconsSet;\n    if (this.popupObj) {\n      removeClass([this.divElement], 'e-active');\n      if (this.popupObj.element.querySelector('.e-rte-emoji-search') || !this.parent.emojiPickerSettings.showSearchBox) {\n        this.popupObj.hide();\n        return;\n      }\n      this.popupObj.hide();\n    }\n    this.popDiv = this.parent.createElement('div', {\n      className: 'e-rte-emojipicker-popup',\n      id: this.parent.getID() + '_emojiPicker'\n    });\n    if (!isNOU(this.parent.getToolbar()) && !this.parent.inlineMode.enable) {\n      this.parent.getToolbar().parentElement.appendChild(this.popDiv);\n    } else if (this.parent.inlineMode.enable) {\n      this.parent.rootContainer.appendChild(this.popDiv);\n    }\n    EventHandler.add(this.popDiv, 'keydown', this.onKeyDown, this);\n    EventHandler.add(this.popDiv, 'keyup', this.searchFilter, this);\n    var extendEle = this.parent.element.querySelector('.e-toolbar-extended');\n    var zIndex;\n    if (!isNOU(extendEle)) {\n      var computedStyle = window.getComputedStyle(extendEle);\n      zIndex = computedStyle.getPropertyValue('z-index');\n    } else {\n      zIndex = '10001';\n    }\n    var target;\n    var xValue;\n    var yValue;\n    if (!isNOU(args.args) && !this.parent.inlineMode.enable && isNOU(this.parent.quickToolbarSettings.text)) {\n      target = args.args.originalEvent.target;\n      target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n      xValue = 'left';\n      yValue = 'bottom';\n    } else if (isNOU(args.x) && isNOU(args.y) && !this.parent.inlineMode.enable && isNOU(this.parent.quickToolbarSettings.text)) {\n      target = this.parent.inputElement;\n      if (this.parent.contentModule.getDocument().getSelection().rangeCount > 0) {\n        var coordinates = this.getCoordinates();\n        xValue = coordinates.left;\n        yValue = coordinates.top;\n      }\n    } else if (isNOU(args.x) && isNOU(args.y) && (this.parent.inlineMode.enable || !isNOU(this.parent.quickToolbarSettings.text))) {\n      this.parent.notify(events.hidePopup, {});\n      if (this.parent.contentModule.getDocument().getSelection().rangeCount > 0) {\n        var coordinates = this.getCoordinates();\n        xValue = coordinates.left;\n        yValue = coordinates.top;\n      }\n    } else {\n      target = this.parent.inputElement;\n      xValue = args.x;\n      yValue = args.y;\n    }\n    this.popupObj = new Popup(this.popDiv, {\n      targetType: 'relative',\n      relateTo: target,\n      collision: {\n        X: 'fit',\n        Y: 'none'\n      },\n      offsetY: 8,\n      viewPortElement: this.parent.element,\n      position: {\n        X: xValue,\n        Y: yValue\n      },\n      enableRtl: this.parent.enableRtl,\n      zIndex: parseInt(zIndex, 10) + 1,\n      actionOnScroll: 'hide',\n      close: function () {\n        _this.parent.isBlur = false;\n        _this.childDestroy();\n        detach(_this.popupObj.element);\n        _this.popupObj = null;\n      }\n    });\n    this.isPopupDestroyed = false;\n    addClass([this.popupObj.element], 'e-popup-open');\n    this.popupObj.refreshPosition(target);\n    // header search element\n    if ((!isNOU(args.args) || isNOU(args.x) && isNOU(args.y)) && this.parent.emojiPickerSettings.showSearchBox) {\n      var inputEle = createElement('input', {\n        id: 'e-rte-emoji-search',\n        className: 'e-rte-emoji-search'\n      });\n      this.popDiv.append(inputEle);\n      var inputobj = new TextBox({\n        placeholder: this.i10n.getConstant('emojiPickerTypeToFind'),\n        showClearButton: true\n      });\n      inputobj.appendTo(inputEle);\n      inputEle.focus();\n    }\n    var closeIcon = this.popupObj.element.querySelector('.e-clear-icon');\n    if (!isNOU(closeIcon)) {\n      EventHandler.add(closeIcon, 'mousedown', this.searchFilter, this);\n    }\n    // Header emoji toolbar div\n    var emojiToolBar = this.parent.createElement('div', {\n      className: 'e-rte-emojipicker-toolbar'\n    });\n    this.popDiv.appendChild(emojiToolBar);\n    var pushToolBar = [];\n    for (var i = 0; i < this.parent.emojiPickerSettings.iconsSet.length; i++) {\n      if (!isNOU(this.parent.emojiPickerSettings.iconsSet[i].iconCss)) {\n        pushToolBar.push({\n          prefixIcon: this.parent.emojiPickerSettings.iconsSet[i].iconCss,\n          htmlAttributes: (_a = {}, _a['title'] = this.parent.emojiPickerSettings.iconsSet[i].name, _a)\n        });\n      } else {\n        pushToolBar.push({\n          text: '&#x' + this.parent.emojiPickerSettings.iconsSet[i].code + ';',\n          htmlAttributes: (_b = {}, _b['title'] = this.parent.emojiPickerSettings.iconsSet[i].name, _b)\n        });\n      }\n    }\n    var toolbarObj = new Toolbar({\n      items: pushToolBar,\n      clicked: this.emojiToolbarClick.bind(this)\n    });\n    toolbarObj.appendTo(emojiToolBar);\n    // emoji btn div\n    var emojiBtnDiv = this.parent.createElement('div', {\n      className: 'e-rte-emojipicker-btn'\n    });\n    this.popDiv.appendChild(emojiBtnDiv);\n    var height;\n    var popupBorder = window.getComputedStyle(this.popDiv);\n    if (isNOU(args.args) && !(isNOU(args.x) && isNOU(args.y)) || !this.parent.emojiPickerSettings.showSearchBox) {\n      height = this.popDiv.getBoundingClientRect().height - emojiToolBar.getBoundingClientRect().height - 2 * parseFloat(popupBorder.borderWidth) + 'px';\n      emojiBtnDiv.style.setProperty('height', height, 'important');\n    } else {\n      var inputELe = this.parent.element.querySelector('.e-rte-emoji-search').parentElement;\n      var getComputedStyle_1 = window.getComputedStyle(inputELe);\n      height = this.popDiv.getBoundingClientRect().height - emojiToolBar.getBoundingClientRect().height - inputELe.getBoundingClientRect().height - parseFloat(getComputedStyle_1.marginTop) - parseFloat(getComputedStyle_1.marginBottom) - 2 * parseFloat(popupBorder.borderWidth) + 'px';\n      emojiBtnDiv.style.setProperty('height', height, 'important');\n    }\n    for (var i = 0; i < emojiPicker.length; i++) {\n      var emojiGroupDiv = this.parent.createElement('div', {\n        className: 'e-rte-emojipicker-group'\n      });\n      emojiBtnDiv.appendChild(emojiGroupDiv);\n      var emojiName = this.parent.createElement('div', {\n        className: 'e-rte-emojipicker-name'\n      });\n      emojiName.innerText = this.parent.emojiPickerSettings.iconsSet[i].name;\n      emojiName.setAttribute('aria-label', this.parent.emojiPickerSettings.iconsSet[i].name);\n      emojiGroupDiv.appendChild(emojiName);\n      var emojiBtn = this.parent.createElement('div', {\n        className: 'e-rte-emojipickerbtn-group'\n      });\n      emojiGroupDiv.appendChild(emojiBtn);\n      for (var j = 0; j < emojiPicker[i].icons.length; j++) {\n        var button = this.parent.createElement('button', {\n          className: 'e-btn ' + ' ' + 'e-control'\n        });\n        button.innerHTML = this.buttoncode(this.parent.emojiPickerSettings.iconsSet[i].icons[j].code);\n        button.setAttribute('aria-label', this.parent.emojiPickerSettings.iconsSet[i].icons[j].desc);\n        button.setAttribute('title', this.parent.emojiPickerSettings.iconsSet[i].icons[j].desc);\n        emojiBtn.appendChild(button);\n        if (button.innerHTML.length > 2) {\n          button.style.fontSize = '17px';\n        }\n      }\n    }\n    EventHandler.add(emojiBtnDiv, 'scroll', this.scrollEvent, this);\n    EventHandler.add(emojiBtnDiv, 'click', this.emojiBtnClick, this);\n    var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n    if (isNOU(this.parent.element.querySelector('.e-rte-emoji-search')) && !isNOU(args.args)) {\n      emojiButtons[0].focus();\n      addClass([emojiButtons[0]], 'e-focus');\n    }\n    var popup = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n    var toolbarName = this.parent.element.querySelectorAll('.e-rte-emojipicker-toolbar button');\n    var scrollTop;\n    if (!isNOU(popup)) {\n      scrollTop = Math.round(popup.scrollTop);\n    }\n    if (scrollTop < toolbarName[0].offsetHeight) {\n      addClass([toolbarName[0]], 'e-selected');\n    }\n    if (this.popupObj) {\n      addClass([this.divElement], 'e-active');\n    }\n  };\n  EmojiPicker.prototype.buttoncode = function (value) {\n    var valueLength = value.split('-');\n    // eslint-disable-next-line\n    var joinedEmoji = valueLength.map(function (cp) {\n      return String.fromCodePoint(parseInt(cp, 16));\n    }).join('\\u200D');\n    return joinedEmoji;\n  };\n  EmojiPicker.prototype.docClick = function (e) {\n    var target = e.args.target;\n    if (target && target.classList && this.popupObj && !closest(target, '[id=' + '\\'' + this.popupObj.element.id + '\\'' + ']') && !target.classList.contains('e-emoji') && !target.classList.contains('e-toolbar-item')) {\n      if (this.popupObj) {\n        removeClass([this.divElement], 'e-active');\n        this.popupObj.hide();\n      }\n    }\n  };\n  EmojiPicker.prototype.scrollEvent = function () {\n    var popup = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n    var emojiSet = this.parent.element.querySelectorAll('.e-rte-emojipicker-group');\n    var toolbarName = this.parent.element.querySelectorAll('.e-rte-emojipicker-toolbar button');\n    var scrollTop;\n    if (!isNOU(popup)) {\n      scrollTop = Math.round(popup.scrollTop);\n    }\n    var firstSetWidth = 0;\n    for (var j = 0; j < toolbarName.length; j++) {\n      if (scrollTop < toolbarName[0].offsetHeight) {\n        if (!isNOU(toolbarName[j + 1])) {\n          removeClass([toolbarName[j + 1]], 'e-selected');\n        }\n        addClass([toolbarName[0]], 'e-selected');\n      }\n    }\n    for (var i = 0; i < emojiSet.length; i++) {\n      firstSetWidth += Math.round(emojiSet[i].offsetHeight);\n      if (scrollTop >= firstSetWidth) {\n        for (var k = 0; k < toolbarName.length; k++) {\n          if (toolbarName[k].classList.contains('e-selected')) {\n            removeClass([toolbarName[k]], 'e-selected');\n          }\n          /* eslint-enable */\n        }\n        if (!isNOU(toolbarName[i + 1])) {\n          addClass([toolbarName[i + 1]], 'e-selected');\n        }\n      }\n    }\n  };\n  EmojiPicker.prototype.contentscroll = function () {\n    if (isNOU(this.clickEvent) && this.popupObj) {\n      removeClass([this.divElement], 'e-active');\n      this.popupObj.hide();\n      return;\n    }\n  };\n  EmojiPicker.prototype.emojiToolbarClick = function (e) {\n    var args = {\n      // eslint-disable-next-line\n      text: e.item.htmlAttributes.title\n    };\n    var currentEleName = args.text;\n    var emojiGroups = this.parent.element.querySelectorAll('.e-rte-emojipicker-group');\n    var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n    var toolbarName = this.parent.element.querySelectorAll('.e-rte-emojipicker-toolbar button');\n    for (var i = 0; i < toolbarName.length; i++) {\n      if (toolbarName[i].classList.contains('e-selected')) {\n        removeClass([toolbarName[i]], 'e-selected');\n      }\n      /* eslint-enable */\n    }\n    for (var i = 0; i < emojiButtons.length; i++) {\n      if (emojiButtons[i].classList.contains('e-focus')) {\n        removeClass([emojiButtons[i]], 'e-focus');\n      }\n    }\n    // Loop through the selected elements and perform the same operation on each element\n    var emojiGroupsheight = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n    var emojiHeight = 0;\n    // eslint-disable-next-line\n    emojiGroups.forEach(function (group) {\n      var childNodes = group.childNodes[0];\n      var focusBtn = group.childNodes[1].childNodes[0];\n      var ariaLabel = childNodes.getAttribute('aria-label');\n      if (currentEleName === ariaLabel) {\n        if (childNodes) {\n          emojiGroupsheight.scrollTop = emojiHeight + 10;\n          addClass([focusBtn], 'e-focus');\n          focusBtn.focus();\n        }\n      } else {\n        emojiHeight += group.scrollHeight;\n        removeClass([focusBtn], 'e-focus');\n      }\n    });\n  };\n  EmojiPicker.prototype.onKeyDown = function (e) {\n    // Select all emoji buttons\n    var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n    var emojiGroups = this.parent.element.querySelectorAll('.e-rte-emojipickerbtn-group');\n    var searchKeyHandler = this.parent.element.querySelector('.e-rte-emojisearch-btn button');\n    if (e.keyCode === 27) {\n      if (this.popupObj) {\n        removeClass([this.divElement], 'e-active');\n        this.popupObj.hide();\n      }\n    }\n    if (e.keyCode === 13) {\n      var activeEle = document.activeElement;\n      if (activeEle.classList.contains('e-btn')) {\n        this.emojiBtnClick(e);\n        e.preventDefault();\n      }\n    }\n    var srcElement = e.srcElement;\n    if (!isNOU(srcElement)) {\n      if (srcElement.classList.contains('e-rte-emoji-search') && e.keyCode === 40) {\n        for (var i = 0; i < emojiButtons.length; i++) {\n          if (emojiButtons[i].classList.contains('e-focus')) {\n            removeClass([emojiButtons[i]], 'e-focus');\n          }\n        }\n      }\n    }\n    if (!isNOU(searchKeyHandler)) {\n      this.filterKeyHandler(e);\n    } else {\n      for (var i = 0; i < emojiButtons.length; i++) {\n        var focusIndex = i;\n        if (emojiButtons[i].classList.contains('e-focus')) {\n          if (e.keyCode === 40) {\n            // Move focus to next row if there is one\n            if (emojiButtons.length - 4 > i) {\n              var count = 0;\n              for (var j = 0; j < emojiGroups.length; j++) {\n                for (var k = 0; k < emojiGroups[j].childNodes.length; k++) {\n                  // eslint-disable-next-line\n                  var childNodes = emojiGroups[j].childNodes[k];\n                  if (childNodes.classList.contains('e-focus') && count !== 1) {\n                    var currentIndex = k;\n                    var lastChild = emojiGroups[j].lastChild;\n                    var lastRowIndex = Math.floor(k % 6);\n                    var lastEleLength = emojiGroups[j].childNodes.length - 1;\n                    var lastEleIndex = Math.floor(lastEleLength % 6);\n                    if (currentIndex !== -1) {\n                      var nextRowIndex = currentIndex + 6;\n                      if (!isNOU(emojiGroups[j].childNodes[nextRowIndex])) {\n                        // next row has six buttons\n                        // handle focus change here\n                        var firstFocusEle = emojiButtons[i];\n                        removeClass([firstFocusEle], 'e-focus');\n                        var focusEle = emojiButtons[focusIndex += 6];\n                        addClass([focusEle], 'e-focus');\n                        focusEle.focus();\n                        break;\n                      } else if (isNOU(emojiGroups[j].childNodes[nextRowIndex]) && !lastChild.classList.contains('e-focus') && lastEleIndex < lastRowIndex) {\n                        var firstFocusEle = emojiButtons[i];\n                        removeClass([firstFocusEle], 'e-focus');\n                        var focusEle = emojiGroups[j].lastChild;\n                        addClass([focusEle], 'e-focus');\n                        focusEle.focus();\n                        count = 1;\n                        break;\n                      } else {\n                        var firstFocusEle = emojiButtons[i];\n                        removeClass([firstFocusEle], 'e-focus');\n                        var focusEle = emojiGroups[j + 1].childNodes[lastRowIndex];\n                        addClass([focusEle], 'e-focus');\n                        focusEle.focus();\n                        count = 1;\n                        break;\n                      }\n                    }\n                  }\n                }\n              }\n              break;\n            }\n          } else if (e.keyCode === 38) {\n            // Move focus to previous row if there is one\n            if (i >= 6) {\n              var count = 0;\n              for (var j = 0; j < emojiGroups.length; j++) {\n                for (var k = 0; k < emojiGroups[j].childNodes.length; k++) {\n                  var childNodes = emojiGroups[j].childNodes[k];\n                  if (childNodes.classList.contains('e-focus') && count !== 1) {\n                    // eslint-disable-next-line\n                    var currentIndex = k;\n                    var previousRowLength = isNOU(emojiGroups[j - 1]) ? null : emojiGroups[j - 1].childNodes.length % 6 || 6;\n                    if (currentIndex !== -1) {\n                      var previousRowIndex = currentIndex - 6;\n                      if (!isNOU(emojiGroups[j].childNodes[previousRowIndex])) {\n                        // previous row has six buttons\n                        // handle focus change here\n                        var firstFocusEle = emojiButtons[i];\n                        removeClass([firstFocusEle], 'e-focus');\n                        var focusEle = emojiButtons[focusIndex -= 6];\n                        addClass([focusEle], 'e-focus');\n                        focusEle.focus();\n                        break;\n                      } else if (isNOU(emojiGroups[j - 1].childNodes[emojiGroups[j - 1].childNodes.length - (previousRowLength - k)])) {\n                        var firstFocusEle = emojiButtons[i];\n                        removeClass([firstFocusEle], 'e-focus');\n                        var focusEle = emojiGroups[j - 1].lastChild;\n                        addClass([focusEle], 'e-focus');\n                        focusEle.focus();\n                        count = 1;\n                        break;\n                      } else {\n                        // previous row has less than six buttons\n                        // handle focus change here\n                        var firstFocusEle = emojiButtons[i];\n                        removeClass([firstFocusEle], 'e-focus');\n                        var focusEle = emojiGroups[j - 1].childNodes[emojiGroups[j - 1].childNodes.length - (previousRowLength - k)];\n                        addClass([focusEle], 'e-focus');\n                        focusEle.focus();\n                        count = 1;\n                        break;\n                      }\n                    }\n                  }\n                }\n              }\n            } else {\n              var firstFocusEle = emojiButtons[i];\n              removeClass([firstFocusEle], 'e-focus');\n              var focusEle = emojiButtons[focusIndex -= 1];\n              var inputELe = this.popupObj.element.querySelector('.e-rte-emoji-search');\n              if (isNOU(focusEle) && !isNOU(inputELe)) {\n                inputELe.focus();\n                break;\n              }\n              addClass([focusEle], 'e-focus');\n              focusEle.focus();\n            }\n            break;\n          } else if (e.keyCode === 39) {\n            // Move focus to next button in current row\n            if (emojiButtons.length !== i + 1) {\n              var firstFocusEle = emojiButtons[i];\n              removeClass([firstFocusEle], 'e-focus');\n              var focusEle = emojiButtons[focusIndex += 1];\n              addClass([focusEle], 'e-focus');\n              emojiButtons[focusIndex].focus();\n            }\n            break;\n          } else if (e.keyCode === 37) {\n            // Move focus to previous button in current row\n            if (i > 0) {\n              var firstFocusEle = emojiButtons[i];\n              removeClass([firstFocusEle], 'e-focus');\n              var focusEle = emojiButtons[focusIndex -= 1];\n              addClass([focusEle], 'e-focus');\n              emojiButtons[focusIndex].focus();\n            }\n            break;\n          }\n        }\n      }\n    }\n    if (e.keyCode === 40) {\n      var firstFocusEle = this.parent.element.querySelector('.e-focus');\n      if (isNOU(firstFocusEle)) {\n        var focusEle = emojiButtons[0];\n        addClass([focusEle], 'e-focus');\n        emojiButtons[0].focus();\n      }\n    }\n  };\n  EmojiPicker.prototype.filterKeyHandler = function (e) {\n    var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojisearch-btn button');\n    var firstFocusEle = this.parent.element.querySelector('.e-focus');\n    if (isNOU(firstFocusEle) && e.keyCode === 40) {\n      var focusEle = emojiButtons[0];\n      addClass([focusEle], 'e-focus');\n      emojiButtons[0].focus();\n    } else {\n      for (var i = 0; i < emojiButtons.length; i++) {\n        var focusIndex = i;\n        var childNodes = emojiButtons[i];\n        if (childNodes.classList.contains('e-focus')) {\n          if (e.keyCode === 38) {\n            if (i >= 6) {\n              var firstFocusEle_1 = emojiButtons[i];\n              removeClass([firstFocusEle_1], 'e-focus');\n              var focusEle = emojiButtons[focusIndex -= 6];\n              addClass([focusEle], 'e-focus');\n              focusEle.focus();\n              break;\n            } else {\n              var firstFocusEle_2 = emojiButtons[i];\n              removeClass([firstFocusEle_2], 'e-focus');\n              var focusEle = emojiButtons[focusIndex -= 1];\n              var inputELe = this.popupObj.element.querySelector('.e-rte-emoji-search');\n              if (isNOU(focusEle) && !isNOU(inputELe)) {\n                inputELe.focus();\n                break;\n              }\n              addClass([focusEle], 'e-focus');\n              focusEle.focus();\n            }\n          } else if (e.keyCode === 40) {\n            if (emojiButtons.length - 6 > i) {\n              var firstFocusEle_3 = emojiButtons[i];\n              removeClass([firstFocusEle_3], 'e-focus');\n              var focusEle = emojiButtons[focusIndex += 6];\n              addClass([focusEle], 'e-focus');\n              focusEle.focus();\n              break;\n            }\n          } else if (e.keyCode === 39) {\n            if (emojiButtons.length !== i + 1) {\n              var firstFocusEle_4 = emojiButtons[i];\n              removeClass([firstFocusEle_4], 'e-focus');\n              var focusEle = emojiButtons[focusIndex += 1];\n              addClass([focusEle], 'e-focus');\n              emojiButtons[focusIndex].focus();\n            }\n            break;\n          } else if (e.keyCode === 37) {\n            if (i > 0) {\n              var firstFocusEle_5 = emojiButtons[i];\n              removeClass([firstFocusEle_5], 'e-focus');\n              var focusEle = emojiButtons[focusIndex -= 1];\n              addClass([focusEle], 'e-focus');\n              emojiButtons[focusIndex].focus();\n              break;\n            }\n          }\n        }\n      }\n    }\n  };\n  EmojiPicker.prototype.searchFilter = function (e, value) {\n    var inputElement = this.parent.element.querySelector('.e-rte-emoji-search');\n    var contentELe = this.parent.element.querySelector('.e-content');\n    if (document.activeElement === inputElement || document.activeElement === contentELe) {\n      var trimmedStr = void 0;\n      if (value !== ':' && !isNOU(value)) {\n        trimmedStr = value.replace(/^:/, '');\n      } else if (!isNOU(value)) {\n        trimmedStr = value;\n      }\n      var inputValue = isNOU(inputElement) ? trimmedStr : inputElement.value;\n      var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n      var emojipickerAll = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n      var emojiGroups = this.parent.element.querySelectorAll('.e-rte-emojipicker-group');\n      var toolbarGroup = this.parent.element.querySelector('.e-rte-emojipicker-toolbar');\n      var excludedDiv_1 = this.parent.element.querySelector('.e-rte-emojisearch-btn');\n      var firstChild = this.popDiv.childNodes[0];\n      var getComputedStyle_2 = window.getComputedStyle(firstChild);\n      var inputHeight = firstChild.nodeName === 'SPAN' ? firstChild.getBoundingClientRect().height + parseFloat(getComputedStyle_2.marginTop) + parseFloat(getComputedStyle_2.marginBottom) : 0;\n      var popupBorder = window.getComputedStyle(this.popDiv);\n      // eslint-disable-next-line @typescript-eslint/tslint/config\n      var filteredButtons = isNOU(excludedDiv_1) ? emojiButtons :\n      // eslint-disable-next-line @typescript-eslint/tslint/config\n      Array.from(emojiButtons).filter(function (button) {\n        return !excludedDiv_1.contains(button);\n      });\n      if (inputValue === '' || value === ':') {\n        toolbarGroup.style.display = '';\n        emojipickerAll.style.height = this.popDiv.getBoundingClientRect().height - toolbarGroup.getBoundingClientRect().height - inputHeight - 2 * parseFloat(popupBorder.borderWidth) + 'px';\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        emojiGroups.forEach(function (element) {\n          element.style.display = '';\n        });\n      } else {\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        emojiGroups.forEach(function (element) {\n          element.style.display = 'none';\n        });\n        toolbarGroup.style.display = 'none';\n        emojipickerAll.style.height = this.popDiv.getBoundingClientRect().height - inputHeight - 2 * parseFloat(popupBorder.borderWidth) + 'px';\n      }\n      var emojiBtnDiv = this.parent.createElement('div', {\n        className: 'e-rte-emojisearch-btn'\n      });\n      var emojis = this.parent.element.querySelector('.e-rte-emojisearch-btn');\n      if (emojis) {\n        emojis.remove();\n      }\n      var noEmojiObj = this.parent.createElement('div', {\n        className: 'e-rte-emojiSearch-noEmoji'\n      });\n      var noEMoji = true;\n      for (var i = 0; i < filteredButtons.length; i++) {\n        if (!isNOU(filteredButtons[i].getAttribute('title'))) {\n          var title = filteredButtons[i].getAttribute('title').toLowerCase();\n          var titleLength = title.split(' ');\n          for (var j = 0; j < titleLength.length; j++) {\n            if (titleLength[j].startsWith(inputValue.toLowerCase()) && inputValue !== '') {\n              var emoji = filteredButtons[i].cloneNode(true);\n              emojiBtnDiv.appendChild(emoji);\n              noEMoji = false;\n              break;\n            }\n          }\n        }\n      }\n      if (noEMoji && !this.parent.element.querySelector('.e-rte-emojiSearch-noEmoji') && inputValue !== '' && value !== ':' && value !== ': :') {\n        noEmojiObj.innerHTML = '<span style=\"color: rgba(0, 0, 0, 0.75); font-weight: 500; font-size: 16px;\">' + this.i10n.getConstant('emojiPickerNoResultFound') + ' 😥 </span>' + '<br>' + '<span style=\"color: rgba(0, 0, 0, 0.75);\"> ' + this.i10n.getConstant('emojiPickerTrySomethingElse') + ' ? </span>';\n        noEmojiObj.style.margin = '55px';\n        emojipickerAll.appendChild(noEmojiObj);\n      } else if (!noEMoji && this.parent.element.querySelector('.e-rte-emojiSearch-noEmoji') || inputValue === '' && value === ':' || inputValue === '' && this.parent.element.querySelector('.e-rte-emojiSearch-noEmoji')) {\n        emojipickerAll.removeChild(this.parent.element.querySelector('.e-rte-emojiSearch-noEmoji'));\n      }\n      emojipickerAll.appendChild(emojiBtnDiv);\n    } else {\n      return;\n    }\n  };\n  EmojiPicker.prototype.emojiBtnClick = function (e) {\n    var event = new MouseEvent('mouseleave', {\n      bubbles: true,\n      cancelable: true\n    });\n    // Includes the emote button element tooltip and toolbar tooltip\n    var emotePickerTooltips = this.parent.element.querySelectorAll('.e-rte-emojipicker-popup [data-tooltip-id]');\n    for (var i = 0; i < emotePickerTooltips.length; i++) {\n      emotePickerTooltips[i].dispatchEvent(event);\n    }\n    var targetEle = e.target;\n    if (targetEle.tagName !== 'BUTTON') {\n      return;\n    }\n    targetEle.focus();\n    var startOffset = this.save.startOffset;\n    var textContent = this.save.range.startContainer.textContent;\n    var previousText = textContent.substring(startOffset, startOffset + 1);\n    // When toolbar action is clicked then only restore the range.\n    if (!isNOU(this.clickEvent) || previousText !== ':') {\n      this.save.restore();\n    }\n    if (this.popupObj) {\n      removeClass([this.divElement], 'e-active');\n      this.popupObj.hide();\n    }\n    var originalEvent = e;\n    this.parent.formatter.process(this.parent, {\n      item: {\n        'command': 'EmojiPicker',\n        'subCommand': 'EmojiPicker',\n        value: targetEle.innerHTML\n      }\n    }, e, originalEvent);\n  };\n  EmojiPicker.prototype.onkeyPress = function (e) {\n    var originalEvent = e.args;\n    var selection = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().contentWindow.getSelection() : this.parent.contentModule.getDocument().getSelection();\n    if (selection.rangeCount <= 0) {\n      return;\n    }\n    var range = selection.getRangeAt(0);\n    var cursorPos = range.startOffset;\n    var prevChar = selection.focusNode.textContent.substring(cursorPos - 1, cursorPos);\n    var isPrevSpace = /\\s/.test(prevChar);\n    var isPrevColon = selection.focusNode.textContent.substring(cursorPos - 1, cursorPos) === ':';\n    var colon = selection.focusNode.textContent.charAt(cursorPos - 1) === ':';\n    if (originalEvent.keyCode === 186 && originalEvent.shiftKey && (isPrevSpace || selection.focusOffset === 0)) {\n      var coordinates = this.getCoordinates();\n      this.parent.showEmojiPicker(coordinates.left, coordinates.top);\n    }\n    if (originalEvent.keyCode === 8 && colon && this.popupObj) {\n      removeClass([this.divElement], 'e-active');\n      this.popupObj.hide();\n    }\n    if (originalEvent.keyCode === 32 && isPrevColon && this.popupObj) {\n      removeClass([this.divElement], 'e-active');\n      var currentDocument = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().ownerDocument : this.parent.contentModule.getDocument();\n      if (this.parent.showTooltip && !isNOU(currentDocument.querySelector('.e-tooltip-wrap'))) {\n        this.parent.notify(events.destroyTooltip, {\n          args: event\n        });\n      }\n      this.popupObj.hide();\n    }\n    if (this.popupObj && (originalEvent.keyCode === 37 || originalEvent.keyCode === 38 || originalEvent.keyCode === 39 || originalEvent.keyCode === 27 || originalEvent.keyCode === 40)) {\n      this.onKeyDown(originalEvent);\n      originalEvent.preventDefault();\n    }\n  };\n  EmojiPicker.prototype.onkeyUp = function (e) {\n    var originalEvent = e.args;\n    var selection = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().contentWindow.getSelection() : this.parent.contentModule.getDocument().getSelection();\n    if (selection.rangeCount <= 0) {\n      return;\n    }\n    var range = selection.getRangeAt(0);\n    var cursorPos = range.startOffset;\n    // eslint-disable-next-line\n    var selectedValue;\n    var count = 0;\n    for (var i = cursorPos - 1; i >= cursorPos - 15; i--) {\n      var prevChar = selection.focusNode.textContent.substring(i - 1, i);\n      var isPrevSpace = /:$/.test(prevChar);\n      if (isPrevSpace && !isNOU(this.popDiv) && count === 0) {\n        selectedValue = range.startContainer.textContent.substring(i - 1, cursorPos);\n        this.searchFilter(originalEvent, selectedValue);\n        count = 1;\n      }\n    }\n    var colon = selection.focusNode.textContent.substring(cursorPos - 1, cursorPos);\n    if (colon === ':' && !isNOU(this.popupObj)) {\n      selectedValue = colon;\n      this.searchFilter(originalEvent, selectedValue);\n    }\n  };\n  EmojiPicker.prototype.getCoordinates = function () {\n    var coordinates;\n    var selection = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().contentWindow.getSelection() : window.getSelection();\n    var range = selection.getRangeAt(0);\n    var firstChild;\n    if (range.startContainer.nodeName === 'P' || range.startContainer.nodeName === 'DIV') {\n      if (range.startContainer.childNodes[0].nodeName !== '#text') {\n        firstChild = range.startContainer.childNodes[0];\n      }\n    }\n    // eslint-disable-next-line\n    var rect = isNOU(firstChild) ? range.getBoundingClientRect() : firstChild.getBoundingClientRect();\n    var rteContent = this.parent.element.querySelector('.e-rte-content');\n    var rteEle = this.parent.element;\n    var toolbarHeight = rteEle.offsetHeight - rteContent.offsetHeight;\n    var cursorTop = rect.top - this.parent.inputElement.getBoundingClientRect().top;\n    var cursorLeft = rect.left - this.parent.inputElement.getBoundingClientRect().left;\n    var screenHeight = window.innerHeight;\n    var popupHeight = 330;\n    var popupTop = cursorTop;\n    var popupLeft = cursorLeft + rect.width;\n    if (rteEle.getBoundingClientRect().top < 0 && !this.parent.inlineMode.enable) {\n      popupTop = popupTop + rteContent.getBoundingClientRect().top - toolbarHeight;\n    }\n    if (rect.top < popupHeight) {\n      // eslint-disable-next-line\n      popupTop = popupTop;\n    } else if (rect.top + popupHeight > screenHeight) {\n      popupTop -= popupHeight + 20;\n    }\n    if (this.parent.inputElement) {\n      coordinates = {\n        top: popupTop + 60,\n        left: popupLeft + 8\n      };\n    }\n    return coordinates;\n  };\n  EmojiPicker.prototype.removeEventListener = function () {\n    this.parent.off(events.emojiPicker, this.toolbarClick);\n    this.parent.off(events.docClick, this.docClick);\n    this.parent.off(events.keyDown, this.onkeyPress);\n    this.parent.off(events.keyUp, this.onkeyUp);\n    this.parent.off(events.contentscroll, this.contentscroll);\n    this.parent.off(events.scroll, this.contentscroll);\n    this.parent.off(events.destroy, this.destroy);\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns the string value\n   */\n  EmojiPicker.prototype.getModuleName = function () {\n    return 'emojiPicker';\n  };\n  return EmojiPicker;\n}();\nexport { EmojiPicker };","map":{"version":3,"names":["events","detach","addClass","isNullOrUndefined","isNOU","removeClass","closest","createElement","EventHandler","getComponent","Popup","Toolbar","TextBox","EmojiPicker","parent","serviceLocator","locator","i10n","getService","renderFactory","addEventListener","isDestroyed","isPopupDestroyed","prototype","destroy","removeEventListener","childDestroy","popupObj","element","querySelector","textBox","toolbar_1","closeIcon","remove","searchFilter","popDiv","onKeyDown","btn","scrollEvent","emojiBtnClick","on","emojiPicker","toolbarClick","docClick","keyDown","onkeyPress","keyUp","onkeyUp","contentscroll","scroll","args","_this","_a","_b","spanElement","inlineMode","enable","ownerDocument","divElement","inputElement","contains","formatter","editorManager","nodeSelection","getRange","contentModule","getDocument","startContainer","getEditPanel","focus","range","save","clickEvent","emojiPickerSettings","iconsSet","showSearchBox","hide","className","id","getID","getToolbar","parentElement","appendChild","rootContainer","add","extendEle","zIndex","computedStyle","window","getComputedStyle","getPropertyValue","target","xValue","yValue","quickToolbarSettings","text","originalEvent","classList","firstChild","x","y","getSelection","rangeCount","coordinates","getCoordinates","left","top","notify","hidePopup","targetType","relateTo","collision","X","Y","offsetY","viewPortElement","position","enableRtl","parseInt","actionOnScroll","close","isBlur","refreshPosition","inputEle","append","inputobj","placeholder","getConstant","showClearButton","appendTo","emojiToolBar","pushToolBar","i","length","iconCss","push","prefixIcon","htmlAttributes","name","code","toolbarObj","items","clicked","emojiToolbarClick","bind","emojiBtnDiv","height","popupBorder","getBoundingClientRect","parseFloat","borderWidth","style","setProperty","inputELe","getComputedStyle_1","marginTop","marginBottom","emojiGroupDiv","emojiName","innerText","setAttribute","emojiBtn","j","icons","button","innerHTML","buttoncode","desc","fontSize","emojiButtons","querySelectorAll","popup","toolbarName","scrollTop","Math","round","offsetHeight","value","valueLength","split","joinedEmoji","map","cp","String","fromCodePoint","join","e","emojiSet","firstSetWidth","k","item","title","currentEleName","emojiGroups","emojiGroupsheight","emojiHeight","forEach","group","childNodes","focusBtn","ariaLabel","getAttribute","scrollHeight","searchKeyHandler","keyCode","activeEle","document","activeElement","preventDefault","srcElement","filterKeyHandler","focusIndex","count","currentIndex","lastChild","lastRowIndex","floor","lastEleLength","lastEleIndex","nextRowIndex","firstFocusEle","focusEle","previousRowLength","previousRowIndex","firstFocusEle_1","firstFocusEle_2","firstFocusEle_3","firstFocusEle_4","firstFocusEle_5","contentELe","trimmedStr","replace","inputValue","emojipickerAll","toolbarGroup","excludedDiv_1","getComputedStyle_2","inputHeight","nodeName","filteredButtons","Array","from","filter","display","emojis","noEmojiObj","noEMoji","toLowerCase","titleLength","startsWith","emoji","cloneNode","margin","removeChild","event","MouseEvent","bubbles","cancelable","emotePickerTooltips","dispatchEvent","targetEle","tagName","startOffset","textContent","previousText","substring","restore","process","selection","iframeSettings","getPanel","contentWindow","getRangeAt","cursorPos","prevChar","focusNode","isPrevSpace","test","isPrevColon","colon","charAt","shiftKey","focusOffset","showEmojiPicker","currentDocument","showTooltip","destroyTooltip","selectedValue","rect","rteContent","rteEle","toolbarHeight","cursorTop","cursorLeft","screenHeight","innerHeight","popupHeight","popupTop","popupLeft","width","off","getModuleName"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/emoji-picker.js"],"sourcesContent":["import * as events from '../base/constant';\nimport { detach, addClass, isNullOrUndefined as isNOU, removeClass, closest, createElement, EventHandler, getComponent } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { TextBox } from '@syncfusion/ej2-inputs';\nvar EmojiPicker = /** @class */ (function () {\n    function EmojiPicker(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n        this.isDestroyed = false;\n        this.isPopupDestroyed = false;\n    }\n    /**\n     * Destroys the Count.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    EmojiPicker.prototype.destroy = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        this.isDestroyed = true;\n    };\n    EmojiPicker.prototype.childDestroy = function () {\n        if (this.isPopupDestroyed) {\n            return;\n        }\n        if (this.popupObj && !this.popupObj.isDestroyed) {\n            if (this.popupObj.element && this.popupObj.element.querySelector('.e-rte-emoji-search')) {\n                var textBox = getComponent(this.popupObj.element.querySelector('.e-rte-emoji-search'), 'textbox');\n                if (textBox && !textBox.isDestroyed) {\n                    textBox.destroy();\n                }\n            }\n            if (this.popupObj.element && this.popupObj.element.querySelector('.e-rte-emojipicker-toolbar')) {\n                var toolbar_1 = getComponent(this.popupObj.element.querySelector('.e-rte-emojipicker-toolbar'), 'toolbar');\n                if (toolbar_1 && !toolbar_1.isDestroyed) {\n                    toolbar_1.destroy();\n                }\n            }\n            var closeIcon = this.popupObj.element.querySelector('.e-clear-icon');\n            if (!isNOU(closeIcon)) {\n                EventHandler.remove(closeIcon, 'mousedown', this.searchFilter);\n            }\n            this.popupObj.destroy();\n            this.isPopupDestroyed = true;\n        }\n        if (this.popDiv) {\n            EventHandler.remove(this.popDiv, 'keydown', this.onKeyDown);\n            EventHandler.remove(this.popDiv, 'keyup', this.searchFilter);\n            if (this.popDiv.querySelector('.e-rte-emojipicker-btn')) {\n                var btn = this.popDiv.querySelector('.e-rte-emojipicker-btn');\n                EventHandler.remove(btn, 'scroll', this.scrollEvent);\n                EventHandler.remove(btn, 'click', this.emojiBtnClick);\n            }\n        }\n    };\n    EmojiPicker.prototype.addEventListener = function () {\n        this.parent.on(events.emojiPicker, this.toolbarClick, this);\n        this.parent.on(events.docClick, this.docClick, this);\n        this.parent.on(events.keyDown, this.onkeyPress, this);\n        this.parent.on(events.keyUp, this.onkeyUp, this);\n        this.parent.on(events.contentscroll, this.contentscroll, this);\n        this.parent.on(events.scroll, this.contentscroll, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    // eslint-disable-next-line\n    EmojiPicker.prototype.toolbarClick = function (args) {\n        var _this = this;\n        var _a, _b;\n        var spanElement;\n        if (!isNOU(this.parent.element.querySelector('.e-emoji'))) {\n            spanElement = this.parent.element.querySelector('.e-emoji');\n        }\n        else if (this.parent.inlineMode.enable) {\n            spanElement = this.parent.element.ownerDocument.querySelector('.e-emoji');\n        }\n        this.divElement = spanElement.closest('div');\n        if (!(this.parent.inputElement.contains(this.parent.formatter.editorManager.nodeSelection.\n            getRange(this.parent.contentModule.getDocument()).startContainer))) {\n            this.parent.contentModule.getEditPanel().focus();\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        this.save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n        this.clickEvent = args.args;\n        var emojiPicker = this.parent.emojiPickerSettings.iconsSet;\n        if (this.popupObj) {\n            removeClass([this.divElement], 'e-active');\n            if (this.popupObj.element.querySelector('.e-rte-emoji-search') || !this.parent.emojiPickerSettings.showSearchBox) {\n                this.popupObj.hide();\n                return;\n            }\n            this.popupObj.hide();\n        }\n        this.popDiv = this.parent.createElement('div', { className: 'e-rte-emojipicker-popup', id: this.parent.getID() + '_emojiPicker' });\n        if (!isNOU(this.parent.getToolbar()) && !this.parent.inlineMode.enable) {\n            this.parent.getToolbar().parentElement.appendChild(this.popDiv);\n        }\n        else if (this.parent.inlineMode.enable) {\n            this.parent.rootContainer.appendChild(this.popDiv);\n        }\n        EventHandler.add(this.popDiv, 'keydown', this.onKeyDown, this);\n        EventHandler.add(this.popDiv, 'keyup', this.searchFilter, this);\n        var extendEle = this.parent.element.querySelector('.e-toolbar-extended');\n        var zIndex;\n        if (!isNOU(extendEle)) {\n            var computedStyle = window.getComputedStyle(extendEle);\n            zIndex = computedStyle.getPropertyValue('z-index');\n        }\n        else {\n            zIndex = '10001';\n        }\n        var target;\n        var xValue;\n        var yValue;\n        if (!isNOU(args.args) && !this.parent.inlineMode.enable &&\n            isNOU(this.parent.quickToolbarSettings.text)) {\n            target = args.args.originalEvent.target;\n            target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n            xValue = 'left';\n            yValue = 'bottom';\n        }\n        else if (isNOU(args.x) && isNOU(args.y) && !this.parent.inlineMode.enable && isNOU(this.parent.quickToolbarSettings.text)) {\n            target = this.parent.inputElement;\n            if (this.parent.contentModule.getDocument().getSelection().rangeCount > 0) {\n                var coordinates = this.getCoordinates();\n                xValue = coordinates.left;\n                yValue = coordinates.top;\n            }\n        }\n        else if (isNOU(args.x) && isNOU(args.y) && (this.parent.inlineMode.enable || !isNOU(this.parent.quickToolbarSettings.text))) {\n            this.parent.notify(events.hidePopup, {});\n            if (this.parent.contentModule.getDocument().getSelection().rangeCount > 0) {\n                var coordinates = this.getCoordinates();\n                xValue = coordinates.left;\n                yValue = coordinates.top;\n            }\n        }\n        else {\n            target = this.parent.inputElement;\n            xValue = args.x;\n            yValue = args.y;\n        }\n        this.popupObj = new Popup(this.popDiv, {\n            targetType: 'relative',\n            relateTo: target,\n            collision: { X: 'fit', Y: 'none' },\n            offsetY: 8,\n            viewPortElement: this.parent.element,\n            position: { X: xValue, Y: yValue },\n            enableRtl: this.parent.enableRtl,\n            zIndex: parseInt(zIndex, 10) + 1,\n            actionOnScroll: 'hide',\n            close: function () {\n                _this.parent.isBlur = false;\n                _this.childDestroy();\n                detach(_this.popupObj.element);\n                _this.popupObj = null;\n            }\n        });\n        this.isPopupDestroyed = false;\n        addClass([this.popupObj.element], 'e-popup-open');\n        this.popupObj.refreshPosition(target);\n        // header search element\n        if ((!isNOU(args.args) || (isNOU(args.x) && isNOU(args.y))) &&\n            this.parent.emojiPickerSettings.showSearchBox) {\n            var inputEle = createElement('input', { id: 'e-rte-emoji-search', className: 'e-rte-emoji-search' });\n            this.popDiv.append(inputEle);\n            var inputobj = new TextBox({\n                placeholder: this.i10n.getConstant('emojiPickerTypeToFind'),\n                showClearButton: true\n            });\n            inputobj.appendTo(inputEle);\n            inputEle.focus();\n        }\n        var closeIcon = this.popupObj.element.querySelector('.e-clear-icon');\n        if (!isNOU(closeIcon)) {\n            EventHandler.add(closeIcon, 'mousedown', this.searchFilter, this);\n        }\n        // Header emoji toolbar div\n        var emojiToolBar = this.parent.createElement('div', { className: 'e-rte-emojipicker-toolbar' });\n        this.popDiv.appendChild(emojiToolBar);\n        var pushToolBar = [];\n        for (var i = 0; i < this.parent.emojiPickerSettings.iconsSet.length; i++) {\n            if (!isNOU(this.parent.emojiPickerSettings.iconsSet[i].iconCss)) {\n                pushToolBar.push({ prefixIcon: this.parent.emojiPickerSettings.iconsSet[i].iconCss, htmlAttributes: (_a = {}, _a['title'] = this.parent.emojiPickerSettings.iconsSet[i].name, _a) });\n            }\n            else {\n                pushToolBar.push({ text: '&#x' + this.parent.emojiPickerSettings.iconsSet[i].code + ';', htmlAttributes: (_b = {}, _b['title'] = this.parent.emojiPickerSettings.iconsSet[i].name, _b) });\n            }\n        }\n        var toolbarObj = new Toolbar({\n            items: pushToolBar,\n            clicked: this.emojiToolbarClick.bind(this)\n        });\n        toolbarObj.appendTo(emojiToolBar);\n        // emoji btn div\n        var emojiBtnDiv = this.parent.createElement('div', { className: 'e-rte-emojipicker-btn' });\n        this.popDiv.appendChild(emojiBtnDiv);\n        var height;\n        var popupBorder = window.getComputedStyle(this.popDiv);\n        if ((isNOU(args.args) && !(isNOU(args.x) && isNOU(args.y))) ||\n            !this.parent.emojiPickerSettings.showSearchBox) {\n            height = (this.popDiv.getBoundingClientRect().height - emojiToolBar.getBoundingClientRect().height - (2 * parseFloat(popupBorder.borderWidth))) + 'px';\n            emojiBtnDiv.style.setProperty('height', height, 'important');\n        }\n        else {\n            var inputELe = this.parent.element.querySelector('.e-rte-emoji-search').parentElement;\n            var getComputedStyle_1 = window.getComputedStyle(inputELe);\n            height = (this.popDiv.getBoundingClientRect().height - emojiToolBar.getBoundingClientRect().height\n                - inputELe.getBoundingClientRect().height\n                - parseFloat(getComputedStyle_1.marginTop) - parseFloat(getComputedStyle_1.marginBottom)\n                - (2 * parseFloat(popupBorder.borderWidth))) + 'px';\n            emojiBtnDiv.style.setProperty('height', height, 'important');\n        }\n        for (var i = 0; i < emojiPicker.length; i++) {\n            var emojiGroupDiv = this.parent.createElement('div', { className: 'e-rte-emojipicker-group' });\n            emojiBtnDiv.appendChild(emojiGroupDiv);\n            var emojiName = this.parent.createElement('div', { className: 'e-rte-emojipicker-name' });\n            emojiName.innerText = this.parent.emojiPickerSettings.iconsSet[i].name;\n            emojiName.setAttribute('aria-label', this.parent.emojiPickerSettings.iconsSet[i].name);\n            emojiGroupDiv.appendChild(emojiName);\n            var emojiBtn = this.parent.createElement('div', { className: 'e-rte-emojipickerbtn-group' });\n            emojiGroupDiv.appendChild(emojiBtn);\n            for (var j = 0; j < emojiPicker[i].icons.length; j++) {\n                var button = this.parent.createElement('button', { className: 'e-btn ' + ' ' + 'e-control' });\n                button.innerHTML = this.buttoncode(this.parent.emojiPickerSettings.iconsSet[i].icons[j].code);\n                button.setAttribute('aria-label', (this.parent.emojiPickerSettings.iconsSet[i].icons[j].desc));\n                button.setAttribute('title', (this.parent.emojiPickerSettings.iconsSet[i].icons[j].desc));\n                emojiBtn.appendChild(button);\n                if (button.innerHTML.length > 2) {\n                    button.style.fontSize = '17px';\n                }\n            }\n        }\n        EventHandler.add(emojiBtnDiv, 'scroll', this.scrollEvent, this);\n        EventHandler.add(emojiBtnDiv, 'click', this.emojiBtnClick, this);\n        var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n        if (isNOU(this.parent.element.querySelector('.e-rte-emoji-search')) && !isNOU(args.args)) {\n            emojiButtons[0].focus();\n            addClass([emojiButtons[0]], 'e-focus');\n        }\n        var popup = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n        var toolbarName = this.parent.element.querySelectorAll('.e-rte-emojipicker-toolbar button');\n        var scrollTop;\n        if (!isNOU(popup)) {\n            scrollTop = Math.round(popup.scrollTop);\n        }\n        if (scrollTop < toolbarName[0].offsetHeight) {\n            addClass([toolbarName[0]], 'e-selected');\n        }\n        if (this.popupObj) {\n            addClass([this.divElement], 'e-active');\n        }\n    };\n    EmojiPicker.prototype.buttoncode = function (value) {\n        var valueLength = value.split('-');\n        // eslint-disable-next-line\n        var joinedEmoji = valueLength.map(function (cp) { return String.fromCodePoint(parseInt(cp, 16)); }).join('\\u200D');\n        return joinedEmoji;\n    };\n    EmojiPicker.prototype.docClick = function (e) {\n        var target = e.args.target;\n        if (target && target.classList && ((this.popupObj && !closest(target, '[id=' + '\\'' + this.popupObj.element.id + '\\'' + ']')))\n            && (!target.classList.contains('e-emoji') && !target.classList.contains('e-toolbar-item'))) {\n            if (this.popupObj) {\n                removeClass([this.divElement], 'e-active');\n                this.popupObj.hide();\n            }\n        }\n    };\n    EmojiPicker.prototype.scrollEvent = function () {\n        var popup = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n        var emojiSet = this.parent.element.querySelectorAll('.e-rte-emojipicker-group');\n        var toolbarName = this.parent.element.querySelectorAll('.e-rte-emojipicker-toolbar button');\n        var scrollTop;\n        if (!isNOU(popup)) {\n            scrollTop = Math.round(popup.scrollTop);\n        }\n        var firstSetWidth = 0;\n        for (var j = 0; j < toolbarName.length; j++) {\n            if (scrollTop < toolbarName[0].offsetHeight) {\n                if (!isNOU(toolbarName[j + 1])) {\n                    removeClass([toolbarName[j + 1]], 'e-selected');\n                }\n                addClass([toolbarName[0]], 'e-selected');\n            }\n        }\n        for (var i = 0; i < emojiSet.length; i++) {\n            firstSetWidth += Math.round(emojiSet[i].offsetHeight);\n            if (scrollTop >= firstSetWidth) {\n                for (var k = 0; k < toolbarName.length; k++) {\n                    if (toolbarName[k].classList.contains('e-selected')) {\n                        removeClass([toolbarName[k]], 'e-selected');\n                    }\n                    /* eslint-enable */\n                }\n                if (!isNOU(toolbarName[i + 1])) {\n                    addClass([toolbarName[i + 1]], 'e-selected');\n                }\n            }\n        }\n    };\n    EmojiPicker.prototype.contentscroll = function () {\n        if (isNOU(this.clickEvent) && this.popupObj) {\n            removeClass([this.divElement], 'e-active');\n            this.popupObj.hide();\n            return;\n        }\n    };\n    EmojiPicker.prototype.emojiToolbarClick = function (e) {\n        var args = {\n            // eslint-disable-next-line\n            text: e.item.htmlAttributes.title,\n        };\n        var currentEleName = args.text;\n        var emojiGroups = this.parent.element.querySelectorAll('.e-rte-emojipicker-group');\n        var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n        var toolbarName = this.parent.element.querySelectorAll('.e-rte-emojipicker-toolbar button');\n        for (var i = 0; i < toolbarName.length; i++) {\n            if (toolbarName[i].classList.contains('e-selected')) {\n                removeClass([toolbarName[i]], 'e-selected');\n            }\n            /* eslint-enable */\n        }\n        for (var i = 0; i < emojiButtons.length; i++) {\n            if (emojiButtons[i].classList.contains('e-focus')) {\n                removeClass([emojiButtons[i]], 'e-focus');\n            }\n        }\n        // Loop through the selected elements and perform the same operation on each element\n        var emojiGroupsheight = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n        var emojiHeight = 0;\n        // eslint-disable-next-line\n        emojiGroups.forEach(function (group) {\n            var childNodes = group.childNodes[0];\n            var focusBtn = group.childNodes[1].childNodes[0];\n            var ariaLabel = childNodes.getAttribute('aria-label');\n            if (currentEleName === ariaLabel) {\n                if (childNodes) {\n                    emojiGroupsheight.scrollTop = emojiHeight + 10;\n                    addClass([focusBtn], 'e-focus');\n                    focusBtn.focus();\n                }\n            }\n            else {\n                emojiHeight += group.scrollHeight;\n                removeClass([focusBtn], 'e-focus');\n            }\n        });\n    };\n    EmojiPicker.prototype.onKeyDown = function (e) {\n        // Select all emoji buttons\n        var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n        var emojiGroups = this.parent.element.querySelectorAll('.e-rte-emojipickerbtn-group');\n        var searchKeyHandler = this.parent.element.querySelector('.e-rte-emojisearch-btn button');\n        if (e.keyCode === 27) {\n            if (this.popupObj) {\n                removeClass([this.divElement], 'e-active');\n                this.popupObj.hide();\n            }\n        }\n        if (e.keyCode === 13) {\n            var activeEle = document.activeElement;\n            if (activeEle.classList.contains('e-btn')) {\n                this.emojiBtnClick(e);\n                e.preventDefault();\n            }\n        }\n        var srcElement = e.srcElement;\n        if (!isNOU(srcElement)) {\n            if (srcElement.classList.contains('e-rte-emoji-search') && e.keyCode === 40) {\n                for (var i = 0; i < emojiButtons.length; i++) {\n                    if (emojiButtons[i].classList.contains('e-focus')) {\n                        removeClass([emojiButtons[i]], 'e-focus');\n                    }\n                }\n            }\n        }\n        if (!isNOU(searchKeyHandler)) {\n            this.filterKeyHandler(e);\n        }\n        else {\n            for (var i = 0; i < emojiButtons.length; i++) {\n                var focusIndex = i;\n                if (emojiButtons[i].classList.contains('e-focus')) {\n                    if (e.keyCode === 40) {\n                        // Move focus to next row if there is one\n                        if (emojiButtons.length - 4 > i) {\n                            var count = 0;\n                            for (var j = 0; j < emojiGroups.length; j++) {\n                                for (var k = 0; k < emojiGroups[j].childNodes.length; k++) {\n                                    // eslint-disable-next-line\n                                    var childNodes = emojiGroups[j].childNodes[k];\n                                    if (childNodes.classList.contains('e-focus') && count !== 1) {\n                                        var currentIndex = k;\n                                        var lastChild = emojiGroups[j].lastChild;\n                                        var lastRowIndex = Math.floor((k) % 6);\n                                        var lastEleLength = emojiGroups[j].childNodes.length - 1;\n                                        var lastEleIndex = Math.floor((lastEleLength) % 6);\n                                        if (currentIndex !== -1) {\n                                            var nextRowIndex = currentIndex + 6;\n                                            if (!isNOU(emojiGroups[j].childNodes[nextRowIndex])) {\n                                                // next row has six buttons\n                                                // handle focus change here\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiButtons[focusIndex += 6];\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                break;\n                                            }\n                                            else if (isNOU(emojiGroups[j].childNodes[nextRowIndex]) && !lastChild.classList.contains('e-focus') && lastEleIndex < lastRowIndex) {\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiGroups[j].lastChild;\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                count = 1;\n                                                break;\n                                            }\n                                            else {\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiGroups[j + 1]\n                                                    .childNodes[lastRowIndex];\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                count = 1;\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            break;\n                        }\n                    }\n                    else if (e.keyCode === 38) {\n                        // Move focus to previous row if there is one\n                        if (i >= 6) {\n                            var count = 0;\n                            for (var j = 0; j < emojiGroups.length; j++) {\n                                for (var k = 0; k < emojiGroups[j].childNodes.length; k++) {\n                                    var childNodes = emojiGroups[j].childNodes[k];\n                                    if (childNodes.classList.contains('e-focus') && count !== 1) {\n                                        // eslint-disable-next-line\n                                        var currentIndex = k;\n                                        var previousRowLength = isNOU(emojiGroups[j - 1]) ? null :\n                                            emojiGroups[j - 1].childNodes.length % 6 || 6;\n                                        if (currentIndex !== -1) {\n                                            var previousRowIndex = currentIndex - 6;\n                                            if (!isNOU(emojiGroups[j].childNodes[previousRowIndex])) {\n                                                // previous row has six buttons\n                                                // handle focus change here\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiButtons[focusIndex -= 6];\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                break;\n                                            }\n                                            else if (isNOU(emojiGroups[j - 1].childNodes[emojiGroups[j - 1]\n                                                .childNodes.length - (previousRowLength - k)])) {\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiGroups[j - 1].lastChild;\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                count = 1;\n                                                break;\n                                            }\n                                            else {\n                                                // previous row has less than six buttons\n                                                // handle focus change here\n                                                var firstFocusEle = emojiButtons[i];\n                                                removeClass([firstFocusEle], 'e-focus');\n                                                var focusEle = emojiGroups[j - 1].childNodes[emojiGroups[j - 1].\n                                                    childNodes.length - (previousRowLength - k)];\n                                                addClass([focusEle], 'e-focus');\n                                                focusEle.focus();\n                                                count = 1;\n                                                break;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            var firstFocusEle = emojiButtons[i];\n                            removeClass([firstFocusEle], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex -= 1];\n                            var inputELe = this.popupObj.element.querySelector('.e-rte-emoji-search');\n                            if (isNOU(focusEle) && !isNOU(inputELe)) {\n                                inputELe.focus();\n                                break;\n                            }\n                            addClass([focusEle], 'e-focus');\n                            focusEle.focus();\n                        }\n                        break;\n                    }\n                    else if (e.keyCode === 39) {\n                        // Move focus to next button in current row\n                        if (emojiButtons.length !== i + 1) {\n                            var firstFocusEle = emojiButtons[i];\n                            removeClass([firstFocusEle], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex += 1];\n                            addClass([focusEle], 'e-focus');\n                            emojiButtons[focusIndex].focus();\n                        }\n                        break;\n                    }\n                    else if (e.keyCode === 37) {\n                        // Move focus to previous button in current row\n                        if (i > 0) {\n                            var firstFocusEle = emojiButtons[i];\n                            removeClass([firstFocusEle], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex -= 1];\n                            addClass([focusEle], 'e-focus');\n                            emojiButtons[focusIndex].focus();\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n        if (e.keyCode === 40) {\n            var firstFocusEle = this.parent.element.querySelector('.e-focus');\n            if (isNOU(firstFocusEle)) {\n                var focusEle = emojiButtons[0];\n                addClass([focusEle], 'e-focus');\n                emojiButtons[0].focus();\n            }\n        }\n    };\n    EmojiPicker.prototype.filterKeyHandler = function (e) {\n        var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojisearch-btn button');\n        var firstFocusEle = this.parent.element.querySelector('.e-focus');\n        if (isNOU(firstFocusEle) && e.keyCode === 40) {\n            var focusEle = emojiButtons[0];\n            addClass([focusEle], 'e-focus');\n            emojiButtons[0].focus();\n        }\n        else {\n            for (var i = 0; i < emojiButtons.length; i++) {\n                var focusIndex = i;\n                var childNodes = emojiButtons[i];\n                if (childNodes.classList.contains('e-focus')) {\n                    if (e.keyCode === 38) {\n                        if (i >= 6) {\n                            var firstFocusEle_1 = emojiButtons[i];\n                            removeClass([firstFocusEle_1], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex -= 6];\n                            addClass([focusEle], 'e-focus');\n                            focusEle.focus();\n                            break;\n                        }\n                        else {\n                            var firstFocusEle_2 = emojiButtons[i];\n                            removeClass([firstFocusEle_2], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex -= 1];\n                            var inputELe = this.popupObj.element.querySelector('.e-rte-emoji-search');\n                            if (isNOU(focusEle) && !isNOU(inputELe)) {\n                                inputELe.focus();\n                                break;\n                            }\n                            addClass([focusEle], 'e-focus');\n                            focusEle.focus();\n                        }\n                    }\n                    else if (e.keyCode === 40) {\n                        if (emojiButtons.length - 6 > i) {\n                            var firstFocusEle_3 = emojiButtons[i];\n                            removeClass([firstFocusEle_3], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex += 6];\n                            addClass([focusEle], 'e-focus');\n                            focusEle.focus();\n                            break;\n                        }\n                    }\n                    else if (e.keyCode === 39) {\n                        if (emojiButtons.length !== i + 1) {\n                            var firstFocusEle_4 = emojiButtons[i];\n                            removeClass([firstFocusEle_4], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex += 1];\n                            addClass([focusEle], 'e-focus');\n                            emojiButtons[focusIndex].focus();\n                        }\n                        break;\n                    }\n                    else if (e.keyCode === 37) {\n                        if (i > 0) {\n                            var firstFocusEle_5 = emojiButtons[i];\n                            removeClass([firstFocusEle_5], 'e-focus');\n                            var focusEle = emojiButtons[focusIndex -= 1];\n                            addClass([focusEle], 'e-focus');\n                            emojiButtons[focusIndex].focus();\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    EmojiPicker.prototype.searchFilter = function (e, value) {\n        var inputElement = this.parent.element.querySelector('.e-rte-emoji-search');\n        var contentELe = this.parent.element.querySelector('.e-content');\n        if (document.activeElement === inputElement || document.activeElement === contentELe) {\n            var trimmedStr = void 0;\n            if (value !== ':' && !isNOU(value)) {\n                trimmedStr = value.replace(/^:/, '');\n            }\n            else if (!isNOU(value)) {\n                trimmedStr = value;\n            }\n            var inputValue = isNOU(inputElement) ? trimmedStr : inputElement.value;\n            var emojiButtons = this.parent.element.querySelectorAll('.e-rte-emojipicker-btn button');\n            var emojipickerAll = this.parent.element.querySelector('.e-rte-emojipicker-btn');\n            var emojiGroups = this.parent.element.querySelectorAll('.e-rte-emojipicker-group');\n            var toolbarGroup = this.parent.element.querySelector('.e-rte-emojipicker-toolbar');\n            var excludedDiv_1 = this.parent.element.querySelector('.e-rte-emojisearch-btn');\n            var firstChild = this.popDiv.childNodes[0];\n            var getComputedStyle_2 = window.getComputedStyle(firstChild);\n            var inputHeight = firstChild.nodeName === 'SPAN' ? (firstChild.getBoundingClientRect().height + parseFloat(getComputedStyle_2.marginTop) +\n                parseFloat(getComputedStyle_2.marginBottom)) : 0;\n            var popupBorder = window.getComputedStyle(this.popDiv);\n            // eslint-disable-next-line @typescript-eslint/tslint/config\n            var filteredButtons = isNOU(excludedDiv_1) ? emojiButtons :\n                // eslint-disable-next-line @typescript-eslint/tslint/config\n                Array.from(emojiButtons).filter(function (button) { return !excludedDiv_1.contains(button); });\n            if (inputValue === '' || value === ':') {\n                toolbarGroup.style.display = '';\n                emojipickerAll.style.height = (this.popDiv.getBoundingClientRect().height - toolbarGroup.getBoundingClientRect().height - inputHeight - (2 * parseFloat(popupBorder.borderWidth))) + 'px';\n                // eslint-disable-next-line @typescript-eslint/tslint/config\n                emojiGroups.forEach(function (element) {\n                    element.style.display = '';\n                });\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/tslint/config\n                emojiGroups.forEach(function (element) {\n                    element.style.display = 'none';\n                });\n                toolbarGroup.style.display = 'none';\n                emojipickerAll.style.height = (this.popDiv.getBoundingClientRect().height - inputHeight - (2 * parseFloat(popupBorder.borderWidth))) + 'px';\n            }\n            var emojiBtnDiv = this.parent.createElement('div', { className: 'e-rte-emojisearch-btn' });\n            var emojis = this.parent.element.querySelector('.e-rte-emojisearch-btn');\n            if (emojis) {\n                emojis.remove();\n            }\n            var noEmojiObj = this.parent.createElement('div', { className: 'e-rte-emojiSearch-noEmoji' });\n            var noEMoji = true;\n            for (var i = 0; i < filteredButtons.length; i++) {\n                if (!isNOU(filteredButtons[i].getAttribute('title'))) {\n                    var title = filteredButtons[i].getAttribute('title').toLowerCase();\n                    var titleLength = title.split(' ');\n                    for (var j = 0; j < titleLength.length; j++) {\n                        if (titleLength[j].startsWith(inputValue.toLowerCase()) && inputValue !== '') {\n                            var emoji = filteredButtons[i].cloneNode(true);\n                            emojiBtnDiv.appendChild(emoji);\n                            noEMoji = false;\n                            break;\n                        }\n                    }\n                }\n            }\n            if (noEMoji && !this.parent.element.querySelector('.e-rte-emojiSearch-noEmoji') && (inputValue !== '' && value !== ':' && value !== ': :')) {\n                noEmojiObj.innerHTML = '<span style=\"color: rgba(0, 0, 0, 0.75); font-weight: 500; font-size: 16px;\">' + this.i10n.getConstant('emojiPickerNoResultFound') + ' 😥 </span>' + '<br>' + '<span style=\"color: rgba(0, 0, 0, 0.75);\"> ' + this.i10n.getConstant('emojiPickerTrySomethingElse') + ' ? </span>';\n                noEmojiObj.style.margin = '55px';\n                emojipickerAll.appendChild(noEmojiObj);\n            }\n            else if (!noEMoji && this.parent.element.querySelector('.e-rte-emojiSearch-noEmoji') || (inputValue === '' && value === ':') || (inputValue === '' && this.parent.element.querySelector('.e-rte-emojiSearch-noEmoji'))) {\n                emojipickerAll.removeChild(this.parent.element.querySelector('.e-rte-emojiSearch-noEmoji'));\n            }\n            emojipickerAll.appendChild(emojiBtnDiv);\n        }\n        else {\n            return;\n        }\n    };\n    EmojiPicker.prototype.emojiBtnClick = function (e) {\n        var event = new MouseEvent('mouseleave', { bubbles: true, cancelable: true });\n        // Includes the emote button element tooltip and toolbar tooltip\n        var emotePickerTooltips = this.parent.element.querySelectorAll('.e-rte-emojipicker-popup [data-tooltip-id]');\n        for (var i = 0; i < emotePickerTooltips.length; i++) {\n            emotePickerTooltips[i].dispatchEvent(event);\n        }\n        var targetEle = e.target;\n        if (targetEle.tagName !== 'BUTTON') {\n            return;\n        }\n        targetEle.focus();\n        var startOffset = this.save.startOffset;\n        var textContent = this.save.range.startContainer.textContent;\n        var previousText = textContent.substring(startOffset, startOffset + 1);\n        // When toolbar action is clicked then only restore the range.\n        if (!isNOU(this.clickEvent) || previousText !== ':') {\n            this.save.restore();\n        }\n        if (this.popupObj) {\n            removeClass([this.divElement], 'e-active');\n            this.popupObj.hide();\n        }\n        var originalEvent = e;\n        this.parent.formatter.process(this.parent, {\n            item: {\n                'command': 'EmojiPicker',\n                'subCommand': 'EmojiPicker',\n                value: targetEle.innerHTML\n            }\n        }, e, originalEvent);\n    };\n    EmojiPicker.prototype.onkeyPress = function (e) {\n        var originalEvent = e.args;\n        var selection = (this.parent.iframeSettings.enable) ?\n            this.parent.contentModule.getPanel().contentWindow.getSelection() :\n            this.parent.contentModule.getDocument().getSelection();\n        if (selection.rangeCount <= 0) {\n            return;\n        }\n        var range = selection.getRangeAt(0);\n        var cursorPos = range.startOffset;\n        var prevChar = selection.focusNode.textContent.substring(cursorPos - 1, cursorPos);\n        var isPrevSpace = /\\s/.test(prevChar);\n        var isPrevColon = selection.focusNode.textContent.substring(cursorPos - 1, cursorPos) === ':';\n        var colon = selection.focusNode.textContent.charAt(cursorPos - 1) === ':';\n        if (originalEvent.keyCode === 186 && originalEvent.shiftKey && (isPrevSpace || selection.focusOffset === 0)) {\n            var coordinates = this.getCoordinates();\n            this.parent.showEmojiPicker(coordinates.left, coordinates.top);\n        }\n        if (originalEvent.keyCode === 8 && colon && this.popupObj) {\n            removeClass([this.divElement], 'e-active');\n            this.popupObj.hide();\n        }\n        if (originalEvent.keyCode === 32 && isPrevColon && this.popupObj) {\n            removeClass([this.divElement], 'e-active');\n            var currentDocument = this.parent.iframeSettings.enable ? this.parent.contentModule.getPanel().ownerDocument :\n                this.parent.contentModule.getDocument();\n            if (this.parent.showTooltip && !isNOU(currentDocument.querySelector('.e-tooltip-wrap'))) {\n                this.parent.notify(events.destroyTooltip, { args: event });\n            }\n            this.popupObj.hide();\n        }\n        if (this.popupObj && (originalEvent.keyCode === 37 || originalEvent.keyCode === 38 || originalEvent.keyCode === 39\n            || originalEvent.keyCode === 27 || originalEvent.keyCode === 40)) {\n            this.onKeyDown(originalEvent);\n            originalEvent.preventDefault();\n        }\n    };\n    EmojiPicker.prototype.onkeyUp = function (e) {\n        var originalEvent = e.args;\n        var selection = (this.parent.iframeSettings.enable) ?\n            this.parent.contentModule.getPanel().contentWindow.getSelection() :\n            this.parent.contentModule.getDocument().getSelection();\n        if (selection.rangeCount <= 0) {\n            return;\n        }\n        var range = selection.getRangeAt(0);\n        var cursorPos = range.startOffset;\n        // eslint-disable-next-line\n        var selectedValue;\n        var count = 0;\n        for (var i = cursorPos - 1; i >= cursorPos - 15; i--) {\n            var prevChar = selection.focusNode.textContent.substring(i - 1, i);\n            var isPrevSpace = /:$/.test(prevChar);\n            if (isPrevSpace && !isNOU(this.popDiv) && count === 0) {\n                selectedValue = range.startContainer.textContent.substring(i - 1, cursorPos);\n                this.searchFilter(originalEvent, selectedValue);\n                count = 1;\n            }\n        }\n        var colon = selection.focusNode.textContent.substring(cursorPos - 1, cursorPos);\n        if (colon === ':' && !isNOU(this.popupObj)) {\n            selectedValue = colon;\n            this.searchFilter(originalEvent, selectedValue);\n        }\n    };\n    EmojiPicker.prototype.getCoordinates = function () {\n        var coordinates;\n        var selection = (this.parent.iframeSettings.enable) ?\n            this.parent.contentModule.getPanel().contentWindow.getSelection() : window.getSelection();\n        var range = selection.getRangeAt(0);\n        var firstChild;\n        if (range.startContainer.nodeName === 'P' || range.startContainer.nodeName === 'DIV') {\n            if (range.startContainer.childNodes[0].nodeName !== '#text') {\n                firstChild = range.startContainer.childNodes[0];\n            }\n        }\n        // eslint-disable-next-line\n        var rect = isNOU(firstChild) ? range.getBoundingClientRect() : firstChild.getBoundingClientRect();\n        var rteContent = this.parent.element.querySelector('.e-rte-content');\n        var rteEle = this.parent.element;\n        var toolbarHeight = rteEle.offsetHeight - rteContent.offsetHeight;\n        var cursorTop = rect.top - this.parent.inputElement.getBoundingClientRect().top;\n        var cursorLeft = rect.left - this.parent.inputElement.getBoundingClientRect().left;\n        var screenHeight = window.innerHeight;\n        var popupHeight = 330;\n        var popupTop = cursorTop;\n        var popupLeft = cursorLeft + rect.width;\n        if (rteEle.getBoundingClientRect().top < 0 && !this.parent.inlineMode.enable) {\n            popupTop = popupTop + rteContent.getBoundingClientRect().top - toolbarHeight;\n        }\n        if (rect.top < popupHeight) {\n            // eslint-disable-next-line\n            popupTop = popupTop;\n        }\n        else if (rect.top + popupHeight > screenHeight) {\n            popupTop -= popupHeight + 20;\n        }\n        if (this.parent.inputElement) {\n            coordinates = {\n                top: popupTop + 60,\n                left: popupLeft + 8\n            };\n        }\n        return coordinates;\n    };\n    EmojiPicker.prototype.removeEventListener = function () {\n        this.parent.off(events.emojiPicker, this.toolbarClick);\n        this.parent.off(events.docClick, this.docClick);\n        this.parent.off(events.keyDown, this.onkeyPress);\n        this.parent.off(events.keyUp, this.onkeyUp);\n        this.parent.off(events.contentscroll, this.contentscroll);\n        this.parent.off(events.scroll, this.contentscroll);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the string value\n     */\n    EmojiPicker.prototype.getModuleName = function () {\n        return 'emojiPicker';\n    };\n    return EmojiPicker;\n}());\nexport { EmojiPicker };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}