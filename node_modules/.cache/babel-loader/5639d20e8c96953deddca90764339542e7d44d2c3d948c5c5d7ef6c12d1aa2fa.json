{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport { remove, resetBlazorTemplate, blazorTemplates, getValue } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Column } from '../models/column';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, isGroupAdaptive, getDatePredicate, getObject, clearReactVueTemplates } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\nimport { RowDragDropRenderer } from './row-drag-drop-renderer';\nimport { RowDragDropHeaderRenderer } from '../renderer/row-drag-header-indent-render';\nimport * as literals from '../base/string-literals';\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar Render = /** @class */function () {\n  /**\n   * Constructor for render module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} locator - specifies the serviceLocator\n   */\n  function Render(parent, locator) {\n    this.emptyGrid = false;\n    this.counter = 0;\n    this.parent = parent;\n    this.locator = locator;\n    this.data = new Data(parent, locator);\n    this.l10n = locator.getService('localization');\n    this.ariaService = this.locator.getService('ariaService');\n    this.renderer = this.locator.getService('rendererFactory');\n    this.addEventListener();\n  }\n  /**\n   * To initialize grid header, content and footer rendering\n   *\n   * @returns {void}\n   */\n  Render.prototype.render = function () {\n    var gObj = this.parent;\n    this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n    this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n    this.headerRenderer.renderPanel();\n    this.contentRenderer.renderPanel();\n    if (gObj.getColumns().length) {\n      this.isLayoutRendered = true;\n      this.headerRenderer.renderTable();\n      this.contentRenderer.renderTable();\n      this.emptyRow(false);\n    }\n    this.parent.scrollModule.setWidth();\n    this.parent.scrollModule.setHeight();\n    if (this.parent.height !== 'auto') {\n      this.parent.scrollModule.setPadding();\n    }\n    this.refreshDataManager();\n  };\n  /**\n   * Refresh the entire Grid.\n   *\n   * @param {NotifyArgs} e - specifies the NotifyArgs\n   * @returns {void}\n   */\n  Render.prototype.refresh = function (e) {\n    var _this = this;\n    if (e === void 0) {\n      e = {\n        requestType: 'refresh'\n      };\n    }\n    var gObj = this.parent;\n    gObj.notify(e.requestType + \"-begin\", e);\n    gObj.trigger(events.actionBegin, e, function (args) {\n      if (args === void 0) {\n        args = {\n          requestType: 'refresh'\n        };\n      }\n      if (args.cancel) {\n        gObj.notify(events.cancelBegin, args);\n        if (args.action === 'clearFilter' && _this.parent.filterSettings.type === 'Menu') {\n          _this.parent.filterSettings.columns[_this.parent.filterModule.filterObjIndex] = _this.parent.filterModule.prevFilterObject;\n          var iconClass = _this.parent.showColumnMenu && _this.parent.filterModule['column'].showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n          var col = _this.parent.element.querySelector('[e-mappinguid=\"' + _this.parent.filterModule['column'].uid + '\"]').parentElement;\n          var flIcon = col.querySelector(iconClass);\n          if (!isNullOrUndefined(_this.parent.filterModule.prevFilterObject)) {\n            flIcon.classList.add('e-filtered');\n          }\n        }\n        if (args.action === 'clear-filter' && (_this.parent.filterSettings.type === 'CheckBox' || _this.parent.filterSettings.type === 'Excel')) {\n          _this.parent.filterSettings.columns = _this.parent.filterModule.checkboxPrevFilterObject;\n        }\n        if (args.requestType === 'grouping') {\n          // Remove the dropped column name from groupsettings.columns if args.cancel is true\n          var index = gObj.groupSettings.columns.indexOf(args.columnName);\n          if (index !== -1) {\n            gObj.setProperties({\n              groupSettings: {\n                Columns: gObj.groupSettings.columns.splice(index, 1)\n              }\n            }, true);\n            gObj.setProperties({\n              sortSettings: {\n                Columns: gObj.sortSettings.columns.splice(index, 1)\n              }\n            }, true);\n            var column = gObj.getColumnByField(args.columnName);\n            var headerCell = gObj.getColumnHeaderByField(column.field);\n            column.visible = !isNullOrUndefined(headerCell) && !headerCell.classList.contains('e-hide');\n          }\n        }\n        return;\n      }\n      if (_this.parent.groupModule && args.preventFocusOnGroup) {\n        _this.parent.groupModule.preventFocusOnGroup = args.preventFocusOnGroup;\n      }\n      if (gObj.allowSelection && (args.action === 'clearFilter' || args.action === 'clear-filter' || args.requestType === 'searching' && args.searchString === '' || args.action === 'add')) {\n        gObj.selectionModule['rmtHdrChkbxClicked'] = false;\n      }\n      if (gObj.allowPaging && gObj.pageSettings.pageSizes && gObj.pagerModule.pagerObj.isAllPage && args.action === 'add' && args.requestType === 'save' && gObj.pagerModule.pagerObj.checkAll) {\n        gObj.setProperties({\n          pageSettings: {\n            pageSize: gObj.pageSettings.pageSize + 1\n          }\n        }, true);\n      }\n      if (args.requestType === 'delete' && gObj.allowPaging) {\n        var dataLength = args.data.length;\n        var count = gObj.pageSettings.totalRecordsCount - dataLength;\n        var currentViewData = gObj.getCurrentViewRecords().length;\n        // eslint-disable-next-line max-len\n        if (!(currentViewData - dataLength) && count && (gObj.pageSettings.currentPage - 1) * gObj.pageSettings.pageSize === count || count && count <= dataLength) {\n          gObj.prevPageMoving = true;\n          gObj.setProperties({\n            pageSettings: {\n              totalRecordsCount: count,\n              currentPage: Math.ceil(count / gObj.pageSettings.pageSize)\n            }\n          }, true);\n          gObj.pagerModule.pagerObj.totalRecordsCount = count;\n        }\n      }\n      if (args.requestType === 'reorder' && _this.parent.dataSource && 'result' in _this.parent.dataSource) {\n        _this.contentRenderer.refreshContentRows(args);\n      } else if ((args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder') && _this.parent.groupSettings.enableLazyLoading && _this.parent.groupSettings.columns.length && (_this.parent.enableVirtualization ? _this.parent.lazyLoadRender : _this.parent.contentModule).getGroupCache()[_this.parent.pageSettings.currentPage]) {\n        _this.contentRenderer.refreshContentRows(args);\n      } else {\n        _this.refreshDataManager(args);\n      }\n    });\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Render.prototype.resetTemplates = function () {\n    var gObj = this.parent;\n    var gridColumns = gObj.getColumns();\n    if (gObj.detailTemplate) {\n      var detailTemplateID = gObj.element.id + 'detailTemplate';\n      blazorTemplates[\"\" + detailTemplateID] = [];\n      resetBlazorTemplate(detailTemplateID, 'DetailTemplate');\n    }\n    if (gObj.groupSettings.captionTemplate) {\n      resetBlazorTemplate(gObj.element.id + 'captionTemplate', 'CaptionTemplate');\n    }\n    if (gObj.rowTemplate) {\n      resetBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate');\n    }\n    if (gObj.toolbarTemplate) {\n      resetBlazorTemplate(gObj.element.id + 'toolbarTemplate', 'ToolbarTemplate');\n    }\n    if (gObj.pageSettings.template) {\n      resetBlazorTemplate(gObj.element.id + '_template', 'pageSettings');\n    }\n    for (var i = 0; i < gridColumns.length; i++) {\n      if (gridColumns[parseInt(i.toString(), 10)].template) {\n        blazorTemplates[gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid] = [];\n        resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid, 'Template');\n      }\n      if (gridColumns[parseInt(i.toString(), 10)].headerTemplate) {\n        resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid + 'headerTemplate', 'HeaderTemplate');\n      }\n      if (gridColumns[parseInt(i.toString(), 10)].filterTemplate) {\n        resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid + 'filterTemplate', 'FilterTemplate');\n      }\n    }\n    var guid = 'guid';\n    for (var k = 0; k < gObj.aggregates.length; k++) {\n      for (var j = 0; j < gObj.aggregates[parseInt(k.toString(), 10)].columns.length; j++) {\n        if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].footerTemplate) {\n          var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'footerTemplate';\n          resetBlazorTemplate(tempID, 'FooterTemplate');\n        }\n        if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].groupFooterTemplate) {\n          var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'groupFooterTemplate';\n          resetBlazorTemplate(tempID, 'GroupFooterTemplate');\n        }\n        if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].groupCaptionTemplate) {\n          var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'groupCaptionTemplate';\n          resetBlazorTemplate(tempID, 'GroupCaptionTemplate');\n        }\n      }\n    }\n  };\n  Render.prototype.refreshComplete = function (e) {\n    this.parent.trigger(events.actionComplete, e);\n  };\n  /**\n   * The function is used to refresh the dataManager\n   *\n   * @param {NotifyArgs} args - specifies the args\n   * @returns {void}\n   */\n  Render.prototype.refreshDataManager = function (args) {\n    var _this = this;\n    if (args === void 0) {\n      args = {};\n    }\n    var gObj = this.parent;\n    var maskRow = gObj.loadingIndicator.indicatorType === 'Shimmer' && args.requestType !== 'virtualscroll' && args.requestType !== 'infiniteScroll' || (args.requestType === 'virtualscroll' || args.requestType === 'infiniteScroll') && gObj.enableVirtualMaskRow;\n    if (args.requestType !== 'virtualscroll' && !args.isCaptionCollapse && !maskRow) {\n      this.parent.showSpinner();\n    }\n    if (maskRow) {\n      gObj.showMaskRow(args.requestType === 'virtualscroll' ? args.virtualInfo.sentinelInfo.axis : args.requestType === 'infiniteScroll' ? args.direction : undefined);\n    }\n    this.parent.notify(events.resetInfiniteBlocks, args);\n    this.emptyGrid = false;\n    var dataManager;\n    var isFActon = this.isNeedForeignAction();\n    this.ariaService.setBusy(this.parent.getContent().querySelector('.' + literals.content), true);\n    if (isFActon) {\n      var deffered = new Deferred();\n      dataManager = this.getFData(deffered, args);\n    }\n    if (!dataManager) {\n      if (gObj.allowPaging && !gObj.getDataModule().dataManager.dataSource.offline && gObj.pageSettings && gObj.pageSettings.pageSizes && gObj.pagerModule && gObj.pagerModule.pagerObj && gObj.pagerModule.pagerObj.isAllPage) {\n        gObj.pagerModule.pagerObj.isAllPage = undefined;\n      }\n      dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      dataManager = dataManager.then(function (e) {\n        var query = _this.data.generateQuery().requiresCount();\n        if (_this.emptyGrid) {\n          var def = new Deferred();\n          def.resolve({\n            result: [],\n            count: 0\n          });\n          return def.promise;\n        }\n        return _this.data.getData(args, query);\n      });\n    }\n    var foreignKeyColumns = this.parent.getForeignKeyColumns();\n    var foreignKeyLength = foreignKeyColumns.length;\n    if (this.parent.columnQueryMode === 'ExcludeHidden' && foreignKeyLength) {\n      foreignKeyLength = foreignKeyColumns.filter(function (col) {\n        return col.visible !== false;\n      }).length;\n    }\n    if (foreignKeyLength && (!isFActon || this.parent.searchSettings.key.length)) {\n      var deffered_1 = new Deferred();\n      dataManager = dataManager.then(function (e) {\n        _this.parent.notify(events.getForeignKeyData, {\n          dataManager: dataManager,\n          result: e,\n          promise: deffered_1,\n          action: args\n        });\n        return deffered_1.promise;\n      });\n    }\n    if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n      dataManager = dataManager.then(function (e) {\n        return _this.validateGroupRecords(e);\n      });\n    }\n    dataManager.then(function (e) {\n      return _this.dataManagerSuccess(e, args);\n    }).catch(function (e) {\n      return _this.dataManagerFailure(e, args);\n    });\n  };\n  Render.prototype.getFData = function (deferred, args) {\n    this.parent.notify(events.getForeignKeyData, {\n      isComplex: true,\n      promise: deferred,\n      action: args\n    });\n    return deferred.promise;\n  };\n  Render.prototype.isNeedForeignAction = function () {\n    var gObj = this.parent;\n    return !!(gObj.allowFiltering && gObj.filterSettings.columns.length || !isNullOrUndefined(gObj.searchSettings.key) && gObj.searchSettings.key.length) && this.foreignKey(this.parent.getForeignKeyColumns());\n  };\n  Render.prototype.foreignKey = function (columns) {\n    var _this = this;\n    return columns.some(function (col) {\n      var fbool = false;\n      fbool = _this.parent.filterSettings.columns.some(function (value) {\n        return col.uid === value.uid;\n      });\n      return !!(fbool || _this.parent.searchSettings.key.length);\n    });\n  };\n  Render.prototype.sendBulkRequest = function (args) {\n    var _this = this;\n    args.requestType = 'batchsave';\n    var gObj = this.parent;\n    if (gObj.allowPaging && gObj.pageSettings.pageSizes && gObj.pagerModule.pagerObj.isAllPage && gObj.pagerModule.pagerObj.checkAll) {\n      var dataLength = args['changes'].addedRecords.length;\n      if (dataLength) {\n        gObj.setProperties({\n          pageSettings: {\n            pageSize: gObj.pageSettings.pageSize + dataLength\n          }\n        }, true);\n      }\n    }\n    if (gObj.allowPaging && (args.changes.addedRecords.length || args.changes.deletedRecords.length || args.changes.changedRecords.length) && gObj.pageSettings && gObj.pageSettings.pageSizes && gObj.pagerModule && gObj.pagerModule.pagerObj && !gObj.getDataModule().dataManager.dataSource.offline && gObj.pagerModule.pagerObj.isAllPage) {\n      gObj.pagerModule.pagerObj.isAllPage = undefined;\n    }\n    var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);\n    var query = this.data.generateQuery().requiresCount();\n    if (this.data.dataManager.dataSource.offline) {\n      this.refreshDataManager({\n        requestType: 'batchsave'\n      });\n      return;\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      promise.then(function (e) {\n        _this.data.getData(args, query).then(function (e) {\n          return _this.dmSuccess(e, args);\n        }).catch(function (e) {\n          return _this.dmFailure(e, args);\n        });\n      }).catch(function (e) {\n        return _this.dmFailure(e, args);\n      });\n    }\n  };\n  Render.prototype.dmSuccess = function (e, args) {\n    this.dataManagerSuccess(e, args);\n  };\n  Render.prototype.dmFailure = function (e, args) {\n    this.dataManagerFailure(e, args);\n  };\n  /**\n   * Render empty row to Grid which is used at the time to represent to no records.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Render.prototype.renderEmptyRow = function () {\n    this.emptyRow(true);\n  };\n  Render.prototype.emptyRow = function (isTrigger) {\n    var gObj = this.parent;\n    var tbody = this.contentRenderer.getTable().querySelector(literals.tbody);\n    if (!isNullOrUndefined(tbody)) {\n      remove(tbody);\n    }\n    tbody = this.parent.createElement(literals.tbody, {\n      attrs: {\n        role: 'rowgroup'\n      }\n    });\n    var spanCount = gObj.allowRowDragAndDrop && isNullOrUndefined(gObj.rowDropSettings.targetID) ? 1 : 0;\n    if (gObj.detailTemplate || gObj.childGrid) {\n      ++spanCount;\n    }\n    var className = gObj.editSettings.showAddNewRow && gObj.editSettings.newRowPosition === 'Bottom' ? 'e-emptyrow e-show-added-row' : 'e-emptyrow';\n    var tr = this.parent.createElement('tr', {\n      className: className,\n      attrs: {\n        role: 'row'\n      }\n    });\n    var td;\n    if (gObj.emptyRecordTemplate) {\n      var emptyRecordTemplateID = gObj.element.id + 'emptyRecordTemplate';\n      td = this.parent.createElement('td', {\n        attrs: {\n          colspan: (gObj.getVisibleColumns().length + spanCount + gObj.groupSettings.columns.length).toString()\n        }\n      });\n      if (gObj.isVue || gObj.parentDetails && gObj.parentDetails.parentInstObj && gObj.parentDetails.parentInstObj.isVue) {\n        td.appendChild(gObj.getEmptyRecordTemplate()(gObj.dataSource, gObj, 'emptyRecordTemplate', emptyRecordTemplateID, undefined, undefined, undefined, this.parent['root'])[1]);\n      } else {\n        td.appendChild(gObj.getEmptyRecordTemplate()(gObj.dataSource, gObj, 'emptyRecordTemplate', emptyRecordTemplateID, undefined, undefined, undefined, this.parent['root'])[0]);\n      }\n      if (gObj.isReact) {\n        this.parent.renderTemplates();\n      }\n    } else {\n      td = this.parent.createElement('td', {\n        innerHTML: this.l10n.getConstant('EmptyRecord'),\n        attrs: {\n          colspan: (gObj.getVisibleColumns().length + spanCount + (!isNullOrUndefined(gObj.groupSettings.columns) ? gObj.groupSettings.columns.length : 0)).toString()\n        }\n      });\n    }\n    if (gObj.isFrozenGrid()) {\n      td.classList.add('e-leftfreeze');\n      td.style.left = 0 + 'px';\n    }\n    if (gObj.frozenRows && gObj.element.querySelector('.e-frozenrow-border')) {\n      this.parent.element.querySelector('.e-frozenrow-border').classList.add('e-frozenrow-empty');\n    }\n    tr.appendChild(td);\n    tbody.appendChild(tr);\n    this.contentRenderer.renderEmpty(tbody);\n    if (isTrigger) {\n      if (!this.parent.isInitialLoad) {\n        this.parent.focusModule.setFirstFocusableTabIndex();\n      }\n      this.parent.trigger(events.dataBound, {});\n      this.parent.notify(events.onEmpty, {\n        rows: [new Row({\n          isDataRow: true,\n          cells: [new Cell({\n            isDataCell: true,\n            visible: true\n          })]\n        })]\n      });\n      if (gObj.editSettings.showAddNewRow) {\n        gObj.addRecord();\n        this.parent.notify(events.showAddNewRowFocus, {});\n      }\n    }\n  };\n  Render.prototype.dynamicColumnChange = function () {\n    if (this.parent.getCurrentViewRecords().length) {\n      this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n    }\n  };\n  Render.prototype.updateColumnType = function (record) {\n    var columns = this.parent.getColumns();\n    var value;\n    var cFormat = 'customFormat';\n    var equalTo = 'equalTo';\n    var data = record && record.items ? record.items[0] : record;\n    var fmtr = this.locator.getService('valueFormatter');\n    for (var i = 0, len = columns.length; i < len; i++) {\n      value = getObject(columns[parseInt(i.toString(), 10)].field || '', data);\n      if (!isNullOrUndefined(columns[parseInt(i.toString(), 10)][\"\" + cFormat])) {\n        columns[parseInt(i.toString(), 10)].format = columns[parseInt(i.toString(), 10)][\"\" + cFormat];\n      }\n      if (!isNullOrUndefined(columns[parseInt(i.toString(), 10)].validationRules) && !isNullOrUndefined(columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo])) {\n        columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo][0] = this.parent.element.id + columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo][0];\n      }\n      if (columns[parseInt(i.toString(), 10)].isForeignColumn() && columns[parseInt(i.toString(), 10)].columnData) {\n        value = getObject(columns[parseInt(i.toString(), 10)].foreignKeyValue || '', columns[parseInt(i.toString(), 10)].columnData[0]);\n      }\n      if (!isNullOrUndefined(value)) {\n        this.isColTypeDef = true;\n        if (!columns[parseInt(i.toString(), 10)].type) {\n          columns[parseInt(i.toString(), 10)].type = value.getDay ? value.getHours() > 0 || value.getMinutes() > 0 || value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date' : typeof value;\n        }\n      } else {\n        columns[parseInt(i.toString(), 10)].type = columns[parseInt(i.toString(), 10)].type || null;\n      }\n      var valueFormatter = new ValueFormatter();\n      if (columns[parseInt(i.toString(), 10)].format && (columns[parseInt(i.toString(), 10)].format.skeleton || columns[parseInt(i.toString(), 10)].format.format && typeof columns[parseInt(i.toString(), 10)].format.format === 'string')) {\n        columns[parseInt(i.toString(), 10)].setFormatter(valueFormatter.getFormatFunction(extend({}, columns[parseInt(i.toString(), 10)].format)));\n        columns[parseInt(i.toString(), 10)].setParser(valueFormatter.getParserFunction(columns[parseInt(i.toString(), 10)].format));\n      }\n      if (typeof columns[parseInt(i.toString(), 10)].format === 'string') {\n        setFormatter(this.locator, columns[parseInt(i.toString(), 10)]);\n      } else if (!columns[parseInt(i.toString(), 10)].format && columns[parseInt(i.toString(), 10)].type === 'number') {\n        columns[parseInt(i.toString(), 10)].setParser(fmtr.getParserFunction({\n          format: 'n2'\n        }));\n      }\n      if (columns[parseInt(i.toString(), 10)].type === 'dateonly' && !columns[parseInt(i.toString(), 10)].format) {\n        columns[parseInt(i.toString(), 10)].format = 'yMd';\n        setFormatter(this.locator, columns[parseInt(i.toString(), 10)]);\n      }\n    }\n  };\n  /**\n   * @param {ReturnType} e - specifies the return type\n   * @param {NotifyArgs} args - specifies the Notifyargs\n   * @returns {void}\n   * @hidden\n   */\n  // tslint:disable-next-line:max-func-body-length\n  Render.prototype.dataManagerSuccess = function (e, args) {\n    var _this = this;\n    var gObj = this.parent;\n    this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n    this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n    e.actionArgs = args;\n    var isInfiniteDelete = this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && !gObj.groupSettings.enableLazyLoading && (args.requestType === 'delete' || args.requestType === 'save' && this.parent.infiniteScrollModule.requestType === 'add' && !(gObj.sortSettings.columns.length || gObj.filterSettings.columns.length || this.parent.groupSettings.columns.length || gObj.searchSettings.key));\n    // tslint:disable-next-line:max-func-body-length\n    gObj.trigger(events.beforeDataBound, e, function (dataArgs) {\n      if (dataArgs.cancel) {\n        return;\n      }\n      dataArgs.result = isNullOrUndefined(dataArgs.result) ? [] : dataArgs.result;\n      var len = Object.keys(dataArgs.result).length;\n      if (_this.parent.isDestroyed) {\n        return;\n      }\n      if (!gObj.getColumns().length && !len && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {\n        gObj.hideSpinner();\n        return;\n      }\n      if (_this.isInfiniteEnd(args) && !len) {\n        _this.parent.notify(events.infiniteEditHandler, {\n          e: args,\n          result: e.result,\n          count: e.count,\n          agg: e.aggregates\n        });\n        return;\n      }\n      _this.parent.isEdit = false;\n      _this.parent.notify(events.editReset, {});\n      _this.parent.notify(events.tooltipDestroy, {});\n      if (args && !((args.requestType === 'infiniteScroll' || args.requestType === 'delete' || args.action === 'add') && gObj.enableInfiniteScrolling)) {\n        _this.parent.notify(events.commandColumnDestroy, {\n          type: 'refreshCommandColumn'\n        });\n      }\n      _this.contentRenderer.prevCurrentView = !isNullOrUndefined(_this.parent.currentViewData) && _this.parent.currentViewData.slice();\n      gObj.currentViewData = dataArgs.result;\n      gObj.notify(events.refreshInfiniteCurrentViewData, {\n        args: args,\n        data: dataArgs.result\n      });\n      if (dataArgs.count && !gObj.allowPaging && (gObj.enableVirtualization || gObj.enableInfiniteScrolling)) {\n        gObj.totalDataRecordsCount = dataArgs.count;\n      }\n      if (!len && dataArgs.count && gObj.allowPaging && args && args.requestType !== 'delete') {\n        if (_this.parent.groupSettings.enableLazyLoading && (args.requestType === 'grouping' || args.requestType === 'ungrouping')) {\n          _this.parent.notify(events.groupComplete, args);\n        }\n        gObj.prevPageMoving = true;\n        gObj.pageSettings.totalRecordsCount = dataArgs.count;\n        if (args.requestType !== 'paging') {\n          gObj.pageSettings.currentPage = Math.ceil(dataArgs.count / gObj.pageSettings.pageSize);\n        }\n        gObj.dataBind();\n        return;\n      }\n      if ((!gObj.getColumns().length && len || !_this.isLayoutRendered) && !isGroupAdaptive(gObj)) {\n        gObj.removeMaskRow();\n        _this.updatesOnInitialRender(dataArgs);\n      }\n      if (!_this.isColTypeDef && gObj.getCurrentViewRecords()) {\n        if (_this.data.dataManager.dataSource.offline && gObj.dataSource && gObj.dataSource.length) {\n          _this.updateColumnType(gObj.dataSource[0]);\n        } else {\n          _this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n        }\n      }\n      if (!_this.parent.isInitialLoad && _this.parent.groupSettings.disablePageWiseAggregates && !_this.parent.groupSettings.columns.length) {\n        dataArgs.result = _this.parent.dataSource instanceof Array ? _this.parent.dataSource : _this.parent.currentViewData;\n      }\n      if ((_this.parent.isReact || _this.parent.isVue) && !isNullOrUndefined(args) && args.requestType !== 'infiniteScroll' && !args.isFrozen) {\n        clearReactVueTemplates(_this.parent, ['footerTemplate']);\n      }\n      if (_this.parent.isAngular && _this.parent.allowGrouping && _this.parent.groupSettings.captionTemplate && !(!isNullOrUndefined(args) && args.requestType === 'infiniteScroll')) {\n        _this.parent.destroyTemplate(['groupSettings_captionTemplate']);\n      }\n      _this.parent.notify(events.dataReady, extend({\n        count: dataArgs.count,\n        result: dataArgs.result,\n        aggregates: dataArgs.aggregates,\n        loadSummaryOnEmpty: false\n      }, args));\n      if ((gObj.groupSettings.columns.length || args && args.requestType === 'ungrouping') && args && args.requestType !== 'filtering') {\n        _this.headerRenderer.refreshUI();\n      }\n      if (len) {\n        if (isGroupAdaptive(gObj)) {\n          var content = 'content';\n          args.scrollTop = {\n            top: _this.contentRenderer[\"\" + content].scrollTop\n          };\n        }\n        if (!isInfiniteDelete) {\n          if (_this.parent.enableImmutableMode) {\n            _this.contentRenderer.immutableModeRendering(args);\n          } else {\n            _this.contentRenderer.refreshContentRows(args);\n          }\n        } else {\n          _this.parent.notify(events.infiniteEditHandler, {\n            e: args,\n            result: e.result,\n            count: e.count,\n            agg: e.aggregates\n          });\n        }\n      } else {\n        if (args && args.isCaptionCollapse) {\n          return;\n        }\n        if (!gObj.getColumns().length) {\n          gObj.element.innerHTML = '';\n          alert(_this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n          return;\n        }\n        _this.contentRenderer.setRowElements([]);\n        _this.contentRenderer.setRowObjects([]);\n        _this.ariaService.setBusy(_this.parent.getContent().querySelector('.' + literals.content), false);\n        gObj.removeMaskRow();\n        _this.renderEmptyRow();\n        if (gObj.enableColumnVirtualization && !len) {\n          _this.parent.notify(events.contentReady, {\n            rows: gObj.getRowsObject(),\n            args: {}\n          });\n        }\n        if (args) {\n          var action = (args.requestType || '').toLowerCase() + '-complete';\n          _this.parent.notify(action, args);\n          if (args.requestType === 'batchsave') {\n            args.cancel = false;\n            args.rows = [];\n            args.isFrozen = !args.isFrozen;\n            _this.parent.trigger(events.actionComplete, args);\n          }\n        }\n        if (_this.parent.autoFit) {\n          _this.parent.preventAdjustColumns();\n        }\n        _this.parent.hideSpinner();\n      }\n      _this.parent.notify(events.toolbarRefresh, {});\n      _this.setRowCount(_this.parent.getCurrentViewRecords().length);\n      if ('query' in e) {\n        _this.parent.getDataModule().isQueryInvokedFromData = false;\n      }\n    });\n  };\n  /**\n   * @param {object} e - specifies the object\n   * @param {Object[]} e.result - specifies the result\n   * @param {NotifyArgs} args - specifies the args\n   * @returns {void}\n   * @hidden\n   */\n  Render.prototype.dataManagerFailure = function (e, args) {\n    if (!isNullOrUndefined(this.parent.contentModule)) {\n      this.ariaService.setOptions(this.parent.getContent().querySelector('.' + literals.content), {\n        busy: false,\n        invalid: true\n      });\n      this.setRowCount(1);\n    }\n    this.parent.trigger(events.actionFailure, {\n      error: e\n    });\n    this.parent.hideSpinner();\n    this.parent.removeMaskRow();\n    if (args.requestType === 'save' || args.requestType === 'delete' || args.name === 'bulk-save') {\n      return;\n    }\n    this.parent.currentViewData = [];\n    this.renderEmptyRow();\n    if (!this.parent.isInitialLoad) {\n      this.parent.focusModule.setFirstFocusableTabIndex();\n    }\n    this.parent.log('actionfailure', {\n      error: e\n    });\n  };\n  Render.prototype.setRowCount = function (dataRowCount) {\n    this.ariaService.setOptions(this.parent.element, {\n      rowcount: dataRowCount ? dataRowCount.toString() : '1'\n    });\n  };\n  Render.prototype.isInfiniteEnd = function (args) {\n    return this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && args.requestType === 'delete';\n  };\n  Render.prototype.updatesOnInitialRender = function (e) {\n    this.isLayoutRendered = true;\n    var isEmptyCol = false;\n    if (this.parent.columns.length < 1) {\n      this.buildColumns(e.result[0]);\n      isEmptyCol = true;\n    }\n    prepareColumns(this.parent.columns, null, this.parent);\n    if (isEmptyCol) {\n      this.parent.notify(events.refreshSplitFrozenColumn, {});\n    }\n    this.headerRenderer.renderTable();\n    this.contentRenderer.renderTable();\n    this.parent.isAutoGen = true;\n    this.parent.notify(events.autoCol, {});\n  };\n  Render.prototype.iterateComplexColumns = function (obj, field, split) {\n    var keys = Object.keys(obj);\n    for (var i = 0; i < keys.length; i++) {\n      var childKeys = typeof obj[keys[parseInt(i.toString(), 10)]] === 'object' && obj[keys[parseInt(i.toString(), 10)]] && !(obj[keys[parseInt(i.toString(), 10)]] instanceof Date) ? Object.keys(obj[keys[parseInt(i.toString(), 10)]]) : [];\n      if (childKeys.length) {\n        this.iterateComplexColumns(obj[keys[parseInt(i.toString(), 10)]], field + (keys[parseInt(i.toString(), 10)] + '.'), split);\n      } else {\n        split[this.counter] = field + keys[parseInt(i.toString(), 10)];\n        this.counter++;\n      }\n    }\n  };\n  Render.prototype.buildColumns = function (record) {\n    var cols = [];\n    var complexCols = {};\n    this.iterateComplexColumns(record, '', complexCols);\n    var columns = Object.keys(complexCols).filter(function (e) {\n      return complexCols[\"\" + e] !== 'BlazId';\n    }).map(function (field) {\n      return complexCols[\"\" + field];\n    });\n    for (var i = 0, len = columns.length; i < len; i++) {\n      cols[parseInt(i.toString(), 10)] = {\n        'field': columns[parseInt(i.toString(), 10)]\n      };\n      if (this.parent.enableColumnVirtualization) {\n        cols[parseInt(i.toString(), 10)].width = !isNullOrUndefined(cols[parseInt(i.toString(), 10)].width) ? cols[parseInt(i.toString(), 10)].width : 200;\n      }\n    }\n    this.parent.setProperties({\n      'columns': cols\n    }, true);\n  };\n  Render.prototype.instantiateRenderer = function () {\n    this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n    this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n    var cellrender = this.locator.getService('cellRendererFactory');\n    cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.RowDragHIcon, new RowDragDropHeaderRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.DetailFooterIntent, new IndentCellRenderer(this.parent, this.locator));\n    cellrender.addCellRenderer(CellType.RowDragIcon, new RowDragDropRenderer(this.parent, this.locator));\n  };\n  Render.prototype.addEventListener = function () {\n    var _this = this;\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n    this.parent.on('refreshdataSource', this.dataManagerSuccess, this);\n    this.parent.on(events.modelChanged, this.refresh, this);\n    this.parent.on(events.refreshComplete, this.refreshComplete, this);\n    this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n    this.parent.on(events.showEmptyGrid, function () {\n      _this.emptyGrid = true;\n    }, this);\n    this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n  };\n  /**\n   * @param {ReturnType} e - specifies the Return type\n   * @returns {Promise<Object>} returns the object\n   * @hidden\n   */\n  Render.prototype.validateGroupRecords = function (e) {\n    var _this = this;\n    var index = e.result.length - 1;\n    if (index < 0) {\n      return Promise.resolve(e);\n    }\n    var group0 = e.result[0];\n    var groupN = e.result[parseInt(index.toString(), 10)];\n    var predicate = [];\n    var addWhere = function (input) {\n      var groups = [group0, groupN];\n      for (var i = 0; i < groups.length; i++) {\n        predicate.push(new Predicate('field', '==', groups[parseInt(i.toString(), 10)].field).and(_this.getPredicate('key', 'equal', groups[parseInt(i.toString(), 10)].key)));\n      }\n      input.where(Predicate.or(predicate));\n    };\n    var query = new Query();\n    addWhere(query);\n    var curDm = new DataManager(e.result);\n    var curFilter = curDm.executeLocal(query);\n    var newQuery = this.data.generateQuery(true);\n    var rPredicate = [];\n    if (this.data.isRemote()) {\n      var groups = [group0, groupN];\n      for (var i = 0; i < groups.length; i++) {\n        rPredicate.push(this.getPredicate(groups[parseInt(i.toString(), 10)].field, 'equal', groups[parseInt(i.toString(), 10)].key));\n      }\n      newQuery.where(Predicate.or(rPredicate));\n    } else {\n      addWhere(newQuery);\n    }\n    var deferred = new Deferred();\n    this.data.getData({}, newQuery).then(function (r) {\n      _this.updateGroupInfo(curFilter, r.result);\n      deferred.resolve(e);\n    }).catch(function (e) {\n      return deferred.reject(e);\n    });\n    return deferred.promise;\n  };\n  /**\n   * @param {string} key - Defines the key\n   * @param {string} operator - Defines the operator\n   * @param {string | number | Date} value - Defines the value\n   * @returns {Predicate} - Returns the predicate\n   * @hidden */\n  Render.prototype.getPredicate = function (key, operator, value) {\n    if (value instanceof Date) {\n      return getDatePredicate({\n        field: key,\n        operator: operator,\n        value: value\n      });\n    }\n    return new Predicate(key, operator, value);\n  };\n  /**\n   * @param {Object[]} current - Defines the current object\n   * @param {Object[]} untouched - Defines the object needs to merge\n   * @returns {Object[]} - Returns the updated group information\n   * @hidden */\n  Render.prototype.updateGroupInfo = function (current, untouched) {\n    var dm = new DataManager(untouched);\n    var elements = current;\n    for (var i = 0; i < elements.length; i++) {\n      var updatedGroup = dm.executeLocal(new Query().where(new Predicate('field', '==', elements[parseInt(i.toString(), 10)].field).and(this.getPredicate('key', 'equal', elements[parseInt(i.toString(), 10)].key))))[0];\n      if (!isNullOrUndefined(updatedGroup)) {\n        elements[parseInt(i.toString(), 10)].count = updatedGroup.count;\n        var itemGroup = elements[parseInt(i.toString(), 10)].items;\n        var updatedGroupItem = updatedGroup.items;\n        if (itemGroup.GroupGuid) {\n          elements[parseInt(i.toString(), 10)].items = this.updateGroupInfo(elements[parseInt(i.toString(), 10)].items, updatedGroup.items);\n        }\n        var rows = this.parent.aggregates;\n        for (var j = 0; j < rows.length; j++) {\n          var row = rows[parseInt(j.toString(), 10)];\n          for (var k = 0; k < row.columns.length; k++) {\n            var column = row.columns[parseInt(k.toString(), 10)];\n            var types = column.type instanceof Array ? column.type : [column.type];\n            for (var l = 0; l < types.length; l++) {\n              var key = column.field + ' - ' + types[parseInt(l.toString(), 10)].toLowerCase();\n              var data = itemGroup.level ? updatedGroupItem.records : updatedGroup.items;\n              var context = this.parent;\n              if (types[parseInt(l.toString(), 10)] === 'Custom') {\n                var data_1 = itemGroup.level ? updatedGroupItem : updatedGroup;\n                var temp = column.customAggregate;\n                if (typeof temp === 'string') {\n                  temp = getValue(temp, window);\n                }\n                elements[parseInt(i.toString(), 10)].aggregates[\"\" + key] = temp ? temp.call(context, data_1, row.columns[parseInt(k.toString(), 10)]) : '';\n              } else {\n                elements[parseInt(i.toString(), 10)].aggregates[\"\" + key] = DataUtil.aggregates[types[parseInt(l.toString(), 10)].toLowerCase()](data, row.columns[parseInt(k.toString(), 10)].field);\n              }\n            }\n          }\n        }\n      }\n    }\n    return current;\n  };\n  return Render;\n}();\nexport { Render };","map":{"version":3,"names":["remove","resetBlazorTemplate","blazorTemplates","getValue","isNullOrUndefined","extend","DataManager","Query","Deferred","Predicate","DataUtil","ValueFormatter","RenderType","CellType","Data","Column","Row","Cell","events","prepareColumns","setFormatter","isGroupAdaptive","getDatePredicate","getObject","clearReactVueTemplates","ContentRender","HeaderRender","CellRenderer","HeaderCellRenderer","StackedHeaderCellRenderer","IndentCellRenderer","GroupCaptionCellRenderer","GroupCaptionEmptyCellRenderer","ExpandCellRenderer","HeaderIndentCellRenderer","DetailHeaderIndentCellRenderer","DetailExpandCellRenderer","RowDragDropRenderer","RowDragDropHeaderRenderer","literals","Render","parent","locator","emptyGrid","counter","data","l10n","getService","ariaService","renderer","addEventListener","prototype","render","gObj","headerRenderer","getRenderer","Header","contentRenderer","Content","renderPanel","getColumns","length","isLayoutRendered","renderTable","emptyRow","scrollModule","setWidth","setHeight","height","setPadding","refreshDataManager","refresh","e","_this","requestType","notify","trigger","actionBegin","args","cancel","cancelBegin","action","filterSettings","type","columns","filterModule","filterObjIndex","prevFilterObject","iconClass","showColumnMenu","col","element","querySelector","uid","parentElement","flIcon","classList","add","checkboxPrevFilterObject","index","groupSettings","indexOf","columnName","setProperties","Columns","splice","sortSettings","column","getColumnByField","headerCell","getColumnHeaderByField","field","visible","contains","groupModule","preventFocusOnGroup","allowSelection","searchString","selectionModule","allowPaging","pageSettings","pageSizes","pagerModule","pagerObj","isAllPage","checkAll","pageSize","dataLength","count","totalRecordsCount","currentViewData","getCurrentViewRecords","currentPage","prevPageMoving","Math","ceil","dataSource","refreshContentRows","enableLazyLoading","enableVirtualization","lazyLoadRender","contentModule","getGroupCache","resetTemplates","gridColumns","detailTemplate","detailTemplateID","id","captionTemplate","rowTemplate","toolbarTemplate","template","i","parseInt","toString","headerTemplate","filterTemplate","guid","k","aggregates","j","footerTemplate","tempID","groupFooterTemplate","groupCaptionTemplate","refreshComplete","actionComplete","maskRow","loadingIndicator","indicatorType","enableVirtualMaskRow","isCaptionCollapse","showSpinner","showMaskRow","virtualInfo","sentinelInfo","axis","direction","undefined","resetInfiniteBlocks","dataManager","isFActon","isNeedForeignAction","setBusy","getContent","content","deffered","getFData","getDataModule","offline","getData","generateQuery","requiresCount","then","query","def","resolve","result","promise","foreignKeyColumns","getForeignKeyColumns","foreignKeyLength","columnQueryMode","filter","searchSettings","key","deffered_1","getForeignKeyData","disablePageWiseAggregates","validateGroupRecords","dataManagerSuccess","catch","dataManagerFailure","deferred","isComplex","allowFiltering","foreignKey","some","fbool","value","sendBulkRequest","addedRecords","changes","deletedRecords","changedRecords","saveChanges","getPrimaryKeyFieldNames","original","dmSuccess","dmFailure","renderEmptyRow","isTrigger","tbody","getTable","createElement","attrs","role","spanCount","allowRowDragAndDrop","rowDropSettings","targetID","childGrid","className","editSettings","showAddNewRow","newRowPosition","tr","td","emptyRecordTemplate","emptyRecordTemplateID","colspan","getVisibleColumns","isVue","parentDetails","parentInstObj","appendChild","getEmptyRecordTemplate","isReact","renderTemplates","innerHTML","getConstant","isFrozenGrid","style","left","frozenRows","renderEmpty","isInitialLoad","focusModule","setFirstFocusableTabIndex","dataBound","onEmpty","rows","isDataRow","cells","isDataCell","addRecord","showAddNewRowFocus","dynamicColumnChange","updateColumnType","record","cFormat","equalTo","items","fmtr","len","format","validationRules","isForeignColumn","columnData","foreignKeyValue","isColTypeDef","getDay","getHours","getMinutes","getSeconds","getMilliseconds","valueFormatter","skeleton","getFormatFunction","setParser","getParserFunction","actionArgs","isInfiniteDelete","enableInfiniteScrolling","infiniteScrollSettings","enableCache","infiniteScrollModule","beforeDataBound","dataArgs","Object","keys","isDestroyed","hideSpinner","isInfiniteEnd","infiniteEditHandler","agg","isEdit","editReset","tooltipDestroy","commandColumnDestroy","prevCurrentView","slice","refreshInfiniteCurrentViewData","totalDataRecordsCount","groupComplete","dataBind","removeMaskRow","updatesOnInitialRender","Array","isFrozen","isAngular","allowGrouping","destroyTemplate","dataReady","loadSummaryOnEmpty","refreshUI","scrollTop","top","enableImmutableMode","immutableModeRendering","alert","setRowElements","setRowObjects","enableColumnVirtualization","contentReady","getRowsObject","toLowerCase","autoFit","preventAdjustColumns","toolbarRefresh","setRowCount","isQueryInvokedFromData","setOptions","busy","invalid","actionFailure","error","name","log","dataRowCount","rowcount","isEmptyCol","buildColumns","refreshSplitFrozenColumn","isAutoGen","autoCol","iterateComplexColumns","obj","split","childKeys","Date","cols","complexCols","map","width","instantiateRenderer","addRenderer","cellrender","addCellRenderer","StackedHeader","Indent","GroupCaption","GroupCaptionEmpty","Expand","HeaderIndent","DetailHeader","RowDragHIcon","DetailExpand","DetailFooterIntent","RowDragIcon","on","initialLoad","modelChanged","bulkSave","showEmptyGrid","Promise","group0","groupN","predicate","addWhere","input","groups","push","and","getPredicate","where","or","curDm","curFilter","executeLocal","newQuery","rPredicate","isRemote","r","updateGroupInfo","reject","operator","current","untouched","dm","elements","updatedGroup","itemGroup","updatedGroupItem","GroupGuid","row","types","l","level","records","context","data_1","temp","customAggregate","window","call"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-grids/src/grid/renderer/render.js"],"sourcesContent":["import { remove, resetBlazorTemplate, blazorTemplates, getValue } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Column } from '../models/column';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, isGroupAdaptive, getDatePredicate, getObject, clearReactVueTemplates } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\nimport { RowDragDropRenderer } from './row-drag-drop-renderer';\nimport { RowDragDropHeaderRenderer } from '../renderer/row-drag-header-indent-render';\nimport * as literals from '../base/string-literals';\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} locator - specifies the serviceLocator\n     */\n    function Render(parent, locator) {\n        this.emptyGrid = false;\n        this.counter = 0;\n        this.parent = parent;\n        this.locator = locator;\n        this.data = new Data(parent, locator);\n        this.l10n = locator.getService('localization');\n        this.ariaService = this.locator.getService('ariaService');\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize grid header, content and footer rendering\n     *\n     * @returns {void}\n     */\n    Render.prototype.render = function () {\n        var gObj = this.parent;\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer.renderPanel();\n        this.contentRenderer.renderPanel();\n        if (gObj.getColumns().length) {\n            this.isLayoutRendered = true;\n            this.headerRenderer.renderTable();\n            this.contentRenderer.renderTable();\n            this.emptyRow(false);\n        }\n        this.parent.scrollModule.setWidth();\n        this.parent.scrollModule.setHeight();\n        if (this.parent.height !== 'auto') {\n            this.parent.scrollModule.setPadding();\n        }\n        this.refreshDataManager();\n    };\n    /**\n     * Refresh the entire Grid.\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     */\n    Render.prototype.refresh = function (e) {\n        var _this = this;\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        var gObj = this.parent;\n        gObj.notify(e.requestType + \"-begin\", e);\n        gObj.trigger(events.actionBegin, e, function (args) {\n            if (args === void 0) { args = { requestType: 'refresh' }; }\n            if (args.cancel) {\n                gObj.notify(events.cancelBegin, args);\n                if (args.action === 'clearFilter' && _this.parent.filterSettings.type === 'Menu') {\n                    _this.parent.filterSettings.columns[_this.parent.filterModule.filterObjIndex] = _this.parent.filterModule.prevFilterObject;\n                    var iconClass = _this.parent.showColumnMenu && _this.parent.filterModule['column'].showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                    var col = _this.parent.element.querySelector('[e-mappinguid=\"' + _this.parent.filterModule['column'].uid + '\"]').parentElement;\n                    var flIcon = col.querySelector(iconClass);\n                    if (!isNullOrUndefined(_this.parent.filterModule.prevFilterObject)) {\n                        flIcon.classList.add('e-filtered');\n                    }\n                }\n                if (args.action === 'clear-filter' && (_this.parent.filterSettings.type === 'CheckBox' || _this.parent.filterSettings.type === 'Excel')) {\n                    _this.parent.filterSettings.columns = _this.parent.filterModule.checkboxPrevFilterObject;\n                }\n                if (args.requestType === 'grouping') {\n                    // Remove the dropped column name from groupsettings.columns if args.cancel is true\n                    var index = gObj.groupSettings.columns.indexOf(args.columnName);\n                    if (index !== -1) {\n                        gObj.setProperties({ groupSettings: { Columns: gObj.groupSettings.columns.splice(index, 1) } }, true);\n                        gObj.setProperties({ sortSettings: { Columns: gObj.sortSettings.columns.splice(index, 1) } }, true);\n                        var column = gObj.getColumnByField(args.columnName);\n                        var headerCell = gObj.getColumnHeaderByField(column.field);\n                        column.visible = (!isNullOrUndefined(headerCell) && !headerCell.classList.contains('e-hide'));\n                    }\n                }\n                return;\n            }\n            if (_this.parent.groupModule && args.preventFocusOnGroup) {\n                _this.parent.groupModule.preventFocusOnGroup = args.preventFocusOnGroup;\n            }\n            if (gObj.allowSelection && (args.action === 'clearFilter' || args.action === 'clear-filter' ||\n                (args.requestType === 'searching' && args.searchString === '') || args.action === 'add')) {\n                gObj.selectionModule['rmtHdrChkbxClicked'] = false;\n            }\n            if (gObj.allowPaging && gObj.pageSettings.pageSizes && gObj.pagerModule.pagerObj.isAllPage &&\n                (args.action === 'add' && args.requestType === 'save') && gObj.pagerModule.pagerObj.checkAll) {\n                gObj.setProperties({ pageSettings: { pageSize: gObj.pageSettings.pageSize + 1 } }, true);\n            }\n            if (args.requestType === 'delete' && gObj.allowPaging) {\n                var dataLength = args.data.length;\n                var count = gObj.pageSettings.totalRecordsCount - dataLength;\n                var currentViewData = gObj.getCurrentViewRecords().length;\n                // eslint-disable-next-line max-len\n                if ((!(currentViewData - dataLength) && count && ((gObj.pageSettings.currentPage - 1) * gObj.pageSettings.pageSize) === count) || (count && count <= dataLength)) {\n                    gObj.prevPageMoving = true;\n                    gObj.setProperties({\n                        pageSettings: {\n                            totalRecordsCount: count, currentPage: Math.ceil(count / gObj.pageSettings.pageSize)\n                        }\n                    }, true);\n                    gObj.pagerModule.pagerObj.totalRecordsCount = count;\n                }\n            }\n            if (args.requestType === 'reorder' && _this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else if ((args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder')\n                && _this.parent.groupSettings.enableLazyLoading && _this.parent.groupSettings.columns.length\n                && (_this.parent.enableVirtualization ? _this.parent.lazyLoadRender :\n                    _this.parent.contentModule).getGroupCache()[_this.parent.pageSettings.currentPage]) {\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else {\n                _this.refreshDataManager(args);\n            }\n        });\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Render.prototype.resetTemplates = function () {\n        var gObj = this.parent;\n        var gridColumns = gObj.getColumns();\n        if (gObj.detailTemplate) {\n            var detailTemplateID = gObj.element.id + 'detailTemplate';\n            blazorTemplates[\"\" + detailTemplateID] = [];\n            resetBlazorTemplate(detailTemplateID, 'DetailTemplate');\n        }\n        if (gObj.groupSettings.captionTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'captionTemplate', 'CaptionTemplate');\n        }\n        if (gObj.rowTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate');\n        }\n        if (gObj.toolbarTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'toolbarTemplate', 'ToolbarTemplate');\n        }\n        if (gObj.pageSettings.template) {\n            resetBlazorTemplate(gObj.element.id + '_template', 'pageSettings');\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (gridColumns[parseInt(i.toString(), 10)].template) {\n                blazorTemplates[gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid] = [];\n                resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid, 'Template');\n            }\n            if (gridColumns[parseInt(i.toString(), 10)].headerTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid + 'headerTemplate', 'HeaderTemplate');\n            }\n            if (gridColumns[parseInt(i.toString(), 10)].filterTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid + 'filterTemplate', 'FilterTemplate');\n            }\n        }\n        var guid = 'guid';\n        for (var k = 0; k < gObj.aggregates.length; k++) {\n            for (var j = 0; j < gObj.aggregates[parseInt(k.toString(), 10)].columns.length; j++) {\n                if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].footerTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'footerTemplate';\n                    resetBlazorTemplate(tempID, 'FooterTemplate');\n                }\n                if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].groupFooterTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'groupFooterTemplate';\n                    resetBlazorTemplate(tempID, 'GroupFooterTemplate');\n                }\n                if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].groupCaptionTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)][\"\" + guid] + 'groupCaptionTemplate';\n                    resetBlazorTemplate(tempID, 'GroupCaptionTemplate');\n                }\n            }\n        }\n    };\n    Render.prototype.refreshComplete = function (e) {\n        this.parent.trigger(events.actionComplete, e);\n    };\n    /**\n     * The function is used to refresh the dataManager\n     *\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {void}\n     */\n    Render.prototype.refreshDataManager = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        var maskRow = (gObj.loadingIndicator.indicatorType === 'Shimmer' && args.requestType !== 'virtualscroll'\n            && args.requestType !== 'infiniteScroll') || ((args.requestType === 'virtualscroll' || args.requestType === 'infiniteScroll')\n            && gObj.enableVirtualMaskRow);\n        if (args.requestType !== 'virtualscroll' && !args.isCaptionCollapse && !maskRow) {\n            this.parent.showSpinner();\n        }\n        if (maskRow) {\n            gObj.showMaskRow(args.requestType === 'virtualscroll' ? args.virtualInfo.sentinelInfo.axis\n                : args.requestType === 'infiniteScroll' ? args.direction : undefined);\n        }\n        this.parent.notify(events.resetInfiniteBlocks, args);\n        this.emptyGrid = false;\n        var dataManager;\n        var isFActon = this.isNeedForeignAction();\n        this.ariaService.setBusy(this.parent.getContent().querySelector('.' + literals.content), true);\n        if (isFActon) {\n            var deffered = new Deferred();\n            dataManager = this.getFData(deffered, args);\n        }\n        if (!dataManager) {\n            if (gObj.allowPaging && !gObj.getDataModule().dataManager.dataSource.offline && gObj.pageSettings\n                && gObj.pageSettings.pageSizes && gObj.pagerModule && gObj.pagerModule.pagerObj && gObj.pagerModule.pagerObj.isAllPage) {\n                gObj.pagerModule.pagerObj.isAllPage = undefined;\n            }\n            dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            dataManager = dataManager.then(function (e) {\n                var query = _this.data.generateQuery().requiresCount();\n                if (_this.emptyGrid) {\n                    var def = new Deferred();\n                    def.resolve({ result: [], count: 0 });\n                    return def.promise;\n                }\n                return _this.data.getData(args, query);\n            });\n        }\n        var foreignKeyColumns = this.parent.getForeignKeyColumns();\n        var foreignKeyLength = foreignKeyColumns.length;\n        if (this.parent.columnQueryMode === 'ExcludeHidden' && foreignKeyLength) {\n            foreignKeyLength = foreignKeyColumns.filter(function (col) { return col.visible !== false; }).length;\n        }\n        if (foreignKeyLength && (!isFActon || this.parent.searchSettings.key.length)) {\n            var deffered_1 = new Deferred();\n            dataManager = dataManager.then(function (e) {\n                _this.parent.notify(events.getForeignKeyData, { dataManager: dataManager, result: e, promise: deffered_1, action: args });\n                return deffered_1.promise;\n            });\n        }\n        if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n            dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n        }\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n            .catch(function (e) { return _this.dataManagerFailure(e, args); });\n    };\n    Render.prototype.getFData = function (deferred, args) {\n        this.parent.notify(events.getForeignKeyData, { isComplex: true, promise: deferred, action: args });\n        return deferred.promise;\n    };\n    Render.prototype.isNeedForeignAction = function () {\n        var gObj = this.parent;\n        return !!((gObj.allowFiltering && gObj.filterSettings.columns.length) ||\n            (!isNullOrUndefined(gObj.searchSettings.key) && gObj.searchSettings.key.length))\n            && this.foreignKey(this.parent.getForeignKeyColumns());\n    };\n    Render.prototype.foreignKey = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            var fbool = false;\n            fbool = _this.parent.filterSettings.columns.some(function (value) {\n                return col.uid === value.uid;\n            });\n            return !!(fbool || _this.parent.searchSettings.key.length);\n        });\n    };\n    Render.prototype.sendBulkRequest = function (args) {\n        var _this = this;\n        args.requestType = 'batchsave';\n        var gObj = this.parent;\n        if (gObj.allowPaging && gObj.pageSettings.pageSizes && gObj.pagerModule.pagerObj.isAllPage && gObj.pagerModule.pagerObj.checkAll) {\n            var dataLength = args['changes'].addedRecords.length;\n            if (dataLength) {\n                gObj.setProperties({ pageSettings: { pageSize: gObj.pageSettings.pageSize + dataLength } }, true);\n            }\n        }\n        if (gObj.allowPaging && (args.changes.addedRecords.length ||\n            args.changes.deletedRecords.length ||\n            args.changes.changedRecords.length) && gObj.pageSettings\n            && gObj.pageSettings.pageSizes && gObj.pagerModule && gObj.pagerModule.pagerObj\n            && !gObj.getDataModule().dataManager.dataSource.offline && gObj.pagerModule.pagerObj.isAllPage) {\n            gObj.pagerModule.pagerObj.isAllPage = undefined;\n        }\n        var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);\n        var query = this.data.generateQuery().requiresCount();\n        if (this.data.dataManager.dataSource.offline) {\n            this.refreshDataManager({ requestType: 'batchsave' });\n            return;\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            promise.then(function (e) {\n                _this.data.getData(args, query)\n                    .then(function (e) { return _this.dmSuccess(e, args); })\n                    .catch(function (e) { return _this.dmFailure(e, args); });\n            })\n                .catch(function (e) { return _this.dmFailure(e, args); });\n        }\n    };\n    Render.prototype.dmSuccess = function (e, args) {\n        this.dataManagerSuccess(e, args);\n    };\n    Render.prototype.dmFailure = function (e, args) {\n        this.dataManagerFailure(e, args);\n    };\n    /**\n     * Render empty row to Grid which is used at the time to represent to no records.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Render.prototype.renderEmptyRow = function () {\n        this.emptyRow(true);\n    };\n    Render.prototype.emptyRow = function (isTrigger) {\n        var gObj = this.parent;\n        var tbody = this.contentRenderer.getTable().querySelector(literals.tbody);\n        if (!isNullOrUndefined(tbody)) {\n            remove(tbody);\n        }\n        tbody = this.parent.createElement(literals.tbody, { attrs: { role: 'rowgroup' } });\n        var spanCount = gObj.allowRowDragAndDrop && isNullOrUndefined(gObj.rowDropSettings.targetID) ? 1 : 0;\n        if (gObj.detailTemplate || gObj.childGrid) {\n            ++spanCount;\n        }\n        var className = gObj.editSettings.showAddNewRow && gObj.editSettings.newRowPosition === 'Bottom' ?\n            'e-emptyrow e-show-added-row' : 'e-emptyrow';\n        var tr = this.parent.createElement('tr', { className: className, attrs: { role: 'row' } });\n        var td;\n        if (gObj.emptyRecordTemplate) {\n            var emptyRecordTemplateID = gObj.element.id + 'emptyRecordTemplate';\n            td = this.parent.createElement('td', { attrs: { colspan: (gObj.getVisibleColumns().length +\n                        spanCount + gObj.groupSettings.columns.length).toString() } });\n            if (gObj.isVue || (gObj.parentDetails && gObj.parentDetails.parentInstObj && gObj.parentDetails.parentInstObj.isVue)) {\n                td.appendChild(gObj.getEmptyRecordTemplate()(gObj.dataSource, gObj, 'emptyRecordTemplate', emptyRecordTemplateID, undefined, undefined, undefined, this.parent['root'])[1]);\n            }\n            else {\n                td.appendChild(gObj.getEmptyRecordTemplate()(gObj.dataSource, gObj, 'emptyRecordTemplate', emptyRecordTemplateID, undefined, undefined, undefined, this.parent['root'])[0]);\n            }\n            if (gObj.isReact) {\n                this.parent.renderTemplates();\n            }\n        }\n        else {\n            td = this.parent.createElement('td', {\n                innerHTML: this.l10n.getConstant('EmptyRecord'),\n                attrs: { colspan: (gObj.getVisibleColumns().length + spanCount + (!isNullOrUndefined(gObj.groupSettings.columns) ?\n                        gObj.groupSettings.columns.length : 0)).toString() }\n            });\n        }\n        if (gObj.isFrozenGrid()) {\n            td.classList.add('e-leftfreeze');\n            td.style.left = 0 + 'px';\n        }\n        if (gObj.frozenRows && gObj.element.querySelector('.e-frozenrow-border')) {\n            this.parent.element.querySelector('.e-frozenrow-border').classList.add('e-frozenrow-empty');\n        }\n        tr.appendChild(td);\n        tbody.appendChild(tr);\n        this.contentRenderer.renderEmpty(tbody);\n        if (isTrigger) {\n            if (!this.parent.isInitialLoad) {\n                this.parent.focusModule.setFirstFocusableTabIndex();\n            }\n            this.parent.trigger(events.dataBound, {});\n            this.parent.notify(events.onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });\n            if (gObj.editSettings.showAddNewRow) {\n                gObj.addRecord();\n                this.parent.notify(events.showAddNewRowFocus, {});\n            }\n        }\n    };\n    Render.prototype.dynamicColumnChange = function () {\n        if (this.parent.getCurrentViewRecords().length) {\n            this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n        }\n    };\n    Render.prototype.updateColumnType = function (record) {\n        var columns = this.parent.getColumns();\n        var value;\n        var cFormat = 'customFormat';\n        var equalTo = 'equalTo';\n        var data = record && record.items ? record.items[0] : record;\n        var fmtr = this.locator.getService('valueFormatter');\n        for (var i = 0, len = columns.length; i < len; i++) {\n            value = getObject(columns[parseInt(i.toString(), 10)].field || '', data);\n            if (!isNullOrUndefined(columns[parseInt(i.toString(), 10)][\"\" + cFormat])) {\n                columns[parseInt(i.toString(), 10)].format = columns[parseInt(i.toString(), 10)][\"\" + cFormat];\n            }\n            if (!isNullOrUndefined(columns[parseInt(i.toString(), 10)].validationRules)\n                && !isNullOrUndefined(columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo])) {\n                columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo][0] = this.parent.element.id + columns[parseInt(i.toString(), 10)].validationRules[\"\" + equalTo][0];\n            }\n            if (columns[parseInt(i.toString(), 10)].isForeignColumn() && columns[parseInt(i.toString(), 10)].columnData) {\n                value = getObject(columns[parseInt(i.toString(), 10)].foreignKeyValue || '', columns[parseInt(i.toString(), 10)].columnData[0]);\n            }\n            if (!isNullOrUndefined(value)) {\n                this.isColTypeDef = true;\n                if (!columns[parseInt(i.toString(), 10)].type) {\n                    columns[parseInt(i.toString(), 10)].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n                        value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n                }\n            }\n            else {\n                columns[parseInt(i.toString(), 10)].type = columns[parseInt(i.toString(), 10)].type || null;\n            }\n            var valueFormatter = new ValueFormatter();\n            if (columns[parseInt(i.toString(), 10)].format && (columns[parseInt(i.toString(), 10)].format.skeleton\n                || (columns[parseInt(i.toString(), 10)].format.format &&\n                    typeof columns[parseInt(i.toString(), 10)].format.format === 'string'))) {\n                columns[parseInt(i.toString(), 10)].setFormatter(valueFormatter.getFormatFunction(extend({}, columns[parseInt(i.toString(), 10)].format)));\n                columns[parseInt(i.toString(), 10)].setParser(valueFormatter.getParserFunction(columns[parseInt(i.toString(), 10)].format));\n            }\n            if (typeof (columns[parseInt(i.toString(), 10)].format) === 'string') {\n                setFormatter(this.locator, columns[parseInt(i.toString(), 10)]);\n            }\n            else if (!columns[parseInt(i.toString(), 10)].format && columns[parseInt(i.toString(), 10)].type === 'number') {\n                columns[parseInt(i.toString(), 10)].setParser(fmtr.getParserFunction({ format: 'n2' }));\n            }\n            if (columns[parseInt(i.toString(), 10)].type === 'dateonly' && !columns[parseInt(i.toString(), 10)].format) {\n                columns[parseInt(i.toString(), 10)].format = 'yMd';\n                setFormatter(this.locator, columns[parseInt(i.toString(), 10)]);\n            }\n        }\n    };\n    /**\n     * @param {ReturnType} e - specifies the return type\n     * @param {NotifyArgs} args - specifies the Notifyargs\n     * @returns {void}\n     * @hidden\n     */\n    // tslint:disable-next-line:max-func-body-length\n    Render.prototype.dataManagerSuccess = function (e, args) {\n        var _this = this;\n        var gObj = this.parent;\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        e.actionArgs = args;\n        var isInfiniteDelete = this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache &&\n            !gObj.groupSettings.enableLazyLoading && (args.requestType === 'delete' || (args.requestType === 'save' &&\n            this.parent.infiniteScrollModule.requestType === 'add' && !(gObj.sortSettings.columns.length ||\n            gObj.filterSettings.columns.length || this.parent.groupSettings.columns.length || gObj.searchSettings.key)));\n        // tslint:disable-next-line:max-func-body-length\n        gObj.trigger(events.beforeDataBound, e, function (dataArgs) {\n            if (dataArgs.cancel) {\n                return;\n            }\n            dataArgs.result = isNullOrUndefined(dataArgs.result) ? [] : dataArgs.result;\n            var len = Object.keys(dataArgs.result).length;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            if ((!gObj.getColumns().length && !len) && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {\n                gObj.hideSpinner();\n                return;\n            }\n            if (_this.isInfiniteEnd(args) && !len) {\n                _this.parent.notify(events.infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });\n                return;\n            }\n            _this.parent.isEdit = false;\n            _this.parent.notify(events.editReset, {});\n            _this.parent.notify(events.tooltipDestroy, {});\n            if (args && !((args.requestType === 'infiniteScroll' || args.requestType === 'delete' || args.action === 'add') &&\n                gObj.enableInfiniteScrolling)) {\n                _this.parent.notify(events.commandColumnDestroy, { type: 'refreshCommandColumn' });\n            }\n            _this.contentRenderer.prevCurrentView = !isNullOrUndefined(_this.parent.currentViewData) && _this.parent.currentViewData.slice();\n            gObj.currentViewData = dataArgs.result;\n            gObj.notify(events.refreshInfiniteCurrentViewData, { args: args, data: dataArgs.result });\n            if (dataArgs.count && !gObj.allowPaging && (gObj.enableVirtualization || gObj.enableInfiniteScrolling)) {\n                gObj.totalDataRecordsCount = dataArgs.count;\n            }\n            if (!len && dataArgs.count && gObj.allowPaging && args && args.requestType !== 'delete') {\n                if (_this.parent.groupSettings.enableLazyLoading\n                    && (args.requestType === 'grouping' || args.requestType === 'ungrouping')) {\n                    _this.parent.notify(events.groupComplete, args);\n                }\n                gObj.prevPageMoving = true;\n                gObj.pageSettings.totalRecordsCount = dataArgs.count;\n                if (args.requestType !== 'paging') {\n                    gObj.pageSettings.currentPage = Math.ceil(dataArgs.count / gObj.pageSettings.pageSize);\n                }\n                gObj.dataBind();\n                return;\n            }\n            if ((!gObj.getColumns().length && len || !_this.isLayoutRendered) && !isGroupAdaptive(gObj)) {\n                gObj.removeMaskRow();\n                _this.updatesOnInitialRender(dataArgs);\n            }\n            if (!_this.isColTypeDef && gObj.getCurrentViewRecords()) {\n                if (_this.data.dataManager.dataSource.offline && gObj.dataSource && gObj.dataSource.length) {\n                    _this.updateColumnType(gObj.dataSource[0]);\n                }\n                else {\n                    _this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n                }\n            }\n            if (!_this.parent.isInitialLoad && _this.parent.groupSettings.disablePageWiseAggregates &&\n                !_this.parent.groupSettings.columns.length) {\n                dataArgs.result = _this.parent.dataSource instanceof Array ? _this.parent.dataSource : _this.parent.currentViewData;\n            }\n            if ((_this.parent.isReact || _this.parent.isVue) && !isNullOrUndefined(args) && args.requestType !== 'infiniteScroll' && !args.isFrozen) {\n                clearReactVueTemplates(_this.parent, ['footerTemplate']);\n            }\n            if (_this.parent.isAngular && _this.parent.allowGrouping && _this.parent.groupSettings.captionTemplate\n                && !(!isNullOrUndefined(args) && args.requestType === 'infiniteScroll')) {\n                _this.parent.destroyTemplate(['groupSettings_captionTemplate']);\n            }\n            _this.parent.notify(events.dataReady, extend({ count: dataArgs.count, result: dataArgs.result, aggregates: dataArgs.aggregates, loadSummaryOnEmpty: false }, args));\n            if ((gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping'))\n                && (args && args.requestType !== 'filtering')) {\n                _this.headerRenderer.refreshUI();\n            }\n            if (len) {\n                if (isGroupAdaptive(gObj)) {\n                    var content = 'content';\n                    args.scrollTop = { top: _this.contentRenderer[\"\" + content].scrollTop };\n                }\n                if (!isInfiniteDelete) {\n                    if (_this.parent.enableImmutableMode) {\n                        _this.contentRenderer.immutableModeRendering(args);\n                    }\n                    else {\n                        _this.contentRenderer.refreshContentRows(args);\n                    }\n                }\n                else {\n                    _this.parent.notify(events.infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });\n                }\n            }\n            else {\n                if (args && args.isCaptionCollapse) {\n                    return;\n                }\n                if (!gObj.getColumns().length) {\n                    gObj.element.innerHTML = '';\n                    alert(_this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n                    return;\n                }\n                _this.contentRenderer.setRowElements([]);\n                _this.contentRenderer.setRowObjects([]);\n                _this.ariaService.setBusy(_this.parent.getContent().querySelector('.' + literals.content), false);\n                gObj.removeMaskRow();\n                _this.renderEmptyRow();\n                if (gObj.enableColumnVirtualization && !len) {\n                    _this.parent.notify(events.contentReady, { rows: gObj.getRowsObject(), args: {} });\n                }\n                if (args) {\n                    var action = (args.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, args);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        args.rows = [];\n                        args.isFrozen = !args.isFrozen;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                if (_this.parent.autoFit) {\n                    _this.parent.preventAdjustColumns();\n                }\n                _this.parent.hideSpinner();\n            }\n            _this.parent.notify(events.toolbarRefresh, {});\n            _this.setRowCount(_this.parent.getCurrentViewRecords().length);\n            if ('query' in e) {\n                _this.parent.getDataModule().isQueryInvokedFromData = false;\n            }\n        });\n    };\n    /**\n     * @param {object} e - specifies the object\n     * @param {Object[]} e.result - specifies the result\n     * @param {NotifyArgs} args - specifies the args\n     * @returns {void}\n     * @hidden\n     */\n    Render.prototype.dataManagerFailure = function (e, args) {\n        if (!isNullOrUndefined(this.parent.contentModule)) {\n            this.ariaService.setOptions(this.parent.getContent().querySelector('.' + literals.content), { busy: false, invalid: true });\n            this.setRowCount(1);\n        }\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n        this.parent.removeMaskRow();\n        if (args.requestType === 'save' || args.requestType === 'delete'\n            || args.name === 'bulk-save') {\n            return;\n        }\n        this.parent.currentViewData = [];\n        this.renderEmptyRow();\n        if (!this.parent.isInitialLoad) {\n            this.parent.focusModule.setFirstFocusableTabIndex();\n        }\n        this.parent.log('actionfailure', { error: e });\n    };\n    Render.prototype.setRowCount = function (dataRowCount) {\n        this.ariaService.setOptions(this.parent.element, {\n            rowcount: dataRowCount ? dataRowCount.toString() : '1'\n        });\n    };\n    Render.prototype.isInfiniteEnd = function (args) {\n        return this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && args.requestType === 'delete';\n    };\n    Render.prototype.updatesOnInitialRender = function (e) {\n        this.isLayoutRendered = true;\n        var isEmptyCol = false;\n        if (this.parent.columns.length < 1) {\n            this.buildColumns(e.result[0]);\n            isEmptyCol = true;\n        }\n        prepareColumns(this.parent.columns, null, this.parent);\n        if (isEmptyCol) {\n            this.parent.notify(events.refreshSplitFrozenColumn, {});\n        }\n        this.headerRenderer.renderTable();\n        this.contentRenderer.renderTable();\n        this.parent.isAutoGen = true;\n        this.parent.notify(events.autoCol, {});\n    };\n    Render.prototype.iterateComplexColumns = function (obj, field, split) {\n        var keys = Object.keys(obj);\n        for (var i = 0; i < keys.length; i++) {\n            var childKeys = typeof obj[keys[parseInt(i.toString(), 10)]] === 'object'\n                && obj[keys[parseInt(i.toString(), 10)]] && !(obj[keys[parseInt(i.toString(), 10)]] instanceof Date) ?\n                Object.keys(obj[keys[parseInt(i.toString(), 10)]]) : [];\n            if (childKeys.length) {\n                this.iterateComplexColumns(obj[keys[parseInt(i.toString(), 10)]], field + (keys[parseInt(i.toString(), 10)] + '.'), split);\n            }\n            else {\n                split[this.counter] = field + keys[parseInt(i.toString(), 10)];\n                this.counter++;\n            }\n        }\n    };\n    Render.prototype.buildColumns = function (record) {\n        var cols = [];\n        var complexCols = {};\n        this.iterateComplexColumns(record, '', complexCols);\n        var columns = Object.keys(complexCols).filter(function (e) { return complexCols[\"\" + e] !== 'BlazId'; }).\n            map(function (field) { return complexCols[\"\" + field]; });\n        for (var i = 0, len = columns.length; i < len; i++) {\n            cols[parseInt(i.toString(), 10)] = { 'field': columns[parseInt(i.toString(), 10)] };\n            if (this.parent.enableColumnVirtualization) {\n                cols[parseInt(i.toString(), 10)].width = !isNullOrUndefined(cols[parseInt(i.toString(), 10)].width) ?\n                    cols[parseInt(i.toString(), 10)].width : 200;\n            }\n        }\n        this.parent.setProperties({ 'columns': cols }, true);\n    };\n    Render.prototype.instantiateRenderer = function () {\n        this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n        this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        var cellrender = this.locator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragHIcon, new RowDragDropHeaderRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailFooterIntent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragIcon, new RowDragDropRenderer(this.parent, this.locator));\n    };\n    Render.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on('refreshdataSource', this.dataManagerSuccess, this);\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.refreshComplete, this.refreshComplete, this);\n        this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n        this.parent.on(events.showEmptyGrid, function () { _this.emptyGrid = true; }, this);\n        this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n    };\n    /**\n     * @param {ReturnType} e - specifies the Return type\n     * @returns {Promise<Object>} returns the object\n     * @hidden\n     */\n    Render.prototype.validateGroupRecords = function (e) {\n        var _this = this;\n        var index = e.result.length - 1;\n        if (index < 0) {\n            return Promise.resolve(e);\n        }\n        var group0 = e.result[0];\n        var groupN = e.result[parseInt(index.toString(), 10)];\n        var predicate = [];\n        var addWhere = function (input) {\n            var groups = [group0, groupN];\n            for (var i = 0; i < groups.length; i++) {\n                predicate.push(new Predicate('field', '==', groups[parseInt(i.toString(), 10)].field).and(_this.getPredicate('key', 'equal', groups[parseInt(i.toString(), 10)].key)));\n            }\n            input.where(Predicate.or(predicate));\n        };\n        var query = new Query();\n        addWhere(query);\n        var curDm = new DataManager(e.result);\n        var curFilter = curDm.executeLocal(query);\n        var newQuery = this.data.generateQuery(true);\n        var rPredicate = [];\n        if (this.data.isRemote()) {\n            var groups = [group0, groupN];\n            for (var i = 0; i < groups.length; i++) {\n                rPredicate.push(this.getPredicate(groups[parseInt(i.toString(), 10)].field, 'equal', groups[parseInt(i.toString(), 10)].key));\n            }\n            newQuery.where(Predicate.or(rPredicate));\n        }\n        else {\n            addWhere(newQuery);\n        }\n        var deferred = new Deferred();\n        this.data.getData({}, newQuery).then(function (r) {\n            _this.updateGroupInfo(curFilter, r.result);\n            deferred.resolve(e);\n        }).catch(function (e) { return deferred.reject(e); });\n        return deferred.promise;\n    };\n    /**\n     * @param {string} key - Defines the key\n     * @param {string} operator - Defines the operator\n     * @param {string | number | Date} value - Defines the value\n     * @returns {Predicate} - Returns the predicate\n     * @hidden */\n    Render.prototype.getPredicate = function (key, operator, value) {\n        if (value instanceof Date) {\n            return getDatePredicate({ field: key, operator: operator, value: value });\n        }\n        return new Predicate(key, operator, value);\n    };\n    /**\n     * @param {Object[]} current - Defines the current object\n     * @param {Object[]} untouched - Defines the object needs to merge\n     * @returns {Object[]} - Returns the updated group information\n     * @hidden */\n    Render.prototype.updateGroupInfo = function (current, untouched) {\n        var dm = new DataManager(untouched);\n        var elements = current;\n        for (var i = 0; i < elements.length; i++) {\n            var updatedGroup = dm.executeLocal(new Query()\n                .where(new Predicate('field', '==', elements[parseInt(i.toString(), 10)].field).and(this.getPredicate('key', 'equal', elements[parseInt(i.toString(), 10)].key))))[0];\n            if (!isNullOrUndefined(updatedGroup)) {\n                elements[parseInt(i.toString(), 10)].count = updatedGroup.count;\n                var itemGroup = elements[parseInt(i.toString(), 10)].items;\n                var updatedGroupItem = updatedGroup.items;\n                if (itemGroup.GroupGuid) {\n                    elements[parseInt(i.toString(), 10)].items =\n                        this.updateGroupInfo(elements[parseInt(i.toString(), 10)].items, updatedGroup.items);\n                }\n                var rows = this.parent.aggregates;\n                for (var j = 0; j < rows.length; j++) {\n                    var row = rows[parseInt(j.toString(), 10)];\n                    for (var k = 0; k < row.columns.length; k++) {\n                        var column = row.columns[parseInt(k.toString(), 10)];\n                        var types = column.type instanceof Array ? (column.type) : [(column.type)];\n                        for (var l = 0; l < types.length; l++) {\n                            var key = column.field + ' - ' + types[parseInt(l.toString(), 10)].toLowerCase();\n                            var data = itemGroup.level ? updatedGroupItem.records : updatedGroup.items;\n                            var context = this.parent;\n                            if (types[parseInt(l.toString(), 10)] === 'Custom') {\n                                var data_1 = itemGroup.level ? updatedGroupItem : updatedGroup;\n                                var temp = column\n                                    .customAggregate;\n                                if (typeof temp === 'string') {\n                                    temp = getValue(temp, window);\n                                }\n                                elements[parseInt(i.toString(), 10)].aggregates[\"\" + key] = temp ? temp.call(context, data_1, row.columns[parseInt(k.toString(), 10)]) : '';\n                            }\n                            else {\n                                elements[parseInt(i.toString(), 10)].aggregates[\"\" + key] = DataUtil.aggregates[types[parseInt(l.toString(), 10)].toLowerCase()](data, row.columns[parseInt(k.toString(), 10)].field);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return current;\n    };\n    return Render;\n}());\nexport { Render };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}