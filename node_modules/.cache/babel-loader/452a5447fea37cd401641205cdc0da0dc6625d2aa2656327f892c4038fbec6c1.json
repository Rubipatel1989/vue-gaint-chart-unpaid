{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.every.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport \"core-js/modules/esnext.iterator.take.js\";\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { remove, createElement, closest, formatUnit, Browser, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, removeClass } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\nimport { isGroupAdaptive, ensureLastRow, ensureFirstRow, getEditedDataIndex, getTransformValues, checkIsVirtual, getVisiblePage, parentsUntil } from '../base/util';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\nimport * as literals from '../base/string-literals';\n/**\n * VirtualContentRenderer\n *\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */function (_super) {\n  __extends(VirtualContentRenderer, _super);\n  function VirtualContentRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n    _this.prevHeight = 0;\n    /** @hidden */\n    _this.startIndex = 0;\n    _this.preStartIndex = 0;\n    _this.preventEvent = false;\n    _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n    /** @hidden */\n    _this.offsets = {};\n    _this.tmpOffsets = {};\n    /** @hidden */\n    _this.virtualEle = new VirtualElementHandler();\n    _this.offsetKeys = [];\n    _this.isFocused = false;\n    _this.isSelection = false;\n    _this.isBottom = false;\n    _this.diff = 0;\n    _this.heightChange = false;\n    /** @hidden */\n    _this.isTop = false;\n    _this.empty = undefined;\n    _this.isCancel = false;\n    _this.requestTypes = ['beginEdit', 'cancel', 'delete', 'add', 'save', 'sorting'];\n    _this.isNormaledit = _this.parent.editSettings.mode === 'Normal';\n    /** @hidden */\n    _this.virtualData = {};\n    _this.virtualInfiniteData = {};\n    _this.emptyRowData = {};\n    _this.isContextMenuOpen = false;\n    _this.isSelectionScroll = false;\n    _this.validationCheck = false;\n    _this.locator = locator;\n    _this.eventListener('on');\n    _this.widthServices = locator.getService('widthService');\n    _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n    _this.vgenerator = _this.generator;\n    return _this;\n  }\n  VirtualContentRenderer.prototype.renderTable = function () {\n    this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n    _super.prototype.renderTable.call(this);\n    this.virtualEle.table = this.getTable();\n    this.virtualEle.content = this.content = this.getPanel().querySelector('.' + literals.content);\n    this.virtualEle.renderWrapper(this.parent.height);\n    this.virtualEle.renderPlaceHolder();\n    if (!(!this.parent.enableVirtualization && this.parent.enableColumnVirtualization)) {\n      this.virtualEle.wrapper.style.position = 'absolute';\n    }\n    var debounceEvent = this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline;\n    var opt = {\n      container: this.content,\n      pageHeight: this.getBlockHeight() * 2,\n      debounceEvent: debounceEvent,\n      axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n    };\n    this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n  };\n  VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n    this.getTable().appendChild(tbody);\n    if (this.parent.frozenRows) {\n      this.parent.getHeaderContent().querySelector(literals.tbody).innerHTML = '';\n    }\n    this.virtualEle.adjustTable(0, 0);\n  };\n  VirtualContentRenderer.prototype.getReorderedFrozenRows = function (args) {\n    var blockIndex = args.virtualInfo.blockIndexes;\n    var colsIndex = args.virtualInfo.columnIndexes;\n    var page = args.virtualInfo.page;\n    args.virtualInfo.blockIndexes = [1, 2];\n    args.virtualInfo.page = 1;\n    args.virtualInfo.columnIndexes = [];\n    var recordslength = this.parent.getCurrentViewRecords().length;\n    var firstRecords = this.parent.renderModule.data.dataManager.dataSource.json.slice(0, recordslength);\n    var virtualRows = this.vgenerator.generateRows(firstRecords, args);\n    args.virtualInfo.blockIndexes = blockIndex;\n    args.virtualInfo.columnIndexes = colsIndex;\n    args.virtualInfo.page = page;\n    return virtualRows.splice(0, this.parent.frozenRows);\n  };\n  VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n    if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization && (scrollArgs.direction === 'up' || scrollArgs.direction === 'down')) {\n      return;\n    }\n    this.scrollAfterEdit();\n    if (this.parent.enablePersistence) {\n      this.parent.scrollPosition = scrollArgs.offset;\n    }\n    if (this.preventEvent || this.parent.isDestroyed) {\n      this.preventEvent = false;\n      return;\n    }\n    if (isNullOrUndefined(document.activeElement)) {\n      this.isFocused = false;\n    } else {\n      this.isFocused = this.content === closest(document.activeElement, '.' + literals.content) || this.content === document.activeElement;\n    }\n    if (this.parent.islazyloadRequest && scrollArgs.direction === 'down') {\n      this.parent.removeMaskRow();\n      this.parent.islazyloadRequest = false;\n      return;\n    }\n    var info = scrollArgs.sentinel;\n    var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n    if (isGroupAdaptive(this.parent)) {\n      if (viewInfo.blockIndexes && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString()) {\n        this.parent.removeMaskRow();\n        return;\n      } else {\n        viewInfo.event = 'refresh-virtual-block';\n        if (!isNullOrUndefined(viewInfo.offsets)) {\n          viewInfo.offsets.top = this.content.scrollTop;\n        }\n        this.parent.pageSettings.currentPage = viewInfo.page;\n        if (this.parent.enableVirtualMaskRow) {\n          this.parent.showMaskRow(info.axis);\n          this.parent.addShimmerEffect();\n        }\n        if (this.parent.editSettings.showAddNewRow) {\n          this.parent.closeEdit();\n        }\n        this.parent.notify(viewInfo.event, {\n          requestType: 'virtualscroll',\n          virtualInfo: viewInfo,\n          focusElement: scrollArgs.focusElement\n        });\n        return;\n      }\n    }\n    if (this.prevInfo && (info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString() || info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString())) {\n      this.parent.removeMaskRow();\n      if (Browser.isIE) {\n        this.parent.hideSpinner();\n      }\n      this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n      if (info.axis === 'Y') {\n        this.restoreEdit();\n      }\n      if (this.parent.groupSettings.enableLazyLoading && this.prevInfo.blockIndexes[0] === 1 && viewInfo.blockIndexes[0] === 1 && scrollArgs.direction === 'up') {\n        this.virtualEle.adjustTable(0, viewInfo.offsets.top < this.offsets[1] ? 0 : this.getBlockHeight());\n      }\n      return;\n    }\n    this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n    if (!(!this.parent.enableVirtualization && this.parent.enableColumnVirtualization)) {\n      this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n    }\n    this.requestType = 'virtualscroll';\n    if (this.parent.enableVirtualMaskRow) {\n      this.parent.showMaskRow(info.axis);\n      this.parent.addShimmerEffect();\n    }\n    this.parent.islazyloadRequest = false;\n    if (this.parent.editSettings.showAddNewRow) {\n      this.parent.closeEdit();\n    }\n    this.parent.notify(events.renderResponsiveColumnChooserDiv, {\n      action: 'clear'\n    });\n    if (!(!this.parent.isInitialLoad && this.parent.enablePersistence)) {\n      this.parent.notify(viewInfo.event, {\n        requestType: 'virtualscroll',\n        virtualInfo: viewInfo,\n        focusElement: scrollArgs.focusElement\n      });\n    }\n    if (this.parent.enableColumnVirtualization && !this.parent.getContentTable().querySelector('tr.e-row')) {\n      this.parent.removeMaskRow();\n      this.appendContent(undefined, undefined, {\n        requestType: 'virtualscroll',\n        virtualInfo: viewInfo,\n        focusElement: scrollArgs.focusElement\n      });\n      this.prevInfo = viewInfo;\n    }\n  };\n  VirtualContentRenderer.prototype.block = function (blk) {\n    return this.vgenerator.isBlockAvailable(blk);\n  };\n  VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n    var isBlockAdded = false;\n    var tempBlocks = [];\n    var infoType = {\n      direction: direction,\n      sentinelInfo: info,\n      offsets: e,\n      startIndex: this.preStartIndex,\n      endIndex: this.preEndIndex\n    };\n    infoType.page = this.getPageFromTop(e.top, infoType);\n    infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n    infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n    var blocks = this.ensureBlocks(infoType);\n    if (this.activeKey === 'upArrow' && infoType.blockIndexes.toString() !== blocks.toString()) {\n      // To avoid dupilcate row index problem in key focus support\n      var newBlock = blocks[blocks.length - 1];\n      if (infoType.blockIndexes.indexOf(newBlock) === -1) {\n        isBlockAdded = true;\n      }\n    }\n    if (!(!this.parent.enableVirtualization && this.parent.enableColumnVirtualization)) {\n      infoType.blockIndexes = blocks;\n    }\n    infoType.loadNext = !blocks.filter(function (val) {\n      return tempBlocks.indexOf(val) === -1;\n    }).every(this.block.bind(this));\n    infoType.event = infoType.loadNext || infoType.loadSelf ? modelChanged : refreshVirtualBlock;\n    infoType.nextInfo = infoType.loadNext ? {\n      page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1))\n    } : {};\n    if (isBlockAdded) {\n      infoType.blockIndexes = [infoType.blockIndexes[0] - 1, infoType.blockIndexes[0], infoType.blockIndexes[0] + 1];\n    }\n    if (this.activeKey === 'downArrow' && !isNaN(this.rowIndex)) {\n      var firstBlock = Math.ceil(this.rowIndex / this.getBlockSize());\n      if (firstBlock !== 1 && (infoType.blockIndexes[1] !== firstBlock || infoType.blockIndexes.length < 3)) {\n        infoType.blockIndexes = [firstBlock - 1, firstBlock, firstBlock + 1];\n      }\n    }\n    infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n    if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n      infoType.event = refreshVirtualBlock;\n    }\n    return infoType;\n  };\n  VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n    var _this = this;\n    var index = info.blockIndexes[info.block];\n    var mIdx;\n    var old = index;\n    var max = Math.max;\n    var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n    this.prevInfo = this.prevInfo || this.vgenerator.getData();\n    indexes = indexes.filter(function (val, ind) {\n      return indexes.indexOf(val) === ind;\n    });\n    var preventSelf = false;\n    if (checkIsVirtual(this.parent) && info.direction === 'up' && ((info.page + 1 === this.prevInfo.page || info.page === this.prevInfo.page) && info.block === 1 || info.page === this.prevInfo.page && indexes.length === 2) && this.vgenerator.isBlockAvailable(info.blockIndexes[1] + 1)) {\n      preventSelf = info.page + 1 === this.prevInfo.page && info.block === 1;\n      index += 1;\n      indexes = [max(index - 1, 1), index, index + 1];\n    }\n    if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n      return indexes;\n    }\n    if (info.loadSelf && !preventSelf || info.direction === 'down' && this.isEndBlock(old)) {\n      indexes = this.vgenerator.getBlockIndexes(info.page);\n    }\n    indexes.some(function (val, ind) {\n      var result = val === (isGroupAdaptive(_this.parent) ? _this.getGroupedTotalBlocks() : _this.getTotalBlocks());\n      if (result) {\n        mIdx = ind;\n      }\n      return result;\n    });\n    if (mIdx !== undefined) {\n      indexes = indexes.slice(0, mIdx + 1);\n      if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n        indexes = [indexes[0] - 1, indexes[0]];\n      }\n    }\n    return indexes;\n  };\n  // tslint:disable-next-line:max-func-body-length\n  VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n    var _this = this;\n    // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n    var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page && this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n    this.prevInfo = this.prevInfo || e.virtualInfo;\n    var cBlock = info.columnIndexes[0] - 1;\n    var cOffset = this.getColumnOffset(cBlock);\n    var width;\n    var blocks = info.blockIndexes;\n    if (this.parent.groupSettings.columns.length) {\n      this.refreshOffsets();\n    }\n    if (this.parent.height === '100%') {\n      this.parent.element.style.height = '100%';\n    }\n    var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height : this.parent.element.getBoundingClientRect().height;\n    if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) {\n      vHeight = 0;\n    }\n    var reduceWidth = 0;\n    if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid()) {\n      var frzLeftWidth_1 = 0;\n      this.parent.getColumns().filter(function (col) {\n        if (col.visible) {\n          reduceWidth += parseInt(col.width.toString(), 10);\n          if (col.freeze === 'Left') {\n            frzLeftWidth_1 += parseInt(col.width.toString(), 10);\n          }\n        }\n      });\n      var cIndex = info.columnIndexes;\n      width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n      if (cBlock > this.parent.getVisibleFrozenLeftCount()) {\n        cOffset = cOffset - frzLeftWidth_1;\n      }\n      this.resetStickyLeftPos(cOffset, newChild);\n    }\n    if (!this.requestTypes.some(function (value) {\n      return value === _this.requestType;\n    })) {\n      var translate = this.getTranslateY(this.content.scrollTop, vHeight, info);\n      if (this.parent.groupSettings.enableLazyLoading && info && this.prevInfo && this.prevInfo.blockIndexes[0] === 1 && info.blockIndexes[0] === 1 && info.direction === 'up') {\n        this.virtualEle.adjustTable(0, this.content.scrollTop < this.offsets[1] ? 0 : this.getBlockHeight());\n      } else {\n        this.virtualEle.adjustTable(cOffset, translate);\n      }\n    }\n    if (this.parent.enableColumnVirtualization) {\n      this.header.virtualEle.adjustTable(cOffset, 0);\n    }\n    if (this.parent.enableColumnVirtualization) {\n      var cIndex = info.columnIndexes;\n      width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n      if (this.parent.isFrozenGrid()) {\n        width = reduceWidth.toString();\n        if (this.parent.allowResizing) {\n          this.parent.getHeaderTable().style.width = reduceWidth + 'px';\n          this.parent.getContentTable().style.width = reduceWidth + 'Px';\n        }\n      }\n      this.header.virtualEle.setWrapperWidth(width);\n    }\n    this.virtualEle.setWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n    if (this.parent.enableColumnVirtualization && isNullOrUndefined(target) && isNullOrUndefined(newChild)) {\n      return;\n    }\n    if (!isNullOrUndefined(target) && !isNullOrUndefined(target.parentNode)) {\n      remove(target);\n    }\n    var tbody = this.parent.element.querySelector('.' + literals.content).querySelector(literals.tbody);\n    if (tbody) {\n      remove(tbody);\n      target = null;\n    }\n    var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n    if (!isReact) {\n      target = this.parent.createElement(literals.tbody, {\n        attrs: {\n          role: 'rowgroup'\n        }\n      });\n      target.appendChild(newChild);\n    } else {\n      target = newChild;\n    }\n    if (this.parent.frozenRows && e.requestType === 'virtualscroll' && (this.parent.pageSettings.currentPage === 1 || this.isInfiniteColumnvirtualization())) {\n      for (var i = 0; i < this.parent.frozenRows; i++) {\n        target.children[0].remove();\n      }\n    }\n    this.getTable().appendChild(target);\n    this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n    if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization && (info.direction === 'right' || info.direction === 'left')) {\n      this.content.scrollTop = this.currentInfo.offsets.top;\n      this.content.scrollLeft = this.currentInfo.offsets.left;\n    }\n    if (this.parent.groupSettings.columns.length) {\n      if (!isGroupAdaptive(this.parent) && info.direction === 'up') {\n        var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n        var sTop = this.content.scrollTop;\n        this.content.scrollTop = sTop + blk;\n      }\n      this.setVirtualHeight();\n      if (!this.parent.groupSettings.enableLazyLoading) {\n        this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n      }\n    }\n    if (e.requestType === 'ungrouping' && !this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length === 0) {\n      this.observer.setPageHeight(this.getBlockHeight() * 2);\n    }\n    this.prevInfo = info;\n    if (this.isFocused && this.activeKey !== 'downArrow' && this.activeKey !== 'upArrow') {\n      this.content.focus();\n    }\n    var lastPage = Math.ceil(this.getTotalBlocks() / 2);\n    if (this.isBottom) {\n      this.isBottom = false;\n      this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 1];\n    }\n    if ((this.parent.pageSettings.currentPage + 1 === lastPage || this.parent.pageSettings.currentPage === lastPage) && blocks.length === 2 && e.requestType === 'delete') {\n      this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 1];\n    }\n    if (this.parent.pageSettings.currentPage === lastPage && blocks.length === 1) {\n      this.isBottom = true;\n      this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 2];\n    }\n    if (this.isTop) {\n      this.parent.getContent().firstElementChild.scrollTop = 0;\n      this.isTop = false;\n    }\n    if (e.requestType === 'virtualscroll' && e.virtualInfo.sentinelInfo.axis === 'X') {\n      this.parent.notify(events.autoCol, {});\n    }\n    this.focusCell(e);\n    this.restoreEdit(e);\n    this.restoreAdd();\n    this.ensureSelectedRowPosition();\n    this.validationScrollLeft();\n    if (this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization) {\n      this.widthServices.refreshFrozenScrollbar();\n    }\n    if (!this.initialRowTop) {\n      var gridTop = this.parent.element.getBoundingClientRect().top;\n      if (this.parent.getRowByIndex(0)) {\n        this.initialRowTop = this.parent.getRowByIndex(0).getBoundingClientRect().top - gridTop;\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.validationScrollLeft = function () {\n    if (this.validationCheck) {\n      if (this.validationCol) {\n        var offset = this.vgenerator.cOffsets[this.validationCol.index - this.parent.getVisibleFrozenColumns() - 1];\n        this.validationCol = null;\n        this.content.scrollLeft = offset;\n      } else {\n        this.validationCheck = false;\n        this.parent.editModule.editFormValidate();\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.ensureSelectedRowPosition = function () {\n    if (!this.isSelection && this.isSelectionScroll && !isNullOrUndefined(this.selectRowIndex)) {\n      this.isSelectionScroll = false;\n      var row = this.parent.getRowByIndex(this.selectRowIndex);\n      if (row && !this.isRowInView(row)) {\n        this.rowSelected({\n          rowIndex: this.selectRowIndex,\n          row: row\n        }, true);\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  VirtualContentRenderer.prototype.focusCell = function (e) {\n    if (this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n      return;\n    }\n    var row = this.parent.getRowByIndex(this.rowIndex);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var cell = row.cells[this.cellIndex];\n    cell.focus({\n      preventScroll: true\n    });\n    if (!this.parent.selectionSettings.checkboxOnly) {\n      this.parent.selectRow(parseInt(row.getAttribute(literals.dataRowIndex), 10));\n    }\n    this.activeKey = this.empty;\n  };\n  VirtualContentRenderer.prototype.restoreEdit = function (e) {\n    if (this.isNormaledit) {\n      if (this.parent.editSettings.allowEditing && this.parent.editModule && !isNullOrUndefined(this.editedRowIndex)) {\n        var row = this.getRowByIndex(this.editedRowIndex);\n        var content = this.content;\n        var keys = Object.keys(this.virtualData);\n        var isXaxis = e && e.virtualInfo && e.virtualInfo.sentinelInfo.axis === 'X';\n        if (keys.length && row && !content.querySelector('.' + literals.editedRow) && ['sorting', 'filtering', 'grouping', 'refresh', 'searching', 'ungrouping', 'reorder'].indexOf(e.requestType) === -1) {\n          var top_1 = row.getBoundingClientRect().top - this.parent.element.getBoundingClientRect().top;\n          if (isXaxis || top_1 < this.content.offsetHeight && top_1 > this.parent.getRowHeight()) {\n            this.parent.isEdit = false;\n            this.parent.editModule.startEdit(row);\n          }\n        }\n        if (row && this.content.querySelector('.' + literals.editedRow) && !keys.length) {\n          var rowData = !this.parent.enableVirtualization && this.parent.enableColumnVirtualization ? this.enableCacheOnInfiniteColumnVirtual() ? this.virtualInfiniteData : extend({}, this.parent.getCurrentViewRecords()[this.editedRowIndex]) : extend({}, this.getRowObjectByIndex(this.editedRowIndex));\n          this.virtualData = this.getVirtualEditedData(rowData);\n        }\n      }\n      this.restoreAdd();\n    }\n  };\n  VirtualContentRenderer.prototype.getVirtualEditedData = function (rowData) {\n    var editForms = [].slice.call(this.parent.element.getElementsByClassName('e-gridform'));\n    var isFormDestroyed = this.parent.editModule && this.parent.editModule.formObj && this.parent.editModule.formObj.isDestroyed;\n    if (!isFormDestroyed) {\n      for (var i = 0; i < editForms.length; i++) {\n        rowData = this.parent.editModule.getCurrentEditedData(editForms[parseInt(i.toString(), 10)], rowData);\n      }\n    }\n    return rowData;\n  };\n  VirtualContentRenderer.prototype.restoreAdd = function () {\n    var startAdd = !this.parent.element.querySelector('.' + literals.addedRow);\n    if (this.isNormaledit && this.isAdd && startAdd) {\n      var isTop = this.parent.editSettings.newRowPosition === 'Top' && this.content.scrollTop < this.parent.getRowHeight();\n      var isBottom = this.parent.editSettings.newRowPosition === 'Bottom' && this.parent.pageSettings.currentPage === this.maxPage;\n      if (isTop || isBottom) {\n        this.parent.isEdit = false;\n        this.parent.addRecord();\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.onDataReady = function (e) {\n    if (!isNullOrUndefined(e.count)) {\n      this.count = e.count;\n      this.maxPage = Math.ceil((this.parent.groupSettings.columns.length && this.parent.vcRows.length ? this.parent.vcRows.length : e.count) / this.parent.pageSettings.pageSize);\n    }\n    this.vgenerator.checkAndResetCache(e.requestType);\n    if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined].some(function (value) {\n      return e.requestType === value;\n    })) {\n      this.refreshOffsets();\n    }\n    this.setVirtualHeight();\n    this.resetScrollPosition(e.requestType);\n  };\n  /**\n   * @param {number} height - specifies the height\n   * @returns {void}\n   * @hidden\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  VirtualContentRenderer.prototype.setVirtualHeight = function (height) {\n    var width = this.parent.enableColumnVirtualization ? this.getColumnOffset(this.parent.getVisibleColumns().length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n    var virtualHeight = this.offsets[isGroupAdaptive(this.parent) && this.count !== 0 ? this.getGroupedTotalBlocks() : this.getTotalBlocks()];\n    if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) {\n      virtualHeight = 0;\n    }\n    var totalBlocks = isGroupAdaptive(this.parent) && this.count !== 0 ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n    var lastPage = Math.ceil(totalBlocks / 2);\n    var placeHolderBottom = Math.round(this.virtualEle.placeholder.getBoundingClientRect().bottom);\n    var wrapperBottom = Math.round(this.virtualEle.wrapper.getBoundingClientRect().bottom);\n    if ((this.currentInfo.page === lastPage || this.currentInfo.page + 1 === lastPage) && this.currentInfo.direction === 'down' && placeHolderBottom > wrapperBottom && !this.diff) {\n      this.diff = placeHolderBottom - wrapperBottom;\n    }\n    if (this.diff && this.currentInfo.page === lastPage && placeHolderBottom > wrapperBottom) {\n      virtualHeight -= this.diff;\n      this.heightChange = true;\n    } else if (this.diff && this.heightChange && this.requestType === 'virtualscroll') {\n      virtualHeight -= this.diff;\n      this.heightChange = false;\n    }\n    this.virtualEle.setVirtualHeight(virtualHeight, width);\n    if (this.virtualEle && this.virtualEle.wrapper) {\n      if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) {\n        this.virtualEle.wrapper.style.minHeight = '';\n      } else {\n        this.virtualEle.wrapper.style.minHeight = !isNullOrUndefined(virtualHeight) ? formatUnit(this.parent.height) : '0px';\n      }\n    }\n    if (this.parent.enableColumnVirtualization) {\n      this.header.virtualEle.setVirtualHeight(1, width);\n    }\n  };\n  /**\n   * @param {number} sTop - specifies the sTop\n   * @param {VirtualInfo} info - specifies the info\n   * @returns {number} - return the page\n   * @hidden\n   */\n  VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n    var _this = this;\n    var total = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n    var page = 0;\n    this.offsetKeys.some(function (offset) {\n      var iOffset = Number(offset);\n      var border = sTop <= _this.offsets[\"\" + offset] || iOffset === total && sTop > _this.offsets[\"\" + offset];\n      if (border) {\n        if (_this.offsetKeys.length % 2 !== 0 && iOffset.toString() === _this.offsetKeys[_this.offsetKeys.length - 2] && sTop <= _this.offsets[_this.offsetKeys.length - 1]) {\n          iOffset = iOffset + 1;\n        }\n        info.block = iOffset % 2 === 0 ? 1 : 0;\n        page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n      }\n      return border;\n    });\n    return page;\n  };\n  VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n    if (info === undefined) {\n      info = {\n        page: this.getPageFromTop(sTop, {})\n      };\n      info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n    }\n    var block = (info.blockIndexes[0] || 1) - 1;\n    var translate = this.getOffset(block);\n    var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n    if (isOnenter) {\n      info = this.prevInfo;\n    }\n    var result = translate > sTop ? this.getOffset(block - 1) : endTranslate < sTop + cHeight ? this.getOffset(block + 1) : translate;\n    var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] - this.tmpOffsets[info.blockIndexes[0]];\n    var totalBlocks = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n    if (result + blockHeight > this.offsets[parseInt(totalBlocks.toString(), 10)]) {\n      result -= result + blockHeight - this.offsets[parseInt(totalBlocks.toString(), 10)];\n    }\n    if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) {\n      result = 0;\n    }\n    return result;\n  };\n  VirtualContentRenderer.prototype.getOffset = function (block) {\n    return Math.min(this.offsets[parseInt(block.toString(), 10)] | 0, this.offsets[this.maxBlock] | 0);\n  };\n  VirtualContentRenderer.prototype.onEntered = function () {\n    var _this = this;\n    return function (element, current, direction, e, isWheel, check) {\n      if ((direction === 'down' || direction === 'up') && !_this.parent.enableVirtualization && _this.parent.enableColumnVirtualization) {\n        return;\n      }\n      if (Browser.isIE && !isWheel && check && !_this.preventEvent && !_this.parent.enableVirtualMaskRow) {\n        _this.parent.showSpinner();\n      }\n      _this.prevInfo = _this.prevInfo || _this.vgenerator.getData();\n      if (_this.parent.enableVirtualMaskRow && !_this.preventEvent) {\n        var firstOffSetKey = parseInt(_this.offsetKeys[0], 10);\n        var lastOffSetKey = parseInt(_this.offsetKeys[_this.offsetKeys.length - 1], 10);\n        var blockIndex = _this.currentInfo.blockIndexes;\n        var viewInfo = _this.getInfoFromView(direction, current, e);\n        var disableShowMaskRow = _this.prevInfo && current.axis === 'X' && _this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString() || direction === 'down' && _this.parent.allowGrouping && _this.parent.groupSettings.columns.length && (_this.parent.allowFiltering && _this.parent.filterSettings.columns.length || _this.parent.searchSettings.key.length) && _this.offsetKeys.length <= 2;\n        if (!(blockIndex && blockIndex[0] === firstOffSetKey && direction === 'up' || blockIndex && blockIndex[blockIndex.length - 1] === lastOffSetKey && direction === 'down' || disableShowMaskRow)) {\n          setTimeout(function () {\n            _this.parent.showMaskRow(current.axis);\n          }, 0);\n        }\n      }\n      var xAxis = current.axis === 'X';\n      var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n      var height = _this.content.getBoundingClientRect().height;\n      var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n      if (_this.parent.isFrozenGrid() && _this.parent.enableColumnVirtualization && _this.currentInfo && _this.currentInfo.columnIndexes) {\n        var cBlock = _this.currentInfo.columnIndexes[0] - 1;\n        var frzLeftWidth_2 = 0;\n        _this.parent.getColumns().filter(function (col) {\n          if (col.visible && col.freeze === 'Left') {\n            frzLeftWidth_2 += parseInt(col.width.toString(), 10);\n          }\n        });\n        if (cBlock > _this.parent.getVisibleFrozenLeftCount()) {\n          x = x - frzLeftWidth_2;\n        }\n      }\n      if (xAxis) {\n        var idx = Object.keys(_this.vgenerator.cOffsets).length - _this.prevInfo.columnIndexes.length;\n        var maxLeft = _this.vgenerator.cOffsets[idx - 1];\n        x = x > maxLeft ? maxLeft : x; //TODO: This fix horizontal scrollbar jumping issue in column virtualization.\n      }\n      if (!_this.parent.enableVirtualization && _this.parent.enableColumnVirtualization) {\n        _this.virtualEle.adjustTable(x, 0);\n      } else {\n        var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n        _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n      }\n      if (_this.parent.enableColumnVirtualization) {\n        _this.header.virtualEle.adjustTable(x, 0);\n        if (_this.parent.isFrozenGrid()) {\n          _this.resetStickyLeftPos(x);\n        }\n      }\n    };\n  };\n  VirtualContentRenderer.prototype.dataBound = function () {\n    this.parent.notify(events.refreshVirtualFrozenHeight, {});\n    if (this.isSelection && this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n      this.parent.selectRow(this.selectedRowIndex);\n    } else {\n      this.activeKey = this.empty;\n      this.requestType = this.empty;\n    }\n  };\n  /**\n   * To calculate the position of frozen cells\n   *\n   * @param {number} valueX - specifies the transform X value\n   * @param {DocumentFragment | HTMLElement} newChild - specifies the element to transform\n   * @returns {void}\n   * @hidden\n   */\n  VirtualContentRenderer.prototype.resetStickyLeftPos = function (valueX, newChild) {\n    var cells = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-leftfreeze,.e-rightfreeze,.e-fixedfreeze')).concat([].slice.call((newChild ? newChild : this.parent.getContent()).querySelectorAll('.e-leftfreeze,.e-rightfreeze,.e-fixedfreeze')));\n    var frzLeftWidth = 0;\n    var frzRightWidth = 0;\n    if (this.parent.getHeaderContent().querySelectorAll('.e-fixedfreeze').length) {\n      frzLeftWidth = this.parent.leftrightColumnWidth('left');\n      frzRightWidth = this.parent.leftrightColumnWidth('right');\n    }\n    if (cells.length) {\n      for (var i = 0; i < cells.length; i++) {\n        var cell = cells[parseInt(i.toString(), 10)];\n        var col = void 0;\n        if (cell.classList.contains('e-rowcell')) {\n          if (isNullOrUndefined(cell.getAttribute('data-colindex')) && cell.querySelector('[e-mappinguid]')) {\n            var uid = cell.querySelector('[e-mappinguid]').getAttribute('e-mappinguid');\n            col = this.parent.getColumnByUid(uid);\n          } else {\n            var idx = parseInt(cell.getAttribute('data-colindex'), 10);\n            col = this.parent.getColumnByIndex(parseInt(idx.toString(), 10));\n          }\n        } else {\n          if (cell.classList.contains('e-headercell') || cell.classList.contains('e-filterbarcell')) {\n            var uid = cell.classList.contains('e-filterbarcell') ? cell.getAttribute('e-mappinguid') : cell.querySelector('[e-mappinguid]').getAttribute('e-mappinguid');\n            col = this.parent.getColumnByUid(uid);\n          }\n        }\n        if (col.freeze === 'Left') {\n          cell.style.left = col.valueX - valueX + 'px';\n        } else if (col.freeze === 'Right') {\n          cell.style.right = col.valueX + valueX + 'px';\n        } else if (col.freeze === 'Fixed') {\n          cell.style.left = frzLeftWidth - valueX + 'px';\n          cell.style.right = frzRightWidth + valueX + 'px';\n        }\n      }\n    }\n    this.parent.translateX = valueX;\n  };\n  VirtualContentRenderer.prototype.rowSelected = function (args, isSelection) {\n    if ((this.isSelection || isSelection) && !this.isLastBlockRow(args.rowIndex)) {\n      var transform = getTransformValues(this.content.firstElementChild);\n      var gridTop = this.parent.element.getBoundingClientRect().top;\n      var rowTop = args.row.getBoundingClientRect().top - gridTop;\n      var height = this.content.getBoundingClientRect().height;\n      var isBottom = height < rowTop;\n      var remainHeight = isBottom ? rowTop - height : this.initialRowTop - rowTop;\n      var translateY = isBottom ? transform.height - remainHeight : transform.height + remainHeight;\n      this.virtualEle.adjustTable(transform.width, translateY);\n      var wrapperInfo = this.virtualEle.wrapper.getBoundingClientRect();\n      var contentInfo = this.content.getBoundingClientRect();\n      if (wrapperInfo.top > contentInfo.top) {\n        this.virtualEle.adjustTable(transform.width, translateY - (wrapperInfo.top - contentInfo.top));\n      }\n      var lastRowTop = this.content.querySelector('tbody').lastElementChild.getBoundingClientRect().top - gridTop;\n      if (lastRowTop < height) {\n        translateY = translateY + (height - (args.row.getBoundingClientRect().top - gridTop));\n        this.virtualEle.adjustTable(transform.width, translateY - this.parent.getRowHeight() / 2);\n      } else if (contentInfo.bottom > wrapperInfo.bottom) {\n        this.virtualEle.adjustTable(transform.width, translateY + (contentInfo.bottom - wrapperInfo.bottom));\n      }\n      if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid()) {\n        this.resetStickyLeftPos(transform.width);\n      }\n    }\n    this.isSelection = false;\n  };\n  VirtualContentRenderer.prototype.isLastBlockRow = function (index) {\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n    var startIdx = this.maxPage * this.parent.pageSettings.pageSize - visibleRowCount;\n    return index >= startIdx;\n  };\n  VirtualContentRenderer.prototype.refreshMaxPage = function () {\n    if (this.parent.groupSettings.columns.length && this.parent.vcRows.length) {\n      this.maxPage = Math.ceil(this.parent.vcRows.length / this.parent.pageSettings.pageSize);\n    }\n  };\n  VirtualContentRenderer.prototype.setVirtualPageQuery = function (args) {\n    var visiblePage = [];\n    if (this.prevInfo && this.prevInfo.blockIndexes) {\n      visiblePage = getVisiblePage(this.prevInfo.blockIndexes);\n    }\n    if ((this.requestType === 'sorting' || this.requestType === 'delete') && visiblePage.length && checkIsVirtual(this.parent)) {\n      args.query.skip(this.parent.pageSettings.pageSize * (visiblePage[0] - 1));\n      args.query.take(this.parent.pageSettings.pageSize * visiblePage.length);\n      args.skipPage = true;\n      return;\n    }\n    var row = this.parent.getContent().querySelector('.e-row');\n    if (this.requestType === 'virtualscroll' && this.vgenerator.currentInfo.blockIndexes) {\n      this.vgenerator.currentInfo = {};\n    }\n    if (row && this.parent.isManualRefresh && this.currentInfo.blockIndexes && (this.currentInfo.blockIndexes.length === 3 || visiblePage.length > 1)) {\n      this.vgenerator.startIndex = parseInt(row.getAttribute('data-rowindex'), 10);\n      this.vgenerator.currentInfo = extend({}, this.currentInfo);\n      this.vgenerator.currentInfo.blockIndexes = this.currentInfo.blockIndexes.slice();\n      var includePrevPage = this.vgenerator.includePrevPage = this.currentInfo.blockIndexes[0] % 2 === 0;\n      if (includePrevPage) {\n        this.vgenerator.startIndex = this.vgenerator.startIndex - this.getBlockSize();\n        this.vgenerator.currentInfo.blockIndexes.unshift(this.currentInfo.blockIndexes[0] - 1);\n      } else {\n        this.vgenerator.currentInfo.blockIndexes.push(this.currentInfo.blockIndexes[this.currentInfo.blockIndexes.length - 1] + 1);\n      }\n      var skip = (this.vgenerator.currentInfo.blockIndexes[0] - 1) * this.getBlockSize();\n      var take = this.vgenerator.currentInfo.blockIndexes.length * this.getBlockSize();\n      args.query.skip(skip);\n      args.query.take(take);\n      args.skipPage = true;\n    }\n  };\n  VirtualContentRenderer.prototype.eventListener = function (action) {\n    var _this = this;\n    this.parent[\"\" + action](dataReady, this.onDataReady, this);\n    this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n    this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n    this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    this.parent.addEventListener(events.rowSelected, this.rowSelected.bind(this));\n    this.parent[\"\" + action](refreshVirtualBlock, this.refreshContentRows, this);\n    this.parent[\"\" + action](events.refreshVirtualLazyLoadCache, this.refreshVirtualLazyLoadCache, this);\n    this.parent[\"\" + action](events.selectVirtualRow, this.selectVirtualRow, this);\n    this.parent[\"\" + action](events.virtaulCellFocus, this.virtualCellFocus, this);\n    this.parent[\"\" + action](events.virtualScrollEditActionBegin, this.editActionBegin, this);\n    this.parent[\"\" + action](events.virtualScrollAddActionBegin, this.addActionBegin, this);\n    this.parent[\"\" + action](events.virtualScrollEdit, this.restoreEdit, this);\n    this.parent[\"\" + action](events.virtualScrollEditSuccess, this.editSuccess, this);\n    this.parent[\"\" + action](events.refreshVirtualCache, this.refreshCache, this);\n    this.parent[\"\" + action](events.editReset, this.resetIsedit, this);\n    this.parent[\"\" + action](events.getVirtualData, this.getVirtualData, this);\n    this.parent[\"\" + action](events.virtualScrollEditCancel, this.editCancel, this);\n    this.parent[\"\" + action](events.refreshVirtualMaxPage, this.refreshMaxPage, this);\n    this.parent[\"\" + action](events.setVirtualPageQuery, this.setVirtualPageQuery, this);\n    this.parent[\"\" + action](events.selectRowOnContextOpen, this.selectRowOnContextOpen, this);\n    this.parent[\"\" + action](events.resetVirtualFocus, this.resetVirtualFocus, this);\n    this.parent[\"\" + action](events.refreshVirtualEditFormCells, this.refreshCells, this);\n    this.parent[\"\" + action](events.scrollToEdit, this.scrollToEdit, this);\n    var event = this.actions;\n    for (var i = 0; i < event.length; i++) {\n      this.parent[\"\" + action](event[parseInt(i.toString(), 10)] + \"-begin\", this.onActionBegin, this);\n    }\n    var fn = function () {\n      _this.observer.observe(function (scrollArgs) {\n        return _this.scrollListener(scrollArgs);\n      }, _this.onEntered());\n      var gObj = _this.parent;\n      if (gObj.enablePersistence && gObj.scrollPosition) {\n        if (gObj.scrollPosition.top > 0) {\n          _this.content.scrollTop = gObj.scrollPosition.top;\n          var scrollValues = {\n            direction: 'down',\n            sentinel: _this.observer.sentinelInfo.down,\n            offset: gObj.scrollPosition,\n            focusElement: gObj.element\n          };\n          _this.scrollListener(scrollValues);\n        }\n        if (gObj.enableColumnVirtualization) {\n          _this.content.scrollLeft = gObj.scrollPosition.left;\n        }\n      }\n      _this.parent.off(contentReady, fn);\n    };\n    this.parent.on(contentReady, fn, this);\n  };\n  VirtualContentRenderer.prototype.refreshVirtualLazyLoadCache = function (e) {\n    var blockIndex = this.currentInfo.blockIndexes;\n    if (isNullOrUndefined(this.currentInfo.blockIndexes)) {\n      blockIndex = [1, 2];\n    }\n    var block;\n    var index;\n    var cache;\n    for (var i = 0; i < blockIndex.length; i++) {\n      var rows = this.vgenerator.cache[blockIndex[parseInt(i.toString(), 10)]];\n      for (var j = 0; j < rows.length; j++) {\n        if (rows[parseInt(j.toString(), 10)].uid === e.uid) {\n          block = blockIndex[parseInt(i.toString(), 10)];\n          index = j;\n          cache = rows;\n          break;\n        }\n      }\n    }\n    if (e.count) {\n      this.vgenerator.cache[parseInt(block.toString(), 10)].splice(index + 1, e.count);\n    } else if (e.rows && e.rows.length) {\n      this.vgenerator.cache[parseInt(block.toString(), 10)] = [].slice.call(cache.slice(0, index + 1)).concat([].slice.call(e.rows)).concat([].slice.call(cache.slice(index + 1, cache.length)));\n    }\n    this.refreshOffsets();\n  };\n  VirtualContentRenderer.prototype.scrollToEdit = function (col) {\n    var allowScroll = true;\n    this.validationCheck = true;\n    if (this.isAdd && this.content.scrollTop > 0) {\n      allowScroll = false;\n      var keys = Object.keys(this.offsets);\n      this.content.scrollTop = this.parent.editSettings.newRowPosition === 'Top' ? 0 : this.offsets[keys.length - 1];\n    }\n    var row = this.parent.getRowByIndex(this.editedRowIndex);\n    if (!row && !isNullOrUndefined(this.editedRowIndex)) {\n      if (!row || !this.isRowInView(row)) {\n        var rowIndex = this.parent.getRowHeight();\n        var scrollTop = this.editedRowIndex * rowIndex;\n        if (!isNullOrUndefined(scrollTop)) {\n          allowScroll = false;\n          this.content.scrollTop = scrollTop;\n        }\n      }\n    }\n    if (col && allowScroll) {\n      var offset = this.vgenerator.cOffsets[col.index - this.parent.getVisibleFrozenColumns() - 1];\n      if (!this.parent.enableColumnVirtualization) {\n        var header = this.parent.getHeaderContent().querySelector('.e-headercelldiv[e-mappinguid=\"' + col.uid + '\"]');\n        offset = header.parentElement.offsetLeft;\n      }\n      if (this.parent.enableColumnVirtualization && this.parent.getVisibleFrozenLeftCount()) {\n        offset -= this.parent.leftrightColumnWidth('left');\n      }\n      this.content.scrollLeft = this.parent.enableRtl ? -Math.abs(offset) : offset;\n    }\n    if (col && !allowScroll) {\n      this.validationCol = col;\n    }\n  };\n  VirtualContentRenderer.prototype.refreshCells = function (rowObj) {\n    rowObj.cells = this.vgenerator.generateCells(rowObj.foreignKeyData);\n  };\n  VirtualContentRenderer.prototype.resetVirtualFocus = function (e) {\n    this.isCancel = e.isCancel;\n  };\n  /**\n   * @param {Object} data - specifies the data\n   * @param {Object} data.virtualData -specifies the data\n   * @param {boolean} data.isAdd - specifies isAdd\n   * @param {boolean} data.isCancel - specifies boolean in cancel\n   * @param {boolean} data.isScroll - specifies boolean for scroll\n   * @returns {void}\n   * @hidden\n   */\n  VirtualContentRenderer.prototype.getVirtualData = function (data) {\n    if (this.isNormaledit) {\n      var error = this.parent.element.querySelector('.e-griderror:not([style*=\"display: none\"])');\n      var keys = Object.keys(this.virtualData);\n      data.isScroll = keys.length !== 0 && this.currentInfo.sentinelInfo && this.currentInfo.sentinelInfo.axis === 'X';\n      if (error) {\n        return;\n      }\n      this.virtualData = keys.length ? this.virtualData : data.virtualData;\n      this.getVirtualEditedData(this.virtualData);\n      data.virtualData = this.virtualData;\n      data.isAdd = this.isAdd || this.parent.editSettings.showAddNewRow;\n      data.isCancel = this.isCancel;\n    }\n  };\n  VirtualContentRenderer.prototype.selectRowOnContextOpen = function (args) {\n    this.isContextMenuOpen = args.isOpen;\n  };\n  VirtualContentRenderer.prototype.editCancel = function (args) {\n    var dataIndex = getEditedDataIndex(this.parent, args.data);\n    if (!isNullOrUndefined(dataIndex)) {\n      args.data = this.parent.getCurrentViewRecords()[parseInt(dataIndex.toString(), 10)];\n    }\n  };\n  VirtualContentRenderer.prototype.editSuccess = function (args) {\n    if (this.isNormaledit) {\n      if (!this.isAdd && args.data) {\n        this.updateCurrentViewData(args.data);\n      }\n      this.isAdd = false;\n    }\n  };\n  VirtualContentRenderer.prototype.updateCurrentViewData = function (data) {\n    var dataIndex = getEditedDataIndex(this.parent, data);\n    if (!isNullOrUndefined(dataIndex)) {\n      this.parent.getCurrentViewRecords()[parseInt(dataIndex.toString(), 10)] = data;\n    }\n  };\n  VirtualContentRenderer.prototype.actionBegin = function (args) {\n    if (args.requestType !== 'virtualscroll') {\n      this.requestType = args.requestType;\n    }\n    if (!args.cancel) {\n      this.parent.notify(events.refreshVirtualFrozenRows, args);\n    }\n  };\n  VirtualContentRenderer.prototype.virtualCellFocus = function (e) {\n    // To decide the action (select or scroll), when using arrow keys for cell focus\n    var ele = document.activeElement;\n    if (!ele.classList.contains(literals.rowCell) && (ele instanceof HTMLInputElement || !isNullOrUndefined(ele.closest('.e-templatecell')))) {\n      ele = ele.closest('.e-rowcell');\n    }\n    if (this.parent.allowGrouping && this.parent.groupSettings.columns.length && ele && (ele.classList.contains(literals.rowCell) || !isNullOrUndefined(parentsUntil(ele, literals.groupCaptionRow))) && e && (e.action === 'upArrow' || e.action === 'downArrow' || e.action === 'shiftEnter')) {\n      var scrollEle = this.parent.getContent().firstElementChild;\n      var scrollEleInfo = scrollEle.getBoundingClientRect();\n      var row = closest(ele, 'tr');\n      var nextFocusRow = e.action === 'downArrow' ? row.nextElementSibling : row.previousElementSibling;\n      var nextFocusRowInfo = !isNullOrUndefined(nextFocusRow) ? nextFocusRow.getBoundingClientRect() : undefined;\n      if (isNullOrUndefined(nextFocusRow) || e.action === 'downArrow' && nextFocusRowInfo.bottom > scrollEleInfo.bottom || (e.action === 'upArrow' || e.action === 'shiftEnter') && nextFocusRowInfo.top < scrollEleInfo.top) {\n        this.activeKey = e.action;\n        this.parent.focusModule.virtualSelectionInfo = {\n          isPending: isNullOrUndefined(nextFocusRow),\n          direction: e.action,\n          event: e\n        };\n        var viewDifference = isNullOrUndefined(nextFocusRow) ? this.parent.getRowHeight() : e.action === 'downArrow' ? nextFocusRowInfo.bottom - scrollEleInfo.bottom : scrollEleInfo.top - nextFocusRowInfo.top;\n        scrollEle.scrollTop = e.action === 'downArrow' ? scrollEle.scrollTop + viewDifference : scrollEle.scrollTop - viewDifference;\n      } else {\n        this.activeKey = this.empty;\n      }\n      return;\n    }\n    if (ele && ele.classList.contains(literals.rowCell) && e && (e.action === 'upArrow' || e.action === 'downArrow' || e.action === 'shiftEnter')) {\n      var rowIndex = parseInt(ele.parentElement.getAttribute(literals.dataRowIndex), 10);\n      if (e && (e.action === 'downArrow' || e.action === 'upArrow' || e.action === 'shiftEnter')) {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        if (e.action === 'downArrow') {\n          rowIndex += 1;\n        } else {\n          rowIndex -= 1;\n        }\n        this.rowIndex = rowIndex;\n        this.cellIndex = parseInt(ele.getAttribute(literals.dataColIndex), 10);\n        var row = this.parent.getRowByIndex(rowIndex);\n        var page = this.parent.pageSettings.currentPage;\n        var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        var emptyRow = false;\n        if (isNullOrUndefined(row)) {\n          emptyRow = true;\n          if (e.action === 'downArrow' && page === this.maxPage - 1 || (e.action === 'upArrow' || e.action === 'shiftEnter') && page === 1) {\n            emptyRow = false;\n          }\n        }\n        if (emptyRow || ensureLastRow(row, this.parent) && e.action === 'downArrow' || ensureFirstRow(row, this.parent.getRowHeight() * 2) && (e.action === 'upArrow' || e.action === 'shiftEnter')) {\n          this.activeKey = e.action;\n          scrollEle.scrollTop = e.action === 'downArrow' ? (rowIndex - visibleRowCount) * this.parent.getRowHeight() : rowIndex * this.parent.getRowHeight();\n        } else {\n          this.activeKey = this.empty;\n        }\n        if (!this.parent.selectionSettings.checkboxOnly) {\n          this.parent.selectRow(rowIndex);\n        }\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.editActionBegin = function (e) {\n    this.editedRowIndex = e.index;\n    var rowData = !this.parent.enableVirtualization && this.parent.enableColumnVirtualization ? extend({}, this.parent.getCurrentViewRecords()[e.index]) : extend({}, this.getRowObjectByIndex(e.index));\n    var keys = Object.keys(this.virtualData);\n    e.data = keys.length && !this.parent.editSettings.showAddNewRow ? this.virtualData : this.isInfiniteColumnvirtualization() ? e.data : rowData;\n    if (this.enableCacheOnInfiniteColumnVirtual()) {\n      this.virtualInfiniteData = e.data;\n    }\n    e.isScroll = keys.length !== 0 && this.currentInfo.sentinelInfo && this.currentInfo.sentinelInfo.axis === 'X';\n  };\n  VirtualContentRenderer.prototype.getEditedRowObject = function () {\n    var rowObjects = this.parent.vcRows;\n    var editedrow;\n    for (var i = 0; i < rowObjects.length; i++) {\n      if (rowObjects[parseInt(i.toString(), 10)].index === this.editedRowIndex) {\n        editedrow = rowObjects[parseInt(i.toString(), 10)];\n      }\n    }\n    return editedrow;\n  };\n  VirtualContentRenderer.prototype.refreshCache = function (args) {\n    if (this.isInfiniteColumnvirtualization()) {\n      return;\n    }\n    var block = Math.ceil((this.editedRowIndex + 1) / this.getBlockSize());\n    if (this.parent.allowPaging && this.parent.enableColumnVirtualization) {\n      block = Math.ceil((this.editedRowIndex + 1 + (this.parent.pageSettings.currentPage - 1) * this.parent.pageSettings.pageSize) / this.getBlockSize());\n    }\n    var index = this.parent.allowPaging && this.parent.enableColumnVirtualization ? this.editedRowIndex % this.getBlockSize() : this.editedRowIndex - (block - 1) * this.getBlockSize();\n    if (this.parent.groupSettings.columns.length) {\n      var editRowObject = this.getEditedRowObject();\n      if (editRowObject) {\n        editRowObject.data = args.data;\n      }\n    } else {\n      this.vgenerator.cache[parseInt(block.toString(), 10)][parseInt(index.toString(), 10)].data = args.data;\n    }\n  };\n  VirtualContentRenderer.prototype.actionComplete = function (args) {\n    if (!(this.parent.enableVirtualization || this.parent.enableColumnVirtualization)) {\n      return;\n    }\n    var editRequestTypes = ['delete', 'save', 'cancel'];\n    var dataActionRequestTypes = ['sorting', 'filtering', 'grouping', 'refresh', 'searching', 'ungrouping', 'reorder'];\n    if (editRequestTypes.some(function (value) {\n      return value === args.requestType;\n    })) {\n      this.refreshOffsets();\n      this.refreshVirtualElement();\n    }\n    if (this.isNormaledit && (dataActionRequestTypes.some(function (value) {\n      return value === args.requestType;\n    }) || editRequestTypes.some(function (value) {\n      return value === args.requestType;\n    }))) {\n      this.isCancel = true;\n      this.isAdd = false || this.parent.editSettings.showAddNewRow;\n      this.editedRowIndex = this.empty;\n      this.virtualData = {};\n      this.virtualInfiniteData = {};\n      if (this.parent.editModule) {\n        this.parent.editModule.editModule.previousData = undefined;\n      }\n    }\n    if (this.parent.enableColumnVirtualization && args.requestType === 'filterAfterOpen' && this.currentInfo.columnIndexes && this.currentInfo.columnIndexes[0] > 0) {\n      this.parent.resetFilterDlgPosition(args.columnName);\n    }\n  };\n  VirtualContentRenderer.prototype.resetIsedit = function () {\n    if (this.parent.enableVirtualization && this.isNormaledit) {\n      if (this.parent.editSettings.allowEditing && Object.keys(this.virtualData).length || this.parent.editSettings.allowAdding && this.isAdd) {\n        this.parent.isEdit = true;\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.scrollAfterEdit = function () {\n    if (this.parent.editModule && this.parent.editSettings.allowEditing && this.isNormaledit) {\n      if (this.parent.element.querySelector('.e-gridform')) {\n        var editForm = this.parent.element.querySelector('.' + literals.editedRow);\n        var addForm = this.parent.element.querySelector('.' + literals.addedRow);\n        if (editForm || addForm) {\n          var rowData = editForm ? extend({}, this.getRowObjectByIndex(this.editedRowIndex)) : extend({}, this.emptyRowData);\n          var keys = Object.keys(this.virtualData);\n          this.virtualData = keys.length ? this.getVirtualEditedData(this.virtualData) : this.getVirtualEditedData(rowData);\n        }\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.createEmptyRowdata = function () {\n    var _this = this;\n    this.parent.columnModel.filter(function (e) {\n      _this.emptyRowData[e.field] = _this.empty;\n    });\n  };\n  VirtualContentRenderer.prototype.addActionBegin = function (args) {\n    if (this.isNormaledit) {\n      if (!Object.keys(this.emptyRowData).length) {\n        this.createEmptyRowdata();\n      }\n      this.isAdd = true;\n      var page = this.parent.pageSettings.currentPage;\n      if (!this.parent.frozenRows && this.content.scrollTop > 0 && this.parent.editSettings.newRowPosition === 'Top') {\n        this.isAdd = true;\n        this.onActionBegin();\n        args.startEdit = false;\n        this.content.scrollTop = 0;\n      }\n      if (page < this.maxPage - 1 && this.parent.editSettings.newRowPosition === 'Bottom') {\n        this.isAdd = true;\n        this.parent.setProperties({\n          pageSettings: {\n            currentPage: this.maxPage - 1\n          }\n        }, true);\n        args.startEdit = false;\n        this.content.scrollTop = this.offsets[this.offsetKeys.length];\n      }\n    }\n  };\n  /**\n   * @param {number} index - specifies the index\n   * @returns {Object} returns the object\n   * @hidden\n   */\n  VirtualContentRenderer.prototype.getRowObjectByIndex = function (index) {\n    var data = this.getRowCollection(index, true);\n    return data;\n  };\n  VirtualContentRenderer.prototype.getBlockSize = function () {\n    return this.parent.pageSettings.pageSize >> 1;\n  };\n  VirtualContentRenderer.prototype.getBlockHeight = function () {\n    return this.getBlockSize() * this.parent.getRowHeight();\n  };\n  VirtualContentRenderer.prototype.isEndBlock = function (index) {\n    var totalBlocks = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n    return index >= totalBlocks || index === totalBlocks - 1;\n  };\n  VirtualContentRenderer.prototype.isOddPageSize = function () {\n    return this.parent.pageSettings.pageSize % 2 !== 0;\n  };\n  VirtualContentRenderer.prototype.getOddBlockSize = function () {\n    return this.isOddPageSize() ? this.parent.pageSettings.pageSize / 2 : this.getBlockSize();\n  };\n  VirtualContentRenderer.prototype.getGroupedTotalBlocks = function () {\n    var rows = this.parent.vcRows;\n    return Math.floor(rows.length / this.getOddBlockSize() < 1 ? 1 : rows.length / this.getOddBlockSize());\n  };\n  VirtualContentRenderer.prototype.getTotalBlocks = function () {\n    return Math.ceil(this.count / this.getOddBlockSize());\n  };\n  VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n    return this.vgenerator.cOffsets[parseInt(block.toString(), 10)] | 0;\n  };\n  VirtualContentRenderer.prototype.getModelGenerator = function () {\n    return new VirtualRowModelGenerator(this.parent);\n  };\n  VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n    if (this.actions.some(function (value) {\n      return value === action;\n    })) {\n      this.preventEvent = this.content.scrollTop !== 0;\n      this.content.scrollTop = 0;\n    }\n    if (action !== 'virtualscroll') {\n      this.isAdd = false;\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  VirtualContentRenderer.prototype.onActionBegin = function (e) {\n    //Update property silently..\n    this.parent.setProperties({\n      pageSettings: {\n        currentPage: 1\n      }\n    }, true);\n  };\n  VirtualContentRenderer.prototype.getRows = function () {\n    return this.isInfiniteColumnvirtualization() ? this.getInfiniteRows() : this.vgenerator.getRows();\n  };\n  VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n    var row;\n    if (isGroupAdaptive(this.parent)) {\n      if (!isNullOrUndefined(index) && this.parent.enableVirtualization && this.parent.groupSettings.columns.length) {\n        for (var i = 0; i < this.parent.getDataRows().length; i++) {\n          if (this.parent.getDataRows()[parseInt(i.toString(), 10)].getAttribute(literals.dataRowIndex) === index.toString()) {\n            row = this.parent.getDataRows()[parseInt(i.toString(), 10)];\n          }\n        }\n      } else {\n        row = !isNullOrUndefined(index) ? this.parent.getDataRows()[parseInt(index.toString(), 10)] : undefined;\n      }\n    } else if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) {\n      row = !isNullOrUndefined(index) ? this.enableCacheOnInfiniteColumnVirtual() ? this.parent.getDataRows().find(function (element) {\n        return parseInt(element.getAttribute(literals.dataRowIndex), 10) === index;\n      }) : this.parent.getDataRows()[parseInt(index.toString(), 10)] : undefined;\n    } else if (this.prevInfo) {\n      row = this.getRowCollection(index, false);\n    }\n    return row;\n  };\n  VirtualContentRenderer.prototype.getMovableVirtualRowByIndex = function (index) {\n    return this.getRowCollection(index, false);\n  };\n  VirtualContentRenderer.prototype.getFrozenRightVirtualRowByIndex = function (index) {\n    return this.getRowCollection(index, false);\n  };\n  VirtualContentRenderer.prototype.getRowCollection = function (index, isRowObject) {\n    var prev = this.prevInfo.blockIndexes;\n    var startIdx = (prev[0] - 1) * this.getBlockSize();\n    if (this.parent.pageSettings.pageSize % 2 !== 0) {\n      startIdx += Math.floor(startIdx / this.getBlockSize() / 2);\n    }\n    var rowCollection = this.parent.getDataRows();\n    var collection = isRowObject ? this.parent.getCurrentViewRecords() : rowCollection;\n    if (isRowObject && this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n      startIdx = parseInt(this.parent.getRows()[0].getAttribute(literals.dataRowIndex), 10);\n      collection = collection.filter(function (m) {\n        return isNullOrUndefined(m.items);\n      });\n    }\n    if (!isRowObject && this.parent.allowGrouping && this.parent.groupSettings.columns.length && rowCollection.length) {\n      startIdx = parseInt(rowCollection[0].getAttribute(literals.dataRowIndex), 10);\n    }\n    var selectedRow = collection[index - startIdx];\n    if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n      if (!isRowObject) {\n        selectedRow = index <= this.parent.frozenRows ? rowCollection[parseInt(index.toString(), 10)] : rowCollection[index - startIdx + this.parent.frozenRows];\n      } else {\n        selectedRow = index <= this.parent.frozenRows ? this.parent.getRowsObject()[parseInt(index.toString(), 10)].data : selectedRow;\n      }\n    }\n    return selectedRow;\n  };\n  VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n    var prev = this.prevInfo.blockIndexes;\n    var startIdx = (prev[0] - 1) * this.getBlockSize();\n    if (this.parent.enableVirtualization && this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n      var vGroupedRows = this.vgenerator.cache[prev[0]];\n      for (var i = 0; i < vGroupedRows.length; i++) {\n        if (vGroupedRows[\"\" + i].isDataRow) {\n          startIdx = vGroupedRows[\"\" + i].index;\n          break;\n        }\n      }\n    }\n    return startIdx + index;\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n  VirtualContentRenderer.prototype.refreshOffsets = function () {\n    var gObj = this.parent;\n    var row = 0;\n    var blockSize = this.getBlockSize();\n    var oddBlockSize = this.getOddBlockSize();\n    var total = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n    this.prevHeight = this.offsets[parseInt(total.toString(), 10)];\n    this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n    this.offsets = {};\n    //Row offset update\n    // eslint-disable-next-line prefer-spread\n    var blocks = Array.apply(null, Array(total)).map(function () {\n      return ++row;\n    });\n    for (var i = 0; i < blocks.length; i++) {\n      var tmp = (this.vgenerator.cache[blocks[parseInt(i.toString(), 10)]] || []).length;\n      var rem = !isGroupAdaptive(this.parent) ? this.isOddPageSize() ? Math.ceil(this.count % oddBlockSize) : this.count % blockSize : this.isOddPageSize() ? Math.ceil(gObj.vcRows.length % oddBlockSize) : gObj.vcRows.length % blockSize;\n      var size = !isGroupAdaptive(this.parent) && blocks[parseInt(i.toString(), 10)] in this.vgenerator.cache ? tmp * this.parent.getRowHeight() : rem && blocks[parseInt(i.toString(), 10)] === total ? rem * this.parent.getRowHeight() : this.getBlockHeight();\n      if (this.isOddPageSize() && !(blocks[parseInt(i.toString(), 10)] in this.vgenerator.cache) && !(rem && blocks[parseInt(i.toString(), 10)] === total)) {\n        size = (blocks[parseInt(i.toString(), 10)] % 2 !== 0 ? Math.floor(oddBlockSize) : Math.ceil(oddBlockSize)) * this.parent.getRowHeight();\n      }\n      // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n      // tmp * getRowHeight() : this.getBlockHeight();\n      this.offsets[blocks[parseInt(i.toString(), 10)]] = (this.offsets[blocks[parseInt(i.toString(), 10)] - 1] | 0) + size;\n      this.tmpOffsets[blocks[parseInt(i.toString(), 10)]] = this.offsets[blocks[parseInt(i.toString(), 10)] - 1] | 0;\n    }\n    this.offsetKeys = Object.keys(this.offsets);\n    if (isGroupAdaptive(this.parent)) {\n      this.parent.vGroupOffsets = this.offsets;\n    }\n    //Column offset update\n    if (this.parent.enableColumnVirtualization) {\n      this.vgenerator.refreshColOffsets();\n    }\n  };\n  VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n    this.vgenerator.refreshColOffsets();\n    this.setVirtualHeight();\n  };\n  VirtualContentRenderer.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var rows = [];\n    rows = this.getRows();\n    var testRow;\n    rows.some(function (r) {\n      if (r.isDataRow) {\n        testRow = r;\n      }\n      return r.isDataRow;\n    });\n    var isRefresh = true;\n    if (!gObj.groupSettings.columns.length && testRow) {\n      isRefresh = false;\n    }\n    var tr = gObj.getDataRows();\n    for (var c = 0, clen = columns.length; c < clen; c++) {\n      var column = columns[parseInt(c.toString(), 10)];\n      var idx = gObj.getNormalizedColumnIndex(column.uid);\n      var displayVal = column.visible === true ? '' : 'none';\n      var colGrp = this.getColGroup().children;\n      if (idx !== -1 && testRow && idx < testRow.cells.length) {\n        setStyleAttribute(colGrp[parseInt(idx.toString(), 10)], {\n          'display': displayVal\n        });\n      }\n      if (!isRefresh) {\n        var width = void 0;\n        if (column.width) {\n          if (column.visible) {\n            width = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n          } else {\n            width = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n          }\n        }\n        if (width > gObj.width) {\n          this.setDisplayNone(tr, idx, displayVal, rows);\n          if (this.parent.enableColumnVirtualization) {\n            this.virtualEle.setWrapperWidth(width + '');\n          }\n          this.refreshVirtualElement();\n        } else {\n          isRefresh = true;\n        }\n      }\n      if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n        this.parent.updateMediaColumns(column);\n      }\n      this.parent.invokedFromMedia = false;\n    }\n    if (isRefresh) {\n      this.refreshContentRows({\n        requestType: 'refresh'\n      });\n    } else {\n      this.parent.notify(events.partialRefresh, {\n        rows: rows,\n        args: {\n          isFrozen: false,\n          rows: rows\n        }\n      });\n    }\n  };\n  VirtualContentRenderer.prototype.selectVirtualRow = function (args) {\n    var _this = this;\n    var count = isGroupAdaptive(this.parent) ? this.vgenerator.recordsCount : this.count;\n    args.isAvailable = args.selectedIndex < count;\n    if (args.isAvailable && !this.isContextMenuOpen && this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow' && !this.isSelection && !this.requestTypes.some(function (value) {\n      return value === _this.requestType;\n    }) && !this.parent.selectionModule.isInteracted) {\n      var selectedRow = this.parent.getRowByIndex(args.selectedIndex);\n      var rowHeight = this.parent.getRowHeight();\n      if (!selectedRow || !this.isRowInView(selectedRow)) {\n        this.isSelection = true;\n        this.selectedRowIndex = args.selectedIndex;\n        var scrollTop = (args.selectedIndex + 1) * rowHeight;\n        if (isGroupAdaptive(this.parent)) {\n          var selectedRowObjectIndex = this.parent.vcRows.findIndex(function (row) {\n            return row.index === args.selectedIndex;\n          });\n          scrollTop = selectedRowObjectIndex !== -1 ? selectedRowObjectIndex * rowHeight : undefined;\n          this.isSelection = selectedRowObjectIndex !== -1 ? this.isSelection : false;\n        } else if (this.parent.getDataModule().isRemote() && this.parent.groupSettings.columns.length) {\n          var page = Math.ceil((args.selectedIndex + 1) / this.parent.pageSettings.pageSize);\n          var blockIndexes = this.vgenerator.getBlockIndexes(page);\n          scrollTop = this.offsets[blockIndexes[0]];\n        }\n        if (!isNullOrUndefined(scrollTop)) {\n          var direction = this.content.scrollTop < scrollTop ? 'down' : 'up';\n          this.selectRowIndex = args.selectedIndex;\n          this.content.scrollTop = scrollTop;\n          this.isSelectionScroll = this.observer.check(direction);\n        }\n      }\n    }\n    this.requestType = this.empty;\n  };\n  VirtualContentRenderer.prototype.isRowInView = function (row) {\n    var top = row.getBoundingClientRect().top;\n    var bottom = row.getBoundingClientRect().bottom;\n    return top >= this.content.getBoundingClientRect().top && bottom <= this.content.getBoundingClientRect().bottom;\n  };\n  return VirtualContentRenderer;\n}(ContentRender);\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */function (_super) {\n  __extends(VirtualHeaderRenderer, _super);\n  function VirtualHeaderRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n    _this.virtualEle = new VirtualElementHandler();\n    _this.isMovable = false;\n    _this.gen = new VirtualRowModelGenerator(_this.parent);\n    _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n    _this.parent.on(refreshVirtualBlock, function (e) {\n      return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null;\n    }, _this);\n    return _this;\n  }\n  VirtualHeaderRenderer.prototype.renderTable = function () {\n    this.gen.refreshColOffsets();\n    this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.' + literals.headerContent)));\n    _super.prototype.renderTable.call(this);\n    this.virtualEle.table = this.getTable();\n    this.virtualEle.content = this.getPanel().querySelector('.' + literals.headerContent);\n    this.virtualEle.content.style.position = 'relative';\n    this.virtualEle.renderWrapper();\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    !(this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && this.parent.enableColumnVirtualization ? this.virtualEle.renderPlaceHolder() : this.virtualEle.renderPlaceHolder('absolute');\n  };\n  VirtualHeaderRenderer.prototype.appendContent = function (table) {\n    this.virtualEle.wrapper.appendChild(table);\n  };\n  VirtualHeaderRenderer.prototype.refreshUI = function () {\n    this.gen.refreshColOffsets();\n    this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.' + literals.headerContent)));\n    _super.prototype.refreshUI.call(this);\n  };\n  VirtualHeaderRenderer.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var displayVal;\n    var idx;\n    var needFullRefresh;\n    for (var c = 0, clen = columns.length; c < clen; c++) {\n      var column = columns[parseInt(c.toString(), 10)];\n      idx = gObj.getNormalizedColumnIndex(column.uid);\n      displayVal = column.visible ? '' : 'none';\n      var colGrp = this.getColGroup().children;\n      if (gObj.getColumnByField(column.field)) {\n        setStyleAttribute(colGrp[parseInt(idx.toString(), 10)], {\n          'display': displayVal\n        });\n      }\n      if (gObj.enableColumnVirtualization && !gObj.groupSettings.columns.length) {\n        var tablewidth = void 0;\n        if (column.visible) {\n          tablewidth = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n        } else {\n          tablewidth = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n        }\n        if (tablewidth > gObj.width) {\n          this.setDisplayNone(column, displayVal);\n          this.virtualEle.setWrapperWidth(tablewidth + '');\n          this.gen.refreshColOffsets();\n        } else {\n          needFullRefresh = true;\n        }\n      } else {\n        needFullRefresh = true;\n      }\n      if (needFullRefresh) {\n        this.refreshUI();\n      }\n    }\n  };\n  VirtualHeaderRenderer.prototype.setDisplayNone = function (col, displayVal) {\n    var table = this.getTable();\n    for (var _i = 0, _a = [].slice.apply(table.querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n      var ele = _a[_i];\n      if (ele.querySelector('[e-mappinguid]') && ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === col.uid) {\n        setStyleAttribute(ele, {\n          'display': displayVal\n        });\n        if (displayVal === '') {\n          removeClass([ele], 'e-hide');\n        }\n        break;\n      }\n    }\n  };\n  return VirtualHeaderRenderer;\n}(HeaderRender);\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */function () {\n  function VirtualElementHandler() {}\n  VirtualElementHandler.prototype.renderWrapper = function (height) {\n    this.wrapper = createElement('div', {\n      className: 'e-virtualtable',\n      styles: \"min-height:\" + formatUnit(height)\n    });\n    this.wrapper.appendChild(this.table);\n    this.content.appendChild(this.wrapper);\n  };\n  VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n    if (position === void 0) {\n      position = 'relative';\n    }\n    this.placeholder = createElement('div', {\n      className: 'e-virtualtrack',\n      styles: \"position:\" + position\n    });\n    this.content.appendChild(this.placeholder);\n  };\n  VirtualElementHandler.prototype.renderFrozenWrapper = function (height) {\n    this.wrapper = createElement('div', {\n      className: 'e-virtualtable',\n      styles: \"min-height:\" + formatUnit(height) + \"; display: flex\"\n    });\n    this.content.appendChild(this.wrapper);\n  };\n  VirtualElementHandler.prototype.renderFrozenPlaceHolder = function () {\n    this.placeholder = createElement('div', {\n      className: 'e-virtualtrack'\n    });\n    this.content.appendChild(this.placeholder);\n  };\n  VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n    this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n  };\n  VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n    if (width && width.indexOf('%') === -1 && !(this.content.getBoundingClientRect().width < parseInt(width, 10))) {\n      width = undefined;\n      full = true;\n    }\n    this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n  };\n  VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n    this.placeholder.style.height = !isNullOrUndefined(height) ? height + \"px\" : '0px';\n    if (width && width.indexOf('%') === -1 && !(this.content.getBoundingClientRect().width < parseInt(width, 10))) {\n      width = '100%';\n    }\n    this.placeholder.style.width = width;\n  };\n  VirtualElementHandler.prototype.setFreezeWrapperWidth = function (wrapper, width, full) {\n    wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n  };\n  return VirtualElementHandler;\n}();\nexport { VirtualElementHandler };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","remove","createElement","closest","formatUnit","Browser","extend","isNullOrUndefined","removeClass","DataManager","dataReady","modelChanged","refreshVirtualBlock","contentReady","events","RenderType","ContentRender","HeaderRender","InterSectionObserver","VirtualRowModelGenerator","isGroupAdaptive","ensureLastRow","ensureFirstRow","getEditedDataIndex","getTransformValues","checkIsVirtual","getVisiblePage","parentsUntil","setStyleAttribute","literals","VirtualContentRenderer","_super","parent","locator","_this","call","prevHeight","startIndex","preStartIndex","preventEvent","actions","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","isFocused","isSelection","isBottom","diff","heightChange","isTop","empty","undefined","isCancel","requestTypes","isNormaledit","editSettings","mode","virtualData","virtualInfiniteData","emptyRowData","isContextMenuOpen","isSelectionScroll","validationCheck","eventListener","widthServices","getService","on","columnVisibilityChanged","setVisible","vgenerator","generator","renderTable","header","getRenderer","Header","table","getTable","content","getPanel","querySelector","renderWrapper","height","renderPlaceHolder","enableVirtualization","enableColumnVirtualization","wrapper","style","position","debounceEvent","dataSource","offline","opt","container","pageHeight","getBlockHeight","axes","observer","renderEmpty","tbody","appendChild","frozenRows","getHeaderContent","innerHTML","adjustTable","getReorderedFrozenRows","args","blockIndex","virtualInfo","blockIndexes","colsIndex","columnIndexes","page","recordslength","getCurrentViewRecords","length","firstRecords","renderModule","data","dataManager","json","slice","virtualRows","generateRows","splice","scrollListener","scrollArgs","direction","scrollAfterEdit","enablePersistence","scrollPosition","offset","isDestroyed","document","activeElement","islazyloadRequest","removeMaskRow","info","sentinel","viewInfo","currentInfo","getInfoFromView","prevInfo","toString","event","top","scrollTop","pageSettings","currentPage","enableVirtualMaskRow","showMaskRow","axis","addShimmerEffect","showAddNewRow","closeEdit","notify","requestType","focusElement","isIE","hideSpinner","restoreEdit","groupSettings","enableLazyLoading","setColumnIndexesInView","loadNext","loadSelf","nextInfo","renderResponsiveColumnChooserDiv","action","isInitialLoad","getContentTable","appendContent","block","blk","isBlockAvailable","e","isBlockAdded","tempBlocks","infoType","sentinelInfo","endIndex","preEndIndex","getPageFromTop","getBlockIndexes","blocks","ensureBlocks","activeKey","newBlock","indexOf","filter","val","every","bind","Math","max","isNaN","rowIndex","firstBlock","ceil","getBlockSize","getColumnIndexes","getColumnIndexesInView","index","mIdx","old","indexes","getData","ind","preventSelf","isEndBlock","some","result","getGroupedTotalBlocks","getTotalBlocks","target","newChild","cBlock","cOffset","getColumnOffset","width","columns","refreshOffsets","element","vHeight","getBoundingClientRect","reduceWidth","isFrozenGrid","frzLeftWidth_1","getColumns","col","visible","parseInt","freeze","cIndex","getVisibleFrozenLeftCount","resetStickyLeftPos","value","translate","getTranslateY","allowResizing","getHeaderTable","setWrapperWidth","name","parentNode","isReact","rowTemplate","attrs","role","isInfiniteColumnvirtualization","i","children","scrollLeft","left","sTop","setVirtualHeight","setPageHeight","getOffset","focus","lastPage","getContent","firstElementChild","autoCol","focusCell","restoreAdd","ensureSelectedRowPosition","validationScrollLeft","refreshFrozenScrollbar","initialRowTop","gridTop","getRowByIndex","validationCol","cOffsets","getVisibleFrozenColumns","editModule","editFormValidate","selectRowIndex","row","isRowInView","rowSelected","cell","cells","cellIndex","preventScroll","selectionSettings","checkboxOnly","selectRow","getAttribute","dataRowIndex","allowEditing","editedRowIndex","keys","isXaxis","editedRow","top_1","offsetHeight","getRowHeight","isEdit","startEdit","rowData","enableCacheOnInfiniteColumnVirtual","getRowObjectByIndex","getVirtualEditedData","editForms","getElementsByClassName","isFormDestroyed","formObj","getCurrentEditedData","startAdd","addedRow","isAdd","newRowPosition","maxPage","addRecord","onDataReady","count","vcRows","pageSize","checkAndResetCache","resetScrollPosition","getVisibleColumns","virtualHeight","totalBlocks","placeHolderBottom","round","placeholder","bottom","wrapperBottom","minHeight","total","iOffset","Number","border","min","getPage","cHeight","isOnenter","endTranslate","blockHeight","maxBlock","onEntered","current","isWheel","check","showSpinner","firstOffSetKey","lastOffSetKey","disableShowMaskRow","allowGrouping","allowFiltering","filterSettings","searchSettings","key","setTimeout","xAxis","x","frzLeftWidth_2","idx","maxLeft","y","dataBound","refreshVirtualFrozenHeight","selectedRowIndex","valueX","querySelectorAll","concat","frzLeftWidth","frzRightWidth","leftrightColumnWidth","classList","contains","uid","getColumnByUid","getColumnByIndex","right","translateX","isLastBlockRow","transform","rowTop","remainHeight","translateY","wrapperInfo","contentInfo","lastRowTop","lastElementChild","scrollEle","visibleRowCount","floor","startIdx","refreshMaxPage","setVirtualPageQuery","visiblePage","query","skip","take","skipPage","isManualRefresh","includePrevPage","unshift","push","addEventListener","actionBegin","actionComplete","refreshContentRows","refreshVirtualLazyLoadCache","selectVirtualRow","virtaulCellFocus","virtualCellFocus","virtualScrollEditActionBegin","editActionBegin","virtualScrollAddActionBegin","addActionBegin","virtualScrollEdit","virtualScrollEditSuccess","editSuccess","refreshVirtualCache","refreshCache","editReset","resetIsedit","getVirtualData","virtualScrollEditCancel","editCancel","refreshVirtualMaxPage","selectRowOnContextOpen","resetVirtualFocus","refreshVirtualEditFormCells","refreshCells","scrollToEdit","onActionBegin","fn","observe","gObj","scrollValues","down","off","cache","rows","j","allowScroll","parentElement","offsetLeft","enableRtl","abs","rowObj","generateCells","foreignKeyData","error","isScroll","isOpen","dataIndex","updateCurrentViewData","cancel","refreshVirtualFrozenRows","ele","rowCell","HTMLInputElement","groupCaptionRow","scrollEleInfo","nextFocusRow","nextElementSibling","previousElementSibling","nextFocusRowInfo","focusModule","virtualSelectionInfo","isPending","viewDifference","dataColIndex","emptyRow","getEditedRowObject","rowObjects","editedrow","allowPaging","editRowObject","editRequestTypes","dataActionRequestTypes","refreshVirtualElement","previousData","resetFilterDlgPosition","columnName","allowAdding","editForm","addForm","createEmptyRowdata","columnModel","field","setProperties","getRowCollection","isOddPageSize","getOddBlockSize","getModelGenerator","getRows","getInfiniteRows","getDataRows","find","getMovableVirtualRowByIndex","getFrozenRightVirtualRowByIndex","isRowObject","prev","rowCollection","collection","m","items","selectedRow","getRowsObject","getVirtualRowIndex","vGroupedRows","isDataRow","blockSize","oddBlockSize","apply","map","tmp","rem","size","vGroupOffsets","refreshColOffsets","testRow","r","isRefresh","tr","c","clen","column","getNormalizedColumnIndex","displayVal","colGrp","getColGroup","offsetWidth","setDisplayNone","invokedFromMedia","hideAtMedia","updateMediaColumns","partialRefresh","isFrozen","recordsCount","isAvailable","selectedIndex","selectionModule","isInteracted","rowHeight","selectedRowObjectIndex","findIndex","getDataModule","isRemote","VirtualHeaderRenderer","isMovable","gen","refreshUI","headerContent","enableInfiniteScrolling","needFullRefresh","getColumnByField","tablewidth","_i","_a","className","styles","renderFrozenWrapper","renderFrozenPlaceHolder","xValue","yValue","full","setFreezeWrapperWidth"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-grids/src/grid/renderer/virtual-content-renderer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, createElement, closest, formatUnit, Browser, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, removeClass } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\nimport { isGroupAdaptive, ensureLastRow, ensureFirstRow, getEditedDataIndex, getTransformValues, checkIsVirtual, getVisiblePage, parentsUntil } from '../base/util';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\nimport * as literals from '../base/string-literals';\n/**\n * VirtualContentRenderer\n *\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualContentRenderer, _super);\n    function VirtualContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.prevHeight = 0;\n        /** @hidden */\n        _this.startIndex = 0;\n        _this.preStartIndex = 0;\n        _this.preventEvent = false;\n        _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n        /** @hidden */\n        _this.offsets = {};\n        _this.tmpOffsets = {};\n        /** @hidden */\n        _this.virtualEle = new VirtualElementHandler();\n        _this.offsetKeys = [];\n        _this.isFocused = false;\n        _this.isSelection = false;\n        _this.isBottom = false;\n        _this.diff = 0;\n        _this.heightChange = false;\n        /** @hidden */\n        _this.isTop = false;\n        _this.empty = undefined;\n        _this.isCancel = false;\n        _this.requestTypes = ['beginEdit', 'cancel', 'delete', 'add', 'save', 'sorting'];\n        _this.isNormaledit = _this.parent.editSettings.mode === 'Normal';\n        /** @hidden */\n        _this.virtualData = {};\n        _this.virtualInfiniteData = {};\n        _this.emptyRowData = {};\n        _this.isContextMenuOpen = false;\n        _this.isSelectionScroll = false;\n        _this.validationCheck = false;\n        _this.locator = locator;\n        _this.eventListener('on');\n        _this.widthServices = locator.getService('widthService');\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.vgenerator = _this.generator;\n        return _this;\n    }\n    VirtualContentRenderer.prototype.renderTable = function () {\n        this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.content = this.getPanel().querySelector('.' + literals.content);\n        this.virtualEle.renderWrapper(this.parent.height);\n        this.virtualEle.renderPlaceHolder();\n        if (!(!this.parent.enableVirtualization && this.parent.enableColumnVirtualization)) {\n            this.virtualEle.wrapper.style.position = 'absolute';\n        }\n        var debounceEvent = (this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline);\n        var opt = {\n            container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n            axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n        };\n        this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n    };\n    VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector(literals.tbody).innerHTML = '';\n        }\n        this.virtualEle.adjustTable(0, 0);\n    };\n    VirtualContentRenderer.prototype.getReorderedFrozenRows = function (args) {\n        var blockIndex = args.virtualInfo.blockIndexes;\n        var colsIndex = args.virtualInfo.columnIndexes;\n        var page = args.virtualInfo.page;\n        args.virtualInfo.blockIndexes = [1, 2];\n        args.virtualInfo.page = 1;\n        args.virtualInfo.columnIndexes = [];\n        var recordslength = this.parent.getCurrentViewRecords().length;\n        var firstRecords = this.parent.renderModule.data.dataManager.dataSource.json.slice(0, recordslength);\n        var virtualRows = this.vgenerator.generateRows(firstRecords, args);\n        args.virtualInfo.blockIndexes = blockIndex;\n        args.virtualInfo.columnIndexes = colsIndex;\n        args.virtualInfo.page = page;\n        return virtualRows.splice(0, this.parent.frozenRows);\n    };\n    VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n        if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization && (scrollArgs.direction === 'up' || scrollArgs.direction === 'down')) {\n            return;\n        }\n        this.scrollAfterEdit();\n        if (this.parent.enablePersistence) {\n            this.parent.scrollPosition = scrollArgs.offset;\n        }\n        if (this.preventEvent || this.parent.isDestroyed) {\n            this.preventEvent = false;\n            return;\n        }\n        if (isNullOrUndefined(document.activeElement)) {\n            this.isFocused = false;\n        }\n        else {\n            this.isFocused = this.content === closest(document.activeElement, '.' + literals.content) || this.content === document.activeElement;\n        }\n        if (this.parent.islazyloadRequest && scrollArgs.direction === 'down') {\n            this.parent.removeMaskRow();\n            this.parent.islazyloadRequest = false;\n            return;\n        }\n        var info = scrollArgs.sentinel;\n        var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n        if (isGroupAdaptive(this.parent)) {\n            if (viewInfo.blockIndexes && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString()) {\n                this.parent.removeMaskRow();\n                return;\n            }\n            else {\n                viewInfo.event = 'refresh-virtual-block';\n                if (!isNullOrUndefined(viewInfo.offsets)) {\n                    viewInfo.offsets.top = this.content.scrollTop;\n                }\n                this.parent.pageSettings.currentPage = viewInfo.page;\n                if (this.parent.enableVirtualMaskRow) {\n                    this.parent.showMaskRow(info.axis);\n                    this.parent.addShimmerEffect();\n                }\n                if (this.parent.editSettings.showAddNewRow) {\n                    this.parent.closeEdit();\n                }\n                this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo, focusElement: scrollArgs.focusElement });\n                return;\n            }\n        }\n        if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n            || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n            this.parent.removeMaskRow();\n            if (Browser.isIE) {\n                this.parent.hideSpinner();\n            }\n            this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n            if (info.axis === 'Y') {\n                this.restoreEdit();\n            }\n            if (this.parent.groupSettings.enableLazyLoading && this.prevInfo.blockIndexes[0] === 1 && viewInfo.blockIndexes[0] === 1 &&\n                scrollArgs.direction === 'up') {\n                this.virtualEle.adjustTable(0, viewInfo.offsets.top < this.offsets[1] ? 0 : this.getBlockHeight());\n            }\n            return;\n        }\n        this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n        if (!(!this.parent.enableVirtualization && this.parent.enableColumnVirtualization)) {\n            this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n        }\n        this.requestType = 'virtualscroll';\n        if (this.parent.enableVirtualMaskRow) {\n            this.parent.showMaskRow(info.axis);\n            this.parent.addShimmerEffect();\n        }\n        this.parent.islazyloadRequest = false;\n        if (this.parent.editSettings.showAddNewRow) {\n            this.parent.closeEdit();\n        }\n        this.parent.notify(events.renderResponsiveColumnChooserDiv, { action: 'clear' });\n        if (!(!this.parent.isInitialLoad && this.parent.enablePersistence)) {\n            this.parent.notify(viewInfo.event, {\n                requestType: 'virtualscroll', virtualInfo: viewInfo,\n                focusElement: scrollArgs.focusElement\n            });\n        }\n        if (this.parent.enableColumnVirtualization && !this.parent.getContentTable().querySelector('tr.e-row')) {\n            this.parent.removeMaskRow();\n            this.appendContent(undefined, undefined, {\n                requestType: 'virtualscroll', virtualInfo: viewInfo,\n                focusElement: scrollArgs.focusElement\n            });\n            this.prevInfo = viewInfo;\n        }\n    };\n    VirtualContentRenderer.prototype.block = function (blk) {\n        return this.vgenerator.isBlockAvailable(blk);\n    };\n    VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n        var isBlockAdded = false;\n        var tempBlocks = [];\n        var infoType = { direction: direction, sentinelInfo: info, offsets: e,\n            startIndex: this.preStartIndex, endIndex: this.preEndIndex };\n        infoType.page = this.getPageFromTop(e.top, infoType);\n        infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n        infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n        var blocks = this.ensureBlocks(infoType);\n        if (this.activeKey === 'upArrow' && infoType.blockIndexes.toString() !== blocks.toString()) {\n            // To avoid dupilcate row index problem in key focus support\n            var newBlock = blocks[blocks.length - 1];\n            if (infoType.blockIndexes.indexOf(newBlock) === -1) {\n                isBlockAdded = true;\n            }\n        }\n        if (!(!this.parent.enableVirtualization && this.parent.enableColumnVirtualization)) {\n            infoType.blockIndexes = blocks;\n        }\n        infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n            .every(this.block.bind(this));\n        infoType.event = (infoType.loadNext || infoType.loadSelf) ? modelChanged : refreshVirtualBlock;\n        infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n        if (isBlockAdded) {\n            infoType.blockIndexes = [infoType.blockIndexes[0] - 1, infoType.blockIndexes[0], infoType.blockIndexes[0] + 1];\n        }\n        if (this.activeKey === 'downArrow' && !isNaN(this.rowIndex)) {\n            var firstBlock = Math.ceil(this.rowIndex / this.getBlockSize());\n            if (firstBlock !== 1 && (infoType.blockIndexes[1] !== firstBlock || infoType.blockIndexes.length < 3)) {\n                infoType.blockIndexes = [firstBlock - 1, firstBlock, firstBlock + 1];\n            }\n        }\n        infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n            infoType.event = refreshVirtualBlock;\n        }\n        return infoType;\n    };\n    VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n        var _this = this;\n        var index = info.blockIndexes[info.block];\n        var mIdx;\n        var old = index;\n        var max = Math.max;\n        var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n        this.prevInfo = this.prevInfo || this.vgenerator.getData();\n        indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n        var preventSelf = false;\n        if (checkIsVirtual(this.parent) && info.direction === 'up' && ((((info.page + 1) === this.prevInfo.page\n            || info.page === this.prevInfo.page) && info.block === 1) || (info.page === this.prevInfo.page && indexes.length === 2))\n            && this.vgenerator.isBlockAvailable(info.blockIndexes[1] + 1)) {\n            preventSelf = (info.page + 1) === this.prevInfo.page && info.block === 1;\n            index += 1;\n            indexes = [max(index - 1, 1), index, index + 1];\n        }\n        if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n            return indexes;\n        }\n        if ((info.loadSelf && !preventSelf) || (info.direction === 'down' && this.isEndBlock(old))) {\n            indexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        indexes.some(function (val, ind) {\n            var result = val === (isGroupAdaptive(_this.parent) ? _this.getGroupedTotalBlocks() : _this.getTotalBlocks());\n            if (result) {\n                mIdx = ind;\n            }\n            return result;\n        });\n        if (mIdx !== undefined) {\n            indexes = indexes.slice(0, mIdx + 1);\n            if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n                indexes = [indexes[0] - 1, indexes[0]];\n            }\n        }\n        return indexes;\n    };\n    // tslint:disable-next-line:max-func-body-length\n    VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        var _this = this;\n        // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n        var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n            this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n        this.prevInfo = this.prevInfo || e.virtualInfo;\n        var cBlock = (info.columnIndexes[0]) - 1;\n        var cOffset = this.getColumnOffset(cBlock);\n        var width;\n        var blocks = info.blockIndexes;\n        if (this.parent.groupSettings.columns.length) {\n            this.refreshOffsets();\n        }\n        if (this.parent.height === '100%') {\n            this.parent.element.style.height = '100%';\n        }\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height :\n            this.parent.element.getBoundingClientRect().height;\n        if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) {\n            vHeight = 0;\n        }\n        var reduceWidth = 0;\n        if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid()) {\n            var frzLeftWidth_1 = 0;\n            this.parent.getColumns().filter(function (col) {\n                if (col.visible) {\n                    reduceWidth += parseInt(col.width.toString(), 10);\n                    if (col.freeze === 'Left') {\n                        frzLeftWidth_1 += parseInt(col.width.toString(), 10);\n                    }\n                }\n            });\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            if (cBlock > this.parent.getVisibleFrozenLeftCount()) {\n                cOffset = cOffset - frzLeftWidth_1;\n            }\n            this.resetStickyLeftPos(cOffset, newChild);\n        }\n        if (!this.requestTypes.some(function (value) { return value === _this.requestType; })) {\n            var translate = this.getTranslateY(this.content.scrollTop, vHeight, info);\n            if (this.parent.groupSettings.enableLazyLoading && info && this.prevInfo && this.prevInfo.blockIndexes[0] === 1 &&\n                info.blockIndexes[0] === 1 && info.direction === 'up') {\n                this.virtualEle.adjustTable(0, this.content.scrollTop < this.offsets[1] ? 0 : this.getBlockHeight());\n            }\n            else {\n                this.virtualEle.adjustTable(cOffset, translate);\n            }\n        }\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.adjustTable(cOffset, 0);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            if (this.parent.isFrozenGrid()) {\n                width = reduceWidth.toString();\n                if (this.parent.allowResizing) {\n                    this.parent.getHeaderTable().style.width = reduceWidth + 'px';\n                    this.parent.getContentTable().style.width = reduceWidth + 'Px';\n                }\n            }\n            this.header.virtualEle.setWrapperWidth(width);\n        }\n        this.virtualEle.setWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n        if (this.parent.enableColumnVirtualization && isNullOrUndefined(target) && isNullOrUndefined(newChild)) {\n            return;\n        }\n        if (!isNullOrUndefined(target) && !isNullOrUndefined(target.parentNode)) {\n            remove(target);\n        }\n        var tbody = this.parent.element.querySelector('.' + literals.content).querySelector(literals.tbody);\n        if (tbody) {\n            remove(tbody);\n            target = null;\n        }\n        var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n        if (!isReact) {\n            target = this.parent.createElement(literals.tbody, { attrs: { role: 'rowgroup' } });\n            target.appendChild(newChild);\n        }\n        else {\n            target = newChild;\n        }\n        if (this.parent.frozenRows && e.requestType === 'virtualscroll' && (this.parent.pageSettings.currentPage === 1\n            || this.isInfiniteColumnvirtualization())) {\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                target.children[0].remove();\n            }\n        }\n        this.getTable().appendChild(target);\n        this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n        if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization && (info.direction === 'right' || info.direction === 'left')) {\n            this.content.scrollTop = this.currentInfo.offsets.top;\n            this.content.scrollLeft = this.currentInfo.offsets.left;\n        }\n        if (this.parent.groupSettings.columns.length) {\n            if (!isGroupAdaptive(this.parent) && info.direction === 'up') {\n                var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n                var sTop = this.content.scrollTop;\n                this.content.scrollTop = sTop + blk;\n            }\n            this.setVirtualHeight();\n            if (!this.parent.groupSettings.enableLazyLoading) {\n                this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n            }\n        }\n        if (e.requestType === 'ungrouping' && !this.parent.groupSettings.enableLazyLoading &&\n            this.parent.groupSettings.columns.length === 0) {\n            this.observer.setPageHeight(this.getBlockHeight() * 2);\n        }\n        this.prevInfo = info;\n        if (this.isFocused && this.activeKey !== 'downArrow' && this.activeKey !== 'upArrow') {\n            this.content.focus();\n        }\n        var lastPage = Math.ceil(this.getTotalBlocks() / 2);\n        if (this.isBottom) {\n            this.isBottom = false;\n            this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 1];\n        }\n        if ((this.parent.pageSettings.currentPage + 1 === lastPage || this.parent.pageSettings.currentPage === lastPage) &&\n            blocks.length === 2 && e.requestType === 'delete') {\n            this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 1];\n        }\n        if ((this.parent.pageSettings.currentPage === lastPage) && blocks.length === 1) {\n            this.isBottom = true;\n            this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 2];\n        }\n        if (this.isTop) {\n            this.parent.getContent().firstElementChild.scrollTop = 0;\n            this.isTop = false;\n        }\n        if (e.requestType === 'virtualscroll' && e.virtualInfo.sentinelInfo.axis === 'X') {\n            this.parent.notify(events.autoCol, {});\n        }\n        this.focusCell(e);\n        this.restoreEdit(e);\n        this.restoreAdd();\n        this.ensureSelectedRowPosition();\n        this.validationScrollLeft();\n        if (this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization) {\n            this.widthServices.refreshFrozenScrollbar();\n        }\n        if (!this.initialRowTop) {\n            var gridTop = this.parent.element.getBoundingClientRect().top;\n            if (this.parent.getRowByIndex(0)) {\n                this.initialRowTop = this.parent.getRowByIndex(0).getBoundingClientRect().top - gridTop;\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.validationScrollLeft = function () {\n        if (this.validationCheck) {\n            if (this.validationCol) {\n                var offset = this.vgenerator.cOffsets[(this.validationCol.index - this.parent.getVisibleFrozenColumns()) - 1];\n                this.validationCol = null;\n                this.content.scrollLeft = offset;\n            }\n            else {\n                this.validationCheck = false;\n                this.parent.editModule.editFormValidate();\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.ensureSelectedRowPosition = function () {\n        if (!this.isSelection && this.isSelectionScroll && !isNullOrUndefined(this.selectRowIndex)) {\n            this.isSelectionScroll = false;\n            var row = this.parent.getRowByIndex(this.selectRowIndex);\n            if (row && !this.isRowInView(row)) {\n                this.rowSelected({ rowIndex: this.selectRowIndex, row: row }, true);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    VirtualContentRenderer.prototype.focusCell = function (e) {\n        if (this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n            return;\n        }\n        var row = this.parent.getRowByIndex(this.rowIndex);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var cell = row.cells[this.cellIndex];\n        cell.focus({ preventScroll: true });\n        if (!this.parent.selectionSettings.checkboxOnly) {\n            this.parent.selectRow(parseInt(row.getAttribute(literals.dataRowIndex), 10));\n        }\n        this.activeKey = this.empty;\n    };\n    VirtualContentRenderer.prototype.restoreEdit = function (e) {\n        if (this.isNormaledit) {\n            if (this.parent.editSettings.allowEditing\n                && this.parent.editModule && !isNullOrUndefined(this.editedRowIndex)) {\n                var row = this.getRowByIndex(this.editedRowIndex);\n                var content = this.content;\n                var keys = Object.keys(this.virtualData);\n                var isXaxis = e && e.virtualInfo && e.virtualInfo.sentinelInfo.axis === 'X';\n                if (keys.length && row && !content.querySelector('.' + literals.editedRow) &&\n                    ['sorting', 'filtering', 'grouping', 'refresh', 'searching', 'ungrouping', 'reorder'].indexOf(e.requestType) === -1) {\n                    var top_1 = row.getBoundingClientRect().top - this.parent.element.getBoundingClientRect().top;\n                    if (isXaxis || (top_1 < this.content.offsetHeight && top_1 > this.parent.getRowHeight())) {\n                        this.parent.isEdit = false;\n                        this.parent.editModule.startEdit(row);\n                    }\n                }\n                if (row && this.content.querySelector('.' + literals.editedRow) && !keys.length) {\n                    var rowData = (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) ?\n                        this.enableCacheOnInfiniteColumnVirtual() ? this.virtualInfiniteData :\n                            extend({}, this.parent.getCurrentViewRecords()[this.editedRowIndex]) :\n                        extend({}, this.getRowObjectByIndex(this.editedRowIndex));\n                    this.virtualData = this.getVirtualEditedData(rowData);\n                }\n            }\n            this.restoreAdd();\n        }\n    };\n    VirtualContentRenderer.prototype.getVirtualEditedData = function (rowData) {\n        var editForms = [].slice.call(this.parent.element.getElementsByClassName('e-gridform'));\n        var isFormDestroyed = this.parent.editModule && this.parent.editModule.formObj\n            && this.parent.editModule.formObj.isDestroyed;\n        if (!isFormDestroyed) {\n            for (var i = 0; i < editForms.length; i++) {\n                rowData = this.parent.editModule.getCurrentEditedData(editForms[parseInt(i.toString(), 10)], rowData);\n            }\n        }\n        return rowData;\n    };\n    VirtualContentRenderer.prototype.restoreAdd = function () {\n        var startAdd = !this.parent.element.querySelector('.' + literals.addedRow);\n        if (this.isNormaledit && this.isAdd && startAdd) {\n            var isTop = this.parent.editSettings.newRowPosition === 'Top' && this.content.scrollTop < this.parent.getRowHeight();\n            var isBottom = this.parent.editSettings.newRowPosition === 'Bottom'\n                && this.parent.pageSettings.currentPage === this.maxPage;\n            if (isTop || isBottom) {\n                this.parent.isEdit = false;\n                this.parent.addRecord();\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.count = e.count;\n            this.maxPage = Math.ceil((this.parent.groupSettings.columns.length && this.parent.vcRows.length ? this.parent.vcRows.length\n                : e.count) / this.parent.pageSettings.pageSize);\n        }\n        this.vgenerator.checkAndResetCache(e.requestType);\n        if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined]\n            .some(function (value) { return e.requestType === value; })) {\n            this.refreshOffsets();\n        }\n        this.setVirtualHeight();\n        this.resetScrollPosition(e.requestType);\n    };\n    /**\n     * @param {number} height - specifies the height\n     * @returns {void}\n     * @hidden\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    VirtualContentRenderer.prototype.setVirtualHeight = function (height) {\n        var width = this.parent.enableColumnVirtualization ?\n            this.getColumnOffset(this.parent.getVisibleColumns().length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n        var virtualHeight = (this.offsets[isGroupAdaptive(this.parent) && this.count !== 0 ? this.getGroupedTotalBlocks() :\n            this.getTotalBlocks()]);\n        if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) {\n            virtualHeight = 0;\n        }\n        var totalBlocks = isGroupAdaptive(this.parent) && this.count !== 0 ? this.getGroupedTotalBlocks()\n            : this.getTotalBlocks();\n        var lastPage = Math.ceil(totalBlocks / 2);\n        var placeHolderBottom = Math.round(this.virtualEle.placeholder.getBoundingClientRect().bottom);\n        var wrapperBottom = Math.round(this.virtualEle.wrapper.getBoundingClientRect().bottom);\n        if ((this.currentInfo.page === lastPage || this.currentInfo.page + 1 === lastPage) && this.currentInfo.direction === 'down' &&\n            placeHolderBottom > wrapperBottom && !this.diff) {\n            this.diff = placeHolderBottom - wrapperBottom;\n        }\n        if (this.diff && (this.currentInfo.page === lastPage) && placeHolderBottom > wrapperBottom) {\n            virtualHeight -= this.diff;\n            this.heightChange = true;\n        }\n        else if (this.diff && this.heightChange && this.requestType === 'virtualscroll') {\n            virtualHeight -= this.diff;\n            this.heightChange = false;\n        }\n        this.virtualEle.setVirtualHeight(virtualHeight, width);\n        if (this.virtualEle && this.virtualEle.wrapper) {\n            if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) {\n                this.virtualEle.wrapper.style.minHeight = '';\n            }\n            else {\n                this.virtualEle.wrapper.style.minHeight = !isNullOrUndefined(virtualHeight) ? formatUnit(this.parent.height) : '0px';\n            }\n        }\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.setVirtualHeight(1, width);\n        }\n    };\n    /**\n     * @param {number} sTop - specifies the sTop\n     * @param {VirtualInfo} info - specifies the info\n     * @returns {number} - return the page\n     * @hidden\n     */\n    VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n        var _this = this;\n        var total = (isGroupAdaptive(this.parent)) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        var page = 0;\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = sTop <= _this.offsets[\"\" + offset] || (iOffset === total && sTop > _this.offsets[\"\" + offset]);\n            if (border) {\n                if (_this.offsetKeys.length % 2 !== 0 && iOffset.toString() === _this.offsetKeys[_this.offsetKeys.length - 2]\n                    && sTop <= _this.offsets[_this.offsetKeys.length - 1]) {\n                    iOffset = iOffset + 1;\n                }\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n        if (info === undefined) {\n            info = { page: this.getPageFromTop(sTop, {}) };\n            info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        var block = (info.blockIndexes[0] || 1) - 1;\n        var translate = this.getOffset(block);\n        var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n        if (isOnenter) {\n            info = this.prevInfo;\n        }\n        var result = translate > sTop ?\n            this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n        var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] -\n            this.tmpOffsets[info.blockIndexes[0]];\n        var totalBlocks = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        if (result + blockHeight > this.offsets[parseInt(totalBlocks.toString(), 10)]) {\n            result -= (result + blockHeight) - this.offsets[parseInt(totalBlocks.toString(), 10)];\n        }\n        if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) {\n            result = 0;\n        }\n        return result;\n    };\n    VirtualContentRenderer.prototype.getOffset = function (block) {\n        return Math.min(this.offsets[parseInt(block.toString(), 10)] | 0, this.offsets[this.maxBlock] | 0);\n    };\n    VirtualContentRenderer.prototype.onEntered = function () {\n        var _this = this;\n        return function (element, current, direction, e, isWheel, check) {\n            if ((direction === 'down' || direction === 'up') && !_this.parent.enableVirtualization && _this.parent.enableColumnVirtualization) {\n                return;\n            }\n            if (Browser.isIE && !isWheel && check && !_this.preventEvent && !_this.parent.enableVirtualMaskRow) {\n                _this.parent.showSpinner();\n            }\n            _this.prevInfo = _this.prevInfo || _this.vgenerator.getData();\n            if (_this.parent.enableVirtualMaskRow && !_this.preventEvent) {\n                var firstOffSetKey = parseInt(_this.offsetKeys[0], 10);\n                var lastOffSetKey = parseInt(_this.offsetKeys[_this.offsetKeys.length - 1], 10);\n                var blockIndex = _this.currentInfo.blockIndexes;\n                var viewInfo = _this.getInfoFromView(direction, current, e);\n                var disableShowMaskRow = (_this.prevInfo && current.axis === 'X'\n                    && _this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString())\n                    || (direction === 'down' && _this.parent.allowGrouping && _this.parent.groupSettings.columns.length\n                        && ((_this.parent.allowFiltering && _this.parent.filterSettings.columns.length)\n                            || _this.parent.searchSettings.key.length) && _this.offsetKeys.length <= 2);\n                if (!((blockIndex && blockIndex[0] === firstOffSetKey && direction === 'up') ||\n                    (blockIndex && blockIndex[blockIndex.length - 1] === lastOffSetKey && direction === 'down') || disableShowMaskRow)) {\n                    setTimeout(function () {\n                        _this.parent.showMaskRow(current.axis);\n                    }, 0);\n                }\n            }\n            var xAxis = current.axis === 'X';\n            var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n            var height = _this.content.getBoundingClientRect().height;\n            var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n            if (_this.parent.isFrozenGrid() && _this.parent.enableColumnVirtualization && _this.currentInfo &&\n                _this.currentInfo.columnIndexes) {\n                var cBlock = _this.currentInfo.columnIndexes[0] - 1;\n                var frzLeftWidth_2 = 0;\n                _this.parent.getColumns().filter(function (col) {\n                    if (col.visible && col.freeze === 'Left') {\n                        frzLeftWidth_2 += parseInt(col.width.toString(), 10);\n                    }\n                });\n                if (cBlock > _this.parent.getVisibleFrozenLeftCount()) {\n                    x = x - frzLeftWidth_2;\n                }\n            }\n            if (xAxis) {\n                var idx = Object.keys(_this.vgenerator.cOffsets).length - _this.prevInfo.columnIndexes.length;\n                var maxLeft = _this.vgenerator.cOffsets[idx - 1];\n                x = x > maxLeft ? maxLeft : x; //TODO: This fix horizontal scrollbar jumping issue in column virtualization.\n            }\n            if (!_this.parent.enableVirtualization && _this.parent.enableColumnVirtualization) {\n                _this.virtualEle.adjustTable(x, 0);\n            }\n            else {\n                var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n                _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n            }\n            if (_this.parent.enableColumnVirtualization) {\n                _this.header.virtualEle.adjustTable(x, 0);\n                if (_this.parent.isFrozenGrid()) {\n                    _this.resetStickyLeftPos(x);\n                }\n            }\n        };\n    };\n    VirtualContentRenderer.prototype.dataBound = function () {\n        this.parent.notify(events.refreshVirtualFrozenHeight, {});\n        if (this.isSelection && this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n            this.parent.selectRow(this.selectedRowIndex);\n        }\n        else {\n            this.activeKey = this.empty;\n            this.requestType = this.empty;\n        }\n    };\n    /**\n     * To calculate the position of frozen cells\n     *\n     * @param {number} valueX - specifies the transform X value\n     * @param {DocumentFragment | HTMLElement} newChild - specifies the element to transform\n     * @returns {void}\n     * @hidden\n     */\n    VirtualContentRenderer.prototype.resetStickyLeftPos = function (valueX, newChild) {\n        var cells = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-leftfreeze,.e-rightfreeze,.e-fixedfreeze')).concat([].slice.call((newChild ? newChild : this.parent.getContent()).querySelectorAll('.e-leftfreeze,.e-rightfreeze,.e-fixedfreeze')));\n        var frzLeftWidth = 0;\n        var frzRightWidth = 0;\n        if (this.parent.getHeaderContent().querySelectorAll('.e-fixedfreeze').length) {\n            frzLeftWidth = this.parent.leftrightColumnWidth('left');\n            frzRightWidth = this.parent.leftrightColumnWidth('right');\n        }\n        if (cells.length) {\n            for (var i = 0; i < cells.length; i++) {\n                var cell = cells[parseInt(i.toString(), 10)];\n                var col = void 0;\n                if (cell.classList.contains('e-rowcell')) {\n                    if (isNullOrUndefined(cell.getAttribute('data-colindex')) && cell.querySelector('[e-mappinguid]')) {\n                        var uid = cell.querySelector('[e-mappinguid]').getAttribute('e-mappinguid');\n                        col = this.parent.getColumnByUid(uid);\n                    }\n                    else {\n                        var idx = parseInt(cell.getAttribute('data-colindex'), 10);\n                        col = this.parent.getColumnByIndex(parseInt(idx.toString(), 10));\n                    }\n                }\n                else {\n                    if (cell.classList.contains('e-headercell') || cell.classList.contains('e-filterbarcell')) {\n                        var uid = cell.classList.contains('e-filterbarcell') ? cell.getAttribute('e-mappinguid') :\n                            cell.querySelector('[e-mappinguid]').getAttribute('e-mappinguid');\n                        col = this.parent.getColumnByUid(uid);\n                    }\n                }\n                if (col.freeze === 'Left') {\n                    cell.style.left = (col.valueX - valueX) + 'px';\n                }\n                else if (col.freeze === 'Right') {\n                    cell.style.right = (col.valueX + valueX) + 'px';\n                }\n                else if (col.freeze === 'Fixed') {\n                    cell.style.left = (frzLeftWidth - valueX) + 'px';\n                    cell.style.right = (frzRightWidth + valueX) + 'px';\n                }\n            }\n        }\n        this.parent.translateX = valueX;\n    };\n    VirtualContentRenderer.prototype.rowSelected = function (args, isSelection) {\n        if ((this.isSelection || isSelection) && !this.isLastBlockRow(args.rowIndex)) {\n            var transform = getTransformValues(this.content.firstElementChild);\n            var gridTop = this.parent.element.getBoundingClientRect().top;\n            var rowTop = args.row.getBoundingClientRect().top - gridTop;\n            var height = this.content.getBoundingClientRect().height;\n            var isBottom = height < rowTop;\n            var remainHeight = isBottom ? rowTop - height : this.initialRowTop - rowTop;\n            var translateY = isBottom ? transform.height - remainHeight : transform.height + remainHeight;\n            this.virtualEle.adjustTable(transform.width, translateY);\n            var wrapperInfo = this.virtualEle.wrapper.getBoundingClientRect();\n            var contentInfo = this.content.getBoundingClientRect();\n            if (wrapperInfo.top > contentInfo.top) {\n                this.virtualEle.adjustTable(transform.width, translateY - (wrapperInfo.top - contentInfo.top));\n            }\n            var lastRowTop = this.content.querySelector('tbody').lastElementChild.getBoundingClientRect().top - gridTop;\n            if (lastRowTop < height) {\n                translateY = translateY + (height - (args.row.getBoundingClientRect().top - gridTop));\n                this.virtualEle.adjustTable(transform.width, translateY - (this.parent.getRowHeight() / 2));\n            }\n            else if (contentInfo.bottom > wrapperInfo.bottom) {\n                this.virtualEle.adjustTable(transform.width, translateY + (contentInfo.bottom - wrapperInfo.bottom));\n            }\n            if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid()) {\n                this.resetStickyLeftPos(transform.width);\n            }\n        }\n        this.isSelection = false;\n    };\n    VirtualContentRenderer.prototype.isLastBlockRow = function (index) {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        var startIdx = (this.maxPage * this.parent.pageSettings.pageSize) - visibleRowCount;\n        return index >= startIdx;\n    };\n    VirtualContentRenderer.prototype.refreshMaxPage = function () {\n        if (this.parent.groupSettings.columns.length && this.parent.vcRows.length) {\n            this.maxPage = Math.ceil(this.parent.vcRows.length / this.parent.pageSettings.pageSize);\n        }\n    };\n    VirtualContentRenderer.prototype.setVirtualPageQuery = function (args) {\n        var visiblePage = [];\n        if (this.prevInfo && this.prevInfo.blockIndexes) {\n            visiblePage = getVisiblePage(this.prevInfo.blockIndexes);\n        }\n        if ((this.requestType === 'sorting' || this.requestType === 'delete') && visiblePage.length && checkIsVirtual(this.parent)) {\n            args.query.skip(this.parent.pageSettings.pageSize * (visiblePage[0] - 1));\n            args.query.take(this.parent.pageSettings.pageSize * visiblePage.length);\n            args.skipPage = true;\n            return;\n        }\n        var row = this.parent.getContent().querySelector('.e-row');\n        if (this.requestType === 'virtualscroll' && this.vgenerator.currentInfo.blockIndexes) {\n            this.vgenerator.currentInfo = {};\n        }\n        if (row && this.parent.isManualRefresh && this.currentInfo.blockIndexes\n            && (this.currentInfo.blockIndexes.length === 3 || visiblePage.length > 1)) {\n            this.vgenerator.startIndex = parseInt(row.getAttribute('data-rowindex'), 10);\n            this.vgenerator.currentInfo = extend({}, this.currentInfo);\n            this.vgenerator.currentInfo.blockIndexes = this.currentInfo.blockIndexes.slice();\n            var includePrevPage = this.vgenerator.includePrevPage = this.currentInfo.blockIndexes[0] % 2 === 0;\n            if (includePrevPage) {\n                this.vgenerator.startIndex = this.vgenerator.startIndex - this.getBlockSize();\n                this.vgenerator.currentInfo.blockIndexes.unshift(this.currentInfo.blockIndexes[0] - 1);\n            }\n            else {\n                this.vgenerator.currentInfo.blockIndexes.push(this.currentInfo.blockIndexes[this.currentInfo.blockIndexes.length - 1] + 1);\n            }\n            var skip = (this.vgenerator.currentInfo.blockIndexes[0] - 1) * this.getBlockSize();\n            var take = this.vgenerator.currentInfo.blockIndexes.length * this.getBlockSize();\n            args.query.skip(skip);\n            args.query.take(take);\n            args.skipPage = true;\n        }\n    };\n    VirtualContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        this.parent[\"\" + action](dataReady, this.onDataReady, this);\n        this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.addEventListener(events.rowSelected, this.rowSelected.bind(this));\n        this.parent[\"\" + action](refreshVirtualBlock, this.refreshContentRows, this);\n        this.parent[\"\" + action](events.refreshVirtualLazyLoadCache, this.refreshVirtualLazyLoadCache, this);\n        this.parent[\"\" + action](events.selectVirtualRow, this.selectVirtualRow, this);\n        this.parent[\"\" + action](events.virtaulCellFocus, this.virtualCellFocus, this);\n        this.parent[\"\" + action](events.virtualScrollEditActionBegin, this.editActionBegin, this);\n        this.parent[\"\" + action](events.virtualScrollAddActionBegin, this.addActionBegin, this);\n        this.parent[\"\" + action](events.virtualScrollEdit, this.restoreEdit, this);\n        this.parent[\"\" + action](events.virtualScrollEditSuccess, this.editSuccess, this);\n        this.parent[\"\" + action](events.refreshVirtualCache, this.refreshCache, this);\n        this.parent[\"\" + action](events.editReset, this.resetIsedit, this);\n        this.parent[\"\" + action](events.getVirtualData, this.getVirtualData, this);\n        this.parent[\"\" + action](events.virtualScrollEditCancel, this.editCancel, this);\n        this.parent[\"\" + action](events.refreshVirtualMaxPage, this.refreshMaxPage, this);\n        this.parent[\"\" + action](events.setVirtualPageQuery, this.setVirtualPageQuery, this);\n        this.parent[\"\" + action](events.selectRowOnContextOpen, this.selectRowOnContextOpen, this);\n        this.parent[\"\" + action](events.resetVirtualFocus, this.resetVirtualFocus, this);\n        this.parent[\"\" + action](events.refreshVirtualEditFormCells, this.refreshCells, this);\n        this.parent[\"\" + action](events.scrollToEdit, this.scrollToEdit, this);\n        var event = this.actions;\n        for (var i = 0; i < event.length; i++) {\n            this.parent[\"\" + action](event[parseInt(i.toString(), 10)] + \"-begin\", this.onActionBegin, this);\n        }\n        var fn = function () {\n            _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n            var gObj = _this.parent;\n            if (gObj.enablePersistence && gObj.scrollPosition) {\n                if (gObj.scrollPosition.top > 0) {\n                    _this.content.scrollTop = gObj.scrollPosition.top;\n                    var scrollValues = { direction: 'down', sentinel: _this.observer.sentinelInfo.down,\n                        offset: gObj.scrollPosition, focusElement: gObj.element };\n                    _this.scrollListener(scrollValues);\n                }\n                if (gObj.enableColumnVirtualization) {\n                    _this.content.scrollLeft = gObj.scrollPosition.left;\n                }\n            }\n            _this.parent.off(contentReady, fn);\n        };\n        this.parent.on(contentReady, fn, this);\n    };\n    VirtualContentRenderer.prototype.refreshVirtualLazyLoadCache = function (e) {\n        var blockIndex = this.currentInfo.blockIndexes;\n        if (isNullOrUndefined(this.currentInfo.blockIndexes)) {\n            blockIndex = [1, 2];\n        }\n        var block;\n        var index;\n        var cache;\n        for (var i = 0; i < blockIndex.length; i++) {\n            var rows = this.vgenerator.cache[blockIndex[parseInt(i.toString(), 10)]];\n            for (var j = 0; j < rows.length; j++) {\n                if (rows[parseInt(j.toString(), 10)].uid === e.uid) {\n                    block = blockIndex[parseInt(i.toString(), 10)];\n                    index = j;\n                    cache = rows;\n                    break;\n                }\n            }\n        }\n        if (e.count) {\n            this.vgenerator.cache[parseInt(block.toString(), 10)].splice(index + 1, e.count);\n        }\n        else if (e.rows && e.rows.length) {\n            this.vgenerator.cache[parseInt(block.toString(), 10)] = ([].slice.call(cache.slice(0, index + 1)).concat([].slice.call(e.rows))).concat([].slice.call(cache.slice(index + 1, cache.length)));\n        }\n        this.refreshOffsets();\n    };\n    VirtualContentRenderer.prototype.scrollToEdit = function (col) {\n        var allowScroll = true;\n        this.validationCheck = true;\n        if (this.isAdd && this.content.scrollTop > 0) {\n            allowScroll = false;\n            var keys = Object.keys(this.offsets);\n            this.content.scrollTop = this.parent.editSettings.newRowPosition === 'Top' ? 0 : this.offsets[keys.length - 1];\n        }\n        var row = this.parent.getRowByIndex(this.editedRowIndex);\n        if (!row && !isNullOrUndefined(this.editedRowIndex)) {\n            if (!row || !this.isRowInView(row)) {\n                var rowIndex = this.parent.getRowHeight();\n                var scrollTop = this.editedRowIndex * rowIndex;\n                if (!isNullOrUndefined(scrollTop)) {\n                    allowScroll = false;\n                    this.content.scrollTop = scrollTop;\n                }\n            }\n        }\n        if (col && allowScroll) {\n            var offset = this.vgenerator.cOffsets[(col.index - this.parent.getVisibleFrozenColumns()) - 1];\n            if (!this.parent.enableColumnVirtualization) {\n                var header = this.parent.getHeaderContent().querySelector('.e-headercelldiv[e-mappinguid=\"' + col.uid + '\"]');\n                offset = header.parentElement.offsetLeft;\n            }\n            if (this.parent.enableColumnVirtualization && this.parent.getVisibleFrozenLeftCount()) {\n                offset -= this.parent.leftrightColumnWidth('left');\n            }\n            this.content.scrollLeft = this.parent.enableRtl ? -Math.abs(offset) : offset;\n        }\n        if (col && !allowScroll) {\n            this.validationCol = col;\n        }\n    };\n    VirtualContentRenderer.prototype.refreshCells = function (rowObj) {\n        rowObj.cells = this.vgenerator.generateCells(rowObj.foreignKeyData);\n    };\n    VirtualContentRenderer.prototype.resetVirtualFocus = function (e) {\n        this.isCancel = e.isCancel;\n    };\n    /**\n     * @param {Object} data - specifies the data\n     * @param {Object} data.virtualData -specifies the data\n     * @param {boolean} data.isAdd - specifies isAdd\n     * @param {boolean} data.isCancel - specifies boolean in cancel\n     * @param {boolean} data.isScroll - specifies boolean for scroll\n     * @returns {void}\n     * @hidden\n     */\n    VirtualContentRenderer.prototype.getVirtualData = function (data) {\n        if (this.isNormaledit) {\n            var error = this.parent.element.querySelector('.e-griderror:not([style*=\"display: none\"])');\n            var keys = Object.keys(this.virtualData);\n            data.isScroll = keys.length !== 0 && this.currentInfo.sentinelInfo && this.currentInfo.sentinelInfo.axis === 'X';\n            if (error) {\n                return;\n            }\n            this.virtualData = keys.length ? this.virtualData : data.virtualData;\n            this.getVirtualEditedData(this.virtualData);\n            data.virtualData = this.virtualData;\n            data.isAdd = this.isAdd || this.parent.editSettings.showAddNewRow;\n            data.isCancel = this.isCancel;\n        }\n    };\n    VirtualContentRenderer.prototype.selectRowOnContextOpen = function (args) {\n        this.isContextMenuOpen = args.isOpen;\n    };\n    VirtualContentRenderer.prototype.editCancel = function (args) {\n        var dataIndex = getEditedDataIndex(this.parent, args.data);\n        if (!isNullOrUndefined(dataIndex)) {\n            args.data = this.parent.getCurrentViewRecords()[parseInt(dataIndex.toString(), 10)];\n        }\n    };\n    VirtualContentRenderer.prototype.editSuccess = function (args) {\n        if (this.isNormaledit) {\n            if (!this.isAdd && args.data) {\n                this.updateCurrentViewData(args.data);\n            }\n            this.isAdd = false;\n        }\n    };\n    VirtualContentRenderer.prototype.updateCurrentViewData = function (data) {\n        var dataIndex = getEditedDataIndex(this.parent, data);\n        if (!isNullOrUndefined(dataIndex)) {\n            this.parent.getCurrentViewRecords()[parseInt(dataIndex.toString(), 10)] = data;\n        }\n    };\n    VirtualContentRenderer.prototype.actionBegin = function (args) {\n        if (args.requestType !== 'virtualscroll') {\n            this.requestType = args.requestType;\n        }\n        if (!args.cancel) {\n            this.parent.notify(events.refreshVirtualFrozenRows, args);\n        }\n    };\n    VirtualContentRenderer.prototype.virtualCellFocus = function (e) {\n        // To decide the action (select or scroll), when using arrow keys for cell focus\n        var ele = document.activeElement;\n        if (!ele.classList.contains(literals.rowCell) && (ele instanceof HTMLInputElement\n            || !isNullOrUndefined(ele.closest('.e-templatecell')))) {\n            ele = ele.closest('.e-rowcell');\n        }\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns.length\n            && ele && (ele.classList.contains(literals.rowCell) || !isNullOrUndefined(parentsUntil(ele, literals.groupCaptionRow)))\n            && e && (e.action === 'upArrow' || e.action === 'downArrow' || e.action === 'shiftEnter')) {\n            var scrollEle = this.parent.getContent().firstElementChild;\n            var scrollEleInfo = scrollEle.getBoundingClientRect();\n            var row = closest(ele, 'tr');\n            var nextFocusRow = e.action === 'downArrow' ? row.nextElementSibling : row.previousElementSibling;\n            var nextFocusRowInfo = !isNullOrUndefined(nextFocusRow) ? nextFocusRow.getBoundingClientRect()\n                : undefined;\n            if (isNullOrUndefined(nextFocusRow) || (e.action === 'downArrow' && nextFocusRowInfo.bottom > scrollEleInfo.bottom)\n                || ((e.action === 'upArrow' || e.action === 'shiftEnter') && nextFocusRowInfo.top < scrollEleInfo.top)) {\n                this.activeKey = e.action;\n                this.parent.focusModule.virtualSelectionInfo = { isPending: isNullOrUndefined(nextFocusRow),\n                    direction: e.action, event: e };\n                var viewDifference = isNullOrUndefined(nextFocusRow) ? this.parent.getRowHeight()\n                    : e.action === 'downArrow' ? nextFocusRowInfo.bottom - scrollEleInfo.bottom\n                        : scrollEleInfo.top - nextFocusRowInfo.top;\n                scrollEle.scrollTop = e.action === 'downArrow' ? scrollEle.scrollTop + viewDifference\n                    : scrollEle.scrollTop - viewDifference;\n            }\n            else {\n                this.activeKey = this.empty;\n            }\n            return;\n        }\n        if (ele && ele.classList.contains(literals.rowCell)\n            && e && (e.action === 'upArrow' || e.action === 'downArrow' || e.action === 'shiftEnter')) {\n            var rowIndex = parseInt(ele.parentElement.getAttribute(literals.dataRowIndex), 10);\n            if (e && (e.action === 'downArrow' || e.action === 'upArrow' || e.action === 'shiftEnter')) {\n                var scrollEle = this.parent.getContent().firstElementChild;\n                if (e.action === 'downArrow') {\n                    rowIndex += 1;\n                }\n                else {\n                    rowIndex -= 1;\n                }\n                this.rowIndex = rowIndex;\n                this.cellIndex = parseInt(ele.getAttribute(literals.dataColIndex), 10);\n                var row = this.parent.getRowByIndex(rowIndex);\n                var page = this.parent.pageSettings.currentPage;\n                var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n                var emptyRow = false;\n                if (isNullOrUndefined(row)) {\n                    emptyRow = true;\n                    if ((e.action === 'downArrow' && page === this.maxPage - 1) || ((e.action === 'upArrow' || e.action === 'shiftEnter') && page === 1)) {\n                        emptyRow = false;\n                    }\n                }\n                if (emptyRow || (ensureLastRow(row, this.parent) && e.action === 'downArrow')\n                    || (ensureFirstRow(row, this.parent.getRowHeight() * 2) && (e.action === 'upArrow' || e.action === 'shiftEnter'))) {\n                    this.activeKey = e.action;\n                    scrollEle.scrollTop = e.action === 'downArrow' ?\n                        (rowIndex - visibleRowCount) * this.parent.getRowHeight() : rowIndex * this.parent.getRowHeight();\n                }\n                else {\n                    this.activeKey = this.empty;\n                }\n                if (!this.parent.selectionSettings.checkboxOnly) {\n                    this.parent.selectRow(rowIndex);\n                }\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.editActionBegin = function (e) {\n        this.editedRowIndex = e.index;\n        var rowData = (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) ?\n            extend({}, this.parent.getCurrentViewRecords()[e.index]) : extend({}, this.getRowObjectByIndex(e.index));\n        var keys = Object.keys(this.virtualData);\n        e.data = keys.length && !this.parent.editSettings.showAddNewRow ? this.virtualData : this.isInfiniteColumnvirtualization() ?\n            e.data : rowData;\n        if (this.enableCacheOnInfiniteColumnVirtual()) {\n            this.virtualInfiniteData = e.data;\n        }\n        e.isScroll = keys.length !== 0 && this.currentInfo.sentinelInfo && this.currentInfo.sentinelInfo.axis === 'X';\n    };\n    VirtualContentRenderer.prototype.getEditedRowObject = function () {\n        var rowObjects = this.parent.vcRows;\n        var editedrow;\n        for (var i = 0; i < rowObjects.length; i++) {\n            if (rowObjects[parseInt(i.toString(), 10)].index === this.editedRowIndex) {\n                editedrow = rowObjects[parseInt(i.toString(), 10)];\n            }\n        }\n        return editedrow;\n    };\n    VirtualContentRenderer.prototype.refreshCache = function (args) {\n        if (this.isInfiniteColumnvirtualization()) {\n            return;\n        }\n        var block = Math.ceil((this.editedRowIndex + 1) / this.getBlockSize());\n        if (this.parent.allowPaging && this.parent.enableColumnVirtualization) {\n            block = Math.ceil((this.editedRowIndex + 1 + ((this.parent.pageSettings.currentPage - 1) *\n                this.parent.pageSettings.pageSize)) / this.getBlockSize());\n        }\n        var index = (this.parent.allowPaging && this.parent.enableColumnVirtualization) ?\n            this.editedRowIndex % this.getBlockSize() : this.editedRowIndex - ((block - 1) * this.getBlockSize());\n        if (this.parent.groupSettings.columns.length) {\n            var editRowObject = this.getEditedRowObject();\n            if (editRowObject) {\n                editRowObject.data = args.data;\n            }\n        }\n        else {\n            this.vgenerator.cache[parseInt(block.toString(), 10)][parseInt(index.toString(), 10)].data = args.data;\n        }\n    };\n    VirtualContentRenderer.prototype.actionComplete = function (args) {\n        if (!(this.parent.enableVirtualization || this.parent.enableColumnVirtualization)) {\n            return;\n        }\n        var editRequestTypes = ['delete', 'save', 'cancel'];\n        var dataActionRequestTypes = ['sorting', 'filtering', 'grouping', 'refresh', 'searching', 'ungrouping', 'reorder'];\n        if (editRequestTypes.some(function (value) { return value === args.requestType; })) {\n            this.refreshOffsets();\n            this.refreshVirtualElement();\n        }\n        if (this.isNormaledit && (dataActionRequestTypes.some(function (value) { return value === args.requestType; })\n            || editRequestTypes.some(function (value) { return value === args.requestType; }))) {\n            this.isCancel = true;\n            this.isAdd = false || this.parent.editSettings.showAddNewRow;\n            this.editedRowIndex = this.empty;\n            this.virtualData = {};\n            this.virtualInfiniteData = {};\n            if (this.parent.editModule) {\n                this.parent.editModule.editModule.previousData = undefined;\n            }\n        }\n        if (this.parent.enableColumnVirtualization && args.requestType === 'filterAfterOpen'\n            && this.currentInfo.columnIndexes && this.currentInfo.columnIndexes[0] > 0) {\n            this.parent.resetFilterDlgPosition(args.columnName);\n        }\n    };\n    VirtualContentRenderer.prototype.resetIsedit = function () {\n        if (this.parent.enableVirtualization && this.isNormaledit) {\n            if ((this.parent.editSettings.allowEditing && Object.keys(this.virtualData).length)\n                || (this.parent.editSettings.allowAdding && this.isAdd)) {\n                this.parent.isEdit = true;\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.scrollAfterEdit = function () {\n        if (this.parent.editModule && this.parent.editSettings.allowEditing && this.isNormaledit) {\n            if (this.parent.element.querySelector('.e-gridform')) {\n                var editForm = this.parent.element.querySelector('.' + literals.editedRow);\n                var addForm = this.parent.element.querySelector('.' + literals.addedRow);\n                if (editForm || addForm) {\n                    var rowData = editForm ? extend({}, this.getRowObjectByIndex(this.editedRowIndex))\n                        : extend({}, this.emptyRowData);\n                    var keys = Object.keys(this.virtualData);\n                    this.virtualData = keys.length ? this.getVirtualEditedData(this.virtualData) : this.getVirtualEditedData(rowData);\n                }\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.createEmptyRowdata = function () {\n        var _this = this;\n        this.parent.columnModel.filter(function (e) {\n            _this.emptyRowData[e.field] = _this.empty;\n        });\n    };\n    VirtualContentRenderer.prototype.addActionBegin = function (args) {\n        if (this.isNormaledit) {\n            if (!Object.keys(this.emptyRowData).length) {\n                this.createEmptyRowdata();\n            }\n            this.isAdd = true;\n            var page = this.parent.pageSettings.currentPage;\n            if (!this.parent.frozenRows && this.content.scrollTop > 0 && this.parent.editSettings.newRowPosition === 'Top') {\n                this.isAdd = true;\n                this.onActionBegin();\n                args.startEdit = false;\n                this.content.scrollTop = 0;\n            }\n            if (page < this.maxPage - 1 && this.parent.editSettings.newRowPosition === 'Bottom') {\n                this.isAdd = true;\n                this.parent.setProperties({ pageSettings: { currentPage: this.maxPage - 1 } }, true);\n                args.startEdit = false;\n                this.content.scrollTop = this.offsets[this.offsetKeys.length];\n            }\n        }\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Object} returns the object\n     * @hidden\n     */\n    VirtualContentRenderer.prototype.getRowObjectByIndex = function (index) {\n        var data = this.getRowCollection(index, true);\n        return data;\n    };\n    VirtualContentRenderer.prototype.getBlockSize = function () {\n        return this.parent.pageSettings.pageSize >> 1;\n    };\n    VirtualContentRenderer.prototype.getBlockHeight = function () {\n        return this.getBlockSize() * this.parent.getRowHeight();\n    };\n    VirtualContentRenderer.prototype.isEndBlock = function (index) {\n        var totalBlocks = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        return index >= totalBlocks || index === totalBlocks - 1;\n    };\n    VirtualContentRenderer.prototype.isOddPageSize = function () {\n        return this.parent.pageSettings.pageSize % 2 !== 0;\n    };\n    VirtualContentRenderer.prototype.getOddBlockSize = function () {\n        return this.isOddPageSize() ? this.parent.pageSettings.pageSize / 2 : this.getBlockSize();\n    };\n    VirtualContentRenderer.prototype.getGroupedTotalBlocks = function () {\n        var rows = this.parent.vcRows;\n        return Math.floor((rows.length / this.getOddBlockSize()) < 1 ? 1 : rows.length / this.getOddBlockSize());\n    };\n    VirtualContentRenderer.prototype.getTotalBlocks = function () {\n        return Math.ceil(this.count / this.getOddBlockSize());\n    };\n    VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n        return this.vgenerator.cOffsets[parseInt(block.toString(), 10)] | 0;\n    };\n    VirtualContentRenderer.prototype.getModelGenerator = function () {\n        return new VirtualRowModelGenerator(this.parent);\n    };\n    VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n        if (this.actions.some(function (value) { return value === action; })) {\n            this.preventEvent = this.content.scrollTop !== 0;\n            this.content.scrollTop = 0;\n        }\n        if (action !== 'virtualscroll') {\n            this.isAdd = false;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    VirtualContentRenderer.prototype.onActionBegin = function (e) {\n        //Update property silently..\n        this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n    };\n    VirtualContentRenderer.prototype.getRows = function () {\n        return this.isInfiniteColumnvirtualization() ? this.getInfiniteRows() : this.vgenerator.getRows();\n    };\n    VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n        var row;\n        if (isGroupAdaptive(this.parent)) {\n            if (!isNullOrUndefined(index) && this.parent.enableVirtualization && this.parent.groupSettings.columns.length) {\n                for (var i = 0; i < this.parent.getDataRows().length; i++) {\n                    if (this.parent.getDataRows()[parseInt(i.toString(), 10)].getAttribute(literals.dataRowIndex) === index.toString()) {\n                        row = this.parent.getDataRows()[parseInt(i.toString(), 10)];\n                    }\n                }\n            }\n            else {\n                row = !isNullOrUndefined(index) ? this.parent.getDataRows()[parseInt(index.toString(), 10)] : undefined;\n            }\n        }\n        else if (!this.parent.enableVirtualization && this.parent.enableColumnVirtualization) {\n            row = !isNullOrUndefined(index) ? this.enableCacheOnInfiniteColumnVirtual() ?\n                this.parent.getDataRows().find(function (element) { return parseInt(element.getAttribute(literals.dataRowIndex), 10) === index; }) :\n                this.parent.getDataRows()[parseInt(index.toString(), 10)] : undefined;\n        }\n        else if (this.prevInfo) {\n            row = this.getRowCollection(index, false);\n        }\n        return row;\n    };\n    VirtualContentRenderer.prototype.getMovableVirtualRowByIndex = function (index) {\n        return this.getRowCollection(index, false);\n    };\n    VirtualContentRenderer.prototype.getFrozenRightVirtualRowByIndex = function (index) {\n        return this.getRowCollection(index, false);\n    };\n    VirtualContentRenderer.prototype.getRowCollection = function (index, isRowObject) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        if (this.parent.pageSettings.pageSize % 2 !== 0) {\n            startIdx += Math.floor((startIdx / this.getBlockSize()) / 2);\n        }\n        var rowCollection = this.parent.getDataRows();\n        var collection = isRowObject ? this.parent.getCurrentViewRecords() : rowCollection;\n        if (isRowObject && this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n            startIdx = parseInt(this.parent.getRows()[0].getAttribute(literals.dataRowIndex), 10);\n            collection = collection.filter(function (m) { return isNullOrUndefined(m.items); });\n        }\n        if (!isRowObject && this.parent.allowGrouping && this.parent.groupSettings.columns.length && rowCollection.length) {\n            startIdx = parseInt(rowCollection[0].getAttribute(literals.dataRowIndex), 10);\n        }\n        var selectedRow = collection[index - startIdx];\n        if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n            if (!isRowObject) {\n                selectedRow = index <= this.parent.frozenRows ? rowCollection[parseInt(index.toString(), 10)]\n                    : rowCollection[(index - startIdx) + this.parent.frozenRows];\n            }\n            else {\n                selectedRow = index <= this.parent.frozenRows ? this.parent.getRowsObject()[parseInt(index.toString(), 10)].data\n                    : selectedRow;\n            }\n        }\n        return selectedRow;\n    };\n    VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        if (this.parent.enableVirtualization && this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n            var vGroupedRows = this.vgenerator.cache[prev[0]];\n            for (var i = 0; i < vGroupedRows.length; i++) {\n                if (vGroupedRows[\"\" + i].isDataRow) {\n                    startIdx = vGroupedRows[\"\" + i].index;\n                    break;\n                }\n            }\n        }\n        return startIdx + index;\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    VirtualContentRenderer.prototype.refreshOffsets = function () {\n        var gObj = this.parent;\n        var row = 0;\n        var blockSize = this.getBlockSize();\n        var oddBlockSize = this.getOddBlockSize();\n        var total = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        this.prevHeight = this.offsets[parseInt(total.toString(), 10)];\n        this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n        this.offsets = {};\n        //Row offset update\n        // eslint-disable-next-line prefer-spread\n        var blocks = Array.apply(null, Array(total)).map(function () { return ++row; });\n        for (var i = 0; i < blocks.length; i++) {\n            var tmp = (this.vgenerator.cache[blocks[parseInt(i.toString(), 10)]] || []).length;\n            var rem = !isGroupAdaptive(this.parent) ? this.isOddPageSize() ?\n                Math.ceil(this.count % oddBlockSize) : this.count % blockSize : this.isOddPageSize() ?\n                Math.ceil(gObj.vcRows.length % oddBlockSize) : (gObj.vcRows.length % blockSize);\n            var size = !isGroupAdaptive(this.parent) && blocks[parseInt(i.toString(), 10)] in this.vgenerator.cache ?\n                tmp * this.parent.getRowHeight() : rem && blocks[parseInt(i.toString(), 10)] === total ? rem * this.parent.getRowHeight() :\n                this.getBlockHeight();\n            if (this.isOddPageSize() && !(blocks[parseInt(i.toString(), 10)] in this.vgenerator.cache)\n                && !(rem && blocks[parseInt(i.toString(), 10)] === total)) {\n                size = (blocks[parseInt(i.toString(), 10)] % 2 !== 0 ? Math.floor(oddBlockSize)\n                    : Math.ceil(oddBlockSize)) * this.parent.getRowHeight();\n            }\n            // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n            // tmp * getRowHeight() : this.getBlockHeight();\n            this.offsets[blocks[parseInt(i.toString(), 10)]] = (this.offsets[blocks[parseInt(i.toString(), 10)] - 1] | 0) + size;\n            this.tmpOffsets[blocks[parseInt(i.toString(), 10)]] = this.offsets[blocks[parseInt(i.toString(), 10)] - 1] | 0;\n        }\n        this.offsetKeys = Object.keys(this.offsets);\n        if (isGroupAdaptive(this.parent)) {\n            this.parent.vGroupOffsets = this.offsets;\n        }\n        //Column offset update\n        if (this.parent.enableColumnVirtualization) {\n            this.vgenerator.refreshColOffsets();\n        }\n    };\n    VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n        this.vgenerator.refreshColOffsets();\n        this.setVirtualHeight();\n    };\n    VirtualContentRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = [];\n        rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var isRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            isRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[parseInt(c.toString(), 10)];\n            var idx = gObj.getNormalizedColumnIndex(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            var colGrp = this.getColGroup().children;\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(colGrp[parseInt(idx.toString(), 10)], { 'display': displayVal });\n            }\n            if (!isRefresh) {\n                var width = void 0;\n                if (column.width) {\n                    if (column.visible) {\n                        width = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                    }\n                    else {\n                        width = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                    }\n                }\n                if (width > gObj.width) {\n                    this.setDisplayNone(tr, idx, displayVal, rows);\n                    if (this.parent.enableColumnVirtualization) {\n                        this.virtualEle.setWrapperWidth(width + '');\n                    }\n                    this.refreshVirtualElement();\n                }\n                else {\n                    isRefresh = true;\n                }\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (isRefresh) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            this.parent.notify(events.partialRefresh, { rows: rows, args: { isFrozen: false, rows: rows } });\n        }\n    };\n    VirtualContentRenderer.prototype.selectVirtualRow = function (args) {\n        var _this = this;\n        var count = isGroupAdaptive(this.parent) ? this.vgenerator.recordsCount : this.count;\n        args.isAvailable = args.selectedIndex < count;\n        if (args.isAvailable && !this.isContextMenuOpen && this.activeKey !== 'upArrow'\n            && this.activeKey !== 'downArrow' && !this.isSelection && !this.requestTypes.some(function (value) { return value === _this.requestType; })\n            && !this.parent.selectionModule.isInteracted) {\n            var selectedRow = this.parent.getRowByIndex(args.selectedIndex);\n            var rowHeight = this.parent.getRowHeight();\n            if (!selectedRow || !this.isRowInView(selectedRow)) {\n                this.isSelection = true;\n                this.selectedRowIndex = args.selectedIndex;\n                var scrollTop = (args.selectedIndex + 1) * rowHeight;\n                if (isGroupAdaptive(this.parent)) {\n                    var selectedRowObjectIndex = this.parent.vcRows\n                        .findIndex(function (row) { return row.index === args.selectedIndex; });\n                    scrollTop = selectedRowObjectIndex !== -1 ? selectedRowObjectIndex * rowHeight : undefined;\n                    this.isSelection = selectedRowObjectIndex !== -1 ? this.isSelection : false;\n                }\n                else if (this.parent.getDataModule().isRemote() && this.parent.groupSettings.columns.length) {\n                    var page = Math.ceil((args.selectedIndex + 1) / this.parent.pageSettings.pageSize);\n                    var blockIndexes = this.vgenerator.getBlockIndexes(page);\n                    scrollTop = this.offsets[blockIndexes[0]];\n                }\n                if (!isNullOrUndefined(scrollTop)) {\n                    var direction = this.content.scrollTop < scrollTop ? 'down' : 'up';\n                    this.selectRowIndex = args.selectedIndex;\n                    this.content.scrollTop = scrollTop;\n                    this.isSelectionScroll = this.observer.check(direction);\n                }\n            }\n        }\n        this.requestType = this.empty;\n    };\n    VirtualContentRenderer.prototype.isRowInView = function (row) {\n        var top = row.getBoundingClientRect().top;\n        var bottom = row.getBoundingClientRect().bottom;\n        return (top >= this.content.getBoundingClientRect().top && bottom <= this.content.getBoundingClientRect().bottom);\n    };\n    return VirtualContentRenderer;\n}(ContentRender));\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */ (function (_super) {\n    __extends(VirtualHeaderRenderer, _super);\n    function VirtualHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.virtualEle = new VirtualElementHandler();\n        _this.isMovable = false;\n        _this.gen = new VirtualRowModelGenerator(_this.parent);\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.parent.on(refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n        return _this;\n    }\n    VirtualHeaderRenderer.prototype.renderTable = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.' + literals.headerContent)));\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.getPanel().querySelector('.' + literals.headerContent);\n        this.virtualEle.content.style.position = 'relative';\n        this.virtualEle.renderWrapper();\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        (!(this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && this.parent.enableColumnVirtualization) ?\n            this.virtualEle.renderPlaceHolder() : this.virtualEle.renderPlaceHolder('absolute');\n    };\n    VirtualHeaderRenderer.prototype.appendContent = function (table) {\n        this.virtualEle.wrapper.appendChild(table);\n    };\n    VirtualHeaderRenderer.prototype.refreshUI = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.' + literals.headerContent)));\n        _super.prototype.refreshUI.call(this);\n    };\n    VirtualHeaderRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        var needFullRefresh;\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[parseInt(c.toString(), 10)];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            var colGrp = this.getColGroup().children;\n            if (gObj.getColumnByField(column.field)) {\n                setStyleAttribute(colGrp[parseInt(idx.toString(), 10)], { 'display': displayVal });\n            }\n            if (gObj.enableColumnVirtualization && !gObj.groupSettings.columns.length) {\n                var tablewidth = void 0;\n                if (column.visible) {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (tablewidth > gObj.width) {\n                    this.setDisplayNone(column, displayVal);\n                    this.virtualEle.setWrapperWidth(tablewidth + '');\n                    this.gen.refreshColOffsets();\n                }\n                else {\n                    needFullRefresh = true;\n                }\n            }\n            else {\n                needFullRefresh = true;\n            }\n            if (needFullRefresh) {\n                this.refreshUI();\n            }\n        }\n    };\n    VirtualHeaderRenderer.prototype.setDisplayNone = function (col, displayVal) {\n        var table = this.getTable();\n        for (var _i = 0, _a = [].slice.apply(table.querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            if (ele.querySelector('[e-mappinguid]') &&\n                ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === col.uid) {\n                setStyleAttribute(ele, { 'display': displayVal });\n                if (displayVal === '') {\n                    removeClass([ele], 'e-hide');\n                }\n                break;\n            }\n        }\n    };\n    return VirtualHeaderRenderer;\n}(HeaderRender));\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */ (function () {\n    function VirtualElementHandler() {\n    }\n    VirtualElementHandler.prototype.renderWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        this.wrapper.appendChild(this.table);\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n        if (position === void 0) { position = 'relative'; }\n        this.placeholder = createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.renderFrozenWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) + \"; display: flex\" });\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderFrozenPlaceHolder = function () {\n        this.placeholder = createElement('div', { className: 'e-virtualtrack' });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n        this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n        if (width && width.indexOf('%') === -1 && !(this.content.getBoundingClientRect().width < parseInt(width, 10))) {\n            width = undefined;\n            full = true;\n        }\n        this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n        this.placeholder.style.height = !isNullOrUndefined(height) ? height + \"px\" : '0px';\n        if (width && width.indexOf('%') === -1 && !(this.content.getBoundingClientRect().width < parseInt(width, 10))) {\n            width = '100%';\n        }\n        this.placeholder.style.width = width;\n    };\n    VirtualElementHandler.prototype.setFreezeWrapperWidth = function (wrapper, width, full) {\n        wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    return VirtualElementHandler;\n}());\nexport { VirtualElementHandler };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}