{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport { createElement, formatUnit, EventHandler, Browser } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, closest, addClass, removeClass, getValue, setValue } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constants';\nimport { ChartScroll } from '../actions/chart-scroll';\nimport { click } from '@syncfusion/ej2-grids';\nimport { VirtualContentRenderer } from '../renderer/virtual-content-render';\n/**\n * module to render gantt chart - project view\n */\nvar GanttChart = /** @class */function () {\n  function GanttChart(parent) {\n    this.isExpandCollapseFromChart = false;\n    this.isExpandAll = false;\n    this.isCollapseAll = false;\n    this.debounceTimeoutNext = 0;\n    this.debounceTimeout = 0;\n    this.isGanttElement = false;\n    this.previousPinchDistance = 0;\n    this.currentToolbarIndex = -1;\n    this.isPinching = false;\n    this.parent = parent;\n    this.chartTimelineContainer = null;\n    this.rangeViewContainer = createElement('div', {\n      className: cls.rangeContainer\n    });\n    this.rangeViewContainer.setAttribute('role', 'button');\n    this.rangeViewContainer.setAttribute('aria-label', 'RangeContainer');\n    this.virtualRender = new VirtualContentRenderer(this.parent);\n    this.addEventListener();\n  }\n  GanttChart.prototype.addEventListener = function () {\n    this.parent.on('renderPanels', this.renderChartContainer, this);\n    this.parent.on('recordsUpdated', this.renderChartElements, this);\n    this.parent.on('dataReady', this.renderInitialContents, this);\n    this.parent.on('tree-grid-created', this.renderChartContents, this);\n    this.parent.on('destroy', this.destroy, this);\n  };\n  GanttChart.prototype.renderChartContents = function () {\n    this.parent.notify('refreshDayMarkers', {});\n    this.wireEvents();\n  };\n  /**\n   * Method to render top level containers in Gantt chart\n   *\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.renderChartContainer = function () {\n    this.chartElement = createElement('div', {\n      id: this.parent.element.id + 'GanttChart',\n      className: cls.ganttChart\n    });\n    this.parent.chartPane.appendChild(this.chartElement);\n    this.renderTimelineContainer();\n    this.renderBodyContainers();\n    // render top level div header and content\n    // Get timeline header from timeline class file and append to header div\n    // render content div\n    // Render scroll able div\n    // Render container for all element like, table, weekend and holidays\n    // Get rows element from rows renderer class\n    // Get label related info label renderer class\n    // Get baseline from baseline renderer class\n    // Get weekend elements from weekend-holidays renderer class\n  };\n  /**\n   * method to render timeline, holidays, weekends at load time\n   *\n   * @returns {void} .\n   */\n  GanttChart.prototype.renderInitialContents = function () {\n    this.parent.timelineModule.createTimelineSeries();\n  };\n  /**\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.renderOverAllocationContainer = function () {\n    for (var i = 0; i < this.parent.flatData.length; i++) {\n      var data = this.parent.flatData[i];\n      if (data.childRecords.length > 0) {\n        this.parent.dataOperation.updateOverlappingValues(data);\n      }\n    }\n    var rangeContainer = this.parent.element.querySelector('.' + cls.rangeContainer);\n    if (rangeContainer) {\n      rangeContainer.innerHTML = '';\n    }\n    if (this.parent.treeGrid.grid.filterSettings.columns.length === 0) {\n      this.renderRangeContainer(this.parent.currentViewData);\n    }\n  };\n  GanttChart.prototype.renderChartElements = function () {\n    if (this.parent.isFromOnPropertyChange) {\n      this.rangeViewContainer.innerHTML = '';\n      this.parent.updateProjectDates(this.parent.cloneProjectStartDate, this.parent.cloneProjectEndDate, this.parent.isTimelineRoundOff);\n      this.parent.isFromOnPropertyChange = false;\n    } else {\n      this.parent.chartRowsModule.renderChartRows();\n      if (this.parent.predecessorModule && this.parent.taskFields.dependency) {\n        this.parent.connectorLineIds = [];\n        this.parent.updatedConnectorLineCollection = [];\n        this.parent.predecessorModule.createConnectorLinesCollection();\n      }\n      this.parent.connectorLineModule.renderConnectorLines(this.parent.updatedConnectorLineCollection);\n      for (var i = 0; i < this.parent.chartRowsModule.ganttChartTableBody.children.length; i++) {\n        if (this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[4]) {\n          this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[1].setAttribute('tabindex', '-1');\n          this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[2].setAttribute('tabindex', '-1');\n          this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[4].setAttribute('tabindex', '-1');\n        } else {\n          if (this.parent.viewType === 'ProjectView') {\n            var node = this.parent.chartRowsModule.ganttChartTableBody.children[parseInt(i.toString(), 10)].children[0].children[1].children[1];\n            if (!isNullOrUndefined(node)) {\n              this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[1].setAttribute('tabindex', '-1');\n            }\n          } else if (this.parent.chartRowsModule.ganttChartTableBody.children[parseInt(i.toString(), 10)].children[0].children[1].children[0]) {\n            this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[0].setAttribute('tabindex', '-1');\n          }\n        }\n      }\n      var criticalModule = this.parent.criticalPathModule;\n      if (this.parent.enableCriticalPath && criticalModule && criticalModule.criticalPathCollection) {\n        this.parent.criticalPathModule.criticalConnectorLine(criticalModule.criticalPathCollection, criticalModule.detailPredecessorCollection, this.parent.enableCriticalPath, criticalModule.predecessorCollectionTaskIds);\n      }\n      if (this.parent.showOverAllocation) {\n        this.renderOverAllocationContainer();\n      }\n    }\n    this.updateWidthAndHeight();\n    if (this.parent.isLoad) {\n      this.parent.notify('selectRowByIndex', {});\n    }\n    if (this.parent.timelineModule.isZoomToFit) {\n      this.parent.timelineModule.processZoomToFit();\n    }\n  };\n  /**\n   * @param {IGanttData[]} records .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.renderRangeContainer = function (records) {\n    var recordLength = records.length;\n    var count;\n    var ganttRecord;\n    var rangeCollection;\n    if (this.parent.treeGrid.grid.filterSettings.columns.length === 0) {\n      for (count = 0; count < recordLength; count++) {\n        ganttRecord = records[count];\n        rangeCollection = ganttRecord.ganttProperties.workTimelineRanges;\n        if (rangeCollection) {\n          this.renderRange(rangeCollection, ganttRecord);\n        }\n      }\n    }\n  };\n  GanttChart.prototype.getTopValue = function (currentRecord) {\n    var updatedRecords = this.parent.getExpandedRecords(this.parent.currentViewData);\n    var recordIndex = updatedRecords.indexOf(currentRecord);\n    if (currentRecord.parentItem && recordIndex === -1) {\n      var nestedParent = this.parent.getRecordByID(currentRecord.parentItem.taskId);\n      recordIndex = updatedRecords.indexOf(nestedParent);\n    }\n    if (!currentRecord.expanded) {\n      return recordIndex * this.parent.rowHeight;\n    }\n    return (recordIndex + 1) * this.parent.rowHeight;\n  };\n  /*get height for range bar*/\n  GanttChart.prototype.getRangeHeight = function (data) {\n    if (!data.expanded && data.hasChildRecords) {\n      return this.parent.rowHeight - Math.floor(this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight);\n    }\n    return data.childRecords.length * this.parent.rowHeight - Math.floor(this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight);\n  };\n  GanttChart.prototype.renderRange = function (rangeCollection, currentRecord) {\n    var topValue = 0;\n    var rowIndex = this.parent.currentViewData.indexOf(currentRecord);\n    if (!this.parent.allowTaskbarOverlap && this.parent.enableMultiTaskbar) {\n      topValue = !currentRecord.expanded ? this.parent.getRowByIndex(rowIndex).offsetTop : this.parent.getRowByIndex(rowIndex).offsetTop + this.parent.rowHeight;\n    } else {\n      topValue = this.getTopValue(currentRecord);\n    }\n    var sameIDElement = this.rangeViewContainer.querySelector('.' + 'rangeContainer' + currentRecord.ganttProperties.rowUniqueID);\n    if (sameIDElement) {\n      sameIDElement.remove();\n    }\n    var parentDiv = createElement('div', {\n      className: 'rangeContainer' + currentRecord.ganttProperties.rowUniqueID,\n      styles: \"top:\" + topValue + \"px; position: absolute;\"\n    });\n    if (currentRecord.level === 0 && !currentRecord.expanded && isNullOrUndefined(currentRecord.parentItem) && !this.parent.enableMultiTaskbar) {\n      return;\n    }\n    if (currentRecord.level > 0 && currentRecord.expanded && !this.parent.getRecordByID(currentRecord.parentItem.taskId).expanded) {\n      return;\n    }\n    for (var i = 0; i < rangeCollection.length; i++) {\n      var height = void 0;\n      var node = this.parent.chartRowsModule.ganttChartTableBody.childNodes;\n      if (!this.parent.allowTaskbarOverlap && !currentRecord.expanded && this.parent.enableMultiTaskbar && !this.isCollapseAll) {\n        height = parseInt(node[rowIndex].style.height, 10) - (this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight);\n      } else {\n        height = this.getRangeHeight(currentRecord);\n      }\n      var leftDiv = createElement('div', {\n        className: cls.rangeChildContainer + ' ' + 'e-leftarc',\n        styles: (this.parent.enableRtl ? 'right:' : 'left:') + ((this.parent.enableRtl ? rangeCollection[i].left + rangeCollection[i].width - 5 : rangeCollection[i].left) + \"px;\\n                top: \" + Math.floor((this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight) / 2) + \"px;\\n                height: \" + (height + 1) + \"px; border-right: 0px;\\n                z-index: \" + (this.parent.viewType === 'ProjectView' ? currentRecord.childRecords.length > 1 ? currentRecord.childRecords.length + 1 : currentRecord.childRecords.length : 6))\n      });\n      var rightDiv = createElement('div', {\n        className: cls.rangeChildContainer + ' ' + 'e-rightarc',\n        styles: (this.parent.enableRtl ? 'right:' : 'left:') + ((this.parent.enableRtl ? rangeCollection[i].left : rangeCollection[i].left + rangeCollection[i].width - 5) + \"px;\\n                top: \" + Math.floor((this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight) / 2) + \"px; height: \" + (height + 1) + \"px;\\n                border-left: 0px;\\n                z-index: \" + (this.parent.viewType === 'ProjectView' ? currentRecord.childRecords.length > 1 ? currentRecord.childRecords.length + 1 : currentRecord.childRecords.length : 6))\n      });\n      parentDiv.appendChild(leftDiv);\n      parentDiv.appendChild(rightDiv);\n      this.rangeViewContainer.appendChild(parentDiv);\n    }\n    this.parent.ganttChartModule.chartBodyContent.appendChild(this.rangeViewContainer);\n  };\n  /**\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.renderTimelineContainer = function () {\n    this.chartTimelineContainer = createElement('div', {\n      className: cls.timelineHeaderContainer\n    });\n    if (this.parent.enableRtl) {\n      this.chartTimelineContainer.style.borderLeftWidth = '1px';\n      this.chartTimelineContainer.style.borderRightWidth = '0px';\n    }\n    this.chartTimelineContainer.setAttribute('role', 'presentation');\n    this.chartElement.appendChild(this.chartTimelineContainer);\n  };\n  /**\n   * initiate chart container\n   *\n   * @returns {void} .\n   */\n  GanttChart.prototype.renderBodyContainers = function () {\n    this.chartBodyContainer = createElement('div', {\n      className: cls.chartBodyContainer\n    });\n    this.chartElement.appendChild(this.chartBodyContainer);\n    this.scrollElement = createElement('div', {\n      className: cls.chartScrollElement + ' ' + cls.scrollContent,\n      styles: 'position:relative;'\n    });\n    this.chartBodyContainer.appendChild(this.scrollElement);\n    this.chartBodyContent = createElement('div', {\n      className: cls.chartBodyContent,\n      styles: 'position:relative; overflow:hidden '\n    });\n    if (this.parent.virtualScrollModule && this.parent.enableVirtualization || this.parent.enableTimelineVirtualization) {\n      this.parent.ganttChartModule.virtualRender.renderWrapper();\n    } else {\n      this.scrollElement.appendChild(this.chartBodyContent);\n    }\n    // this.parent.chartRowsModule.createChartTable();\n    this.scrollObject = new ChartScroll(this.parent);\n    //this.scrollObject.setWidth(this.chartProperties.width);\n    var toolbarHeight = 0;\n    if (!isNullOrUndefined(this.parent.toolbarModule) && !isNullOrUndefined(this.parent.toolbarModule.element)) {\n      toolbarHeight = this.parent.toolbarModule.element.offsetHeight;\n    }\n    this.scrollObject.setHeight(this.parent.ganttHeight - this.chartTimelineContainer.offsetHeight - toolbarHeight);\n  };\n  /**\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.updateWidthAndHeight = function () {\n    //empty row height\n    var emptydivHeight = 36;\n    var emptyHeight = this.parent.contentHeight === 0 ? this.parent.flatData.length > 1 ? emptydivHeight : 0 : this.parent.contentHeight;\n    var contentElement = this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0];\n    if (emptyHeight >= contentElement['offsetHeight'] || this.parent.height === 'auto' || contentElement['offsetHeight'] - emptyHeight < emptydivHeight) {\n      this.chartBodyContent.style.height = formatUnit(emptyHeight);\n    } else {\n      var scrollHeight = this.parent.element.getElementsByClassName('e-chart-rows-container')[0]['offsetHeight'];\n      if (contentElement['offsetHeight'] >= scrollHeight) {\n        this.chartBodyContent.style.height = contentElement['offsetHeight'] - 17 + 'px';\n      } else {\n        this.chartBodyContent.style.height = contentElement['offsetHeight'] + 'px';\n      }\n    } //let element: HTMLElement = this.chartTimelineContainer.querySelector('.' + cls.timelineHeaderTableContainer);\n    // Handled zoomtofit horizontal scrollbar hide while performing different zooming levels in browser at virtualtimeline mode-Task(919516)\n    if (this.parent.timelineModule.isZoomToFit && this.parent.enableTimelineVirtualization) {\n      this.chartBodyContent.style.width = this.parent.enableTimelineVirtualization && this.parent.timelineModule.totalTimelineWidth > this.parent.element.offsetWidth * 3 ? formatUnit(this.parent.element.offsetWidth * 3) : formatUnit(this.parent.timelineModule.totalTimelineWidth - this.parent.timelineModule['clientWidthDifference']);\n    } else {\n      this.chartBodyContent.style.width = this.parent.enableTimelineVirtualization && this.parent.timelineModule.totalTimelineWidth > this.parent.element.offsetWidth * 3 ? formatUnit(this.parent.element.offsetWidth * 3) : formatUnit(this.parent.timelineModule.totalTimelineWidth);\n    }\n    // To handle the width of chartbody element after zoomtofit action followed by vertical scroll actions\n    if (this.parent.timelineModule.isZoomedToFit && this.parent.enableVirtualization) {\n      var clientWidth = Math.abs(this.parent.timelineModule.totalTimelineWidth - this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0].clientWidth);\n      this.parent.ganttChartModule.chartBodyContent.style.width = formatUnit(this.parent.timelineModule.totalTimelineWidth - clientWidth);\n    }\n    this.setVirtualHeight();\n    this.parent.notify('updateHeight', {});\n    this.parent.updateGridLineContainerHeight();\n    this.updateLastRowBottomWidth();\n  };\n  GanttChart.prototype.setVirtualHeight = function () {\n    if (this.parent.virtualScrollModule && this.parent.enableVirtualization) {\n      var wrapper = getValue('virtualTrack', this.parent.ganttChartModule.virtualRender);\n      wrapper.style.height = this.parent.treeGrid.element.getElementsByClassName('e-virtualtrack')[0].style.height;\n      var wrapper1 = getValue('wrapper', this.parent.ganttChartModule.virtualRender);\n      var treegridVirtualHeight = this.parent.treeGrid.element.getElementsByClassName('e-virtualtable')[0].style.transform;\n      var virtualTable = document.getElementsByClassName('e-virtualtable')[1].style.transform;\n      if (this.parent.enableTimelineVirtualization) {\n        var translateXValue = void 0;\n        if (virtualTable !== '') {\n          translateXValue = virtualTable.match(/translate.*\\((.+)\\)/)[1].split(', ')[0];\n        } else {\n          var chartTransform = this.parent.ganttChartModule.scrollElement.getElementsByClassName('e-virtualtable')[0].style.transform;\n          translateXValue = chartTransform.match(/translate.*\\((.+)\\)/)[1].split(', ')[0];\n        }\n        var translateYValue = treegridVirtualHeight.match(/translate.*\\((.+)\\)/)[1].split(', ')[1];\n        wrapper1.style.transform = \"translate(\" + translateXValue + \", \" + translateYValue + \")\";\n      } else {\n        wrapper1.style.transform = treegridVirtualHeight;\n      }\n    }\n  };\n  /**\n   * Method to update bottom border for chart rows\n   *\n   * @returns {void} .\n   */\n  GanttChart.prototype.updateLastRowBottomWidth = function () {\n    if (this.parent.currentViewData.length > 0 && this.parent.height !== 'auto') {\n      var expandedRecords = this.parent.virtualScrollModule && this.parent.enableVirtualization ? this.parent.currentViewData : this.parent.getExpandedRecords(this.parent.currentViewData);\n      var lastExpandedRow = expandedRecords[expandedRecords.length - 1];\n      var lastExpandedRowIndex = this.parent.currentViewData.indexOf(lastExpandedRow);\n      var lastRow = this.parent.getRowByIndex(lastExpandedRowIndex);\n      var table = this.parent.chartRowsModule.ganttChartTableBody;\n      if (table.querySelectorAll('.e-chart-row-cell.e-chart-row-border.e-lastrow')) {\n        removeClass(table.querySelectorAll('.e-chart-row-cell.e-chart-row-border.e-lastrow'), 'e-lastrow');\n      }\n      if (this.chartBodyContent.clientHeight < this.chartBodyContainer.clientHeight) {\n        if (lastRow) {\n          addClass(lastRow.querySelectorAll('td'), 'e-lastrow');\n          var emptydivHeight = 36;\n          var emptyHeight = this.parent.contentHeight === 0 ? this.parent.flatData.length > 1 ? emptydivHeight : 0 : this.parent.contentHeight;\n          var contentElement = this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0];\n          if (emptyHeight >= contentElement['offsetHeight'] || contentElement['offsetHeight'] - emptyHeight < emptydivHeight) {\n            this.chartBodyContent.style.height = formatUnit(emptyHeight);\n          } else {\n            var scrollHeight = this.parent.element.getElementsByClassName('e-chart-rows-container')[0]['offsetHeight'];\n            if (contentElement['offsetHeight'] >= scrollHeight) {\n              this.chartBodyContent.style.height = contentElement['offsetHeight'] - 17 + 'px';\n            } else {\n              this.chartBodyContent.style.height = contentElement['offsetHeight'] + 'px';\n            }\n          }\n        }\n      }\n    }\n  };\n  GanttChart.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off('renderPanels', this.renderChartContainer);\n    this.parent.off('recordsUpdated', this.renderChartElements);\n    this.parent.off('dataReady', this.renderInitialContents);\n    this.parent.off('tree-grid-created', this.renderChartContents);\n    this.parent.off('destroy', this.destroy);\n  };\n  /**\n   * Click event handler in chart side\n   *\n   * @param {PointerEvent} e .\n   * @returns {void} .\n   */\n  GanttChart.prototype.ganttChartMouseDown = function (e) {\n    var cancel = false;\n    if (e.type === 'touchstart' && e instanceof TouchEvent && e.touches && e.touches.length === 2) {\n      // Calculate initial distance between two Pinch touch points\n      this.initPinchDistance = this.calculatePinchDistance(e.touches[0], e.touches[1]);\n      this.isPinching = true;\n    }\n    if (this.parent.allowTaskbarDragAndDrop && this.parent.editModule && this.parent.editSettings.allowTaskbarEditing && !this.isPinching) {\n      var editAction = this.parent.editModule.taskbarEditModule['getTaskBarAction'](e);\n      if (editAction === 'ChildDrag' || editAction === 'ParentDrag' || editAction === 'MilestoneDrag' || editAction === 'ManualParentDrag') {\n        var args = {\n          cancel: cancel,\n          data: this.getRecordByTaskBar(e.target),\n          target: e.target,\n          chartRow: closest(e.target, 'tr')\n        };\n        this.parent.trigger('rowDragStartHelper', args);\n        cancel = args['cancel'];\n      }\n    }\n    if (!cancel && !this.isPinching) {\n      if (e.which !== 3 && this.parent.editSettings.allowTaskbarEditing) {\n        this.parent.notify('chartMouseDown', e);\n        this.parent.element.tabIndex = 0;\n      }\n      var isTaskbarEdited = false;\n      if (this.parent.editSettings.allowTaskbarEditing && (this.parent.element.querySelector('.e-left-resize-gripper') || this.parent.element.querySelector('.e-left-connectorpoint-outer-div'))) {\n        isTaskbarEdited = true;\n      }\n      if (!isTaskbarEdited || e.button === 2) {\n        if (this.parent.editSettings.allowEditing && this.parent.treeGrid.element.getElementsByClassName('e-editedbatchcell').length > 0) {\n          this.parent.treeGrid.endEdit();\n        }\n      }\n    }\n  };\n  GanttChart.prototype.calculatePinchDistance = function (touch1, touch2) {\n    var dx = touch2.clientX - touch1.clientX;\n    var dy = touch2.clientY - touch1.clientY;\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n  GanttChart.prototype.ganttChartMouseClick = function (e) {\n    if (this.parent.autoFocusTasks) {\n      this.scrollToTarget(e); /** Scroll to task */\n    }\n    this.parent.notify('chartMouseClick', e);\n  };\n  GanttChart.prototype.ganttChartMouseUp = function (e) {\n    if (e.type === 'touchend') {\n      this.initPinchDistance = null;\n      this.isPinching = false;\n      var resizeCheck = this.parent.ganttChartModule.chartBodyContainer.querySelector('.e-taskbar-resize-div');\n      if (!isNullOrUndefined(resizeCheck)) {\n        resizeCheck.remove();\n      }\n      var Check = this.parent.ganttChartModule.chartBodyContainer.querySelector('.e-clone-taskbar') || this.parent.chartPane.querySelector('.e-clone-taskbar');\n      if (!isNullOrUndefined(Check)) {\n        var clonetbody = Check.parentElement;\n        var cloneTable = clonetbody.parentElement;\n        cloneTable.remove();\n      }\n      var falseline = this.parent.ganttChartModule.chartBodyContainer.querySelector('.e-gantt-false-line');\n      if (!isNullOrUndefined(falseline)) {\n        this.parent.editModule.taskbarEditModule.removeFalseLine(true);\n      }\n    }\n    if (this.parent.editSettings.allowTaskbarEditing) {\n      this.parent.notify('chartMouseUp', e);\n    }\n    if (!this.parent.editSettings.allowEditing) {\n      var isTaskbarEdited = false;\n      if (this.parent.editSettings.allowTaskbarEditing && getValue('editModule.taskbarEditModule.isMouseDragged', this.parent) && getValue('editModule.taskbarEditModule.taskBarEditAction', this.parent)) {\n        isTaskbarEdited = true;\n      }\n      if (!isTaskbarEdited) {\n        /** Expand/collapse action */\n        var target = e.target;\n        var isOnTaskbarElement = e.target.classList.contains(cls.taskBarMainContainer) || closest(e.target, '.' + cls.taskBarMainContainer);\n        if (closest(target, '.e-gantt-parent-taskbar') && !this.parent.editSettings.allowEditing) {\n          this.chartExpandCollapseRequest(e);\n        } else if (!isOnTaskbarElement && this.parent.autoFocusTasks) {\n          this.scrollToTarget(e); /** Scroll to task */\n        }\n      }\n    }\n  };\n  /**\n   *\n   * @param {PointerEvent} e .\n   * @returns {void} .\n   */\n  GanttChart.prototype.scrollToTarget = function (e) {\n    var row = closest(e.target, 'tr');\n    if (row && this.parent.element.contains(row) && (this.parent.element.querySelectorAll('.e-chart-rows-container')[0].contains(e.target) || this.parent.element.querySelectorAll('.e-gridcontent')[0].contains(e.target)) && this.parent.currentViewData.length > 0) {\n      var rowIndex = getValue('rowIndex', closest(e.target, 'tr'));\n      var dateObject = this.parent.currentViewData[rowIndex].ganttProperties.startDate;\n      var dateObjLeft = this.parent.currentViewData[rowIndex].ganttProperties.left;\n      if (!isNullOrUndefined(dateObject)) {\n        var left = !this.parent.enableTimelineVirtualization ? this.parent.dataOperation.getTaskLeft(dateObject, false) : {};\n        if (this.parent.autoFocusTasks) {\n          if (this.parent.enableTimelineVirtualization) {\n            this.updateScrollLeft(dateObjLeft);\n          } else {\n            this.updateScrollLeft(left);\n          }\n        }\n      }\n    }\n  };\n  /**\n   * To focus selected task in chart side\n   *\n   * @param {number} scrollLeft .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.updateScrollLeft = function (scrollLeft) {\n    scrollLeft = scrollLeft > 0 ? scrollLeft : 0;\n    scrollLeft = this.scrollElement.scrollWidth <= scrollLeft ? this.scrollElement.scrollWidth : scrollLeft;\n    if (this.scrollElement.offsetWidth + this.parent.ganttChartModule.scrollElement.scrollLeft < scrollLeft || this.scrollElement.scrollLeft > scrollLeft) {\n      this.scrollObject.setScrollLeft(scrollLeft - 50, this.parent.enableRtl ? -1 : 0);\n    }\n    //  this.parent.ganttChartModule.scrollObject.updateLeftPosition();\n  };\n  /**\n   *  Method trigger while perform mouse up action.\n   *\n   * @param {PointerEvent} e .\n   * @returns {void}\n   * @private\n   */\n  GanttChart.prototype.mouseUp = function (e) {\n    if (e.type === 'touchend') {\n      this.initPinchDistance = null;\n      this.isPinching = false;\n    }\n    if (!isNullOrUndefined(this.parent.editModule) && !isNullOrUndefined(this.parent.editModule.taskbarEditModule)) {\n      this.parent.editModule.taskbarEditModule.removeFalseLine(false);\n    }\n    var resizeCheck = this.parent.element.querySelector('.e-taskbar-resize-div');\n    if (!isNullOrUndefined(resizeCheck)) {\n      resizeCheck.remove();\n    }\n    if (this.parent.allowTaskbarDragAndDrop && this.parent.editModule && this.parent.editModule.taskbarEditModule) {\n      this.parent.editModule.taskbarEditModule['previousLeftValue'] = 0;\n    }\n    if (this.parent.allowRowDragAndDrop) {\n      var ganttDragElemet = this.parent.element.querySelector('.e-ganttdrag');\n      if (ganttDragElemet) {\n        ganttDragElemet.remove();\n      }\n    }\n    if (!this.isGanttElement) {\n      this.parent.notify('chartMouseUp', e);\n    }\n    this.isGanttElement = false;\n  };\n  /**\n   *  Method trigger while perform mouse up action.\n   *\n   * @param {PointerEvent} e .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.documentMouseUp = function (e) {\n    if (e.type === 'touchend') {\n      this.initPinchDistance = null;\n      this.isPinching = false;\n      this.previousPinchDistance = 0;\n    }\n    this.isGanttElement = true;\n    if (e.target.classList.contains('e-treegridexpand') || e.target.classList.contains('e-treegridcollapse')) {\n      if (getValue('isEditCollapse', this.parent.treeGrid) === true) {\n        setValue('isEditCollapse', false, this.parent.treeGrid);\n      }\n    }\n    if (this.parent.allowRowDragAndDrop) {\n      var ganttDragElemet = this.parent.element.querySelector('.e-ganttdrag');\n      if (ganttDragElemet) {\n        ganttDragElemet.remove();\n      }\n    }\n    if (this.parent.isDestroyed || e.which === 3) {\n      return;\n    }\n    var resizeCheck = this.parent.ganttChartModule.chartBodyContainer.querySelector('.e-taskbar-resize-div');\n    if (!isNullOrUndefined(resizeCheck)) {\n      resizeCheck.remove();\n    }\n    var Check = this.parent.element.getElementsByClassName('e-clone-taskbar')[0];\n    if (!isNullOrUndefined(Check)) {\n      var clonetbody = Check.parentElement;\n      var cloneTable = clonetbody.parentElement;\n      cloneTable.remove();\n    }\n    var isTaskbarEdited = false;\n    if (this.parent.editSettings.allowTaskbarEditing && getValue('editModule.taskbarEditModule.isMouseDragged', this.parent) && getValue('editModule.taskbarEditModule.taskBarEditAction', this.parent)) {\n      isTaskbarEdited = true;\n    }\n    this.parent.notify('chartMouseUp', e);\n    if (this.parent.showActiveElement) {\n      this.parent.showIndicator = true;\n      if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n        this.parent.hideMaskRow();\n      } else {\n        this.parent.hideSpinner();\n      }\n      if (this.focusedElement && !e.target.classList.contains('e-split-bar')) {\n        this.focusedElement.tabIndex = this.focusedElement.tabIndex === 0 ? -1 : this.focusedElement.tabIndex;\n        removeClass([this.focusedElement], 'e-active-container');\n      }\n    }\n    if (!isTaskbarEdited) {\n      /** Expand/collapse action */\n      var target = e.target;\n      var isOnTaskbarElement = e.target.classList.contains(cls.taskBarMainContainer) || closest(e.target, '.' + cls.taskBarMainContainer);\n      if (closest(target, '.e-gantt-parent-taskbar') && !this.parent.editSettings.allowEditing) {\n        this.chartExpandCollapseRequest(e);\n      } else if (!isOnTaskbarElement && this.parent.autoFocusTasks) {\n        this.scrollToTarget(e); /** Scroll to task */\n      }\n    }\n    if (this.parent.editModule && this.parent.editModule.taskbarEditModule) {\n      this.parent.editModule.taskbarEditModule.removeFalseLine(true);\n    }\n    if (!isNullOrUndefined(this.parent.onTaskbarClick) && !isTaskbarEdited) {\n      var target = e.target;\n      var taskbarElement = closest(target, '.e-gantt-parent-taskbar,.e-gantt-child-taskbar,.e-gantt-milestone');\n      if (taskbarElement) {\n        this.onTaskbarClick(e, target, taskbarElement);\n      }\n    }\n  };\n  /**\n   * This event triggered when click on taskbar element\n   *\n   * @param {PointerEvent | KeyboardEventArgs} e .\n   * @param {EventTarget} target .\n   * @param {Element} taskbarElement .\n   * @returns {void}\n   */\n  GanttChart.prototype.onTaskbarClick = function (e, target, taskbarElement) {\n    var rowIndex;\n    var chartRow = closest(target, 'tr');\n    if (!isNullOrUndefined(chartRow)) {\n      rowIndex = getValue('rowIndex', chartRow);\n    }\n    var data = this.getRecordByTarget(e);\n    var args = {\n      data: data,\n      taskbarElement: taskbarElement,\n      rowIndex: rowIndex,\n      target: target\n    };\n    this.parent.trigger('onTaskbarClick', args);\n  };\n  /**\n   *  Method trigger while perform mouse leave action.\n   *\n   * @param {PointerEvent} e .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.ganttChartLeave = function (e) {\n    if (this.parent.editSettings.allowTaskbarEditing) {\n      this.parent.notify('chartMouseLeave', e);\n    }\n  };\n  /**\n   *  Method trigger while perform mouse move action.\n   *\n   * @param {PointerEvent} e .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.ganttChartMove = function (e) {\n    if (e.type === 'touchmove' && this.isPinching === true && e instanceof TouchEvent && e.touches && e.touches.length === 2) {\n      // Calculate current distance between two touch points\n      var currentPinchDistance = this.calculatePinchDistance(e.touches[0], e.touches[1]);\n      if (Math.abs(this.previousPinchDistance - currentPinchDistance) > 15) {\n        if (currentPinchDistance > this.previousPinchDistance) {\n          // Pinch out detected - Perform Zoom in\n          this.parent.timelineModule.processZooming(true);\n        } else if (currentPinchDistance < this.previousPinchDistance) {\n          // Pinch in detected - Perform Zoom out\n          this.parent.timelineModule.processZooming(false);\n        }\n        this.previousPinchDistance = currentPinchDistance;\n      }\n    }\n    if (this.parent.editSettings.allowTaskbarEditing && this.isPinching === false) {\n      if (this.parent.element.getElementsByClassName('e-clone-taskbar').length > 0 && !this.parent.enableRtl) {\n        var xValue = void 0;\n        if (e.type === 'touchmove' || e.type === 'touchstart' || e.type === 'touchend') {\n          xValue = e['changedTouches'][0].pageX;\n        } else {\n          xValue = e.pageX;\n        }\n        if (xValue <= this.parent.getOffsetRect(this.parent.ganttChartModule.chartElement).left) {\n          return;\n        }\n      }\n      this.parent.notify('chartMouseMove', e);\n      if (!isNullOrUndefined(this.parent.taskFields.dependency) && this.parent.connectorLineEditModule) {\n        this.parent.connectorLineEditModule.updateConnectorLineEditElement(e);\n      }\n    }\n  };\n  /**\n   *  Method trigger while perform right click action.\n   *\n   * @param {PointerEvent} e .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.contextClick = function (e) {\n    if (this.parent.allowFiltering && this.parent.filterModule) {\n      this.parent.filterModule.closeFilterOnContextClick(e.srcElement);\n    }\n    if (this.parent.allowTaskbarDragAndDrop) {\n      var Check = this.parent.chartPane.querySelector('.e-clone-taskbar');\n      if (!isNullOrUndefined(Check)) {\n        var clonetbody = Check.parentElement;\n        var cloneTable = clonetbody.parentElement;\n        cloneTable.remove();\n      }\n    }\n  };\n  /**\n   * Method to trigger while perform mouse move on Gantt.\n   *\n   * @param {PointerEvent} e .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.mouseMoveHandler = function (e) {\n    if (!isNullOrUndefined(this.parent.onMouseMove) && (this.parent.flatData.length || e.target.classList.contains('e-header-cell-label') || e.target.classList.contains('e-headercell'))) {\n      var target = e.target;\n      var args = {\n        originalEvent: e\n      };\n      var element = closest(target, '.e-chart-row-cell,.e-connector-line-container,' + '.e-event-markers,.e-header-cell-label,.e-rowcell,.e-headercell,.e-indicator-span');\n      if (element) {\n        var rowData = void 0;\n        var rowElement = closest(target, '.e-rowcell,.e-chart-row-cell');\n        var columnElement = closest(target, '.e-rowcell,.e-headercell');\n        if (rowElement) {\n          rowData = this.parent.ganttChartModule.getRecordByTarget(e);\n          args.data = rowData;\n        }\n        if (columnElement) {\n          var cellIndex = getValue('cellIndex', columnElement);\n          args.column = this.parent.treeGrid.columns[cellIndex];\n        }\n        if (closest(target, '.e-indicator-span')) {\n          var index = 0;\n          var indicators = rowData.ganttProperties.indicators;\n          if (indicators.length > 1) {\n            for (index = 0; index < indicators.length; index++) {\n              if (indicators[index].name === element.innerText.trim()) {\n                break;\n              }\n            }\n          }\n          args.indicator = indicators[index];\n        }\n        if (closest(target, '.e-connector-line-container')) {\n          var obj = {};\n          obj.target = element;\n          args.predecessor = this.parent.tooltipModule.getPredecessorTooltipData(obj);\n        }\n        if (closest(target, '.e-event-markers')) {\n          var obj = {};\n          obj.target = element;\n          args.eventMarkers = this.parent.tooltipModule.getMarkerTooltipData(obj);\n        }\n        if (target.classList.contains('e-header-cell-label')) {\n          args.date = new Date(target.dataset.content);\n        }\n      }\n      this.parent.trigger('onMouseMove', args);\n    }\n  };\n  /**\n   * Double click handler for chart\n   *\n   * @param {PointerEvent} e .\n   * @returns {void} .\n   */\n  GanttChart.prototype.doubleClickHandler = function (e) {\n    var target = e.target;\n    var row = closest(target, 'tr');\n    var rowIndex = getValue('rowIndex', row);\n    var rowData = this.parent.ganttChartModule.getRecordByTarget(e);\n    if (this.parent.editSettings.allowEditing && this.parent.treeGrid.element.getElementsByClassName('e-editedbatchcell').length > 0) {\n      this.parent.treeGrid.endEdit();\n    }\n    this.parent.notify('chartDblClick', e);\n    var args = {\n      row: row,\n      rowData: rowData,\n      rowIndex: rowIndex,\n      target: target\n    };\n    this.recordDoubleClick(args);\n  };\n  /**\n   * To trigger record double click event.\n   *\n   * @param {RecordDoubleClickEventArgs} args .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.recordDoubleClick = function (args) {\n    this.parent.trigger('recordDoubleClick', args);\n  };\n  /**\n   * @param {PointerEvent | KeyboardEventArgs} e .\n   * @returns {IGanttData} .\n   * @private\n   */\n  GanttChart.prototype.getRecordByTarget = function (e) {\n    var ganttData;\n    var row = closest(e.target, 'div.' + cls.taskBarMainContainer);\n    if (!isNullOrUndefined(row)) {\n      var id = row.getAttribute('rowUniqueId');\n      ganttData = this.parent.getRecordByID(id);\n    } else {\n      row = closest(e.target, 'tr');\n      if (row) {\n        var rowIndex = getValue('rowIndex', closest(e.target, 'tr'));\n        ganttData = this.parent.currentViewData[rowIndex];\n      }\n    }\n    return ganttData;\n  };\n  /**\n   * To get gantt chart row elements\n   *\n   * @returns {NodeListOf<Element>} .\n   * @private\n   */\n  GanttChart.prototype.getChartRows = function () {\n    if (document.getElementById(this.parent.element.id + 'GanttTaskTableBody') !== null) {\n      return document.getElementById(this.parent.element.id + 'GanttTaskTableBody').querySelectorAll('.e-chart-row');\n    } else {\n      return null;\n    }\n  };\n  /**\n   * Expand Collapse operations from gantt chart side\n   *\n   * @param {PointerEvent} e .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.chartExpandCollapseRequest = function (e) {\n    if (this.parent.enableMultiTaskbar) {\n      return;\n    }\n    var target = e.target;\n    var parentElement = closest(target, '.e-gantt-parent-taskbar');\n    var record = this.getRecordByTarget(e);\n    var chartRow = closest(target, 'tr');\n    var rowIndex = getValue('rowIndex', chartRow);\n    var gridRow = this.parent.treeGrid.getRows()[rowIndex];\n    var args = {\n      data: record,\n      gridRow: gridRow,\n      chartRow: chartRow,\n      cancel: false\n    };\n    this.isExpandCollapseFromChart = true;\n    if (parentElement.classList.contains('e-row-expand')) {\n      this.collapseGanttRow(args);\n    } else if (parentElement.classList.contains('e-row-collapse')) {\n      this.expandGanttRow(args);\n    }\n  };\n  /**\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.reRenderConnectorLines = function () {\n    this.parent.connectorLineModule.dependencyViewContainer.innerHTML = '';\n    this.parent.connectorLineIds = [];\n    this.parent.updatedConnectorLineCollection = [];\n    this.parent.predecessorModule.createConnectorLinesCollection();\n    this.parent.connectorLineModule.renderConnectorLines(this.parent.updatedConnectorLineCollection);\n    var criticalModule = this.parent.criticalPathModule;\n    if (this.parent.enableCriticalPath && criticalModule && criticalModule.criticalPathCollection) {\n      criticalModule.criticalConnectorLine(criticalModule.criticalPathCollection, criticalModule.detailPredecessorCollection, true, criticalModule.predecessorCollectionTaskIds);\n    }\n  };\n  /**\n   * To collapse gantt rows\n   *\n   * @param {object} args .\n   * @param {boolean} isCancel .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.collapseGanttRow = function (args) {\n    var _this = this;\n    this.parent.trigger('collapsing', args, function (arg) {\n      if (_this.isExpandCollapseFromChart && !getValue('cancel', arg)) {\n        _this.collapsedGanttRow(arg);\n      }\n      _this.isExpandCollapseFromChart = false;\n    });\n  };\n  /**\n   * @returns {void} .\n   * @param {object} args .\n   * @private\n   */\n  GanttChart.prototype.collapsedGanttRow = function (args) {\n    var _this = this;\n    if (isNullOrUndefined(args['gridRow']) && this.parent.enableVirtualization || isNullOrUndefined(args['chartRow'])) {\n      return;\n    }\n    var record;\n    if (this.parent.loadChildOnDemand && this.parent.taskFields.hasChildMapping) {\n      record = this.parent.currentViewData.filter(function (item) {\n        return item.ganttProperties[_this.parent.taskFields.id] === args['data'][_this.parent.taskFields.id];\n      })[0];\n    } else {\n      record = getValue('data', args);\n    }\n    if (this.isExpandCollapseFromChart) {\n      this.expandCollapseChartRows('collapse', getValue('chartRow', args), record, null);\n      var idField_1 = this.parent.taskFields.id;\n      if (this.parent.loadChildOnDemand && this.parent.taskFields.hasChildMapping) {\n        var gridRec = this.parent.treeGrid.getCurrentViewRecords().filter(function (item) {\n          return item[idField_1] === args['data'][idField_1];\n        })[0];\n        this.parent.treeGrid.collapseRow(getValue('gridRow', args), gridRec);\n      } else {\n        this.parent.treeGrid.collapseRow(getValue('gridRow', args), record);\n      }\n      this.isExpandCollapseFromChart = false;\n    } else {\n      this.expandCollapseChartRows('collapse', getValue('chartRow', args), record, null);\n    }\n    // To render the child record on parent row after collapsing\n    if (this.parent.viewType === 'ResourceView' || this.parent.viewType === 'ProjectView') {\n      this.renderMultiTaskbar(record);\n    }\n    if (!this.parent.enableVirtualization) {\n      this.parent.updateContentHeight();\n    }\n    this.updateWidthAndHeight();\n    this.reRenderConnectorLines();\n    getValue('chartRow', args).setAttribute('aria-expanded', 'false');\n  };\n  /**\n   * To expand gantt rows\n   *\n   * @returns {void} .\n   * @param {object} args .\n   * @param {boolean} isCancel .\n   * @private\n   */\n  GanttChart.prototype.expandGanttRow = function (args) {\n    var _this = this;\n    this.parent.trigger('expanding', args, function (arg) {\n      if (_this.isExpandCollapseFromChart && !getValue('cancel', arg)) {\n        _this.expandedGanttRow(arg);\n      }\n      _this.isExpandCollapseFromChart = false;\n    });\n  };\n  /**\n   * @returns {void} .\n   * @param {object} args .\n   * @private\n   */\n  GanttChart.prototype.expandedGanttRow = function (args) {\n    var _this = this;\n    if (isNullOrUndefined(args['gridRow']) && this.parent.enableVirtualization || isNullOrUndefined(args['chartRow'])) {\n      return;\n    }\n    var record;\n    if (this.parent.loadChildOnDemand && this.parent.taskFields.hasChildMapping) {\n      record = this.parent.currentViewData.filter(function (item) {\n        return item.ganttProperties.taskId === args['data'][_this.parent.taskFields.id];\n      })[0];\n    } else {\n      record = getValue('data', args);\n    }\n    if (this.isExpandCollapseFromChart) {\n      this.expandCollapseChartRows('expand', getValue('chartRow', args), record, null);\n      var idField_2 = this.parent.taskFields.id;\n      if (this.parent.loadChildOnDemand && this.parent.taskFields.hasChildMapping) {\n        var gridRec = this.parent.treeGrid.getCurrentViewRecords().filter(function (item) {\n          return item[idField_2] === args['data'][idField_2];\n        })[0];\n        this.parent.treeGrid.expandRow(getValue('gridRow', args), gridRec);\n      } else {\n        this.parent.treeGrid.expandRow(getValue('gridRow', args), record);\n      }\n      this.isExpandCollapseFromChart = false;\n    } else {\n      if (!this.parent.isExpandCollapseLevelMethod) {\n        this.expandCollapseChartRows('expand', getValue('chartRow', args), record, null);\n      }\n      this.parent.isExpandCollapseLevelMethod = false;\n    }\n    // To render the child record on parent row after expanding.\n    if (this.parent.viewType === 'ResourceView' || this.parent.viewType === 'ProjectView') {\n      this.renderMultiTaskbar(record);\n    }\n    if (!this.parent.enableVirtualization) {\n      this.parent.updateContentHeight();\n    }\n    this.updateWidthAndHeight();\n    this.reRenderConnectorLines();\n    getValue('chartRow', args).setAttribute('aria-expanded', 'true');\n  };\n  GanttChart.prototype.renderMultiTaskbar = function (record) {\n    if (this.parent.enableMultiTaskbar) {\n      this.parent.chartRowsModule.refreshRecords([record], true);\n    } else if (this.parent.showOverAllocation) {\n      this.parent.ganttChartModule.renderRangeContainer(this.parent.currentViewData);\n    }\n  };\n  /**\n   * On expand collapse operation row properties will be updated here.\n   *\n   * @param {string} action .\n   * @param {Node} rowElement .\n   * @param {IGanttData} record .\n   * @param {boolean} isChild .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.expandCollapseChartRows = function (action, rowElement, record, isChild) {\n    var displayType;\n    if (action === 'expand') {\n      displayType = 'table-row';\n      if (!isChild) {\n        record.expanded = true;\n      }\n      var targetElement = rowElement.querySelectorAll('.e-row-collapse');\n      for (var t = 0; t < targetElement.length; t++) {\n        addClass([targetElement[t]], 'e-row-expand');\n        removeClass([targetElement[t]], 'e-row-collapse');\n      }\n    } else if (action === 'collapse') {\n      displayType = 'none';\n      if (!isChild) {\n        record.expanded = false;\n      }\n      var targetElement = rowElement.querySelectorAll('.e-row-expand');\n      for (var t = 0; t < targetElement.length; t++) {\n        addClass([targetElement[t]], 'e-row-collapse');\n        removeClass([targetElement[t]], 'e-row-expand');\n      }\n    }\n    if (!this.parent.enableVirtualization) {\n      var childRecords = record.childRecords;\n      var chartRows = this.getChartRows();\n      var rows = [];\n      for (var i = 0; i < chartRows.length; i++) {\n        if (chartRows[i].classList.contains('gridrowtaskId' + record.ganttProperties.rowUniqueID + 'level' + (record.level + 1))) {\n          rows.push(chartRows[i]);\n        }\n      }\n      for (var i = 0; i < rows.length; i++) {\n        rows[i].style.display = displayType;\n        if (childRecords[i].childRecords && childRecords[i].childRecords.length && (action === 'collapse' || childRecords[i].expanded || this.isExpandAll)) {\n          this.expandCollapseChartRows(action, rows[i], childRecords[i], true);\n        }\n      }\n    }\n  };\n  /**\n   * Public method to expand or collapse all the rows of Gantt\n   *\n   * @returns {void}\n   * @param {string} action .\n   * @private\n   */\n  GanttChart.prototype.expandCollapseAll = function (action) {\n    if (action === 'expand') {\n      this.isExpandAll = true;\n      this.parent.treeGrid.expandAll();\n    } else {\n      this.isCollapseAll = true;\n      this.parent.treeGrid.collapseAll();\n      if (this.isCollapseAll && !this.parent.allowTaskbarOverlap) {\n        var treeGridContentHeight = this.parent.enableRtl ? this.parent['element'].getElementsByClassName('e-content')[2].children[0]['offsetHeight'] : this.parent['element'].getElementsByClassName('e-content')[0].children[0]['offsetHeight'];\n        this.parent.contentHeight = treeGridContentHeight;\n        document.getElementsByClassName('e-chart-rows-container')[0]['style'].height = this.parent.contentHeight + 'px';\n      }\n    }\n    this.isExpandAll = false;\n    this.isCollapseAll = false;\n  };\n  /**\n   * Public method to expand particular level of rows.\n   *\n   * @returns {void} .\n   * @param {number} level .\n   * @private\n   */\n  GanttChart.prototype.expandAtLevel = function (level) {\n    this.parent.treeGrid.expandAtLevel(level);\n  };\n  /**\n   * Public method to collapse particular level of rows.\n   *\n   * @returns {void} .\n   * @param {number} level .\n   * @private\n   */\n  GanttChart.prototype.collapseAtLevel = function (level) {\n    if (this.parent.enableVirtualization) {\n      this.parent.isExpandCollapseLevelMethod = true;\n    }\n    this.parent.treeGrid.collapseAtLevel(level);\n  };\n  /**\n   * Event Binding for gantt chart click\n   *\n   * @returns {void} .\n   */\n  GanttChart.prototype.wireEvents = function () {\n    var isIE11Pointer = Browser.isPointer; // eslint-disable-line\n    var mouseDown = Browser.touchStartEvent;\n    var mouseUp = Browser.touchEndEvent;\n    var mouseMove = Browser.touchMoveEvent;\n    var cancel = isIE11Pointer ? 'pointerleave' : 'mouseleave';\n    EventHandler.add(this.parent.chartPane, mouseDown, this.ganttChartMouseDown, this);\n    EventHandler.add(this.parent.chartPane, cancel, this.ganttChartLeave, this);\n    EventHandler.add(this.parent.chartPane, mouseMove, this.ganttChartMove, this);\n    EventHandler.add(this.parent.chartPane, 'wheel', this.onWheelZoom, this);\n    if (this.parent.isAdaptive) {\n      EventHandler.add(this.parent.chartPane, click, this.ganttChartMouseClick, this);\n      EventHandler.add(this.parent.chartPane, mouseUp, this.ganttChartMouseUp, this);\n    }\n    if (!this.parent.isAdaptive) {\n      EventHandler.add(this.parent.element, mouseUp, this.documentMouseUp, this);\n      EventHandler.add(document, mouseUp, this.mouseUp, this);\n    }\n    EventHandler.add(this.parent.element, 'mousemove', this.mouseMoveHandler, this);\n    EventHandler.add(document.body, 'contextmenu', this.contextClick, this);\n    EventHandler.add(document, 'mouseup', this.contextClick, this);\n    EventHandler.add(this.parent.chartRowsModule.ganttChartTableBody, 'dblclick', this.doubleClickHandler, this);\n  };\n  GanttChart.prototype.unWireEvents = function () {\n    var isIE11Pointer = Browser.isPointer; // eslint-disable-line\n    var mouseDown = Browser.touchStartEvent;\n    var mouseUp = Browser.touchEndEvent;\n    var mouseMove = Browser.touchMoveEvent;\n    var cancel = isIE11Pointer ? 'pointerleave' : 'mouseleave';\n    if (!isNullOrUndefined(this.parent.chartRowsModule.ganttChartTableBody)) {\n      EventHandler.remove(this.parent.chartRowsModule.ganttChartTableBody, mouseDown, this.ganttChartMouseDown);\n    }\n    if (!isNullOrUndefined(this.parent.chartPane)) {\n      EventHandler.remove(this.parent.chartPane, cancel, this.ganttChartLeave);\n      EventHandler.remove(this.parent.chartPane, mouseMove, this.ganttChartMove);\n      EventHandler.remove(this.parent.chartPane, 'wheel', this.onWheelZoom);\n      EventHandler.remove(this.parent.chartPane, mouseDown, this.ganttChartMouseDown);\n    }\n    if (this.parent.isAdaptive) {\n      if (!isNullOrUndefined(this.parent.chartPane)) {\n        EventHandler.remove(this.parent.chartPane, click, this.ganttChartMouseClick);\n        EventHandler.remove(this.parent.chartPane, mouseUp, this.ganttChartMouseUp);\n      }\n    }\n    if (!this.parent.isAdaptive) {\n      if (!isNullOrUndefined(this.parent.element)) {\n        EventHandler.remove(this.parent.element, mouseUp, this.documentMouseUp);\n      }\n      if (!isNullOrUndefined(document)) {\n        EventHandler.remove(document, mouseUp, this.mouseUp);\n      }\n    }\n    if (!isNullOrUndefined(this.parent.element)) {\n      EventHandler.remove(this.parent.element, 'mousemove', this.mouseMoveHandler);\n    }\n    if (!isNullOrUndefined(document)) {\n      EventHandler.remove(document, 'mouseup', this.contextClick);\n      if (!isNullOrUndefined(document.body)) {\n        EventHandler.remove(document.body, 'contextmenu', this.contextClick);\n      }\n    }\n    if (!isNullOrUndefined(this.parent.chartRowsModule.ganttChartTableBody)) {\n      EventHandler.remove(this.parent.chartRowsModule.ganttChartTableBody, 'dblclick', this.doubleClickHandler);\n    }\n  };\n  // Triggers while perform ctrl+mouse wheel Pinch IN/OUT actions\n  GanttChart.prototype.onWheelZoom = function (e) {\n    if (e.ctrlKey) {\n      e.preventDefault();\n      var zoomIn1_1 = e.deltaY < 0;\n      // Differentiating between touchpad and mouse wheel\n      var isTouchpad_1 = false;\n      if (Math.abs(e.deltaY) < 75) {\n        // Smaller deltaY typically indicates touchpad\n        isTouchpad_1 = true;\n      }\n      if (this.debounceTimeout) {\n        if (this.debounceTimeoutNext + 20 > this.debounceTimeout) {\n          clearTimeout(this.debounceTimeout);\n        }\n        if (this.debounceTimeoutNext + 20 <= this.debounceTimeout || !this.debounceTimeoutNext) {\n          this.debounceTimeoutNext = this.debounceTimeout;\n        }\n      }\n      this.debounceTimeout = setTimeout(function () {\n        var verticalScrollDelta = Math.abs(e.deltaY);\n        // Adjust threshold based on the input method\n        var isValidScrollDelta = isTouchpad_1 ? verticalScrollDelta > 0.5 && verticalScrollDelta < 15 : verticalScrollDelta > 5 && verticalScrollDelta <= 200;\n        if (isValidScrollDelta) {\n          this.parent.timelineModule.processZooming(zoomIn1_1);\n        }\n      }.bind(this), 100);\n    }\n  };\n  /**\n   * To get record by taskbar element.\n   *\n   * @param {Element} target .\n   * @returns {IGanttData} .\n   * @private\n   */\n  GanttChart.prototype.getRecordByTaskBar = function (target) {\n    var item;\n    if (this.parent.enableVirtualization && this.parent.enableMultiTaskbar) {\n      item = this.parent.flatData[this.getIndexByTaskBar(target)];\n    } else {\n      item = this.parent.currentViewData[this.getIndexByTaskBar(target)];\n    }\n    return item;\n  };\n  GanttChart.prototype.updateElement = function (next, currentColumn, isTab, isInEditedState, row) {\n    if (this.parent.ganttColumns[next.getAttribute('data-colindex')].field === this.parent.taskFields.progress) {\n      var rowIndex = row.index;\n      do {\n        if (row.hasChildRecords) {\n          next = this.getNextElement(next, isTab, isInEditedState);\n        }\n        currentColumn = this.parent.ganttColumns[next.getAttribute('data-colindex')];\n        rowIndex = this.parent.treeGrid.getRows().indexOf(next.parentElement);\n      } while (!currentColumn.allowEditing);\n      this.parent.treeGrid.saveCell();\n      this.parent.treeGrid.editCell(rowIndex, this.parent.ganttColumns[next.getAttribute('data-colindex')].field);\n    }\n    return next;\n  };\n  /**\n   * Trigger Tab & Shift + Tab keypress to highlight active element.\n   *\n   * @param {KeyboardEventArgs} e .\n   * @returns {void} .\n   * @private\n   */\n  GanttChart.prototype.onTabAction = function (e) {\n    this.parent.treeGrid.grid.enableHeaderFocus = this.parent.enableHeaderFocus;\n    var toolbarItems = document.getElementsByClassName('e-toolbar-item');\n    var isInEditedState = this.parent.editModule && this.parent.editModule.cellEditModule && this.parent.editModule.cellEditModule.isCellEdit;\n    if (!this.parent.showActiveElement && !isInEditedState) {\n      return;\n    }\n    var $target = isInEditedState ? e.target.closest('.e-rowcell') : e.target;\n    if (this.parent.element.querySelectorAll('.e-focused').length > 0) {\n      $target = this.parent.element.querySelectorAll('.e-focused')[0];\n    }\n    if ($target && !($target.classList.contains('e-toolbar-item') || $target.classList.contains('e-input') || $target.classList.contains('e-btn'))) {\n      this.currentToolbarIndex = -1;\n    }\n    if ($target.closest('.e-rowcell') || $target.closest('.e-chart-row')) {\n      this.parent.focusModule.setActiveElement($target);\n    }\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    this.focusedRowIndex = $target.closest('.e-rowcell') ? $target.parentElement.rowIndex : /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    $target.closest('.e-chart-row') ? $target.closest('.e-chart-row').rowIndex : -1;\n    var isTab = e.action === 'tab' ? true : false;\n    var nextElement = this.getNextElement($target, isTab, isInEditedState);\n    if (nextElement && (nextElement === 'noNextRow' || nextElement.classList.contains('e-rowdragheader'))) {\n      // eslint-disable-next-line\n      nextElement === 'noNextRow' && this.parent.treeGrid.element.getElementsByClassName('e-editedbatchcell').length > 0 ? this.parent.treeGrid.saveCell() : '';\n      nextElement = null;\n    }\n    if (nextElement && $target.classList.contains('e-headercell')) {\n      var colIndex = parseInt(nextElement.getAttribute('data-colindex'), 10);\n      if (e.action === 'shiftTab') {\n        while (colIndex !== -1 && !this.parent.treeGrid.columns[colIndex]['visible']) {\n          colIndex = colIndex - 1;\n        }\n        if (colIndex !== -1) {\n          colIndex = this.parent.allowRowDragAndDrop ? colIndex + 1 : colIndex;\n          nextElement = document.getElementsByClassName('e-columnheader')[0].childNodes[colIndex];\n        } else {\n          var toolbarItems_1 = document.getElementsByClassName('e-toolbar-item');\n          for (var i = toolbarItems_1.length - 1; i > 0; i--) {\n            if (!document.getElementsByClassName('e-toolbar-item')[i].classList.contains('e-hidden')) {\n              nextElement = document.getElementsByClassName('e-toolbar-item')[i];\n              this.currentToolbarIndex = i;\n              break;\n            }\n          }\n        }\n      } else {\n        while (!this.parent.treeGrid.columns[colIndex]['visible']) {\n          colIndex = colIndex + 1;\n        }\n        colIndex = this.parent.allowRowDragAndDrop ? colIndex + 1 : colIndex;\n        nextElement = document.getElementsByClassName('e-columnheader')[0].childNodes[colIndex];\n      }\n    }\n    if (!nextElement && $target.classList.contains('e-headercell') && e.action === 'tab') {\n      nextElement = document.getElementsByClassName('e-timeline-header-container')[0];\n    }\n    if (!nextElement && ($target.classList.contains('e-headercell') || $target.classList.contains('e-toolbar-item') || $target.classList.contains('e-treegrid') || $target.classList.contains('e-input') || $target.classList.contains('e-btn')) && this.parent.toolbarModule && this.parent.toolbar.length > 0) {\n      var itemIndex = this.currentToolbarIndex !== -1 ? e.action === 'tab' ? this.currentToolbarIndex + 1 : this.currentToolbarIndex - 1 : e.action === 'shiftTab' ? toolbarItems.length - 1 : 1;\n      var isUpdated = false;\n      if (itemIndex !== -1 && (e.action === 'shiftTab' || e.action === 'tab' && itemIndex < toolbarItems.length)) {\n        do {\n          if (!toolbarItems[itemIndex].classList.contains('e-hidden')) {\n            nextElement = toolbarItems[itemIndex];\n            nextElement.setAttribute('tabindex', '-1');\n            if (nextElement.querySelector('.e-btn') === $target) {\n              // eslint-disable-next-line\n              e.action === 'tab' ? itemIndex++ : itemIndex--;\n              nextElement = toolbarItems[itemIndex];\n            }\n            if (nextElement.querySelector('.e-btn')) {\n              nextElement.querySelector('.e-btn').setAttribute('tabindex', '0');\n            }\n            isUpdated = true;\n            this.currentToolbarIndex = itemIndex;\n          } else {\n            // eslint-disable-next-line\n            e.action === 'tab' ? itemIndex++ : itemIndex--;\n          }\n        } while (!isUpdated);\n      }\n    }\n    if (e.action === 'tab' && !nextElement && this.currentToolbarIndex === toolbarItems.length - 1 && ($target.classList.contains('e-toolbar-item') || $target.classList.contains('e-input') || $target.classList.contains('e-btn'))) {\n      for (var i = 0; i < this.parent.treeGrid.columns.length; i++) {\n        if (this.parent.treeGrid.columns[i]['visible']) {\n          nextElement = document.getElementsByClassName('e-columnheader')[0].childNodes[i];\n          break;\n        }\n      }\n    }\n    if (e.action === 'shiftTab' && !nextElement && !$target.classList.contains('e-headercell')) {\n      nextElement = document.getElementsByClassName('e-timeline-header-container')[0];\n    }\n    if (e.action === 'shiftTab' && $target.classList.contains('e-timeline-header-container')) {\n      for (var i = this.parent.treeGrid.columns.length; i > 0; i--) {\n        if (this.parent.treeGrid.columns[i - 1]['visible']) {\n          nextElement = document.getElementsByClassName('e-columnheader')[0].childNodes[i - 1];\n          break;\n        }\n      }\n    }\n    this.tempNextElement = nextElement;\n    if (!isNullOrUndefined(nextElement) && !isNullOrUndefined(nextElement['cellIndex'])) {\n      if (this.parent.allowRowDragAndDrop) {\n        this.childrenIndex = nextElement['cellIndex'];\n        this.nextElementIndex = nextElement['cellIndex'] - 1;\n      } else {\n        this.childrenIndex = nextElement['cellIndex'];\n        this.nextElementIndex = nextElement['cellIndex'];\n      }\n      if (this.nextElementIndex !== -1 && !this.parent.ganttColumns[this.nextElementIndex]['allowEditing'] && this.parent.ganttColumns[this.nextElementIndex]['field'] !== this.parent.taskFields.id) {\n        this.isEditableElement = true;\n      } else {\n        this.isEditableElement = false;\n      }\n    }\n    if (nextElement === 'noNextRow') {\n      this.manageFocus($target, 'remove', true);\n      return;\n    }\n    if (typeof nextElement !== 'string') {\n      if ($target.classList.contains('e-rowcell') || $target.closest('.e-chart-row-cell') || $target.classList.contains('e-headercell') || $target.closest('.e-segmented-taskbar') || $target.classList.contains('e-timeline-header-container')) {\n        e.preventDefault();\n      }\n      if (isTab && $target.classList.contains('e-rowdragdrop')) {\n        this.parent.treeGrid.grid.notify('key-pressed', e);\n        return;\n      }\n      if ($target.classList.contains('e-rowcell') && nextElement && nextElement.classList.contains('e-rowcell') || $target.classList.contains('e-headercell')) {\n        // eslint-disable-line                                                                                                                                                                                                                                    \n        if (isTab) {\n          if (this.parent.editSettings.allowNextRowEdit) {\n            var rowData = this.parent.currentViewData[this.focusedRowIndex];\n            var columnName = this.parent.ganttColumns[nextElement.getAttribute('data-colindex')].field;\n            if (rowData.hasChildRecords) {\n              if (columnName === this.parent.taskFields.endDate || columnName === this.parent.taskFields.duration || columnName === this.parent.taskFields.dependency || columnName === this.parent.taskFields.progress || columnName === this.parent.taskFields.work || columnName === this.parent.taskFields.type || columnName === 'taskType') {\n                this.parent.treeGrid.grid.endEdit();\n                this.parent.treeGrid.grid.notify('key-pressed', e);\n              } else if (columnName === this.parent.taskFields.name || columnName === this.parent.taskFields.startDate) {\n                this.parent.treeGrid.grid.notify('key-pressed', e);\n              } else {\n                this.parent.treeGrid.grid.notify('key-pressed', e);\n                if (isInEditedState) {\n                  this.parent.treeGrid.editCell(this.focusedRowIndex, columnName);\n                }\n              }\n            } else {\n              this.parent.treeGrid.grid.notify('key-pressed', e);\n            }\n          } else {\n            if (!nextElement || nextElement && !nextElement.classList.contains('e-headercell') && !nextElement.classList.contains('e-timeline-header-container')) {\n              if ($target.classList.contains('e-headercell')) {\n                this.manageFocus($target, 'remove', false);\n              }\n              /* eslint-disable-next-line */\n              var row = this.parent.currentViewData[$target.parentElement.rowIndex];\n              var next = nextElement;\n              if (row.hasChildRecords && (this.parent.ganttColumns[next.getAttribute('data-colindex')].field === this.parent.taskFields.progress || !this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing) && this.parent.ganttColumns[next.getAttribute('data-colindex')].field !== this.parent.taskFields.id && $target.classList.contains('e-editedbatchcell')) {\n                var currentColumn = void 0;\n                next = this.updateElement(next, currentColumn, isTab, isInEditedState, row);\n                while (!this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing) {\n                  next = this.getNextElement(next, isTab, isInEditedState);\n                }\n                next = this.updateElement(next, currentColumn, isTab, isInEditedState, row);\n              } else if (!nextElement || $target.classList.contains('e-editedbatchcell')) {\n                this.parent.treeGrid.grid.notify('key-pressed', e);\n              }\n            }\n          }\n        } else {\n          if (nextElement && !nextElement.classList.contains('e-headercell') && nextElement.classList.contains('e-rowcell') && !nextElement.classList.contains('e-toolbar-item')) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var row = this.parent.currentViewData[$target.parentElement.rowIndex];\n            var next = nextElement;\n            if (row.hasChildRecords && (this.parent.ganttColumns[next.getAttribute('data-colindex')].field === this.parent.taskFields.progress || !this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing) && this.parent.ganttColumns[next.getAttribute('data-colindex')].field !== this.parent.taskFields.id && $target.classList.contains('e-editedbatchcell')) {\n              var currentColumn = void 0;\n              next = this.updateElement(next, currentColumn, isTab, isInEditedState, row);\n              while (!this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing) {\n                next = this.getNextElement(next, isTab, isInEditedState);\n              }\n              next = this.updateElement(next, currentColumn, isTab, isInEditedState, row);\n            } else if (parseInt(next.parentElement.getAttribute('data-rowindex'), 10) !== 0 && parseInt(next.getAttribute('data-colindex'), 10) === 0 && this.parent.ganttColumns[next.getAttribute('data-colindex')].field === this.parent.taskFields.id && $target.classList.contains('e-editedbatchcell')) {\n              /* eslint-disable-next-line */\n              var rowIndex = $target.parentElement.rowIndex;\n              var rowElement = this.getNextRowElement(rowIndex, isTab, true);\n              next = this.getChildElement(rowElement, isTab);\n              var rowData = this.parent.flatData[parseInt(rowElement.getAttribute('data-rowindex'), 10)];\n              if (rowData.hasChildRecords && (!this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing || this.parent.ganttColumns[next.getAttribute('data-colindex')].field === this.parent.taskFields.progress)) {\n                var currentColumn = void 0;\n                next = this.updateElement(next, currentColumn, isTab, isInEditedState, rowData);\n                while (!this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing) {\n                  next = this.getNextElement(next, isTab, isInEditedState);\n                }\n                next = this.updateElement(next, currentColumn, isTab, isInEditedState, rowData);\n              } else {\n                this.parent.treeGrid.grid.notify('key-pressed', e);\n              }\n            } else {\n              this.parent.treeGrid.grid.notify('key-pressed', e);\n            }\n          }\n        }\n      }\n      if (this.parent.element.querySelectorAll('.e-focused').length > 0) {\n        this.manageFocus(this.parent.element.querySelectorAll('.e-focused')[0], 'remove', false);\n      }\n      if (!(this.parent.editModule && this.parent.editModule.cellEditModule && !isNullOrUndefined(this.parent.editModule.cellEditModule.editedColumn))) {\n        if (nextElement) {\n          if ($target.classList.contains('e-rowcell')) {\n            this.manageFocus($target, 'remove', false);\n          } else {\n            this.manageFocus($target, 'remove', true);\n          }\n          if (nextElement.classList.contains('e-rowcell') && $target.nextElementSibling && !$target.classList.contains('e-timeline-header-container') || $target.classList.contains('e-right-label-container')) {\n            if (!$target.classList.contains('e-rowcell')) {\n              this.parent.treeGrid.grid.notify('key-pressed', e);\n              var fmodule = getValue('focusModule', this.parent.treeGrid.grid);\n              fmodule.currentInfo.element = nextElement;\n              fmodule.currentInfo.elementToFocus = nextElement;\n              /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n              fmodule.content.matrix.current = [nextElement.parentElement.rowIndex, nextElement.cellIndex];\n            }\n            this.manageFocus(nextElement, 'add', false);\n          } else {\n            if (nextElement && (nextElement.classList.contains('e-toolbar-item') || nextElement.classList.contains('e-headercell') || nextElement.classList.contains('e-rowcell'))) {\n              this.manageFocus($target, 'remove', false);\n              if (!nextElement.classList.contains('e-toolbar-item')) {\n                this.manageFocus(nextElement, 'add', false);\n              }\n              if ($target.classList.contains('e-treegrid')) {\n                e.preventDefault();\n              }\n            } else {\n              this.manageFocus(nextElement, 'add', true);\n            }\n          }\n          this.parent.focusModule.setActiveElement(nextElement);\n        }\n      }\n    }\n  };\n  /**\n   * Get next/previous sibling element.\n   *\n   * @param {Element} $target .\n   * @param {boolean} isTab .\n   * @param {boolean} isInEditedState .\n   * @returns {Element | string} .\n   */\n  GanttChart.prototype.getNextElement = function ($target, isTab, isInEditedState) {\n    if ($target.classList.contains('e-timeline-header-container') && isTab) {\n      var rowElement = this.getNextRowElement(-1, isTab, true);\n      return this.getChildElement(rowElement, isTab);\n    }\n    var nextElement = isTab ? $target.nextElementSibling : $target.previousElementSibling;\n    if ($target.parentElement.classList.contains('e-taskbar-main-container')) {\n      if (this.parent.labelSettings.rightLabel && isTab) {\n        return $target.parentElement.nextElementSibling;\n      } else if (!isTab && this.parent.labelSettings.leftLabel) {\n        return $target.parentElement.previousElementSibling;\n      }\n    }\n    while (nextElement && nextElement.parentElement.classList.contains('e-row')) {\n      if (!nextElement.matches('.e-hide') && !nextElement.matches('.e-rowdragdrop')) {\n        return nextElement;\n      }\n      nextElement = isTab ? nextElement.nextElementSibling : nextElement.previousElementSibling;\n    }\n    if (!isNullOrUndefined(nextElement) && (nextElement.classList.contains('e-taskbar-main-container') || nextElement.classList.contains('e-right-connectorpoint-outer-div'))) {\n      var record = this.parent.currentViewData[this.focusedRowIndex];\n      if (!isNullOrUndefined(record.ganttProperties.segments) && record.ganttProperties.segments.length > 0) {\n        nextElement = nextElement.classList.contains('e-right-connectorpoint-outer-div') ? nextElement.parentElement.nextElementSibling : nextElement.getElementsByClassName('e-gantt-child-taskbar-inner-div')[0];\n      }\n    }\n    if (this.validateNextElement(nextElement)) {\n      return nextElement;\n    } else {\n      var rowIndex = -1;\n      var rowElement = null;\n      var childElement = void 0;\n      if ($target.classList.contains('e-rowcell') && isInEditedState && this.parent.editSettings.allowNextRowEdit) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        rowIndex = $target.parentElement.rowIndex;\n        rowElement = this.getNextRowElement(rowIndex, isTab, true);\n        childElement = this.getChildElement(rowElement, isTab);\n        return childElement;\n      } else if ($target.classList.contains('e-rowcell')) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        rowIndex = $target.parentElement.rowIndex;\n        if (isTab) {\n          rowElement = this.parent.getRowByIndex(rowIndex);\n          if (this.parent.treeGrid.element.getElementsByClassName('e-editedbatchcell').length > 0) {\n            rowElement = this.getNextRowElement(rowIndex, isTab, true);\n            var childElement_1 = this.getChildElement(rowElement, isTab);\n            return childElement_1;\n          } else {\n            if (this.validateNextElement(rowElement, 'e-left-label-container')) {\n              return rowElement.getElementsByClassName('e-left-label-container')[0];\n            } else if (this.validateNextElement(rowElement, 'e-taskbar-main-container')) {\n              return rowElement.getElementsByClassName('e-taskbar-main-container')[0];\n            } else if (this.validateNextElement(rowElement, 'e-right-label-container')) {\n              return rowElement.getElementsByClassName('e-right-label-container')[0];\n            }\n          }\n        } else {\n          rowElement = this.getNextRowElement(rowIndex, isTab, false);\n          if (this.validateNextElement(rowElement, 'e-right-label-container')) {\n            return rowElement.getElementsByClassName('e-right-label-container')[0];\n          } else if (this.validateNextElement(rowElement, 'e-taskbar-main-container')) {\n            return rowElement.getElementsByClassName('e-taskbar-main-container')[0];\n          } else if (this.validateNextElement(rowElement, 'e-left-label-container')) {\n            return rowElement.getElementsByClassName('e-left-label-container')[0];\n          }\n        }\n      } else if ($target.parentElement.classList.contains('e-chart-row-cell') || $target.parentElement.parentElement.classList.contains('e-chart-row-cell')) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        rowIndex = closest($target, '.e-chart-row').rowIndex;\n        if (isTab) {\n          if (!isTab && this.parent.virtualScrollModule && this.parent.enableVirtualization) {\n            /* eslint-disable-next-line */\n            var rowRecord = this.parent.currentViewData[rowIndex];\n            rowIndex = this.parent.flatData.indexOf(rowRecord);\n          }\n          rowElement = this.getNextRowElement(rowIndex, isTab, true);\n        } else {\n          rowElement = this.parent.treeGrid.getRows()[rowIndex];\n        }\n        var childElement_2 = this.getChildElement(rowElement, isTab);\n        return childElement_2;\n      }\n      nextElement = $target;\n    }\n    return null;\n  };\n  /**\n   * Get next/previous row element.\n   *\n   * @param {number} rowIndex .\n   * @param {boolean} isTab .\n   * @param {boolean} isChartRow .\n   * @returns {Element} .\n   */\n  GanttChart.prototype.getNextRowElement = function (rowIndex, isTab, isChartRow) {\n    var expandedRecords = this.parent.getExpandedRecords(this.parent.currentViewData);\n    var currentItem = this.parent.currentViewData[rowIndex];\n    var expandedRecordIndex = expandedRecords.indexOf(currentItem);\n    var nextRecord = isTab ? expandedRecords[expandedRecordIndex + 1] : expandedRecords[expandedRecordIndex - 1];\n    var nextRowIndex = this.parent.currentViewData.indexOf(nextRecord);\n    if (nextRecord) {\n      return isChartRow ? this.parent.treeGrid.getRows()[nextRowIndex] : this.parent.getRowByIndex(nextRowIndex);\n    } else {\n      return null;\n    }\n  };\n  /**\n   * Validate next/previous sibling element haschilds.\n   *\n   * @param {Element} $target .\n   * @param {string} className .\n   * @returns {boolean} .\n   */\n  GanttChart.prototype.validateNextElement = function ($target, className) {\n    if ($target && $target.classList.contains('e-rowcell')) {\n      return true;\n    }\n    if ($target && className) {\n      var elementByClass = $target.getElementsByClassName(className)[0];\n      return elementByClass && elementByClass.hasChildNodes() ? true : false;\n    } else if ($target) {\n      return !isNullOrUndefined($target) && $target.hasChildNodes() ? true : false;\n    }\n    return false;\n  };\n  /**\n   * Getting child element based on row element.\n   *\n   * @param {Element} rowElement .\n   * @param {boolean} isTab .\n   * @returns {Element | string} .\n   */\n  GanttChart.prototype.getChildElement = function (rowElement, isTab) {\n    var childElement;\n    if (rowElement) {\n      childElement = isTab ? rowElement.children[0] : rowElement.children[rowElement.children.length - 1];\n      while (childElement) {\n        if (!childElement.matches('.e-hide') && !childElement.matches('.e-rowdragdrop')) {\n          return childElement;\n        }\n        childElement = isTab ? childElement.nextElementSibling : childElement.previousElementSibling;\n      }\n    } else {\n      return 'noNextRow';\n    }\n    return childElement;\n  };\n  /**\n   * Add/Remove active element.\n   *\n   * @private\n   * @param {HTMLElement} element .\n   * @param {string} focus .\n   * @param {boolean} isChartElement .\n   * @param {string} keyAction .\n   * @returns {void} .\n   */\n  GanttChart.prototype.manageFocus = function (element, focus, isChartElement, keyAction) {\n    if (isChartElement) {\n      var childElement = null;\n      if (element.classList.contains('e-left-label-container') || element.classList.contains('e-right-label-container')) {\n        childElement = element.getElementsByTagName('span')[0];\n      } else if (element.classList.contains('e-taskbar-main-container') || element.classList.contains('e-gantt-child-taskbar-inner-div')) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var rowIndex = closest(element, '.e-chart-row').rowIndex;\n        var data = this.parent.currentViewData[rowIndex];\n        var className = data.hasChildRecords ? data.ganttProperties.isAutoSchedule ? 'e-gantt-parent-taskbar' : 'e-manualparent-main-container' : data.ganttProperties.isMilestone ? 'e-gantt-milestone' : !isNullOrUndefined(data.ganttProperties.segments) && data.ganttProperties.segments.length > 0 ? 'e-segmented-taskbar' : 'e-gantt-child-taskbar';\n        childElement = element.getElementsByClassName(className)[0];\n        if (isNullOrUndefined(childElement)) {\n          childElement = element;\n        }\n      }\n      if (element.classList.contains('e-right-label-temp-container') || element.classList.contains('e-left-label-temp-container') || element.classList.contains('e-indicator-span') || element.classList.contains('e-timeline-header-container')) {\n        if (focus === 'add') {\n          element.setAttribute('tabIndex', '0');\n          addClass([element], 'e-active-container');\n          element.focus();\n        } else {\n          if (keyAction !== 'downArrow' && keyAction !== 'upArrow') {\n            removeClass([element], 'e-active-container');\n            element.setAttribute('tabIndex', '-1');\n            element.blur();\n          }\n        }\n      }\n      if (focus === 'add' && !isNullOrUndefined(childElement)) {\n        element.setAttribute('tabIndex', '0');\n        addClass([childElement], 'e-active-container');\n        element.focus();\n        this.focusedElement = childElement;\n      } else if (!isNullOrUndefined(childElement) && keyAction !== 'downArrow' && keyAction !== 'upArrow') {\n        removeClass([childElement], 'e-active-container');\n        element.setAttribute('tabIndex', '-1');\n        element.blur();\n      }\n    } else {\n      if (focus === 'add') {\n        element.setAttribute('tabIndex', '0');\n        addClass([element], ['e-focused', 'e-focus']);\n        element.focus();\n      } else {\n        element.setAttribute('tabIndex', '-1');\n        removeClass([element], ['e-focused', 'e-focus']);\n        element.blur();\n      }\n    }\n  };\n  /**\n   * To get index by taskbar element.\n   *\n   * @param {Element} target .\n   * @returns {number} .\n   * @private\n   */\n  GanttChart.prototype.getIndexByTaskBar = function (target) {\n    var row;\n    var recordIndex;\n    if (!target.classList.contains(cls.taskBarMainContainer)) {\n      row = closest(target, 'div.' + cls.taskBarMainContainer);\n    } else {\n      row = target;\n    }\n    if (isNullOrUndefined(row)) {\n      row = closest(target, 'tr.' + cls.chartRow);\n      recordIndex = [].slice.call(this.parent.chartRowsModule.ganttChartTableBody.childNodes).indexOf(row);\n    } else {\n      var id = row.getAttribute('rowUniqueId');\n      var record = this.parent.getRecordByID(id);\n      if (this.parent.enableVirtualization && this.parent.enableMultiTaskbar) {\n        recordIndex = this.parent.flatData.indexOf(record);\n      } else {\n        if (this.parent.pdfExportModule && this.parent.pdfExportModule.helper.exportProps && this.parent.pdfExportModule.helper.exportProps.fitToWidthSettings && this.parent.pdfExportModule.helper.exportProps.fitToWidthSettings.isFitToWidth && this.parent.pdfExportModule.isPdfExport) {\n          recordIndex = this.parent.ids.indexOf(record.ganttProperties.taskId.toString());\n        } else {\n          recordIndex = this.parent.currentViewData.indexOf(record);\n        }\n      }\n    }\n    return recordIndex;\n  };\n  GanttChart.prototype.destroy = function () {\n    this.removeEventListener();\n    this.unWireEvents();\n    this.rangeViewContainer = null;\n    this.chartBodyContent = null;\n    this.scrollElement = null;\n    this.chartTimelineContainer = null;\n    this.chartBodyContainer = null;\n    if (!isNullOrUndefined(this.scrollObject)) {\n      this.scrollObject.destroy();\n      this.scrollObject = null;\n    }\n  };\n  return GanttChart;\n}();\nexport { GanttChart };","map":{"version":3,"names":["createElement","formatUnit","EventHandler","Browser","isNullOrUndefined","closest","addClass","removeClass","getValue","setValue","cls","ChartScroll","click","VirtualContentRenderer","GanttChart","parent","isExpandCollapseFromChart","isExpandAll","isCollapseAll","debounceTimeoutNext","debounceTimeout","isGanttElement","previousPinchDistance","currentToolbarIndex","isPinching","chartTimelineContainer","rangeViewContainer","className","rangeContainer","setAttribute","virtualRender","addEventListener","prototype","on","renderChartContainer","renderChartElements","renderInitialContents","renderChartContents","destroy","notify","wireEvents","chartElement","id","element","ganttChart","chartPane","appendChild","renderTimelineContainer","renderBodyContainers","timelineModule","createTimelineSeries","renderOverAllocationContainer","i","flatData","length","data","childRecords","dataOperation","updateOverlappingValues","querySelector","innerHTML","treeGrid","grid","filterSettings","columns","renderRangeContainer","currentViewData","isFromOnPropertyChange","updateProjectDates","cloneProjectStartDate","cloneProjectEndDate","isTimelineRoundOff","chartRowsModule","renderChartRows","predecessorModule","taskFields","dependency","connectorLineIds","updatedConnectorLineCollection","createConnectorLinesCollection","connectorLineModule","renderConnectorLines","ganttChartTableBody","children","viewType","node","parseInt","toString","criticalModule","criticalPathModule","enableCriticalPath","criticalPathCollection","criticalConnectorLine","detailPredecessorCollection","predecessorCollectionTaskIds","showOverAllocation","updateWidthAndHeight","isLoad","isZoomToFit","processZoomToFit","records","recordLength","count","ganttRecord","rangeCollection","ganttProperties","workTimelineRanges","renderRange","getTopValue","currentRecord","updatedRecords","getExpandedRecords","recordIndex","indexOf","parentItem","nestedParent","getRecordByID","taskId","expanded","rowHeight","getRangeHeight","hasChildRecords","Math","floor","taskBarHeight","topValue","rowIndex","allowTaskbarOverlap","enableMultiTaskbar","getRowByIndex","offsetTop","sameIDElement","rowUniqueID","remove","parentDiv","styles","level","height","childNodes","style","leftDiv","rangeChildContainer","enableRtl","left","width","rightDiv","ganttChartModule","chartBodyContent","timelineHeaderContainer","borderLeftWidth","borderRightWidth","chartBodyContainer","scrollElement","chartScrollElement","scrollContent","virtualScrollModule","enableVirtualization","enableTimelineVirtualization","renderWrapper","scrollObject","toolbarHeight","toolbarModule","offsetHeight","setHeight","ganttHeight","emptydivHeight","emptyHeight","contentHeight","contentElement","getElementsByClassName","scrollHeight","totalTimelineWidth","offsetWidth","isZoomedToFit","clientWidth","abs","setVirtualHeight","updateGridLineContainerHeight","updateLastRowBottomWidth","wrapper","wrapper1","treegridVirtualHeight","transform","virtualTable","document","translateXValue","match","split","chartTransform","translateYValue","expandedRecords","lastExpandedRow","lastExpandedRowIndex","lastRow","table","querySelectorAll","clientHeight","removeEventListener","isDestroyed","off","ganttChartMouseDown","e","cancel","type","TouchEvent","touches","initPinchDistance","calculatePinchDistance","allowTaskbarDragAndDrop","editModule","editSettings","allowTaskbarEditing","editAction","taskbarEditModule","args","getRecordByTaskBar","target","chartRow","trigger","which","tabIndex","isTaskbarEdited","button","allowEditing","endEdit","touch1","touch2","dx","clientX","dy","clientY","sqrt","ganttChartMouseClick","autoFocusTasks","scrollToTarget","ganttChartMouseUp","resizeCheck","Check","clonetbody","parentElement","cloneTable","falseline","removeFalseLine","isOnTaskbarElement","classList","contains","taskBarMainContainer","chartExpandCollapseRequest","row","dateObject","startDate","dateObjLeft","getTaskLeft","updateScrollLeft","scrollLeft","scrollWidth","setScrollLeft","mouseUp","allowRowDragAndDrop","ganttDragElemet","documentMouseUp","showActiveElement","showIndicator","loadingIndicator","indicatorType","hideMaskRow","hideSpinner","focusedElement","onTaskbarClick","taskbarElement","getRecordByTarget","ganttChartLeave","ganttChartMove","currentPinchDistance","processZooming","xValue","pageX","getOffsetRect","connectorLineEditModule","updateConnectorLineEditElement","contextClick","allowFiltering","filterModule","closeFilterOnContextClick","srcElement","mouseMoveHandler","onMouseMove","originalEvent","rowData","rowElement","columnElement","cellIndex","column","index","indicators","name","innerText","trim","indicator","obj","predecessor","tooltipModule","getPredecessorTooltipData","eventMarkers","getMarkerTooltipData","date","Date","dataset","content","doubleClickHandler","recordDoubleClick","ganttData","getAttribute","getChartRows","getElementById","record","gridRow","getRows","collapseGanttRow","expandGanttRow","reRenderConnectorLines","dependencyViewContainer","_this","arg","collapsedGanttRow","loadChildOnDemand","hasChildMapping","filter","item","expandCollapseChartRows","idField_1","gridRec","getCurrentViewRecords","collapseRow","renderMultiTaskbar","updateContentHeight","expandedGanttRow","idField_2","expandRow","isExpandCollapseLevelMethod","refreshRecords","action","isChild","displayType","targetElement","t","chartRows","rows","push","display","expandCollapseAll","expandAll","collapseAll","treeGridContentHeight","expandAtLevel","collapseAtLevel","isIE11Pointer","isPointer","mouseDown","touchStartEvent","touchEndEvent","mouseMove","touchMoveEvent","add","onWheelZoom","isAdaptive","body","unWireEvents","ctrlKey","preventDefault","zoomIn1_1","deltaY","isTouchpad_1","clearTimeout","setTimeout","verticalScrollDelta","isValidScrollDelta","bind","getIndexByTaskBar","updateElement","next","currentColumn","isTab","isInEditedState","ganttColumns","field","progress","getNextElement","saveCell","editCell","onTabAction","enableHeaderFocus","toolbarItems","cellEditModule","isCellEdit","$target","focusModule","setActiveElement","focusedRowIndex","nextElement","colIndex","toolbarItems_1","toolbar","itemIndex","isUpdated","tempNextElement","childrenIndex","nextElementIndex","isEditableElement","manageFocus","allowNextRowEdit","columnName","endDate","duration","work","getNextRowElement","getChildElement","editedColumn","nextElementSibling","fmodule","currentInfo","elementToFocus","matrix","current","previousElementSibling","labelSettings","rightLabel","leftLabel","matches","segments","validateNextElement","childElement","childElement_1","rowRecord","childElement_2","isChartRow","currentItem","expandedRecordIndex","nextRecord","nextRowIndex","elementByClass","hasChildNodes","focus","isChartElement","keyAction","getElementsByTagName","isAutoSchedule","isMilestone","blur","slice","call","pdfExportModule","helper","exportProps","fitToWidthSettings","isFitToWidth","isPdfExport","ids"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-gantt/src/gantt/base/gantt-chart.js"],"sourcesContent":["import { createElement, formatUnit, EventHandler, Browser } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, closest, addClass, removeClass, getValue, setValue } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constants';\nimport { ChartScroll } from '../actions/chart-scroll';\nimport { click } from '@syncfusion/ej2-grids';\nimport { VirtualContentRenderer } from '../renderer/virtual-content-render';\n/**\n * module to render gantt chart - project view\n */\nvar GanttChart = /** @class */ (function () {\n    function GanttChart(parent) {\n        this.isExpandCollapseFromChart = false;\n        this.isExpandAll = false;\n        this.isCollapseAll = false;\n        this.debounceTimeoutNext = 0;\n        this.debounceTimeout = 0;\n        this.isGanttElement = false;\n        this.previousPinchDistance = 0;\n        this.currentToolbarIndex = -1;\n        this.isPinching = false;\n        this.parent = parent;\n        this.chartTimelineContainer = null;\n        this.rangeViewContainer =\n            createElement('div', { className: cls.rangeContainer });\n        this.rangeViewContainer.setAttribute('role', 'button');\n        this.rangeViewContainer.setAttribute('aria-label', 'RangeContainer');\n        this.virtualRender = new VirtualContentRenderer(this.parent);\n        this.addEventListener();\n    }\n    GanttChart.prototype.addEventListener = function () {\n        this.parent.on('renderPanels', this.renderChartContainer, this);\n        this.parent.on('recordsUpdated', this.renderChartElements, this);\n        this.parent.on('dataReady', this.renderInitialContents, this);\n        this.parent.on('tree-grid-created', this.renderChartContents, this);\n        this.parent.on('destroy', this.destroy, this);\n    };\n    GanttChart.prototype.renderChartContents = function () {\n        this.parent.notify('refreshDayMarkers', {});\n        this.wireEvents();\n    };\n    /**\n     * Method to render top level containers in Gantt chart\n     *\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.renderChartContainer = function () {\n        this.chartElement = createElement('div', { id: this.parent.element.id + 'GanttChart', className: cls.ganttChart });\n        this.parent.chartPane.appendChild(this.chartElement);\n        this.renderTimelineContainer();\n        this.renderBodyContainers();\n        // render top level div header and content\n        // Get timeline header from timeline class file and append to header div\n        // render content div\n        // Render scroll able div\n        // Render container for all element like, table, weekend and holidays\n        // Get rows element from rows renderer class\n        // Get label related info label renderer class\n        // Get baseline from baseline renderer class\n        // Get weekend elements from weekend-holidays renderer class\n    };\n    /**\n     * method to render timeline, holidays, weekends at load time\n     *\n     * @returns {void} .\n     */\n    GanttChart.prototype.renderInitialContents = function () {\n        this.parent.timelineModule.createTimelineSeries();\n    };\n    /**\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.renderOverAllocationContainer = function () {\n        for (var i = 0; i < this.parent.flatData.length; i++) {\n            var data = this.parent.flatData[i];\n            if (data.childRecords.length > 0) {\n                this.parent.dataOperation.updateOverlappingValues(data);\n            }\n        }\n        var rangeContainer = this.parent.element.querySelector('.' + cls.rangeContainer);\n        if (rangeContainer) {\n            rangeContainer.innerHTML = '';\n        }\n        if (this.parent.treeGrid.grid.filterSettings.columns.length === 0) {\n            this.renderRangeContainer(this.parent.currentViewData);\n        }\n    };\n    GanttChart.prototype.renderChartElements = function () {\n        if (this.parent.isFromOnPropertyChange) {\n            this.rangeViewContainer.innerHTML = '';\n            this.parent.updateProjectDates(this.parent.cloneProjectStartDate, this.parent.cloneProjectEndDate, this.parent.isTimelineRoundOff);\n            this.parent.isFromOnPropertyChange = false;\n        }\n        else {\n            this.parent.chartRowsModule.renderChartRows();\n            if (this.parent.predecessorModule && this.parent.taskFields.dependency) {\n                this.parent.connectorLineIds = [];\n                this.parent.updatedConnectorLineCollection = [];\n                this.parent.predecessorModule.createConnectorLinesCollection();\n            }\n            this.parent.connectorLineModule.renderConnectorLines(this.parent.updatedConnectorLineCollection);\n            for (var i = 0; i < this.parent.chartRowsModule.ganttChartTableBody.children.length; i++) {\n                if (this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[4]) {\n                    this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[1].setAttribute('tabindex', '-1');\n                    this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[2].setAttribute('tabindex', '-1');\n                    this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[4].setAttribute('tabindex', '-1');\n                }\n                else {\n                    if (this.parent.viewType === 'ProjectView') {\n                        var node = this.parent.chartRowsModule.ganttChartTableBody.\n                            children[parseInt(i.toString(), 10)].children[0].children[1].children[1];\n                        if (!isNullOrUndefined(node)) {\n                            this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[1].setAttribute('tabindex', '-1');\n                        }\n                    }\n                    else if (this.parent.chartRowsModule.ganttChartTableBody.children[parseInt(i.toString(), 10)].children[0].\n                        children[1].children[0]) {\n                        this.parent.chartRowsModule.ganttChartTableBody.children[i].children[0].children[1].children[0].setAttribute('tabindex', '-1');\n                    }\n                }\n            }\n            var criticalModule = this.parent.criticalPathModule;\n            if (this.parent.enableCriticalPath && criticalModule && criticalModule.criticalPathCollection) {\n                this.parent.criticalPathModule.criticalConnectorLine(criticalModule.criticalPathCollection, criticalModule.detailPredecessorCollection, this.parent.enableCriticalPath, criticalModule.predecessorCollectionTaskIds);\n            }\n            if (this.parent.showOverAllocation) {\n                this.renderOverAllocationContainer();\n            }\n        }\n        this.updateWidthAndHeight();\n        if (this.parent.isLoad) {\n            this.parent.notify('selectRowByIndex', {});\n        }\n        if (this.parent.timelineModule.isZoomToFit) {\n            this.parent.timelineModule.processZoomToFit();\n        }\n    };\n    /**\n     * @param {IGanttData[]} records .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.renderRangeContainer = function (records) {\n        var recordLength = records.length;\n        var count;\n        var ganttRecord;\n        var rangeCollection;\n        if (this.parent.treeGrid.grid.filterSettings.columns.length === 0) {\n            for (count = 0; count < recordLength; count++) {\n                ganttRecord = records[count];\n                rangeCollection = ganttRecord.ganttProperties.workTimelineRanges;\n                if (rangeCollection) {\n                    this.renderRange(rangeCollection, ganttRecord);\n                }\n            }\n        }\n    };\n    GanttChart.prototype.getTopValue = function (currentRecord) {\n        var updatedRecords = this.parent.getExpandedRecords(this.parent.currentViewData);\n        var recordIndex = updatedRecords.indexOf(currentRecord);\n        if (currentRecord.parentItem && recordIndex === -1) {\n            var nestedParent = this.parent.getRecordByID(currentRecord.parentItem.taskId);\n            recordIndex = updatedRecords.indexOf(nestedParent);\n        }\n        if (!currentRecord.expanded) {\n            return (recordIndex * this.parent.rowHeight);\n        }\n        return ((recordIndex + 1) * this.parent.rowHeight);\n    };\n    /*get height for range bar*/\n    GanttChart.prototype.getRangeHeight = function (data) {\n        if (!data.expanded && data.hasChildRecords) {\n            return (this.parent.rowHeight - Math.floor((this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight)));\n        }\n        return (data.childRecords.length * this.parent.rowHeight) -\n            Math.floor((this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight));\n    };\n    GanttChart.prototype.renderRange = function (rangeCollection, currentRecord) {\n        var topValue = 0;\n        var rowIndex = this.parent.currentViewData.indexOf(currentRecord);\n        if (!this.parent.allowTaskbarOverlap && this.parent.enableMultiTaskbar) {\n            topValue = !currentRecord.expanded ? this.parent.getRowByIndex(rowIndex).offsetTop :\n                this.parent.getRowByIndex(rowIndex).offsetTop + this.parent.rowHeight;\n        }\n        else {\n            topValue = this.getTopValue(currentRecord);\n        }\n        var sameIDElement = this.rangeViewContainer.querySelector('.' + 'rangeContainer' + currentRecord.ganttProperties.rowUniqueID);\n        if (sameIDElement) {\n            sameIDElement.remove();\n        }\n        var parentDiv = createElement('div', {\n            className: 'rangeContainer' + currentRecord.ganttProperties.rowUniqueID, styles: \"top:\" + topValue + \"px; position: absolute;\"\n        });\n        if (currentRecord.level === 0 && !currentRecord.expanded && isNullOrUndefined(currentRecord.parentItem)\n            && !this.parent.enableMultiTaskbar) {\n            return;\n        }\n        if (currentRecord.level > 0 && currentRecord.expanded && !this.parent.getRecordByID(currentRecord.parentItem.taskId).expanded) {\n            return;\n        }\n        for (var i = 0; i < rangeCollection.length; i++) {\n            var height = void 0;\n            var node = this.parent.chartRowsModule.ganttChartTableBody.childNodes;\n            if (!this.parent.allowTaskbarOverlap && !currentRecord.expanded && this.parent.enableMultiTaskbar && !this.isCollapseAll) {\n                height = parseInt(node[rowIndex].style.height, 10) -\n                    (this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight);\n            }\n            else {\n                height = this.getRangeHeight(currentRecord);\n            }\n            var leftDiv = createElement('div', {\n                className: cls.rangeChildContainer + ' ' + 'e-leftarc', styles: (this.parent.enableRtl ? 'right:' : 'left:') +\n                    ((this.parent.enableRtl ? rangeCollection[i].left + rangeCollection[i].width - 5 : rangeCollection[i].left) + \"px;\\n                top: \" + Math.floor((this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight) / 2) + \"px;\\n                height: \" + (height + 1) + \"px; border-right: 0px;\\n                z-index: \" + ((this.parent.viewType === 'ProjectView') ? currentRecord.childRecords.length > 1 ? currentRecord.childRecords.length + 1 : currentRecord.childRecords.length : 6))\n            });\n            var rightDiv = createElement('div', {\n                className: cls.rangeChildContainer + ' ' + 'e-rightarc',\n                styles: (this.parent.enableRtl ? 'right:' : 'left:') + ((this.parent.enableRtl ? rangeCollection[i].left :\n                    rangeCollection[i].left + rangeCollection[i].width - 5) + \"px;\\n                top: \" + Math.floor((this.parent.rowHeight - this.parent.chartRowsModule.taskBarHeight) / 2) + \"px; height: \" + (height + 1) + \"px;\\n                border-left: 0px;\\n                z-index: \" + ((this.parent.viewType === 'ProjectView') ? currentRecord.childRecords.length > 1 ? currentRecord.childRecords.length + 1 : currentRecord.childRecords.length : 6))\n            });\n            parentDiv.appendChild(leftDiv);\n            parentDiv.appendChild(rightDiv);\n            this.rangeViewContainer.appendChild(parentDiv);\n        }\n        this.parent.ganttChartModule.chartBodyContent.appendChild(this.rangeViewContainer);\n    };\n    /**\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.renderTimelineContainer = function () {\n        this.chartTimelineContainer =\n            createElement('div', { className: cls.timelineHeaderContainer });\n        if (this.parent.enableRtl) {\n            this.chartTimelineContainer.style.borderLeftWidth = '1px';\n            this.chartTimelineContainer.style.borderRightWidth = '0px';\n        }\n        this.chartTimelineContainer.setAttribute('role', 'presentation');\n        this.chartElement.appendChild(this.chartTimelineContainer);\n    };\n    /**\n     * initiate chart container\n     *\n     * @returns {void} .\n     */\n    GanttChart.prototype.renderBodyContainers = function () {\n        this.chartBodyContainer = createElement('div', { className: cls.chartBodyContainer });\n        this.chartElement.appendChild(this.chartBodyContainer);\n        this.scrollElement = createElement('div', {\n            className: cls.chartScrollElement + ' ' + cls.scrollContent, styles: 'position:relative;'\n        });\n        this.chartBodyContainer.appendChild(this.scrollElement);\n        this.chartBodyContent = createElement('div', { className: cls.chartBodyContent, styles: 'position:relative; overflow:hidden ' });\n        if (this.parent.virtualScrollModule && this.parent.enableVirtualization || this.parent.enableTimelineVirtualization) {\n            this.parent.ganttChartModule.virtualRender.renderWrapper();\n        }\n        else {\n            this.scrollElement.appendChild(this.chartBodyContent);\n        }\n        // this.parent.chartRowsModule.createChartTable();\n        this.scrollObject = new ChartScroll(this.parent);\n        //this.scrollObject.setWidth(this.chartProperties.width);\n        var toolbarHeight = 0;\n        if (!isNullOrUndefined(this.parent.toolbarModule) && !isNullOrUndefined(this.parent.toolbarModule.element)) {\n            toolbarHeight = this.parent.toolbarModule.element.offsetHeight;\n        }\n        this.scrollObject.\n            setHeight(this.parent.ganttHeight - this.chartTimelineContainer.offsetHeight - toolbarHeight);\n    };\n    /**\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.updateWidthAndHeight = function () {\n        //empty row height\n        var emptydivHeight = 36;\n        var emptyHeight = this.parent.contentHeight === 0 ? this.parent.flatData.length > 1 ? emptydivHeight : 0 :\n            this.parent.contentHeight;\n        var contentElement = this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0];\n        if (emptyHeight >= contentElement['offsetHeight'] || this.parent.height === 'auto' || (contentElement['offsetHeight'] - emptyHeight) < emptydivHeight) {\n            this.chartBodyContent.style.height = formatUnit(emptyHeight);\n        }\n        else {\n            var scrollHeight = this.parent.element.getElementsByClassName('e-chart-rows-container')[0]['offsetHeight'];\n            if (contentElement['offsetHeight'] >= scrollHeight) {\n                this.chartBodyContent.style.height = contentElement['offsetHeight'] - 17 + 'px';\n            }\n            else {\n                this.chartBodyContent.style.height = contentElement['offsetHeight'] + 'px';\n            }\n        } //let element: HTMLElement = this.chartTimelineContainer.querySelector('.' + cls.timelineHeaderTableContainer);\n        // Handled zoomtofit horizontal scrollbar hide while performing different zooming levels in browser at virtualtimeline mode-Task(919516)\n        if (this.parent.timelineModule.isZoomToFit && this.parent.enableTimelineVirtualization) {\n            this.chartBodyContent.style.width = (this.parent.enableTimelineVirtualization\n                && (this.parent.timelineModule.totalTimelineWidth > this.parent.element.offsetWidth * 3)) ?\n                formatUnit(this.parent.element.offsetWidth * 3)\n                : formatUnit(this.parent.timelineModule.totalTimelineWidth - this.parent.timelineModule['clientWidthDifference']);\n        }\n        else {\n            this.chartBodyContent.style.width = (this.parent.enableTimelineVirtualization\n                && (this.parent.timelineModule.totalTimelineWidth > this.parent.element.offsetWidth * 3)) ?\n                formatUnit(this.parent.element.offsetWidth * 3)\n                : formatUnit(this.parent.timelineModule.totalTimelineWidth);\n        }\n        // To handle the width of chartbody element after zoomtofit action followed by vertical scroll actions\n        if (this.parent.timelineModule.isZoomedToFit && this.parent.enableVirtualization) {\n            var clientWidth = Math.abs(this.parent.timelineModule.totalTimelineWidth -\n                this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0].clientWidth);\n            this.parent.ganttChartModule.chartBodyContent.style.width =\n                formatUnit(this.parent.timelineModule.totalTimelineWidth - clientWidth);\n        }\n        this.setVirtualHeight();\n        this.parent.notify('updateHeight', {});\n        this.parent.updateGridLineContainerHeight();\n        this.updateLastRowBottomWidth();\n    };\n    GanttChart.prototype.setVirtualHeight = function () {\n        if (this.parent.virtualScrollModule && this.parent.enableVirtualization) {\n            var wrapper = getValue('virtualTrack', this.parent.ganttChartModule.virtualRender);\n            wrapper.style.height = this.parent.treeGrid.element.getElementsByClassName('e-virtualtrack')[0].style.height;\n            var wrapper1 = getValue('wrapper', this.parent.ganttChartModule.virtualRender);\n            var treegridVirtualHeight = this.parent.treeGrid.element.getElementsByClassName('e-virtualtable')[0].style.transform;\n            var virtualTable = document.getElementsByClassName('e-virtualtable')[1].style.transform;\n            if (this.parent.enableTimelineVirtualization) {\n                var translateXValue = void 0;\n                if (virtualTable !== '') {\n                    translateXValue = virtualTable.match(/translate.*\\((.+)\\)/)[1].split(', ')[0];\n                }\n                else {\n                    var chartTransform = this.parent.ganttChartModule.scrollElement.getElementsByClassName('e-virtualtable')[0].style.transform;\n                    translateXValue = chartTransform.match(/translate.*\\((.+)\\)/)[1].split(', ')[0];\n                }\n                var translateYValue = treegridVirtualHeight.match(/translate.*\\((.+)\\)/)[1].split(', ')[1];\n                wrapper1.style.transform = \"translate(\" + translateXValue + \", \" + translateYValue + \")\";\n            }\n            else {\n                wrapper1.style.transform = treegridVirtualHeight;\n            }\n        }\n    };\n    /**\n     * Method to update bottom border for chart rows\n     *\n     * @returns {void} .\n     */\n    GanttChart.prototype.updateLastRowBottomWidth = function () {\n        if (this.parent.currentViewData.length > 0 && this.parent.height !== 'auto') {\n            var expandedRecords = this.parent.virtualScrollModule && this.parent.enableVirtualization ?\n                this.parent.currentViewData : this.parent.getExpandedRecords(this.parent.currentViewData);\n            var lastExpandedRow = expandedRecords[expandedRecords.length - 1];\n            var lastExpandedRowIndex = this.parent.currentViewData.indexOf(lastExpandedRow);\n            var lastRow = this.parent.getRowByIndex(lastExpandedRowIndex);\n            var table = this.parent.chartRowsModule.ganttChartTableBody;\n            if (table.querySelectorAll('.e-chart-row-cell.e-chart-row-border.e-lastrow')) {\n                removeClass(table.querySelectorAll('.e-chart-row-cell.e-chart-row-border.e-lastrow'), 'e-lastrow');\n            }\n            if (this.chartBodyContent.clientHeight < this.chartBodyContainer.clientHeight) {\n                if (lastRow) {\n                    addClass(lastRow.querySelectorAll('td'), 'e-lastrow');\n                    var emptydivHeight = 36;\n                    var emptyHeight = this.parent.contentHeight === 0 ? this.parent.flatData.length > 1 ? emptydivHeight : 0 :\n                        this.parent.contentHeight;\n                    var contentElement = this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0];\n                    if (emptyHeight >= contentElement['offsetHeight'] || (contentElement['offsetHeight'] - emptyHeight) < emptydivHeight) {\n                        this.chartBodyContent.style.height = formatUnit(emptyHeight);\n                    }\n                    else {\n                        var scrollHeight = this.parent.element.getElementsByClassName('e-chart-rows-container')[0]['offsetHeight'];\n                        if (contentElement['offsetHeight'] >= scrollHeight) {\n                            this.chartBodyContent.style.height = contentElement['offsetHeight'] - 17 + 'px';\n                        }\n                        else {\n                            this.chartBodyContent.style.height = contentElement['offsetHeight'] + 'px';\n                        }\n                    }\n                }\n            }\n        }\n    };\n    GanttChart.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('renderPanels', this.renderChartContainer);\n        this.parent.off('recordsUpdated', this.renderChartElements);\n        this.parent.off('dataReady', this.renderInitialContents);\n        this.parent.off('tree-grid-created', this.renderChartContents);\n        this.parent.off('destroy', this.destroy);\n    };\n    /**\n     * Click event handler in chart side\n     *\n     * @param {PointerEvent} e .\n     * @returns {void} .\n     */\n    GanttChart.prototype.ganttChartMouseDown = function (e) {\n        var cancel = false;\n        if (e.type === 'touchstart' && e instanceof TouchEvent && e.touches && e.touches.length === 2) {\n            // Calculate initial distance between two Pinch touch points\n            this.initPinchDistance = this.calculatePinchDistance(e.touches[0], e.touches[1]);\n            this.isPinching = true;\n        }\n        if (this.parent.allowTaskbarDragAndDrop && this.parent.editModule &&\n            this.parent.editSettings.allowTaskbarEditing && !this.isPinching) {\n            var editAction = this.parent.editModule.taskbarEditModule['getTaskBarAction'](e);\n            if (editAction === 'ChildDrag' || editAction === 'ParentDrag' || editAction === 'MilestoneDrag' || editAction === 'ManualParentDrag') {\n                var args = {\n                    cancel: cancel,\n                    data: this.getRecordByTaskBar(e.target),\n                    target: e.target,\n                    chartRow: closest(e.target, 'tr')\n                };\n                this.parent.trigger('rowDragStartHelper', args);\n                cancel = args['cancel'];\n            }\n        }\n        if (!cancel && !this.isPinching) {\n            if (e.which !== 3 && this.parent.editSettings.allowTaskbarEditing) {\n                this.parent.notify('chartMouseDown', e);\n                this.parent.element.tabIndex = 0;\n            }\n            var isTaskbarEdited = false;\n            if (this.parent.editSettings.allowTaskbarEditing && (this.parent.element.querySelector('.e-left-resize-gripper') || this.parent.element.querySelector('.e-left-connectorpoint-outer-div'))) {\n                isTaskbarEdited = true;\n            }\n            if (!isTaskbarEdited || e.button === 2) {\n                if (this.parent.editSettings.allowEditing && this.parent.treeGrid.element.getElementsByClassName('e-editedbatchcell').length > 0) {\n                    this.parent.treeGrid.endEdit();\n                }\n            }\n        }\n    };\n    GanttChart.prototype.calculatePinchDistance = function (touch1, touch2) {\n        var dx = touch2.clientX - touch1.clientX;\n        var dy = touch2.clientY - touch1.clientY;\n        return Math.sqrt(dx * dx + dy * dy);\n    };\n    GanttChart.prototype.ganttChartMouseClick = function (e) {\n        if (this.parent.autoFocusTasks) {\n            this.scrollToTarget(e); /** Scroll to task */\n        }\n        this.parent.notify('chartMouseClick', e);\n    };\n    GanttChart.prototype.ganttChartMouseUp = function (e) {\n        if (e.type === 'touchend') {\n            this.initPinchDistance = null;\n            this.isPinching = false;\n            var resizeCheck = this.parent.ganttChartModule.chartBodyContainer.querySelector('.e-taskbar-resize-div');\n            if (!isNullOrUndefined(resizeCheck)) {\n                resizeCheck.remove();\n            }\n            var Check = this.parent.ganttChartModule.chartBodyContainer.querySelector('.e-clone-taskbar') || this.parent.chartPane.querySelector('.e-clone-taskbar');\n            if (!isNullOrUndefined(Check)) {\n                var clonetbody = Check.parentElement;\n                var cloneTable = clonetbody.parentElement;\n                cloneTable.remove();\n            }\n            var falseline = this.parent.ganttChartModule.chartBodyContainer.querySelector('.e-gantt-false-line');\n            if (!isNullOrUndefined(falseline)) {\n                this.parent.editModule.taskbarEditModule.removeFalseLine(true);\n            }\n        }\n        if (this.parent.editSettings.allowTaskbarEditing) {\n            this.parent.notify('chartMouseUp', e);\n        }\n        if (!this.parent.editSettings.allowEditing) {\n            var isTaskbarEdited = false;\n            if (this.parent.editSettings.allowTaskbarEditing &&\n                getValue('editModule.taskbarEditModule.isMouseDragged', this.parent) &&\n                getValue('editModule.taskbarEditModule.taskBarEditAction', this.parent)) {\n                isTaskbarEdited = true;\n            }\n            if (!isTaskbarEdited) {\n                /** Expand/collapse action */\n                var target = e.target;\n                var isOnTaskbarElement = e.target.classList.contains(cls.taskBarMainContainer)\n                    || closest(e.target, '.' + cls.taskBarMainContainer);\n                if (closest(target, '.e-gantt-parent-taskbar') && !this.parent.editSettings.allowEditing) {\n                    this.chartExpandCollapseRequest(e);\n                }\n                else if (!isOnTaskbarElement && this.parent.autoFocusTasks) {\n                    this.scrollToTarget(e); /** Scroll to task */\n                }\n            }\n        }\n    };\n    /**\n     *\n     * @param {PointerEvent} e .\n     * @returns {void} .\n     */\n    GanttChart.prototype.scrollToTarget = function (e) {\n        var row = closest(e.target, 'tr');\n        if (row && this.parent.element.contains(row) &&\n            (this.parent.element.querySelectorAll('.e-chart-rows-container')[0].contains(e.target) ||\n                this.parent.element.querySelectorAll('.e-gridcontent')[0].contains(e.target)) &&\n            this.parent.currentViewData.length > 0) {\n            var rowIndex = getValue('rowIndex', closest(e.target, 'tr'));\n            var dateObject = this.parent.currentViewData[rowIndex].ganttProperties.startDate;\n            var dateObjLeft = this.parent.currentViewData[rowIndex].ganttProperties.left;\n            if (!isNullOrUndefined(dateObject)) {\n                var left = !this.parent.enableTimelineVirtualization ?\n                    this.parent.dataOperation.getTaskLeft(dateObject, false) : {};\n                if (this.parent.autoFocusTasks) {\n                    if (this.parent.enableTimelineVirtualization) {\n                        this.updateScrollLeft(dateObjLeft);\n                    }\n                    else {\n                        this.updateScrollLeft(left);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * To focus selected task in chart side\n     *\n     * @param {number} scrollLeft .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.updateScrollLeft = function (scrollLeft) {\n        scrollLeft = scrollLeft > 0 ? scrollLeft : 0;\n        scrollLeft = this.scrollElement.scrollWidth <= scrollLeft ? this.scrollElement.scrollWidth : scrollLeft;\n        if ((this.scrollElement.offsetWidth + this.parent.ganttChartModule.scrollElement.scrollLeft) < scrollLeft\n            || (this.scrollElement.scrollLeft > scrollLeft)) {\n            this.scrollObject.setScrollLeft(scrollLeft - 50, this.parent.enableRtl ? -1 : 0);\n        }\n        //  this.parent.ganttChartModule.scrollObject.updateLeftPosition();\n    };\n    /**\n     *  Method trigger while perform mouse up action.\n     *\n     * @param {PointerEvent} e .\n     * @returns {void}\n     * @private\n     */\n    GanttChart.prototype.mouseUp = function (e) {\n        if (e.type === 'touchend') {\n            this.initPinchDistance = null;\n            this.isPinching = false;\n        }\n        if (!isNullOrUndefined(this.parent.editModule) && !isNullOrUndefined(this.parent.editModule.taskbarEditModule)) {\n            this.parent.editModule.taskbarEditModule.removeFalseLine(false);\n        }\n        var resizeCheck = this.parent.element.querySelector('.e-taskbar-resize-div');\n        if (!isNullOrUndefined(resizeCheck)) {\n            resizeCheck.remove();\n        }\n        if (this.parent.allowTaskbarDragAndDrop && this.parent.editModule && this.parent.editModule.taskbarEditModule) {\n            this.parent.editModule.taskbarEditModule['previousLeftValue'] = 0;\n        }\n        if (this.parent.allowRowDragAndDrop) {\n            var ganttDragElemet = this.parent.element.querySelector('.e-ganttdrag');\n            if (ganttDragElemet) {\n                ganttDragElemet.remove();\n            }\n        }\n        if (!this.isGanttElement) {\n            this.parent.notify('chartMouseUp', e);\n        }\n        this.isGanttElement = false;\n    };\n    /**\n     *  Method trigger while perform mouse up action.\n     *\n     * @param {PointerEvent} e .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.documentMouseUp = function (e) {\n        if (e.type === 'touchend') {\n            this.initPinchDistance = null;\n            this.isPinching = false;\n            this.previousPinchDistance = 0;\n        }\n        this.isGanttElement = true;\n        if (e.target.classList.contains('e-treegridexpand') ||\n            e.target.classList.contains('e-treegridcollapse')) {\n            if (getValue('isEditCollapse', this.parent.treeGrid) === true) {\n                setValue('isEditCollapse', false, this.parent.treeGrid);\n            }\n        }\n        if (this.parent.allowRowDragAndDrop) {\n            var ganttDragElemet = this.parent.element.querySelector('.e-ganttdrag');\n            if (ganttDragElemet) {\n                ganttDragElemet.remove();\n            }\n        }\n        if (this.parent.isDestroyed || e.which === 3) {\n            return;\n        }\n        var resizeCheck = this.parent.ganttChartModule.chartBodyContainer.querySelector('.e-taskbar-resize-div');\n        if (!isNullOrUndefined(resizeCheck)) {\n            resizeCheck.remove();\n        }\n        var Check = this.parent.element.getElementsByClassName('e-clone-taskbar')[0];\n        if (!isNullOrUndefined(Check)) {\n            var clonetbody = Check.parentElement;\n            var cloneTable = clonetbody.parentElement;\n            cloneTable.remove();\n        }\n        var isTaskbarEdited = false;\n        if (this.parent.editSettings.allowTaskbarEditing &&\n            getValue('editModule.taskbarEditModule.isMouseDragged', this.parent) &&\n            getValue('editModule.taskbarEditModule.taskBarEditAction', this.parent)) {\n            isTaskbarEdited = true;\n        }\n        this.parent.notify('chartMouseUp', e);\n        if (this.parent.showActiveElement) {\n            this.parent.showIndicator = true;\n            if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n                this.parent.hideMaskRow();\n            }\n            else {\n                this.parent.hideSpinner();\n            }\n            if (this.focusedElement && !e.target.classList.contains('e-split-bar')) {\n                this.focusedElement.tabIndex = this.focusedElement.tabIndex === 0 ? -1 : this.focusedElement.tabIndex;\n                removeClass([this.focusedElement], 'e-active-container');\n            }\n        }\n        if (!isTaskbarEdited) {\n            /** Expand/collapse action */\n            var target = e.target;\n            var isOnTaskbarElement = e.target.classList.contains(cls.taskBarMainContainer)\n                || closest(e.target, '.' + cls.taskBarMainContainer);\n            if (closest(target, '.e-gantt-parent-taskbar') && !this.parent.editSettings.allowEditing) {\n                this.chartExpandCollapseRequest(e);\n            }\n            else if (!isOnTaskbarElement && this.parent.autoFocusTasks) {\n                this.scrollToTarget(e); /** Scroll to task */\n            }\n        }\n        if (this.parent.editModule && this.parent.editModule.taskbarEditModule) {\n            this.parent.editModule.taskbarEditModule.removeFalseLine(true);\n        }\n        if (!isNullOrUndefined(this.parent.onTaskbarClick) && !isTaskbarEdited) {\n            var target = e.target;\n            var taskbarElement = closest(target, '.e-gantt-parent-taskbar,.e-gantt-child-taskbar,.e-gantt-milestone');\n            if (taskbarElement) {\n                this.onTaskbarClick(e, target, taskbarElement);\n            }\n        }\n    };\n    /**\n     * This event triggered when click on taskbar element\n     *\n     * @param {PointerEvent | KeyboardEventArgs} e .\n     * @param {EventTarget} target .\n     * @param {Element} taskbarElement .\n     * @returns {void}\n     */\n    GanttChart.prototype.onTaskbarClick = function (e, target, taskbarElement) {\n        var rowIndex;\n        var chartRow = closest(target, 'tr');\n        if (!isNullOrUndefined(chartRow)) {\n            rowIndex = getValue('rowIndex', chartRow);\n        }\n        var data = this.getRecordByTarget(e);\n        var args = {\n            data: data,\n            taskbarElement: taskbarElement,\n            rowIndex: rowIndex,\n            target: target\n        };\n        this.parent.trigger('onTaskbarClick', args);\n    };\n    /**\n     *  Method trigger while perform mouse leave action.\n     *\n     * @param {PointerEvent} e .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.ganttChartLeave = function (e) {\n        if (this.parent.editSettings.allowTaskbarEditing) {\n            this.parent.notify('chartMouseLeave', e);\n        }\n    };\n    /**\n     *  Method trigger while perform mouse move action.\n     *\n     * @param {PointerEvent} e .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.ganttChartMove = function (e) {\n        if (e.type === 'touchmove' && this.isPinching === true && e instanceof TouchEvent && e.touches && e.touches.length === 2) {\n            // Calculate current distance between two touch points\n            var currentPinchDistance = this.calculatePinchDistance(e.touches[0], e.touches[1]);\n            if (Math.abs(this.previousPinchDistance - currentPinchDistance) > 15) {\n                if (currentPinchDistance > this.previousPinchDistance) {\n                    // Pinch out detected - Perform Zoom in\n                    this.parent.timelineModule.processZooming(true);\n                }\n                else if (currentPinchDistance < this.previousPinchDistance) {\n                    // Pinch in detected - Perform Zoom out\n                    this.parent.timelineModule.processZooming(false);\n                }\n                this.previousPinchDistance = currentPinchDistance;\n            }\n        }\n        if (this.parent.editSettings.allowTaskbarEditing && this.isPinching === false) {\n            if (this.parent.element.getElementsByClassName('e-clone-taskbar').length > 0 && !this.parent.enableRtl) {\n                var xValue = void 0;\n                if (e.type === 'touchmove' || e.type === 'touchstart' || e.type === 'touchend') {\n                    xValue = e['changedTouches'][0].pageX;\n                }\n                else {\n                    xValue = e.pageX;\n                }\n                if (xValue <= this.parent.getOffsetRect(this.parent.ganttChartModule.chartElement).left) {\n                    return;\n                }\n            }\n            this.parent.notify('chartMouseMove', e);\n            if (!isNullOrUndefined(this.parent.taskFields.dependency) && this.parent.connectorLineEditModule) {\n                this.parent.connectorLineEditModule.updateConnectorLineEditElement(e);\n            }\n        }\n    };\n    /**\n     *  Method trigger while perform right click action.\n     *\n     * @param {PointerEvent} e .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.contextClick = function (e) {\n        if (this.parent.allowFiltering && this.parent.filterModule) {\n            this.parent.filterModule.closeFilterOnContextClick(e.srcElement);\n        }\n        if (this.parent.allowTaskbarDragAndDrop) {\n            var Check = this.parent.chartPane.querySelector('.e-clone-taskbar');\n            if (!isNullOrUndefined(Check)) {\n                var clonetbody = Check.parentElement;\n                var cloneTable = clonetbody.parentElement;\n                cloneTable.remove();\n            }\n        }\n    };\n    /**\n     * Method to trigger while perform mouse move on Gantt.\n     *\n     * @param {PointerEvent} e .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.mouseMoveHandler = function (e) {\n        if (!isNullOrUndefined(this.parent.onMouseMove) &&\n            (this.parent.flatData.length ||\n                e.target.classList.contains('e-header-cell-label') ||\n                e.target.classList.contains('e-headercell'))) {\n            var target = e.target;\n            var args = { originalEvent: e };\n            var element = closest(target, '.e-chart-row-cell,.e-connector-line-container,' +\n                '.e-event-markers,.e-header-cell-label,.e-rowcell,.e-headercell,.e-indicator-span');\n            if (element) {\n                var rowData = void 0;\n                var rowElement = closest(target, '.e-rowcell,.e-chart-row-cell');\n                var columnElement = closest(target, '.e-rowcell,.e-headercell');\n                if (rowElement) {\n                    rowData = this.parent.ganttChartModule.getRecordByTarget(e);\n                    args.data = rowData;\n                }\n                if (columnElement) {\n                    var cellIndex = getValue('cellIndex', columnElement);\n                    args.column = this.parent.treeGrid.columns[cellIndex];\n                }\n                if (closest(target, '.e-indicator-span')) {\n                    var index = 0;\n                    var indicators = rowData.ganttProperties.indicators;\n                    if (indicators.length > 1) {\n                        for (index = 0; index < indicators.length; index++) {\n                            if (indicators[index].name === (element.innerText).trim()) {\n                                break;\n                            }\n                        }\n                    }\n                    args.indicator = indicators[index];\n                }\n                if (closest(target, '.e-connector-line-container')) {\n                    var obj = {};\n                    obj.target = element;\n                    args.predecessor = this.parent.tooltipModule.getPredecessorTooltipData(obj);\n                }\n                if (closest(target, '.e-event-markers')) {\n                    var obj = {};\n                    obj.target = element;\n                    args.eventMarkers = this.parent.tooltipModule.getMarkerTooltipData(obj);\n                }\n                if (target.classList.contains('e-header-cell-label')) {\n                    args.date = new Date(target.dataset.content);\n                }\n            }\n            this.parent.trigger('onMouseMove', args);\n        }\n    };\n    /**\n     * Double click handler for chart\n     *\n     * @param {PointerEvent} e .\n     * @returns {void} .\n     */\n    GanttChart.prototype.doubleClickHandler = function (e) {\n        var target = e.target;\n        var row = closest(target, 'tr');\n        var rowIndex = getValue('rowIndex', row);\n        var rowData = this.parent.ganttChartModule.getRecordByTarget(e);\n        if (this.parent.editSettings.allowEditing && this.parent.treeGrid.element.getElementsByClassName('e-editedbatchcell').length > 0) {\n            this.parent.treeGrid.endEdit();\n        }\n        this.parent.notify('chartDblClick', e);\n        var args = {\n            row: row,\n            rowData: rowData,\n            rowIndex: rowIndex,\n            target: target\n        };\n        this.recordDoubleClick(args);\n    };\n    /**\n     * To trigger record double click event.\n     *\n     * @param {RecordDoubleClickEventArgs} args .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.recordDoubleClick = function (args) {\n        this.parent.trigger('recordDoubleClick', args);\n    };\n    /**\n     * @param {PointerEvent | KeyboardEventArgs} e .\n     * @returns {IGanttData} .\n     * @private\n     */\n    GanttChart.prototype.getRecordByTarget = function (e) {\n        var ganttData;\n        var row = closest(e.target, 'div.' + cls.taskBarMainContainer);\n        if (!isNullOrUndefined(row)) {\n            var id = row.getAttribute('rowUniqueId');\n            ganttData = this.parent.getRecordByID(id);\n        }\n        else {\n            row = closest(e.target, 'tr');\n            if (row) {\n                var rowIndex = getValue('rowIndex', closest(e.target, 'tr'));\n                ganttData = this.parent.currentViewData[rowIndex];\n            }\n        }\n        return ganttData;\n    };\n    /**\n     * To get gantt chart row elements\n     *\n     * @returns {NodeListOf<Element>} .\n     * @private\n     */\n    GanttChart.prototype.getChartRows = function () {\n        if (document.getElementById(this.parent.element.id + 'GanttTaskTableBody') !== null) {\n            return document.getElementById(this.parent.element.id + 'GanttTaskTableBody').querySelectorAll('.e-chart-row');\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * Expand Collapse operations from gantt chart side\n     *\n     * @param {PointerEvent} e .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.chartExpandCollapseRequest = function (e) {\n        if (this.parent.enableMultiTaskbar) {\n            return;\n        }\n        var target = e.target;\n        var parentElement = closest(target, '.e-gantt-parent-taskbar');\n        var record = this.getRecordByTarget(e);\n        var chartRow = closest(target, 'tr');\n        var rowIndex = getValue('rowIndex', chartRow);\n        var gridRow = this.parent.treeGrid.getRows()[rowIndex];\n        var args = { data: record, gridRow: gridRow, chartRow: chartRow, cancel: false };\n        this.isExpandCollapseFromChart = true;\n        if (parentElement.classList.contains('e-row-expand')) {\n            this.collapseGanttRow(args);\n        }\n        else if (parentElement.classList.contains('e-row-collapse')) {\n            this.expandGanttRow(args);\n        }\n    };\n    /**\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.reRenderConnectorLines = function () {\n        this.parent.connectorLineModule.dependencyViewContainer.innerHTML = '';\n        this.parent.connectorLineIds = [];\n        this.parent.updatedConnectorLineCollection = [];\n        this.parent.predecessorModule.createConnectorLinesCollection();\n        this.parent.connectorLineModule.renderConnectorLines(this.parent.updatedConnectorLineCollection);\n        var criticalModule = this.parent.criticalPathModule;\n        if (this.parent.enableCriticalPath && criticalModule && criticalModule.criticalPathCollection) {\n            criticalModule.criticalConnectorLine(criticalModule.criticalPathCollection, criticalModule.detailPredecessorCollection, true, criticalModule.predecessorCollectionTaskIds);\n        }\n    };\n    /**\n     * To collapse gantt rows\n     *\n     * @param {object} args .\n     * @param {boolean} isCancel .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.collapseGanttRow = function (args) {\n        var _this = this;\n        this.parent.trigger('collapsing', args, function (arg) {\n            if (_this.isExpandCollapseFromChart && !getValue('cancel', arg)) {\n                _this.collapsedGanttRow(arg);\n            }\n            _this.isExpandCollapseFromChart = false;\n        });\n    };\n    /**\n     * @returns {void} .\n     * @param {object} args .\n     * @private\n     */\n    GanttChart.prototype.collapsedGanttRow = function (args) {\n        var _this = this;\n        if ((isNullOrUndefined(args['gridRow']) && this.parent.enableVirtualization) || isNullOrUndefined(args['chartRow'])) {\n            return;\n        }\n        var record;\n        if (this.parent.loadChildOnDemand && this.parent.taskFields.hasChildMapping) {\n            record = this.parent.currentViewData.filter(function (item) { return item.ganttProperties[_this.parent.taskFields.id] === args['data'][_this.parent.taskFields.id]; })[0];\n        }\n        else {\n            record = getValue('data', args);\n        }\n        if (this.isExpandCollapseFromChart) {\n            this.expandCollapseChartRows('collapse', getValue('chartRow', args), record, null);\n            var idField_1 = this.parent.taskFields.id;\n            if (this.parent.loadChildOnDemand && this.parent.taskFields.hasChildMapping) {\n                var gridRec = this.parent.treeGrid.getCurrentViewRecords().filter(function (item) { return item[idField_1] === args['data'][idField_1]; })[0];\n                this.parent.treeGrid.collapseRow(getValue('gridRow', args), gridRec);\n            }\n            else {\n                this.parent.treeGrid.collapseRow(getValue('gridRow', args), record);\n            }\n            this.isExpandCollapseFromChart = false;\n        }\n        else {\n            this.expandCollapseChartRows('collapse', getValue('chartRow', args), record, null);\n        }\n        // To render the child record on parent row after collapsing\n        if (this.parent.viewType === 'ResourceView' || this.parent.viewType === 'ProjectView') {\n            this.renderMultiTaskbar(record);\n        }\n        if (!this.parent.enableVirtualization) {\n            this.parent.updateContentHeight();\n        }\n        this.updateWidthAndHeight();\n        this.reRenderConnectorLines();\n        getValue('chartRow', args).setAttribute('aria-expanded', 'false');\n    };\n    /**\n     * To expand gantt rows\n     *\n     * @returns {void} .\n     * @param {object} args .\n     * @param {boolean} isCancel .\n     * @private\n     */\n    GanttChart.prototype.expandGanttRow = function (args) {\n        var _this = this;\n        this.parent.trigger('expanding', args, function (arg) {\n            if (_this.isExpandCollapseFromChart && !getValue('cancel', arg)) {\n                _this.expandedGanttRow(arg);\n            }\n            _this.isExpandCollapseFromChart = false;\n        });\n    };\n    /**\n     * @returns {void} .\n     * @param {object} args .\n     * @private\n     */\n    GanttChart.prototype.expandedGanttRow = function (args) {\n        var _this = this;\n        if ((isNullOrUndefined(args['gridRow']) && this.parent.enableVirtualization) || isNullOrUndefined(args['chartRow'])) {\n            return;\n        }\n        var record;\n        if (this.parent.loadChildOnDemand && this.parent.taskFields.hasChildMapping) {\n            record = this.parent.currentViewData.filter(function (item) { return item.ganttProperties.taskId === args['data'][_this.parent.taskFields.id]; })[0];\n        }\n        else {\n            record = getValue('data', args);\n        }\n        if (this.isExpandCollapseFromChart) {\n            this.expandCollapseChartRows('expand', getValue('chartRow', args), record, null);\n            var idField_2 = this.parent.taskFields.id;\n            if (this.parent.loadChildOnDemand && this.parent.taskFields.hasChildMapping) {\n                var gridRec = this.parent.treeGrid.getCurrentViewRecords().filter(function (item) { return item[idField_2] === args['data'][idField_2]; })[0];\n                this.parent.treeGrid.expandRow(getValue('gridRow', args), gridRec);\n            }\n            else {\n                this.parent.treeGrid.expandRow(getValue('gridRow', args), record);\n            }\n            this.isExpandCollapseFromChart = false;\n        }\n        else {\n            if (!this.parent.isExpandCollapseLevelMethod) {\n                this.expandCollapseChartRows('expand', getValue('chartRow', args), record, null);\n            }\n            this.parent.isExpandCollapseLevelMethod = false;\n        }\n        // To render the child record on parent row after expanding.\n        if (this.parent.viewType === 'ResourceView' || this.parent.viewType === 'ProjectView') {\n            this.renderMultiTaskbar(record);\n        }\n        if (!this.parent.enableVirtualization) {\n            this.parent.updateContentHeight();\n        }\n        this.updateWidthAndHeight();\n        this.reRenderConnectorLines();\n        getValue('chartRow', args).setAttribute('aria-expanded', 'true');\n    };\n    GanttChart.prototype.renderMultiTaskbar = function (record) {\n        if (this.parent.enableMultiTaskbar) {\n            this.parent.chartRowsModule.refreshRecords([record], true);\n        }\n        else if (this.parent.showOverAllocation) {\n            this.parent.ganttChartModule.renderRangeContainer(this.parent.currentViewData);\n        }\n    };\n    /**\n     * On expand collapse operation row properties will be updated here.\n     *\n     * @param {string} action .\n     * @param {Node} rowElement .\n     * @param {IGanttData} record .\n     * @param {boolean} isChild .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.expandCollapseChartRows = function (action, rowElement, record, isChild) {\n        var displayType;\n        if (action === 'expand') {\n            displayType = 'table-row';\n            if (!isChild) {\n                record.expanded = true;\n            }\n            var targetElement = rowElement.querySelectorAll('.e-row-collapse');\n            for (var t = 0; t < targetElement.length; t++) {\n                addClass([targetElement[t]], 'e-row-expand');\n                removeClass([targetElement[t]], 'e-row-collapse');\n            }\n        }\n        else if (action === 'collapse') {\n            displayType = 'none';\n            if (!isChild) {\n                record.expanded = false;\n            }\n            var targetElement = rowElement.querySelectorAll('.e-row-expand');\n            for (var t = 0; t < targetElement.length; t++) {\n                addClass([targetElement[t]], 'e-row-collapse');\n                removeClass([targetElement[t]], 'e-row-expand');\n            }\n        }\n        if (!this.parent.enableVirtualization) {\n            var childRecords = record.childRecords;\n            var chartRows = this.getChartRows();\n            var rows = [];\n            for (var i = 0; i < chartRows.length; i++) {\n                if (chartRows[i].classList.contains('gridrowtaskId' +\n                    record.ganttProperties.rowUniqueID +\n                    'level' +\n                    (record.level + 1))) {\n                    rows.push(chartRows[i]);\n                }\n            }\n            for (var i = 0; i < rows.length; i++) {\n                rows[i].style.display = displayType;\n                if (childRecords[i].childRecords &&\n                    childRecords[i].childRecords.length &&\n                    (action === 'collapse' ||\n                        childRecords[i].expanded ||\n                        this.isExpandAll)) {\n                    this.expandCollapseChartRows(action, rows[i], childRecords[i], true);\n                }\n            }\n        }\n    };\n    /**\n     * Public method to expand or collapse all the rows of Gantt\n     *\n     * @returns {void}\n     * @param {string} action .\n     * @private\n     */\n    GanttChart.prototype.expandCollapseAll = function (action) {\n        if (action === 'expand') {\n            this.isExpandAll = true;\n            this.parent.treeGrid.expandAll();\n        }\n        else {\n            this.isCollapseAll = true;\n            this.parent.treeGrid.collapseAll();\n            if (this.isCollapseAll && !this.parent.allowTaskbarOverlap) {\n                var treeGridContentHeight = this.parent.enableRtl ? this.parent['element'].getElementsByClassName('e-content')[2].children[0]['offsetHeight'] :\n                    this.parent['element'].getElementsByClassName('e-content')[0].children[0]['offsetHeight'];\n                this.parent.contentHeight = treeGridContentHeight;\n                document.getElementsByClassName('e-chart-rows-container')[0]['style'].height = this.parent.contentHeight + 'px';\n            }\n        }\n        this.isExpandAll = false;\n        this.isCollapseAll = false;\n    };\n    /**\n     * Public method to expand particular level of rows.\n     *\n     * @returns {void} .\n     * @param {number} level .\n     * @private\n     */\n    GanttChart.prototype.expandAtLevel = function (level) {\n        this.parent.treeGrid.expandAtLevel(level);\n    };\n    /**\n     * Public method to collapse particular level of rows.\n     *\n     * @returns {void} .\n     * @param {number} level .\n     * @private\n     */\n    GanttChart.prototype.collapseAtLevel = function (level) {\n        if (this.parent.enableVirtualization) {\n            this.parent.isExpandCollapseLevelMethod = true;\n        }\n        this.parent.treeGrid.collapseAtLevel(level);\n    };\n    /**\n     * Event Binding for gantt chart click\n     *\n     * @returns {void} .\n     */\n    GanttChart.prototype.wireEvents = function () {\n        var isIE11Pointer = Browser.isPointer; // eslint-disable-line\n        var mouseDown = Browser.touchStartEvent;\n        var mouseUp = Browser.touchEndEvent;\n        var mouseMove = Browser.touchMoveEvent;\n        var cancel = isIE11Pointer ? 'pointerleave' : 'mouseleave';\n        EventHandler.add(this.parent.chartPane, mouseDown, this.ganttChartMouseDown, this);\n        EventHandler.add(this.parent.chartPane, cancel, this.ganttChartLeave, this);\n        EventHandler.add(this.parent.chartPane, mouseMove, this.ganttChartMove, this);\n        EventHandler.add(this.parent.chartPane, 'wheel', this.onWheelZoom, this);\n        if (this.parent.isAdaptive) {\n            EventHandler.add(this.parent.chartPane, click, this.ganttChartMouseClick, this);\n            EventHandler.add(this.parent.chartPane, mouseUp, this.ganttChartMouseUp, this);\n        }\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(this.parent.element, mouseUp, this.documentMouseUp, this);\n            EventHandler.add(document, mouseUp, this.mouseUp, this);\n        }\n        EventHandler.add(this.parent.element, 'mousemove', this.mouseMoveHandler, this);\n        EventHandler.add(document.body, 'contextmenu', this.contextClick, this);\n        EventHandler.add(document, 'mouseup', this.contextClick, this);\n        EventHandler.add(this.parent.chartRowsModule.ganttChartTableBody, 'dblclick', this.doubleClickHandler, this);\n    };\n    GanttChart.prototype.unWireEvents = function () {\n        var isIE11Pointer = Browser.isPointer; // eslint-disable-line\n        var mouseDown = Browser.touchStartEvent;\n        var mouseUp = Browser.touchEndEvent;\n        var mouseMove = Browser.touchMoveEvent;\n        var cancel = isIE11Pointer ? 'pointerleave' : 'mouseleave';\n        if (!isNullOrUndefined(this.parent.chartRowsModule.ganttChartTableBody)) {\n            EventHandler.remove(this.parent.chartRowsModule.ganttChartTableBody, mouseDown, this.ganttChartMouseDown);\n        }\n        if (!isNullOrUndefined(this.parent.chartPane)) {\n            EventHandler.remove(this.parent.chartPane, cancel, this.ganttChartLeave);\n            EventHandler.remove(this.parent.chartPane, mouseMove, this.ganttChartMove);\n            EventHandler.remove(this.parent.chartPane, 'wheel', this.onWheelZoom);\n            EventHandler.remove(this.parent.chartPane, mouseDown, this.ganttChartMouseDown);\n        }\n        if (this.parent.isAdaptive) {\n            if (!isNullOrUndefined(this.parent.chartPane)) {\n                EventHandler.remove(this.parent.chartPane, click, this.ganttChartMouseClick);\n                EventHandler.remove(this.parent.chartPane, mouseUp, this.ganttChartMouseUp);\n            }\n        }\n        if (!this.parent.isAdaptive) {\n            if (!isNullOrUndefined(this.parent.element)) {\n                EventHandler.remove(this.parent.element, mouseUp, this.documentMouseUp);\n            }\n            if (!isNullOrUndefined(document)) {\n                EventHandler.remove(document, mouseUp, this.mouseUp);\n            }\n        }\n        if (!isNullOrUndefined(this.parent.element)) {\n            EventHandler.remove(this.parent.element, 'mousemove', this.mouseMoveHandler);\n        }\n        if (!isNullOrUndefined(document)) {\n            EventHandler.remove(document, 'mouseup', this.contextClick);\n            if (!isNullOrUndefined(document.body)) {\n                EventHandler.remove(document.body, 'contextmenu', this.contextClick);\n            }\n        }\n        if (!isNullOrUndefined(this.parent.chartRowsModule.ganttChartTableBody)) {\n            EventHandler.remove(this.parent.chartRowsModule.ganttChartTableBody, 'dblclick', this.doubleClickHandler);\n        }\n    };\n    // Triggers while perform ctrl+mouse wheel Pinch IN/OUT actions\n    GanttChart.prototype.onWheelZoom = function (e) {\n        if (e.ctrlKey) {\n            e.preventDefault();\n            var zoomIn1_1 = e.deltaY < 0;\n            // Differentiating between touchpad and mouse wheel\n            var isTouchpad_1 = false;\n            if (Math.abs(e.deltaY) < 75) { // Smaller deltaY typically indicates touchpad\n                isTouchpad_1 = true;\n            }\n            if (this.debounceTimeout) {\n                if (((this.debounceTimeoutNext + 20) > this.debounceTimeout)) {\n                    clearTimeout(this.debounceTimeout);\n                }\n                if ((this.debounceTimeoutNext + 20) <= this.debounceTimeout || !this.debounceTimeoutNext) {\n                    this.debounceTimeoutNext = this.debounceTimeout;\n                }\n            }\n            this.debounceTimeout = setTimeout(function () {\n                var verticalScrollDelta = Math.abs(e.deltaY);\n                // Adjust threshold based on the input method\n                var isValidScrollDelta = isTouchpad_1\n                    ? (verticalScrollDelta > 0.5 && verticalScrollDelta < 15)\n                    : (verticalScrollDelta > 5 && verticalScrollDelta <= 200);\n                if (isValidScrollDelta) {\n                    this.parent.timelineModule.processZooming(zoomIn1_1);\n                }\n            }.bind(this), 100);\n        }\n    };\n    /**\n     * To get record by taskbar element.\n     *\n     * @param {Element} target .\n     * @returns {IGanttData} .\n     * @private\n     */\n    GanttChart.prototype.getRecordByTaskBar = function (target) {\n        var item;\n        if (this.parent.enableVirtualization && this.parent.enableMultiTaskbar) {\n            item = this.parent.flatData[this.getIndexByTaskBar(target)];\n        }\n        else {\n            item = this.parent.currentViewData[this.getIndexByTaskBar(target)];\n        }\n        return item;\n    };\n    GanttChart.prototype.updateElement = function (next, currentColumn, isTab, isInEditedState, row) {\n        if (this.parent.ganttColumns[next.getAttribute('data-colindex')].field === this.parent.taskFields.progress) {\n            var rowIndex = row.index;\n            do {\n                if (row.hasChildRecords) {\n                    next = this.getNextElement(next, isTab, isInEditedState);\n                }\n                currentColumn = this.parent.ganttColumns[next.getAttribute('data-colindex')];\n                rowIndex = this.parent.treeGrid.getRows().indexOf(next.parentElement);\n            } while (!currentColumn.allowEditing);\n            this.parent.treeGrid.saveCell();\n            this.parent.treeGrid.editCell(rowIndex, this.parent.ganttColumns[next.getAttribute('data-colindex')].field);\n        }\n        return next;\n    };\n    /**\n     * Trigger Tab & Shift + Tab keypress to highlight active element.\n     *\n     * @param {KeyboardEventArgs} e .\n     * @returns {void} .\n     * @private\n     */\n    GanttChart.prototype.onTabAction = function (e) {\n        this.parent.treeGrid.grid.enableHeaderFocus = this.parent.enableHeaderFocus;\n        var toolbarItems = document.getElementsByClassName('e-toolbar-item');\n        var isInEditedState = this.parent.editModule && this.parent.editModule.cellEditModule &&\n            this.parent.editModule.cellEditModule.isCellEdit;\n        if (!this.parent.showActiveElement && !isInEditedState) {\n            return;\n        }\n        var $target = isInEditedState ? e.target.closest('.e-rowcell') : e.target;\n        if (this.parent.element.querySelectorAll('.e-focused').length > 0) {\n            $target = this.parent.element.querySelectorAll('.e-focused')[0];\n        }\n        if ($target && !($target.classList.contains('e-toolbar-item') ||\n            $target.classList.contains('e-input') || $target.classList.contains('e-btn'))) {\n            this.currentToolbarIndex = -1;\n        }\n        if ($target.closest('.e-rowcell') || $target.closest('.e-chart-row')) {\n            this.parent.focusModule.setActiveElement($target);\n        }\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        this.focusedRowIndex = $target.closest('.e-rowcell') ? $target.parentElement.rowIndex :\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            $target.closest('.e-chart-row') ? $target.closest('.e-chart-row').rowIndex : -1;\n        var isTab = (e.action === 'tab') ? true : false;\n        var nextElement = this.getNextElement($target, isTab, isInEditedState);\n        if (nextElement && (nextElement === 'noNextRow' || nextElement.classList.contains('e-rowdragheader'))) {\n            // eslint-disable-next-line\n            (nextElement === 'noNextRow' && this.parent.treeGrid.element.getElementsByClassName('e-editedbatchcell').length > 0) ? this.parent.treeGrid.saveCell() : '';\n            nextElement = null;\n        }\n        if (nextElement && $target.classList.contains('e-headercell')) {\n            var colIndex = parseInt(nextElement.getAttribute('data-colindex'), 10);\n            if (e.action === 'shiftTab') {\n                while (colIndex !== -1 && !this.parent.treeGrid.columns[colIndex]['visible']) {\n                    colIndex = colIndex - 1;\n                }\n                if (colIndex !== -1) {\n                    colIndex = this.parent.allowRowDragAndDrop ? colIndex + 1 : colIndex;\n                    nextElement = document.getElementsByClassName('e-columnheader')[0].childNodes[colIndex];\n                }\n                else {\n                    var toolbarItems_1 = document.getElementsByClassName('e-toolbar-item');\n                    for (var i = toolbarItems_1.length - 1; i > 0; i--) {\n                        if (!document.getElementsByClassName('e-toolbar-item')[i].classList.contains('e-hidden')) {\n                            nextElement = document.getElementsByClassName('e-toolbar-item')[i];\n                            this.currentToolbarIndex = i;\n                            break;\n                        }\n                    }\n                }\n            }\n            else {\n                while (!this.parent.treeGrid.columns[colIndex]['visible']) {\n                    colIndex = colIndex + 1;\n                }\n                colIndex = this.parent.allowRowDragAndDrop ? colIndex + 1 : colIndex;\n                nextElement = document.getElementsByClassName('e-columnheader')[0].childNodes[colIndex];\n            }\n        }\n        if (!nextElement && $target.classList.contains('e-headercell') && e.action === 'tab') {\n            nextElement = document.getElementsByClassName('e-timeline-header-container')[0];\n        }\n        if (!nextElement && ($target.classList.contains('e-headercell') || $target.classList.contains('e-toolbar-item') || $target.classList.contains('e-treegrid') ||\n            $target.classList.contains('e-input') || $target.classList.contains('e-btn')) && this.parent.toolbarModule && this.parent.toolbar.length > 0) {\n            var itemIndex = this.currentToolbarIndex !== -1 ? (e.action === 'tab' ? this.currentToolbarIndex + 1 :\n                this.currentToolbarIndex - 1) : (e.action === 'shiftTab' ? toolbarItems.length - 1 : 1);\n            var isUpdated = false;\n            if (itemIndex !== -1 && (e.action === 'shiftTab' || (e.action === 'tab' && itemIndex < toolbarItems.length))) {\n                do {\n                    if (!toolbarItems[itemIndex].classList.contains('e-hidden')) {\n                        nextElement = toolbarItems[itemIndex];\n                        nextElement.setAttribute('tabindex', '-1');\n                        if (nextElement.querySelector('.e-btn') === $target) {\n                            // eslint-disable-next-line\n                            e.action === 'tab' ? itemIndex++ : itemIndex--;\n                            nextElement = toolbarItems[itemIndex];\n                        }\n                        if (nextElement.querySelector('.e-btn')) {\n                            (nextElement.querySelector('.e-btn')).setAttribute('tabindex', '0');\n                        }\n                        isUpdated = true;\n                        this.currentToolbarIndex = itemIndex;\n                    }\n                    else {\n                        // eslint-disable-next-line\n                        e.action === 'tab' ? itemIndex++ : itemIndex--;\n                    }\n                } while (!isUpdated);\n            }\n        }\n        if (e.action === 'tab' && !nextElement && (this.currentToolbarIndex === toolbarItems.length - 1 &&\n            ($target.classList.contains('e-toolbar-item') || $target.classList.contains('e-input') ||\n                $target.classList.contains('e-btn')))) {\n            for (var i = 0; i < this.parent.treeGrid.columns.length; i++) {\n                if (this.parent.treeGrid.columns[i]['visible']) {\n                    nextElement = document.getElementsByClassName('e-columnheader')[0].childNodes[i];\n                    break;\n                }\n            }\n        }\n        if (e.action === 'shiftTab' && !nextElement && !$target.classList.contains('e-headercell')) {\n            nextElement = document.getElementsByClassName('e-timeline-header-container')[0];\n        }\n        if (e.action === 'shiftTab' && $target.classList.contains('e-timeline-header-container')) {\n            for (var i = this.parent.treeGrid.columns.length; i > 0; i--) {\n                if (this.parent.treeGrid.columns[i - 1]['visible']) {\n                    nextElement = document.getElementsByClassName('e-columnheader')[0].childNodes[i - 1];\n                    break;\n                }\n            }\n        }\n        this.tempNextElement = nextElement;\n        if (!isNullOrUndefined(nextElement) && !isNullOrUndefined(nextElement['cellIndex'])) {\n            if (this.parent.allowRowDragAndDrop) {\n                this.childrenIndex = nextElement['cellIndex'];\n                this.nextElementIndex = nextElement['cellIndex'] - 1;\n            }\n            else {\n                this.childrenIndex = nextElement['cellIndex'];\n                this.nextElementIndex = nextElement['cellIndex'];\n            }\n            if (this.nextElementIndex !== -1 && !this.parent.ganttColumns[this.nextElementIndex]['allowEditing'] &&\n                this.parent.ganttColumns[this.nextElementIndex]['field'] !== this.parent.taskFields.id) {\n                this.isEditableElement = true;\n            }\n            else {\n                this.isEditableElement = false;\n            }\n        }\n        if (nextElement === 'noNextRow') {\n            this.manageFocus($target, 'remove', true);\n            return;\n        }\n        if (typeof nextElement !== 'string') {\n            if ($target.classList.contains('e-rowcell') || $target.closest('.e-chart-row-cell') ||\n                $target.classList.contains('e-headercell') || $target.closest('.e-segmented-taskbar') ||\n                $target.classList.contains('e-timeline-header-container')) {\n                e.preventDefault();\n            }\n            if (isTab && $target.classList.contains('e-rowdragdrop')) {\n                this.parent.treeGrid.grid.notify('key-pressed', e);\n                return;\n            }\n            if ($target.classList.contains('e-rowcell') && (nextElement && nextElement.classList.contains('e-rowcell')) ||\n                $target.classList.contains('e-headercell')) { // eslint-disable-line                                                                                                                                                                                                                                    \n                if (isTab) {\n                    if (this.parent.editSettings.allowNextRowEdit) {\n                        var rowData = this.parent.currentViewData[this.focusedRowIndex];\n                        var columnName = this.parent.ganttColumns[nextElement.getAttribute('data-colindex')].field;\n                        if (rowData.hasChildRecords) {\n                            if (columnName === this.parent.taskFields.endDate || columnName ===\n                                this.parent.taskFields.duration || columnName === this.parent.taskFields.dependency ||\n                                columnName === this.parent.taskFields.progress || columnName === this.parent.taskFields.work ||\n                                columnName === this.parent.taskFields.type || columnName === 'taskType') {\n                                this.parent.treeGrid.grid.endEdit();\n                                this.parent.treeGrid.grid.notify('key-pressed', e);\n                            }\n                            else if (columnName === this.parent.taskFields.name || columnName === this.parent.taskFields.startDate) {\n                                this.parent.treeGrid.grid.notify('key-pressed', e);\n                            }\n                            else {\n                                this.parent.treeGrid.grid.notify('key-pressed', e);\n                                if (isInEditedState) {\n                                    this.parent.treeGrid.editCell(this.focusedRowIndex, columnName);\n                                }\n                            }\n                        }\n                        else {\n                            this.parent.treeGrid.grid.notify('key-pressed', e);\n                        }\n                    }\n                    else {\n                        if (!nextElement || (nextElement && !nextElement.classList.contains('e-headercell') && !nextElement.classList.contains('e-timeline-header-container'))) {\n                            if ($target.classList.contains('e-headercell')) {\n                                this.manageFocus($target, 'remove', false);\n                            }\n                            /* eslint-disable-next-line */\n                            var row = this.parent.currentViewData[$target.parentElement.rowIndex];\n                            var next = nextElement;\n                            if (row.hasChildRecords &&\n                                (this.parent.ganttColumns[next.getAttribute('data-colindex')].field === this.parent.taskFields.progress ||\n                                    !this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing) &&\n                                this.parent.ganttColumns[next.getAttribute('data-colindex')].field !== this.parent.taskFields.id\n                                && $target.classList.contains('e-editedbatchcell')) {\n                                var currentColumn = void 0;\n                                next = this.updateElement(next, currentColumn, isTab, isInEditedState, row);\n                                while (!this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing) {\n                                    next = this.getNextElement(next, isTab, isInEditedState);\n                                }\n                                next = this.updateElement(next, currentColumn, isTab, isInEditedState, row);\n                            }\n                            else if (!nextElement || $target.classList.contains('e-editedbatchcell')) {\n                                this.parent.treeGrid.grid.notify('key-pressed', e);\n                            }\n                        }\n                    }\n                }\n                else {\n                    if (nextElement && !nextElement.classList.contains('e-headercell') && nextElement.classList.contains('e-rowcell')\n                        && !nextElement.classList.contains('e-toolbar-item')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var row = this.parent.currentViewData[$target.parentElement.rowIndex];\n                        var next = nextElement;\n                        if (row.hasChildRecords &&\n                            (this.parent.ganttColumns[next.getAttribute('data-colindex')].field === this.parent.taskFields.progress ||\n                                !this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing) &&\n                            this.parent.ganttColumns[next.getAttribute('data-colindex')].field !== this.parent.taskFields.id\n                            && $target.classList.contains('e-editedbatchcell')) {\n                            var currentColumn = void 0;\n                            next = this.updateElement(next, currentColumn, isTab, isInEditedState, row);\n                            while (!this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing) {\n                                next = this.getNextElement(next, isTab, isInEditedState);\n                            }\n                            next = this.updateElement(next, currentColumn, isTab, isInEditedState, row);\n                        }\n                        else if (parseInt(next.parentElement.getAttribute('data-rowindex'), 10) !== 0 &&\n                            parseInt(next.getAttribute('data-colindex'), 10) === 0 &&\n                            this.parent.ganttColumns[next.getAttribute('data-colindex')].field === this.parent.taskFields.id &&\n                            $target.classList.contains('e-editedbatchcell')) {\n                            /* eslint-disable-next-line */\n                            var rowIndex = $target.parentElement.rowIndex;\n                            var rowElement = this.getNextRowElement(rowIndex, isTab, true);\n                            next = this.getChildElement(rowElement, isTab);\n                            var rowData = this.parent.flatData[parseInt(rowElement.getAttribute('data-rowindex'), 10)];\n                            if (rowData.hasChildRecords && (!this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing ||\n                                this.parent.ganttColumns[next.getAttribute('data-colindex')].field ===\n                                    this.parent.taskFields.progress)) {\n                                var currentColumn = void 0;\n                                next = this.updateElement(next, currentColumn, isTab, isInEditedState, rowData);\n                                while (!this.parent.ganttColumns[next.getAttribute('data-colindex')].allowEditing) {\n                                    next = this.getNextElement(next, isTab, isInEditedState);\n                                }\n                                next = this.updateElement(next, currentColumn, isTab, isInEditedState, rowData);\n                            }\n                            else {\n                                this.parent.treeGrid.grid.notify('key-pressed', e);\n                            }\n                        }\n                        else {\n                            this.parent.treeGrid.grid.notify('key-pressed', e);\n                        }\n                    }\n                }\n            }\n            if (this.parent.element.querySelectorAll('.e-focused').length > 0) {\n                this.manageFocus(this.parent.element.querySelectorAll('.e-focused')[0], 'remove', false);\n            }\n            if (!(this.parent.editModule && this.parent.editModule.cellEditModule\n                && !isNullOrUndefined(this.parent.editModule.cellEditModule.editedColumn))) {\n                if (nextElement) {\n                    if ($target.classList.contains('e-rowcell')) {\n                        this.manageFocus($target, 'remove', false);\n                    }\n                    else {\n                        this.manageFocus($target, 'remove', true);\n                    }\n                    if ((nextElement.classList.contains('e-rowcell') && $target.nextElementSibling && !$target.classList.contains('e-timeline-header-container'))\n                        || $target.classList.contains('e-right-label-container')) {\n                        if (!$target.classList.contains('e-rowcell')) {\n                            this.parent.treeGrid.grid.notify('key-pressed', e);\n                            var fmodule = getValue('focusModule', this.parent.treeGrid.grid);\n                            fmodule.currentInfo.element = nextElement;\n                            fmodule.currentInfo.elementToFocus = nextElement;\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            fmodule.content.matrix.current = [nextElement.parentElement.rowIndex, nextElement.cellIndex];\n                        }\n                        this.manageFocus(nextElement, 'add', false);\n                    }\n                    else {\n                        if (nextElement && (nextElement.classList.contains('e-toolbar-item') || nextElement.classList.contains('e-headercell')\n                            || nextElement.classList.contains('e-rowcell'))) {\n                            this.manageFocus($target, 'remove', false);\n                            if (!nextElement.classList.contains('e-toolbar-item')) {\n                                this.manageFocus(nextElement, 'add', false);\n                            }\n                            if ($target.classList.contains('e-treegrid')) {\n                                e.preventDefault();\n                            }\n                        }\n                        else {\n                            this.manageFocus(nextElement, 'add', true);\n                        }\n                    }\n                    this.parent.focusModule.setActiveElement(nextElement);\n                }\n            }\n        }\n    };\n    /**\n     * Get next/previous sibling element.\n     *\n     * @param {Element} $target .\n     * @param {boolean} isTab .\n     * @param {boolean} isInEditedState .\n     * @returns {Element | string} .\n     */\n    GanttChart.prototype.getNextElement = function ($target, isTab, isInEditedState) {\n        if ($target.classList.contains('e-timeline-header-container') && isTab) {\n            var rowElement = this.getNextRowElement(-1, isTab, true);\n            return this.getChildElement(rowElement, isTab);\n        }\n        var nextElement = isTab ? $target.nextElementSibling : $target.previousElementSibling;\n        if ($target.parentElement.classList.contains('e-taskbar-main-container')) {\n            if (this.parent.labelSettings.rightLabel && isTab) {\n                return $target.parentElement.nextElementSibling;\n            }\n            else if (!isTab && this.parent.labelSettings.leftLabel) {\n                return $target.parentElement.previousElementSibling;\n            }\n        }\n        while (nextElement && nextElement.parentElement.classList.contains('e-row')) {\n            if (!nextElement.matches('.e-hide') && !nextElement.matches('.e-rowdragdrop')) {\n                return nextElement;\n            }\n            nextElement = isTab ? nextElement.nextElementSibling : nextElement.previousElementSibling;\n        }\n        if (!isNullOrUndefined(nextElement) && (nextElement.classList.contains('e-taskbar-main-container')\n            || nextElement.classList.contains('e-right-connectorpoint-outer-div'))) {\n            var record = this.parent.currentViewData[this.focusedRowIndex];\n            if (!isNullOrUndefined(record.ganttProperties.segments) && record.ganttProperties.segments.length > 0) {\n                nextElement = nextElement.classList.contains('e-right-connectorpoint-outer-div')\n                    ? nextElement.parentElement.nextElementSibling\n                    : nextElement.getElementsByClassName('e-gantt-child-taskbar-inner-div')[0];\n            }\n        }\n        if (this.validateNextElement(nextElement)) {\n            return nextElement;\n        }\n        else {\n            var rowIndex = -1;\n            var rowElement = null;\n            var childElement = void 0;\n            if ($target.classList.contains('e-rowcell') && isInEditedState && this.parent.editSettings.allowNextRowEdit) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                rowIndex = $target.parentElement.rowIndex;\n                rowElement = this.getNextRowElement(rowIndex, isTab, true);\n                childElement = this.getChildElement(rowElement, isTab);\n                return childElement;\n            }\n            else if ($target.classList.contains('e-rowcell')) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                rowIndex = $target.parentElement.rowIndex;\n                if (isTab) {\n                    rowElement = this.parent.getRowByIndex(rowIndex);\n                    if (this.parent.treeGrid.element.getElementsByClassName('e-editedbatchcell').length > 0) {\n                        rowElement = this.getNextRowElement(rowIndex, isTab, true);\n                        var childElement_1 = this.getChildElement(rowElement, isTab);\n                        return childElement_1;\n                    }\n                    else {\n                        if (this.validateNextElement(rowElement, 'e-left-label-container')) {\n                            return rowElement.getElementsByClassName('e-left-label-container')[0];\n                        }\n                        else if (this.validateNextElement(rowElement, 'e-taskbar-main-container')) {\n                            return rowElement.getElementsByClassName('e-taskbar-main-container')[0];\n                        }\n                        else if (this.validateNextElement(rowElement, 'e-right-label-container')) {\n                            return rowElement.getElementsByClassName('e-right-label-container')[0];\n                        }\n                    }\n                }\n                else {\n                    rowElement = this.getNextRowElement(rowIndex, isTab, false);\n                    if (this.validateNextElement(rowElement, 'e-right-label-container')) {\n                        return rowElement.getElementsByClassName('e-right-label-container')[0];\n                    }\n                    else if (this.validateNextElement(rowElement, 'e-taskbar-main-container')) {\n                        return rowElement.getElementsByClassName('e-taskbar-main-container')[0];\n                    }\n                    else if (this.validateNextElement(rowElement, 'e-left-label-container')) {\n                        return rowElement.getElementsByClassName('e-left-label-container')[0];\n                    }\n                }\n            }\n            else if ($target.parentElement.classList.contains('e-chart-row-cell') ||\n                $target.parentElement.parentElement.classList.contains('e-chart-row-cell')) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                rowIndex = closest($target, '.e-chart-row').rowIndex;\n                if (isTab) {\n                    if (!isTab && this.parent.virtualScrollModule && this.parent.enableVirtualization) {\n                        /* eslint-disable-next-line */\n                        var rowRecord = this.parent.currentViewData[rowIndex];\n                        rowIndex = this.parent.flatData.indexOf(rowRecord);\n                    }\n                    rowElement = this.getNextRowElement(rowIndex, isTab, true);\n                }\n                else {\n                    rowElement = this.parent.treeGrid.getRows()[rowIndex];\n                }\n                var childElement_2 = this.getChildElement(rowElement, isTab);\n                return childElement_2;\n            }\n            nextElement = $target;\n        }\n        return null;\n    };\n    /**\n     * Get next/previous row element.\n     *\n     * @param {number} rowIndex .\n     * @param {boolean} isTab .\n     * @param {boolean} isChartRow .\n     * @returns {Element} .\n     */\n    GanttChart.prototype.getNextRowElement = function (rowIndex, isTab, isChartRow) {\n        var expandedRecords = this.parent.getExpandedRecords(this.parent.currentViewData);\n        var currentItem = this.parent.currentViewData[rowIndex];\n        var expandedRecordIndex = expandedRecords.indexOf(currentItem);\n        var nextRecord = isTab ? expandedRecords[expandedRecordIndex + 1] : expandedRecords[expandedRecordIndex - 1];\n        var nextRowIndex = this.parent.currentViewData.indexOf(nextRecord);\n        if (nextRecord) {\n            return isChartRow ? this.parent.treeGrid.getRows()[nextRowIndex] : this.parent.getRowByIndex(nextRowIndex);\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * Validate next/previous sibling element haschilds.\n     *\n     * @param {Element} $target .\n     * @param {string} className .\n     * @returns {boolean} .\n     */\n    GanttChart.prototype.validateNextElement = function ($target, className) {\n        if ($target && $target.classList.contains('e-rowcell')) {\n            return true;\n        }\n        if ($target && className) {\n            var elementByClass = $target.getElementsByClassName(className)[0];\n            return (elementByClass && elementByClass.hasChildNodes()) ? true : false;\n        }\n        else if ($target) {\n            return (!isNullOrUndefined($target) && $target.hasChildNodes()) ? true : false;\n        }\n        return false;\n    };\n    /**\n     * Getting child element based on row element.\n     *\n     * @param {Element} rowElement .\n     * @param {boolean} isTab .\n     * @returns {Element | string} .\n     */\n    GanttChart.prototype.getChildElement = function (rowElement, isTab) {\n        var childElement;\n        if (rowElement) {\n            childElement = isTab ? rowElement.children[0] : rowElement.children[rowElement.children.length - 1];\n            while (childElement) {\n                if (!childElement.matches('.e-hide') && !childElement.matches('.e-rowdragdrop')) {\n                    return childElement;\n                }\n                childElement = isTab ? childElement.nextElementSibling : childElement.previousElementSibling;\n            }\n        }\n        else {\n            return 'noNextRow';\n        }\n        return childElement;\n    };\n    /**\n     * Add/Remove active element.\n     *\n     * @private\n     * @param {HTMLElement} element .\n     * @param {string} focus .\n     * @param {boolean} isChartElement .\n     * @param {string} keyAction .\n     * @returns {void} .\n     */\n    GanttChart.prototype.manageFocus = function (element, focus, isChartElement, keyAction) {\n        if (isChartElement) {\n            var childElement = null;\n            if (element.classList.contains('e-left-label-container') ||\n                element.classList.contains('e-right-label-container')) {\n                childElement = element.getElementsByTagName('span')[0];\n            }\n            else if (element.classList.contains('e-taskbar-main-container')\n                || element.classList.contains('e-gantt-child-taskbar-inner-div')) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var rowIndex = closest(element, '.e-chart-row').rowIndex;\n                var data = this.parent.currentViewData[rowIndex];\n                var className = data.hasChildRecords ? data.ganttProperties.isAutoSchedule ? 'e-gantt-parent-taskbar' :\n                    'e-manualparent-main-container' :\n                    data.ganttProperties.isMilestone ? 'e-gantt-milestone' : !isNullOrUndefined(data.ganttProperties.segments)\n                        && data.ganttProperties.segments.length > 0 ? 'e-segmented-taskbar' : 'e-gantt-child-taskbar';\n                childElement = element.getElementsByClassName(className)[0];\n                if (isNullOrUndefined(childElement)) {\n                    childElement = element;\n                }\n            }\n            if (element.classList.contains('e-right-label-temp-container') || element.classList.contains('e-left-label-temp-container') || element.classList.contains('e-indicator-span') || element.classList.contains('e-timeline-header-container')) {\n                if (focus === 'add') {\n                    element.setAttribute('tabIndex', '0');\n                    addClass([element], 'e-active-container');\n                    element.focus();\n                }\n                else {\n                    if (keyAction !== 'downArrow' && keyAction !== 'upArrow') {\n                        removeClass([element], 'e-active-container');\n                        element.setAttribute('tabIndex', '-1');\n                        element.blur();\n                    }\n                }\n            }\n            if (focus === 'add' && !isNullOrUndefined(childElement)) {\n                element.setAttribute('tabIndex', '0');\n                addClass([childElement], 'e-active-container');\n                element.focus();\n                this.focusedElement = childElement;\n            }\n            else if (!isNullOrUndefined(childElement) && (keyAction !== 'downArrow' && keyAction !== 'upArrow')) {\n                removeClass([childElement], 'e-active-container');\n                element.setAttribute('tabIndex', '-1');\n                element.blur();\n            }\n        }\n        else {\n            if (focus === 'add') {\n                element.setAttribute('tabIndex', '0');\n                addClass([element], ['e-focused', 'e-focus']);\n                element.focus();\n            }\n            else {\n                element.setAttribute('tabIndex', '-1');\n                removeClass([element], ['e-focused', 'e-focus']);\n                element.blur();\n            }\n        }\n    };\n    /**\n     * To get index by taskbar element.\n     *\n     * @param {Element} target .\n     * @returns {number} .\n     * @private\n     */\n    GanttChart.prototype.getIndexByTaskBar = function (target) {\n        var row;\n        var recordIndex;\n        if (!target.classList.contains(cls.taskBarMainContainer)) {\n            row = closest(target, 'div.' + cls.taskBarMainContainer);\n        }\n        else {\n            row = target;\n        }\n        if (isNullOrUndefined(row)) {\n            row = closest(target, 'tr.' + cls.chartRow);\n            recordIndex = [].slice.call(this.parent.chartRowsModule.ganttChartTableBody.childNodes).indexOf(row);\n        }\n        else {\n            var id = row.getAttribute('rowUniqueId');\n            var record = this.parent.getRecordByID(id);\n            if (this.parent.enableVirtualization && this.parent.enableMultiTaskbar) {\n                recordIndex = this.parent.flatData.indexOf(record);\n            }\n            else {\n                if (this.parent.pdfExportModule && this.parent.pdfExportModule.helper.exportProps\n                    && this.parent.pdfExportModule.helper.exportProps.fitToWidthSettings\n                    && this.parent.pdfExportModule.helper.exportProps.fitToWidthSettings.isFitToWidth\n                    && this.parent.pdfExportModule.isPdfExport) {\n                    recordIndex = this.parent.ids.indexOf(record.ganttProperties.taskId.toString());\n                }\n                else {\n                    recordIndex = this.parent.currentViewData.indexOf(record);\n                }\n            }\n        }\n        return recordIndex;\n    };\n    GanttChart.prototype.destroy = function () {\n        this.removeEventListener();\n        this.unWireEvents();\n        this.rangeViewContainer = null;\n        this.chartBodyContent = null;\n        this.scrollElement = null;\n        this.chartTimelineContainer = null;\n        this.chartBodyContainer = null;\n        if (!isNullOrUndefined(this.scrollObject)) {\n            this.scrollObject.destroy();\n            this.scrollObject = null;\n        }\n    };\n    return GanttChart;\n}());\nexport { GanttChart };\n"],"mappings":";;;AAAA,SAASA,aAAa,EAAEC,UAAU,EAAEC,YAAY,EAAEC,OAAO,QAAQ,sBAAsB;AACvF,SAASC,iBAAiB,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,QAAQ,QAAQ,sBAAsB;AAC5G,OAAO,KAAKC,GAAG,MAAM,uBAAuB;AAC5C,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,KAAK,QAAQ,uBAAuB;AAC7C,SAASC,sBAAsB,QAAQ,oCAAoC;AAC3E;AACA;AACA;AACA,IAAIC,UAAU,GAAG,aAAe,YAAY;EACxC,SAASA,UAAUA,CAACC,MAAM,EAAE;IACxB,IAAI,CAACC,yBAAyB,GAAG,KAAK;IACtC,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,aAAa,GAAG,KAAK;IAC1B,IAAI,CAACC,mBAAmB,GAAG,CAAC;IAC5B,IAAI,CAACC,eAAe,GAAG,CAAC;IACxB,IAAI,CAACC,cAAc,GAAG,KAAK;IAC3B,IAAI,CAACC,qBAAqB,GAAG,CAAC;IAC9B,IAAI,CAACC,mBAAmB,GAAG,CAAC,CAAC;IAC7B,IAAI,CAACC,UAAU,GAAG,KAAK;IACvB,IAAI,CAACT,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACU,sBAAsB,GAAG,IAAI;IAClC,IAAI,CAACC,kBAAkB,GACnB1B,aAAa,CAAC,KAAK,EAAE;MAAE2B,SAAS,EAAEjB,GAAG,CAACkB;IAAe,CAAC,CAAC;IAC3D,IAAI,CAACF,kBAAkB,CAACG,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC;IACtD,IAAI,CAACH,kBAAkB,CAACG,YAAY,CAAC,YAAY,EAAE,gBAAgB,CAAC;IACpE,IAAI,CAACC,aAAa,GAAG,IAAIjB,sBAAsB,CAAC,IAAI,CAACE,MAAM,CAAC;IAC5D,IAAI,CAACgB,gBAAgB,CAAC,CAAC;EAC3B;EACAjB,UAAU,CAACkB,SAAS,CAACD,gBAAgB,GAAG,YAAY;IAChD,IAAI,CAAChB,MAAM,CAACkB,EAAE,CAAC,cAAc,EAAE,IAAI,CAACC,oBAAoB,EAAE,IAAI,CAAC;IAC/D,IAAI,CAACnB,MAAM,CAACkB,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAACE,mBAAmB,EAAE,IAAI,CAAC;IAChE,IAAI,CAACpB,MAAM,CAACkB,EAAE,CAAC,WAAW,EAAE,IAAI,CAACG,qBAAqB,EAAE,IAAI,CAAC;IAC7D,IAAI,CAACrB,MAAM,CAACkB,EAAE,CAAC,mBAAmB,EAAE,IAAI,CAACI,mBAAmB,EAAE,IAAI,CAAC;IACnE,IAAI,CAACtB,MAAM,CAACkB,EAAE,CAAC,SAAS,EAAE,IAAI,CAACK,OAAO,EAAE,IAAI,CAAC;EACjD,CAAC;EACDxB,UAAU,CAACkB,SAAS,CAACK,mBAAmB,GAAG,YAAY;IACnD,IAAI,CAACtB,MAAM,CAACwB,MAAM,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC;IAC3C,IAAI,CAACC,UAAU,CAAC,CAAC;EACrB,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI1B,UAAU,CAACkB,SAAS,CAACE,oBAAoB,GAAG,YAAY;IACpD,IAAI,CAACO,YAAY,GAAGzC,aAAa,CAAC,KAAK,EAAE;MAAE0C,EAAE,EAAE,IAAI,CAAC3B,MAAM,CAAC4B,OAAO,CAACD,EAAE,GAAG,YAAY;MAAEf,SAAS,EAAEjB,GAAG,CAACkC;IAAW,CAAC,CAAC;IAClH,IAAI,CAAC7B,MAAM,CAAC8B,SAAS,CAACC,WAAW,CAAC,IAAI,CAACL,YAAY,CAAC;IACpD,IAAI,CAACM,uBAAuB,CAAC,CAAC;IAC9B,IAAI,CAACC,oBAAoB,CAAC,CAAC;IAC3B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIlC,UAAU,CAACkB,SAAS,CAACI,qBAAqB,GAAG,YAAY;IACrD,IAAI,CAACrB,MAAM,CAACkC,cAAc,CAACC,oBAAoB,CAAC,CAAC;EACrD,CAAC;EACD;AACJ;AACA;AACA;EACIpC,UAAU,CAACkB,SAAS,CAACmB,6BAA6B,GAAG,YAAY;IAC7D,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACrC,MAAM,CAACsC,QAAQ,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;MAClD,IAAIG,IAAI,GAAG,IAAI,CAACxC,MAAM,CAACsC,QAAQ,CAACD,CAAC,CAAC;MAClC,IAAIG,IAAI,CAACC,YAAY,CAACF,MAAM,GAAG,CAAC,EAAE;QAC9B,IAAI,CAACvC,MAAM,CAAC0C,aAAa,CAACC,uBAAuB,CAACH,IAAI,CAAC;MAC3D;IACJ;IACA,IAAI3B,cAAc,GAAG,IAAI,CAACb,MAAM,CAAC4B,OAAO,CAACgB,aAAa,CAAC,GAAG,GAAGjD,GAAG,CAACkB,cAAc,CAAC;IAChF,IAAIA,cAAc,EAAE;MAChBA,cAAc,CAACgC,SAAS,GAAG,EAAE;IACjC;IACA,IAAI,IAAI,CAAC7C,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACC,cAAc,CAACC,OAAO,CAACV,MAAM,KAAK,CAAC,EAAE;MAC/D,IAAI,CAACW,oBAAoB,CAAC,IAAI,CAAClD,MAAM,CAACmD,eAAe,CAAC;IAC1D;EACJ,CAAC;EACDpD,UAAU,CAACkB,SAAS,CAACG,mBAAmB,GAAG,YAAY;IACnD,IAAI,IAAI,CAACpB,MAAM,CAACoD,sBAAsB,EAAE;MACpC,IAAI,CAACzC,kBAAkB,CAACkC,SAAS,GAAG,EAAE;MACtC,IAAI,CAAC7C,MAAM,CAACqD,kBAAkB,CAAC,IAAI,CAACrD,MAAM,CAACsD,qBAAqB,EAAE,IAAI,CAACtD,MAAM,CAACuD,mBAAmB,EAAE,IAAI,CAACvD,MAAM,CAACwD,kBAAkB,CAAC;MAClI,IAAI,CAACxD,MAAM,CAACoD,sBAAsB,GAAG,KAAK;IAC9C,CAAC,MACI;MACD,IAAI,CAACpD,MAAM,CAACyD,eAAe,CAACC,eAAe,CAAC,CAAC;MAC7C,IAAI,IAAI,CAAC1D,MAAM,CAAC2D,iBAAiB,IAAI,IAAI,CAAC3D,MAAM,CAAC4D,UAAU,CAACC,UAAU,EAAE;QACpE,IAAI,CAAC7D,MAAM,CAAC8D,gBAAgB,GAAG,EAAE;QACjC,IAAI,CAAC9D,MAAM,CAAC+D,8BAA8B,GAAG,EAAE;QAC/C,IAAI,CAAC/D,MAAM,CAAC2D,iBAAiB,CAACK,8BAA8B,CAAC,CAAC;MAClE;MACA,IAAI,CAAChE,MAAM,CAACiE,mBAAmB,CAACC,oBAAoB,CAAC,IAAI,CAAClE,MAAM,CAAC+D,8BAA8B,CAAC;MAChG,KAAK,IAAI1B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACrC,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAACC,QAAQ,CAAC7B,MAAM,EAAEF,CAAC,EAAE,EAAE;QACtF,IAAI,IAAI,CAACrC,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAACC,QAAQ,CAAC/B,CAAC,CAAC,CAAC+B,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE;UACjG,IAAI,CAACpE,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAACC,QAAQ,CAAC/B,CAAC,CAAC,CAAC+B,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACtD,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;UAC9H,IAAI,CAACd,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAACC,QAAQ,CAAC/B,CAAC,CAAC,CAAC+B,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACtD,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;UAC9H,IAAI,CAACd,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAACC,QAAQ,CAAC/B,CAAC,CAAC,CAAC+B,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACtD,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;QAClI,CAAC,MACI;UACD,IAAI,IAAI,CAACd,MAAM,CAACqE,QAAQ,KAAK,aAAa,EAAE;YACxC,IAAIC,IAAI,GAAG,IAAI,CAACtE,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CACtDC,QAAQ,CAACG,QAAQ,CAAClC,CAAC,CAACmC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACJ,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC;YAC5E,IAAI,CAAC/E,iBAAiB,CAACiF,IAAI,CAAC,EAAE;cAC1B,IAAI,CAACtE,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAACC,QAAQ,CAAC/B,CAAC,CAAC,CAAC+B,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACtD,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;YAClI;UACJ,CAAC,MACI,IAAI,IAAI,CAACd,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAACC,QAAQ,CAACG,QAAQ,CAAClC,CAAC,CAACmC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACJ,QAAQ,CAAC,CAAC,CAAC,CACrGA,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE;YACzB,IAAI,CAACpE,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAACC,QAAQ,CAAC/B,CAAC,CAAC,CAAC+B,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACtD,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;UAClI;QACJ;MACJ;MACA,IAAI2D,cAAc,GAAG,IAAI,CAACzE,MAAM,CAAC0E,kBAAkB;MACnD,IAAI,IAAI,CAAC1E,MAAM,CAAC2E,kBAAkB,IAAIF,cAAc,IAAIA,cAAc,CAACG,sBAAsB,EAAE;QAC3F,IAAI,CAAC5E,MAAM,CAAC0E,kBAAkB,CAACG,qBAAqB,CAACJ,cAAc,CAACG,sBAAsB,EAAEH,cAAc,CAACK,2BAA2B,EAAE,IAAI,CAAC9E,MAAM,CAAC2E,kBAAkB,EAAEF,cAAc,CAACM,4BAA4B,CAAC;MACxN;MACA,IAAI,IAAI,CAAC/E,MAAM,CAACgF,kBAAkB,EAAE;QAChC,IAAI,CAAC5C,6BAA6B,CAAC,CAAC;MACxC;IACJ;IACA,IAAI,CAAC6C,oBAAoB,CAAC,CAAC;IAC3B,IAAI,IAAI,CAACjF,MAAM,CAACkF,MAAM,EAAE;MACpB,IAAI,CAAClF,MAAM,CAACwB,MAAM,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;IAC9C;IACA,IAAI,IAAI,CAACxB,MAAM,CAACkC,cAAc,CAACiD,WAAW,EAAE;MACxC,IAAI,CAACnF,MAAM,CAACkC,cAAc,CAACkD,gBAAgB,CAAC,CAAC;IACjD;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIrF,UAAU,CAACkB,SAAS,CAACiC,oBAAoB,GAAG,UAAUmC,OAAO,EAAE;IAC3D,IAAIC,YAAY,GAAGD,OAAO,CAAC9C,MAAM;IACjC,IAAIgD,KAAK;IACT,IAAIC,WAAW;IACf,IAAIC,eAAe;IACnB,IAAI,IAAI,CAACzF,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACC,cAAc,CAACC,OAAO,CAACV,MAAM,KAAK,CAAC,EAAE;MAC/D,KAAKgD,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,YAAY,EAAEC,KAAK,EAAE,EAAE;QAC3CC,WAAW,GAAGH,OAAO,CAACE,KAAK,CAAC;QAC5BE,eAAe,GAAGD,WAAW,CAACE,eAAe,CAACC,kBAAkB;QAChE,IAAIF,eAAe,EAAE;UACjB,IAAI,CAACG,WAAW,CAACH,eAAe,EAAED,WAAW,CAAC;QAClD;MACJ;IACJ;EACJ,CAAC;EACDzF,UAAU,CAACkB,SAAS,CAAC4E,WAAW,GAAG,UAAUC,aAAa,EAAE;IACxD,IAAIC,cAAc,GAAG,IAAI,CAAC/F,MAAM,CAACgG,kBAAkB,CAAC,IAAI,CAAChG,MAAM,CAACmD,eAAe,CAAC;IAChF,IAAI8C,WAAW,GAAGF,cAAc,CAACG,OAAO,CAACJ,aAAa,CAAC;IACvD,IAAIA,aAAa,CAACK,UAAU,IAAIF,WAAW,KAAK,CAAC,CAAC,EAAE;MAChD,IAAIG,YAAY,GAAG,IAAI,CAACpG,MAAM,CAACqG,aAAa,CAACP,aAAa,CAACK,UAAU,CAACG,MAAM,CAAC;MAC7EL,WAAW,GAAGF,cAAc,CAACG,OAAO,CAACE,YAAY,CAAC;IACtD;IACA,IAAI,CAACN,aAAa,CAACS,QAAQ,EAAE;MACzB,OAAQN,WAAW,GAAG,IAAI,CAACjG,MAAM,CAACwG,SAAS;IAC/C;IACA,OAAQ,CAACP,WAAW,GAAG,CAAC,IAAI,IAAI,CAACjG,MAAM,CAACwG,SAAS;EACrD,CAAC;EACD;EACAzG,UAAU,CAACkB,SAAS,CAACwF,cAAc,GAAG,UAAUjE,IAAI,EAAE;IAClD,IAAI,CAACA,IAAI,CAAC+D,QAAQ,IAAI/D,IAAI,CAACkE,eAAe,EAAE;MACxC,OAAQ,IAAI,CAAC1G,MAAM,CAACwG,SAAS,GAAGG,IAAI,CAACC,KAAK,CAAE,IAAI,CAAC5G,MAAM,CAACwG,SAAS,GAAG,IAAI,CAACxG,MAAM,CAACyD,eAAe,CAACoD,aAAc,CAAC;IACnH;IACA,OAAQrE,IAAI,CAACC,YAAY,CAACF,MAAM,GAAG,IAAI,CAACvC,MAAM,CAACwG,SAAS,GACpDG,IAAI,CAACC,KAAK,CAAE,IAAI,CAAC5G,MAAM,CAACwG,SAAS,GAAG,IAAI,CAACxG,MAAM,CAACyD,eAAe,CAACoD,aAAc,CAAC;EACvF,CAAC;EACD9G,UAAU,CAACkB,SAAS,CAAC2E,WAAW,GAAG,UAAUH,eAAe,EAAEK,aAAa,EAAE;IACzE,IAAIgB,QAAQ,GAAG,CAAC;IAChB,IAAIC,QAAQ,GAAG,IAAI,CAAC/G,MAAM,CAACmD,eAAe,CAAC+C,OAAO,CAACJ,aAAa,CAAC;IACjE,IAAI,CAAC,IAAI,CAAC9F,MAAM,CAACgH,mBAAmB,IAAI,IAAI,CAAChH,MAAM,CAACiH,kBAAkB,EAAE;MACpEH,QAAQ,GAAG,CAAChB,aAAa,CAACS,QAAQ,GAAG,IAAI,CAACvG,MAAM,CAACkH,aAAa,CAACH,QAAQ,CAAC,CAACI,SAAS,GAC9E,IAAI,CAACnH,MAAM,CAACkH,aAAa,CAACH,QAAQ,CAAC,CAACI,SAAS,GAAG,IAAI,CAACnH,MAAM,CAACwG,SAAS;IAC7E,CAAC,MACI;MACDM,QAAQ,GAAG,IAAI,CAACjB,WAAW,CAACC,aAAa,CAAC;IAC9C;IACA,IAAIsB,aAAa,GAAG,IAAI,CAACzG,kBAAkB,CAACiC,aAAa,CAAC,GAAG,GAAG,gBAAgB,GAAGkD,aAAa,CAACJ,eAAe,CAAC2B,WAAW,CAAC;IAC7H,IAAID,aAAa,EAAE;MACfA,aAAa,CAACE,MAAM,CAAC,CAAC;IAC1B;IACA,IAAIC,SAAS,GAAGtI,aAAa,CAAC,KAAK,EAAE;MACjC2B,SAAS,EAAE,gBAAgB,GAAGkF,aAAa,CAACJ,eAAe,CAAC2B,WAAW;MAAEG,MAAM,EAAE,MAAM,GAAGV,QAAQ,GAAG;IACzG,CAAC,CAAC;IACF,IAAIhB,aAAa,CAAC2B,KAAK,KAAK,CAAC,IAAI,CAAC3B,aAAa,CAACS,QAAQ,IAAIlH,iBAAiB,CAACyG,aAAa,CAACK,UAAU,CAAC,IAChG,CAAC,IAAI,CAACnG,MAAM,CAACiH,kBAAkB,EAAE;MACpC;IACJ;IACA,IAAInB,aAAa,CAAC2B,KAAK,GAAG,CAAC,IAAI3B,aAAa,CAACS,QAAQ,IAAI,CAAC,IAAI,CAACvG,MAAM,CAACqG,aAAa,CAACP,aAAa,CAACK,UAAU,CAACG,MAAM,CAAC,CAACC,QAAQ,EAAE;MAC3H;IACJ;IACA,KAAK,IAAIlE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoD,eAAe,CAAClD,MAAM,EAAEF,CAAC,EAAE,EAAE;MAC7C,IAAIqF,MAAM,GAAG,KAAK,CAAC;MACnB,IAAIpD,IAAI,GAAG,IAAI,CAACtE,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAACwD,UAAU;MACrE,IAAI,CAAC,IAAI,CAAC3H,MAAM,CAACgH,mBAAmB,IAAI,CAAClB,aAAa,CAACS,QAAQ,IAAI,IAAI,CAACvG,MAAM,CAACiH,kBAAkB,IAAI,CAAC,IAAI,CAAC9G,aAAa,EAAE;QACtHuH,MAAM,GAAGnD,QAAQ,CAACD,IAAI,CAACyC,QAAQ,CAAC,CAACa,KAAK,CAACF,MAAM,EAAE,EAAE,CAAC,IAC7C,IAAI,CAAC1H,MAAM,CAACwG,SAAS,GAAG,IAAI,CAACxG,MAAM,CAACyD,eAAe,CAACoD,aAAa,CAAC;MAC3E,CAAC,MACI;QACDa,MAAM,GAAG,IAAI,CAACjB,cAAc,CAACX,aAAa,CAAC;MAC/C;MACA,IAAI+B,OAAO,GAAG5I,aAAa,CAAC,KAAK,EAAE;QAC/B2B,SAAS,EAAEjB,GAAG,CAACmI,mBAAmB,GAAG,GAAG,GAAG,WAAW;QAAEN,MAAM,EAAE,CAAC,IAAI,CAACxH,MAAM,CAAC+H,SAAS,GAAG,QAAQ,GAAG,OAAO,KACtG,CAAC,IAAI,CAAC/H,MAAM,CAAC+H,SAAS,GAAGtC,eAAe,CAACpD,CAAC,CAAC,CAAC2F,IAAI,GAAGvC,eAAe,CAACpD,CAAC,CAAC,CAAC4F,KAAK,GAAG,CAAC,GAAGxC,eAAe,CAACpD,CAAC,CAAC,CAAC2F,IAAI,IAAI,4BAA4B,GAAGrB,IAAI,CAACC,KAAK,CAAC,CAAC,IAAI,CAAC5G,MAAM,CAACwG,SAAS,GAAG,IAAI,CAACxG,MAAM,CAACyD,eAAe,CAACoD,aAAa,IAAI,CAAC,CAAC,GAAG,+BAA+B,IAAIa,MAAM,GAAG,CAAC,CAAC,GAAG,mDAAmD,IAAK,IAAI,CAAC1H,MAAM,CAACqE,QAAQ,KAAK,aAAa,GAAIyB,aAAa,CAACrD,YAAY,CAACF,MAAM,GAAG,CAAC,GAAGuD,aAAa,CAACrD,YAAY,CAACF,MAAM,GAAG,CAAC,GAAGuD,aAAa,CAACrD,YAAY,CAACF,MAAM,GAAG,CAAC,CAAC;MACpf,CAAC,CAAC;MACF,IAAI2F,QAAQ,GAAGjJ,aAAa,CAAC,KAAK,EAAE;QAChC2B,SAAS,EAAEjB,GAAG,CAACmI,mBAAmB,GAAG,GAAG,GAAG,YAAY;QACvDN,MAAM,EAAE,CAAC,IAAI,CAACxH,MAAM,CAAC+H,SAAS,GAAG,QAAQ,GAAG,OAAO,KAAK,CAAC,IAAI,CAAC/H,MAAM,CAAC+H,SAAS,GAAGtC,eAAe,CAACpD,CAAC,CAAC,CAAC2F,IAAI,GACpGvC,eAAe,CAACpD,CAAC,CAAC,CAAC2F,IAAI,GAAGvC,eAAe,CAACpD,CAAC,CAAC,CAAC4F,KAAK,GAAG,CAAC,IAAI,4BAA4B,GAAGtB,IAAI,CAACC,KAAK,CAAC,CAAC,IAAI,CAAC5G,MAAM,CAACwG,SAAS,GAAG,IAAI,CAACxG,MAAM,CAACyD,eAAe,CAACoD,aAAa,IAAI,CAAC,CAAC,GAAG,cAAc,IAAIa,MAAM,GAAG,CAAC,CAAC,GAAG,mEAAmE,IAAK,IAAI,CAAC1H,MAAM,CAACqE,QAAQ,KAAK,aAAa,GAAIyB,aAAa,CAACrD,YAAY,CAACF,MAAM,GAAG,CAAC,GAAGuD,aAAa,CAACrD,YAAY,CAACF,MAAM,GAAG,CAAC,GAAGuD,aAAa,CAACrD,YAAY,CAACF,MAAM,GAAG,CAAC,CAAC;MAC/b,CAAC,CAAC;MACFgF,SAAS,CAACxF,WAAW,CAAC8F,OAAO,CAAC;MAC9BN,SAAS,CAACxF,WAAW,CAACmG,QAAQ,CAAC;MAC/B,IAAI,CAACvH,kBAAkB,CAACoB,WAAW,CAACwF,SAAS,CAAC;IAClD;IACA,IAAI,CAACvH,MAAM,CAACmI,gBAAgB,CAACC,gBAAgB,CAACrG,WAAW,CAAC,IAAI,CAACpB,kBAAkB,CAAC;EACtF,CAAC;EACD;AACJ;AACA;AACA;EACIZ,UAAU,CAACkB,SAAS,CAACe,uBAAuB,GAAG,YAAY;IACvD,IAAI,CAACtB,sBAAsB,GACvBzB,aAAa,CAAC,KAAK,EAAE;MAAE2B,SAAS,EAAEjB,GAAG,CAAC0I;IAAwB,CAAC,CAAC;IACpE,IAAI,IAAI,CAACrI,MAAM,CAAC+H,SAAS,EAAE;MACvB,IAAI,CAACrH,sBAAsB,CAACkH,KAAK,CAACU,eAAe,GAAG,KAAK;MACzD,IAAI,CAAC5H,sBAAsB,CAACkH,KAAK,CAACW,gBAAgB,GAAG,KAAK;IAC9D;IACA,IAAI,CAAC7H,sBAAsB,CAACI,YAAY,CAAC,MAAM,EAAE,cAAc,CAAC;IAChE,IAAI,CAACY,YAAY,CAACK,WAAW,CAAC,IAAI,CAACrB,sBAAsB,CAAC;EAC9D,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIX,UAAU,CAACkB,SAAS,CAACgB,oBAAoB,GAAG,YAAY;IACpD,IAAI,CAACuG,kBAAkB,GAAGvJ,aAAa,CAAC,KAAK,EAAE;MAAE2B,SAAS,EAAEjB,GAAG,CAAC6I;IAAmB,CAAC,CAAC;IACrF,IAAI,CAAC9G,YAAY,CAACK,WAAW,CAAC,IAAI,CAACyG,kBAAkB,CAAC;IACtD,IAAI,CAACC,aAAa,GAAGxJ,aAAa,CAAC,KAAK,EAAE;MACtC2B,SAAS,EAAEjB,GAAG,CAAC+I,kBAAkB,GAAG,GAAG,GAAG/I,GAAG,CAACgJ,aAAa;MAAEnB,MAAM,EAAE;IACzE,CAAC,CAAC;IACF,IAAI,CAACgB,kBAAkB,CAACzG,WAAW,CAAC,IAAI,CAAC0G,aAAa,CAAC;IACvD,IAAI,CAACL,gBAAgB,GAAGnJ,aAAa,CAAC,KAAK,EAAE;MAAE2B,SAAS,EAAEjB,GAAG,CAACyI,gBAAgB;MAAEZ,MAAM,EAAE;IAAsC,CAAC,CAAC;IAChI,IAAI,IAAI,CAACxH,MAAM,CAAC4I,mBAAmB,IAAI,IAAI,CAAC5I,MAAM,CAAC6I,oBAAoB,IAAI,IAAI,CAAC7I,MAAM,CAAC8I,4BAA4B,EAAE;MACjH,IAAI,CAAC9I,MAAM,CAACmI,gBAAgB,CAACpH,aAAa,CAACgI,aAAa,CAAC,CAAC;IAC9D,CAAC,MACI;MACD,IAAI,CAACN,aAAa,CAAC1G,WAAW,CAAC,IAAI,CAACqG,gBAAgB,CAAC;IACzD;IACA;IACA,IAAI,CAACY,YAAY,GAAG,IAAIpJ,WAAW,CAAC,IAAI,CAACI,MAAM,CAAC;IAChD;IACA,IAAIiJ,aAAa,GAAG,CAAC;IACrB,IAAI,CAAC5J,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAACkJ,aAAa,CAAC,IAAI,CAAC7J,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAACkJ,aAAa,CAACtH,OAAO,CAAC,EAAE;MACxGqH,aAAa,GAAG,IAAI,CAACjJ,MAAM,CAACkJ,aAAa,CAACtH,OAAO,CAACuH,YAAY;IAClE;IACA,IAAI,CAACH,YAAY,CACbI,SAAS,CAAC,IAAI,CAACpJ,MAAM,CAACqJ,WAAW,GAAG,IAAI,CAAC3I,sBAAsB,CAACyI,YAAY,GAAGF,aAAa,CAAC;EACrG,CAAC;EACD;AACJ;AACA;AACA;EACIlJ,UAAU,CAACkB,SAAS,CAACgE,oBAAoB,GAAG,YAAY;IACpD;IACA,IAAIqE,cAAc,GAAG,EAAE;IACvB,IAAIC,WAAW,GAAG,IAAI,CAACvJ,MAAM,CAACwJ,aAAa,KAAK,CAAC,GAAG,IAAI,CAACxJ,MAAM,CAACsC,QAAQ,CAACC,MAAM,GAAG,CAAC,GAAG+G,cAAc,GAAG,CAAC,GACpG,IAAI,CAACtJ,MAAM,CAACwJ,aAAa;IAC7B,IAAIC,cAAc,GAAG,IAAI,CAACzJ,MAAM,CAAC4B,OAAO,CAAC8H,sBAAsB,CAAC,oCAAoC,CAAC,CAAC,CAAC,CAAC;IACxG,IAAIH,WAAW,IAAIE,cAAc,CAAC,cAAc,CAAC,IAAI,IAAI,CAACzJ,MAAM,CAAC0H,MAAM,KAAK,MAAM,IAAK+B,cAAc,CAAC,cAAc,CAAC,GAAGF,WAAW,GAAID,cAAc,EAAE;MACnJ,IAAI,CAAClB,gBAAgB,CAACR,KAAK,CAACF,MAAM,GAAGxI,UAAU,CAACqK,WAAW,CAAC;IAChE,CAAC,MACI;MACD,IAAII,YAAY,GAAG,IAAI,CAAC3J,MAAM,CAAC4B,OAAO,CAAC8H,sBAAsB,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC;MAC1G,IAAID,cAAc,CAAC,cAAc,CAAC,IAAIE,YAAY,EAAE;QAChD,IAAI,CAACvB,gBAAgB,CAACR,KAAK,CAACF,MAAM,GAAG+B,cAAc,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,IAAI;MACnF,CAAC,MACI;QACD,IAAI,CAACrB,gBAAgB,CAACR,KAAK,CAACF,MAAM,GAAG+B,cAAc,CAAC,cAAc,CAAC,GAAG,IAAI;MAC9E;IACJ,CAAC,CAAC;IACF;IACA,IAAI,IAAI,CAACzJ,MAAM,CAACkC,cAAc,CAACiD,WAAW,IAAI,IAAI,CAACnF,MAAM,CAAC8I,4BAA4B,EAAE;MACpF,IAAI,CAACV,gBAAgB,CAACR,KAAK,CAACK,KAAK,GAAI,IAAI,CAACjI,MAAM,CAAC8I,4BAA4B,IACrE,IAAI,CAAC9I,MAAM,CAACkC,cAAc,CAAC0H,kBAAkB,GAAG,IAAI,CAAC5J,MAAM,CAAC4B,OAAO,CAACiI,WAAW,GAAG,CAAE,GACxF3K,UAAU,CAAC,IAAI,CAACc,MAAM,CAAC4B,OAAO,CAACiI,WAAW,GAAG,CAAC,CAAC,GAC7C3K,UAAU,CAAC,IAAI,CAACc,MAAM,CAACkC,cAAc,CAAC0H,kBAAkB,GAAG,IAAI,CAAC5J,MAAM,CAACkC,cAAc,CAAC,uBAAuB,CAAC,CAAC;IACzH,CAAC,MACI;MACD,IAAI,CAACkG,gBAAgB,CAACR,KAAK,CAACK,KAAK,GAAI,IAAI,CAACjI,MAAM,CAAC8I,4BAA4B,IACrE,IAAI,CAAC9I,MAAM,CAACkC,cAAc,CAAC0H,kBAAkB,GAAG,IAAI,CAAC5J,MAAM,CAAC4B,OAAO,CAACiI,WAAW,GAAG,CAAE,GACxF3K,UAAU,CAAC,IAAI,CAACc,MAAM,CAAC4B,OAAO,CAACiI,WAAW,GAAG,CAAC,CAAC,GAC7C3K,UAAU,CAAC,IAAI,CAACc,MAAM,CAACkC,cAAc,CAAC0H,kBAAkB,CAAC;IACnE;IACA;IACA,IAAI,IAAI,CAAC5J,MAAM,CAACkC,cAAc,CAAC4H,aAAa,IAAI,IAAI,CAAC9J,MAAM,CAAC6I,oBAAoB,EAAE;MAC9E,IAAIkB,WAAW,GAAGpD,IAAI,CAACqD,GAAG,CAAC,IAAI,CAAChK,MAAM,CAACkC,cAAc,CAAC0H,kBAAkB,GACpE,IAAI,CAAC5J,MAAM,CAAC4B,OAAO,CAAC8H,sBAAsB,CAAC,oCAAoC,CAAC,CAAC,CAAC,CAAC,CAACK,WAAW,CAAC;MACpG,IAAI,CAAC/J,MAAM,CAACmI,gBAAgB,CAACC,gBAAgB,CAACR,KAAK,CAACK,KAAK,GACrD/I,UAAU,CAAC,IAAI,CAACc,MAAM,CAACkC,cAAc,CAAC0H,kBAAkB,GAAGG,WAAW,CAAC;IAC/E;IACA,IAAI,CAACE,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAACjK,MAAM,CAACwB,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;IACtC,IAAI,CAACxB,MAAM,CAACkK,6BAA6B,CAAC,CAAC;IAC3C,IAAI,CAACC,wBAAwB,CAAC,CAAC;EACnC,CAAC;EACDpK,UAAU,CAACkB,SAAS,CAACgJ,gBAAgB,GAAG,YAAY;IAChD,IAAI,IAAI,CAACjK,MAAM,CAAC4I,mBAAmB,IAAI,IAAI,CAAC5I,MAAM,CAAC6I,oBAAoB,EAAE;MACrE,IAAIuB,OAAO,GAAG3K,QAAQ,CAAC,cAAc,EAAE,IAAI,CAACO,MAAM,CAACmI,gBAAgB,CAACpH,aAAa,CAAC;MAClFqJ,OAAO,CAACxC,KAAK,CAACF,MAAM,GAAG,IAAI,CAAC1H,MAAM,CAAC8C,QAAQ,CAAClB,OAAO,CAAC8H,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC9B,KAAK,CAACF,MAAM;MAC5G,IAAI2C,QAAQ,GAAG5K,QAAQ,CAAC,SAAS,EAAE,IAAI,CAACO,MAAM,CAACmI,gBAAgB,CAACpH,aAAa,CAAC;MAC9E,IAAIuJ,qBAAqB,GAAG,IAAI,CAACtK,MAAM,CAAC8C,QAAQ,CAAClB,OAAO,CAAC8H,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC9B,KAAK,CAAC2C,SAAS;MACpH,IAAIC,YAAY,GAAGC,QAAQ,CAACf,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC9B,KAAK,CAAC2C,SAAS;MACvF,IAAI,IAAI,CAACvK,MAAM,CAAC8I,4BAA4B,EAAE;QAC1C,IAAI4B,eAAe,GAAG,KAAK,CAAC;QAC5B,IAAIF,YAAY,KAAK,EAAE,EAAE;UACrBE,eAAe,GAAGF,YAAY,CAACG,KAAK,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACjF,CAAC,MACI;UACD,IAAIC,cAAc,GAAG,IAAI,CAAC7K,MAAM,CAACmI,gBAAgB,CAACM,aAAa,CAACiB,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC9B,KAAK,CAAC2C,SAAS;UAC3HG,eAAe,GAAGG,cAAc,CAACF,KAAK,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACnF;QACA,IAAIE,eAAe,GAAGR,qBAAqB,CAACK,KAAK,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC1FP,QAAQ,CAACzC,KAAK,CAAC2C,SAAS,GAAG,YAAY,GAAGG,eAAe,GAAG,IAAI,GAAGI,eAAe,GAAG,GAAG;MAC5F,CAAC,MACI;QACDT,QAAQ,CAACzC,KAAK,CAAC2C,SAAS,GAAGD,qBAAqB;MACpD;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIvK,UAAU,CAACkB,SAAS,CAACkJ,wBAAwB,GAAG,YAAY;IACxD,IAAI,IAAI,CAACnK,MAAM,CAACmD,eAAe,CAACZ,MAAM,GAAG,CAAC,IAAI,IAAI,CAACvC,MAAM,CAAC0H,MAAM,KAAK,MAAM,EAAE;MACzE,IAAIqD,eAAe,GAAG,IAAI,CAAC/K,MAAM,CAAC4I,mBAAmB,IAAI,IAAI,CAAC5I,MAAM,CAAC6I,oBAAoB,GACrF,IAAI,CAAC7I,MAAM,CAACmD,eAAe,GAAG,IAAI,CAACnD,MAAM,CAACgG,kBAAkB,CAAC,IAAI,CAAChG,MAAM,CAACmD,eAAe,CAAC;MAC7F,IAAI6H,eAAe,GAAGD,eAAe,CAACA,eAAe,CAACxI,MAAM,GAAG,CAAC,CAAC;MACjE,IAAI0I,oBAAoB,GAAG,IAAI,CAACjL,MAAM,CAACmD,eAAe,CAAC+C,OAAO,CAAC8E,eAAe,CAAC;MAC/E,IAAIE,OAAO,GAAG,IAAI,CAAClL,MAAM,CAACkH,aAAa,CAAC+D,oBAAoB,CAAC;MAC7D,IAAIE,KAAK,GAAG,IAAI,CAACnL,MAAM,CAACyD,eAAe,CAACU,mBAAmB;MAC3D,IAAIgH,KAAK,CAACC,gBAAgB,CAAC,gDAAgD,CAAC,EAAE;QAC1E5L,WAAW,CAAC2L,KAAK,CAACC,gBAAgB,CAAC,gDAAgD,CAAC,EAAE,WAAW,CAAC;MACtG;MACA,IAAI,IAAI,CAAChD,gBAAgB,CAACiD,YAAY,GAAG,IAAI,CAAC7C,kBAAkB,CAAC6C,YAAY,EAAE;QAC3E,IAAIH,OAAO,EAAE;UACT3L,QAAQ,CAAC2L,OAAO,CAACE,gBAAgB,CAAC,IAAI,CAAC,EAAE,WAAW,CAAC;UACrD,IAAI9B,cAAc,GAAG,EAAE;UACvB,IAAIC,WAAW,GAAG,IAAI,CAACvJ,MAAM,CAACwJ,aAAa,KAAK,CAAC,GAAG,IAAI,CAACxJ,MAAM,CAACsC,QAAQ,CAACC,MAAM,GAAG,CAAC,GAAG+G,cAAc,GAAG,CAAC,GACpG,IAAI,CAACtJ,MAAM,CAACwJ,aAAa;UAC7B,IAAIC,cAAc,GAAG,IAAI,CAACzJ,MAAM,CAAC4B,OAAO,CAAC8H,sBAAsB,CAAC,oCAAoC,CAAC,CAAC,CAAC,CAAC;UACxG,IAAIH,WAAW,IAAIE,cAAc,CAAC,cAAc,CAAC,IAAKA,cAAc,CAAC,cAAc,CAAC,GAAGF,WAAW,GAAID,cAAc,EAAE;YAClH,IAAI,CAAClB,gBAAgB,CAACR,KAAK,CAACF,MAAM,GAAGxI,UAAU,CAACqK,WAAW,CAAC;UAChE,CAAC,MACI;YACD,IAAII,YAAY,GAAG,IAAI,CAAC3J,MAAM,CAAC4B,OAAO,CAAC8H,sBAAsB,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC;YAC1G,IAAID,cAAc,CAAC,cAAc,CAAC,IAAIE,YAAY,EAAE;cAChD,IAAI,CAACvB,gBAAgB,CAACR,KAAK,CAACF,MAAM,GAAG+B,cAAc,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,IAAI;YACnF,CAAC,MACI;cACD,IAAI,CAACrB,gBAAgB,CAACR,KAAK,CAACF,MAAM,GAAG+B,cAAc,CAAC,cAAc,CAAC,GAAG,IAAI;YAC9E;UACJ;QACJ;MACJ;IACJ;EACJ,CAAC;EACD1J,UAAU,CAACkB,SAAS,CAACqK,mBAAmB,GAAG,YAAY;IACnD,IAAI,IAAI,CAACtL,MAAM,CAACuL,WAAW,EAAE;MACzB;IACJ;IACA,IAAI,CAACvL,MAAM,CAACwL,GAAG,CAAC,cAAc,EAAE,IAAI,CAACrK,oBAAoB,CAAC;IAC1D,IAAI,CAACnB,MAAM,CAACwL,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAACpK,mBAAmB,CAAC;IAC3D,IAAI,CAACpB,MAAM,CAACwL,GAAG,CAAC,WAAW,EAAE,IAAI,CAACnK,qBAAqB,CAAC;IACxD,IAAI,CAACrB,MAAM,CAACwL,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAClK,mBAAmB,CAAC;IAC9D,IAAI,CAACtB,MAAM,CAACwL,GAAG,CAAC,SAAS,EAAE,IAAI,CAACjK,OAAO,CAAC;EAC5C,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIxB,UAAU,CAACkB,SAAS,CAACwK,mBAAmB,GAAG,UAAUC,CAAC,EAAE;IACpD,IAAIC,MAAM,GAAG,KAAK;IAClB,IAAID,CAAC,CAACE,IAAI,KAAK,YAAY,IAAIF,CAAC,YAAYG,UAAU,IAAIH,CAAC,CAACI,OAAO,IAAIJ,CAAC,CAACI,OAAO,CAACvJ,MAAM,KAAK,CAAC,EAAE;MAC3F;MACA,IAAI,CAACwJ,iBAAiB,GAAG,IAAI,CAACC,sBAAsB,CAACN,CAAC,CAACI,OAAO,CAAC,CAAC,CAAC,EAAEJ,CAAC,CAACI,OAAO,CAAC,CAAC,CAAC,CAAC;MAChF,IAAI,CAACrL,UAAU,GAAG,IAAI;IAC1B;IACA,IAAI,IAAI,CAACT,MAAM,CAACiM,uBAAuB,IAAI,IAAI,CAACjM,MAAM,CAACkM,UAAU,IAC7D,IAAI,CAAClM,MAAM,CAACmM,YAAY,CAACC,mBAAmB,IAAI,CAAC,IAAI,CAAC3L,UAAU,EAAE;MAClE,IAAI4L,UAAU,GAAG,IAAI,CAACrM,MAAM,CAACkM,UAAU,CAACI,iBAAiB,CAAC,kBAAkB,CAAC,CAACZ,CAAC,CAAC;MAChF,IAAIW,UAAU,KAAK,WAAW,IAAIA,UAAU,KAAK,YAAY,IAAIA,UAAU,KAAK,eAAe,IAAIA,UAAU,KAAK,kBAAkB,EAAE;QAClI,IAAIE,IAAI,GAAG;UACPZ,MAAM,EAAEA,MAAM;UACdnJ,IAAI,EAAE,IAAI,CAACgK,kBAAkB,CAACd,CAAC,CAACe,MAAM,CAAC;UACvCA,MAAM,EAAEf,CAAC,CAACe,MAAM;UAChBC,QAAQ,EAAEpN,OAAO,CAACoM,CAAC,CAACe,MAAM,EAAE,IAAI;QACpC,CAAC;QACD,IAAI,CAACzM,MAAM,CAAC2M,OAAO,CAAC,oBAAoB,EAAEJ,IAAI,CAAC;QAC/CZ,MAAM,GAAGY,IAAI,CAAC,QAAQ,CAAC;MAC3B;IACJ;IACA,IAAI,CAACZ,MAAM,IAAI,CAAC,IAAI,CAAClL,UAAU,EAAE;MAC7B,IAAIiL,CAAC,CAACkB,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC5M,MAAM,CAACmM,YAAY,CAACC,mBAAmB,EAAE;QAC/D,IAAI,CAACpM,MAAM,CAACwB,MAAM,CAAC,gBAAgB,EAAEkK,CAAC,CAAC;QACvC,IAAI,CAAC1L,MAAM,CAAC4B,OAAO,CAACiL,QAAQ,GAAG,CAAC;MACpC;MACA,IAAIC,eAAe,GAAG,KAAK;MAC3B,IAAI,IAAI,CAAC9M,MAAM,CAACmM,YAAY,CAACC,mBAAmB,KAAK,IAAI,CAACpM,MAAM,CAAC4B,OAAO,CAACgB,aAAa,CAAC,wBAAwB,CAAC,IAAI,IAAI,CAAC5C,MAAM,CAAC4B,OAAO,CAACgB,aAAa,CAAC,kCAAkC,CAAC,CAAC,EAAE;QACxLkK,eAAe,GAAG,IAAI;MAC1B;MACA,IAAI,CAACA,eAAe,IAAIpB,CAAC,CAACqB,MAAM,KAAK,CAAC,EAAE;QACpC,IAAI,IAAI,CAAC/M,MAAM,CAACmM,YAAY,CAACa,YAAY,IAAI,IAAI,CAAChN,MAAM,CAAC8C,QAAQ,CAAClB,OAAO,CAAC8H,sBAAsB,CAAC,mBAAmB,CAAC,CAACnH,MAAM,GAAG,CAAC,EAAE;UAC9H,IAAI,CAACvC,MAAM,CAAC8C,QAAQ,CAACmK,OAAO,CAAC,CAAC;QAClC;MACJ;IACJ;EACJ,CAAC;EACDlN,UAAU,CAACkB,SAAS,CAAC+K,sBAAsB,GAAG,UAAUkB,MAAM,EAAEC,MAAM,EAAE;IACpE,IAAIC,EAAE,GAAGD,MAAM,CAACE,OAAO,GAAGH,MAAM,CAACG,OAAO;IACxC,IAAIC,EAAE,GAAGH,MAAM,CAACI,OAAO,GAAGL,MAAM,CAACK,OAAO;IACxC,OAAO5G,IAAI,CAAC6G,IAAI,CAACJ,EAAE,GAAGA,EAAE,GAAGE,EAAE,GAAGA,EAAE,CAAC;EACvC,CAAC;EACDvN,UAAU,CAACkB,SAAS,CAACwM,oBAAoB,GAAG,UAAU/B,CAAC,EAAE;IACrD,IAAI,IAAI,CAAC1L,MAAM,CAAC0N,cAAc,EAAE;MAC5B,IAAI,CAACC,cAAc,CAACjC,CAAC,CAAC,CAAC,CAAC;IAC5B;IACA,IAAI,CAAC1L,MAAM,CAACwB,MAAM,CAAC,iBAAiB,EAAEkK,CAAC,CAAC;EAC5C,CAAC;EACD3L,UAAU,CAACkB,SAAS,CAAC2M,iBAAiB,GAAG,UAAUlC,CAAC,EAAE;IAClD,IAAIA,CAAC,CAACE,IAAI,KAAK,UAAU,EAAE;MACvB,IAAI,CAACG,iBAAiB,GAAG,IAAI;MAC7B,IAAI,CAACtL,UAAU,GAAG,KAAK;MACvB,IAAIoN,WAAW,GAAG,IAAI,CAAC7N,MAAM,CAACmI,gBAAgB,CAACK,kBAAkB,CAAC5F,aAAa,CAAC,uBAAuB,CAAC;MACxG,IAAI,CAACvD,iBAAiB,CAACwO,WAAW,CAAC,EAAE;QACjCA,WAAW,CAACvG,MAAM,CAAC,CAAC;MACxB;MACA,IAAIwG,KAAK,GAAG,IAAI,CAAC9N,MAAM,CAACmI,gBAAgB,CAACK,kBAAkB,CAAC5F,aAAa,CAAC,kBAAkB,CAAC,IAAI,IAAI,CAAC5C,MAAM,CAAC8B,SAAS,CAACc,aAAa,CAAC,kBAAkB,CAAC;MACxJ,IAAI,CAACvD,iBAAiB,CAACyO,KAAK,CAAC,EAAE;QAC3B,IAAIC,UAAU,GAAGD,KAAK,CAACE,aAAa;QACpC,IAAIC,UAAU,GAAGF,UAAU,CAACC,aAAa;QACzCC,UAAU,CAAC3G,MAAM,CAAC,CAAC;MACvB;MACA,IAAI4G,SAAS,GAAG,IAAI,CAAClO,MAAM,CAACmI,gBAAgB,CAACK,kBAAkB,CAAC5F,aAAa,CAAC,qBAAqB,CAAC;MACpG,IAAI,CAACvD,iBAAiB,CAAC6O,SAAS,CAAC,EAAE;QAC/B,IAAI,CAAClO,MAAM,CAACkM,UAAU,CAACI,iBAAiB,CAAC6B,eAAe,CAAC,IAAI,CAAC;MAClE;IACJ;IACA,IAAI,IAAI,CAACnO,MAAM,CAACmM,YAAY,CAACC,mBAAmB,EAAE;MAC9C,IAAI,CAACpM,MAAM,CAACwB,MAAM,CAAC,cAAc,EAAEkK,CAAC,CAAC;IACzC;IACA,IAAI,CAAC,IAAI,CAAC1L,MAAM,CAACmM,YAAY,CAACa,YAAY,EAAE;MACxC,IAAIF,eAAe,GAAG,KAAK;MAC3B,IAAI,IAAI,CAAC9M,MAAM,CAACmM,YAAY,CAACC,mBAAmB,IAC5C3M,QAAQ,CAAC,6CAA6C,EAAE,IAAI,CAACO,MAAM,CAAC,IACpEP,QAAQ,CAAC,gDAAgD,EAAE,IAAI,CAACO,MAAM,CAAC,EAAE;QACzE8M,eAAe,GAAG,IAAI;MAC1B;MACA,IAAI,CAACA,eAAe,EAAE;QAClB;QACA,IAAIL,MAAM,GAAGf,CAAC,CAACe,MAAM;QACrB,IAAI2B,kBAAkB,GAAG1C,CAAC,CAACe,MAAM,CAAC4B,SAAS,CAACC,QAAQ,CAAC3O,GAAG,CAAC4O,oBAAoB,CAAC,IACvEjP,OAAO,CAACoM,CAAC,CAACe,MAAM,EAAE,GAAG,GAAG9M,GAAG,CAAC4O,oBAAoB,CAAC;QACxD,IAAIjP,OAAO,CAACmN,MAAM,EAAE,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAACzM,MAAM,CAACmM,YAAY,CAACa,YAAY,EAAE;UACtF,IAAI,CAACwB,0BAA0B,CAAC9C,CAAC,CAAC;QACtC,CAAC,MACI,IAAI,CAAC0C,kBAAkB,IAAI,IAAI,CAACpO,MAAM,CAAC0N,cAAc,EAAE;UACxD,IAAI,CAACC,cAAc,CAACjC,CAAC,CAAC,CAAC,CAAC;QAC5B;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI3L,UAAU,CAACkB,SAAS,CAAC0M,cAAc,GAAG,UAAUjC,CAAC,EAAE;IAC/C,IAAI+C,GAAG,GAAGnP,OAAO,CAACoM,CAAC,CAACe,MAAM,EAAE,IAAI,CAAC;IACjC,IAAIgC,GAAG,IAAI,IAAI,CAACzO,MAAM,CAAC4B,OAAO,CAAC0M,QAAQ,CAACG,GAAG,CAAC,KACvC,IAAI,CAACzO,MAAM,CAAC4B,OAAO,CAACwJ,gBAAgB,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC,CAACkD,QAAQ,CAAC5C,CAAC,CAACe,MAAM,CAAC,IAClF,IAAI,CAACzM,MAAM,CAAC4B,OAAO,CAACwJ,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAACkD,QAAQ,CAAC5C,CAAC,CAACe,MAAM,CAAC,CAAC,IACjF,IAAI,CAACzM,MAAM,CAACmD,eAAe,CAACZ,MAAM,GAAG,CAAC,EAAE;MACxC,IAAIwE,QAAQ,GAAGtH,QAAQ,CAAC,UAAU,EAAEH,OAAO,CAACoM,CAAC,CAACe,MAAM,EAAE,IAAI,CAAC,CAAC;MAC5D,IAAIiC,UAAU,GAAG,IAAI,CAAC1O,MAAM,CAACmD,eAAe,CAAC4D,QAAQ,CAAC,CAACrB,eAAe,CAACiJ,SAAS;MAChF,IAAIC,WAAW,GAAG,IAAI,CAAC5O,MAAM,CAACmD,eAAe,CAAC4D,QAAQ,CAAC,CAACrB,eAAe,CAACsC,IAAI;MAC5E,IAAI,CAAC3I,iBAAiB,CAACqP,UAAU,CAAC,EAAE;QAChC,IAAI1G,IAAI,GAAG,CAAC,IAAI,CAAChI,MAAM,CAAC8I,4BAA4B,GAChD,IAAI,CAAC9I,MAAM,CAAC0C,aAAa,CAACmM,WAAW,CAACH,UAAU,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;QACjE,IAAI,IAAI,CAAC1O,MAAM,CAAC0N,cAAc,EAAE;UAC5B,IAAI,IAAI,CAAC1N,MAAM,CAAC8I,4BAA4B,EAAE;YAC1C,IAAI,CAACgG,gBAAgB,CAACF,WAAW,CAAC;UACtC,CAAC,MACI;YACD,IAAI,CAACE,gBAAgB,CAAC9G,IAAI,CAAC;UAC/B;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIjI,UAAU,CAACkB,SAAS,CAAC6N,gBAAgB,GAAG,UAAUC,UAAU,EAAE;IAC1DA,UAAU,GAAGA,UAAU,GAAG,CAAC,GAAGA,UAAU,GAAG,CAAC;IAC5CA,UAAU,GAAG,IAAI,CAACtG,aAAa,CAACuG,WAAW,IAAID,UAAU,GAAG,IAAI,CAACtG,aAAa,CAACuG,WAAW,GAAGD,UAAU;IACvG,IAAK,IAAI,CAACtG,aAAa,CAACoB,WAAW,GAAG,IAAI,CAAC7J,MAAM,CAACmI,gBAAgB,CAACM,aAAa,CAACsG,UAAU,GAAIA,UAAU,IACjG,IAAI,CAACtG,aAAa,CAACsG,UAAU,GAAGA,UAAW,EAAE;MACjD,IAAI,CAAC/F,YAAY,CAACiG,aAAa,CAACF,UAAU,GAAG,EAAE,EAAE,IAAI,CAAC/O,MAAM,CAAC+H,SAAS,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;IACpF;IACA;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIhI,UAAU,CAACkB,SAAS,CAACiO,OAAO,GAAG,UAAUxD,CAAC,EAAE;IACxC,IAAIA,CAAC,CAACE,IAAI,KAAK,UAAU,EAAE;MACvB,IAAI,CAACG,iBAAiB,GAAG,IAAI;MAC7B,IAAI,CAACtL,UAAU,GAAG,KAAK;IAC3B;IACA,IAAI,CAACpB,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAACkM,UAAU,CAAC,IAAI,CAAC7M,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAACkM,UAAU,CAACI,iBAAiB,CAAC,EAAE;MAC5G,IAAI,CAACtM,MAAM,CAACkM,UAAU,CAACI,iBAAiB,CAAC6B,eAAe,CAAC,KAAK,CAAC;IACnE;IACA,IAAIN,WAAW,GAAG,IAAI,CAAC7N,MAAM,CAAC4B,OAAO,CAACgB,aAAa,CAAC,uBAAuB,CAAC;IAC5E,IAAI,CAACvD,iBAAiB,CAACwO,WAAW,CAAC,EAAE;MACjCA,WAAW,CAACvG,MAAM,CAAC,CAAC;IACxB;IACA,IAAI,IAAI,CAACtH,MAAM,CAACiM,uBAAuB,IAAI,IAAI,CAACjM,MAAM,CAACkM,UAAU,IAAI,IAAI,CAAClM,MAAM,CAACkM,UAAU,CAACI,iBAAiB,EAAE;MAC3G,IAAI,CAACtM,MAAM,CAACkM,UAAU,CAACI,iBAAiB,CAAC,mBAAmB,CAAC,GAAG,CAAC;IACrE;IACA,IAAI,IAAI,CAACtM,MAAM,CAACmP,mBAAmB,EAAE;MACjC,IAAIC,eAAe,GAAG,IAAI,CAACpP,MAAM,CAAC4B,OAAO,CAACgB,aAAa,CAAC,cAAc,CAAC;MACvE,IAAIwM,eAAe,EAAE;QACjBA,eAAe,CAAC9H,MAAM,CAAC,CAAC;MAC5B;IACJ;IACA,IAAI,CAAC,IAAI,CAAChH,cAAc,EAAE;MACtB,IAAI,CAACN,MAAM,CAACwB,MAAM,CAAC,cAAc,EAAEkK,CAAC,CAAC;IACzC;IACA,IAAI,CAACpL,cAAc,GAAG,KAAK;EAC/B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIP,UAAU,CAACkB,SAAS,CAACoO,eAAe,GAAG,UAAU3D,CAAC,EAAE;IAChD,IAAIA,CAAC,CAACE,IAAI,KAAK,UAAU,EAAE;MACvB,IAAI,CAACG,iBAAiB,GAAG,IAAI;MAC7B,IAAI,CAACtL,UAAU,GAAG,KAAK;MACvB,IAAI,CAACF,qBAAqB,GAAG,CAAC;IAClC;IACA,IAAI,CAACD,cAAc,GAAG,IAAI;IAC1B,IAAIoL,CAAC,CAACe,MAAM,CAAC4B,SAAS,CAACC,QAAQ,CAAC,kBAAkB,CAAC,IAC/C5C,CAAC,CAACe,MAAM,CAAC4B,SAAS,CAACC,QAAQ,CAAC,oBAAoB,CAAC,EAAE;MACnD,IAAI7O,QAAQ,CAAC,gBAAgB,EAAE,IAAI,CAACO,MAAM,CAAC8C,QAAQ,CAAC,KAAK,IAAI,EAAE;QAC3DpD,QAAQ,CAAC,gBAAgB,EAAE,KAAK,EAAE,IAAI,CAACM,MAAM,CAAC8C,QAAQ,CAAC;MAC3D;IACJ;IACA,IAAI,IAAI,CAAC9C,MAAM,CAACmP,mBAAmB,EAAE;MACjC,IAAIC,eAAe,GAAG,IAAI,CAACpP,MAAM,CAAC4B,OAAO,CAACgB,aAAa,CAAC,cAAc,CAAC;MACvE,IAAIwM,eAAe,EAAE;QACjBA,eAAe,CAAC9H,MAAM,CAAC,CAAC;MAC5B;IACJ;IACA,IAAI,IAAI,CAACtH,MAAM,CAACuL,WAAW,IAAIG,CAAC,CAACkB,KAAK,KAAK,CAAC,EAAE;MAC1C;IACJ;IACA,IAAIiB,WAAW,GAAG,IAAI,CAAC7N,MAAM,CAACmI,gBAAgB,CAACK,kBAAkB,CAAC5F,aAAa,CAAC,uBAAuB,CAAC;IACxG,IAAI,CAACvD,iBAAiB,CAACwO,WAAW,CAAC,EAAE;MACjCA,WAAW,CAACvG,MAAM,CAAC,CAAC;IACxB;IACA,IAAIwG,KAAK,GAAG,IAAI,CAAC9N,MAAM,CAAC4B,OAAO,CAAC8H,sBAAsB,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;IAC5E,IAAI,CAACrK,iBAAiB,CAACyO,KAAK,CAAC,EAAE;MAC3B,IAAIC,UAAU,GAAGD,KAAK,CAACE,aAAa;MACpC,IAAIC,UAAU,GAAGF,UAAU,CAACC,aAAa;MACzCC,UAAU,CAAC3G,MAAM,CAAC,CAAC;IACvB;IACA,IAAIwF,eAAe,GAAG,KAAK;IAC3B,IAAI,IAAI,CAAC9M,MAAM,CAACmM,YAAY,CAACC,mBAAmB,IAC5C3M,QAAQ,CAAC,6CAA6C,EAAE,IAAI,CAACO,MAAM,CAAC,IACpEP,QAAQ,CAAC,gDAAgD,EAAE,IAAI,CAACO,MAAM,CAAC,EAAE;MACzE8M,eAAe,GAAG,IAAI;IAC1B;IACA,IAAI,CAAC9M,MAAM,CAACwB,MAAM,CAAC,cAAc,EAAEkK,CAAC,CAAC;IACrC,IAAI,IAAI,CAAC1L,MAAM,CAACsP,iBAAiB,EAAE;MAC/B,IAAI,CAACtP,MAAM,CAACuP,aAAa,GAAG,IAAI;MAChC,IAAI,CAAClQ,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAACwP,gBAAgB,CAAC,IAAI,IAAI,CAACxP,MAAM,CAACwP,gBAAgB,CAACC,aAAa,KAAK,SAAS,EAAE;QAC9G,IAAI,CAACzP,MAAM,CAAC0P,WAAW,CAAC,CAAC;MAC7B,CAAC,MACI;QACD,IAAI,CAAC1P,MAAM,CAAC2P,WAAW,CAAC,CAAC;MAC7B;MACA,IAAI,IAAI,CAACC,cAAc,IAAI,CAAClE,CAAC,CAACe,MAAM,CAAC4B,SAAS,CAACC,QAAQ,CAAC,aAAa,CAAC,EAAE;QACpE,IAAI,CAACsB,cAAc,CAAC/C,QAAQ,GAAG,IAAI,CAAC+C,cAAc,CAAC/C,QAAQ,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC+C,cAAc,CAAC/C,QAAQ;QACrGrN,WAAW,CAAC,CAAC,IAAI,CAACoQ,cAAc,CAAC,EAAE,oBAAoB,CAAC;MAC5D;IACJ;IACA,IAAI,CAAC9C,eAAe,EAAE;MAClB;MACA,IAAIL,MAAM,GAAGf,CAAC,CAACe,MAAM;MACrB,IAAI2B,kBAAkB,GAAG1C,CAAC,CAACe,MAAM,CAAC4B,SAAS,CAACC,QAAQ,CAAC3O,GAAG,CAAC4O,oBAAoB,CAAC,IACvEjP,OAAO,CAACoM,CAAC,CAACe,MAAM,EAAE,GAAG,GAAG9M,GAAG,CAAC4O,oBAAoB,CAAC;MACxD,IAAIjP,OAAO,CAACmN,MAAM,EAAE,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAACzM,MAAM,CAACmM,YAAY,CAACa,YAAY,EAAE;QACtF,IAAI,CAACwB,0BAA0B,CAAC9C,CAAC,CAAC;MACtC,CAAC,MACI,IAAI,CAAC0C,kBAAkB,IAAI,IAAI,CAACpO,MAAM,CAAC0N,cAAc,EAAE;QACxD,IAAI,CAACC,cAAc,CAACjC,CAAC,CAAC,CAAC,CAAC;MAC5B;IACJ;IACA,IAAI,IAAI,CAAC1L,MAAM,CAACkM,UAAU,IAAI,IAAI,CAAClM,MAAM,CAACkM,UAAU,CAACI,iBAAiB,EAAE;MACpE,IAAI,CAACtM,MAAM,CAACkM,UAAU,CAACI,iBAAiB,CAAC6B,eAAe,CAAC,IAAI,CAAC;IAClE;IACA,IAAI,CAAC9O,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAAC6P,cAAc,CAAC,IAAI,CAAC/C,eAAe,EAAE;MACpE,IAAIL,MAAM,GAAGf,CAAC,CAACe,MAAM;MACrB,IAAIqD,cAAc,GAAGxQ,OAAO,CAACmN,MAAM,EAAE,mEAAmE,CAAC;MACzG,IAAIqD,cAAc,EAAE;QAChB,IAAI,CAACD,cAAc,CAACnE,CAAC,EAAEe,MAAM,EAAEqD,cAAc,CAAC;MAClD;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI/P,UAAU,CAACkB,SAAS,CAAC4O,cAAc,GAAG,UAAUnE,CAAC,EAAEe,MAAM,EAAEqD,cAAc,EAAE;IACvE,IAAI/I,QAAQ;IACZ,IAAI2F,QAAQ,GAAGpN,OAAO,CAACmN,MAAM,EAAE,IAAI,CAAC;IACpC,IAAI,CAACpN,iBAAiB,CAACqN,QAAQ,CAAC,EAAE;MAC9B3F,QAAQ,GAAGtH,QAAQ,CAAC,UAAU,EAAEiN,QAAQ,CAAC;IAC7C;IACA,IAAIlK,IAAI,GAAG,IAAI,CAACuN,iBAAiB,CAACrE,CAAC,CAAC;IACpC,IAAIa,IAAI,GAAG;MACP/J,IAAI,EAAEA,IAAI;MACVsN,cAAc,EAAEA,cAAc;MAC9B/I,QAAQ,EAAEA,QAAQ;MAClB0F,MAAM,EAAEA;IACZ,CAAC;IACD,IAAI,CAACzM,MAAM,CAAC2M,OAAO,CAAC,gBAAgB,EAAEJ,IAAI,CAAC;EAC/C,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIxM,UAAU,CAACkB,SAAS,CAAC+O,eAAe,GAAG,UAAUtE,CAAC,EAAE;IAChD,IAAI,IAAI,CAAC1L,MAAM,CAACmM,YAAY,CAACC,mBAAmB,EAAE;MAC9C,IAAI,CAACpM,MAAM,CAACwB,MAAM,CAAC,iBAAiB,EAAEkK,CAAC,CAAC;IAC5C;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI3L,UAAU,CAACkB,SAAS,CAACgP,cAAc,GAAG,UAAUvE,CAAC,EAAE;IAC/C,IAAIA,CAAC,CAACE,IAAI,KAAK,WAAW,IAAI,IAAI,CAACnL,UAAU,KAAK,IAAI,IAAIiL,CAAC,YAAYG,UAAU,IAAIH,CAAC,CAACI,OAAO,IAAIJ,CAAC,CAACI,OAAO,CAACvJ,MAAM,KAAK,CAAC,EAAE;MACtH;MACA,IAAI2N,oBAAoB,GAAG,IAAI,CAAClE,sBAAsB,CAACN,CAAC,CAACI,OAAO,CAAC,CAAC,CAAC,EAAEJ,CAAC,CAACI,OAAO,CAAC,CAAC,CAAC,CAAC;MAClF,IAAInF,IAAI,CAACqD,GAAG,CAAC,IAAI,CAACzJ,qBAAqB,GAAG2P,oBAAoB,CAAC,GAAG,EAAE,EAAE;QAClE,IAAIA,oBAAoB,GAAG,IAAI,CAAC3P,qBAAqB,EAAE;UACnD;UACA,IAAI,CAACP,MAAM,CAACkC,cAAc,CAACiO,cAAc,CAAC,IAAI,CAAC;QACnD,CAAC,MACI,IAAID,oBAAoB,GAAG,IAAI,CAAC3P,qBAAqB,EAAE;UACxD;UACA,IAAI,CAACP,MAAM,CAACkC,cAAc,CAACiO,cAAc,CAAC,KAAK,CAAC;QACpD;QACA,IAAI,CAAC5P,qBAAqB,GAAG2P,oBAAoB;MACrD;IACJ;IACA,IAAI,IAAI,CAAClQ,MAAM,CAACmM,YAAY,CAACC,mBAAmB,IAAI,IAAI,CAAC3L,UAAU,KAAK,KAAK,EAAE;MAC3E,IAAI,IAAI,CAACT,MAAM,CAAC4B,OAAO,CAAC8H,sBAAsB,CAAC,iBAAiB,CAAC,CAACnH,MAAM,GAAG,CAAC,IAAI,CAAC,IAAI,CAACvC,MAAM,CAAC+H,SAAS,EAAE;QACpG,IAAIqI,MAAM,GAAG,KAAK,CAAC;QACnB,IAAI1E,CAAC,CAACE,IAAI,KAAK,WAAW,IAAIF,CAAC,CAACE,IAAI,KAAK,YAAY,IAAIF,CAAC,CAACE,IAAI,KAAK,UAAU,EAAE;UAC5EwE,MAAM,GAAG1E,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC2E,KAAK;QACzC,CAAC,MACI;UACDD,MAAM,GAAG1E,CAAC,CAAC2E,KAAK;QACpB;QACA,IAAID,MAAM,IAAI,IAAI,CAACpQ,MAAM,CAACsQ,aAAa,CAAC,IAAI,CAACtQ,MAAM,CAACmI,gBAAgB,CAACzG,YAAY,CAAC,CAACsG,IAAI,EAAE;UACrF;QACJ;MACJ;MACA,IAAI,CAAChI,MAAM,CAACwB,MAAM,CAAC,gBAAgB,EAAEkK,CAAC,CAAC;MACvC,IAAI,CAACrM,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAAC4D,UAAU,CAACC,UAAU,CAAC,IAAI,IAAI,CAAC7D,MAAM,CAACuQ,uBAAuB,EAAE;QAC9F,IAAI,CAACvQ,MAAM,CAACuQ,uBAAuB,CAACC,8BAA8B,CAAC9E,CAAC,CAAC;MACzE;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI3L,UAAU,CAACkB,SAAS,CAACwP,YAAY,GAAG,UAAU/E,CAAC,EAAE;IAC7C,IAAI,IAAI,CAAC1L,MAAM,CAAC0Q,cAAc,IAAI,IAAI,CAAC1Q,MAAM,CAAC2Q,YAAY,EAAE;MACxD,IAAI,CAAC3Q,MAAM,CAAC2Q,YAAY,CAACC,yBAAyB,CAAClF,CAAC,CAACmF,UAAU,CAAC;IACpE;IACA,IAAI,IAAI,CAAC7Q,MAAM,CAACiM,uBAAuB,EAAE;MACrC,IAAI6B,KAAK,GAAG,IAAI,CAAC9N,MAAM,CAAC8B,SAAS,CAACc,aAAa,CAAC,kBAAkB,CAAC;MACnE,IAAI,CAACvD,iBAAiB,CAACyO,KAAK,CAAC,EAAE;QAC3B,IAAIC,UAAU,GAAGD,KAAK,CAACE,aAAa;QACpC,IAAIC,UAAU,GAAGF,UAAU,CAACC,aAAa;QACzCC,UAAU,CAAC3G,MAAM,CAAC,CAAC;MACvB;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIvH,UAAU,CAACkB,SAAS,CAAC6P,gBAAgB,GAAG,UAAUpF,CAAC,EAAE;IACjD,IAAI,CAACrM,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAAC+Q,WAAW,CAAC,KAC1C,IAAI,CAAC/Q,MAAM,CAACsC,QAAQ,CAACC,MAAM,IACxBmJ,CAAC,CAACe,MAAM,CAAC4B,SAAS,CAACC,QAAQ,CAAC,qBAAqB,CAAC,IAClD5C,CAAC,CAACe,MAAM,CAAC4B,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,CAAC,EAAE;MAClD,IAAI7B,MAAM,GAAGf,CAAC,CAACe,MAAM;MACrB,IAAIF,IAAI,GAAG;QAAEyE,aAAa,EAAEtF;MAAE,CAAC;MAC/B,IAAI9J,OAAO,GAAGtC,OAAO,CAACmN,MAAM,EAAE,gDAAgD,GAC1E,kFAAkF,CAAC;MACvF,IAAI7K,OAAO,EAAE;QACT,IAAIqP,OAAO,GAAG,KAAK,CAAC;QACpB,IAAIC,UAAU,GAAG5R,OAAO,CAACmN,MAAM,EAAE,8BAA8B,CAAC;QAChE,IAAI0E,aAAa,GAAG7R,OAAO,CAACmN,MAAM,EAAE,0BAA0B,CAAC;QAC/D,IAAIyE,UAAU,EAAE;UACZD,OAAO,GAAG,IAAI,CAACjR,MAAM,CAACmI,gBAAgB,CAAC4H,iBAAiB,CAACrE,CAAC,CAAC;UAC3Da,IAAI,CAAC/J,IAAI,GAAGyO,OAAO;QACvB;QACA,IAAIE,aAAa,EAAE;UACf,IAAIC,SAAS,GAAG3R,QAAQ,CAAC,WAAW,EAAE0R,aAAa,CAAC;UACpD5E,IAAI,CAAC8E,MAAM,GAAG,IAAI,CAACrR,MAAM,CAAC8C,QAAQ,CAACG,OAAO,CAACmO,SAAS,CAAC;QACzD;QACA,IAAI9R,OAAO,CAACmN,MAAM,EAAE,mBAAmB,CAAC,EAAE;UACtC,IAAI6E,KAAK,GAAG,CAAC;UACb,IAAIC,UAAU,GAAGN,OAAO,CAACvL,eAAe,CAAC6L,UAAU;UACnD,IAAIA,UAAU,CAAChP,MAAM,GAAG,CAAC,EAAE;YACvB,KAAK+O,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGC,UAAU,CAAChP,MAAM,EAAE+O,KAAK,EAAE,EAAE;cAChD,IAAIC,UAAU,CAACD,KAAK,CAAC,CAACE,IAAI,KAAM5P,OAAO,CAAC6P,SAAS,CAAEC,IAAI,CAAC,CAAC,EAAE;gBACvD;cACJ;YACJ;UACJ;UACAnF,IAAI,CAACoF,SAAS,GAAGJ,UAAU,CAACD,KAAK,CAAC;QACtC;QACA,IAAIhS,OAAO,CAACmN,MAAM,EAAE,6BAA6B,CAAC,EAAE;UAChD,IAAImF,GAAG,GAAG,CAAC,CAAC;UACZA,GAAG,CAACnF,MAAM,GAAG7K,OAAO;UACpB2K,IAAI,CAACsF,WAAW,GAAG,IAAI,CAAC7R,MAAM,CAAC8R,aAAa,CAACC,yBAAyB,CAACH,GAAG,CAAC;QAC/E;QACA,IAAItS,OAAO,CAACmN,MAAM,EAAE,kBAAkB,CAAC,EAAE;UACrC,IAAImF,GAAG,GAAG,CAAC,CAAC;UACZA,GAAG,CAACnF,MAAM,GAAG7K,OAAO;UACpB2K,IAAI,CAACyF,YAAY,GAAG,IAAI,CAAChS,MAAM,CAAC8R,aAAa,CAACG,oBAAoB,CAACL,GAAG,CAAC;QAC3E;QACA,IAAInF,MAAM,CAAC4B,SAAS,CAACC,QAAQ,CAAC,qBAAqB,CAAC,EAAE;UAClD/B,IAAI,CAAC2F,IAAI,GAAG,IAAIC,IAAI,CAAC1F,MAAM,CAAC2F,OAAO,CAACC,OAAO,CAAC;QAChD;MACJ;MACA,IAAI,CAACrS,MAAM,CAAC2M,OAAO,CAAC,aAAa,EAAEJ,IAAI,CAAC;IAC5C;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIxM,UAAU,CAACkB,SAAS,CAACqR,kBAAkB,GAAG,UAAU5G,CAAC,EAAE;IACnD,IAAIe,MAAM,GAAGf,CAAC,CAACe,MAAM;IACrB,IAAIgC,GAAG,GAAGnP,OAAO,CAACmN,MAAM,EAAE,IAAI,CAAC;IAC/B,IAAI1F,QAAQ,GAAGtH,QAAQ,CAAC,UAAU,EAAEgP,GAAG,CAAC;IACxC,IAAIwC,OAAO,GAAG,IAAI,CAACjR,MAAM,CAACmI,gBAAgB,CAAC4H,iBAAiB,CAACrE,CAAC,CAAC;IAC/D,IAAI,IAAI,CAAC1L,MAAM,CAACmM,YAAY,CAACa,YAAY,IAAI,IAAI,CAAChN,MAAM,CAAC8C,QAAQ,CAAClB,OAAO,CAAC8H,sBAAsB,CAAC,mBAAmB,CAAC,CAACnH,MAAM,GAAG,CAAC,EAAE;MAC9H,IAAI,CAACvC,MAAM,CAAC8C,QAAQ,CAACmK,OAAO,CAAC,CAAC;IAClC;IACA,IAAI,CAACjN,MAAM,CAACwB,MAAM,CAAC,eAAe,EAAEkK,CAAC,CAAC;IACtC,IAAIa,IAAI,GAAG;MACPkC,GAAG,EAAEA,GAAG;MACRwC,OAAO,EAAEA,OAAO;MAChBlK,QAAQ,EAAEA,QAAQ;MAClB0F,MAAM,EAAEA;IACZ,CAAC;IACD,IAAI,CAAC8F,iBAAiB,CAAChG,IAAI,CAAC;EAChC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIxM,UAAU,CAACkB,SAAS,CAACsR,iBAAiB,GAAG,UAAUhG,IAAI,EAAE;IACrD,IAAI,CAACvM,MAAM,CAAC2M,OAAO,CAAC,mBAAmB,EAAEJ,IAAI,CAAC;EAClD,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIxM,UAAU,CAACkB,SAAS,CAAC8O,iBAAiB,GAAG,UAAUrE,CAAC,EAAE;IAClD,IAAI8G,SAAS;IACb,IAAI/D,GAAG,GAAGnP,OAAO,CAACoM,CAAC,CAACe,MAAM,EAAE,MAAM,GAAG9M,GAAG,CAAC4O,oBAAoB,CAAC;IAC9D,IAAI,CAAClP,iBAAiB,CAACoP,GAAG,CAAC,EAAE;MACzB,IAAI9M,EAAE,GAAG8M,GAAG,CAACgE,YAAY,CAAC,aAAa,CAAC;MACxCD,SAAS,GAAG,IAAI,CAACxS,MAAM,CAACqG,aAAa,CAAC1E,EAAE,CAAC;IAC7C,CAAC,MACI;MACD8M,GAAG,GAAGnP,OAAO,CAACoM,CAAC,CAACe,MAAM,EAAE,IAAI,CAAC;MAC7B,IAAIgC,GAAG,EAAE;QACL,IAAI1H,QAAQ,GAAGtH,QAAQ,CAAC,UAAU,EAAEH,OAAO,CAACoM,CAAC,CAACe,MAAM,EAAE,IAAI,CAAC,CAAC;QAC5D+F,SAAS,GAAG,IAAI,CAACxS,MAAM,CAACmD,eAAe,CAAC4D,QAAQ,CAAC;MACrD;IACJ;IACA,OAAOyL,SAAS;EACpB,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIzS,UAAU,CAACkB,SAAS,CAACyR,YAAY,GAAG,YAAY;IAC5C,IAAIjI,QAAQ,CAACkI,cAAc,CAAC,IAAI,CAAC3S,MAAM,CAAC4B,OAAO,CAACD,EAAE,GAAG,oBAAoB,CAAC,KAAK,IAAI,EAAE;MACjF,OAAO8I,QAAQ,CAACkI,cAAc,CAAC,IAAI,CAAC3S,MAAM,CAAC4B,OAAO,CAACD,EAAE,GAAG,oBAAoB,CAAC,CAACyJ,gBAAgB,CAAC,cAAc,CAAC;IAClH,CAAC,MACI;MACD,OAAO,IAAI;IACf;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIrL,UAAU,CAACkB,SAAS,CAACuN,0BAA0B,GAAG,UAAU9C,CAAC,EAAE;IAC3D,IAAI,IAAI,CAAC1L,MAAM,CAACiH,kBAAkB,EAAE;MAChC;IACJ;IACA,IAAIwF,MAAM,GAAGf,CAAC,CAACe,MAAM;IACrB,IAAIuB,aAAa,GAAG1O,OAAO,CAACmN,MAAM,EAAE,yBAAyB,CAAC;IAC9D,IAAImG,MAAM,GAAG,IAAI,CAAC7C,iBAAiB,CAACrE,CAAC,CAAC;IACtC,IAAIgB,QAAQ,GAAGpN,OAAO,CAACmN,MAAM,EAAE,IAAI,CAAC;IACpC,IAAI1F,QAAQ,GAAGtH,QAAQ,CAAC,UAAU,EAAEiN,QAAQ,CAAC;IAC7C,IAAImG,OAAO,GAAG,IAAI,CAAC7S,MAAM,CAAC8C,QAAQ,CAACgQ,OAAO,CAAC,CAAC,CAAC/L,QAAQ,CAAC;IACtD,IAAIwF,IAAI,GAAG;MAAE/J,IAAI,EAAEoQ,MAAM;MAAEC,OAAO,EAAEA,OAAO;MAAEnG,QAAQ,EAAEA,QAAQ;MAAEf,MAAM,EAAE;IAAM,CAAC;IAChF,IAAI,CAAC1L,yBAAyB,GAAG,IAAI;IACrC,IAAI+N,aAAa,CAACK,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;MAClD,IAAI,CAACyE,gBAAgB,CAACxG,IAAI,CAAC;IAC/B,CAAC,MACI,IAAIyB,aAAa,CAACK,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;MACzD,IAAI,CAAC0E,cAAc,CAACzG,IAAI,CAAC;IAC7B;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACIxM,UAAU,CAACkB,SAAS,CAACgS,sBAAsB,GAAG,YAAY;IACtD,IAAI,CAACjT,MAAM,CAACiE,mBAAmB,CAACiP,uBAAuB,CAACrQ,SAAS,GAAG,EAAE;IACtE,IAAI,CAAC7C,MAAM,CAAC8D,gBAAgB,GAAG,EAAE;IACjC,IAAI,CAAC9D,MAAM,CAAC+D,8BAA8B,GAAG,EAAE;IAC/C,IAAI,CAAC/D,MAAM,CAAC2D,iBAAiB,CAACK,8BAA8B,CAAC,CAAC;IAC9D,IAAI,CAAChE,MAAM,CAACiE,mBAAmB,CAACC,oBAAoB,CAAC,IAAI,CAAClE,MAAM,CAAC+D,8BAA8B,CAAC;IAChG,IAAIU,cAAc,GAAG,IAAI,CAACzE,MAAM,CAAC0E,kBAAkB;IACnD,IAAI,IAAI,CAAC1E,MAAM,CAAC2E,kBAAkB,IAAIF,cAAc,IAAIA,cAAc,CAACG,sBAAsB,EAAE;MAC3FH,cAAc,CAACI,qBAAqB,CAACJ,cAAc,CAACG,sBAAsB,EAAEH,cAAc,CAACK,2BAA2B,EAAE,IAAI,EAAEL,cAAc,CAACM,4BAA4B,CAAC;IAC9K;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIhF,UAAU,CAACkB,SAAS,CAAC8R,gBAAgB,GAAG,UAAUxG,IAAI,EAAE;IACpD,IAAI4G,KAAK,GAAG,IAAI;IAChB,IAAI,CAACnT,MAAM,CAAC2M,OAAO,CAAC,YAAY,EAAEJ,IAAI,EAAE,UAAU6G,GAAG,EAAE;MACnD,IAAID,KAAK,CAAClT,yBAAyB,IAAI,CAACR,QAAQ,CAAC,QAAQ,EAAE2T,GAAG,CAAC,EAAE;QAC7DD,KAAK,CAACE,iBAAiB,CAACD,GAAG,CAAC;MAChC;MACAD,KAAK,CAAClT,yBAAyB,GAAG,KAAK;IAC3C,CAAC,CAAC;EACN,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIF,UAAU,CAACkB,SAAS,CAACoS,iBAAiB,GAAG,UAAU9G,IAAI,EAAE;IACrD,IAAI4G,KAAK,GAAG,IAAI;IAChB,IAAK9T,iBAAiB,CAACkN,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,IAAI,CAACvM,MAAM,CAAC6I,oBAAoB,IAAKxJ,iBAAiB,CAACkN,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE;MACjH;IACJ;IACA,IAAIqG,MAAM;IACV,IAAI,IAAI,CAAC5S,MAAM,CAACsT,iBAAiB,IAAI,IAAI,CAACtT,MAAM,CAAC4D,UAAU,CAAC2P,eAAe,EAAE;MACzEX,MAAM,GAAG,IAAI,CAAC5S,MAAM,CAACmD,eAAe,CAACqQ,MAAM,CAAC,UAAUC,IAAI,EAAE;QAAE,OAAOA,IAAI,CAAC/N,eAAe,CAACyN,KAAK,CAACnT,MAAM,CAAC4D,UAAU,CAACjC,EAAE,CAAC,KAAK4K,IAAI,CAAC,MAAM,CAAC,CAAC4G,KAAK,CAACnT,MAAM,CAAC4D,UAAU,CAACjC,EAAE,CAAC;MAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7K,CAAC,MACI;MACDiR,MAAM,GAAGnT,QAAQ,CAAC,MAAM,EAAE8M,IAAI,CAAC;IACnC;IACA,IAAI,IAAI,CAACtM,yBAAyB,EAAE;MAChC,IAAI,CAACyT,uBAAuB,CAAC,UAAU,EAAEjU,QAAQ,CAAC,UAAU,EAAE8M,IAAI,CAAC,EAAEqG,MAAM,EAAE,IAAI,CAAC;MAClF,IAAIe,SAAS,GAAG,IAAI,CAAC3T,MAAM,CAAC4D,UAAU,CAACjC,EAAE;MACzC,IAAI,IAAI,CAAC3B,MAAM,CAACsT,iBAAiB,IAAI,IAAI,CAACtT,MAAM,CAAC4D,UAAU,CAAC2P,eAAe,EAAE;QACzE,IAAIK,OAAO,GAAG,IAAI,CAAC5T,MAAM,CAAC8C,QAAQ,CAAC+Q,qBAAqB,CAAC,CAAC,CAACL,MAAM,CAAC,UAAUC,IAAI,EAAE;UAAE,OAAOA,IAAI,CAACE,SAAS,CAAC,KAAKpH,IAAI,CAAC,MAAM,CAAC,CAACoH,SAAS,CAAC;QAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7I,IAAI,CAAC3T,MAAM,CAAC8C,QAAQ,CAACgR,WAAW,CAACrU,QAAQ,CAAC,SAAS,EAAE8M,IAAI,CAAC,EAAEqH,OAAO,CAAC;MACxE,CAAC,MACI;QACD,IAAI,CAAC5T,MAAM,CAAC8C,QAAQ,CAACgR,WAAW,CAACrU,QAAQ,CAAC,SAAS,EAAE8M,IAAI,CAAC,EAAEqG,MAAM,CAAC;MACvE;MACA,IAAI,CAAC3S,yBAAyB,GAAG,KAAK;IAC1C,CAAC,MACI;MACD,IAAI,CAACyT,uBAAuB,CAAC,UAAU,EAAEjU,QAAQ,CAAC,UAAU,EAAE8M,IAAI,CAAC,EAAEqG,MAAM,EAAE,IAAI,CAAC;IACtF;IACA;IACA,IAAI,IAAI,CAAC5S,MAAM,CAACqE,QAAQ,KAAK,cAAc,IAAI,IAAI,CAACrE,MAAM,CAACqE,QAAQ,KAAK,aAAa,EAAE;MACnF,IAAI,CAAC0P,kBAAkB,CAACnB,MAAM,CAAC;IACnC;IACA,IAAI,CAAC,IAAI,CAAC5S,MAAM,CAAC6I,oBAAoB,EAAE;MACnC,IAAI,CAAC7I,MAAM,CAACgU,mBAAmB,CAAC,CAAC;IACrC;IACA,IAAI,CAAC/O,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAACgO,sBAAsB,CAAC,CAAC;IAC7BxT,QAAQ,CAAC,UAAU,EAAE8M,IAAI,CAAC,CAACzL,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC;EACrE,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIf,UAAU,CAACkB,SAAS,CAAC+R,cAAc,GAAG,UAAUzG,IAAI,EAAE;IAClD,IAAI4G,KAAK,GAAG,IAAI;IAChB,IAAI,CAACnT,MAAM,CAAC2M,OAAO,CAAC,WAAW,EAAEJ,IAAI,EAAE,UAAU6G,GAAG,EAAE;MAClD,IAAID,KAAK,CAAClT,yBAAyB,IAAI,CAACR,QAAQ,CAAC,QAAQ,EAAE2T,GAAG,CAAC,EAAE;QAC7DD,KAAK,CAACc,gBAAgB,CAACb,GAAG,CAAC;MAC/B;MACAD,KAAK,CAAClT,yBAAyB,GAAG,KAAK;IAC3C,CAAC,CAAC;EACN,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIF,UAAU,CAACkB,SAAS,CAACgT,gBAAgB,GAAG,UAAU1H,IAAI,EAAE;IACpD,IAAI4G,KAAK,GAAG,IAAI;IAChB,IAAK9T,iBAAiB,CAACkN,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,IAAI,CAACvM,MAAM,CAAC6I,oBAAoB,IAAKxJ,iBAAiB,CAACkN,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE;MACjH;IACJ;IACA,IAAIqG,MAAM;IACV,IAAI,IAAI,CAAC5S,MAAM,CAACsT,iBAAiB,IAAI,IAAI,CAACtT,MAAM,CAAC4D,UAAU,CAAC2P,eAAe,EAAE;MACzEX,MAAM,GAAG,IAAI,CAAC5S,MAAM,CAACmD,eAAe,CAACqQ,MAAM,CAAC,UAAUC,IAAI,EAAE;QAAE,OAAOA,IAAI,CAAC/N,eAAe,CAACY,MAAM,KAAKiG,IAAI,CAAC,MAAM,CAAC,CAAC4G,KAAK,CAACnT,MAAM,CAAC4D,UAAU,CAACjC,EAAE,CAAC;MAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACxJ,CAAC,MACI;MACDiR,MAAM,GAAGnT,QAAQ,CAAC,MAAM,EAAE8M,IAAI,CAAC;IACnC;IACA,IAAI,IAAI,CAACtM,yBAAyB,EAAE;MAChC,IAAI,CAACyT,uBAAuB,CAAC,QAAQ,EAAEjU,QAAQ,CAAC,UAAU,EAAE8M,IAAI,CAAC,EAAEqG,MAAM,EAAE,IAAI,CAAC;MAChF,IAAIsB,SAAS,GAAG,IAAI,CAAClU,MAAM,CAAC4D,UAAU,CAACjC,EAAE;MACzC,IAAI,IAAI,CAAC3B,MAAM,CAACsT,iBAAiB,IAAI,IAAI,CAACtT,MAAM,CAAC4D,UAAU,CAAC2P,eAAe,EAAE;QACzE,IAAIK,OAAO,GAAG,IAAI,CAAC5T,MAAM,CAAC8C,QAAQ,CAAC+Q,qBAAqB,CAAC,CAAC,CAACL,MAAM,CAAC,UAAUC,IAAI,EAAE;UAAE,OAAOA,IAAI,CAACS,SAAS,CAAC,KAAK3H,IAAI,CAAC,MAAM,CAAC,CAAC2H,SAAS,CAAC;QAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7I,IAAI,CAAClU,MAAM,CAAC8C,QAAQ,CAACqR,SAAS,CAAC1U,QAAQ,CAAC,SAAS,EAAE8M,IAAI,CAAC,EAAEqH,OAAO,CAAC;MACtE,CAAC,MACI;QACD,IAAI,CAAC5T,MAAM,CAAC8C,QAAQ,CAACqR,SAAS,CAAC1U,QAAQ,CAAC,SAAS,EAAE8M,IAAI,CAAC,EAAEqG,MAAM,CAAC;MACrE;MACA,IAAI,CAAC3S,yBAAyB,GAAG,KAAK;IAC1C,CAAC,MACI;MACD,IAAI,CAAC,IAAI,CAACD,MAAM,CAACoU,2BAA2B,EAAE;QAC1C,IAAI,CAACV,uBAAuB,CAAC,QAAQ,EAAEjU,QAAQ,CAAC,UAAU,EAAE8M,IAAI,CAAC,EAAEqG,MAAM,EAAE,IAAI,CAAC;MACpF;MACA,IAAI,CAAC5S,MAAM,CAACoU,2BAA2B,GAAG,KAAK;IACnD;IACA;IACA,IAAI,IAAI,CAACpU,MAAM,CAACqE,QAAQ,KAAK,cAAc,IAAI,IAAI,CAACrE,MAAM,CAACqE,QAAQ,KAAK,aAAa,EAAE;MACnF,IAAI,CAAC0P,kBAAkB,CAACnB,MAAM,CAAC;IACnC;IACA,IAAI,CAAC,IAAI,CAAC5S,MAAM,CAAC6I,oBAAoB,EAAE;MACnC,IAAI,CAAC7I,MAAM,CAACgU,mBAAmB,CAAC,CAAC;IACrC;IACA,IAAI,CAAC/O,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAACgO,sBAAsB,CAAC,CAAC;IAC7BxT,QAAQ,CAAC,UAAU,EAAE8M,IAAI,CAAC,CAACzL,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC;EACpE,CAAC;EACDf,UAAU,CAACkB,SAAS,CAAC8S,kBAAkB,GAAG,UAAUnB,MAAM,EAAE;IACxD,IAAI,IAAI,CAAC5S,MAAM,CAACiH,kBAAkB,EAAE;MAChC,IAAI,CAACjH,MAAM,CAACyD,eAAe,CAAC4Q,cAAc,CAAC,CAACzB,MAAM,CAAC,EAAE,IAAI,CAAC;IAC9D,CAAC,MACI,IAAI,IAAI,CAAC5S,MAAM,CAACgF,kBAAkB,EAAE;MACrC,IAAI,CAAChF,MAAM,CAACmI,gBAAgB,CAACjF,oBAAoB,CAAC,IAAI,CAAClD,MAAM,CAACmD,eAAe,CAAC;IAClF;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIpD,UAAU,CAACkB,SAAS,CAACyS,uBAAuB,GAAG,UAAUY,MAAM,EAAEpD,UAAU,EAAE0B,MAAM,EAAE2B,OAAO,EAAE;IAC1F,IAAIC,WAAW;IACf,IAAIF,MAAM,KAAK,QAAQ,EAAE;MACrBE,WAAW,GAAG,WAAW;MACzB,IAAI,CAACD,OAAO,EAAE;QACV3B,MAAM,CAACrM,QAAQ,GAAG,IAAI;MAC1B;MACA,IAAIkO,aAAa,GAAGvD,UAAU,CAAC9F,gBAAgB,CAAC,iBAAiB,CAAC;MAClE,KAAK,IAAIsJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,aAAa,CAAClS,MAAM,EAAEmS,CAAC,EAAE,EAAE;QAC3CnV,QAAQ,CAAC,CAACkV,aAAa,CAACC,CAAC,CAAC,CAAC,EAAE,cAAc,CAAC;QAC5ClV,WAAW,CAAC,CAACiV,aAAa,CAACC,CAAC,CAAC,CAAC,EAAE,gBAAgB,CAAC;MACrD;IACJ,CAAC,MACI,IAAIJ,MAAM,KAAK,UAAU,EAAE;MAC5BE,WAAW,GAAG,MAAM;MACpB,IAAI,CAACD,OAAO,EAAE;QACV3B,MAAM,CAACrM,QAAQ,GAAG,KAAK;MAC3B;MACA,IAAIkO,aAAa,GAAGvD,UAAU,CAAC9F,gBAAgB,CAAC,eAAe,CAAC;MAChE,KAAK,IAAIsJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,aAAa,CAAClS,MAAM,EAAEmS,CAAC,EAAE,EAAE;QAC3CnV,QAAQ,CAAC,CAACkV,aAAa,CAACC,CAAC,CAAC,CAAC,EAAE,gBAAgB,CAAC;QAC9ClV,WAAW,CAAC,CAACiV,aAAa,CAACC,CAAC,CAAC,CAAC,EAAE,cAAc,CAAC;MACnD;IACJ;IACA,IAAI,CAAC,IAAI,CAAC1U,MAAM,CAAC6I,oBAAoB,EAAE;MACnC,IAAIpG,YAAY,GAAGmQ,MAAM,CAACnQ,YAAY;MACtC,IAAIkS,SAAS,GAAG,IAAI,CAACjC,YAAY,CAAC,CAAC;MACnC,IAAIkC,IAAI,GAAG,EAAE;MACb,KAAK,IAAIvS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsS,SAAS,CAACpS,MAAM,EAAEF,CAAC,EAAE,EAAE;QACvC,IAAIsS,SAAS,CAACtS,CAAC,CAAC,CAACgM,SAAS,CAACC,QAAQ,CAAC,eAAe,GAC/CsE,MAAM,CAAClN,eAAe,CAAC2B,WAAW,GAClC,OAAO,IACNuL,MAAM,CAACnL,KAAK,GAAG,CAAC,CAAC,CAAC,EAAE;UACrBmN,IAAI,CAACC,IAAI,CAACF,SAAS,CAACtS,CAAC,CAAC,CAAC;QAC3B;MACJ;MACA,KAAK,IAAIA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuS,IAAI,CAACrS,MAAM,EAAEF,CAAC,EAAE,EAAE;QAClCuS,IAAI,CAACvS,CAAC,CAAC,CAACuF,KAAK,CAACkN,OAAO,GAAGN,WAAW;QACnC,IAAI/R,YAAY,CAACJ,CAAC,CAAC,CAACI,YAAY,IAC5BA,YAAY,CAACJ,CAAC,CAAC,CAACI,YAAY,CAACF,MAAM,KAClC+R,MAAM,KAAK,UAAU,IAClB7R,YAAY,CAACJ,CAAC,CAAC,CAACkE,QAAQ,IACxB,IAAI,CAACrG,WAAW,CAAC,EAAE;UACvB,IAAI,CAACwT,uBAAuB,CAACY,MAAM,EAAEM,IAAI,CAACvS,CAAC,CAAC,EAAEI,YAAY,CAACJ,CAAC,CAAC,EAAE,IAAI,CAAC;QACxE;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACItC,UAAU,CAACkB,SAAS,CAAC8T,iBAAiB,GAAG,UAAUT,MAAM,EAAE;IACvD,IAAIA,MAAM,KAAK,QAAQ,EAAE;MACrB,IAAI,CAACpU,WAAW,GAAG,IAAI;MACvB,IAAI,CAACF,MAAM,CAAC8C,QAAQ,CAACkS,SAAS,CAAC,CAAC;IACpC,CAAC,MACI;MACD,IAAI,CAAC7U,aAAa,GAAG,IAAI;MACzB,IAAI,CAACH,MAAM,CAAC8C,QAAQ,CAACmS,WAAW,CAAC,CAAC;MAClC,IAAI,IAAI,CAAC9U,aAAa,IAAI,CAAC,IAAI,CAACH,MAAM,CAACgH,mBAAmB,EAAE;QACxD,IAAIkO,qBAAqB,GAAG,IAAI,CAAClV,MAAM,CAAC+H,SAAS,GAAG,IAAI,CAAC/H,MAAM,CAAC,SAAS,CAAC,CAAC0J,sBAAsB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAACtF,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,GACzI,IAAI,CAACpE,MAAM,CAAC,SAAS,CAAC,CAAC0J,sBAAsB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAACtF,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC;QAC7F,IAAI,CAACpE,MAAM,CAACwJ,aAAa,GAAG0L,qBAAqB;QACjDzK,QAAQ,CAACf,sBAAsB,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAChC,MAAM,GAAG,IAAI,CAAC1H,MAAM,CAACwJ,aAAa,GAAG,IAAI;MACnH;IACJ;IACA,IAAI,CAACtJ,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,aAAa,GAAG,KAAK;EAC9B,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIJ,UAAU,CAACkB,SAAS,CAACkU,aAAa,GAAG,UAAU1N,KAAK,EAAE;IAClD,IAAI,CAACzH,MAAM,CAAC8C,QAAQ,CAACqS,aAAa,CAAC1N,KAAK,CAAC;EAC7C,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI1H,UAAU,CAACkB,SAAS,CAACmU,eAAe,GAAG,UAAU3N,KAAK,EAAE;IACpD,IAAI,IAAI,CAACzH,MAAM,CAAC6I,oBAAoB,EAAE;MAClC,IAAI,CAAC7I,MAAM,CAACoU,2BAA2B,GAAG,IAAI;IAClD;IACA,IAAI,CAACpU,MAAM,CAAC8C,QAAQ,CAACsS,eAAe,CAAC3N,KAAK,CAAC;EAC/C,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI1H,UAAU,CAACkB,SAAS,CAACQ,UAAU,GAAG,YAAY;IAC1C,IAAI4T,aAAa,GAAGjW,OAAO,CAACkW,SAAS,CAAC,CAAC;IACvC,IAAIC,SAAS,GAAGnW,OAAO,CAACoW,eAAe;IACvC,IAAItG,OAAO,GAAG9P,OAAO,CAACqW,aAAa;IACnC,IAAIC,SAAS,GAAGtW,OAAO,CAACuW,cAAc;IACtC,IAAIhK,MAAM,GAAG0J,aAAa,GAAG,cAAc,GAAG,YAAY;IAC1DlW,YAAY,CAACyW,GAAG,CAAC,IAAI,CAAC5V,MAAM,CAAC8B,SAAS,EAAEyT,SAAS,EAAE,IAAI,CAAC9J,mBAAmB,EAAE,IAAI,CAAC;IAClFtM,YAAY,CAACyW,GAAG,CAAC,IAAI,CAAC5V,MAAM,CAAC8B,SAAS,EAAE6J,MAAM,EAAE,IAAI,CAACqE,eAAe,EAAE,IAAI,CAAC;IAC3E7Q,YAAY,CAACyW,GAAG,CAAC,IAAI,CAAC5V,MAAM,CAAC8B,SAAS,EAAE4T,SAAS,EAAE,IAAI,CAACzF,cAAc,EAAE,IAAI,CAAC;IAC7E9Q,YAAY,CAACyW,GAAG,CAAC,IAAI,CAAC5V,MAAM,CAAC8B,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC+T,WAAW,EAAE,IAAI,CAAC;IACxE,IAAI,IAAI,CAAC7V,MAAM,CAAC8V,UAAU,EAAE;MACxB3W,YAAY,CAACyW,GAAG,CAAC,IAAI,CAAC5V,MAAM,CAAC8B,SAAS,EAAEjC,KAAK,EAAE,IAAI,CAAC4N,oBAAoB,EAAE,IAAI,CAAC;MAC/EtO,YAAY,CAACyW,GAAG,CAAC,IAAI,CAAC5V,MAAM,CAAC8B,SAAS,EAAEoN,OAAO,EAAE,IAAI,CAACtB,iBAAiB,EAAE,IAAI,CAAC;IAClF;IACA,IAAI,CAAC,IAAI,CAAC5N,MAAM,CAAC8V,UAAU,EAAE;MACzB3W,YAAY,CAACyW,GAAG,CAAC,IAAI,CAAC5V,MAAM,CAAC4B,OAAO,EAAEsN,OAAO,EAAE,IAAI,CAACG,eAAe,EAAE,IAAI,CAAC;MAC1ElQ,YAAY,CAACyW,GAAG,CAACnL,QAAQ,EAAEyE,OAAO,EAAE,IAAI,CAACA,OAAO,EAAE,IAAI,CAAC;IAC3D;IACA/P,YAAY,CAACyW,GAAG,CAAC,IAAI,CAAC5V,MAAM,CAAC4B,OAAO,EAAE,WAAW,EAAE,IAAI,CAACkP,gBAAgB,EAAE,IAAI,CAAC;IAC/E3R,YAAY,CAACyW,GAAG,CAACnL,QAAQ,CAACsL,IAAI,EAAE,aAAa,EAAE,IAAI,CAACtF,YAAY,EAAE,IAAI,CAAC;IACvEtR,YAAY,CAACyW,GAAG,CAACnL,QAAQ,EAAE,SAAS,EAAE,IAAI,CAACgG,YAAY,EAAE,IAAI,CAAC;IAC9DtR,YAAY,CAACyW,GAAG,CAAC,IAAI,CAAC5V,MAAM,CAACyD,eAAe,CAACU,mBAAmB,EAAE,UAAU,EAAE,IAAI,CAACmO,kBAAkB,EAAE,IAAI,CAAC;EAChH,CAAC;EACDvS,UAAU,CAACkB,SAAS,CAAC+U,YAAY,GAAG,YAAY;IAC5C,IAAIX,aAAa,GAAGjW,OAAO,CAACkW,SAAS,CAAC,CAAC;IACvC,IAAIC,SAAS,GAAGnW,OAAO,CAACoW,eAAe;IACvC,IAAItG,OAAO,GAAG9P,OAAO,CAACqW,aAAa;IACnC,IAAIC,SAAS,GAAGtW,OAAO,CAACuW,cAAc;IACtC,IAAIhK,MAAM,GAAG0J,aAAa,GAAG,cAAc,GAAG,YAAY;IAC1D,IAAI,CAAChW,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAAC,EAAE;MACrEhF,YAAY,CAACmI,MAAM,CAAC,IAAI,CAACtH,MAAM,CAACyD,eAAe,CAACU,mBAAmB,EAAEoR,SAAS,EAAE,IAAI,CAAC9J,mBAAmB,CAAC;IAC7G;IACA,IAAI,CAACpM,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAAC8B,SAAS,CAAC,EAAE;MAC3C3C,YAAY,CAACmI,MAAM,CAAC,IAAI,CAACtH,MAAM,CAAC8B,SAAS,EAAE6J,MAAM,EAAE,IAAI,CAACqE,eAAe,CAAC;MACxE7Q,YAAY,CAACmI,MAAM,CAAC,IAAI,CAACtH,MAAM,CAAC8B,SAAS,EAAE4T,SAAS,EAAE,IAAI,CAACzF,cAAc,CAAC;MAC1E9Q,YAAY,CAACmI,MAAM,CAAC,IAAI,CAACtH,MAAM,CAAC8B,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC+T,WAAW,CAAC;MACrE1W,YAAY,CAACmI,MAAM,CAAC,IAAI,CAACtH,MAAM,CAAC8B,SAAS,EAAEyT,SAAS,EAAE,IAAI,CAAC9J,mBAAmB,CAAC;IACnF;IACA,IAAI,IAAI,CAACzL,MAAM,CAAC8V,UAAU,EAAE;MACxB,IAAI,CAACzW,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAAC8B,SAAS,CAAC,EAAE;QAC3C3C,YAAY,CAACmI,MAAM,CAAC,IAAI,CAACtH,MAAM,CAAC8B,SAAS,EAAEjC,KAAK,EAAE,IAAI,CAAC4N,oBAAoB,CAAC;QAC5EtO,YAAY,CAACmI,MAAM,CAAC,IAAI,CAACtH,MAAM,CAAC8B,SAAS,EAAEoN,OAAO,EAAE,IAAI,CAACtB,iBAAiB,CAAC;MAC/E;IACJ;IACA,IAAI,CAAC,IAAI,CAAC5N,MAAM,CAAC8V,UAAU,EAAE;MACzB,IAAI,CAACzW,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAAC4B,OAAO,CAAC,EAAE;QACzCzC,YAAY,CAACmI,MAAM,CAAC,IAAI,CAACtH,MAAM,CAAC4B,OAAO,EAAEsN,OAAO,EAAE,IAAI,CAACG,eAAe,CAAC;MAC3E;MACA,IAAI,CAAChQ,iBAAiB,CAACoL,QAAQ,CAAC,EAAE;QAC9BtL,YAAY,CAACmI,MAAM,CAACmD,QAAQ,EAAEyE,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC;MACxD;IACJ;IACA,IAAI,CAAC7P,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAAC4B,OAAO,CAAC,EAAE;MACzCzC,YAAY,CAACmI,MAAM,CAAC,IAAI,CAACtH,MAAM,CAAC4B,OAAO,EAAE,WAAW,EAAE,IAAI,CAACkP,gBAAgB,CAAC;IAChF;IACA,IAAI,CAACzR,iBAAiB,CAACoL,QAAQ,CAAC,EAAE;MAC9BtL,YAAY,CAACmI,MAAM,CAACmD,QAAQ,EAAE,SAAS,EAAE,IAAI,CAACgG,YAAY,CAAC;MAC3D,IAAI,CAACpR,iBAAiB,CAACoL,QAAQ,CAACsL,IAAI,CAAC,EAAE;QACnC5W,YAAY,CAACmI,MAAM,CAACmD,QAAQ,CAACsL,IAAI,EAAE,aAAa,EAAE,IAAI,CAACtF,YAAY,CAAC;MACxE;IACJ;IACA,IAAI,CAACpR,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAAC,EAAE;MACrEhF,YAAY,CAACmI,MAAM,CAAC,IAAI,CAACtH,MAAM,CAACyD,eAAe,CAACU,mBAAmB,EAAE,UAAU,EAAE,IAAI,CAACmO,kBAAkB,CAAC;IAC7G;EACJ,CAAC;EACD;EACAvS,UAAU,CAACkB,SAAS,CAAC4U,WAAW,GAAG,UAAUnK,CAAC,EAAE;IAC5C,IAAIA,CAAC,CAACuK,OAAO,EAAE;MACXvK,CAAC,CAACwK,cAAc,CAAC,CAAC;MAClB,IAAIC,SAAS,GAAGzK,CAAC,CAAC0K,MAAM,GAAG,CAAC;MAC5B;MACA,IAAIC,YAAY,GAAG,KAAK;MACxB,IAAI1P,IAAI,CAACqD,GAAG,CAAC0B,CAAC,CAAC0K,MAAM,CAAC,GAAG,EAAE,EAAE;QAAE;QAC3BC,YAAY,GAAG,IAAI;MACvB;MACA,IAAI,IAAI,CAAChW,eAAe,EAAE;QACtB,IAAM,IAAI,CAACD,mBAAmB,GAAG,EAAE,GAAI,IAAI,CAACC,eAAe,EAAG;UAC1DiW,YAAY,CAAC,IAAI,CAACjW,eAAe,CAAC;QACtC;QACA,IAAK,IAAI,CAACD,mBAAmB,GAAG,EAAE,IAAK,IAAI,CAACC,eAAe,IAAI,CAAC,IAAI,CAACD,mBAAmB,EAAE;UACtF,IAAI,CAACA,mBAAmB,GAAG,IAAI,CAACC,eAAe;QACnD;MACJ;MACA,IAAI,CAACA,eAAe,GAAGkW,UAAU,CAAC,YAAY;QAC1C,IAAIC,mBAAmB,GAAG7P,IAAI,CAACqD,GAAG,CAAC0B,CAAC,CAAC0K,MAAM,CAAC;QAC5C;QACA,IAAIK,kBAAkB,GAAGJ,YAAY,GAC9BG,mBAAmB,GAAG,GAAG,IAAIA,mBAAmB,GAAG,EAAE,GACrDA,mBAAmB,GAAG,CAAC,IAAIA,mBAAmB,IAAI,GAAI;QAC7D,IAAIC,kBAAkB,EAAE;UACpB,IAAI,CAACzW,MAAM,CAACkC,cAAc,CAACiO,cAAc,CAACgG,SAAS,CAAC;QACxD;MACJ,CAAC,CAACO,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC;IACtB;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI3W,UAAU,CAACkB,SAAS,CAACuL,kBAAkB,GAAG,UAAUC,MAAM,EAAE;IACxD,IAAIgH,IAAI;IACR,IAAI,IAAI,CAACzT,MAAM,CAAC6I,oBAAoB,IAAI,IAAI,CAAC7I,MAAM,CAACiH,kBAAkB,EAAE;MACpEwM,IAAI,GAAG,IAAI,CAACzT,MAAM,CAACsC,QAAQ,CAAC,IAAI,CAACqU,iBAAiB,CAAClK,MAAM,CAAC,CAAC;IAC/D,CAAC,MACI;MACDgH,IAAI,GAAG,IAAI,CAACzT,MAAM,CAACmD,eAAe,CAAC,IAAI,CAACwT,iBAAiB,CAAClK,MAAM,CAAC,CAAC;IACtE;IACA,OAAOgH,IAAI;EACf,CAAC;EACD1T,UAAU,CAACkB,SAAS,CAAC2V,aAAa,GAAG,UAAUC,IAAI,EAAEC,aAAa,EAAEC,KAAK,EAAEC,eAAe,EAAEvI,GAAG,EAAE;IAC7F,IAAI,IAAI,CAACzO,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACyE,KAAK,KAAK,IAAI,CAAClX,MAAM,CAAC4D,UAAU,CAACuT,QAAQ,EAAE;MACxG,IAAIpQ,QAAQ,GAAG0H,GAAG,CAAC6C,KAAK;MACxB,GAAG;QACC,IAAI7C,GAAG,CAAC/H,eAAe,EAAE;UACrBmQ,IAAI,GAAG,IAAI,CAACO,cAAc,CAACP,IAAI,EAAEE,KAAK,EAAEC,eAAe,CAAC;QAC5D;QACAF,aAAa,GAAG,IAAI,CAAC9W,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC;QAC5E1L,QAAQ,GAAG,IAAI,CAAC/G,MAAM,CAAC8C,QAAQ,CAACgQ,OAAO,CAAC,CAAC,CAAC5M,OAAO,CAAC2Q,IAAI,CAAC7I,aAAa,CAAC;MACzE,CAAC,QAAQ,CAAC8I,aAAa,CAAC9J,YAAY;MACpC,IAAI,CAAChN,MAAM,CAAC8C,QAAQ,CAACuU,QAAQ,CAAC,CAAC;MAC/B,IAAI,CAACrX,MAAM,CAAC8C,QAAQ,CAACwU,QAAQ,CAACvQ,QAAQ,EAAE,IAAI,CAAC/G,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACyE,KAAK,CAAC;IAC/G;IACA,OAAOL,IAAI;EACf,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI9W,UAAU,CAACkB,SAAS,CAACsW,WAAW,GAAG,UAAU7L,CAAC,EAAE;IAC5C,IAAI,CAAC1L,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACyU,iBAAiB,GAAG,IAAI,CAACxX,MAAM,CAACwX,iBAAiB;IAC3E,IAAIC,YAAY,GAAGhN,QAAQ,CAACf,sBAAsB,CAAC,gBAAgB,CAAC;IACpE,IAAIsN,eAAe,GAAG,IAAI,CAAChX,MAAM,CAACkM,UAAU,IAAI,IAAI,CAAClM,MAAM,CAACkM,UAAU,CAACwL,cAAc,IACjF,IAAI,CAAC1X,MAAM,CAACkM,UAAU,CAACwL,cAAc,CAACC,UAAU;IACpD,IAAI,CAAC,IAAI,CAAC3X,MAAM,CAACsP,iBAAiB,IAAI,CAAC0H,eAAe,EAAE;MACpD;IACJ;IACA,IAAIY,OAAO,GAAGZ,eAAe,GAAGtL,CAAC,CAACe,MAAM,CAACnN,OAAO,CAAC,YAAY,CAAC,GAAGoM,CAAC,CAACe,MAAM;IACzE,IAAI,IAAI,CAACzM,MAAM,CAAC4B,OAAO,CAACwJ,gBAAgB,CAAC,YAAY,CAAC,CAAC7I,MAAM,GAAG,CAAC,EAAE;MAC/DqV,OAAO,GAAG,IAAI,CAAC5X,MAAM,CAAC4B,OAAO,CAACwJ,gBAAgB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;IACnE;IACA,IAAIwM,OAAO,IAAI,EAAEA,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,IACzDsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,SAAS,CAAC,IAAIsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,OAAO,CAAC,CAAC,EAAE;MAC/E,IAAI,CAAC9N,mBAAmB,GAAG,CAAC,CAAC;IACjC;IACA,IAAIoX,OAAO,CAACtY,OAAO,CAAC,YAAY,CAAC,IAAIsY,OAAO,CAACtY,OAAO,CAAC,cAAc,CAAC,EAAE;MAClE,IAAI,CAACU,MAAM,CAAC6X,WAAW,CAACC,gBAAgB,CAACF,OAAO,CAAC;IACrD;IACA;IACA,IAAI,CAACG,eAAe,GAAGH,OAAO,CAACtY,OAAO,CAAC,YAAY,CAAC,GAAGsY,OAAO,CAAC5J,aAAa,CAACjH,QAAQ,GACjF;IACA6Q,OAAO,CAACtY,OAAO,CAAC,cAAc,CAAC,GAAGsY,OAAO,CAACtY,OAAO,CAAC,cAAc,CAAC,CAACyH,QAAQ,GAAG,CAAC,CAAC;IACnF,IAAIgQ,KAAK,GAAIrL,CAAC,CAAC4I,MAAM,KAAK,KAAK,GAAI,IAAI,GAAG,KAAK;IAC/C,IAAI0D,WAAW,GAAG,IAAI,CAACZ,cAAc,CAACQ,OAAO,EAAEb,KAAK,EAAEC,eAAe,CAAC;IACtE,IAAIgB,WAAW,KAAKA,WAAW,KAAK,WAAW,IAAIA,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,iBAAiB,CAAC,CAAC,EAAE;MACnG;MACC0J,WAAW,KAAK,WAAW,IAAI,IAAI,CAAChY,MAAM,CAAC8C,QAAQ,CAAClB,OAAO,CAAC8H,sBAAsB,CAAC,mBAAmB,CAAC,CAACnH,MAAM,GAAG,CAAC,GAAI,IAAI,CAACvC,MAAM,CAAC8C,QAAQ,CAACuU,QAAQ,CAAC,CAAC,GAAG,EAAE;MAC3JW,WAAW,GAAG,IAAI;IACtB;IACA,IAAIA,WAAW,IAAIJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;MAC3D,IAAI2J,QAAQ,GAAG1T,QAAQ,CAACyT,WAAW,CAACvF,YAAY,CAAC,eAAe,CAAC,EAAE,EAAE,CAAC;MACtE,IAAI/G,CAAC,CAAC4I,MAAM,KAAK,UAAU,EAAE;QACzB,OAAO2D,QAAQ,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAACjY,MAAM,CAAC8C,QAAQ,CAACG,OAAO,CAACgV,QAAQ,CAAC,CAAC,SAAS,CAAC,EAAE;UAC1EA,QAAQ,GAAGA,QAAQ,GAAG,CAAC;QAC3B;QACA,IAAIA,QAAQ,KAAK,CAAC,CAAC,EAAE;UACjBA,QAAQ,GAAG,IAAI,CAACjY,MAAM,CAACmP,mBAAmB,GAAG8I,QAAQ,GAAG,CAAC,GAAGA,QAAQ;UACpED,WAAW,GAAGvN,QAAQ,CAACf,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC/B,UAAU,CAACsQ,QAAQ,CAAC;QAC3F,CAAC,MACI;UACD,IAAIC,cAAc,GAAGzN,QAAQ,CAACf,sBAAsB,CAAC,gBAAgB,CAAC;UACtE,KAAK,IAAIrH,CAAC,GAAG6V,cAAc,CAAC3V,MAAM,GAAG,CAAC,EAAEF,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;YAChD,IAAI,CAACoI,QAAQ,CAACf,sBAAsB,CAAC,gBAAgB,CAAC,CAACrH,CAAC,CAAC,CAACgM,SAAS,CAACC,QAAQ,CAAC,UAAU,CAAC,EAAE;cACtF0J,WAAW,GAAGvN,QAAQ,CAACf,sBAAsB,CAAC,gBAAgB,CAAC,CAACrH,CAAC,CAAC;cAClE,IAAI,CAAC7B,mBAAmB,GAAG6B,CAAC;cAC5B;YACJ;UACJ;QACJ;MACJ,CAAC,MACI;QACD,OAAO,CAAC,IAAI,CAACrC,MAAM,CAAC8C,QAAQ,CAACG,OAAO,CAACgV,QAAQ,CAAC,CAAC,SAAS,CAAC,EAAE;UACvDA,QAAQ,GAAGA,QAAQ,GAAG,CAAC;QAC3B;QACAA,QAAQ,GAAG,IAAI,CAACjY,MAAM,CAACmP,mBAAmB,GAAG8I,QAAQ,GAAG,CAAC,GAAGA,QAAQ;QACpED,WAAW,GAAGvN,QAAQ,CAACf,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC/B,UAAU,CAACsQ,QAAQ,CAAC;MAC3F;IACJ;IACA,IAAI,CAACD,WAAW,IAAIJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,IAAI5C,CAAC,CAAC4I,MAAM,KAAK,KAAK,EAAE;MAClF0D,WAAW,GAAGvN,QAAQ,CAACf,sBAAsB,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC;IACnF;IACA,IAAI,CAACsO,WAAW,KAAKJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,IAAIsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,IAAIsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,YAAY,CAAC,IACvJsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,SAAS,CAAC,IAAIsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAACtO,MAAM,CAACkJ,aAAa,IAAI,IAAI,CAAClJ,MAAM,CAACmY,OAAO,CAAC5V,MAAM,GAAG,CAAC,EAAE;MAC9I,IAAI6V,SAAS,GAAG,IAAI,CAAC5X,mBAAmB,KAAK,CAAC,CAAC,GAAIkL,CAAC,CAAC4I,MAAM,KAAK,KAAK,GAAG,IAAI,CAAC9T,mBAAmB,GAAG,CAAC,GAChG,IAAI,CAACA,mBAAmB,GAAG,CAAC,GAAKkL,CAAC,CAAC4I,MAAM,KAAK,UAAU,GAAGmD,YAAY,CAAClV,MAAM,GAAG,CAAC,GAAG,CAAE;MAC3F,IAAI8V,SAAS,GAAG,KAAK;MACrB,IAAID,SAAS,KAAK,CAAC,CAAC,KAAK1M,CAAC,CAAC4I,MAAM,KAAK,UAAU,IAAK5I,CAAC,CAAC4I,MAAM,KAAK,KAAK,IAAI8D,SAAS,GAAGX,YAAY,CAAClV,MAAO,CAAC,EAAE;QAC1G,GAAG;UACC,IAAI,CAACkV,YAAY,CAACW,SAAS,CAAC,CAAC/J,SAAS,CAACC,QAAQ,CAAC,UAAU,CAAC,EAAE;YACzD0J,WAAW,GAAGP,YAAY,CAACW,SAAS,CAAC;YACrCJ,WAAW,CAAClX,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;YAC1C,IAAIkX,WAAW,CAACpV,aAAa,CAAC,QAAQ,CAAC,KAAKgV,OAAO,EAAE;cACjD;cACAlM,CAAC,CAAC4I,MAAM,KAAK,KAAK,GAAG8D,SAAS,EAAE,GAAGA,SAAS,EAAE;cAC9CJ,WAAW,GAAGP,YAAY,CAACW,SAAS,CAAC;YACzC;YACA,IAAIJ,WAAW,CAACpV,aAAa,CAAC,QAAQ,CAAC,EAAE;cACpCoV,WAAW,CAACpV,aAAa,CAAC,QAAQ,CAAC,CAAE9B,YAAY,CAAC,UAAU,EAAE,GAAG,CAAC;YACvE;YACAuX,SAAS,GAAG,IAAI;YAChB,IAAI,CAAC7X,mBAAmB,GAAG4X,SAAS;UACxC,CAAC,MACI;YACD;YACA1M,CAAC,CAAC4I,MAAM,KAAK,KAAK,GAAG8D,SAAS,EAAE,GAAGA,SAAS,EAAE;UAClD;QACJ,CAAC,QAAQ,CAACC,SAAS;MACvB;IACJ;IACA,IAAI3M,CAAC,CAAC4I,MAAM,KAAK,KAAK,IAAI,CAAC0D,WAAW,IAAK,IAAI,CAACxX,mBAAmB,KAAKiX,YAAY,CAAClV,MAAM,GAAG,CAAC,KAC1FqV,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,IAAIsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,SAAS,CAAC,IAClFsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,OAAO,CAAC,CAAE,EAAE;MAC3C,KAAK,IAAIjM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACrC,MAAM,CAAC8C,QAAQ,CAACG,OAAO,CAACV,MAAM,EAAEF,CAAC,EAAE,EAAE;QAC1D,IAAI,IAAI,CAACrC,MAAM,CAAC8C,QAAQ,CAACG,OAAO,CAACZ,CAAC,CAAC,CAAC,SAAS,CAAC,EAAE;UAC5C2V,WAAW,GAAGvN,QAAQ,CAACf,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC/B,UAAU,CAACtF,CAAC,CAAC;UAChF;QACJ;MACJ;IACJ;IACA,IAAIqJ,CAAC,CAAC4I,MAAM,KAAK,UAAU,IAAI,CAAC0D,WAAW,IAAI,CAACJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;MACxF0J,WAAW,GAAGvN,QAAQ,CAACf,sBAAsB,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC;IACnF;IACA,IAAIgC,CAAC,CAAC4I,MAAM,KAAK,UAAU,IAAIsD,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,6BAA6B,CAAC,EAAE;MACtF,KAAK,IAAIjM,CAAC,GAAG,IAAI,CAACrC,MAAM,CAAC8C,QAAQ,CAACG,OAAO,CAACV,MAAM,EAAEF,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC1D,IAAI,IAAI,CAACrC,MAAM,CAAC8C,QAAQ,CAACG,OAAO,CAACZ,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,EAAE;UAChD2V,WAAW,GAAGvN,QAAQ,CAACf,sBAAsB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC/B,UAAU,CAACtF,CAAC,GAAG,CAAC,CAAC;UACpF;QACJ;MACJ;IACJ;IACA,IAAI,CAACiW,eAAe,GAAGN,WAAW;IAClC,IAAI,CAAC3Y,iBAAiB,CAAC2Y,WAAW,CAAC,IAAI,CAAC3Y,iBAAiB,CAAC2Y,WAAW,CAAC,WAAW,CAAC,CAAC,EAAE;MACjF,IAAI,IAAI,CAAChY,MAAM,CAACmP,mBAAmB,EAAE;QACjC,IAAI,CAACoJ,aAAa,GAAGP,WAAW,CAAC,WAAW,CAAC;QAC7C,IAAI,CAACQ,gBAAgB,GAAGR,WAAW,CAAC,WAAW,CAAC,GAAG,CAAC;MACxD,CAAC,MACI;QACD,IAAI,CAACO,aAAa,GAAGP,WAAW,CAAC,WAAW,CAAC;QAC7C,IAAI,CAACQ,gBAAgB,GAAGR,WAAW,CAAC,WAAW,CAAC;MACpD;MACA,IAAI,IAAI,CAACQ,gBAAgB,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAACxY,MAAM,CAACiX,YAAY,CAAC,IAAI,CAACuB,gBAAgB,CAAC,CAAC,cAAc,CAAC,IAChG,IAAI,CAACxY,MAAM,CAACiX,YAAY,CAAC,IAAI,CAACuB,gBAAgB,CAAC,CAAC,OAAO,CAAC,KAAK,IAAI,CAACxY,MAAM,CAAC4D,UAAU,CAACjC,EAAE,EAAE;QACxF,IAAI,CAAC8W,iBAAiB,GAAG,IAAI;MACjC,CAAC,MACI;QACD,IAAI,CAACA,iBAAiB,GAAG,KAAK;MAClC;IACJ;IACA,IAAIT,WAAW,KAAK,WAAW,EAAE;MAC7B,IAAI,CAACU,WAAW,CAACd,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC;MACzC;IACJ;IACA,IAAI,OAAOI,WAAW,KAAK,QAAQ,EAAE;MACjC,IAAIJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,IAAIsJ,OAAO,CAACtY,OAAO,CAAC,mBAAmB,CAAC,IAC/EsY,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,IAAIsJ,OAAO,CAACtY,OAAO,CAAC,sBAAsB,CAAC,IACrFsY,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,6BAA6B,CAAC,EAAE;QAC3D5C,CAAC,CAACwK,cAAc,CAAC,CAAC;MACtB;MACA,IAAIa,KAAK,IAAIa,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,eAAe,CAAC,EAAE;QACtD,IAAI,CAACtO,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACvB,MAAM,CAAC,aAAa,EAAEkK,CAAC,CAAC;QAClD;MACJ;MACA,IAAIkM,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,IAAK0J,WAAW,IAAIA,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAE,IACvGsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;QAAE;QAC9C,IAAIyI,KAAK,EAAE;UACP,IAAI,IAAI,CAAC/W,MAAM,CAACmM,YAAY,CAACwM,gBAAgB,EAAE;YAC3C,IAAI1H,OAAO,GAAG,IAAI,CAACjR,MAAM,CAACmD,eAAe,CAAC,IAAI,CAAC4U,eAAe,CAAC;YAC/D,IAAIa,UAAU,GAAG,IAAI,CAAC5Y,MAAM,CAACiX,YAAY,CAACe,WAAW,CAACvF,YAAY,CAAC,eAAe,CAAC,CAAC,CAACyE,KAAK;YAC1F,IAAIjG,OAAO,CAACvK,eAAe,EAAE;cACzB,IAAIkS,UAAU,KAAK,IAAI,CAAC5Y,MAAM,CAAC4D,UAAU,CAACiV,OAAO,IAAID,UAAU,KAC3D,IAAI,CAAC5Y,MAAM,CAAC4D,UAAU,CAACkV,QAAQ,IAAIF,UAAU,KAAK,IAAI,CAAC5Y,MAAM,CAAC4D,UAAU,CAACC,UAAU,IACnF+U,UAAU,KAAK,IAAI,CAAC5Y,MAAM,CAAC4D,UAAU,CAACuT,QAAQ,IAAIyB,UAAU,KAAK,IAAI,CAAC5Y,MAAM,CAAC4D,UAAU,CAACmV,IAAI,IAC5FH,UAAU,KAAK,IAAI,CAAC5Y,MAAM,CAAC4D,UAAU,CAACgI,IAAI,IAAIgN,UAAU,KAAK,UAAU,EAAE;gBACzE,IAAI,CAAC5Y,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACkK,OAAO,CAAC,CAAC;gBACnC,IAAI,CAACjN,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACvB,MAAM,CAAC,aAAa,EAAEkK,CAAC,CAAC;cACtD,CAAC,MACI,IAAIkN,UAAU,KAAK,IAAI,CAAC5Y,MAAM,CAAC4D,UAAU,CAAC4N,IAAI,IAAIoH,UAAU,KAAK,IAAI,CAAC5Y,MAAM,CAAC4D,UAAU,CAAC+K,SAAS,EAAE;gBACpG,IAAI,CAAC3O,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACvB,MAAM,CAAC,aAAa,EAAEkK,CAAC,CAAC;cACtD,CAAC,MACI;gBACD,IAAI,CAAC1L,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACvB,MAAM,CAAC,aAAa,EAAEkK,CAAC,CAAC;gBAClD,IAAIsL,eAAe,EAAE;kBACjB,IAAI,CAAChX,MAAM,CAAC8C,QAAQ,CAACwU,QAAQ,CAAC,IAAI,CAACS,eAAe,EAAEa,UAAU,CAAC;gBACnE;cACJ;YACJ,CAAC,MACI;cACD,IAAI,CAAC5Y,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACvB,MAAM,CAAC,aAAa,EAAEkK,CAAC,CAAC;YACtD;UACJ,CAAC,MACI;YACD,IAAI,CAACsM,WAAW,IAAKA,WAAW,IAAI,CAACA,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC0J,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,6BAA6B,CAAE,EAAE;cACpJ,IAAIsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;gBAC5C,IAAI,CAACoK,WAAW,CAACd,OAAO,EAAE,QAAQ,EAAE,KAAK,CAAC;cAC9C;cACA;cACA,IAAInJ,GAAG,GAAG,IAAI,CAACzO,MAAM,CAACmD,eAAe,CAACyU,OAAO,CAAC5J,aAAa,CAACjH,QAAQ,CAAC;cACrE,IAAI8P,IAAI,GAAGmB,WAAW;cACtB,IAAIvJ,GAAG,CAAC/H,eAAe,KAClB,IAAI,CAAC1G,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACyE,KAAK,KAAK,IAAI,CAAClX,MAAM,CAAC4D,UAAU,CAACuT,QAAQ,IACnG,CAAC,IAAI,CAACnX,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACzF,YAAY,CAAC,IAC/E,IAAI,CAAChN,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACyE,KAAK,KAAK,IAAI,CAAClX,MAAM,CAAC4D,UAAU,CAACjC,EAAE,IAC7FiW,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,mBAAmB,CAAC,EAAE;gBACpD,IAAIwI,aAAa,GAAG,KAAK,CAAC;gBAC1BD,IAAI,GAAG,IAAI,CAACD,aAAa,CAACC,IAAI,EAAEC,aAAa,EAAEC,KAAK,EAAEC,eAAe,EAAEvI,GAAG,CAAC;gBAC3E,OAAO,CAAC,IAAI,CAACzO,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACzF,YAAY,EAAE;kBAC/E6J,IAAI,GAAG,IAAI,CAACO,cAAc,CAACP,IAAI,EAAEE,KAAK,EAAEC,eAAe,CAAC;gBAC5D;gBACAH,IAAI,GAAG,IAAI,CAACD,aAAa,CAACC,IAAI,EAAEC,aAAa,EAAEC,KAAK,EAAEC,eAAe,EAAEvI,GAAG,CAAC;cAC/E,CAAC,MACI,IAAI,CAACuJ,WAAW,IAAIJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,mBAAmB,CAAC,EAAE;gBACtE,IAAI,CAACtO,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACvB,MAAM,CAAC,aAAa,EAAEkK,CAAC,CAAC;cACtD;YACJ;UACJ;QACJ,CAAC,MACI;UACD,IAAIsM,WAAW,IAAI,CAACA,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,IAAI0J,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,IAC1G,CAAC0J,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;YACtD;YACA,IAAIG,GAAG,GAAG,IAAI,CAACzO,MAAM,CAACmD,eAAe,CAACyU,OAAO,CAAC5J,aAAa,CAACjH,QAAQ,CAAC;YACrE,IAAI8P,IAAI,GAAGmB,WAAW;YACtB,IAAIvJ,GAAG,CAAC/H,eAAe,KAClB,IAAI,CAAC1G,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACyE,KAAK,KAAK,IAAI,CAAClX,MAAM,CAAC4D,UAAU,CAACuT,QAAQ,IACnG,CAAC,IAAI,CAACnX,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACzF,YAAY,CAAC,IAC/E,IAAI,CAAChN,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACyE,KAAK,KAAK,IAAI,CAAClX,MAAM,CAAC4D,UAAU,CAACjC,EAAE,IAC7FiW,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,mBAAmB,CAAC,EAAE;cACpD,IAAIwI,aAAa,GAAG,KAAK,CAAC;cAC1BD,IAAI,GAAG,IAAI,CAACD,aAAa,CAACC,IAAI,EAAEC,aAAa,EAAEC,KAAK,EAAEC,eAAe,EAAEvI,GAAG,CAAC;cAC3E,OAAO,CAAC,IAAI,CAACzO,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACzF,YAAY,EAAE;gBAC/E6J,IAAI,GAAG,IAAI,CAACO,cAAc,CAACP,IAAI,EAAEE,KAAK,EAAEC,eAAe,CAAC;cAC5D;cACAH,IAAI,GAAG,IAAI,CAACD,aAAa,CAACC,IAAI,EAAEC,aAAa,EAAEC,KAAK,EAAEC,eAAe,EAAEvI,GAAG,CAAC;YAC/E,CAAC,MACI,IAAIlK,QAAQ,CAACsS,IAAI,CAAC7I,aAAa,CAACyE,YAAY,CAAC,eAAe,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC,IACzElO,QAAQ,CAACsS,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC,IACtD,IAAI,CAACzS,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACyE,KAAK,KAAK,IAAI,CAAClX,MAAM,CAAC4D,UAAU,CAACjC,EAAE,IAChGiW,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,mBAAmB,CAAC,EAAE;cACjD;cACA,IAAIvH,QAAQ,GAAG6Q,OAAO,CAAC5J,aAAa,CAACjH,QAAQ;cAC7C,IAAImK,UAAU,GAAG,IAAI,CAAC8H,iBAAiB,CAACjS,QAAQ,EAAEgQ,KAAK,EAAE,IAAI,CAAC;cAC9DF,IAAI,GAAG,IAAI,CAACoC,eAAe,CAAC/H,UAAU,EAAE6F,KAAK,CAAC;cAC9C,IAAI9F,OAAO,GAAG,IAAI,CAACjR,MAAM,CAACsC,QAAQ,CAACiC,QAAQ,CAAC2M,UAAU,CAACuB,YAAY,CAAC,eAAe,CAAC,EAAE,EAAE,CAAC,CAAC;cAC1F,IAAIxB,OAAO,CAACvK,eAAe,KAAK,CAAC,IAAI,CAAC1G,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACzF,YAAY,IACtG,IAAI,CAAChN,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACyE,KAAK,KAC9D,IAAI,CAAClX,MAAM,CAAC4D,UAAU,CAACuT,QAAQ,CAAC,EAAE;gBACtC,IAAIL,aAAa,GAAG,KAAK,CAAC;gBAC1BD,IAAI,GAAG,IAAI,CAACD,aAAa,CAACC,IAAI,EAAEC,aAAa,EAAEC,KAAK,EAAEC,eAAe,EAAE/F,OAAO,CAAC;gBAC/E,OAAO,CAAC,IAAI,CAACjR,MAAM,CAACiX,YAAY,CAACJ,IAAI,CAACpE,YAAY,CAAC,eAAe,CAAC,CAAC,CAACzF,YAAY,EAAE;kBAC/E6J,IAAI,GAAG,IAAI,CAACO,cAAc,CAACP,IAAI,EAAEE,KAAK,EAAEC,eAAe,CAAC;gBAC5D;gBACAH,IAAI,GAAG,IAAI,CAACD,aAAa,CAACC,IAAI,EAAEC,aAAa,EAAEC,KAAK,EAAEC,eAAe,EAAE/F,OAAO,CAAC;cACnF,CAAC,MACI;gBACD,IAAI,CAACjR,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACvB,MAAM,CAAC,aAAa,EAAEkK,CAAC,CAAC;cACtD;YACJ,CAAC,MACI;cACD,IAAI,CAAC1L,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACvB,MAAM,CAAC,aAAa,EAAEkK,CAAC,CAAC;YACtD;UACJ;QACJ;MACJ;MACA,IAAI,IAAI,CAAC1L,MAAM,CAAC4B,OAAO,CAACwJ,gBAAgB,CAAC,YAAY,CAAC,CAAC7I,MAAM,GAAG,CAAC,EAAE;QAC/D,IAAI,CAACmW,WAAW,CAAC,IAAI,CAAC1Y,MAAM,CAAC4B,OAAO,CAACwJ,gBAAgB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,KAAK,CAAC;MAC5F;MACA,IAAI,EAAE,IAAI,CAACpL,MAAM,CAACkM,UAAU,IAAI,IAAI,CAAClM,MAAM,CAACkM,UAAU,CAACwL,cAAc,IAC9D,CAACrY,iBAAiB,CAAC,IAAI,CAACW,MAAM,CAACkM,UAAU,CAACwL,cAAc,CAACwB,YAAY,CAAC,CAAC,EAAE;QAC5E,IAAIlB,WAAW,EAAE;UACb,IAAIJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,EAAE;YACzC,IAAI,CAACoK,WAAW,CAACd,OAAO,EAAE,QAAQ,EAAE,KAAK,CAAC;UAC9C,CAAC,MACI;YACD,IAAI,CAACc,WAAW,CAACd,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC;UAC7C;UACA,IAAKI,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,IAAIsJ,OAAO,CAACuB,kBAAkB,IAAI,CAACvB,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,6BAA6B,CAAC,IACrIsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,yBAAyB,CAAC,EAAE;YAC1D,IAAI,CAACsJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,EAAE;cAC1C,IAAI,CAACtO,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAACvB,MAAM,CAAC,aAAa,EAAEkK,CAAC,CAAC;cAClD,IAAI0N,OAAO,GAAG3Z,QAAQ,CAAC,aAAa,EAAE,IAAI,CAACO,MAAM,CAAC8C,QAAQ,CAACC,IAAI,CAAC;cAChEqW,OAAO,CAACC,WAAW,CAACzX,OAAO,GAAGoW,WAAW;cACzCoB,OAAO,CAACC,WAAW,CAACC,cAAc,GAAGtB,WAAW;cAChD;cACAoB,OAAO,CAAC/G,OAAO,CAACkH,MAAM,CAACC,OAAO,GAAG,CAACxB,WAAW,CAAChK,aAAa,CAACjH,QAAQ,EAAEiR,WAAW,CAAC5G,SAAS,CAAC;YAChG;YACA,IAAI,CAACsH,WAAW,CAACV,WAAW,EAAE,KAAK,EAAE,KAAK,CAAC;UAC/C,CAAC,MACI;YACD,IAAIA,WAAW,KAAKA,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,IAAI0J,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,IAC/G0J,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE;cACjD,IAAI,CAACoK,WAAW,CAACd,OAAO,EAAE,QAAQ,EAAE,KAAK,CAAC;cAC1C,IAAI,CAACI,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;gBACnD,IAAI,CAACoK,WAAW,CAACV,WAAW,EAAE,KAAK,EAAE,KAAK,CAAC;cAC/C;cACA,IAAIJ,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,YAAY,CAAC,EAAE;gBAC1C5C,CAAC,CAACwK,cAAc,CAAC,CAAC;cACtB;YACJ,CAAC,MACI;cACD,IAAI,CAACwC,WAAW,CAACV,WAAW,EAAE,KAAK,EAAE,IAAI,CAAC;YAC9C;UACJ;UACA,IAAI,CAAChY,MAAM,CAAC6X,WAAW,CAACC,gBAAgB,CAACE,WAAW,CAAC;QACzD;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIjY,UAAU,CAACkB,SAAS,CAACmW,cAAc,GAAG,UAAUQ,OAAO,EAAEb,KAAK,EAAEC,eAAe,EAAE;IAC7E,IAAIY,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,6BAA6B,CAAC,IAAIyI,KAAK,EAAE;MACpE,IAAI7F,UAAU,GAAG,IAAI,CAAC8H,iBAAiB,CAAC,CAAC,CAAC,EAAEjC,KAAK,EAAE,IAAI,CAAC;MACxD,OAAO,IAAI,CAACkC,eAAe,CAAC/H,UAAU,EAAE6F,KAAK,CAAC;IAClD;IACA,IAAIiB,WAAW,GAAGjB,KAAK,GAAGa,OAAO,CAACuB,kBAAkB,GAAGvB,OAAO,CAAC6B,sBAAsB;IACrF,IAAI7B,OAAO,CAAC5J,aAAa,CAACK,SAAS,CAACC,QAAQ,CAAC,0BAA0B,CAAC,EAAE;MACtE,IAAI,IAAI,CAACtO,MAAM,CAAC0Z,aAAa,CAACC,UAAU,IAAI5C,KAAK,EAAE;QAC/C,OAAOa,OAAO,CAAC5J,aAAa,CAACmL,kBAAkB;MACnD,CAAC,MACI,IAAI,CAACpC,KAAK,IAAI,IAAI,CAAC/W,MAAM,CAAC0Z,aAAa,CAACE,SAAS,EAAE;QACpD,OAAOhC,OAAO,CAAC5J,aAAa,CAACyL,sBAAsB;MACvD;IACJ;IACA,OAAOzB,WAAW,IAAIA,WAAW,CAAChK,aAAa,CAACK,SAAS,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAE;MACzE,IAAI,CAAC0J,WAAW,CAAC6B,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC7B,WAAW,CAAC6B,OAAO,CAAC,gBAAgB,CAAC,EAAE;QAC3E,OAAO7B,WAAW;MACtB;MACAA,WAAW,GAAGjB,KAAK,GAAGiB,WAAW,CAACmB,kBAAkB,GAAGnB,WAAW,CAACyB,sBAAsB;IAC7F;IACA,IAAI,CAACpa,iBAAiB,CAAC2Y,WAAW,CAAC,KAAKA,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,0BAA0B,CAAC,IAC3F0J,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,kCAAkC,CAAC,CAAC,EAAE;MACxE,IAAIsE,MAAM,GAAG,IAAI,CAAC5S,MAAM,CAACmD,eAAe,CAAC,IAAI,CAAC4U,eAAe,CAAC;MAC9D,IAAI,CAAC1Y,iBAAiB,CAACuT,MAAM,CAAClN,eAAe,CAACoU,QAAQ,CAAC,IAAIlH,MAAM,CAAClN,eAAe,CAACoU,QAAQ,CAACvX,MAAM,GAAG,CAAC,EAAE;QACnGyV,WAAW,GAAGA,WAAW,CAAC3J,SAAS,CAACC,QAAQ,CAAC,kCAAkC,CAAC,GAC1E0J,WAAW,CAAChK,aAAa,CAACmL,kBAAkB,GAC5CnB,WAAW,CAACtO,sBAAsB,CAAC,iCAAiC,CAAC,CAAC,CAAC,CAAC;MAClF;IACJ;IACA,IAAI,IAAI,CAACqQ,mBAAmB,CAAC/B,WAAW,CAAC,EAAE;MACvC,OAAOA,WAAW;IACtB,CAAC,MACI;MACD,IAAIjR,QAAQ,GAAG,CAAC,CAAC;MACjB,IAAImK,UAAU,GAAG,IAAI;MACrB,IAAI8I,YAAY,GAAG,KAAK,CAAC;MACzB,IAAIpC,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,IAAI0I,eAAe,IAAI,IAAI,CAAChX,MAAM,CAACmM,YAAY,CAACwM,gBAAgB,EAAE;QACzG;QACA5R,QAAQ,GAAG6Q,OAAO,CAAC5J,aAAa,CAACjH,QAAQ;QACzCmK,UAAU,GAAG,IAAI,CAAC8H,iBAAiB,CAACjS,QAAQ,EAAEgQ,KAAK,EAAE,IAAI,CAAC;QAC1DiD,YAAY,GAAG,IAAI,CAACf,eAAe,CAAC/H,UAAU,EAAE6F,KAAK,CAAC;QACtD,OAAOiD,YAAY;MACvB,CAAC,MACI,IAAIpC,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,EAAE;QAC9C;QACAvH,QAAQ,GAAG6Q,OAAO,CAAC5J,aAAa,CAACjH,QAAQ;QACzC,IAAIgQ,KAAK,EAAE;UACP7F,UAAU,GAAG,IAAI,CAAClR,MAAM,CAACkH,aAAa,CAACH,QAAQ,CAAC;UAChD,IAAI,IAAI,CAAC/G,MAAM,CAAC8C,QAAQ,CAAClB,OAAO,CAAC8H,sBAAsB,CAAC,mBAAmB,CAAC,CAACnH,MAAM,GAAG,CAAC,EAAE;YACrF2O,UAAU,GAAG,IAAI,CAAC8H,iBAAiB,CAACjS,QAAQ,EAAEgQ,KAAK,EAAE,IAAI,CAAC;YAC1D,IAAIkD,cAAc,GAAG,IAAI,CAAChB,eAAe,CAAC/H,UAAU,EAAE6F,KAAK,CAAC;YAC5D,OAAOkD,cAAc;UACzB,CAAC,MACI;YACD,IAAI,IAAI,CAACF,mBAAmB,CAAC7I,UAAU,EAAE,wBAAwB,CAAC,EAAE;cAChE,OAAOA,UAAU,CAACxH,sBAAsB,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;YACzE,CAAC,MACI,IAAI,IAAI,CAACqQ,mBAAmB,CAAC7I,UAAU,EAAE,0BAA0B,CAAC,EAAE;cACvE,OAAOA,UAAU,CAACxH,sBAAsB,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC;YAC3E,CAAC,MACI,IAAI,IAAI,CAACqQ,mBAAmB,CAAC7I,UAAU,EAAE,yBAAyB,CAAC,EAAE;cACtE,OAAOA,UAAU,CAACxH,sBAAsB,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC;YAC1E;UACJ;QACJ,CAAC,MACI;UACDwH,UAAU,GAAG,IAAI,CAAC8H,iBAAiB,CAACjS,QAAQ,EAAEgQ,KAAK,EAAE,KAAK,CAAC;UAC3D,IAAI,IAAI,CAACgD,mBAAmB,CAAC7I,UAAU,EAAE,yBAAyB,CAAC,EAAE;YACjE,OAAOA,UAAU,CAACxH,sBAAsB,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC;UAC1E,CAAC,MACI,IAAI,IAAI,CAACqQ,mBAAmB,CAAC7I,UAAU,EAAE,0BAA0B,CAAC,EAAE;YACvE,OAAOA,UAAU,CAACxH,sBAAsB,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC;UAC3E,CAAC,MACI,IAAI,IAAI,CAACqQ,mBAAmB,CAAC7I,UAAU,EAAE,wBAAwB,CAAC,EAAE;YACrE,OAAOA,UAAU,CAACxH,sBAAsB,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;UACzE;QACJ;MACJ,CAAC,MACI,IAAIkO,OAAO,CAAC5J,aAAa,CAACK,SAAS,CAACC,QAAQ,CAAC,kBAAkB,CAAC,IACjEsJ,OAAO,CAAC5J,aAAa,CAACA,aAAa,CAACK,SAAS,CAACC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;QAC5E;QACAvH,QAAQ,GAAGzH,OAAO,CAACsY,OAAO,EAAE,cAAc,CAAC,CAAC7Q,QAAQ;QACpD,IAAIgQ,KAAK,EAAE;UACP,IAAI,CAACA,KAAK,IAAI,IAAI,CAAC/W,MAAM,CAAC4I,mBAAmB,IAAI,IAAI,CAAC5I,MAAM,CAAC6I,oBAAoB,EAAE;YAC/E;YACA,IAAIqR,SAAS,GAAG,IAAI,CAACla,MAAM,CAACmD,eAAe,CAAC4D,QAAQ,CAAC;YACrDA,QAAQ,GAAG,IAAI,CAAC/G,MAAM,CAACsC,QAAQ,CAAC4D,OAAO,CAACgU,SAAS,CAAC;UACtD;UACAhJ,UAAU,GAAG,IAAI,CAAC8H,iBAAiB,CAACjS,QAAQ,EAAEgQ,KAAK,EAAE,IAAI,CAAC;QAC9D,CAAC,MACI;UACD7F,UAAU,GAAG,IAAI,CAAClR,MAAM,CAAC8C,QAAQ,CAACgQ,OAAO,CAAC,CAAC,CAAC/L,QAAQ,CAAC;QACzD;QACA,IAAIoT,cAAc,GAAG,IAAI,CAAClB,eAAe,CAAC/H,UAAU,EAAE6F,KAAK,CAAC;QAC5D,OAAOoD,cAAc;MACzB;MACAnC,WAAW,GAAGJ,OAAO;IACzB;IACA,OAAO,IAAI;EACf,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI7X,UAAU,CAACkB,SAAS,CAAC+X,iBAAiB,GAAG,UAAUjS,QAAQ,EAAEgQ,KAAK,EAAEqD,UAAU,EAAE;IAC5E,IAAIrP,eAAe,GAAG,IAAI,CAAC/K,MAAM,CAACgG,kBAAkB,CAAC,IAAI,CAAChG,MAAM,CAACmD,eAAe,CAAC;IACjF,IAAIkX,WAAW,GAAG,IAAI,CAACra,MAAM,CAACmD,eAAe,CAAC4D,QAAQ,CAAC;IACvD,IAAIuT,mBAAmB,GAAGvP,eAAe,CAAC7E,OAAO,CAACmU,WAAW,CAAC;IAC9D,IAAIE,UAAU,GAAGxD,KAAK,GAAGhM,eAAe,CAACuP,mBAAmB,GAAG,CAAC,CAAC,GAAGvP,eAAe,CAACuP,mBAAmB,GAAG,CAAC,CAAC;IAC5G,IAAIE,YAAY,GAAG,IAAI,CAACxa,MAAM,CAACmD,eAAe,CAAC+C,OAAO,CAACqU,UAAU,CAAC;IAClE,IAAIA,UAAU,EAAE;MACZ,OAAOH,UAAU,GAAG,IAAI,CAACpa,MAAM,CAAC8C,QAAQ,CAACgQ,OAAO,CAAC,CAAC,CAAC0H,YAAY,CAAC,GAAG,IAAI,CAACxa,MAAM,CAACkH,aAAa,CAACsT,YAAY,CAAC;IAC9G,CAAC,MACI;MACD,OAAO,IAAI;IACf;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIza,UAAU,CAACkB,SAAS,CAAC8Y,mBAAmB,GAAG,UAAUnC,OAAO,EAAEhX,SAAS,EAAE;IACrE,IAAIgX,OAAO,IAAIA,OAAO,CAACvJ,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,EAAE;MACpD,OAAO,IAAI;IACf;IACA,IAAIsJ,OAAO,IAAIhX,SAAS,EAAE;MACtB,IAAI6Z,cAAc,GAAG7C,OAAO,CAAClO,sBAAsB,CAAC9I,SAAS,CAAC,CAAC,CAAC,CAAC;MACjE,OAAQ6Z,cAAc,IAAIA,cAAc,CAACC,aAAa,CAAC,CAAC,GAAI,IAAI,GAAG,KAAK;IAC5E,CAAC,MACI,IAAI9C,OAAO,EAAE;MACd,OAAQ,CAACvY,iBAAiB,CAACuY,OAAO,CAAC,IAAIA,OAAO,CAAC8C,aAAa,CAAC,CAAC,GAAI,IAAI,GAAG,KAAK;IAClF;IACA,OAAO,KAAK;EAChB,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACI3a,UAAU,CAACkB,SAAS,CAACgY,eAAe,GAAG,UAAU/H,UAAU,EAAE6F,KAAK,EAAE;IAChE,IAAIiD,YAAY;IAChB,IAAI9I,UAAU,EAAE;MACZ8I,YAAY,GAAGjD,KAAK,GAAG7F,UAAU,CAAC9M,QAAQ,CAAC,CAAC,CAAC,GAAG8M,UAAU,CAAC9M,QAAQ,CAAC8M,UAAU,CAAC9M,QAAQ,CAAC7B,MAAM,GAAG,CAAC,CAAC;MACnG,OAAOyX,YAAY,EAAE;QACjB,IAAI,CAACA,YAAY,CAACH,OAAO,CAAC,SAAS,CAAC,IAAI,CAACG,YAAY,CAACH,OAAO,CAAC,gBAAgB,CAAC,EAAE;UAC7E,OAAOG,YAAY;QACvB;QACAA,YAAY,GAAGjD,KAAK,GAAGiD,YAAY,CAACb,kBAAkB,GAAGa,YAAY,CAACP,sBAAsB;MAChG;IACJ,CAAC,MACI;MACD,OAAO,WAAW;IACtB;IACA,OAAOO,YAAY;EACvB,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIja,UAAU,CAACkB,SAAS,CAACyX,WAAW,GAAG,UAAU9W,OAAO,EAAE+Y,KAAK,EAAEC,cAAc,EAAEC,SAAS,EAAE;IACpF,IAAID,cAAc,EAAE;MAChB,IAAIZ,YAAY,GAAG,IAAI;MACvB,IAAIpY,OAAO,CAACyM,SAAS,CAACC,QAAQ,CAAC,wBAAwB,CAAC,IACpD1M,OAAO,CAACyM,SAAS,CAACC,QAAQ,CAAC,yBAAyB,CAAC,EAAE;QACvD0L,YAAY,GAAGpY,OAAO,CAACkZ,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;MAC1D,CAAC,MACI,IAAIlZ,OAAO,CAACyM,SAAS,CAACC,QAAQ,CAAC,0BAA0B,CAAC,IACxD1M,OAAO,CAACyM,SAAS,CAACC,QAAQ,CAAC,iCAAiC,CAAC,EAAE;QAClE;QACA,IAAIvH,QAAQ,GAAGzH,OAAO,CAACsC,OAAO,EAAE,cAAc,CAAC,CAACmF,QAAQ;QACxD,IAAIvE,IAAI,GAAG,IAAI,CAACxC,MAAM,CAACmD,eAAe,CAAC4D,QAAQ,CAAC;QAChD,IAAInG,SAAS,GAAG4B,IAAI,CAACkE,eAAe,GAAGlE,IAAI,CAACkD,eAAe,CAACqV,cAAc,GAAG,wBAAwB,GACjG,+BAA+B,GAC/BvY,IAAI,CAACkD,eAAe,CAACsV,WAAW,GAAG,mBAAmB,GAAG,CAAC3b,iBAAiB,CAACmD,IAAI,CAACkD,eAAe,CAACoU,QAAQ,CAAC,IACnGtX,IAAI,CAACkD,eAAe,CAACoU,QAAQ,CAACvX,MAAM,GAAG,CAAC,GAAG,qBAAqB,GAAG,uBAAuB;QACrGyX,YAAY,GAAGpY,OAAO,CAAC8H,sBAAsB,CAAC9I,SAAS,CAAC,CAAC,CAAC,CAAC;QAC3D,IAAIvB,iBAAiB,CAAC2a,YAAY,CAAC,EAAE;UACjCA,YAAY,GAAGpY,OAAO;QAC1B;MACJ;MACA,IAAIA,OAAO,CAACyM,SAAS,CAACC,QAAQ,CAAC,8BAA8B,CAAC,IAAI1M,OAAO,CAACyM,SAAS,CAACC,QAAQ,CAAC,6BAA6B,CAAC,IAAI1M,OAAO,CAACyM,SAAS,CAACC,QAAQ,CAAC,kBAAkB,CAAC,IAAI1M,OAAO,CAACyM,SAAS,CAACC,QAAQ,CAAC,6BAA6B,CAAC,EAAE;QACxO,IAAIqM,KAAK,KAAK,KAAK,EAAE;UACjB/Y,OAAO,CAACd,YAAY,CAAC,UAAU,EAAE,GAAG,CAAC;UACrCvB,QAAQ,CAAC,CAACqC,OAAO,CAAC,EAAE,oBAAoB,CAAC;UACzCA,OAAO,CAAC+Y,KAAK,CAAC,CAAC;QACnB,CAAC,MACI;UACD,IAAIE,SAAS,KAAK,WAAW,IAAIA,SAAS,KAAK,SAAS,EAAE;YACtDrb,WAAW,CAAC,CAACoC,OAAO,CAAC,EAAE,oBAAoB,CAAC;YAC5CA,OAAO,CAACd,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;YACtCc,OAAO,CAACqZ,IAAI,CAAC,CAAC;UAClB;QACJ;MACJ;MACA,IAAIN,KAAK,KAAK,KAAK,IAAI,CAACtb,iBAAiB,CAAC2a,YAAY,CAAC,EAAE;QACrDpY,OAAO,CAACd,YAAY,CAAC,UAAU,EAAE,GAAG,CAAC;QACrCvB,QAAQ,CAAC,CAACya,YAAY,CAAC,EAAE,oBAAoB,CAAC;QAC9CpY,OAAO,CAAC+Y,KAAK,CAAC,CAAC;QACf,IAAI,CAAC/K,cAAc,GAAGoK,YAAY;MACtC,CAAC,MACI,IAAI,CAAC3a,iBAAiB,CAAC2a,YAAY,CAAC,IAAKa,SAAS,KAAK,WAAW,IAAIA,SAAS,KAAK,SAAU,EAAE;QACjGrb,WAAW,CAAC,CAACwa,YAAY,CAAC,EAAE,oBAAoB,CAAC;QACjDpY,OAAO,CAACd,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;QACtCc,OAAO,CAACqZ,IAAI,CAAC,CAAC;MAClB;IACJ,CAAC,MACI;MACD,IAAIN,KAAK,KAAK,KAAK,EAAE;QACjB/Y,OAAO,CAACd,YAAY,CAAC,UAAU,EAAE,GAAG,CAAC;QACrCvB,QAAQ,CAAC,CAACqC,OAAO,CAAC,EAAE,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAC7CA,OAAO,CAAC+Y,KAAK,CAAC,CAAC;MACnB,CAAC,MACI;QACD/Y,OAAO,CAACd,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;QACtCtB,WAAW,CAAC,CAACoC,OAAO,CAAC,EAAE,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAChDA,OAAO,CAACqZ,IAAI,CAAC,CAAC;MAClB;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIlb,UAAU,CAACkB,SAAS,CAAC0V,iBAAiB,GAAG,UAAUlK,MAAM,EAAE;IACvD,IAAIgC,GAAG;IACP,IAAIxI,WAAW;IACf,IAAI,CAACwG,MAAM,CAAC4B,SAAS,CAACC,QAAQ,CAAC3O,GAAG,CAAC4O,oBAAoB,CAAC,EAAE;MACtDE,GAAG,GAAGnP,OAAO,CAACmN,MAAM,EAAE,MAAM,GAAG9M,GAAG,CAAC4O,oBAAoB,CAAC;IAC5D,CAAC,MACI;MACDE,GAAG,GAAGhC,MAAM;IAChB;IACA,IAAIpN,iBAAiB,CAACoP,GAAG,CAAC,EAAE;MACxBA,GAAG,GAAGnP,OAAO,CAACmN,MAAM,EAAE,KAAK,GAAG9M,GAAG,CAAC+M,QAAQ,CAAC;MAC3CzG,WAAW,GAAG,EAAE,CAACiV,KAAK,CAACC,IAAI,CAAC,IAAI,CAACnb,MAAM,CAACyD,eAAe,CAACU,mBAAmB,CAACwD,UAAU,CAAC,CAACzB,OAAO,CAACuI,GAAG,CAAC;IACxG,CAAC,MACI;MACD,IAAI9M,EAAE,GAAG8M,GAAG,CAACgE,YAAY,CAAC,aAAa,CAAC;MACxC,IAAIG,MAAM,GAAG,IAAI,CAAC5S,MAAM,CAACqG,aAAa,CAAC1E,EAAE,CAAC;MAC1C,IAAI,IAAI,CAAC3B,MAAM,CAAC6I,oBAAoB,IAAI,IAAI,CAAC7I,MAAM,CAACiH,kBAAkB,EAAE;QACpEhB,WAAW,GAAG,IAAI,CAACjG,MAAM,CAACsC,QAAQ,CAAC4D,OAAO,CAAC0M,MAAM,CAAC;MACtD,CAAC,MACI;QACD,IAAI,IAAI,CAAC5S,MAAM,CAACob,eAAe,IAAI,IAAI,CAACpb,MAAM,CAACob,eAAe,CAACC,MAAM,CAACC,WAAW,IAC1E,IAAI,CAACtb,MAAM,CAACob,eAAe,CAACC,MAAM,CAACC,WAAW,CAACC,kBAAkB,IACjE,IAAI,CAACvb,MAAM,CAACob,eAAe,CAACC,MAAM,CAACC,WAAW,CAACC,kBAAkB,CAACC,YAAY,IAC9E,IAAI,CAACxb,MAAM,CAACob,eAAe,CAACK,WAAW,EAAE;UAC5CxV,WAAW,GAAG,IAAI,CAACjG,MAAM,CAAC0b,GAAG,CAACxV,OAAO,CAAC0M,MAAM,CAAClN,eAAe,CAACY,MAAM,CAAC9B,QAAQ,CAAC,CAAC,CAAC;QACnF,CAAC,MACI;UACDyB,WAAW,GAAG,IAAI,CAACjG,MAAM,CAACmD,eAAe,CAAC+C,OAAO,CAAC0M,MAAM,CAAC;QAC7D;MACJ;IACJ;IACA,OAAO3M,WAAW;EACtB,CAAC;EACDlG,UAAU,CAACkB,SAAS,CAACM,OAAO,GAAG,YAAY;IACvC,IAAI,CAAC+J,mBAAmB,CAAC,CAAC;IAC1B,IAAI,CAAC0K,YAAY,CAAC,CAAC;IACnB,IAAI,CAACrV,kBAAkB,GAAG,IAAI;IAC9B,IAAI,CAACyH,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACK,aAAa,GAAG,IAAI;IACzB,IAAI,CAAC/H,sBAAsB,GAAG,IAAI;IAClC,IAAI,CAAC8H,kBAAkB,GAAG,IAAI;IAC9B,IAAI,CAACnJ,iBAAiB,CAAC,IAAI,CAAC2J,YAAY,CAAC,EAAE;MACvC,IAAI,CAACA,YAAY,CAACzH,OAAO,CAAC,CAAC;MAC3B,IAAI,CAACyH,YAAY,GAAG,IAAI;IAC5B;EACJ,CAAC;EACD,OAAOjJ,UAAU;AACrB,CAAC,CAAC,CAAE;AACJ,SAASA,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}