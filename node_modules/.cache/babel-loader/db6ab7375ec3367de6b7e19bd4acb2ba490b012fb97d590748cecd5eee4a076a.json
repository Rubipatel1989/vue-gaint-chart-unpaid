{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport { select, isNullOrUndefined, Browser, addClass, removeClass, EventHandler, closest, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport { pageYOffset, hasClass, isIDevice } from '../base/util';\nimport { BaseQuickToolbar } from './base-quick-toolbar';\nimport { PopupRenderer } from '../renderer/popup-renderer';\nimport { CLS_INLINE_POP, CLS_INLINE, CLS_VID_CLICK_ELEM } from '../base/classes';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\nvar QuickToolbar = /** @class */function () {\n  function QuickToolbar(parent, locator) {\n    this.debounceTimeout = 1000;\n    this.parent = parent;\n    this.locator = locator;\n    this.renderFactory = this.locator.getService('rendererFactory');\n    this.renderFactory.addRenderer(RenderType.Popup, new PopupRenderer(this.parent));\n    this.addEventListener();\n    this.isDestroyed = false;\n  }\n  QuickToolbar.prototype.formatItems = function (items) {\n    var formattedItems = [];\n    items.forEach(function (item) {\n      if (typeof item === 'string') {\n        switch (item.toLocaleLowerCase()) {\n          case 'open':\n            formattedItems.push('openLink');\n            break;\n          case 'edit':\n            formattedItems.push('editLink');\n            break;\n          case 'unlink':\n            formattedItems.push('removeLink');\n            break;\n          default:\n            formattedItems.push(item);\n            break;\n        }\n      } else {\n        formattedItems.push(item);\n      }\n    });\n    return formattedItems;\n  };\n  QuickToolbar.prototype.getQTBarOptions = function (popType, mode, items, type) {\n    return {\n      popupType: popType,\n      toolbarItems: items,\n      mode: mode,\n      renderType: type,\n      cssClass: this.parent.getCssClass()\n    };\n  };\n  /**\n   * createQTBar method\n   *\n   * @param {string} popupType - specifies the string value\n   * @param {string} mode - specifies the string value.\n   * @param {string} items - specifies the string.\n   * @param {RenderType} type - specifies the render type.\n   * @returns {BaseQuickToolbar} - specifies the quick toolbar\n   * @hidden\n    */\n  QuickToolbar.prototype.createQTBar = function (popupType, mode, items, type) {\n    if (items.length < 1) {\n      return null;\n    }\n    var qTBar = new BaseQuickToolbar(this.parent, this.locator);\n    qTBar.render(this.getQTBarOptions(popupType, mode, this.formatItems(items), type));\n    return qTBar;\n  };\n  QuickToolbar.prototype.initializeQuickToolbars = function () {\n    this.parent.quickToolbarModule = this;\n    this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n    if (this.parent.inlineMode.enable && this.parent.inlineMode.onSelection && isIDevice()) {\n      EventHandler.add(this.contentRenderer.getDocument(), 'selectionchange', this.selectionChangeHandler, this);\n    }\n  };\n  // eslint-disable-next-line\n  QuickToolbar.prototype.onMouseDown = function (e) {\n    this.parent.isBlur = false;\n    this.parent.isRTE = true;\n  };\n  QuickToolbar.prototype.keyUpQT = function (e) {\n    if (e.which === 27) {\n      this.hideQuickToolbars();\n    }\n  };\n  QuickToolbar.prototype.renderQuickToolbars = function () {\n    if (this.linkQTBar || this.imageQTBar || this.audioQTBar || this.videoQTBar || this.textQTBar || this.tableQTBar) {\n      return;\n    }\n    this.linkQTBar = this.createQTBar('Link', 'Scrollable', this.parent.quickToolbarSettings.link, RenderType.LinkToolbar);\n    this.renderFactory.addRenderer(RenderType.LinkToolbar, this.linkQTBar);\n    if (!isNOU(this.parent.quickToolbarSettings.text) && !this.parent.inlineMode.enable) {\n      this.textQTBar = this.createQTBar('Text', 'MultiRow', this.parent.quickToolbarSettings.text, RenderType.TextToolbar);\n      this.renderFactory.addRenderer(RenderType.TextToolbar, this.textQTBar);\n    }\n    this.imageQTBar = this.createQTBar('Image', 'MultiRow', this.parent.quickToolbarSettings.image, RenderType.ImageToolbar);\n    this.renderFactory.addRenderer(RenderType.ImageToolbar, this.imageQTBar);\n    this.audioQTBar = this.createQTBar('Audio', 'MultiRow', this.parent.quickToolbarSettings.audio, RenderType.AudioToolbar);\n    this.renderFactory.addRenderer(RenderType.AudioToolbar, this.audioQTBar);\n    this.videoQTBar = this.createQTBar('Video', 'MultiRow', this.parent.quickToolbarSettings.video, RenderType.VideoToolbar);\n    this.renderFactory.addRenderer(RenderType.VideoToolbar, this.videoQTBar);\n    this.tableQTBar = this.createQTBar('Table', 'MultiRow', this.parent.quickToolbarSettings.table, RenderType.TableToolbar);\n    this.renderFactory.addRenderer(RenderType.TableToolbar, this.tableQTBar);\n    if (this.linkQTBar) {\n      EventHandler.add(this.linkQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.linkQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n    if (this.imageQTBar) {\n      EventHandler.add(this.imageQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.imageQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n    if (this.audioQTBar) {\n      EventHandler.add(this.audioQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.audioQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n    if (this.videoQTBar) {\n      EventHandler.add(this.videoQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.videoQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n    if (this.textQTBar) {\n      EventHandler.add(this.textQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.textQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n    if (this.tableQTBar) {\n      EventHandler.add(this.tableQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.tableQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n  };\n  QuickToolbar.prototype.renderInlineQuickToolbar = function () {\n    if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n      addClass([this.parent.element], [CLS_INLINE]);\n      this.inlineQTBar = this.createQTBar('Inline', 'MultiRow', this.parent.toolbarSettings.items, RenderType.InlineToolbar);\n      this.renderFactory.addRenderer(RenderType.InlineToolbar, this.inlineQTBar);\n      EventHandler.add(this.inlineQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.inlineQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n  };\n  /**\n   * Method for showing the inline quick toolbar\n   *\n   * @param {number} x -specifies the value of x.\n   * @param {number} y - specifies the y valu.\n   * @param {HTMLElement} target - specifies the target element.\n   * @returns {void}\n   * @hidden\n    */\n  QuickToolbar.prototype.showInlineQTBar = function (x, y, target) {\n    if (isNOU(this.parent) || this.parent.readonly || target.tagName.toLowerCase() === 'img' || this.inlineQTBar.element.querySelector('.e-rte-color-content')) {\n      return;\n    }\n    this.inlineQTBar.showPopup(x, y, target);\n  };\n  /**\n   * Method for hidding the inline quick toolbar\n   *\n   * @returns {void}\n   * @hidden\n    */\n  QuickToolbar.prototype.hideInlineQTBar = function () {\n    if (this.inlineQTBar && !hasClass(this.inlineQTBar.element, 'e-popup-close')) {\n      this.inlineQTBar.hidePopup();\n    }\n  };\n  /**\n   * Method for hidding the quick toolbar\n   *\n   * @returns {void}\n   * @hidden\n    */\n  QuickToolbar.prototype.hideQuickToolbars = function () {\n    if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close') && document.body.contains(this.linkQTBar.element)) {\n      this.linkQTBar.hidePopup();\n    }\n    if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close') && document.body.contains(this.textQTBar.element)) {\n      this.textQTBar.hidePopup();\n    }\n    if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close') && document.body.contains(this.imageQTBar.element)) {\n      this.imageQTBar.hidePopup();\n    }\n    if (this.audioQTBar && !hasClass(this.audioQTBar.element, 'e-popup-close') && document.body.contains(this.audioQTBar.element)) {\n      this.audioQTBar.hidePopup();\n    }\n    if (this.videoQTBar && !hasClass(this.videoQTBar.element, 'e-popup-close') && document.body.contains(this.videoQTBar.element)) {\n      this.videoQTBar.hidePopup();\n    }\n    if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close') && document.body.contains(this.tableQTBar.element)) {\n      this.tableQTBar.hidePopup();\n    }\n    if (!isNOU(this.parent) && this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n      this.hideInlineQTBar();\n    }\n  };\n  QuickToolbar.prototype.deBounce = function (x, y, target) {\n    var _this = this;\n    clearTimeout(this.deBouncer);\n    this.deBouncer = window.setTimeout(function () {\n      _this.showInlineQTBar(x, y, target);\n    }, this.debounceTimeout);\n  };\n  QuickToolbar.prototype.mouseUpHandler = function (e) {\n    if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n      var args = e.args.touches ? e.args.changedTouches[0] : e.args;\n      var range = this.parent.getRange();\n      var target = e.args.target;\n      if (isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n        if (isIDevice() && e.touchData && e.touchData.prevClientX !== e.touchData.clientX && e.touchData.prevClientY !== e.touchData.clientY) {\n          return;\n        }\n        this.hideInlineQTBar();\n        var parentLeft = this.parent.element.getBoundingClientRect().left;\n        this.offsetX = this.parent.iframeSettings.enable ? window.pageXOffset + parentLeft + args.clientX : args.pageX;\n        this.offsetY = pageYOffset(args, this.parent.element, this.parent.iframeSettings.enable);\n        if (target.nodeName === 'TEXTAREA') {\n          this.showInlineQTBar(this.offsetX, this.offsetY, target);\n        } else {\n          var closestAnchor = closest(target, 'a');\n          target = closestAnchor ? closestAnchor : target;\n          var startNode = this.parent.getRange().startContainer.parentElement;\n          var endNode = this.parent.getRange().endContainer.parentElement;\n          if ((isNOU(closest(startNode, 'A')) || isNOU(closest(endNode, 'A'))) && (!closest(target, 'td,th') || !range.collapsed) && (target.tagName !== 'IMG' || this.parent.getRange().startOffset !== this.parent.getRange().endOffset)) {\n            if (this.parent.inlineMode.onSelection && range.collapsed) {\n              return;\n            }\n            this.target = target;\n            this.showInlineQTBar(this.offsetX, this.offsetY, target);\n          }\n        }\n      }\n    }\n    if (!isNOU(this.textQTBar) && !isNOU(this.parent.quickToolbarSettings.text) && !this.parent.inlineMode.enable) {\n      if (!isNOU(e) && !isNOU(e.name) && e.name === 'sourceCodeMouseDown') {\n        return;\n      }\n      var args = e.args.touches ? e.args.changedTouches[0] : e.args;\n      var target = e.args.target;\n      this.hideQuickToolbars();\n      var parentLeft = this.parent.element.getBoundingClientRect().left;\n      this.offsetX = this.parent.iframeSettings.enable ? this.parent.element.ownerDocument.documentElement.scrollLeft + parentLeft + args.clientX : args.pageX;\n      this.offsetY = pageYOffset(args, this.parent.element, this.parent.iframeSettings.enable);\n      var range = this.parent.getRange();\n      if (range.endContainer.parentElement.tagName === range.startContainer.parentElement.tagName && range.startContainer.parentElement.tagName === 'A' && range.endContainer.parentElement.tagName === 'A' || target.tagName === 'IMG' || target.tagName === 'VIDEO' || this.isEmbedVidElem(target) || target.tagName === 'AUDIO' || target.childNodes[0] && target.childNodes[0].nodeType === 1 && target.childNodes[0].classList.contains('e-rte-audio') || this.parent.getRange().startOffset === this.parent.getRange().endOffset) {\n        return;\n      }\n      this.target = target;\n      this.textQTBar.showPopup(this.offsetX, this.offsetY, target, 'text');\n    }\n  };\n  QuickToolbar.prototype.isEmbedVidElem = function (target) {\n    if (target && target.nodeType !== 3 && target.nodeName !== 'BR' && target.classList && target.classList.contains(CLS_VID_CLICK_ELEM) || target && target.nodeName === 'IFRAME') {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  QuickToolbar.prototype.keyDownHandler = function (e) {\n    var preventHide = e.args.altKey;\n    if (this.parent.inlineMode.enable && e.args.metaKey && e.args.keyCode === 65) {\n      this.showInlineQTBar(this.offsetX, this.offsetY, e.args.target);\n      return;\n    }\n    if (!preventHide) {\n      if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()) && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n        this.hideInlineQTBar();\n      }\n      if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close')) {\n        this.textQTBar.hidePopup();\n      }\n    }\n  };\n  QuickToolbar.prototype.inlineQTBarMouseDownHandler = function () {\n    if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()) && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n      this.hideInlineQTBar();\n    }\n    if (!isNOU(this.parent.quickToolbarSettings.text)) {\n      if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close') && document.body.contains(this.textQTBar.element)) {\n        this.textQTBar.hidePopup();\n      }\n    }\n  };\n  QuickToolbar.prototype.keyUpHandler = function (e) {\n    var args = e.args;\n    if (this.parent.inlineMode.enable && !Browser.isDevice) {\n      if (this.parent.inlineMode.onSelection) {\n        if (this.parent.getSelection().length > 0) {\n          if (args.ctrlKey && args.keyCode === 65 || args.shiftKey && (args.keyCode === 33 || args.keyCode === 34 || args.keyCode === 35 || args.keyCode === 36 || args.keyCode === 37 || args.keyCode === 38 || args.keyCode === 39 || args.keyCode === 40)) {\n            this.showInlineQTBar(this.offsetX, this.offsetY, args.target);\n          }\n        }\n        return;\n      }\n      this.deBounce(this.offsetX, this.offsetY, args.target);\n    }\n    if (this.parent.quickToolbarSettings.text && !Browser.isDevice) {\n      if (args.ctrlKey && args.keyCode === 65 || args.shiftKey && (args.keyCode === 33 || args.keyCode === 34 || args.keyCode === 35 || args.keyCode === 36 || args.keyCode === 37 || args.keyCode === 38 || args.keyCode === 39 || args.keyCode === 40)) {\n        this.textQTBar.showPopup(this.offsetX, this.offsetY, args.target, 'text');\n      }\n    }\n  };\n  QuickToolbar.prototype.selectionChangeHandler = function (e) {\n    var _this = this;\n    clearTimeout(this.deBouncer);\n    this.deBouncer = window.setTimeout(function () {\n      _this.onSelectionChange(e);\n    }, this.debounceTimeout);\n  };\n  QuickToolbar.prototype.onSelectionChange = function (e) {\n    if (!isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n      return;\n    }\n    var selection = this.contentRenderer.getDocument().getSelection();\n    if (!selection.isCollapsed) {\n      this.mouseUpHandler({\n        args: e\n      });\n    }\n  };\n  /**\n   * getInlineBaseToolbar method\n   *\n   * @returns {void}\n   * @hidden\n    */\n  QuickToolbar.prototype.getInlineBaseToolbar = function () {\n    return this.inlineQTBar && this.inlineQTBar.quickTBarObj;\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n  QuickToolbar.prototype.destroy = function () {\n    if (this.isDestroyed) {\n      return;\n    }\n    if (this.linkQTBar && !this.linkQTBar.isDestroyed) {\n      EventHandler.remove(this.linkQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.linkQTBar.element, 'keyup', this.keyUpQT);\n      this.linkQTBar.destroy();\n    }\n    if (this.textQTBar && !this.textQTBar.isDestroyed) {\n      EventHandler.remove(this.textQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.textQTBar.element, 'keyup', this.keyUpQT);\n      this.textQTBar.destroy();\n    }\n    if (this.imageQTBar && !this.imageQTBar.isDestroyed) {\n      EventHandler.remove(this.imageQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.imageQTBar.element, 'keyup', this.keyUpQT);\n      this.imageQTBar.destroy();\n    }\n    if (this.audioQTBar && !this.audioQTBar.isDestroyed) {\n      EventHandler.remove(this.audioQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.audioQTBar.element, 'keyup', this.keyUpQT);\n      this.audioQTBar.destroy();\n    }\n    if (this.videoQTBar && !this.videoQTBar.isDestroyed) {\n      EventHandler.remove(this.videoQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.videoQTBar.element, 'keyup', this.keyUpQT);\n      this.videoQTBar.destroy();\n    }\n    if (this.tableQTBar && !this.tableQTBar.isDestroyed) {\n      EventHandler.remove(this.tableQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.tableQTBar.element, 'keyup', this.keyUpQT);\n      this.tableQTBar.destroy();\n    }\n    if (this.inlineQTBar && !this.inlineQTBar.isDestroyed) {\n      EventHandler.remove(this.inlineQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.inlineQTBar.element, 'keyup', this.keyUpQT);\n      if (isIDevice()) {\n        EventHandler.remove(document, 'selectionchange', this.selectionChangeHandler);\n      }\n      this.inlineQTBar.destroy();\n    }\n    this.removeEventListener();\n    this.isDestroyed = true;\n  };\n  QuickToolbar.prototype.wireInlineQTBarEvents = function () {\n    this.parent.on(events.mouseUp, this.mouseUpHandler, this);\n    this.parent.on(events.mouseDown, this.inlineQTBarMouseDownHandler, this);\n    this.parent.on(events.keyDown, this.keyDownHandler, this);\n    this.parent.on(events.keyUp, this.keyUpHandler, this);\n    this.parent.on(events.sourceCodeMouseDown, this.mouseUpHandler, this);\n    this.parent.on(events.renderInlineToolbar, this.renderInlineQuickToolbar, this);\n  };\n  QuickToolbar.prototype.unWireInlineQTBarEvents = function () {\n    this.parent.off(events.mouseUp, this.mouseUpHandler);\n    this.parent.off(events.mouseDown, this.inlineQTBarMouseDownHandler);\n    this.parent.off(events.keyDown, this.keyDownHandler);\n    this.parent.off(events.keyUp, this.keyUpHandler);\n    this.parent.off(events.sourceCodeMouseDown, this.mouseUpHandler);\n    this.parent.off(events.renderInlineToolbar, this.renderInlineQuickToolbar);\n  };\n  // eslint-disable-next-line\n  QuickToolbar.prototype.toolbarUpdated = function (args) {\n    if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n      this.linkQTBar.hidePopup();\n    }\n    if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n      this.imageQTBar.hidePopup();\n    }\n    if (this.audioQTBar && !hasClass(this.audioQTBar.element, 'e-popup-close')) {\n      this.audioQTBar.hidePopup();\n    }\n    if (this.videoQTBar && !hasClass(this.videoQTBar.element, 'e-popup-close')) {\n      this.videoQTBar.hidePopup();\n    }\n    if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n      this.tableQTBar.hidePopup();\n    }\n  };\n  /**\n   * addEventListener\n   *\n   * @returns {void}\n   * @hidden\n    */\n  QuickToolbar.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.initialEnd, this.initializeQuickToolbars, this);\n    this.parent.on(events.mouseDown, this.renderQuickToolbars, this);\n    this.parent.on(events.toolbarUpdated, this.toolbarUpdated, this);\n    this.parent.on(events.drop, this.renderQuickToolbars, this);\n    this.wireInlineQTBarEvents();\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n      this.parent.on(events.scroll, this.hideQuickToolbars, this);\n      this.parent.on(events.contentscroll, this.hideQuickToolbars, this);\n    }\n    this.parent.on(events.focusChange, this.hideQuickToolbars, this);\n    this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.keyDown, this.onKeyDown, this);\n    this.parent.on(events.rtlMode, this.setRtl, this);\n    this.parent.on(events.bindCssClass, this.setCssClass, this);\n    this.parent.on(events.hidePopup, this.hideQuickToolbars, this);\n  };\n  QuickToolbar.prototype.onKeyDown = function (e) {\n    var args = e.args;\n    if (args.which === 8 || args.which === 46) {\n      if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n        this.imageQTBar.hidePopup();\n      }\n      if (this.audioQTBar && !hasClass(this.audioQTBar.element, 'e-popup-close')) {\n        this.audioQTBar.hidePopup();\n      }\n      if (this.videoQTBar && !hasClass(this.videoQTBar.element, 'e-popup-close')) {\n        this.videoQTBar.hidePopup();\n      }\n      if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n        this.tableQTBar.hidePopup();\n      }\n      if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n        this.linkQTBar.hidePopup();\n      }\n      if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close')) {\n        this.textQTBar.hidePopup();\n      }\n    }\n  };\n  QuickToolbar.prototype.onIframeMouseDown = function () {\n    this.hideQuickToolbars();\n    this.hideInlineQTBar();\n  };\n  QuickToolbar.prototype.updateCss = function (baseQTObj, e) {\n    if (baseQTObj && e.cssClass) {\n      if (isNullOrUndefined(e.oldCssClass && baseQTObj.quickTBarObj.toolbarObj.cssClass !== e.cssClass)) {\n        baseQTObj.quickTBarObj.toolbarObj.setProperties({\n          cssClass: (baseQTObj.quickTBarObj.toolbarObj.cssClass + ' ' + e.cssClass).trim()\n        });\n      } else {\n        baseQTObj.quickTBarObj.toolbarObj.setProperties({\n          cssClass: (baseQTObj.quickTBarObj.toolbarObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim()\n        });\n      }\n    }\n  };\n  QuickToolbar.prototype.setCssClass = function (e) {\n    var baseQuickToolbarObj = [this.inlineQTBar, this.imageQTBar, this.linkQTBar, this.textQTBar, this.tableQTBar];\n    for (var i = 0; i < baseQuickToolbarObj.length; i++) {\n      this.updateCss(baseQuickToolbarObj[i], e);\n    }\n  };\n  QuickToolbar.prototype.setRtl = function (args) {\n    if (this.inlineQTBar) {\n      this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({\n        enableRtl: args.enableRtl\n      });\n    }\n    if (this.imageQTBar) {\n      this.imageQTBar.quickTBarObj.toolbarObj.setProperties({\n        enableRtl: args.enableRtl\n      });\n    }\n    if (this.audioQTBar) {\n      this.audioQTBar.quickTBarObj.toolbarObj.setProperties({\n        enableRtl: args.enableRtl\n      });\n    }\n    if (this.videoQTBar) {\n      this.videoQTBar.quickTBarObj.toolbarObj.setProperties({\n        enableRtl: args.enableRtl\n      });\n    }\n    if (this.linkQTBar) {\n      this.linkQTBar.quickTBarObj.toolbarObj.setProperties({\n        enableRtl: args.enableRtl\n      });\n    }\n    if (this.textQTBar) {\n      this.textQTBar.quickTBarObj.toolbarObj.setProperties({\n        enableRtl: args.enableRtl\n      });\n    }\n  };\n  /**\n   * removeEventListener\n   *\n   * @returns {void}\n   * @hidden\n    */\n  QuickToolbar.prototype.removeEventListener = function () {\n    if (this.deBouncer) {\n      clearTimeout(this.deBouncer);\n      this.deBouncer = null;\n    }\n    this.parent.off(events.initialEnd, this.initializeQuickToolbars);\n    this.parent.off(events.mouseDown, this.renderQuickToolbars);\n    this.parent.off(events.toolbarUpdated, this.toolbarUpdated);\n    this.parent.off(events.drop, this.renderQuickToolbars);\n    this.unWireInlineQTBarEvents();\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n      this.parent.off(events.scroll, this.hideQuickToolbars);\n      this.parent.off(events.contentscroll, this.hideQuickToolbars);\n    }\n    this.parent.off(events.focusChange, this.hideQuickToolbars);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n    this.parent.off(events.keyDown, this.onKeyDown);\n    this.parent.off(events.rtlMode, this.setRtl);\n    this.parent.off(events.bindCssClass, this.setCssClass);\n    this.parent.off(events.hidePopup, this.hideQuickToolbars);\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {RichTextEditorModel} e - specifies the element.\n   * @returns {void}\n   * @hidden\n    */\n  QuickToolbar.prototype.onPropertyChanged = function (e) {\n    if (!isNullOrUndefined(e.newProp.quickToolbarSettings)) {\n      for (var _i = 0, _a = Object.keys(e.newProp.quickToolbarSettings); _i < _a.length; _i++) {\n        var prop = _a[_i];\n        switch (prop) {\n          case 'actionOnScroll':\n            if (e.newProp.quickToolbarSettings.actionOnScroll === 'none') {\n              this.parent.off(events.scroll, this.hideQuickToolbars);\n              this.parent.off(events.contentscroll, this.hideQuickToolbars);\n            } else {\n              this.parent.on(events.scroll, this.hideQuickToolbars, this);\n              this.parent.on(events.contentscroll, this.hideQuickToolbars, this);\n            }\n            break;\n        }\n      }\n    }\n    if (e.module !== this.getModuleName()) {\n      return;\n    }\n    if (this.inlineQTBar) {\n      removeClass([this.parent.element], [CLS_INLINE]);\n      this.unWireInlineQTBarEvents();\n      this.hideInlineQTBar();\n    }\n    if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n      addClass([this.parent.element], [CLS_INLINE]);\n      this.wireInlineQTBarEvents();\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  QuickToolbar.prototype.getModuleName = function () {\n    return 'quickToolbar';\n  };\n  /**\n   *\n   * @returns {BaseQuickToolbar[]} - specifies the quick toolbar instance.\n   * @hidden\n   * @private\n   */\n  QuickToolbar.prototype.getQuickToolbarInstance = function () {\n    return [this.linkQTBar, this.imageQTBar, this.audioQTBar, this.videoQTBar, this.tableQTBar, this.textQTBar, this.inlineQTBar];\n  };\n  return QuickToolbar;\n}();\nexport { QuickToolbar };","map":{"version":3,"names":["select","isNullOrUndefined","Browser","addClass","removeClass","EventHandler","closest","isNOU","RenderType","events","pageYOffset","hasClass","isIDevice","BaseQuickToolbar","PopupRenderer","CLS_INLINE_POP","CLS_INLINE","CLS_VID_CLICK_ELEM","QuickToolbar","parent","locator","debounceTimeout","renderFactory","getService","addRenderer","Popup","addEventListener","isDestroyed","prototype","formatItems","items","formattedItems","forEach","item","toLocaleLowerCase","push","getQTBarOptions","popType","mode","type","popupType","toolbarItems","renderType","cssClass","getCssClass","createQTBar","length","qTBar","render","initializeQuickToolbars","quickToolbarModule","contentRenderer","getRenderer","Content","inlineMode","enable","onSelection","add","getDocument","selectionChangeHandler","onMouseDown","e","isBlur","isRTE","keyUpQT","which","hideQuickToolbars","renderQuickToolbars","linkQTBar","imageQTBar","audioQTBar","videoQTBar","textQTBar","tableQTBar","quickToolbarSettings","link","LinkToolbar","text","TextToolbar","image","ImageToolbar","audio","AudioToolbar","video","VideoToolbar","table","TableToolbar","element","renderInlineQuickToolbar","isDevice","inlineQTBar","toolbarSettings","InlineToolbar","showInlineQTBar","x","y","target","readonly","tagName","toLowerCase","querySelector","showPopup","hideInlineQTBar","hidePopup","document","body","contains","deBounce","_this","clearTimeout","deBouncer","window","setTimeout","mouseUpHandler","args","touches","changedTouches","range","getRange","touchData","prevClientX","clientX","prevClientY","clientY","parentLeft","getBoundingClientRect","left","offsetX","iframeSettings","pageXOffset","pageX","offsetY","nodeName","closestAnchor","startNode","startContainer","parentElement","endNode","endContainer","collapsed","startOffset","endOffset","name","ownerDocument","documentElement","scrollLeft","isEmbedVidElem","childNodes","nodeType","classList","keyDownHandler","preventHide","altKey","metaKey","keyCode","inlineQTBarMouseDownHandler","keyUpHandler","getSelection","ctrlKey","shiftKey","onSelectionChange","selection","isCollapsed","getInlineBaseToolbar","quickTBarObj","destroy","remove","removeEventListener","wireInlineQTBarEvents","on","mouseUp","mouseDown","keyDown","keyUp","sourceCodeMouseDown","renderInlineToolbar","unWireInlineQTBarEvents","off","toolbarUpdated","initialEnd","drop","modelChanged","onPropertyChanged","actionOnScroll","scroll","contentscroll","focusChange","iframeMouseDown","onIframeMouseDown","onKeyDown","rtlMode","setRtl","bindCssClass","setCssClass","updateCss","baseQTObj","oldCssClass","toolbarObj","setProperties","trim","replace","baseQuickToolbarObj","i","enableRtl","newProp","_i","_a","Object","keys","prop","module","getModuleName","getQuickToolbarInstance"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/quick-toolbar.js"],"sourcesContent":["import { select, isNullOrUndefined, Browser, addClass, removeClass, EventHandler, closest, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport { pageYOffset, hasClass, isIDevice } from '../base/util';\nimport { BaseQuickToolbar } from './base-quick-toolbar';\nimport { PopupRenderer } from '../renderer/popup-renderer';\nimport { CLS_INLINE_POP, CLS_INLINE, CLS_VID_CLICK_ELEM } from '../base/classes';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\nvar QuickToolbar = /** @class */ (function () {\n    function QuickToolbar(parent, locator) {\n        this.debounceTimeout = 1000;\n        this.parent = parent;\n        this.locator = locator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.renderFactory.addRenderer(RenderType.Popup, new PopupRenderer(this.parent));\n        this.addEventListener();\n        this.isDestroyed = false;\n    }\n    QuickToolbar.prototype.formatItems = function (items) {\n        var formattedItems = [];\n        items.forEach(function (item) {\n            if (typeof item === 'string') {\n                switch (item.toLocaleLowerCase()) {\n                    case 'open':\n                        formattedItems.push('openLink');\n                        break;\n                    case 'edit':\n                        formattedItems.push('editLink');\n                        break;\n                    case 'unlink':\n                        formattedItems.push('removeLink');\n                        break;\n                    default:\n                        formattedItems.push(item);\n                        break;\n                }\n            }\n            else {\n                formattedItems.push(item);\n            }\n        });\n        return formattedItems;\n    };\n    QuickToolbar.prototype.getQTBarOptions = function (popType, mode, items, type) {\n        return {\n            popupType: popType,\n            toolbarItems: items,\n            mode: mode,\n            renderType: type,\n            cssClass: this.parent.getCssClass()\n        };\n    };\n    /**\n     * createQTBar method\n     *\n     * @param {string} popupType - specifies the string value\n     * @param {string} mode - specifies the string value.\n     * @param {string} items - specifies the string.\n     * @param {RenderType} type - specifies the render type.\n     * @returns {BaseQuickToolbar} - specifies the quick toolbar\n     * @hidden\n\n     */\n    QuickToolbar.prototype.createQTBar = function (popupType, mode, items, type) {\n        if (items.length < 1) {\n            return null;\n        }\n        var qTBar = new BaseQuickToolbar(this.parent, this.locator);\n        qTBar.render(this.getQTBarOptions(popupType, mode, this.formatItems(items), type));\n        return qTBar;\n    };\n    QuickToolbar.prototype.initializeQuickToolbars = function () {\n        this.parent.quickToolbarModule = this;\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        if (this.parent.inlineMode.enable && this.parent.inlineMode.onSelection && isIDevice()) {\n            EventHandler.add(this.contentRenderer.getDocument(), 'selectionchange', this.selectionChangeHandler, this);\n        }\n    };\n    // eslint-disable-next-line\n    QuickToolbar.prototype.onMouseDown = function (e) {\n        this.parent.isBlur = false;\n        this.parent.isRTE = true;\n    };\n    QuickToolbar.prototype.keyUpQT = function (e) {\n        if (e.which === 27) {\n            this.hideQuickToolbars();\n        }\n    };\n    QuickToolbar.prototype.renderQuickToolbars = function () {\n        if (this.linkQTBar || this.imageQTBar || this.audioQTBar || this.videoQTBar || this.textQTBar || this.tableQTBar) {\n            return;\n        }\n        this.linkQTBar = this.createQTBar('Link', 'Scrollable', this.parent.quickToolbarSettings.link, RenderType.LinkToolbar);\n        this.renderFactory.addRenderer(RenderType.LinkToolbar, this.linkQTBar);\n        if (!isNOU(this.parent.quickToolbarSettings.text) && !this.parent.inlineMode.enable) {\n            this.textQTBar = this.createQTBar('Text', 'MultiRow', this.parent.quickToolbarSettings.text, RenderType.TextToolbar);\n            this.renderFactory.addRenderer(RenderType.TextToolbar, this.textQTBar);\n        }\n        this.imageQTBar = this.createQTBar('Image', 'MultiRow', this.parent.quickToolbarSettings.image, RenderType.ImageToolbar);\n        this.renderFactory.addRenderer(RenderType.ImageToolbar, this.imageQTBar);\n        this.audioQTBar = this.createQTBar('Audio', 'MultiRow', this.parent.quickToolbarSettings.audio, RenderType.AudioToolbar);\n        this.renderFactory.addRenderer(RenderType.AudioToolbar, this.audioQTBar);\n        this.videoQTBar = this.createQTBar('Video', 'MultiRow', this.parent.quickToolbarSettings.video, RenderType.VideoToolbar);\n        this.renderFactory.addRenderer(RenderType.VideoToolbar, this.videoQTBar);\n        this.tableQTBar = this.createQTBar('Table', 'MultiRow', this.parent.quickToolbarSettings.table, RenderType.TableToolbar);\n        this.renderFactory.addRenderer(RenderType.TableToolbar, this.tableQTBar);\n        if (this.linkQTBar) {\n            EventHandler.add(this.linkQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.linkQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.imageQTBar) {\n            EventHandler.add(this.imageQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.imageQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.audioQTBar) {\n            EventHandler.add(this.audioQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.audioQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.videoQTBar) {\n            EventHandler.add(this.videoQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.videoQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.textQTBar) {\n            EventHandler.add(this.textQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.textQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.tableQTBar) {\n            EventHandler.add(this.tableQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.tableQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n    };\n    QuickToolbar.prototype.renderInlineQuickToolbar = function () {\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            addClass([this.parent.element], [CLS_INLINE]);\n            this.inlineQTBar = this.createQTBar('Inline', 'MultiRow', this.parent.toolbarSettings.items, RenderType.InlineToolbar);\n            this.renderFactory.addRenderer(RenderType.InlineToolbar, this.inlineQTBar);\n            EventHandler.add(this.inlineQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.inlineQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n    };\n    /**\n     * Method for showing the inline quick toolbar\n     *\n     * @param {number} x -specifies the value of x.\n     * @param {number} y - specifies the y valu.\n     * @param {HTMLElement} target - specifies the target element.\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.showInlineQTBar = function (x, y, target) {\n        if (isNOU(this.parent) || this.parent.readonly || target.tagName.toLowerCase() === 'img' || this.inlineQTBar.element.querySelector('.e-rte-color-content')) {\n            return;\n        }\n        this.inlineQTBar.showPopup(x, y, target);\n    };\n    /**\n     * Method for hidding the inline quick toolbar\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.hideInlineQTBar = function () {\n        if (this.inlineQTBar && !hasClass(this.inlineQTBar.element, 'e-popup-close')) {\n            this.inlineQTBar.hidePopup();\n        }\n    };\n    /**\n     * Method for hidding the quick toolbar\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.hideQuickToolbars = function () {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close') && document.body.contains(this.linkQTBar.element)) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close') && document.body.contains(this.textQTBar.element)) {\n            this.textQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close') && document.body.contains(this.imageQTBar.element)) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.audioQTBar && !hasClass(this.audioQTBar.element, 'e-popup-close') && document.body.contains(this.audioQTBar.element)) {\n            this.audioQTBar.hidePopup();\n        }\n        if (this.videoQTBar && !hasClass(this.videoQTBar.element, 'e-popup-close') && document.body.contains(this.videoQTBar.element)) {\n            this.videoQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close') && document.body.contains(this.tableQTBar.element)) {\n            this.tableQTBar.hidePopup();\n        }\n        if (!isNOU(this.parent) && this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.deBounce = function (x, y, target) {\n        var _this = this;\n        clearTimeout(this.deBouncer);\n        this.deBouncer = window.setTimeout(function () {\n            _this.showInlineQTBar(x, y, target);\n        }, this.debounceTimeout);\n    };\n    QuickToolbar.prototype.mouseUpHandler = function (e) {\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            var args = e.args.touches ?\n                e.args.changedTouches[0] : e.args;\n            var range = this.parent.getRange();\n            var target = e.args.target;\n            if (isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n                if (isIDevice() && e.touchData && e.touchData.prevClientX !== e.touchData.clientX\n                    && e.touchData.prevClientY !== e.touchData.clientY) {\n                    return;\n                }\n                this.hideInlineQTBar();\n                var parentLeft = this.parent.element.getBoundingClientRect().left;\n                this.offsetX = this.parent.iframeSettings.enable ? window.pageXOffset + parentLeft + args.clientX : args.pageX;\n                this.offsetY = pageYOffset(args, this.parent.element, this.parent.iframeSettings.enable);\n                if (target.nodeName === 'TEXTAREA') {\n                    this.showInlineQTBar(this.offsetX, this.offsetY, target);\n                }\n                else {\n                    var closestAnchor = closest(target, 'a');\n                    target = closestAnchor ? closestAnchor : target;\n                    var startNode = this.parent.getRange().startContainer.parentElement;\n                    var endNode = this.parent.getRange().endContainer.parentElement;\n                    if ((isNOU(closest(startNode, 'A')) || isNOU(closest(endNode, 'A'))) && (!closest(target, 'td,th') || !range.collapsed) &&\n                        (target.tagName !== 'IMG' || this.parent.getRange().startOffset !== this.parent.getRange().endOffset)) {\n                        if (this.parent.inlineMode.onSelection && range.collapsed) {\n                            return;\n                        }\n                        this.target = target;\n                        this.showInlineQTBar(this.offsetX, this.offsetY, target);\n                    }\n                }\n            }\n        }\n        if (!isNOU(this.textQTBar) && !isNOU(this.parent.quickToolbarSettings.text) && !this.parent.inlineMode.enable) {\n            if (!isNOU(e) && !isNOU(e.name) && e.name === 'sourceCodeMouseDown') {\n                return;\n            }\n            var args = e.args.touches ?\n                e.args.changedTouches[0] : e.args;\n            var target = e.args.target;\n            this.hideQuickToolbars();\n            var parentLeft = this.parent.element.getBoundingClientRect().left;\n            this.offsetX = this.parent.iframeSettings.enable ? this.parent.element.ownerDocument.documentElement.scrollLeft\n                + parentLeft + args.clientX : args.pageX;\n            this.offsetY = pageYOffset(args, this.parent.element, this.parent.iframeSettings.enable);\n            var range = this.parent.getRange();\n            if ((range.endContainer.parentElement.tagName === range.startContainer.parentElement.tagName && (range.startContainer.parentElement.tagName === 'A' && range.endContainer.parentElement.tagName === 'A')) ||\n                (target.tagName === 'IMG') || (target.tagName === 'VIDEO' || this.isEmbedVidElem(target)) || (target.tagName === 'AUDIO') || (target.childNodes[0] && target.childNodes[0].nodeType === 1 && target.childNodes[0].classList.contains('e-rte-audio')) ||\n                (this.parent.getRange().startOffset === this.parent.getRange().endOffset)) {\n                return;\n            }\n            this.target = target;\n            this.textQTBar.showPopup(this.offsetX, this.offsetY, target, 'text');\n        }\n    };\n    QuickToolbar.prototype.isEmbedVidElem = function (target) {\n        if ((target && target.nodeType !== 3 && target.nodeName !== 'BR' && (target.classList && target.classList.contains(CLS_VID_CLICK_ELEM))) ||\n            (target && target.nodeName === 'IFRAME')) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    QuickToolbar.prototype.keyDownHandler = function (e) {\n        var preventHide = e.args.altKey;\n        if (this.parent.inlineMode.enable && e.args.metaKey && e.args.keyCode === 65) {\n            this.showInlineQTBar(this.offsetX, this.offsetY, e.args.target);\n            return;\n        }\n        if (!preventHide) {\n            if ((this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()))\n                && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n                this.hideInlineQTBar();\n            }\n            if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close')) {\n                this.textQTBar.hidePopup();\n            }\n        }\n    };\n    QuickToolbar.prototype.inlineQTBarMouseDownHandler = function () {\n        if ((this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()))\n            && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n            this.hideInlineQTBar();\n        }\n        if (!isNOU(this.parent.quickToolbarSettings.text)) {\n            if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close') && document.body.contains(this.textQTBar.element)) {\n                this.textQTBar.hidePopup();\n            }\n        }\n    };\n    QuickToolbar.prototype.keyUpHandler = function (e) {\n        var args = e.args;\n        if (this.parent.inlineMode.enable && !Browser.isDevice) {\n            if (this.parent.inlineMode.onSelection) {\n                if (this.parent.getSelection().length > 0) {\n                    if ((args.ctrlKey && args.keyCode === 65) || (args.shiftKey && (args.keyCode === 33 || args.keyCode === 34 ||\n                        args.keyCode === 35 || args.keyCode === 36 || args.keyCode === 37 || args.keyCode === 38 ||\n                        args.keyCode === 39 || args.keyCode === 40))) {\n                        this.showInlineQTBar(this.offsetX, this.offsetY, args.target);\n                    }\n                }\n                return;\n            }\n            this.deBounce(this.offsetX, this.offsetY, args.target);\n        }\n        if (this.parent.quickToolbarSettings.text && !Browser.isDevice) {\n            if ((args.ctrlKey && args.keyCode === 65) || (args.shiftKey && (args.keyCode === 33 || args.keyCode === 34 ||\n                args.keyCode === 35 || args.keyCode === 36 || args.keyCode === 37 || args.keyCode === 38 ||\n                args.keyCode === 39 || args.keyCode === 40))) {\n                this.textQTBar.showPopup(this.offsetX, this.offsetY, args.target, 'text');\n            }\n        }\n    };\n    QuickToolbar.prototype.selectionChangeHandler = function (e) {\n        var _this = this;\n        clearTimeout(this.deBouncer);\n        this.deBouncer = window.setTimeout(function () {\n            _this.onSelectionChange(e);\n        }, this.debounceTimeout);\n    };\n    QuickToolbar.prototype.onSelectionChange = function (e) {\n        if (!isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n            return;\n        }\n        var selection = this.contentRenderer.getDocument().getSelection();\n        if (!selection.isCollapsed) {\n            this.mouseUpHandler({ args: e });\n        }\n    };\n    /**\n     * getInlineBaseToolbar method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.getInlineBaseToolbar = function () {\n        return this.inlineQTBar && this.inlineQTBar.quickTBarObj;\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.destroy = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (this.linkQTBar && !this.linkQTBar.isDestroyed) {\n            EventHandler.remove(this.linkQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.linkQTBar.element, 'keyup', this.keyUpQT);\n            this.linkQTBar.destroy();\n        }\n        if (this.textQTBar && !this.textQTBar.isDestroyed) {\n            EventHandler.remove(this.textQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.textQTBar.element, 'keyup', this.keyUpQT);\n            this.textQTBar.destroy();\n        }\n        if (this.imageQTBar && !this.imageQTBar.isDestroyed) {\n            EventHandler.remove(this.imageQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.imageQTBar.element, 'keyup', this.keyUpQT);\n            this.imageQTBar.destroy();\n        }\n        if (this.audioQTBar && !this.audioQTBar.isDestroyed) {\n            EventHandler.remove(this.audioQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.audioQTBar.element, 'keyup', this.keyUpQT);\n            this.audioQTBar.destroy();\n        }\n        if (this.videoQTBar && !this.videoQTBar.isDestroyed) {\n            EventHandler.remove(this.videoQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.videoQTBar.element, 'keyup', this.keyUpQT);\n            this.videoQTBar.destroy();\n        }\n        if (this.tableQTBar && !this.tableQTBar.isDestroyed) {\n            EventHandler.remove(this.tableQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.tableQTBar.element, 'keyup', this.keyUpQT);\n            this.tableQTBar.destroy();\n        }\n        if (this.inlineQTBar && !this.inlineQTBar.isDestroyed) {\n            EventHandler.remove(this.inlineQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.inlineQTBar.element, 'keyup', this.keyUpQT);\n            if (isIDevice()) {\n                EventHandler.remove(document, 'selectionchange', this.selectionChangeHandler);\n            }\n            this.inlineQTBar.destroy();\n        }\n        this.removeEventListener();\n        this.isDestroyed = true;\n    };\n    QuickToolbar.prototype.wireInlineQTBarEvents = function () {\n        this.parent.on(events.mouseUp, this.mouseUpHandler, this);\n        this.parent.on(events.mouseDown, this.inlineQTBarMouseDownHandler, this);\n        this.parent.on(events.keyDown, this.keyDownHandler, this);\n        this.parent.on(events.keyUp, this.keyUpHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseUpHandler, this);\n        this.parent.on(events.renderInlineToolbar, this.renderInlineQuickToolbar, this);\n    };\n    QuickToolbar.prototype.unWireInlineQTBarEvents = function () {\n        this.parent.off(events.mouseUp, this.mouseUpHandler);\n        this.parent.off(events.mouseDown, this.inlineQTBarMouseDownHandler);\n        this.parent.off(events.keyDown, this.keyDownHandler);\n        this.parent.off(events.keyUp, this.keyUpHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseUpHandler);\n        this.parent.off(events.renderInlineToolbar, this.renderInlineQuickToolbar);\n    };\n    // eslint-disable-next-line\n    QuickToolbar.prototype.toolbarUpdated = function (args) {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.audioQTBar && !hasClass(this.audioQTBar.element, 'e-popup-close')) {\n            this.audioQTBar.hidePopup();\n        }\n        if (this.videoQTBar && !hasClass(this.videoQTBar.element, 'e-popup-close')) {\n            this.videoQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n            this.tableQTBar.hidePopup();\n        }\n    };\n    /**\n     * addEventListener\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeQuickToolbars, this);\n        this.parent.on(events.mouseDown, this.renderQuickToolbars, this);\n        this.parent.on(events.toolbarUpdated, this.toolbarUpdated, this);\n        this.parent.on(events.drop, this.renderQuickToolbars, this);\n        this.wireInlineQTBarEvents();\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n            this.parent.on(events.contentscroll, this.hideQuickToolbars, this);\n        }\n        this.parent.on(events.focusChange, this.hideQuickToolbars, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.hidePopup, this.hideQuickToolbars, this);\n    };\n    QuickToolbar.prototype.onKeyDown = function (e) {\n        var args = e.args;\n        if (args.which === 8 || args.which === 46) {\n            if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n                this.imageQTBar.hidePopup();\n            }\n            if (this.audioQTBar && !hasClass(this.audioQTBar.element, 'e-popup-close')) {\n                this.audioQTBar.hidePopup();\n            }\n            if (this.videoQTBar && !hasClass(this.videoQTBar.element, 'e-popup-close')) {\n                this.videoQTBar.hidePopup();\n            }\n            if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n                this.tableQTBar.hidePopup();\n            }\n            if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n                this.linkQTBar.hidePopup();\n            }\n            if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close')) {\n                this.textQTBar.hidePopup();\n            }\n        }\n    };\n    QuickToolbar.prototype.onIframeMouseDown = function () {\n        this.hideQuickToolbars();\n        this.hideInlineQTBar();\n    };\n    QuickToolbar.prototype.updateCss = function (baseQTObj, e) {\n        if (baseQTObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass && baseQTObj.quickTBarObj.toolbarObj.cssClass !== e.cssClass)) {\n                baseQTObj.quickTBarObj.toolbarObj.setProperties({ cssClass: (baseQTObj.quickTBarObj.toolbarObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                baseQTObj.quickTBarObj.toolbarObj.setProperties({ cssClass: (baseQTObj.quickTBarObj.toolbarObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    QuickToolbar.prototype.setCssClass = function (e) {\n        var baseQuickToolbarObj = [\n            this.inlineQTBar, this.imageQTBar, this.linkQTBar, this.textQTBar, this.tableQTBar\n        ];\n        for (var i = 0; i < baseQuickToolbarObj.length; i++) {\n            this.updateCss(baseQuickToolbarObj[i], e);\n        }\n    };\n    QuickToolbar.prototype.setRtl = function (args) {\n        if (this.inlineQTBar) {\n            this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.imageQTBar) {\n            this.imageQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.audioQTBar) {\n            this.audioQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.videoQTBar) {\n            this.videoQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.linkQTBar) {\n            this.linkQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.textQTBar) {\n            this.textQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    /**\n     * removeEventListener\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.removeEventListener = function () {\n        if (this.deBouncer) {\n            clearTimeout(this.deBouncer);\n            this.deBouncer = null;\n        }\n        this.parent.off(events.initialEnd, this.initializeQuickToolbars);\n        this.parent.off(events.mouseDown, this.renderQuickToolbars);\n        this.parent.off(events.toolbarUpdated, this.toolbarUpdated);\n        this.parent.off(events.drop, this.renderQuickToolbars);\n        this.unWireInlineQTBarEvents();\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.off(events.scroll, this.hideQuickToolbars);\n            this.parent.off(events.contentscroll, this.hideQuickToolbars);\n        }\n        this.parent.off(events.focusChange, this.hideQuickToolbars);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.rtlMode, this.setRtl);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.hidePopup, this.hideQuickToolbars);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} e - specifies the element.\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.quickToolbarSettings)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.quickToolbarSettings); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'actionOnScroll':\n                        if (e.newProp.quickToolbarSettings.actionOnScroll === 'none') {\n                            this.parent.off(events.scroll, this.hideQuickToolbars);\n                            this.parent.off(events.contentscroll, this.hideQuickToolbars);\n                        }\n                        else {\n                            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n                            this.parent.on(events.contentscroll, this.hideQuickToolbars, this);\n                        }\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.inlineQTBar) {\n            removeClass([this.parent.element], [CLS_INLINE]);\n            this.unWireInlineQTBarEvents();\n            this.hideInlineQTBar();\n        }\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            addClass([this.parent.element], [CLS_INLINE]);\n            this.wireInlineQTBarEvents();\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    QuickToolbar.prototype.getModuleName = function () {\n        return 'quickToolbar';\n    };\n    /**\n     *\n     * @returns {BaseQuickToolbar[]} - specifies the quick toolbar instance.\n     * @hidden\n     * @private\n     */\n    QuickToolbar.prototype.getQuickToolbarInstance = function () {\n        return [this.linkQTBar, this.imageQTBar, this.audioQTBar, this.videoQTBar, this.tableQTBar, this.textQTBar, this.inlineQTBar];\n    };\n    return QuickToolbar;\n}());\nexport { QuickToolbar };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}