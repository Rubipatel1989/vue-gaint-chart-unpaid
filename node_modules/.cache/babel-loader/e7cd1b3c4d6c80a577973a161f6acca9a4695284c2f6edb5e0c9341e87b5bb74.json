{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport \"core-js/modules/esnext.iterator.take.js\";\n/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren, getDatePredicate, getObject, extendObjWithFn, eventPromise, setChecked, clearReactVueTemplates, padZero, Global } from '../base/util';\nimport { remove, debounce, Internationalization, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData, resetDialogAppend } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue, getListHeight, infiniteRemoveElements, infiniteAppendElements } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilterBase` module is used to handle filtering action.\n */\nvar CheckBoxFilterBase = /** @class */function () {\n  /**\n   * Constructor for checkbox filtering module\n   *\n   * @param {IXLFilter} parent - specifies the IXLFilter\n   * @hidden\n   */\n  function CheckBoxFilterBase(parent) {\n    this.searchInputArgs = null;\n    this.isExecuteLocal = false;\n    this.existingPredicate = {};\n    this.foreignKeyQuery = new Query();\n    /** @hidden */\n    this.filterState = true;\n    this.values = {};\n    this.renderEmpty = false;\n    this.isCheckboxFilterTemplate = false;\n    this.infiniteRenderMod = false;\n    // for infinite scroll ui\n    this.infiniteInitialLoad = false;\n    this.infiniteSearchValChange = false;\n    this.infinitePermenantLocalData = [];\n    this.infiniteQueryExecutionPending = false;\n    this.infiniteSkipCnt = 0;\n    this.infiniteScrollAppendDiff = 0;\n    this.prevInfiniteScrollDirection = '';\n    this.infiniteLoadedElem = [];\n    this.infiniteDataCount = 0;\n    this.infiniteLocalSelectAll = true;\n    this.localInfiniteSelectAllClicked = false;\n    this.localInfiniteSelectionInteracted = false;\n    this.infiniteManualSelectMaintainPred = [];\n    this.parent = parent;\n    this.id = this.parent.element.id;\n    this.valueFormatter = new ValueFormatter(this.parent.locale);\n    this.cBoxTrue = createCheckBox(this.parent.createElement, false, {\n      checked: true,\n      label: ' '\n    });\n    this.cBoxFalse = createCheckBox(this.parent.createElement, false, {\n      checked: false,\n      label: ' '\n    });\n    this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden',\n      attrs: {\n        type: 'checkbox'\n      }\n    }), this.cBoxTrue.firstChild);\n    this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden',\n      attrs: {\n        'type': 'checkbox'\n      }\n    }), this.cBoxFalse.firstChild);\n    this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n    if (this.parent.enableRtl) {\n      addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n    }\n    if (this.parent.cssClass) {\n      if (this.parent.cssClass.indexOf(' ') !== -1) {\n        addClass([this.cBoxTrue, this.cBoxFalse], this.parent.cssClass.split(' '));\n      } else {\n        addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n      }\n    }\n  }\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.destroy = function () {\n    this.closeDialog();\n  };\n  CheckBoxFilterBase.prototype.wireEvents = function () {\n    EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n    EventHandler.add(this.dlg, 'keyup', this.keyupHandler, this);\n    this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n    var elem = this.dialogObj.element.querySelector('.e-searchinput');\n    if (elem) {\n      EventHandler.add(elem, 'keyup', this.searchHandler, this);\n      EventHandler.add(elem, 'input', this.searchHandler, this);\n    }\n  };\n  CheckBoxFilterBase.prototype.unWireEvents = function () {\n    EventHandler.remove(this.dlg, 'click', this.clickHandler);\n    EventHandler.remove(this.dlg, 'keyup', this.keyupHandler);\n    var elem = this.dialogObj.element.querySelector('.e-searchinput');\n    if (elem) {\n      EventHandler.remove(elem, 'keyup', this.searchHandler);\n      EventHandler.remove(elem, 'input', this.searchHandler);\n    }\n  };\n  CheckBoxFilterBase.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n    var _this = this;\n    var fPredicate = {};\n    var filterCollection = [];\n    var query = this.foreignKeyQuery.clone();\n    this.options.column.dataSource.executeQuery(query.where(mPredicate)).then(function (e) {\n      _this.options.column.columnData = e.result;\n      _this.parent.notify(events.generateQuery, {\n        predicate: fPredicate,\n        column: _this.options.column\n      });\n      args.ejpredicate = fPredicate.predicate.predicates;\n      var fpred = fPredicate.predicate.predicates;\n      for (var i = 0; i < fpred.length; i++) {\n        filterCollection.push({\n          field: fpred[parseInt(i.toString(), 10)].field,\n          predicate: 'or',\n          matchCase: fpred[parseInt(i.toString(), 10)].ignoreCase,\n          ignoreAccent: fpred[parseInt(i.toString(), 10)].ignoreAccent,\n          operator: fpred[parseInt(i.toString(), 10)].operator,\n          value: fpred[parseInt(i.toString(), 10)].value,\n          type: _this.options.type\n        });\n      }\n      args.filterCollection = filterCollection.length ? filterCollection : fColl.filter(function (col) {\n        return col.field = _this.options.field;\n      });\n      _this.options.handler(args);\n    });\n  };\n  CheckBoxFilterBase.prototype.searchBoxClick = function (e) {\n    var target = e.target;\n    if (target.classList.contains('e-searchclear')) {\n      this.sInput.value = target.classList.contains('e-chkcancel-icon') ? '' : this.sInput.value;\n      if (this.isCheckboxFilterTemplate) {\n        this.parent.notify('refreshCheckbox', {\n          event: e\n        });\n      } else {\n        this.refreshCheckboxes();\n      }\n      this.updateSearchIcon();\n      this.sInput.focus();\n    }\n  };\n  CheckBoxFilterBase.prototype.searchBoxKeyUp = function (e) {\n    if (isNullOrUndefined(this.sInput)) {\n      return;\n    }\n    if (isNullOrUndefined(e) || e.key !== 'ArrowUp' && e.key !== 'ArrowDown' && e.key !== 'Tab' && !(e.key === 'Tab' && e.shiftKey)) {\n      if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n        this.parent.showMaskRow(undefined, this.dialogObj.element);\n      }\n      if (this.isCheckboxFilterTemplate) {\n        this.parent.notify('refreshCheckbox', {\n          event: e\n        });\n      } else {\n        this.refreshCheckboxes();\n      }\n      this.updateSearchIcon();\n    }\n  };\n  CheckBoxFilterBase.prototype.updateSearchIcon = function () {\n    if (this.sInput.value.length) {\n      classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n      if (!isNullOrUndefined(document.body.querySelector('.e-chkcancel-icon'))) {\n        document.body.querySelector('.e-chkcancel-icon').setAttribute('title', this.localeObj.getConstant('Clear'));\n      }\n    } else {\n      classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n      if (!isNullOrUndefined(document.body.querySelector('.e-searchclear.e-search-icon'))) {\n        document.body.querySelector('.e-searchclear.e-search-icon').setAttribute('title', this.localeObj.getConstant('Search'));\n      }\n    }\n  };\n  /**\n   * Gets the localized label by locale keyword.\n   *\n   * @param {string} key - Defines localization key\n   * @returns {string} - returns localization label\n   */\n  CheckBoxFilterBase.prototype.getLocalizedLabel = function (key) {\n    return this.localeObj.getConstant(key);\n  };\n  CheckBoxFilterBase.prototype.updateDataSource = function () {\n    var dataSource = this.options.dataSource;\n    var str = 'object';\n    if (!(dataSource instanceof DataManager)) {\n      for (var i = 0; i < dataSource.length; i++) {\n        // eslint-disable-next-line valid-typeof\n        if (typeof dataSource !== str) {\n          var obj = {};\n          obj[this.options.field] = dataSource[parseInt(i.toString(), 10)];\n          dataSource[parseInt(i.toString(), 10)] = obj;\n        }\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.updateModel = function (options) {\n    this.options = options;\n    this.existingPredicate = options.actualPredicate || {};\n    this.options.dataSource = options.dataSource;\n    this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;\n    this.updateDataSource();\n    this.options.type = options.type;\n    this.options.format = options.format || '';\n    this.options.ignoreAccent = options.ignoreAccent || false;\n    this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n    this.options.query = options.query || new Query();\n    this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n    this.options.uid = options.column.uid;\n    this.options.disableHtmlEncode = options.column.disableHtmlEncode || false;\n    this.values = {};\n    this.localeObj = options.localeObj;\n    this.isFiltered = options.filteredColumns.length;\n    this.infiniteRenderMod = this.parent.filterSettings && this.parent.filterSettings.enableInfiniteScrolling ? true : false;\n    this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n  };\n  CheckBoxFilterBase.prototype.getAndSetChkElem = function (options) {\n    this.dlg = this.parent.createElement('div', {\n      id: this.id + this.options.type + '_excelDlg',\n      attrs: {\n        uid: this.options.column.uid\n      },\n      className: 'e-checkboxfilter e-filter-popup'\n    });\n    this.sBox = this.parent.createElement('div', {\n      className: 'e-searchcontainer'\n    });\n    if (!options.hideSearchbox) {\n      this.sInput = this.parent.createElement('input', {\n        id: this.id + '_SearchBox',\n        className: 'e-searchinput'\n      });\n      this.sIcon = this.parent.createElement('span', {\n        className: 'e-searchclear e-search-icon e-icons e-input-group-icon',\n        attrs: {\n          type: 'text',\n          title: this.getLocalizedLabel('Search')\n        }\n      });\n      this.searchBox = this.parent.createElement('span', {\n        className: 'e-searchbox e-fields'\n      });\n      this.searchBox.appendChild(this.sInput);\n      this.sBox.appendChild(this.searchBox);\n      this.searchInputArgs = {\n        element: this.sInput,\n        floatLabelType: 'Never',\n        properties: {\n          placeholder: this.getLocalizedLabel('Search'),\n          cssClass: this.parent.cssClass\n        }\n      };\n      Input.createInput(this.searchInputArgs, this.parent.createElement);\n      this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n    }\n    this.spinner = this.parent.createElement('div', {\n      className: 'e-spinner'\n    }); //for spinner\n    this.cBox = this.parent.createElement('div', {\n      id: this.id + this.options.type + '_CheckBoxList',\n      className: 'e-checkboxlist e-fields'\n    });\n    this.spinner.appendChild(this.cBox);\n    this.sBox.appendChild(this.spinner);\n    return this.sBox;\n  };\n  CheckBoxFilterBase.prototype.showDialog = function (options) {\n    var args = {\n      requestType: events.filterBeforeOpen,\n      columnName: this.options.field,\n      columnType: this.options.type,\n      cancel: false\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    this.parent.notify(events.cBoxFltrBegin, args);\n    if (args.cancel) {\n      options.cancel = args.cancel;\n      return;\n    }\n    this.dialogObj = new Dialog({\n      visible: false,\n      content: this.sBox,\n      close: this.closeDialog.bind(this),\n      enableRtl: this.parent.enableRtl,\n      width: !isNullOrUndefined(parentsUntil(options.target, 'e-bigger')) || this.parent.element.classList.contains('e-device') ? 260 : 255,\n      target: this.parent.element,\n      animationSettings: {\n        effect: 'None'\n      },\n      buttons: [{\n        click: this.btnClick.bind(this),\n        buttonModel: {\n          content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n          cssClass: this.parent.cssClass ? 'e-primary' + ' ' + this.parent.cssClass : 'e-primary',\n          isPrimary: true\n        }\n      }, {\n        click: this.btnClick.bind(this),\n        buttonModel: {\n          cssClass: this.parent.cssClass ? 'e-flat' + ' ' + this.parent.cssClass : 'e-flat',\n          content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton')\n        }\n      }],\n      created: this.dialogCreated.bind(this),\n      open: this.dialogOpen.bind(this),\n      cssClass: this.parent.cssClass ? this.parent.cssClass : ''\n    });\n    var isStringTemplate = 'isStringTemplate';\n    this.dialogObj[\"\" + isStringTemplate] = true;\n    this.renderResponsiveFilter(options);\n    var dialogLabel = this.parent.filterSettings && this.parent.filterSettings.type === 'CheckBox' ? this.getLocalizedLabel('CheckBoxFilterDialogARIA') : this.getLocalizedLabel('ExcelFilterDialogARIA');\n    this.dlg.setAttribute('aria-label', dialogLabel);\n    if (options.isResponsiveFilter) {\n      var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n      responsiveCnt.appendChild(this.dlg);\n    } else {\n      this.parent.element.appendChild(this.dlg);\n    }\n    this.dialogObj.appendTo(this.dlg);\n    this.dialogObj.element.style.maxHeight = options.isResponsiveFilter ? 'none' : this.options.height + 'px';\n    this.dialogObj.show();\n    if (this.parent && this.parent.filterSettings && this.parent.filterSettings.type === 'CheckBox' && this.parent.getContent().firstElementChild.offsetHeight < this.dialogObj.element.offsetHeight && !parentsUntil(this.parent.element, 'e-gantt-dialog')) {\n      resetDialogAppend(this.parent, this.dialogObj);\n    }\n    var content = this.dialogObj.element.querySelector('.e-dlg-content');\n    content.appendChild(this.sBox);\n    this.wireEvents();\n    if (!this.parent.enableAdaptiveUI) {\n      if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer' && !this.infiniteRenderMod) {\n        this.parent.showMaskRow(undefined, this.dialogObj.element);\n      }\n      if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n        this.showMask();\n      }\n    } else {\n      if (this.parent.enableAdaptiveUI && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n        this.getAllData();\n        return;\n      }\n      if (this.infiniteRenderMod) {\n        this.cBox.style.marginTop = getListHeight(this.cBox) + 'px';\n      }\n      createSpinner({\n        target: this.spinner,\n        cssClass: this.parent.cssClass ? this.parent.cssClass : null\n      }, this.parent.createElement);\n      showSpinner(this.spinner);\n    }\n    this.getAllData();\n  };\n  CheckBoxFilterBase.prototype.renderResponsiveFilter = function (options) {\n    if (options.isResponsiveFilter) {\n      this.dialogObj.buttons = [{}];\n      this.dialogObj.position = {\n        X: '',\n        Y: ''\n      };\n      this.dialogObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n      this.dialogObj.width = '100%';\n    }\n  };\n  CheckBoxFilterBase.prototype.dialogCreated = function (e) {\n    if (this.options.isResponsiveFilter) {\n      this.dialogObj.element.style.left = '0px';\n    } else {\n      if (!Browser.isDevice) {\n        getFilterMenuPostion(this.options.target, this.dialogObj);\n      } else {\n        this.dialogObj.position = {\n          X: 'center',\n          Y: 'center'\n        };\n      }\n    }\n    if (this.options.column.showColumnMenu) {\n      this.parent.notify(events.filterDialogCreated, e);\n    }\n  };\n  CheckBoxFilterBase.prototype.openDialog = function (options) {\n    this.updateModel(options);\n    this.getAndSetChkElem(options);\n    this.showDialog(options);\n  };\n  CheckBoxFilterBase.prototype.closeDialog = function () {\n    if (this.infiniteRenderMod && this.infinitePermenantLocalData.length && !this.options.isRemote) {\n      this.options.dataSource.dataSource.json = this.infinitePermenantLocalData;\n    }\n    if (this.dialogObj && !this.dialogObj.isDestroyed) {\n      this.isBlanks = false;\n      var filterTemplateCol = this.options.columns.filter(function (col) {\n        return col.getFilterItemTemplate();\n      });\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var registeredTemplate = this.parent.registeredTemplate;\n      if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {\n        this.parent.destroyTemplate(['filterItemTemplate']);\n      }\n      if ((this.parent.isReact || this.parent.isVue) && this.parent.destroyTemplate !== undefined) {\n        clearReactVueTemplates(this.parent, ['filterItemTemplate']);\n      }\n      this.parent.notify(events.filterMenuClose, {\n        field: this.options.field\n      });\n      this.unWireEvents();\n      if (this.searchInputArgs && this.searchInputArgs.element && this.searchInputArgs.element.parentElement) {\n        Input.destroy(this.searchInputArgs);\n        remove(this.searchInputArgs.element);\n      }\n      this.searchInputArgs = null;\n      this.sInput = null;\n      if (this.parent.isReact && this.options.column.filter && typeof this.options.column.filter.itemTemplate !== 'string' && (this.options.column.filter.type === 'CheckBox' || this.options.column.filter.type === 'Excel')) {\n        this.dialogObj.element.querySelector('.e-dlg-content').innerHTML = '';\n      }\n      this.dialogObj.destroy();\n      if (this.dlg && this.dlg.parentElement) {\n        remove(this.dlg);\n      }\n      this.dlg = null;\n      this.parent.notify(events.filterDialogClose, {});\n    }\n  };\n  /**\n   * @param {Column} col - Defines column details\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.clearFilter = function (col) {\n    // eslint-disable-next-line max-len\n    var args = {\n      instance: this,\n      handler: this.clearFilter,\n      cancel: false\n    };\n    this.parent.notify(events.fltrPrevent, args);\n    if (args.cancel) {\n      return;\n    }\n    this.options.handler({\n      action: 'clear-filter',\n      field: col ? col.field : this.options.field\n    });\n  };\n  CheckBoxFilterBase.prototype.btnClick = function (e) {\n    if (this.filterState) {\n      if (e.target.tagName.toLowerCase() === 'input' && e.target.classList.contains('e-searchinput') || e.keyCode === 13) {\n        if (!this.isCheckboxFilterTemplate) {\n          this.fltrBtnHandler();\n        }\n      } else {\n        var text = e.target.firstChild.textContent.toLowerCase();\n        if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n          if (!this.isCheckboxFilterTemplate) {\n            this.fltrBtnHandler();\n          }\n        } else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n          this.clearFilter();\n        }\n      }\n      this.closeDialog();\n    } else if (e.target && e.target.firstChild && e.target.firstChild.textContent.toLowerCase() === this.getLocalizedLabel('CancelButton').toLowerCase()) {\n      this.closeDialog();\n    } else if (!(e.target.tagName.toLowerCase() === 'input')) {\n      this.clearFilter();\n      this.closeDialog();\n    }\n    if (this.options.column.showColumnMenu) {\n      this.parent.notify(events.afterFilterColumnMenuClose, {});\n    }\n    if (!isNullOrUndefined(this.parent.focusModule)) {\n      this.parent.focusModule.filterfocus();\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.fltrBtnHandler = function () {\n    var _this = this;\n    if (this.infiniteRenderMod) {\n      this.cBox.innerHTML = '';\n      appendChildren(this.cBox, this.infiniteLoadedElem.slice());\n    }\n    var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)'));\n    var check = checked;\n    var optr = 'equal';\n    var ddlValue = this.dialogObj.element.querySelector('.e-dropdownlist');\n    if (ddlValue) {\n      this.options.operator = optr = ddlValue.ej2_instances[0].value;\n    }\n    this.isMenuNotEqual = this.options.operator === 'notequal';\n    var searchInput;\n    if (!this.options.hideSearchbox) {\n      searchInput = this.searchBox.querySelector('.e-searchinput');\n    }\n    var caseSen = this.options.allowCaseSensitive;\n    var defaults = {\n      field: this.options.field,\n      predicate: this.isMenuNotEqual ? 'and' : 'or',\n      uid: this.options.uid,\n      operator: optr,\n      type: this.options.type,\n      matchCase: caseSen,\n      ignoreAccent: this.options.ignoreAccent\n    };\n    var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n    if (isNotEqual && searchInput && searchInput.value === '') {\n      optr = this.isMenuNotEqual ? 'equal' : 'notequal';\n      checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n      defaults.predicate = this.isMenuNotEqual ? 'or' : 'and';\n      defaults.operator = optr;\n    }\n    var val;\n    var length;\n    var coll = [];\n    if (checked.length !== this.itemsCnt || searchInput && searchInput.value && searchInput.value !== '' || this.infiniteRenderMod) {\n      if (!this.infiniteRenderMod) {\n        coll = this.complexQueryPredicate(checked, defaults, isNotEqual);\n      } else if (this.infiniteRenderMod && (!this.infiniteSearchPred || this.infiniteSearchPred && !this.infiniteSearchPred.isComplex)) {\n        this.infiniteFltrBtnHandler(coll);\n      } else {\n        if (this.infiniteSearchPred.isComplex) {\n          coll = this.complexQueryPredicate(checked, defaults, isNotEqual);\n        }\n      }\n      if ((this.options.type === 'date' || this.options.type === 'datetime') && check.length) {\n        length = check.length - 1;\n        val = this.values[parentsUntil(check[parseInt(length.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n        if (isNullOrUndefined(val) && isNotEqual) {\n          coll.push({\n            field: defaults.field,\n            matchCase: defaults.matchCase,\n            operator: 'equal',\n            predicate: 'or',\n            value: null\n          });\n        }\n      }\n      var addCurrSelection = this.infiniteRenderMod ? this.sBox.querySelector('.e-add-current') : this.cBox.querySelector('.e-add-current');\n      if (addCurrSelection && addCurrSelection.classList.contains('e-check')) {\n        var existingPredicate_1 = this.existingPredicate[this.options.field];\n        if (existingPredicate_1) {\n          var _loop_1 = function (j) {\n            if (!coll.some(function (data) {\n              return data.value === existingPredicate_1[parseInt(j.toString(), 10)].value;\n            })) {\n              coll.push(existingPredicate_1[parseInt(j.toString(), 10)]);\n            }\n          };\n          for (var j = 0; j < existingPredicate_1.length; j++) {\n            _loop_1(j);\n          }\n        } else {\n          return;\n        }\n      }\n      if (!this.infiniteRenderMod) {\n        this.initiateFilter(coll);\n      } else if (coll.length) {\n        this.initiateFilter(coll);\n      } else if (this.sBox.querySelector('.e-selectall').classList.contains('e-check') && !coll.length) {\n        var isClearFilter = this.options.filteredColumns.some(function (value) {\n          return _this.options.field === value.field;\n        });\n        if (isClearFilter) {\n          this.clearFilter();\n        }\n      }\n    } else {\n      var isClearFilter = this.options.filteredColumns.some(function (value) {\n        return _this.options.field === value.field;\n      });\n      if (isClearFilter) {\n        this.clearFilter();\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.complexQueryPredicate = function (checkBoxChecked, defaults, isNotEqual) {\n    var value;\n    var fObj;\n    var coll = [];\n    for (var i = 0; i < checkBoxChecked.length; i++) {\n      value = this.values[parentsUntil(checkBoxChecked[parseInt(i.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n      fObj = extend({}, {\n        value: value\n      }, defaults);\n      if (value && !value.toString().length) {\n        fObj.operator = isNotEqual ? 'notequal' : 'equal';\n      }\n      if (value === '' || isNullOrUndefined(value)) {\n        coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n      } else {\n        coll.push(fObj);\n      }\n      this.notifyFilterPrevEvent(fObj);\n    }\n    return coll;\n  };\n  CheckBoxFilterBase.prototype.infiniteFltrBtnHandler = function (coll) {\n    var value;\n    if (this.infiniteManualSelectMaintainPred.length) {\n      for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n        var pred = this.infiniteManualSelectMaintainPred[i];\n        value = pred.value + '';\n        if (value === '' || isNullOrUndefined(value)) {\n          var dummyDefaults = {\n            predicate: pred.predicate,\n            field: pred.field,\n            type: pred.type,\n            uid: pred.uid,\n            operator: pred.operator,\n            matchCase: pred.matchCase,\n            ignoreAccent: pred.ignoreAccent\n          };\n          coll.push.apply(coll, CheckBoxFilterBase.generateNullValuePredicates(dummyDefaults));\n        } else {\n          coll.push(this.infiniteManualSelectMaintainPred[i]);\n        }\n        this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[i]);\n      }\n    }\n    if (!this.localInfiniteSelectAllClicked && this.sInput.value === '' && !(!this.options.parentCurrentViewDataCount && coll.length)) {\n      for (var i = 0; i < this.infiniteUnloadParentExistPred.length; i++) {\n        coll.unshift(this.infiniteUnloadParentExistPred[i]);\n        this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][i]);\n      }\n    }\n    if (this.sInput.value !== '' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll)) {\n      this.infiniteSearchPred['predicate'] = 'or';\n      coll.unshift(this.infiniteSearchPred);\n      this.notifyFilterPrevEvent(this.infiniteSearchPred);\n    }\n  };\n  CheckBoxFilterBase.prototype.notifyFilterPrevEvent = function (predicate) {\n    var args = {\n      instance: this,\n      handler: this.fltrBtnHandler,\n      arg1: predicate.field,\n      arg2: predicate.predicate,\n      arg3: predicate.operator,\n      arg4: predicate.matchCase,\n      arg5: predicate.ignoreAccent,\n      arg6: predicate.value,\n      cancel: false\n    };\n    this.parent.notify(events.fltrPrevent, args);\n    if (args.cancel) {\n      return;\n    }\n  };\n  // eslint-disable-next-line\n  /** @hidden */\n  CheckBoxFilterBase.generateNullValuePredicates = function (defaults) {\n    var coll = [];\n    if (defaults.type === 'string') {\n      coll.push({\n        field: defaults.field,\n        ignoreAccent: defaults.ignoreAccent,\n        matchCase: defaults.matchCase,\n        operator: defaults.operator,\n        predicate: defaults.predicate,\n        value: ''\n      });\n    }\n    coll.push({\n      field: defaults.field,\n      matchCase: defaults.matchCase,\n      operator: defaults.operator,\n      predicate: defaults.predicate,\n      value: null\n    });\n    coll.push({\n      field: defaults.field,\n      matchCase: defaults.matchCase,\n      operator: defaults.operator,\n      predicate: defaults.predicate,\n      value: undefined\n    });\n    return coll;\n  };\n  // eslint-disable-next-line\n  /** @hidden */\n  CheckBoxFilterBase.prototype.initiateFilter = function (fColl) {\n    var firstVal = fColl[0];\n    var predicate;\n    if (!isNullOrUndefined(firstVal)) {\n      predicate = firstVal.ejpredicate ? firstVal.ejpredicate : new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n      for (var j = 1; j < fColl.length; j++) {\n        predicate = fColl[parseInt(j.toString(), 10)].ejpredicate !== undefined ? predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].ejpredicate) : predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].field, fColl[parseInt(j.toString(), 10)].operator, fColl[parseInt(j.toString(), 10)].value, !fColl[parseInt(j.toString(), 10)].matchCase, fColl[parseInt(j.toString(), 10)].ignoreAccent);\n      }\n      var args = {\n        action: 'filtering',\n        filterCollection: fColl,\n        field: this.options.field,\n        ejpredicate: Predicate.or(predicate)\n      };\n      this.options.handler(args);\n    }\n  };\n  CheckBoxFilterBase.prototype.isForeignColumn = function (col) {\n    return col.isForeignColumn ? col.isForeignColumn() : false;\n  };\n  CheckBoxFilterBase.prototype.refreshCheckboxes = function () {\n    var _this = this;\n    var val = this.sInput.value;\n    var column = this.options.column;\n    var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();\n    var foreignQuery = this.options.query.clone();\n    var pred = query.queries.filter(function (e) {\n      return e && e.fn === 'onWhere';\n    })[0];\n    query.queries = [];\n    foreignQuery.queries = [];\n    var parsed = this.options.type !== 'string' && parseFloat(val) ? parseFloat(val) : val;\n    var operator = this.options.isRemote ? this.options.type === 'string' ? 'contains' : 'equal' : this.options.type ? 'contains' : 'equal';\n    var matchCase = true;\n    var ignoreAccent = this.options.ignoreAccent;\n    var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;\n    parsed = parsed === '' || parsed === undefined ? undefined : parsed;\n    var coll = [];\n    var defaults = {\n      field: field,\n      predicate: 'or',\n      uid: this.options.uid,\n      operator: 'equal',\n      type: this.options.type,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent\n    };\n    var predicte;\n    var moduleName = this.options.dataManager.adaptor.getModuleName;\n    if (this.options.type === 'boolean') {\n      if (parsed !== undefined && this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n        parsed = 'true';\n      } else if (parsed !== undefined && this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n        parsed = 'false';\n      }\n      if (parsed !== undefined && this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n        // eslint-disable-next-line no-constant-condition\n        parsed = moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor' ? true : 'true';\n      } else if (parsed !== undefined && this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n        // eslint-disable-next-line no-constant-condition\n        parsed = moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor' ? false : 'false';\n      }\n      operator = 'equal';\n    }\n    if ((this.options.type === 'date' || this.options.type === 'datetime' || this.options.type === 'dateonly') && this.options.format) {\n      var intl = new Internationalization();\n      var format = typeof this.options.format === 'string' ? this.options.format : this.options.format.format;\n      if (format) {\n        parsed = intl.parseDate(val, {\n          format: format\n        }) || new Date(val);\n      } else {\n        parsed = new Date(val);\n      }\n      if (this.options.type === 'dateonly') {\n        parsed = parsed.getFullYear() + '-' + padZero(parsed.getMonth() + 1) + '-' + padZero(parsed.getDate());\n      }\n    }\n    this.infiniteSearchValChange = true;\n    this.infiniteLoadedElem = [];\n    this.infiniteLocalSelectAll = true;\n    this.localInfiniteSelectAllClicked = false;\n    this.localInfiniteSelectionInteracted = false;\n    this.infiniteSkipCnt = 0;\n    this.infiniteDataCount = 0;\n    this.infiniteManualSelectMaintainPred = [];\n    if (this.sInput.value === '') {\n      this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n    } else {\n      this.infiniteUnloadParentExistPred = [];\n    }\n    this.addDistinct(query);\n    var args = {\n      requestType: events.filterSearchBegin,\n      filterModel: this,\n      columnName: field,\n      column: column,\n      operator: operator,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent,\n      filterChoiceCount: null,\n      query: query,\n      value: parsed\n    };\n    if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n      args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n    }\n    this.parent.trigger(events.actionBegin, args, function (filterargs) {\n      // eslint-disable-next-line no-self-assign\n      filterargs.operator = filterargs.operator;\n      predicte = new Predicate(field, filterargs.operator, args.value, filterargs.matchCase, filterargs.ignoreAccent);\n      if (_this.options.type === 'date' || _this.options.type === 'datetime' || _this.options.type === 'dateonly') {\n        operator = 'equal';\n        var filterObj = {\n          field: field,\n          operator: operator,\n          value: parsed,\n          matchCase: matchCase,\n          ignoreAccent: ignoreAccent\n        };\n        if (!isNullOrUndefined(parsed)) {\n          predicte = getDatePredicate(filterObj, _this.options.type);\n        }\n      }\n      if (val && typeof val === 'string' && _this.isBlanks && _this.getLocalizedLabel('Blanks').toLowerCase().indexOf(val.toLowerCase()) >= 0) {\n        coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n        var emptyValPredicte = CheckBoxFilterBase.generatePredicate(coll);\n        emptyValPredicte.predicates.push(predicte);\n        predicte = emptyValPredicte;\n        query.where(emptyValPredicte);\n      } else if (val.length) {\n        predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;\n        query.where(predicte);\n      } else if (!isNullOrUndefined(pred)) {\n        predicte = pred.e;\n        query.where(pred.e);\n      }\n      _this.infiniteSearchPred = predicte;\n      filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1000;\n      if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== filterargs.filterChoiceCount) {\n        _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n      }\n      var fPredicate = {};\n      showSpinner(_this.spinner);\n      _this.renderEmpty = false;\n      if (_this.isForeignColumn(column) && val.length) {\n        var colData = 'result' in column.dataSource ? new DataManager(column.dataSource.result) : column.dataSource;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        colData.executeQuery(query).then(function (e) {\n          var columnData = _this.options.column.columnData;\n          _this.options.column.columnData = e.result;\n          _this.parent.notify(events.generateQuery, {\n            predicate: fPredicate,\n            column: column\n          });\n          if (fPredicate.predicate.predicates.length) {\n            foreignQuery.where(fPredicate.predicate);\n          } else {\n            _this.renderEmpty = true;\n          }\n          _this.options.column.columnData = columnData;\n          if (_this.infiniteRenderMod) {\n            _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n            _this.makeInfiniteScrollRequest(foreignQuery);\n            foreignQuery.requiresCount();\n          } else {\n            foreignQuery.take(filterargs.filterChoiceCount);\n          }\n          _this.search(filterargs, foreignQuery);\n        });\n      } else {\n        if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount) {\n          _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n          _this.makeInfiniteScrollRequest(query);\n          query.requiresCount();\n        } else {\n          query.take(filterargs.filterChoiceCount);\n        }\n        _this.search(filterargs, query);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.search = function (args, query) {\n    if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n      this.filterEvent(args, query);\n    } else {\n      this.processSearch(query);\n    }\n  };\n  CheckBoxFilterBase.prototype.getPredicateFromCols = function (columns, isExecuteLocal) {\n    var predicates = CheckBoxFilterBase.getPredicate(columns, isExecuteLocal);\n    var predicateList = [];\n    var fPredicate = {};\n    var isGrid = this.parent.getForeignKeyColumns !== undefined;\n    var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];\n    for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      var col = void 0;\n      if (isGrid && !this.parent.getColumnByField(prop)) {\n        col = getColumnByForeignKeyValue(prop, foreignColumn);\n      }\n      if (col) {\n        this.parent.notify(events.generateQuery, {\n          predicate: fPredicate,\n          column: col\n        });\n        if (fPredicate.predicate.predicates.length) {\n          predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n        }\n      } else {\n        predicateList.push(predicates[\"\" + prop]);\n      }\n    }\n    return predicateList.length && Predicate.and(predicateList);\n  };\n  CheckBoxFilterBase.prototype.getQuery = function () {\n    return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n  };\n  CheckBoxFilterBase.prototype.getAllData = function () {\n    var _this = this;\n    this.customQuery = false;\n    var query = this.getQuery();\n    var moduleName = this.options.dataManager.adaptor.getModuleName;\n    if (!(!isNullOrUndefined(this.parent.getDataModule) && moduleName && moduleName() === 'ODataV4Adaptor')) {\n      query.requiresCount(); //consider take query\n    }\n    this.addDistinct(query);\n    var args = {\n      requestType: events.filterChoiceRequest,\n      query: query,\n      filterChoiceCount: null\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n      args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n    }\n    this.parent.trigger(events.actionBegin, args, function (args) {\n      args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n      if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== args.filterChoiceCount) {\n        _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n      }\n      if (!_this.infiniteRenderMod) {\n        query.take(args.filterChoiceCount);\n      }\n      if (!args.query.distincts.length || _this.infiniteRenderMod) {\n        _this.customQuery = true;\n        _this.queryGenerate(query);\n      }\n      if (_this.infiniteRenderMod) {\n        _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n        _this.makeInfiniteScrollRequest(query);\n      }\n      if (_this.parent.dataSource && 'result' in _this.parent.dataSource) {\n        _this.filterEvent(args, query);\n      } else {\n        _this.processDataOperation(query, true);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.addDistinct = function (query) {\n    var _this = this;\n    var _a;\n    var filteredColumn = DataUtil.distinct(this.options.filteredColumns, 'field');\n    if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n      filteredColumn = filteredColumn.concat(this.options.column.field);\n    }\n    var moduleName = this.options.dataManager.adaptor.getModuleName;\n    if (moduleName && moduleName() === 'ODataV4Adaptor' && this.parent && this.parent.query instanceof Query) {\n      var gridQuery = this.parent.query;\n      for (var i = 0; i < gridQuery.queries.length; i++) {\n        if (gridQuery.queries[parseInt(i.toString(), 10)].fn === 'onWhere') {\n          var queryFilteredColumn = DataUtil.distinct([gridQuery.queries[parseInt(i.toString(), 10)].e], 'field');\n          queryFilteredColumn.map(function (field) {\n            if (filteredColumn.indexOf(field) === -1) {\n              filteredColumn.push(field);\n            }\n          });\n        }\n      }\n    }\n    if (!this.infiniteRenderMod) {\n      query.distinct(filteredColumn);\n    }\n    if (this.infiniteRenderMod && !this.options.isRemote && this.sInput.value === '') {\n      this.options.dataSource = this.options.dataSource instanceof DataManager ? this.options.dataSource : new DataManager(this.options.dataSource);\n      this.infinitePermenantLocalData = this.options.dataSource.dataSource.json.slice();\n      this.options.dataSource.dataSource.json = DataUtil.distinct((_a = this.options.parentFilteredLocalRecords).concat.apply(_a, this.infinitePermenantLocalData), this.options.column.field, true);\n      if (this.isForeignColumn(this.options.column)) {\n        this.options.column.dataSource = this.options.column.dataSource instanceof DataManager ? this.options.column.dataSource : new DataManager(this.options.column.dataSource);\n        this.options.dataSource.dataSource.json = this.options.dataSource.dataSource.json.map(function (item, i) {\n          return Object.assign({}, item, _this.options.column.dataSource.dataSource.json[i]);\n        });\n      }\n    } else if (this.infiniteRenderMod && this.options.isRemote) {\n      query.select(this.options.column.field);\n      query.sortBy(this.options.column.field, 'ascending');\n      var moduleName_1 = this.options.dataManager.adaptor.getModuleName;\n      if (moduleName_1 && moduleName_1() && (moduleName_1() === 'ODataV4Adaptor' || moduleName_1() === 'WebApiAdaptor' || moduleName_1() === 'CustomDataAdaptor' || moduleName_1() === 'GraphQLAdaptor' || moduleName_1() === 'ODataAdaptor')) {\n        query.distinct(filteredColumn);\n      }\n    }\n    return query;\n  };\n  CheckBoxFilterBase.prototype.filterEvent = function (args, query) {\n    var _this = this;\n    var defObj = eventPromise(args, query);\n    this.parent.trigger(events.dataStateChange, defObj.state);\n    this.addInfiniteScrollEvent(query);\n    var def = defObj.deffered;\n    def.promise.then(function (e) {\n      _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e['count'] : _this.infiniteDataCount;\n      var dataResult = _this.infiniteRenderMod ? e['result'] : e;\n      _this.dataSuccess(dataResult);\n    });\n  };\n  CheckBoxFilterBase.prototype.addInfiniteScrollEvent = function (query) {\n    if (this.infiniteRenderMod) {\n      this.infiniteQuery = query.clone();\n      if (this.infiniteInitialLoad) {\n        this.cBox.classList.add('e-checkbox-infinitescroll');\n        EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n        EventHandler.add(this.cBox, 'mouseup', this.infiniteScrollMouseKeyUpHandler, this);\n        EventHandler.add(this.cBox, 'mousedown', this.infiniteScrollMouseKeyDownHandler, this);\n      } else if (this.infiniteSearchValChange) {\n        this.cBox.innerHTML = '';\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.infiniteScrollMouseKeyDownHandler = function () {\n    EventHandler.remove(this.cBox, 'scroll', this.infiniteScrollHandler);\n  };\n  CheckBoxFilterBase.prototype.infiniteScrollMouseKeyUpHandler = function (e) {\n    var _this = this;\n    EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n    var target = this.cBox;\n    if (target.children.length > 1 && (target.scrollTop >= target.scrollHeight - target.offsetHeight || target.scrollTop <= 0)) {\n      this.infiniteScrollHandler();\n    }\n    Global.timer = setTimeout(function () {\n      _this.clickHandler(e);\n      Global.timer = null;\n    }, 0);\n  };\n  CheckBoxFilterBase.prototype.getShimmerTemplate = function () {\n    return '<span class=\"e-mask e-skeleton e-skeleton-text e-shimmer-wave\"></span>';\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.showMask = function () {\n    var maskRowCount = 5;\n    var maskItemHeight;\n    var maskList = this.parent.createElement('div', {\n      id: this.id + this.options.type + '_CheckBoxMaskList',\n      className: 'e-checkboxlist e-fields e-infinite-list e-masklist',\n      styles: 'z-index: 10;'\n    });\n    var wrapperElem = this.cBox;\n    this.removeMask();\n    if (wrapperElem) {\n      var computedStyle = getComputedStyle(wrapperElem);\n      var liHeight = getListHeight(wrapperElem);\n      var height = wrapperElem.children.length ? parseInt(computedStyle.height, 10) : Math.floor(parseInt(computedStyle.height.split('px')[0], 10)) - 5;\n      if (this.parent.enableAdaptiveUI && this.infiniteRenderMod) {\n        maskList.style.height = height - liHeight + 'px';\n        this.dlg.querySelector('.e-dlg-content').style.overflow = 'hidden';\n      }\n      var backgroundColor = this.isExcel && !wrapperElem.children.length && !this.dlg.classList.contains('e-excelfilter') ? '' : getComputedStyle(this.dlg.querySelector('.e-dlg-content')).backgroundColor;\n      maskList.style.cssText = 'width: ' + computedStyle.width + '; min-height: ' + computedStyle.minHeight + '; height: ' + height + 'px; margin: ' + computedStyle.margin + '; border-style: ' + computedStyle.borderStyle + '; border-width: ' + computedStyle.borderWidth + '; border-color: ' + computedStyle.borderColor + '; position: absolute; background-color: ' + backgroundColor + ';';\n      maskRowCount = Math.floor(height / liHeight);\n      maskRowCount = wrapperElem.children.length > maskRowCount ? wrapperElem.children.length : maskRowCount;\n      maskItemHeight = liHeight + 'px';\n    }\n    var maskTemplate = '<div class=\"e-ftrchk e-mask-ftrchk\" style=\"width: 100%; height:' + maskItemHeight + ';\">' + '<div class=\"e-checkbox-wrapper\" style=\"width: 100%;\"><input class=\"e-chk-hidden\">' + this.getShimmerTemplate() + this.getShimmerTemplate() + '</div></div>';\n    maskList.innerHTML = '';\n    if (!wrapperElem.children.length) {\n      this.spinner.insertAdjacentHTML('beforebegin', maskTemplate);\n      var maskSpan = [].slice.call(this.spinner.parentElement.querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n      maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n      maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n    }\n    this.spinner.insertBefore(maskList, this.cBox);\n    for (var i = 0; maskRowCount && i < maskRowCount; i++) {\n      maskList.innerHTML += maskTemplate;\n      var maskSpan = [].slice.call(maskList.querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n      maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n      maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n    }\n    if (this.cBox) {\n      maskList.scrollTop = this.cBox.scrollTop;\n    }\n  };\n  CheckBoxFilterBase.prototype.removeMask = function () {\n    var maskLists = this.dialogObj.element.querySelectorAll('.e-mask-ftrchk');\n    if (maskLists.length) {\n      for (var i = 0; i < maskLists.length; i++) {\n        remove(maskLists[i]);\n      }\n    }\n    var maskParent = this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist');\n    if (maskParent) {\n      remove(this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist'));\n    }\n  };\n  CheckBoxFilterBase.prototype.infiniteScrollHandler = function () {\n    var target = this.cBox;\n    if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending && this.infiniteLoadedElem.length <= this.infiniteSkipCnt + this.parent.filterSettings.itemsCount && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3 && (!this.infiniteDataCount || this.infiniteDataCount > this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)) {\n      this.makeInfiniteScrollRequest();\n      this.prevInfiniteScrollDirection = 'down';\n    } else if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending && this.infiniteLoadedElem.length > this.infiniteSkipCnt + this.parent.filterSettings.itemsCount && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.cBox.children).splice(0, this.parent.filterSettings.itemsCount));\n      this.infiniteSkipCnt += this.prevInfiniteScrollDirection === 'down' ? this.parent.filterSettings.itemsCount : this.parent.filterSettings.itemsCount * 3;\n      appendChildren(this.cBox, this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.parent.filterSettings.itemsCount + this.infiniteSkipCnt));\n      this.prevInfiniteScrollDirection = 'down';\n    } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt && this.infiniteLoadedElem.length && this.infiniteLoadedElem.length > this.parent.filterSettings.itemsCount * 3 && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount * 2, this.parent.filterSettings.itemsCount));\n      this.infiniteSkipCnt -= this.prevInfiniteScrollDirection === 'up' ? this.parent.filterSettings.itemsCount : this.parent.filterSettings.itemsCount * 3;\n      infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)), this.cBox);\n      this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n      this.prevInfiniteScrollDirection = 'up';\n    } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt && this.infiniteLoadedElem.length && this.cBox.children.length < this.parent.filterSettings.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount * 2, this.infiniteDataCount % this.parent.filterSettings.itemsCount));\n      this.infiniteSkipCnt = (Math.floor(this.infiniteDataCount / this.parent.filterSettings.itemsCount) - 3) * this.parent.filterSettings.itemsCount;\n      infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)), this.cBox);\n      this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n      this.prevInfiniteScrollDirection = 'up';\n    }\n  };\n  CheckBoxFilterBase.prototype.makeInfiniteScrollRequest = function (query) {\n    var _this = this;\n    if (!this.infiniteInitialLoad && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n      setTimeout(function () {\n        if (_this.infiniteQueryExecutionPending) {\n          _this.showMask();\n        }\n      }, 500);\n    } else if (!this.infiniteInitialLoad) {\n      createSpinner({\n        target: this.spinner,\n        cssClass: this.parent.cssClass ? this.parent.cssClass : null\n      }, this.parent.createElement);\n      showSpinner(this.spinner);\n    }\n    var fName = 'fn';\n    if (this.infiniteQuery && this.infiniteQuery.queries && this.infiniteQuery.queries.length) {\n      for (var i = 0; i < this.infiniteQuery.queries.length; i++) {\n        if (this.infiniteQuery.queries[i][\"\" + fName] === 'onTake' || this.infiniteQuery.queries[i][\"\" + fName] === 'onSkip') {\n          this.infiniteQuery.queries.splice(i, 1);\n          i--;\n        }\n      }\n    }\n    var existQuery = query ? true : false;\n    query = query ? query : this.infiniteQuery;\n    if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n      this.infiniteSkipCnt = 0;\n    } else {\n      this.infiniteSkipCnt += this.parent.filterSettings.itemsCount;\n    }\n    query.skip(this.infiniteSkipCnt);\n    if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n      query.take(this.parent.filterSettings.itemsCount * 3);\n      this.infiniteSkipCnt += this.parent.filterSettings.itemsCount * 2;\n    } else {\n      query.take(this.parent.filterSettings.itemsCount);\n    }\n    if (!existQuery) {\n      if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n        var args = {\n          requestType: events.filterChoiceRequest,\n          query: query,\n          filterChoiceCount: null,\n          filterModel: this\n        };\n        if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n          args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n        }\n        this.filterEvent(args, query);\n      } else {\n        this.processDataOperation(query);\n        this.infiniteQueryExecutionPending = true;\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.processDataOperation = function (query, isInitial) {\n    var _this = this;\n    this.options.dataSource = this.options.dataSource instanceof DataManager ? this.options.dataSource : new DataManager(this.options.dataSource);\n    var allPromise = [];\n    var runArray = [];\n    if (this.isForeignColumn(this.options.column) && isInitial) {\n      var colData = 'result' in this.options.column.dataSource ? new DataManager(this.options.column.dataSource.result) : this.options.column.dataSource;\n      this.foreignKeyQuery.params = query.params;\n      allPromise.push(colData.executeQuery(this.foreignKeyQuery));\n      runArray.push(function (data) {\n        return _this.foreignKeyData = data;\n      });\n    }\n    this.addInfiniteScrollEvent(query);\n    if (this.infiniteRenderMod && this.infiniteInitialLoad && !this.options.isRemote) {\n      var field = this.isForeignColumn(this.options.column) ? this.options.foreignKeyValue : this.options.column.field;\n      this.options.dataSource.executeQuery(new Query().sortBy(field, DataUtil.fnAscending)).then(function (e) {\n        _this.options.dataSource.dataSource.json = e.result;\n        _this.executeQueryOperations(query, allPromise, runArray);\n      });\n    } else {\n      this.executeQueryOperations(query, allPromise, runArray);\n    }\n  };\n  CheckBoxFilterBase.prototype.executeQueryOperations = function (query, allPromise, runArray) {\n    var _this = this;\n    allPromise.push(this.options.dataSource.executeQuery(query));\n    runArray.push(this.dataSuccess.bind(this));\n    var i = 0;\n    Promise.all(allPromise).then(function (e) {\n      _this.infiniteQueryExecutionPending = _this.infiniteRenderMod ? false : _this.infiniteQueryExecutionPending;\n      for (var j = 0; j < e.length; j++) {\n        _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e[j].count : _this.infiniteDataCount;\n        runArray[i++](e[parseInt(j.toString(), 10)].result);\n      }\n    }).catch(function () {\n      if (_this.infiniteRenderMod && _this.parent.filterSettings && _this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n        _this.parent.showMaskRow(undefined, _this.dialogObj.element);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.dataSuccess = function (e) {\n    if (!this.infiniteInitialLoad && this.infiniteDataCount && (this.infiniteSkipCnt >= this.infiniteDataCount && !this.infiniteSearchValChange || e.length === 0)) {\n      return;\n    }\n    this.fullData = e;\n    var args1 = {\n      dataSource: this.fullData,\n      executeQuery: true,\n      field: this.options.field\n    };\n    this.parent.notify(events.beforeCheckboxRenderer, args1);\n    if (args1.executeQuery) {\n      var query = new Query();\n      if (!this.customQuery) {\n        this.isExecuteLocal = true;\n        this.queryGenerate(query);\n        this.isExecuteLocal = false;\n      }\n      // query.select(this.options.field);\n      var result = new DataManager(args1.dataSource).executeLocal(query);\n      var col = this.options.column;\n      this.filteredData = CheckBoxFilterBase.getDistinct(result, this.options.field, col, this.foreignKeyData, this).records || [];\n    }\n    var data = args1.executeQuery ? this.filteredData : args1.dataSource;\n    this.processDataSource(null, true, data, args1);\n    if (this.sInput && (this.infiniteRenderMod && this.infiniteInitialLoad || !this.infiniteRenderMod)) {\n      this.sInput.focus();\n    }\n    if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n      this.infiniteInitialLoad = false;\n      this.infiniteSearchValChange = false;\n    }\n    var args = {\n      requestType: events.filterAfterOpen,\n      columnName: this.options.field,\n      columnType: this.options.type\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    this.parent.notify(events.cBoxFltrComplete, args);\n    if (this.isCheckboxFilterTemplate) {\n      hideSpinner(this.spinner);\n    }\n  };\n  CheckBoxFilterBase.prototype.queryGenerate = function (query) {\n    if (this.parent.searchSettings && this.parent.searchSettings.key.length) {\n      var moduleName = this.options.dataManager.adaptor.getModuleName;\n      if (!isNullOrUndefined(this.parent.getDataModule) && moduleName && moduleName() === 'ODataV4Adaptor') {\n        this.parent.getDataModule().searchQuery(query);\n      } else {\n        var searchSettings = this.parent.searchSettings;\n        var fields = searchSettings.fields.length ? searchSettings.fields : this.options.columns.map(function (f) {\n          return f.field;\n        });\n        query.search(searchSettings.key, fields, searchSettings.operator, searchSettings.ignoreCase, searchSettings.ignoreAccent);\n      }\n    }\n    if (this.options.filteredColumns.length) {\n      var cols = [];\n      for (var i = 0; i < this.options.filteredColumns.length; i++) {\n        var filterColumn = this.options.filteredColumns[parseInt(i.toString(), 10)];\n        if (this.options.uid) {\n          filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n          if (filterColumn.uid !== this.options.uid) {\n            cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n          }\n        } else {\n          if (filterColumn.field !== this.options.field) {\n            cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n          }\n        }\n      }\n      var predicate = this.getPredicateFromCols(cols, this.isExecuteLocal);\n      if (predicate) {\n        query.where(predicate);\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.processDataSource = function (query, isInitial, dataSource, args) {\n    showSpinner(this.spinner);\n    // query = query ? query : this.options.query.clone();\n    // query.requiresCount();\n    // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n    // let res: { result: Object[] } = result as { result: Object[] };\n    this.isExecuteLocal = true;\n    this.updateResult();\n    this.isExecuteLocal = false;\n    var args1 = {\n      dataSource: this.fullData,\n      isCheckboxFilterTemplate: false,\n      column: this.options.column,\n      element: this.cBox,\n      type: this.options.type,\n      format: this.options.type,\n      btnObj: this.options.isResponsiveFilter ? null : this.dialogObj.btnObj[0],\n      searchBox: this.searchBox\n    };\n    this.parent.notify(events.beforeCheckboxfilterRenderer, args1);\n    this.isCheckboxFilterTemplate = args1.isCheckboxFilterTemplate;\n    if (!this.isCheckboxFilterTemplate) {\n      this.createFilterItems(dataSource, isInitial, args);\n    } else if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n      this.removeMask();\n    }\n  };\n  CheckBoxFilterBase.prototype.processSearch = function (query) {\n    this.processDataOperation(query);\n  };\n  CheckBoxFilterBase.prototype.updateResult = function () {\n    this.result = {};\n    var predicate = this.infiniteRenderMod && this.existingPredicate[this.options.field] ? this.getPredicateFromCols(this.existingPredicate[this.options.field], this.isExecuteLocal) : this.getPredicateFromCols(this.options.filteredColumns, this.isExecuteLocal);\n    var query = new Query();\n    if (predicate) {\n      query.where(predicate);\n    }\n    this.parent.notify(events.beforeCheckboxRendererQuery, {\n      query: query\n    });\n    var result = new DataManager(this.fullData).executeLocal(query);\n    for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n      var res = result_1[_i];\n      this.result[getObject(this.options.field, res)] = true;\n    }\n  };\n  CheckBoxFilterBase.prototype.clickHandler = function (e) {\n    var _a;\n    if (!isNullOrUndefined(Global.timer)) {\n      clearTimeout(Global.timer);\n    }\n    var target = e.target;\n    if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer' && parentsUntil(target, 'e-mask-ftrchk')) {\n      return;\n    }\n    var elem = parentsUntil(target, 'e-checkbox-wrapper');\n    if (parentsUntil(target, 'e-searchbox')) {\n      this.searchBoxClick(e);\n    }\n    if (elem && !this.isCheckboxFilterTemplate) {\n      var selectAll = elem.querySelector('.e-selectall');\n      if (selectAll) {\n        this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n      } else {\n        toogleCheckbox(elem.parentElement);\n        if (this.infiniteRenderMod && !elem.parentElement.querySelector('.e-add-current')) {\n          this.localInfiniteSelectionInteracted = true;\n          var caseSen = this.options.allowCaseSensitive;\n          var span = elem.parentElement.querySelector('.e-frame');\n          var input = span.previousSibling;\n          var optr = input.checked ? 'equal' : 'notequal';\n          var pred = input.checked ? 'or' : 'and';\n          var defaults = {\n            field: this.options.field,\n            predicate: pred,\n            uid: this.options.uid,\n            operator: optr,\n            type: this.options.type,\n            matchCase: caseSen,\n            ignoreAccent: this.options.ignoreAccent\n          };\n          var value = this.values[parentsUntil(input, 'e-ftrchk').getAttribute('uid')];\n          this.updateInfiniteManualSelectPred(defaults, value);\n          if (this.infiniteRenderMod && !this.options.isRemote && this.options.parentTotalDataCount && this.infiniteUnloadParentExistPred.length) {\n            var predicate = this.getPredicateFromCols((_a = this.options.filteredColumns).concat.apply(_a, this.infiniteManualSelectMaintainPred), true);\n            var query = new Query();\n            if (predicate) {\n              query.where(predicate);\n            }\n            var result = new DataManager(this.infinitePermenantLocalData).executeLocal(query);\n            if (this.options.parentTotalDataCount !== result.length) {\n              this.options.parentTotalDataCount = result.length;\n            }\n            if (!this.options.parentTotalDataCount && this.infiniteUnloadParentExistPred.length) {\n              this.infiniteUnloadParentExistPred = [];\n            }\n          }\n          if (this.infiniteUnloadParentExistPred.length && (this.options.parentTotalDataCount === this.infiniteDataCount || !this.options.parentTotalDataCount)) {\n            this.infiniteUnloadParentExistPred = [];\n          }\n        }\n      }\n      this.updateIndeterminatenBtn();\n      elem.querySelector('.e-chk-hidden').focus();\n    }\n    this.setFocus(parentsUntil(elem, 'e-ftrchk'));\n  };\n  CheckBoxFilterBase.prototype.updateInfiniteManualSelectPred = function (defaults, value) {\n    for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n      var predmdl = this.infiniteManualSelectMaintainPred[i];\n      if (predmdl.value + '' === value + '' && (predmdl.operator === 'equal' || predmdl.operator === 'notequal')) {\n        this.infiniteManualSelectMaintainPred.splice(i, 1);\n        break;\n      }\n    }\n    if (defaults.predicate === 'or' && (!this.localInfiniteSelectAllClicked || !this.infiniteLocalSelectAll) || defaults.predicate === 'and' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll)) {\n      this.infiniteManualSelectMaintainPred.push(extend({}, {\n        value: value\n      }, defaults));\n      if (defaults.predicate === 'or') {\n        this.options.parentTotalDataCount++;\n      } else {\n        this.options.parentTotalDataCount--;\n      }\n    }\n  };\n  /**\n   * Method to set the next target element on keyboard navigation using arrow keys.\n   *\n   * @param {KeyboardEventArgs} e - Defines the Keyboard event argument\n   * @param {HTMLElement[]} focusableElements - Defines the Focusable elements\n   * @returns {void}\n   */\n  CheckBoxFilterBase.prototype.focusNextOrPrev = function (e, focusableElements) {\n    var nextIndex = e.key === 'ArrowUp' ? focusableElements.indexOf(document.activeElement) - 1 : focusableElements.indexOf(document.activeElement) + 1;\n    var nextElement = focusableElements[(nextIndex + focusableElements.length) % focusableElements.length];\n    // Set focus on the next / previous element\n    if (nextElement) {\n      nextElement.focus();\n      var target = nextElement.classList.contains('e-chk-hidden') ? parentsUntil(nextElement, 'e-ftrchk') : nextElement;\n      this.setFocus(target);\n    }\n  };\n  CheckBoxFilterBase.prototype.keyupHandler = function (e) {\n    if (e.key === 'Tab' || (e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey) {\n      this.setFocus(parentsUntil(e.target, 'e-ftrchk'));\n    }\n    if ((e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey && this.parent.filterSettings && this.parent.filterSettings.type === 'CheckBox') {\n      e.preventDefault();\n      var focusableElements = Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex=\"-1\"])'));\n      this.focusNextOrPrev(e, focusableElements);\n    }\n  };\n  CheckBoxFilterBase.prototype.setFocus = function (elem) {\n    var prevElem = this.dlg.querySelector('.e-chkfocus');\n    if (prevElem) {\n      prevElem.classList.remove('e-chkfocus');\n    }\n    if (elem && elem !== prevElem) {\n      elem.classList.add('e-chkfocus');\n    }\n  };\n  CheckBoxFilterBase.prototype.updateAllCBoxes = function (checked) {\n    if (this.infiniteRenderMod) {\n      this.localInfiniteSelectAllClicked = true;\n      this.infiniteLocalSelectAll = checked;\n      this.infiniteUnloadParentExistPred = [];\n      this.infiniteManualSelectMaintainPred = [];\n    }\n    var cBoxes = this.infiniteRenderMod ? this.infiniteLoadedElem.map(function (arr) {\n      return arr.querySelector('.e-frame');\n    }) : [].slice.call(this.cBox.querySelectorAll('.e-frame:not(.e-add-current)'));\n    for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n      var cBox = cBoxes_1[_i];\n      removeAddCboxClasses(cBox, checked);\n      setChecked(cBox.previousSibling, checked);\n    }\n  };\n  CheckBoxFilterBase.prototype.dialogOpen = function () {\n    if (this.parent.element.classList.contains('e-device')) {\n      this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n      if (!this.options.isResponsiveFilter) {\n        this.dialogObj.element.querySelector('.e-btn').focus();\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.createCheckbox = function (value, checked, data) {\n    var elem = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n    setChecked(elem.querySelector('input'), checked);\n    var label = elem.querySelector('.e-label');\n    var dummyData = extendObjWithFn({}, data, {\n      column: this.options.column,\n      parent: this.parent\n    });\n    var innerText = this.options.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    label[\"\" + innerText] = !isNullOrUndefined(value) && value.toString().length ? this.parent.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(value) : value : this.getLocalizedLabel('Blanks');\n    var checkboxUid = getUid('cbox');\n    label.setAttribute('id', checkboxUid + 'cboxLabel');\n    elem.querySelector('input').setAttribute('aria-labelledby', label.id);\n    if (label.innerHTML === this.getLocalizedLabel('Blanks')) {\n      this.isBlanks = true;\n    }\n    if (typeof value === 'boolean') {\n      label.innerHTML = value === true ? this.getLocalizedLabel('FilterTrue') : this.getLocalizedLabel('FilterFalse');\n    }\n    addClass([label], ['e-checkboxfiltertext']);\n    if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel('SelectAll') && data[this.options.column.field] !== this.getLocalizedLabel('AddCurrentSelection')) {\n      label.innerHTML = '';\n      var isReactCompiler = this.parent.isReact && this.options.column.filter && typeof this.options.column.filter.itemTemplate !== 'string' && !(this.options.column.filter.itemTemplate.prototype && this.options.column.filter.itemTemplate.prototype.CSPTemplate);\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this.parent.parentDetails.parentInstObj.isReact;\n      if (isReactCompiler || isReactChild) {\n        this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, label);\n        this.parent.renderTemplates();\n      } else {\n        appendChildren(label, this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, null, this.parent.root));\n      }\n    }\n    return elem;\n  };\n  CheckBoxFilterBase.prototype.updateIndeterminatenBtn = function () {\n    var cnt = this.infiniteRenderMod ? this.infiniteLoadedElem.length : this.cBox.children.length - 1;\n    var className = [];\n    var disabled = false;\n    var elem = this.infiniteRenderMod ? this.sBox.querySelector('.e-selectall') : this.cBox.querySelector('.e-selectall');\n    var selected = this.infiniteRenderMod ? this.infiniteLoadedElem.filter(function (arr) {\n      return arr.querySelector('.e-check');\n    }).length : this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)').length;\n    if (this.cBox.querySelector('.e-add-current')) {\n      cnt -= 1;\n    }\n    var btn;\n    if (!this.options.isResponsiveFilter) {\n      btn = this.dialogObj.btnObj[0];\n      btn.disabled = false;\n    }\n    var input = elem.previousSibling;\n    setChecked(input, false);\n    input.indeterminate = false;\n    if (this.infiniteRenderMod && this.sInput.value === '' && !this.options.parentCurrentViewDataCount && !this.localInfiniteSelectionInteracted && (!this.localInfiniteSelectAllClicked || !this.infiniteLocalSelectAll && !selected) && (cnt !== selected || cnt === selected)) {\n      selected = 0;\n    } else if (this.infiniteRenderMod && this.infiniteLoadedElem.length < this.infiniteDataCount && this.infiniteUnloadParentExistPred.length && (!selected || cnt === selected) && this.infiniteLocalSelectAll) {\n      if (!selected) {\n        selected += this.infiniteUnloadParentExistPred.length;\n      } else {\n        cnt += this.infiniteUnloadParentExistPred.length;\n      }\n    }\n    if (cnt === selected) {\n      if (this.infiniteRenderMod) {\n        this.infiniteLocalSelectAll = true;\n        this.localInfiniteSelectAllClicked = true;\n        this.infiniteManualSelectMaintainPred = [];\n      }\n      className = ['e-check'];\n      setChecked(input, true);\n    } else if (selected) {\n      className = ['e-stop'];\n      input.indeterminate = true;\n    } else {\n      if (this.infiniteRenderMod) {\n        this.infiniteLocalSelectAll = false;\n        this.localInfiniteSelectAllClicked = true;\n        this.infiniteManualSelectMaintainPred = [];\n      }\n      className = ['e-uncheck'];\n      disabled = true;\n      if (btn) {\n        btn.disabled = true;\n      }\n    }\n    if (btn) {\n      this.filterState = !btn.disabled;\n      btn.dataBind();\n    }\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    addClass([elem], className);\n    this.parent.notify(events.refreshCustomFilterOkBtn, {\n      disabled: disabled\n    });\n  };\n  CheckBoxFilterBase.prototype.createFilterItems = function (data, isInitial, args1) {\n    var _a, _b, _c;\n    var cBoxes = this.parent.createElement('div');\n    var btn;\n    var disabled = false;\n    if (!this.options.isResponsiveFilter) {\n      btn = this.dialogObj.btnObj[0];\n    }\n    var nullCounter = -1;\n    var key = 'ejValue';\n    if (!args1.executeQuery) {\n      key = args1.field;\n    }\n    for (var i = 0; i < data.length; i++) {\n      var val = getValue(key, data[parseInt(i.toString(), 10)]);\n      if (val === '' || isNullOrUndefined(val)) {\n        nullCounter = nullCounter + 1;\n      }\n    }\n    if (!this.infiniteRenderMod) {\n      this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n    }\n    if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n      this.removeMask();\n    }\n    if (data.length && !this.renderEmpty) {\n      var selectAllValue = this.getLocalizedLabel('SelectAll');\n      var innerDiv = this.cBox.querySelector('.e-checkfltrnmdiv');\n      if (innerDiv) {\n        innerDiv.classList.remove('e-checkfltrnmdiv');\n      }\n      var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n      if (this.parent.cssClass) {\n        if (this.parent.cssClass.indexOf(' ') !== -1) {\n          addClass([checkBox], this.parent.cssClass.split(' '));\n        } else {\n          addClass([checkBox], [this.parent.cssClass]);\n        }\n      }\n      if (this.infiniteInitialLoad || !this.infiniteRenderMod) {\n        var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n        selectAll.querySelector('.e-frame').classList.add('e-selectall');\n        if (this.infiniteRenderMod) {\n          selectAll.classList.add('e-infinitescroll');\n          if (this.parent.enableAdaptiveUI) {\n            this.spinner.style.height = this.spinner.offsetHeight - getListHeight(this.cBox) + 'px';\n          }\n          this.sBox.insertBefore(selectAll, this.spinner);\n        } else {\n          cBoxes.appendChild(selectAll);\n        }\n      } else if (this.sBox.querySelector('.e-ftrchk .e-selectall')) {\n        this.sBox.querySelector('.e-ftrchk .e-selectall').previousSibling.disabled = false;\n        this.sBox.querySelector('.e-ftrchk .e-selectall').parentElement.classList.remove('e-checkbox-disabled');\n      }\n      var predicate = new Predicate('field', 'equal', this.options.field);\n      if (this.options.foreignKeyValue) {\n        predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n      }\n      var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n      if (this.sInput.value) {\n        var predicateCheckBox = this.createCheckbox(this.getLocalizedLabel('AddCurrentSelection'), false, (_b = {}, _b[this.options.field] = this.getLocalizedLabel('AddCurrentSelection'), _b));\n        if (this.parent.cssClass) {\n          if (this.parent.cssClass.indexOf(' ') !== -1) {\n            addClass([predicateCheckBox], this.parent.cssClass.split(' '));\n          } else {\n            addClass([predicateCheckBox], [this.parent.cssClass]);\n          }\n        }\n        if (this.infiniteRenderMod && !isNullOrUndefined(this.sBox.children[2]) && this.sBox.children[2].innerText !== this.getLocalizedLabel('AddCurrentSelection') || !this.infiniteRenderMod) {\n          var predicateElement = createCboxWithWrap(getUid('cbox'), predicateCheckBox, 'e-ftrchk');\n          predicateElement.querySelector('.e-frame').classList.add('e-add-current');\n          if (this.infiniteRenderMod) {\n            predicateElement.classList.add('e-infinitescroll');\n            this.sBox.insertBefore(predicateElement, this.spinner);\n            var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n            var reduceHeight = Math.ceil(predicateElement.getBoundingClientRect().height);\n            checkBoxListElem.style.height = parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0], 10) - reduceHeight + 'px';\n            checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n          } else {\n            cBoxes.appendChild(predicateElement);\n          }\n        } else if (this.sBox.querySelector('.e-ftrchk .e-add-current')) {\n          this.sBox.querySelector('.e-ftrchk .e-add-current').previousSibling.disabled = false;\n          this.sBox.querySelector('.e-ftrchk .e-add-current').parentElement.classList.remove('e-checkbox-disabled');\n        }\n      } else if (this.infiniteRenderMod && !isNullOrUndefined(this.sBox.children[2]) && this.sBox.children[2].innerText === this.getLocalizedLabel('AddCurrentSelection')) {\n        var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n        var increaseHeight = Math.ceil(this.sBox.children[2].getBoundingClientRect().height);\n        checkBoxListElem.style.height = parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0], 10) + increaseHeight + 'px';\n        checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n        remove(this.sBox.children[2]);\n      }\n      var isRndere = void 0;\n      for (var i = 0; i < data.length; i++) {\n        var uid = getUid('cbox');\n        this.values[\"\" + uid] = getValue(key, data[parseInt(i.toString(), 10)]);\n        var value = getValue(this.options.field, data[parseInt(i.toString(), 10)]);\n        if (this.options.formatFn) {\n          value = this.valueFormatter.toView(value, this.options.formatFn);\n        }\n        var args_1 = {\n          value: value,\n          column: this.options.column,\n          data: data[parseInt(i.toString(), 10)]\n        };\n        this.parent.notify(events.filterCboxValue, args_1);\n        value = args_1.value;\n        if (value === '' || isNullOrUndefined(value)) {\n          if (isRndere) {\n            continue;\n          }\n          isRndere = true;\n        }\n        if (this.infiniteRenderMod) {\n          this.updateInfiniteUnLoadedCheckboxExistPred(value, this.infiniteUnloadParentExistPred);\n        }\n        var checkbox = this.localInfiniteSelectAllClicked ? this.createCheckbox(value, this.infiniteLocalSelectAll, getValue('dataObj', data[i])) : this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[\"\" + uid]), getValue('dataObj', data[i]));\n        cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n        if (this.infiniteRenderMod) {\n          cBoxes.lastChild.style.height = getListHeight(this.cBox) + 'px';\n        }\n      }\n      var scrollTop = this.cBox.scrollTop;\n      if (!this.infiniteRenderMod || this.infiniteSearchValChange) {\n        this.cBox.innerHTML = '';\n      } else if (this.infiniteRenderMod && this.cBox.children.length) {\n        infiniteRemoveElements([].slice.call(this.cBox.children).splice(0, this.parent.filterSettings.itemsCount));\n      }\n      if (this.infiniteRenderMod) {\n        (_c = this.infiniteLoadedElem).push.apply(_c, [].slice.call(cBoxes.children));\n        this.itemsCnt = nullCounter !== -1 ? this.infiniteLoadedElem.length - nullCounter : this.infiniteLoadedElem.length;\n      }\n      if (this.infiniteUnloadParentExistPred.length && (this.infiniteLoadedElem.length >= this.infiniteDataCount || !this.options.parentCurrentViewDataCount || this.options.parentTotalDataCount === this.infiniteDataCount && this.options.parentCurrentViewDataCount)) {\n        this.infiniteUnloadParentExistPred = [];\n      }\n      appendChildren(this.cBox, [].slice.call(cBoxes.children));\n      if (this.infiniteRenderMod && !this.infiniteScrollAppendDiff) {\n        this.infiniteScrollAppendDiff = Math.round(scrollTop - this.cBox.scrollTop);\n      }\n      this.updateIndeterminatenBtn();\n      if (!this.infiniteRenderMod) {\n        if (btn) {\n          btn.disabled = false;\n        }\n        disabled = false;\n      } else {\n        if (btn && btn.disabled) {\n          disabled = true;\n        } else {\n          disabled = false;\n        }\n      }\n    } else {\n      cBoxes.appendChild(this.parent.createElement('span', {\n        innerHTML: this.getLocalizedLabel('NoResult')\n      }));\n      this.cBox.innerHTML = '';\n      if (this.infiniteRenderMod) {\n        var selectAll = this.sBox.querySelector('.e-ftrchk .e-selectall');\n        if (selectAll) {\n          var selectAllParent = selectAll.parentElement.parentElement;\n          if (selectAll.classList.contains('e-check')) {\n            toogleCheckbox(selectAllParent);\n          } else if (selectAll.classList.contains('e-stop')) {\n            toogleCheckbox(selectAllParent);\n            selectAll.classList.remove('e-stop');\n            toogleCheckbox(selectAllParent);\n          }\n          selectAll.previousSibling.disabled = true;\n          selectAll.parentElement.classList.add('e-checkbox-disabled');\n        }\n        var addCurrSelection = this.sBox.querySelector('.e-ftrchk .e-add-current');\n        if (addCurrSelection) {\n          var addCurrSelectionParent = addCurrSelection.parentElement.parentElement;\n          if (addCurrSelection.classList.contains('e-check')) {\n            toogleCheckbox(addCurrSelectionParent);\n          }\n          addCurrSelection.previousSibling.disabled = true;\n          addCurrSelection.parentElement.classList.add('e-checkbox-disabled');\n        }\n      }\n      this.cBox.appendChild(this.parent.createElement('div', {\n        className: 'e-checkfltrnmdiv'\n      }));\n      appendChildren(this.cBox.children[0], [].slice.call(cBoxes.children));\n      if (btn) {\n        btn.disabled = true;\n      }\n      disabled = true;\n      this.filterState = !disabled;\n    }\n    if (btn && data.length) {\n      this.filterState = !btn.disabled;\n      btn.dataBind();\n    }\n    var args = {\n      requestType: events.filterChoiceRequest,\n      dataSource: this.renderEmpty ? [] : data\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    this.parent.notify(events.cBoxFltrComplete, args);\n    this.parent.notify(events.refreshCustomFilterOkBtn, {\n      disabled: disabled\n    });\n    if (this.infiniteRenderMod && this.infiniteInitialLoad) {\n      this.cBox.style.marginTop = '0px';\n    }\n    hideSpinner(this.spinner);\n  };\n  CheckBoxFilterBase.prototype.updateInfiniteUnLoadedCheckboxExistPred = function (value, updatePredArr) {\n    for (var j = 0; j < updatePredArr.length; j++) {\n      var pred = updatePredArr[j];\n      var predValue = pred.value instanceof Date ? this.valueFormatter.toView(pred.value, this.options.formatFn) : pred.value;\n      if (value === predValue && (pred.operator === 'equal' || pred.operator === 'notequal')) {\n        this.infiniteManualSelectMaintainPred.push(updatePredArr[j]);\n        updatePredArr.splice(j, 1);\n        j--;\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.getCheckedState = function (isColFiltered, value) {\n    if (!this.isFiltered || !isColFiltered) {\n      return true;\n    } else {\n      var checkState = this.sInput.value ? true : this.result[\"\" + value];\n      if (this.infiniteRenderMod) {\n        return checkState;\n      } else {\n        return this.options.operator === 'notequal' ? !checkState : checkState;\n      }\n    }\n  };\n  CheckBoxFilterBase.getDistinct = function (json, field, column, foreignKeyData, checkboxFilter) {\n    var len = json.length;\n    var result = [];\n    var value;\n    var ejValue = 'ejValue';\n    var lookup = {};\n    var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;\n    while (len--) {\n      value = json[parseInt(len.toString(), 10)];\n      if (column && column.type === 'dateonly' && typeof value[\"\" + field] === 'string' && value[\"\" + field]) {\n        var arr = value[\"\" + field].split(/[^0-9.]/);\n        value[\"\" + field] = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10));\n      }\n      value = getObject(field, value); //local remote diff, check with mdu\n      var currentFilterValue = typeof value === 'string' && !isNullOrUndefined(checkboxFilter) &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      !isNullOrUndefined(checkboxFilter.parent) && !isNullOrUndefined(checkboxFilter.parent.filterSettings) &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      !isNullOrUndefined(checkboxFilter.parent.filterSettings.enableCaseSensitivity) ? value.toLowerCase() : value;\n      if (!(currentFilterValue in lookup)) {\n        var obj = {};\n        obj[\"\" + ejValue] = value;\n        lookup[\"\" + currentFilterValue] = true;\n        if (isForeignKey) {\n          var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n          setValue(events.foreignKeyData, foreignDataObj, json[parseInt(len.toString(), 10)]);\n          value = getValue(column.foreignKeyValue, foreignDataObj);\n        }\n        setValue(field, isNullOrUndefined(value) ? null : value, obj);\n        setValue('dataObj', json[parseInt(len.toString(), 10)], obj);\n        result.push(obj);\n      }\n    }\n    return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n  };\n  CheckBoxFilterBase.getPredicate = function (columns, isExecuteLocal) {\n    var cols = DataUtil.distinct(columns, 'field', true) || [];\n    var collection = [];\n    var pred = {};\n    for (var i = 0; i < cols.length; i++) {\n      collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[parseInt(i.toString(), 10)].field));\n      if (collection.length !== 0) {\n        pred[cols[parseInt(i.toString(), 10)].field] = CheckBoxFilterBase.generatePredicate(collection, isExecuteLocal);\n      }\n    }\n    return pred;\n  };\n  CheckBoxFilterBase.generatePredicate = function (cols, isExecuteLocal) {\n    var len = cols ? cols.length : 0;\n    var predicate;\n    var operate = 'or';\n    var first = CheckBoxFilterBase.updateDateFilter(cols[0]);\n    first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n    if (first.type === 'date' || first.type === 'datetime' || first.type === 'dateonly') {\n      predicate = getDatePredicate(first, first.type, isExecuteLocal);\n    } else {\n      predicate = first.ejpredicate ? first.ejpredicate : new Predicate(first.field, first.operator, first.value, !CheckBoxFilterBase.getCaseValue(first), first.ignoreAccent);\n    }\n    for (var p = 1; p < len; p++) {\n      cols[parseInt(p.toString(), 10)] = CheckBoxFilterBase.updateDateFilter(cols[parseInt(p.toString(), 10)]);\n      if (len > 2 && p > 1 && (cols[p].predicate === 'or' && cols[p - 1].predicate === 'or' || cols[p].predicate === 'and' && cols[p - 1].predicate === 'and')) {\n        if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n          predicate.predicates.push(getDatePredicate(cols[parseInt(p.toString(), 10)], cols[p].type, isExecuteLocal));\n        } else {\n          predicate.predicates.push(new Predicate(cols[p].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent));\n        }\n      } else {\n        if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n          if (cols[parseInt(p.toString(), 10)].predicate === 'and' && cols[parseInt(p.toString(), 10)].operator === 'equal') {\n            predicate = predicate[\"\" + operate](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n          } else {\n            predicate = predicate[cols[parseInt(p.toString(), 10)].predicate](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n          }\n        } else {\n          predicate = cols[parseInt(p.toString(), 10)].ejpredicate ? predicate[cols[parseInt(p.toString(), 10)].predicate](cols[parseInt(p.toString(), 10)].ejpredicate) : predicate[cols[parseInt(p.toString(), 10)].predicate](cols[parseInt(p.toString(), 10)].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent);\n        }\n      }\n    }\n    return predicate || null;\n  };\n  CheckBoxFilterBase.getCaseValue = function (filter) {\n    if (isNullOrUndefined(filter.matchCase)) {\n      if (filter.type === 'string' || isNullOrUndefined(filter.type) && typeof filter.value === 'string') {\n        return false;\n      } else {\n        return true;\n      }\n    } else {\n      return filter.matchCase;\n    }\n  };\n  CheckBoxFilterBase.updateDateFilter = function (filter) {\n    if (filter.type === 'date' || filter.type === 'datetime' || filter.type === 'dateonly' || filter.value instanceof Date) {\n      filter.type = filter.type || 'date';\n    }\n    return filter;\n  };\n  return CheckBoxFilterBase;\n}();\nexport { CheckBoxFilterBase };","map":{"version":3,"names":["EventHandler","isNullOrUndefined","extend","classList","addClass","removeClass","Browser","getValue","setValue","parentsUntil","getUid","appendChildren","getDatePredicate","getObject","extendObjWithFn","eventPromise","setChecked","clearReactVueTemplates","padZero","Global","remove","debounce","Internationalization","SanitizeHtmlHelper","DataUtil","Query","DataManager","Predicate","createCheckBox","events","ValueFormatter","getForeignData","resetDialogAppend","Dialog","Input","createSpinner","hideSpinner","showSpinner","getFilterMenuPostion","toogleCheckbox","createCboxWithWrap","removeAddCboxClasses","getColumnByForeignKeyValue","getListHeight","infiniteRemoveElements","infiniteAppendElements","CheckBoxFilterBase","parent","searchInputArgs","isExecuteLocal","existingPredicate","foreignKeyQuery","filterState","values","renderEmpty","isCheckboxFilterTemplate","infiniteRenderMod","infiniteInitialLoad","infiniteSearchValChange","infinitePermenantLocalData","infiniteQueryExecutionPending","infiniteSkipCnt","infiniteScrollAppendDiff","prevInfiniteScrollDirection","infiniteLoadedElem","infiniteDataCount","infiniteLocalSelectAll","localInfiniteSelectAllClicked","localInfiniteSelectionInteracted","infiniteManualSelectMaintainPred","id","element","valueFormatter","locale","cBoxTrue","createElement","checked","label","cBoxFalse","insertBefore","className","attrs","type","firstChild","querySelector","add","enableRtl","cssClass","indexOf","split","prototype","destroy","closeDialog","wireEvents","dlg","clickHandler","keyupHandler","searchHandler","searchBoxKeyUp","elem","dialogObj","unWireEvents","foreignKeyFilter","args","fColl","mPredicate","_this","fPredicate","filterCollection","query","clone","options","column","dataSource","executeQuery","where","then","e","columnData","result","notify","generateQuery","predicate","ejpredicate","predicates","fpred","i","length","push","field","parseInt","toString","matchCase","ignoreCase","ignoreAccent","operator","value","filter","col","handler","searchBoxClick","target","contains","sInput","event","refreshCheckboxes","updateSearchIcon","focus","key","shiftKey","loadingIndicator","indicatorType","showMaskRow","undefined","sIcon","document","body","setAttribute","localeObj","getConstant","getLocalizedLabel","updateDataSource","str","obj","updateModel","actualPredicate","dataManager","format","filteredColumns","filterSettings","columns","allowCaseSensitive","uid","disableHtmlEncode","isFiltered","enableInfiniteScrolling","infiniteUnloadParentExistPred","slice","getAndSetChkElem","sBox","hideSearchbox","title","searchBox","appendChild","floatLabelType","properties","placeholder","createInput","spinner","cBox","showDialog","requestType","filterBeforeOpen","columnName","columnType","cancel","filterModel","cBoxFltrBegin","visible","content","close","bind","width","animationSettings","effect","buttons","click","btnClick","buttonModel","isExcel","isPrimary","created","dialogCreated","open","dialogOpen","isStringTemplate","renderResponsiveFilter","dialogLabel","isResponsiveFilter","responsiveCnt","appendTo","style","maxHeight","height","show","getContent","firstElementChild","offsetHeight","enableAdaptiveUI","showMask","getAllData","marginTop","position","X","Y","left","isDevice","showColumnMenu","filterDialogCreated","openDialog","isRemote","json","isDestroyed","isBlanks","filterTemplateCol","getFilterItemTemplate","registeredTemplate","filterItemTemplate","destroyTemplate","isReact","isVue","filterMenuClose","parentElement","itemTemplate","innerHTML","filterDialogClose","clearFilter","instance","fltrPrevent","action","tagName","toLowerCase","keyCode","fltrBtnHandler","text","textContent","afterFilterColumnMenuClose","focusModule","filterfocus","call","querySelectorAll","check","optr","ddlValue","ej2_instances","isMenuNotEqual","searchInput","caseSen","defaults","isNotEqual","itemsCnt","val","coll","complexQueryPredicate","infiniteSearchPred","isComplex","infiniteFltrBtnHandler","getAttribute","addCurrSelection","existingPredicate_1","_loop_1","j","some","data","initiateFilter","isClearFilter","checkBoxChecked","fObj","concat","generateNullValuePredicates","notifyFilterPrevEvent","pred","dummyDefaults","apply","parentCurrentViewDataCount","unshift","arg1","arg2","arg3","arg4","arg5","arg6","firstVal","or","isForeignColumn","foreignQuery","queries","fn","parsed","parseFloat","foreignKeyValue","predicte","moduleName","adaptor","getModuleName","intl","parseDate","Date","getFullYear","getMonth","getDate","addDistinct","filterSearchBegin","filterChoiceCount","itemsCount","trigger","actionBegin","filterargs","filterObj","emptyValPredicte","generatePredicate","and","colData","fullData","makeInfiniteScrollRequest","requiresCount","take","search","filterEvent","processSearch","getPredicateFromCols","getPredicate","predicateList","isGrid","getForeignKeyColumns","foreignColumn","_i","_a","Object","keys","prop","getColumnByField","getQuery","customQuery","getDataModule","filterChoiceRequest","distincts","queryGenerate","processDataOperation","filteredColumn","distinct","gridQuery","queryFilteredColumn","map","parentFilteredLocalRecords","item","assign","select","sortBy","moduleName_1","defObj","dataStateChange","state","addInfiniteScrollEvent","def","deffered","promise","dataResult","dataSuccess","infiniteQuery","infiniteScrollHandler","infiniteScrollMouseKeyUpHandler","infiniteScrollMouseKeyDownHandler","children","scrollTop","scrollHeight","timer","setTimeout","getShimmerTemplate","maskRowCount","maskItemHeight","maskList","styles","wrapperElem","removeMask","computedStyle","getComputedStyle","liHeight","Math","floor","overflow","backgroundColor","cssText","minHeight","margin","borderStyle","borderWidth","borderColor","maskTemplate","insertAdjacentHTML","maskSpan","maskLists","maskParent","splice","fName","existQuery","skip","isInitial","allPromise","runArray","params","foreignKeyData","fnAscending","executeQueryOperations","Promise","all","count","catch","args1","beforeCheckboxRenderer","executeLocal","filteredData","getDistinct","records","processDataSource","filterAfterOpen","cBoxFltrComplete","searchSettings","searchQuery","fields","f","cols","filterColumn","updateResult","btnObj","beforeCheckboxfilterRenderer","createFilterItems","beforeCheckboxRendererQuery","result_1","res","clearTimeout","selectAll","updateAllCBoxes","span","input","previousSibling","updateInfiniteManualSelectPred","parentTotalDataCount","updateIndeterminatenBtn","setFocus","predmdl","focusNextOrPrev","focusableElements","nextIndex","activeElement","nextElement","altKey","preventDefault","Array","from","prevElem","cBoxes","arr","cBoxes_1","createCheckbox","cloneNode","dummyData","innerText","enableHtmlSanitizer","sanitize","checkboxUid","template","isReactCompiler","CSPTemplate","isReactChild","parentDetails","parentInstObj","renderTemplates","root","cnt","disabled","selected","btn","indeterminate","dataBind","refreshCustomFilterOkBtn","_b","_c","nullCounter","selectAllValue","innerDiv","checkBox","isColFiltered","predicateCheckBox","predicateElement","checkBoxListElem","reduceHeight","ceil","getBoundingClientRect","increaseHeight","isRndere","formatFn","toView","args_1","filterCboxValue","updateInfiniteUnLoadedCheckboxExistPred","checkbox","getCheckedState","lastChild","round","selectAllParent","addCurrSelectionParent","updatePredArr","predValue","checkState","checkboxFilter","len","ejValue","lookup","isForeignKey","currentFilterValue","enableCaseSensitivity","foreignDataObj","group","sort","collection","operate","first","updateDateFilter","getCaseValue","p"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-grids/src/grid/common/checkbox-filter-base.js"],"sourcesContent":["/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren, getDatePredicate, getObject, extendObjWithFn, eventPromise, setChecked, clearReactVueTemplates, padZero, Global } from '../base/util';\nimport { remove, debounce, Internationalization, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData, resetDialogAppend } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue, getListHeight, infiniteRemoveElements, infiniteAppendElements } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilterBase` module is used to handle filtering action.\n */\nvar CheckBoxFilterBase = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     *\n     * @param {IXLFilter} parent - specifies the IXLFilter\n     * @hidden\n     */\n    function CheckBoxFilterBase(parent) {\n        this.searchInputArgs = null;\n        this.isExecuteLocal = false;\n        this.existingPredicate = {};\n        this.foreignKeyQuery = new Query();\n        /** @hidden */\n        this.filterState = true;\n        this.values = {};\n        this.renderEmpty = false;\n        this.isCheckboxFilterTemplate = false;\n        this.infiniteRenderMod = false;\n        // for infinite scroll ui\n        this.infiniteInitialLoad = false;\n        this.infiniteSearchValChange = false;\n        this.infinitePermenantLocalData = [];\n        this.infiniteQueryExecutionPending = false;\n        this.infiniteSkipCnt = 0;\n        this.infiniteScrollAppendDiff = 0;\n        this.prevInfiniteScrollDirection = '';\n        this.infiniteLoadedElem = [];\n        this.infiniteDataCount = 0;\n        this.infiniteLocalSelectAll = true;\n        this.localInfiniteSelectAllClicked = false;\n        this.localInfiniteSelectionInteracted = false;\n        this.infiniteManualSelectMaintainPred = [];\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n        if (this.parent.cssClass) {\n            if (this.parent.cssClass.indexOf(' ') !== -1) {\n                addClass([this.cBoxTrue, this.cBoxFalse], this.parent.cssClass.split(' '));\n            }\n            else {\n                addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n            }\n        }\n    }\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilterBase.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        EventHandler.add(this.dlg, 'keyup', this.keyupHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.add(elem, 'keyup', this.searchHandler, this);\n            EventHandler.add(elem, 'input', this.searchHandler, this);\n        }\n    };\n    CheckBoxFilterBase.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        EventHandler.remove(this.dlg, 'keyup', this.keyupHandler);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n            EventHandler.remove(elem, 'input', this.searchHandler);\n        }\n    };\n    CheckBoxFilterBase.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n        var _this = this;\n        var fPredicate = {};\n        var filterCollection = [];\n        var query = this.foreignKeyQuery.clone();\n        this.options.column.dataSource.\n            executeQuery(query.where(mPredicate)).then(function (e) {\n            _this.options.column.columnData = e.result;\n            _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: _this.options.column });\n            args.ejpredicate = fPredicate.predicate.predicates;\n            var fpred = fPredicate.predicate.predicates;\n            for (var i = 0; i < fpred.length; i++) {\n                filterCollection.push({\n                    field: fpred[parseInt(i.toString(), 10)].field,\n                    predicate: 'or',\n                    matchCase: fpred[parseInt(i.toString(), 10)].ignoreCase,\n                    ignoreAccent: fpred[parseInt(i.toString(), 10)].ignoreAccent,\n                    operator: fpred[parseInt(i.toString(), 10)].operator,\n                    value: fpred[parseInt(i.toString(), 10)].value,\n                    type: _this.options.type\n                });\n            }\n            args.filterCollection = filterCollection.length ? filterCollection :\n                fColl.filter(function (col) { return col.field = _this.options.field; });\n            _this.options.handler(args);\n        });\n    };\n    CheckBoxFilterBase.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = target.classList.contains('e-chkcancel-icon') ? '' : this.sInput.value;\n            if (this.isCheckboxFilterTemplate) {\n                this.parent.notify('refreshCheckbox', { event: e });\n            }\n            else {\n                this.refreshCheckboxes();\n            }\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    CheckBoxFilterBase.prototype.searchBoxKeyUp = function (e) {\n        if (isNullOrUndefined(this.sInput)) {\n            return;\n        }\n        if (isNullOrUndefined(e) || (e.key !== 'ArrowUp' && e.key !== 'ArrowDown' && e.key !== 'Tab' && !(e.key === 'Tab' && e.shiftKey))) {\n            if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n                this.parent.showMaskRow(undefined, this.dialogObj.element);\n            }\n            if (this.isCheckboxFilterTemplate) {\n                this.parent.notify('refreshCheckbox', { event: e });\n            }\n            else {\n                this.refreshCheckboxes();\n            }\n            this.updateSearchIcon();\n        }\n    };\n    CheckBoxFilterBase.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n            if (!isNullOrUndefined(document.body.querySelector('.e-chkcancel-icon'))) {\n                document.body.querySelector('.e-chkcancel-icon').setAttribute('title', this.localeObj.getConstant('Clear'));\n            }\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n            if (!isNullOrUndefined(document.body.querySelector('.e-searchclear.e-search-icon'))) {\n                document.body.querySelector('.e-searchclear.e-search-icon').setAttribute('title', this.localeObj.getConstant('Search'));\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     *\n     * @param {string} key - Defines localization key\n     * @returns {string} - returns localization label\n     */\n    CheckBoxFilterBase.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilterBase.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        var str = 'object';\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                // eslint-disable-next-line valid-typeof\n                if (typeof dataSource !== str) {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[parseInt(i.toString(), 10)];\n                    dataSource[parseInt(i.toString(), 10)] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;\n        this.updateDataSource();\n        this.options.type = options.type;\n        this.options.format = options.format || '';\n        this.options.ignoreAccent = options.ignoreAccent || false;\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.options.uid = options.column.uid;\n        this.options.disableHtmlEncode = options.column.disableHtmlEncode || false;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n        this.infiniteRenderMod = this.parent.filterSettings && this.parent.filterSettings.enableInfiniteScrolling ? true : false;\n        this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n    };\n    CheckBoxFilterBase.prototype.getAndSetChkElem = function (options) {\n        this.dlg = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            attrs: { uid: this.options.column.uid },\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = this.parent.createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = this.parent.createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = this.parent.createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = this.parent.createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            this.searchInputArgs = {\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search'),\n                    cssClass: this.parent.cssClass\n                }\n            };\n            Input.createInput(this.searchInputArgs, this.parent.createElement);\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = this.parent.createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilterBase.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        this.parent.notify(events.cBoxFltrBegin, args);\n        if (args.cancel) {\n            options.cancel = args.cancel;\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            enableRtl: this.parent.enableRtl,\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: this.parent.cssClass ? 'e-primary' + ' ' + this.parent.cssClass : 'e-primary',\n                        isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: this.parent.cssClass ? 'e-flat' + ' ' + this.parent.cssClass : 'e-flat',\n                        content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this),\n            cssClass: this.parent.cssClass ? this.parent.cssClass : ''\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[\"\" + isStringTemplate] = true;\n        this.renderResponsiveFilter(options);\n        var dialogLabel = this.parent.filterSettings && this.parent.filterSettings.type === 'CheckBox' ?\n            this.getLocalizedLabel('CheckBoxFilterDialogARIA') : this.getLocalizedLabel('ExcelFilterDialogARIA');\n        this.dlg.setAttribute('aria-label', dialogLabel);\n        if (options.isResponsiveFilter) {\n            var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n            responsiveCnt.appendChild(this.dlg);\n        }\n        else {\n            this.parent.element.appendChild(this.dlg);\n        }\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = options.isResponsiveFilter ? 'none' : this.options.height + 'px';\n        this.dialogObj.show();\n        if (this.parent && this.parent.filterSettings && this.parent.filterSettings.type === 'CheckBox' &&\n            this.parent.getContent().firstElementChild.offsetHeight < this.dialogObj.element.offsetHeight &&\n            !parentsUntil(this.parent.element, 'e-gantt-dialog')) {\n            resetDialogAppend(this.parent, this.dialogObj);\n        }\n        var content = this.dialogObj.element.querySelector('.e-dlg-content');\n        content.appendChild(this.sBox);\n        this.wireEvents();\n        if (!this.parent.enableAdaptiveUI) {\n            if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer'\n                && !this.infiniteRenderMod) {\n                this.parent.showMaskRow(undefined, this.dialogObj.element);\n            }\n            if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n                this.showMask();\n            }\n        }\n        else {\n            if (this.parent.enableAdaptiveUI && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n                this.getAllData();\n                return;\n            }\n            if (this.infiniteRenderMod) {\n                this.cBox.style.marginTop = getListHeight(this.cBox) + 'px';\n            }\n            createSpinner({ target: this.spinner, cssClass: this.parent.cssClass ? this.parent.cssClass : null }, this.parent.createElement);\n            showSpinner(this.spinner);\n        }\n        this.getAllData();\n    };\n    CheckBoxFilterBase.prototype.renderResponsiveFilter = function (options) {\n        if (options.isResponsiveFilter) {\n            this.dialogObj.buttons = [{}];\n            this.dialogObj.position = { X: '', Y: '' };\n            this.dialogObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n            this.dialogObj.width = '100%';\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogCreated = function (e) {\n        if (this.options.isResponsiveFilter) {\n            this.dialogObj.element.style.left = '0px';\n        }\n        else {\n            if (!Browser.isDevice) {\n                getFilterMenuPostion(this.options.target, this.dialogObj);\n            }\n            else {\n                this.dialogObj.position = { X: 'center', Y: 'center' };\n            }\n        }\n        if (this.options.column.showColumnMenu) {\n            this.parent.notify(events.filterDialogCreated, e);\n        }\n    };\n    CheckBoxFilterBase.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilterBase.prototype.closeDialog = function () {\n        if (this.infiniteRenderMod && this.infinitePermenantLocalData.length && !this.options.isRemote) {\n            this.options.dataSource.dataSource.json = this.infinitePermenantLocalData;\n        }\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            this.isBlanks = false;\n            var filterTemplateCol = this.options.columns.filter(function (col) { return col.getFilterItemTemplate(); });\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var registeredTemplate = this.parent.registeredTemplate;\n            if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n            }\n            if ((this.parent.isReact || this.parent.isVue) && this.parent.destroyTemplate !== undefined) {\n                clearReactVueTemplates(this.parent, ['filterItemTemplate']);\n            }\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.unWireEvents();\n            if (this.searchInputArgs && this.searchInputArgs.element && this.searchInputArgs.element.parentElement) {\n                Input.destroy(this.searchInputArgs);\n                remove(this.searchInputArgs.element);\n            }\n            this.searchInputArgs = null;\n            this.sInput = null;\n            if (this.parent.isReact && this.options.column.filter && typeof (this.options.column.filter.itemTemplate) !== 'string'\n                && (this.options.column.filter.type === 'CheckBox' || this.options.column.filter.type === 'Excel')) {\n                this.dialogObj.element.querySelector('.e-dlg-content').innerHTML = '';\n            }\n            this.dialogObj.destroy();\n            if (this.dlg && this.dlg.parentElement) {\n                remove(this.dlg);\n            }\n            this.dlg = null;\n            this.parent.notify(events.filterDialogClose, {});\n        }\n    };\n    /**\n     * @param {Column} col - Defines column details\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.clearFilter = function (col) {\n        // eslint-disable-next-line max-len\n        var args = { instance: this, handler: this.clearFilter, cancel: false };\n        this.parent.notify(events.fltrPrevent, args);\n        if (args.cancel) {\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: col ? col.field : this.options.field });\n    };\n    CheckBoxFilterBase.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if ((e.target.tagName.toLowerCase() === 'input' && e.target.classList.contains('e-searchinput')) ||\n                e.keyCode === 13) {\n                if (!this.isCheckboxFilterTemplate) {\n                    this.fltrBtnHandler();\n                }\n            }\n            else {\n                var text = e.target.firstChild.textContent.toLowerCase();\n                if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                    if (!this.isCheckboxFilterTemplate) {\n                        this.fltrBtnHandler();\n                    }\n                }\n                else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                    this.clearFilter();\n                }\n            }\n            this.closeDialog();\n        }\n        else if (e.target && e.target.firstChild &&\n            e.target.firstChild.textContent.toLowerCase() === this.getLocalizedLabel('CancelButton').toLowerCase()) {\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n        if (this.options.column.showColumnMenu) {\n            this.parent.notify(events.afterFilterColumnMenuClose, {});\n        }\n        if (!isNullOrUndefined(this.parent.focusModule)) {\n            this.parent.focusModule.filterfocus();\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.fltrBtnHandler = function () {\n        var _this = this;\n        if (this.infiniteRenderMod) {\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, this.infiniteLoadedElem.slice());\n        }\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)'));\n        var check = checked;\n        var optr = 'equal';\n        var ddlValue = this.dialogObj.element.querySelector('.e-dropdownlist');\n        if (ddlValue) {\n            this.options.operator = optr = ddlValue.ej2_instances[0].value;\n        }\n        this.isMenuNotEqual = this.options.operator === 'notequal';\n        var searchInput;\n        if (!this.options.hideSearchbox) {\n            searchInput = this.searchBox.querySelector('.e-searchinput');\n        }\n        var caseSen = this.options.allowCaseSensitive;\n        var defaults = {\n            field: this.options.field, predicate: this.isMenuNotEqual ? 'and' : 'or', uid: this.options.uid,\n            operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.options.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual && searchInput && searchInput.value === '') {\n            optr = this.isMenuNotEqual ? 'equal' : 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = this.isMenuNotEqual ? 'or' : 'and';\n            defaults.operator = optr;\n        }\n        var val;\n        var length;\n        var coll = [];\n        if ((checked.length !== this.itemsCnt || (searchInput && searchInput.value && searchInput.value !== ''))\n            || this.infiniteRenderMod) {\n            if (!this.infiniteRenderMod) {\n                coll = this.complexQueryPredicate(checked, defaults, isNotEqual);\n            }\n            else if (this.infiniteRenderMod &&\n                (!this.infiniteSearchPred || (this.infiniteSearchPred && !this.infiniteSearchPred.isComplex))) {\n                this.infiniteFltrBtnHandler(coll);\n            }\n            else {\n                if (this.infiniteSearchPred.isComplex) {\n                    coll = this.complexQueryPredicate(checked, defaults, isNotEqual);\n                }\n            }\n            if ((this.options.type === 'date' || this.options.type === 'datetime') && check.length) {\n                length = check.length - 1;\n                val = this.values[parentsUntil(check[parseInt(length.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n                if (isNullOrUndefined(val) && isNotEqual) {\n                    coll.push({\n                        field: defaults.field, matchCase: defaults.matchCase, operator: 'equal',\n                        predicate: 'or', value: null\n                    });\n                }\n            }\n            var addCurrSelection = this.infiniteRenderMod ? this.sBox.querySelector('.e-add-current') :\n                this.cBox.querySelector('.e-add-current');\n            if (addCurrSelection && addCurrSelection.classList.contains('e-check')) {\n                var existingPredicate_1 = this.existingPredicate[this.options.field];\n                if (existingPredicate_1) {\n                    var _loop_1 = function (j) {\n                        if (!coll.some(function (data) {\n                            return data\n                                .value === existingPredicate_1[parseInt(j.toString(), 10)].value;\n                        })) {\n                            coll.push(existingPredicate_1[parseInt(j.toString(), 10)]);\n                        }\n                    };\n                    for (var j = 0; j < existingPredicate_1.length; j++) {\n                        _loop_1(j);\n                    }\n                }\n                else {\n                    return;\n                }\n            }\n            if (!this.infiniteRenderMod) {\n                this.initiateFilter(coll);\n            }\n            else if (coll.length) {\n                this.initiateFilter(coll);\n            }\n            else if (this.sBox.querySelector('.e-selectall').classList.contains('e-check') && !coll.length) {\n                var isClearFilter = this.options.filteredColumns.some(function (value) {\n                    return _this.options.field === value.field;\n                });\n                if (isClearFilter) {\n                    this.clearFilter();\n                }\n            }\n        }\n        else {\n            var isClearFilter = this.options.filteredColumns.some(function (value) {\n                return _this.options.field === value.field;\n            });\n            if (isClearFilter) {\n                this.clearFilter();\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.complexQueryPredicate = function (checkBoxChecked, defaults, isNotEqual) {\n        var value;\n        var fObj;\n        var coll = [];\n        for (var i = 0; i < checkBoxChecked.length; i++) {\n            value = this.values[parentsUntil(checkBoxChecked[parseInt(i.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n            fObj = extend({}, { value: value }, defaults);\n            if (value && !value.toString().length) {\n                fObj.operator = isNotEqual ? 'notequal' : 'equal';\n            }\n            if (value === '' || isNullOrUndefined(value)) {\n                coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n            }\n            else {\n                coll.push(fObj);\n            }\n            this.notifyFilterPrevEvent(fObj);\n        }\n        return coll;\n    };\n    CheckBoxFilterBase.prototype.infiniteFltrBtnHandler = function (coll) {\n        var value;\n        if (this.infiniteManualSelectMaintainPred.length) {\n            for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n                var pred = this.infiniteManualSelectMaintainPred[i];\n                value = pred.value + '';\n                if (value === '' || isNullOrUndefined(value)) {\n                    var dummyDefaults = { predicate: pred.predicate, field: pred.field, type: pred.type, uid: pred.uid, operator: pred.operator,\n                        matchCase: pred.matchCase, ignoreAccent: pred.ignoreAccent };\n                    coll.push.apply(coll, CheckBoxFilterBase.generateNullValuePredicates(dummyDefaults));\n                }\n                else {\n                    coll.push(this.infiniteManualSelectMaintainPred[i]);\n                }\n                this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[i]);\n            }\n        }\n        if (!this.localInfiniteSelectAllClicked && this.sInput.value === '' && !(!this.options.parentCurrentViewDataCount && coll.length)) {\n            for (var i = 0; i < this.infiniteUnloadParentExistPred.length; i++) {\n                coll.unshift(this.infiniteUnloadParentExistPred[i]);\n                this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][i]);\n            }\n        }\n        if (this.sInput.value !== '' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll)) {\n            this.infiniteSearchPred['predicate'] = 'or';\n            coll.unshift(this.infiniteSearchPred);\n            this.notifyFilterPrevEvent(this.infiniteSearchPred);\n        }\n    };\n    CheckBoxFilterBase.prototype.notifyFilterPrevEvent = function (predicate) {\n        var args = {\n            instance: this, handler: this.fltrBtnHandler, arg1: predicate.field, arg2: predicate.predicate, arg3: predicate.operator,\n            arg4: predicate.matchCase, arg5: predicate.ignoreAccent, arg6: predicate.value, cancel: false\n        };\n        this.parent.notify(events.fltrPrevent, args);\n        if (args.cancel) {\n            return;\n        }\n    };\n    // eslint-disable-next-line\n    /** @hidden */\n    CheckBoxFilterBase.generateNullValuePredicates = function (defaults) {\n        var coll = [];\n        if (defaults.type === 'string') {\n            coll.push({\n                field: defaults.field, ignoreAccent: defaults.ignoreAccent, matchCase: defaults.matchCase,\n                operator: defaults.operator, predicate: defaults.predicate, value: ''\n            });\n        }\n        coll.push({\n            field: defaults.field,\n            matchCase: defaults.matchCase, operator: defaults.operator, predicate: defaults.predicate, value: null\n        });\n        coll.push({\n            field: defaults.field, matchCase: defaults.matchCase, operator: defaults.operator,\n            predicate: defaults.predicate, value: undefined\n        });\n        return coll;\n    };\n    // eslint-disable-next-line\n    /** @hidden */\n    CheckBoxFilterBase.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[parseInt(j.toString(), 10)].ejpredicate !== undefined ?\n                    predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].ejpredicate) :\n                    predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].field, fColl[parseInt(j.toString(), 10)].operator, fColl[parseInt(j.toString(), 10)].value, !fColl[parseInt(j.toString(), 10)].matchCase, fColl[parseInt(j.toString(), 10)].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilterBase.prototype.isForeignColumn = function (col) {\n        return col.isForeignColumn ? col.isForeignColumn() : false;\n    };\n    CheckBoxFilterBase.prototype.refreshCheckboxes = function () {\n        var _this = this;\n        var val = this.sInput.value;\n        var column = this.options.column;\n        var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();\n        var foreignQuery = this.options.query.clone();\n        var pred = query.queries.filter(function (e) { return e && e.fn === 'onWhere'; })[0];\n        query.queries = [];\n        foreignQuery.queries = [];\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.options.isRemote ?\n            (this.options.type === 'string' ? 'contains' : 'equal') : (this.options.type ? 'contains' : 'equal');\n        var matchCase = true;\n        var ignoreAccent = this.options.ignoreAccent;\n        var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var coll = [];\n        var defaults = {\n            field: field, predicate: 'or', uid: this.options.uid,\n            operator: 'equal', type: this.options.type, matchCase: matchCase, ignoreAccent: ignoreAccent\n        };\n        var predicte;\n        var moduleName = this.options.dataManager.adaptor.getModuleName;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                // eslint-disable-next-line no-constant-condition\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? true : 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                // eslint-disable-next-line no-constant-condition\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? false : 'false';\n            }\n            operator = 'equal';\n        }\n        if ((this.options.type === 'date' || this.options.type === 'datetime' || this.options.type === 'dateonly') && this.options.format) {\n            var intl = new Internationalization();\n            var format = typeof (this.options.format) === 'string' ? this.options.format :\n                this.options.format.format;\n            if (format) {\n                parsed = intl.parseDate(val, { format: format }) || new Date(val);\n            }\n            else {\n                parsed = new Date(val);\n            }\n            if (this.options.type === 'dateonly') {\n                parsed = parsed.getFullYear() + '-' + padZero(parsed.getMonth() + 1) + '-' + padZero(parsed.getDate());\n            }\n        }\n        this.infiniteSearchValChange = true;\n        this.infiniteLoadedElem = [];\n        this.infiniteLocalSelectAll = true;\n        this.localInfiniteSelectAllClicked = false;\n        this.localInfiniteSelectionInteracted = false;\n        this.infiniteSkipCnt = 0;\n        this.infiniteDataCount = 0;\n        this.infiniteManualSelectMaintainPred = [];\n        if (this.sInput.value === '') {\n            this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n        }\n        else {\n            this.infiniteUnloadParentExistPred = [];\n        }\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: field, column: column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query, value: parsed\n        };\n        if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n            args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n        }\n        this.parent.trigger(events.actionBegin, args, function (filterargs) {\n            // eslint-disable-next-line no-self-assign\n            filterargs.operator = filterargs.operator;\n            predicte = new Predicate(field, filterargs.operator, args.value, filterargs.matchCase, filterargs.ignoreAccent);\n            if (_this.options.type === 'date' || _this.options.type === 'datetime' || _this.options.type === 'dateonly') {\n                operator = 'equal';\n                var filterObj = {\n                    field: field, operator: operator, value: parsed, matchCase: matchCase,\n                    ignoreAccent: ignoreAccent\n                };\n                if (!isNullOrUndefined(parsed)) {\n                    predicte = getDatePredicate(filterObj, _this.options.type);\n                }\n            }\n            if (val && typeof val === 'string' && _this.isBlanks &&\n                _this.getLocalizedLabel('Blanks').toLowerCase().indexOf(val.toLowerCase()) >= 0) {\n                coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n                var emptyValPredicte = CheckBoxFilterBase.generatePredicate(coll);\n                emptyValPredicte.predicates.push(predicte);\n                predicte = emptyValPredicte;\n                query.where(emptyValPredicte);\n            }\n            else if (val.length) {\n                predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;\n                query.where(predicte);\n            }\n            else if (!isNullOrUndefined(pred)) {\n                predicte = pred.e;\n                query.where(pred.e);\n            }\n            _this.infiniteSearchPred = predicte;\n            filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1000;\n            if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== filterargs.filterChoiceCount) {\n                _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n            }\n            var fPredicate = {};\n            showSpinner(_this.spinner);\n            _this.renderEmpty = false;\n            if (_this.isForeignColumn(column) && val.length) {\n                var colData = ('result' in column.dataSource) ? new DataManager(column.dataSource.result) :\n                    column.dataSource;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                colData.executeQuery(query).then(function (e) {\n                    var columnData = _this.options.column.columnData;\n                    _this.options.column.columnData = e.result;\n                    _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: column });\n                    if (fPredicate.predicate.predicates.length) {\n                        foreignQuery.where(fPredicate.predicate);\n                    }\n                    else {\n                        _this.renderEmpty = true;\n                    }\n                    _this.options.column.columnData = columnData;\n                    if (_this.infiniteRenderMod) {\n                        _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n                        _this.makeInfiniteScrollRequest(foreignQuery);\n                        foreignQuery.requiresCount();\n                    }\n                    else {\n                        foreignQuery.take(filterargs.filterChoiceCount);\n                    }\n                    _this.search(filterargs, foreignQuery);\n                });\n            }\n            else {\n                if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount) {\n                    _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n                    _this.makeInfiniteScrollRequest(query);\n                    query.requiresCount();\n                }\n                else {\n                    query.take(filterargs.filterChoiceCount);\n                }\n                _this.search(filterargs, query);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.search = function (args, query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilterBase.prototype.getPredicateFromCols = function (columns, isExecuteLocal) {\n        var predicates = CheckBoxFilterBase.getPredicate(columns, isExecuteLocal);\n        var predicateList = [];\n        var fPredicate = {};\n        var isGrid = this.parent.getForeignKeyColumns !== undefined;\n        var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = void 0;\n            if (isGrid && !this.parent.getColumnByField(prop)) {\n                col = getColumnByForeignKeyValue(prop, foreignColumn);\n            }\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[\"\" + prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilterBase.prototype.getQuery = function () {\n        return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n    };\n    CheckBoxFilterBase.prototype.getAllData = function () {\n        var _this = this;\n        this.customQuery = false;\n        var query = this.getQuery();\n        var moduleName = this.options.dataManager.adaptor.getModuleName;\n        if (!(!isNullOrUndefined(this.parent.getDataModule) && moduleName && moduleName() === 'ODataV4Adaptor')) {\n            query.requiresCount(); //consider take query\n        }\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterChoiceRequest, query: query, filterChoiceCount: null\n        };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n            args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n        }\n        this.parent.trigger(events.actionBegin, args, function (args) {\n            args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n            if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== args.filterChoiceCount) {\n                _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n            }\n            if (!_this.infiniteRenderMod) {\n                query.take(args.filterChoiceCount);\n            }\n            if (!args.query.distincts.length || _this.infiniteRenderMod) {\n                _this.customQuery = true;\n                _this.queryGenerate(query);\n            }\n            if (_this.infiniteRenderMod) {\n                _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n                _this.makeInfiniteScrollRequest(query);\n            }\n            if (_this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.filterEvent(args, query);\n            }\n            else {\n                _this.processDataOperation(query, true);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.addDistinct = function (query) {\n        var _this = this;\n        var _a;\n        var filteredColumn = DataUtil.distinct(this.options.filteredColumns, 'field');\n        if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n            filteredColumn = filteredColumn.concat(this.options.column.field);\n        }\n        var moduleName = this.options.dataManager.adaptor.getModuleName;\n        if (moduleName && moduleName() === 'ODataV4Adaptor' && this.parent &&\n            this.parent.query instanceof Query) {\n            var gridQuery = this.parent.query;\n            for (var i = 0; i < gridQuery.queries.length; i++) {\n                if (gridQuery.queries[parseInt(i.toString(), 10)].fn === 'onWhere') {\n                    var queryFilteredColumn = DataUtil.distinct([gridQuery.queries[parseInt(i.toString(), 10)].e], 'field');\n                    queryFilteredColumn.map(function (field) {\n                        if (filteredColumn.indexOf(field) === -1) {\n                            filteredColumn.push(field);\n                        }\n                    });\n                }\n            }\n        }\n        if (!this.infiniteRenderMod) {\n            query.distinct(filteredColumn);\n        }\n        if (this.infiniteRenderMod && !this.options.isRemote && this.sInput.value === '') {\n            this.options.dataSource = this.options.dataSource instanceof DataManager ?\n                this.options.dataSource : new DataManager(this.options.dataSource);\n            this.infinitePermenantLocalData = this.options.dataSource.dataSource.json.slice();\n            this.options.dataSource.dataSource.json = DataUtil.distinct((_a = this.options.parentFilteredLocalRecords).concat.apply(_a, this.infinitePermenantLocalData), this.options.column.field, true);\n            if (this.isForeignColumn(this.options.column)) {\n                this.options.column.dataSource = this.options.column.dataSource instanceof DataManager ?\n                    this.options.column.dataSource : new DataManager(this.options.column.dataSource);\n                this.options.dataSource.dataSource.json = this.options.dataSource.dataSource.json.map(function (item, i) {\n                    return Object.assign({}, item, _this.options.column.dataSource.dataSource.json[i]);\n                });\n            }\n        }\n        else if (this.infiniteRenderMod && this.options.isRemote) {\n            query.select(this.options.column.field);\n            query.sortBy(this.options.column.field, 'ascending');\n            var moduleName_1 = this.options.dataManager.adaptor.getModuleName;\n            if (moduleName_1 && moduleName_1() && (moduleName_1() === 'ODataV4Adaptor' || moduleName_1() === 'WebApiAdaptor'\n                || moduleName_1() === 'CustomDataAdaptor' || moduleName_1() === 'GraphQLAdaptor' || moduleName_1() === 'ODataAdaptor')) {\n                query.distinct(filteredColumn);\n            }\n        }\n        return query;\n    };\n    CheckBoxFilterBase.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var defObj = eventPromise(args, query);\n        this.parent.trigger(events.dataStateChange, defObj.state);\n        this.addInfiniteScrollEvent(query);\n        var def = defObj.deffered;\n        def.promise.then(function (e) {\n            _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e['count'] : _this.infiniteDataCount;\n            var dataResult = _this.infiniteRenderMod ? e['result'] : e;\n            _this.dataSuccess(dataResult);\n        });\n    };\n    CheckBoxFilterBase.prototype.addInfiniteScrollEvent = function (query) {\n        if (this.infiniteRenderMod) {\n            this.infiniteQuery = query.clone();\n            if (this.infiniteInitialLoad) {\n                this.cBox.classList.add('e-checkbox-infinitescroll');\n                EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n                EventHandler.add(this.cBox, 'mouseup', this.infiniteScrollMouseKeyUpHandler, this);\n                EventHandler.add(this.cBox, 'mousedown', this.infiniteScrollMouseKeyDownHandler, this);\n            }\n            else if (this.infiniteSearchValChange) {\n                this.cBox.innerHTML = '';\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.infiniteScrollMouseKeyDownHandler = function () {\n        EventHandler.remove(this.cBox, 'scroll', this.infiniteScrollHandler);\n    };\n    CheckBoxFilterBase.prototype.infiniteScrollMouseKeyUpHandler = function (e) {\n        var _this = this;\n        EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n        var target = this.cBox;\n        if (target.children.length > 1 && (target.scrollTop >= target.scrollHeight - target.offsetHeight || target.scrollTop <= 0)) {\n            this.infiniteScrollHandler();\n        }\n        Global.timer = setTimeout(function () { _this.clickHandler(e); Global.timer = null; }, 0);\n    };\n    CheckBoxFilterBase.prototype.getShimmerTemplate = function () {\n        return '<span class=\"e-mask e-skeleton e-skeleton-text e-shimmer-wave\"></span>';\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.showMask = function () {\n        var maskRowCount = 5;\n        var maskItemHeight;\n        var maskList = this.parent.createElement('div', { id: this.id + this.options.type + '_CheckBoxMaskList',\n            className: 'e-checkboxlist e-fields e-infinite-list e-masklist', styles: 'z-index: 10;' });\n        var wrapperElem = this.cBox;\n        this.removeMask();\n        if (wrapperElem) {\n            var computedStyle = getComputedStyle(wrapperElem);\n            var liHeight = getListHeight(wrapperElem);\n            var height = wrapperElem.children.length ? parseInt(computedStyle.height, 10) :\n                Math.floor(parseInt(computedStyle.height.split('px')[0], 10)) - 5;\n            if (this.parent.enableAdaptiveUI && this.infiniteRenderMod) {\n                maskList.style.height = (height - liHeight) + 'px';\n                this.dlg.querySelector('.e-dlg-content').style.overflow = 'hidden';\n            }\n            var backgroundColor = this.isExcel && !wrapperElem.children.length && !this.dlg.classList.contains('e-excelfilter') ?\n                '' : getComputedStyle(this.dlg.querySelector('.e-dlg-content')).backgroundColor;\n            maskList.style.cssText = 'width: ' + computedStyle.width + '; min-height: ' + computedStyle.minHeight + '; height: ' +\n                height + 'px; margin: ' + computedStyle.margin + '; border-style: ' + computedStyle.borderStyle + '; border-width: '\n                + computedStyle.borderWidth + '; border-color: ' + computedStyle.borderColor + '; position: absolute; background-color: ' +\n                backgroundColor + ';';\n            maskRowCount = Math.floor(height / liHeight);\n            maskRowCount = wrapperElem.children.length > maskRowCount ? wrapperElem.children.length : maskRowCount;\n            maskItemHeight = liHeight + 'px';\n        }\n        var maskTemplate = '<div class=\"e-ftrchk e-mask-ftrchk\" style=\"width: 100%; height:' + maskItemHeight + ';\">'\n            + '<div class=\"e-checkbox-wrapper\" style=\"width: 100%;\"><input class=\"e-chk-hidden\">'\n            + this.getShimmerTemplate() + this.getShimmerTemplate() + '</div></div>';\n        maskList.innerHTML = '';\n        if (!wrapperElem.children.length) {\n            this.spinner.insertAdjacentHTML('beforebegin', maskTemplate);\n            var maskSpan = [].slice.call(this.spinner.parentElement\n                .querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n            maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n            maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n        }\n        this.spinner.insertBefore(maskList, this.cBox);\n        for (var i = 0; maskRowCount && i < maskRowCount; i++) {\n            maskList.innerHTML += maskTemplate;\n            var maskSpan = [].slice.call(maskList\n                .querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n            maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n            maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n        }\n        if (this.cBox) {\n            maskList.scrollTop = this.cBox.scrollTop;\n        }\n    };\n    CheckBoxFilterBase.prototype.removeMask = function () {\n        var maskLists = this.dialogObj.element.querySelectorAll('.e-mask-ftrchk');\n        if (maskLists.length) {\n            for (var i = 0; i < maskLists.length; i++) {\n                remove(maskLists[i]);\n            }\n        }\n        var maskParent = this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist');\n        if (maskParent) {\n            remove(this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist'));\n        }\n    };\n    CheckBoxFilterBase.prototype.infiniteScrollHandler = function () {\n        var target = this.cBox;\n        if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending\n            && this.infiniteLoadedElem.length <= (this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)\n            && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3\n            && (!this.infiniteDataCount || this.infiniteDataCount > (this.infiniteSkipCnt + this.parent.filterSettings.itemsCount))) {\n            this.makeInfiniteScrollRequest();\n            this.prevInfiniteScrollDirection = 'down';\n        }\n        else if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending\n            && this.infiniteLoadedElem.length > (this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)\n            && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.cBox.children)).splice(0, this.parent.filterSettings.itemsCount));\n            this.infiniteSkipCnt += this.prevInfiniteScrollDirection === 'down' ? this.parent.filterSettings.itemsCount :\n                (this.parent.filterSettings.itemsCount * 3);\n            appendChildren(this.cBox, this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.parent.filterSettings.itemsCount +\n                this.infiniteSkipCnt));\n            this.prevInfiniteScrollDirection = 'down';\n        }\n        else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt\n            && this.infiniteLoadedElem.length && this.infiniteLoadedElem.length > this.parent.filterSettings.itemsCount * 3\n            && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.cBox.children)).splice((this.parent.filterSettings\n                .itemsCount * 2), this.parent.filterSettings.itemsCount));\n            this.infiniteSkipCnt -= this.prevInfiniteScrollDirection === 'up' ? this.parent.filterSettings.itemsCount :\n                (this.parent.filterSettings.itemsCount * 3);\n            infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt +\n                this.parent.filterSettings.itemsCount)), this.cBox);\n            this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n            this.prevInfiniteScrollDirection = 'up';\n        }\n        else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt\n            && this.infiniteLoadedElem.length && this.cBox.children.length < this.parent.filterSettings.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.cBox.children)).splice((this.parent.filterSettings\n                .itemsCount * 2), this.infiniteDataCount % this.parent.filterSettings.itemsCount));\n            this.infiniteSkipCnt = (Math.floor(this.infiniteDataCount / this.parent.filterSettings.itemsCount) - 3) *\n                this.parent.filterSettings.itemsCount;\n            infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt +\n                this.parent.filterSettings.itemsCount)), this.cBox);\n            this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n            this.prevInfiniteScrollDirection = 'up';\n        }\n    };\n    CheckBoxFilterBase.prototype.makeInfiniteScrollRequest = function (query) {\n        var _this = this;\n        if (!this.infiniteInitialLoad && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n            setTimeout(function () {\n                if (_this.infiniteQueryExecutionPending) {\n                    _this.showMask();\n                }\n            }, 500);\n        }\n        else if (!this.infiniteInitialLoad) {\n            createSpinner({ target: this.spinner, cssClass: this.parent.cssClass ? this.parent.cssClass : null }, this.parent\n                .createElement);\n            showSpinner(this.spinner);\n        }\n        var fName = 'fn';\n        if (this.infiniteQuery && this.infiniteQuery.queries && this.infiniteQuery.queries.length) {\n            for (var i = 0; i < this.infiniteQuery.queries.length; i++) {\n                if (this.infiniteQuery.queries[i][\"\" + fName] === 'onTake'\n                    || this.infiniteQuery.queries[i][\"\" + fName] === 'onSkip') {\n                    this.infiniteQuery.queries.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        var existQuery = query ? true : false;\n        query = query ? query : this.infiniteQuery;\n        if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n            this.infiniteSkipCnt = 0;\n        }\n        else {\n            this.infiniteSkipCnt += this.parent.filterSettings.itemsCount;\n        }\n        query.skip(this.infiniteSkipCnt);\n        if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n            query.take(this.parent.filterSettings.itemsCount * 3);\n            this.infiniteSkipCnt += this.parent.filterSettings.itemsCount * 2;\n        }\n        else {\n            query.take(this.parent.filterSettings.itemsCount);\n        }\n        if (!existQuery) {\n            if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n                var args = {\n                    requestType: events.filterChoiceRequest, query: query, filterChoiceCount: null, filterModel: this\n                };\n                if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n                    args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n                }\n                this.filterEvent(args, query);\n            }\n            else {\n                this.processDataOperation(query);\n                this.infiniteQueryExecutionPending = true;\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.processDataOperation = function (query, isInitial) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.isForeignColumn(this.options.column) && isInitial) {\n            var colData = ('result' in this.options.column.dataSource) ?\n                new DataManager(this.options.column.dataSource.result) :\n                this.options.column.dataSource;\n            this.foreignKeyQuery.params = query.params;\n            allPromise.push(colData.executeQuery(this.foreignKeyQuery));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        this.addInfiniteScrollEvent(query);\n        if (this.infiniteRenderMod && this.infiniteInitialLoad && !this.options.isRemote) {\n            var field = this.isForeignColumn(this.options.column) ? this.options.foreignKeyValue :\n                this.options.column.field;\n            this.options.dataSource.executeQuery(new Query().sortBy(field, DataUtil.fnAscending)).then(function (e) {\n                _this.options.dataSource.dataSource.json = e.result;\n                _this.executeQueryOperations(query, allPromise, runArray);\n            });\n        }\n        else {\n            this.executeQueryOperations(query, allPromise, runArray);\n        }\n    };\n    CheckBoxFilterBase.prototype.executeQueryOperations = function (query, allPromise, runArray) {\n        var _this = this;\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            _this.infiniteQueryExecutionPending = _this.infiniteRenderMod ? false : _this.infiniteQueryExecutionPending;\n            for (var j = 0; j < e.length; j++) {\n                _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e[j].count : _this.infiniteDataCount;\n                runArray[i++](e[parseInt(j.toString(), 10)].result);\n            }\n        }).catch(function () {\n            if (_this.infiniteRenderMod && _this.parent.filterSettings && _this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n                _this.parent.showMaskRow(undefined, _this.dialogObj.element);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.dataSuccess = function (e) {\n        if (!this.infiniteInitialLoad && this.infiniteDataCount && ((this.infiniteSkipCnt >= this.infiniteDataCount\n            && !this.infiniteSearchValChange) || (e.length === 0))) {\n            return;\n        }\n        this.fullData = e;\n        var args1 = { dataSource: this.fullData, executeQuery: true, field: this.options.field };\n        this.parent.notify(events.beforeCheckboxRenderer, args1);\n        if (args1.executeQuery) {\n            var query = new Query();\n            if (!this.customQuery) {\n                this.isExecuteLocal = true;\n                this.queryGenerate(query);\n                this.isExecuteLocal = false;\n            }\n            // query.select(this.options.field);\n            var result = new DataManager(args1.dataSource).executeLocal(query);\n            var col = this.options.column;\n            this.filteredData = CheckBoxFilterBase.getDistinct(result, this.options.field, col, this.foreignKeyData, this).records || [];\n        }\n        var data = args1.executeQuery ? this.filteredData : args1.dataSource;\n        this.processDataSource(null, true, data, args1);\n        if (this.sInput && ((this.infiniteRenderMod && this.infiniteInitialLoad) || !this.infiniteRenderMod)) {\n            this.sInput.focus();\n        }\n        if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n            this.infiniteInitialLoad = false;\n            this.infiniteSearchValChange = false;\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: this.options.field, columnType: this.options.type\n        };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        this.parent.notify(events.cBoxFltrComplete, args);\n        if (this.isCheckboxFilterTemplate) {\n            hideSpinner(this.spinner);\n        }\n    };\n    CheckBoxFilterBase.prototype.queryGenerate = function (query) {\n        if (this.parent.searchSettings && this.parent.searchSettings.key.length) {\n            var moduleName = this.options.dataManager.adaptor.getModuleName;\n            if (!isNullOrUndefined(this.parent.getDataModule) && moduleName && moduleName() === 'ODataV4Adaptor') {\n                this.parent.getDataModule().searchQuery(query);\n            }\n            else {\n                var searchSettings = this.parent.searchSettings;\n                var fields = searchSettings.fields.length ? searchSettings.fields\n                    : this.options.columns.map(function (f) { return f.field; });\n                query.search(searchSettings.key, fields, searchSettings.operator, searchSettings.ignoreCase, searchSettings.ignoreAccent);\n            }\n        }\n        if ((this.options.filteredColumns.length)) {\n            var cols = [];\n            for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                var filterColumn = this.options.filteredColumns[parseInt(i.toString(), 10)];\n                if (this.options.uid) {\n                    filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n                    if (filterColumn.uid !== this.options.uid) {\n                        cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n                    }\n                }\n                else {\n                    if (filterColumn.field !== this.options.field) {\n                        cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n                    }\n                }\n            }\n            var predicate = this.getPredicateFromCols(cols, this.isExecuteLocal);\n            if (predicate) {\n                query.where(predicate);\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.processDataSource = function (query, isInitial, dataSource, args) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.isExecuteLocal = true;\n        this.updateResult();\n        this.isExecuteLocal = false;\n        var args1 = { dataSource: this.fullData, isCheckboxFilterTemplate: false, column: this.options.column,\n            element: this.cBox, type: this.options.type, format: this.options.type, btnObj: this.options.isResponsiveFilter ? null :\n                this.dialogObj.btnObj[0], searchBox: this.searchBox };\n        this.parent.notify(events.beforeCheckboxfilterRenderer, args1);\n        this.isCheckboxFilterTemplate = args1.isCheckboxFilterTemplate;\n        if (!this.isCheckboxFilterTemplate) {\n            this.createFilterItems(dataSource, isInitial, args);\n        }\n        else if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n            this.removeMask();\n        }\n    };\n    CheckBoxFilterBase.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilterBase.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.infiniteRenderMod && this.existingPredicate[this.options.field] ?\n            this.getPredicateFromCols(this.existingPredicate[this.options.field], this.isExecuteLocal) :\n            this.getPredicateFromCols(this.options.filteredColumns, this.isExecuteLocal);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        this.parent.notify(events.beforeCheckboxRendererQuery, { query: query });\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getObject(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilterBase.prototype.clickHandler = function (e) {\n        var _a;\n        if (!isNullOrUndefined(Global.timer)) {\n            clearTimeout(Global.timer);\n        }\n        var target = e.target;\n        if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer'\n            && parentsUntil(target, 'e-mask-ftrchk')) {\n            return;\n        }\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem && !this.isCheckboxFilterTemplate) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n                if (this.infiniteRenderMod && !elem.parentElement.querySelector('.e-add-current')) {\n                    this.localInfiniteSelectionInteracted = true;\n                    var caseSen = this.options.allowCaseSensitive;\n                    var span = elem.parentElement.querySelector('.e-frame');\n                    var input = span.previousSibling;\n                    var optr = input.checked ? 'equal' : 'notequal';\n                    var pred = input.checked ? 'or' : 'and';\n                    var defaults = { field: this.options.field, predicate: pred, uid: this.options.uid,\n                        operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.options.ignoreAccent\n                    };\n                    var value = this.values[parentsUntil(input, 'e-ftrchk').getAttribute('uid')];\n                    this.updateInfiniteManualSelectPred(defaults, value);\n                    if (this.infiniteRenderMod && !this.options.isRemote && this.options.parentTotalDataCount\n                        && this.infiniteUnloadParentExistPred.length) {\n                        var predicate = this.getPredicateFromCols((_a = this.options.filteredColumns).concat.apply(_a, this.infiniteManualSelectMaintainPred), true);\n                        var query = new Query();\n                        if (predicate) {\n                            query.where(predicate);\n                        }\n                        var result = new DataManager(this.infinitePermenantLocalData).executeLocal(query);\n                        if (this.options.parentTotalDataCount !== result.length) {\n                            this.options.parentTotalDataCount = result.length;\n                        }\n                        if (!this.options.parentTotalDataCount && this.infiniteUnloadParentExistPred.length) {\n                            this.infiniteUnloadParentExistPred = [];\n                        }\n                    }\n                    if (this.infiniteUnloadParentExistPred.length && (this.options.parentTotalDataCount === this.infiniteDataCount\n                        || !this.options.parentTotalDataCount)) {\n                        this.infiniteUnloadParentExistPred = [];\n                    }\n                }\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n        this.setFocus(parentsUntil(elem, 'e-ftrchk'));\n    };\n    CheckBoxFilterBase.prototype.updateInfiniteManualSelectPred = function (defaults, value) {\n        for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n            var predmdl = this.infiniteManualSelectMaintainPred[i];\n            if (predmdl.value + '' === value + '' && (predmdl.operator === 'equal' || predmdl.operator === 'notequal')) {\n                this.infiniteManualSelectMaintainPred.splice(i, 1);\n                break;\n            }\n        }\n        if ((defaults.predicate === 'or' && (!this.localInfiniteSelectAllClicked || !this.infiniteLocalSelectAll))\n            || (defaults.predicate === 'and' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll))) {\n            this.infiniteManualSelectMaintainPred.push(extend({}, { value: value }, defaults));\n            if (defaults.predicate === 'or') {\n                this.options.parentTotalDataCount++;\n            }\n            else {\n                this.options.parentTotalDataCount--;\n            }\n        }\n    };\n    /**\n     * Method to set the next target element on keyboard navigation using arrow keys.\n     *\n     * @param {KeyboardEventArgs} e - Defines the Keyboard event argument\n     * @param {HTMLElement[]} focusableElements - Defines the Focusable elements\n     * @returns {void}\n     */\n    CheckBoxFilterBase.prototype.focusNextOrPrev = function (e, focusableElements) {\n        var nextIndex = (e.key === 'ArrowUp') ? focusableElements.indexOf(document.activeElement) - 1\n            : focusableElements.indexOf(document.activeElement) + 1;\n        var nextElement = focusableElements[((nextIndex + focusableElements.length) % focusableElements.length)];\n        // Set focus on the next / previous element\n        if (nextElement) {\n            nextElement.focus();\n            var target = nextElement.classList.contains('e-chk-hidden') ? parentsUntil(nextElement, 'e-ftrchk') : nextElement;\n            this.setFocus(target);\n        }\n    };\n    CheckBoxFilterBase.prototype.keyupHandler = function (e) {\n        if (e.key === 'Tab' || ((e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey)) {\n            this.setFocus(parentsUntil(e.target, 'e-ftrchk'));\n        }\n        if ((e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey && this.parent.filterSettings\n            && this.parent.filterSettings.type === 'CheckBox') {\n            e.preventDefault();\n            var focusableElements = Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex=\"-1\"])'));\n            this.focusNextOrPrev(e, focusableElements);\n        }\n    };\n    CheckBoxFilterBase.prototype.setFocus = function (elem) {\n        var prevElem = this.dlg.querySelector('.e-chkfocus');\n        if (prevElem) {\n            prevElem.classList.remove('e-chkfocus');\n        }\n        if (elem && elem !== prevElem) {\n            elem.classList.add('e-chkfocus');\n        }\n    };\n    CheckBoxFilterBase.prototype.updateAllCBoxes = function (checked) {\n        if (this.infiniteRenderMod) {\n            this.localInfiniteSelectAllClicked = true;\n            this.infiniteLocalSelectAll = checked;\n            this.infiniteUnloadParentExistPred = [];\n            this.infiniteManualSelectMaintainPred = [];\n        }\n        var cBoxes = this.infiniteRenderMod ?\n            this.infiniteLoadedElem.map(function (arr) {\n                return arr.querySelector('.e-frame');\n            }) : [].slice.call(this.cBox.querySelectorAll('.e-frame:not(.e-add-current)'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n            setChecked(cBox.previousSibling, checked);\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            if (!this.options.isResponsiveFilter) {\n                this.dialogObj.element.querySelector('.e-btn').focus();\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.createCheckbox = function (value, checked, data) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        setChecked(elem.querySelector('input'), checked);\n        var label = elem.querySelector('.e-label');\n        var dummyData = extendObjWithFn({}, data, { column: this.options.column, parent: this.parent });\n        var innerText = this.options.disableHtmlEncode ? 'textContent' : 'innerHTML';\n        label[\"\" + innerText] = !isNullOrUndefined(value) && value.toString().length ?\n            this.parent.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(value) : value : this.getLocalizedLabel('Blanks');\n        var checkboxUid = getUid('cbox');\n        label.setAttribute('id', checkboxUid + 'cboxLabel');\n        elem.querySelector('input').setAttribute('aria-labelledby', label.id);\n        if (label.innerHTML === this.getLocalizedLabel('Blanks')) {\n            this.isBlanks = true;\n        }\n        if (typeof value === 'boolean') {\n            label.innerHTML = value === true ? this.getLocalizedLabel('FilterTrue') : this.getLocalizedLabel('FilterFalse');\n        }\n        addClass([label], ['e-checkboxfiltertext']);\n        if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel('SelectAll')\n            && data[this.options.column.field] !== this.getLocalizedLabel('AddCurrentSelection')) {\n            label.innerHTML = '';\n            var isReactCompiler = this.parent.isReact && this.options.column.filter\n                && typeof (this.options.column.filter.itemTemplate) !== 'string' &&\n                !(this.options.column.filter.itemTemplate.prototype && this.options.column.filter.itemTemplate.prototype.CSPTemplate);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj &&\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.parent.parentDetails.parentInstObj.isReact;\n            if (isReactCompiler || isReactChild) {\n                this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, label);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(label, this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, null, this.parent.root));\n            }\n        }\n        return elem;\n    };\n    CheckBoxFilterBase.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.infiniteRenderMod ? this.infiniteLoadedElem.length : this.cBox.children.length - 1;\n        var className = [];\n        var disabled = false;\n        var elem = this.infiniteRenderMod ? this.sBox.querySelector('.e-selectall') : this.cBox.querySelector('.e-selectall');\n        var selected = this.infiniteRenderMod ? this.infiniteLoadedElem.filter(function (arr) { return arr.querySelector('.e-check'); }).length :\n            this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)').length;\n        if (this.cBox.querySelector('.e-add-current')) {\n            cnt -= 1;\n        }\n        var btn;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n            btn.disabled = false;\n        }\n        var input = elem.previousSibling;\n        setChecked(input, false);\n        input.indeterminate = false;\n        if (this.infiniteRenderMod && this.sInput.value === '' && !this.options.parentCurrentViewDataCount && !this.localInfiniteSelectionInteracted\n            && (!this.localInfiniteSelectAllClicked || (!this.infiniteLocalSelectAll && !selected)) && (cnt !== selected || cnt === selected)) {\n            selected = 0;\n        }\n        else if (this.infiniteRenderMod && this.infiniteLoadedElem.length < this.infiniteDataCount\n            && this.infiniteUnloadParentExistPred.length && (!selected || cnt === selected) && this.infiniteLocalSelectAll) {\n            if (!selected) {\n                selected += this.infiniteUnloadParentExistPred.length;\n            }\n            else {\n                cnt += this.infiniteUnloadParentExistPred.length;\n            }\n        }\n        if (cnt === selected) {\n            if (this.infiniteRenderMod) {\n                this.infiniteLocalSelectAll = true;\n                this.localInfiniteSelectAllClicked = true;\n                this.infiniteManualSelectMaintainPred = [];\n            }\n            className = ['e-check'];\n            setChecked(input, true);\n        }\n        else if (selected) {\n            className = ['e-stop'];\n            input.indeterminate = true;\n        }\n        else {\n            if (this.infiniteRenderMod) {\n                this.infiniteLocalSelectAll = false;\n                this.localInfiniteSelectAllClicked = true;\n                this.infiniteManualSelectMaintainPred = [];\n            }\n            className = ['e-uncheck'];\n            disabled = true;\n            if (btn) {\n                btn.disabled = true;\n            }\n        }\n        if (btn) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n    };\n    CheckBoxFilterBase.prototype.createFilterItems = function (data, isInitial, args1) {\n        var _a, _b, _c;\n        var cBoxes = this.parent.createElement('div');\n        var btn;\n        var disabled = false;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n        }\n        var nullCounter = -1;\n        var key = 'ejValue';\n        if (!args1.executeQuery) {\n            key = args1.field;\n        }\n        for (var i = 0; i < data.length; i++) {\n            var val = getValue(key, data[parseInt(i.toString(), 10)]);\n            if (val === '' || isNullOrUndefined(val)) {\n                nullCounter = nullCounter + 1;\n            }\n        }\n        if (!this.infiniteRenderMod) {\n            this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n        }\n        if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n            this.removeMask();\n        }\n        if (data.length && !this.renderEmpty) {\n            var selectAllValue = this.getLocalizedLabel('SelectAll');\n            var innerDiv = this.cBox.querySelector('.e-checkfltrnmdiv');\n            if (innerDiv) {\n                innerDiv.classList.remove('e-checkfltrnmdiv');\n            }\n            var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n            if (this.parent.cssClass) {\n                if (this.parent.cssClass.indexOf(' ') !== -1) {\n                    addClass([checkBox], this.parent.cssClass.split(' '));\n                }\n                else {\n                    addClass([checkBox], [this.parent.cssClass]);\n                }\n            }\n            if (this.infiniteInitialLoad || !this.infiniteRenderMod) {\n                var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n                selectAll.querySelector('.e-frame').classList.add('e-selectall');\n                if (this.infiniteRenderMod) {\n                    selectAll.classList.add('e-infinitescroll');\n                    if (this.parent.enableAdaptiveUI) {\n                        this.spinner.style.height = (this.spinner.offsetHeight - getListHeight(this.cBox)) + 'px';\n                    }\n                    this.sBox.insertBefore(selectAll, this.spinner);\n                }\n                else {\n                    cBoxes.appendChild(selectAll);\n                }\n            }\n            else if (this.sBox.querySelector('.e-ftrchk .e-selectall')) {\n                this.sBox.querySelector('.e-ftrchk .e-selectall').previousSibling.disabled = false;\n                this.sBox.querySelector('.e-ftrchk .e-selectall').parentElement.classList.remove('e-checkbox-disabled');\n            }\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            if (this.sInput.value) {\n                var predicateCheckBox = this.createCheckbox(this.getLocalizedLabel('AddCurrentSelection'), false, (_b = {},\n                    _b[this.options.field] = this.getLocalizedLabel('AddCurrentSelection'),\n                    _b));\n                if (this.parent.cssClass) {\n                    if (this.parent.cssClass.indexOf(' ') !== -1) {\n                        addClass([predicateCheckBox], this.parent.cssClass.split(' '));\n                    }\n                    else {\n                        addClass([predicateCheckBox], [this.parent.cssClass]);\n                    }\n                }\n                if ((this.infiniteRenderMod && (!isNullOrUndefined(this.sBox.children[2])\n                    && this.sBox.children[2].innerText !== this.getLocalizedLabel('AddCurrentSelection'))) || !this.infiniteRenderMod) {\n                    var predicateElement = createCboxWithWrap(getUid('cbox'), predicateCheckBox, 'e-ftrchk');\n                    predicateElement.querySelector('.e-frame').classList.add('e-add-current');\n                    if (this.infiniteRenderMod) {\n                        predicateElement.classList.add('e-infinitescroll');\n                        this.sBox.insertBefore(predicateElement, this.spinner);\n                        var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n                        var reduceHeight = Math.ceil(predicateElement.getBoundingClientRect().height);\n                        checkBoxListElem.style.height = (parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0], 10) - reduceHeight)\n                            + 'px';\n                        checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n                    }\n                    else {\n                        cBoxes.appendChild(predicateElement);\n                    }\n                }\n                else if (this.sBox.querySelector('.e-ftrchk .e-add-current')) {\n                    this.sBox.querySelector('.e-ftrchk .e-add-current').previousSibling.disabled = false;\n                    this.sBox.querySelector('.e-ftrchk .e-add-current').parentElement.classList.remove('e-checkbox-disabled');\n                }\n            }\n            else if (this.infiniteRenderMod && !isNullOrUndefined(this.sBox.children[2])\n                && this.sBox.children[2].innerText === this.getLocalizedLabel('AddCurrentSelection')) {\n                var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n                var increaseHeight = Math.ceil(this.sBox.children[2].getBoundingClientRect().height);\n                checkBoxListElem.style.height = (parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0], 10) + increaseHeight)\n                    + 'px';\n                checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n                remove(this.sBox.children[2]);\n            }\n            var isRndere = void 0;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[\"\" + uid] = getValue(key, data[parseInt(i.toString(), 10)]);\n                var value = getValue(this.options.field, data[parseInt(i.toString(), 10)]);\n                if (this.options.formatFn) {\n                    value = this.valueFormatter.toView(value, this.options.formatFn);\n                }\n                var args_1 = { value: value, column: this.options.column, data: data[parseInt(i.toString(), 10)] };\n                this.parent.notify(events.filterCboxValue, args_1);\n                value = args_1.value;\n                if ((value === '' || isNullOrUndefined(value))) {\n                    if (isRndere) {\n                        continue;\n                    }\n                    isRndere = true;\n                }\n                if (this.infiniteRenderMod) {\n                    this.updateInfiniteUnLoadedCheckboxExistPred(value, this.infiniteUnloadParentExistPred);\n                }\n                var checkbox = this.localInfiniteSelectAllClicked ?\n                    this.createCheckbox(value, this.infiniteLocalSelectAll, getValue('dataObj', data[i])) :\n                    this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[\"\" + uid]), getValue('dataObj', data[i]));\n                cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n                if (this.infiniteRenderMod) {\n                    cBoxes.lastChild.style.height = getListHeight(this.cBox) + 'px';\n                }\n            }\n            var scrollTop = this.cBox.scrollTop;\n            if (!this.infiniteRenderMod || this.infiniteSearchValChange) {\n                this.cBox.innerHTML = '';\n            }\n            else if (this.infiniteRenderMod && this.cBox.children.length) {\n                infiniteRemoveElements(([].slice.call(this.cBox.children)).splice(0, this.parent.filterSettings.itemsCount));\n            }\n            if (this.infiniteRenderMod) {\n                (_c = this.infiniteLoadedElem).push.apply(_c, [].slice.call(cBoxes.children));\n                this.itemsCnt = nullCounter !== -1 ? this.infiniteLoadedElem.length - nullCounter : this.infiniteLoadedElem.length;\n            }\n            if (this.infiniteUnloadParentExistPred.length && (this.infiniteLoadedElem.length >= this.infiniteDataCount\n                || !this.options.parentCurrentViewDataCount || (this.options.parentTotalDataCount === this.infiniteDataCount\n                && this.options.parentCurrentViewDataCount))) {\n                this.infiniteUnloadParentExistPred = [];\n            }\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            if (this.infiniteRenderMod && !this.infiniteScrollAppendDiff) {\n                this.infiniteScrollAppendDiff = Math.round(scrollTop - this.cBox.scrollTop);\n            }\n            this.updateIndeterminatenBtn();\n            if (!this.infiniteRenderMod) {\n                if (btn) {\n                    btn.disabled = false;\n                }\n                disabled = false;\n            }\n            else {\n                if (btn && btn.disabled) {\n                    disabled = true;\n                }\n                else {\n                    disabled = false;\n                }\n            }\n        }\n        else {\n            cBoxes.appendChild(this.parent.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = '';\n            if (this.infiniteRenderMod) {\n                var selectAll = this.sBox.querySelector('.e-ftrchk .e-selectall');\n                if (selectAll) {\n                    var selectAllParent = selectAll.parentElement.parentElement;\n                    if (selectAll.classList.contains('e-check')) {\n                        toogleCheckbox(selectAllParent);\n                    }\n                    else if (selectAll.classList.contains('e-stop')) {\n                        toogleCheckbox(selectAllParent);\n                        selectAll.classList.remove('e-stop');\n                        toogleCheckbox(selectAllParent);\n                    }\n                    selectAll.previousSibling.disabled = true;\n                    selectAll.parentElement.classList.add('e-checkbox-disabled');\n                }\n                var addCurrSelection = this.sBox.querySelector('.e-ftrchk .e-add-current');\n                if (addCurrSelection) {\n                    var addCurrSelectionParent = addCurrSelection.parentElement.parentElement;\n                    if (addCurrSelection.classList.contains('e-check')) {\n                        toogleCheckbox(addCurrSelectionParent);\n                    }\n                    addCurrSelection.previousSibling.disabled = true;\n                    addCurrSelection.parentElement.classList.add('e-checkbox-disabled');\n                }\n            }\n            this.cBox.appendChild(this.parent.createElement('div', { className: 'e-checkfltrnmdiv' }));\n            appendChildren(this.cBox.children[0], [].slice.call(cBoxes.children));\n            if (btn) {\n                btn.disabled = true;\n            }\n            disabled = true;\n            this.filterState = !disabled;\n        }\n        if (btn && data.length) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        var args = { requestType: events.filterChoiceRequest, dataSource: this.renderEmpty ? [] : data };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        this.parent.notify(events.cBoxFltrComplete, args);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n        if (this.infiniteRenderMod && this.infiniteInitialLoad) {\n            this.cBox.style.marginTop = '0px';\n        }\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilterBase.prototype.updateInfiniteUnLoadedCheckboxExistPred = function (value, updatePredArr) {\n        for (var j = 0; j < updatePredArr.length; j++) {\n            var pred = updatePredArr[j];\n            var predValue = pred.value instanceof Date ?\n                this.valueFormatter.toView(pred.value, this.options.formatFn) : pred.value;\n            if (value === predValue && (pred.operator === 'equal' || pred.operator === 'notequal')) {\n                this.infiniteManualSelectMaintainPred.push(updatePredArr[j]);\n                updatePredArr.splice(j, 1);\n                j--;\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            var checkState = this.sInput.value ? true : this.result[\"\" + value];\n            if (this.infiniteRenderMod) {\n                return checkState;\n            }\n            else {\n                return this.options.operator === 'notequal' ? !checkState : checkState;\n            }\n        }\n    };\n    CheckBoxFilterBase.getDistinct = function (json, field, column, foreignKeyData, checkboxFilter) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;\n        while (len--) {\n            value = json[parseInt(len.toString(), 10)];\n            if (column && column.type === 'dateonly' && typeof value[\"\" + field] === 'string' && value[\"\" + field]) {\n                var arr = value[\"\" + field].split(/[^0-9.]/);\n                value[\"\" + field] = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10));\n            }\n            value = getObject(field, value); //local remote diff, check with mdu\n            var currentFilterValue = (typeof value === 'string') && !(isNullOrUndefined(checkboxFilter)) &&\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                !(isNullOrUndefined(checkboxFilter.parent)) && !(isNullOrUndefined(checkboxFilter.parent.filterSettings)) &&\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                !(isNullOrUndefined(checkboxFilter.parent.filterSettings.enableCaseSensitivity)) ? value.toLowerCase() : value;\n            if (!(currentFilterValue in lookup)) {\n                var obj = {};\n                obj[\"\" + ejValue] = value;\n                lookup[\"\" + currentFilterValue] = true;\n                if (isForeignKey) {\n                    var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n                    setValue(events.foreignKeyData, foreignDataObj, json[parseInt(len.toString(), 10)]);\n                    value = getValue(column.foreignKeyValue, foreignDataObj);\n                }\n                setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                setValue('dataObj', json[parseInt(len.toString(), 10)], obj);\n                result.push(obj);\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilterBase.getPredicate = function (columns, isExecuteLocal) {\n        var cols = DataUtil.distinct(columns, 'field', true) || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[parseInt(i.toString(), 10)].field));\n            if (collection.length !== 0) {\n                pred[cols[parseInt(i.toString(), 10)].field] = CheckBoxFilterBase.generatePredicate(collection, isExecuteLocal);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilterBase.generatePredicate = function (cols, isExecuteLocal) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var operate = 'or';\n        var first = CheckBoxFilterBase.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime' || first.type === 'dateonly') {\n            predicate = getDatePredicate(first, first.type, isExecuteLocal);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilterBase.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[parseInt(p.toString(), 10)] = CheckBoxFilterBase.updateDateFilter(cols[parseInt(p.toString(), 10)]);\n            if (len > 2 && p > 1 && ((cols[p].predicate === 'or' && cols[p - 1].predicate === 'or')\n                || (cols[p].predicate === 'and' && cols[p - 1].predicate === 'and'))) {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n                    predicate.predicates.push(getDatePredicate(cols[parseInt(p.toString(), 10)], cols[p].type, isExecuteLocal));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n                    if (cols[parseInt(p.toString(), 10)].predicate === 'and' && cols[parseInt(p.toString(), 10)].operator === 'equal') {\n                        predicate = predicate[\"\" + operate](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n                    }\n                    else {\n                        predicate = predicate[(cols[parseInt(p.toString(), 10)].predicate)](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n                    }\n                }\n                else {\n                    predicate = cols[parseInt(p.toString(), 10)].ejpredicate ?\n                        predicate[cols[parseInt(p.toString(), 10)]\n                            .predicate](cols[parseInt(p.toString(), 10)].ejpredicate) :\n                        predicate[(cols[parseInt(p.toString(), 10)].predicate)](cols[parseInt(p.toString(), 10)].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilterBase.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            if (filter.type === 'string' || isNullOrUndefined(filter.type) && typeof (filter.value) === 'string') {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilterBase.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.type === 'dateonly' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    return CheckBoxFilterBase;\n}());\nexport { CheckBoxFilterBase };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}