{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { addClass, detach, EventHandler, isNullOrUndefined, Ajax, formatUnit } from '@syncfusion/ej2-base';\nimport { Browser, closest, removeClass, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Uploader, TextBox } from '@syncfusion/ej2-inputs';\nimport { Button, RadioButton } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, parseHtml, hasClass, convertToBlob } from '../base/util';\nimport { isIDevice } from '../../common/util';\nvar Video = /** @class */function () {\n  function Video(parent, serviceLocator) {\n    this.isVideoUploaded = false;\n    this.isAllowedTypes = true;\n    this.pageX = null;\n    this.pageY = null;\n    this.mouseX = null;\n    this.deletedVid = [];\n    this.isResizeBind = true;\n    this.parent = parent;\n    this.rteID = parent.element.id;\n    this.i10n = serviceLocator.getService('rteLocale');\n    this.rendererFactory = serviceLocator.getService('rendererFactory');\n    this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n    this.addEventListener();\n    this.isDestroyed = false;\n    this.docClick = this.onDocumentClick.bind(this);\n  }\n  Video.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.keyDown, this.onKeyDown, this);\n    this.parent.on(events.keyUp, this.onKeyUp, this);\n    this.parent.on(events.insertVideo, this.insertingVideo, this);\n    this.parent.on(events.initialEnd, this.afterRender, this);\n    this.parent.on(events.dynamicModule, this.afterRender, this);\n    this.parent.on(events.windowResize, this.onWindowResize, this);\n    this.parent.on(events.showVideoDialog, this.showDialog, this);\n    this.parent.on(events.closeVideoDialog, this.closeDialog, this);\n    this.parent.on(events.dropDownSelect, this.alignmentSelect, this);\n    this.parent.on(events.videoDelete, this.deleteVideo, this);\n    this.parent.on(events.videoToolbarAction, this.onToolbarAction, this);\n    this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n    this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n    this.parent.on(events.videoSize, this.videoSize, this);\n    this.parent.on(events.insertCompleted, this.showVideoQuickToolbar, this);\n    this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n  Video.prototype.removeEventListener = function () {\n    this.parent.off(events.keyDown, this.onKeyDown);\n    this.parent.off(events.keyUp, this.onKeyUp);\n    this.parent.off(events.insertVideo, this.insertingVideo);\n    this.parent.off(events.windowResize, this.onWindowResize);\n    this.parent.off(events.initialEnd, this.afterRender);\n    this.parent.off(events.dynamicModule, this.afterRender);\n    this.parent.off(events.showVideoDialog, this.showDialog);\n    this.parent.off(events.closeVideoDialog, this.closeDialog);\n    this.parent.off(events.dropDownSelect, this.alignmentSelect);\n    this.parent.off(events.videoDelete, this.deleteVideo);\n    this.parent.off(events.videoToolbarAction, this.onToolbarAction);\n    this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n    this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n    this.parent.off(events.videoSize, this.videoSize);\n    this.parent.off(events.insertCompleted, this.showVideoQuickToolbar);\n    this.parent.off(events.clearDialogObj, this.clearDialogObj);\n    this.parent.off(events.destroy, this.destroy);\n    if (!isNullOrUndefined(this.contentModule)) {\n      EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.videoClick);\n      this.parent.formatter.editorManager.observer.off(events.checkUndo, this.undoStack);\n      if (this.parent.insertVideoSettings.resize) {\n        EventHandler.remove(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart);\n        this.parent.element.ownerDocument.removeEventListener('mousedown', this.docClick);\n        this.docClick = null;\n        EventHandler.remove(this.contentModule.getEditPanel(), 'cut', this.onCutHandler);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n      }\n    }\n  };\n  Video.prototype.afterRender = function () {\n    this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n    EventHandler.add(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.videoClick, this);\n    if (this.parent.insertVideoSettings.resize) {\n      EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n      this.parent.element.ownerDocument.addEventListener('mousedown', this.docClick);\n      EventHandler.add(this.contentModule.getEditPanel(), 'cut', this.onCutHandler, this);\n    }\n  };\n  Video.prototype.clearDialogObj = function () {\n    if (this.uploadObj && !this.uploadObj.isDestroyed) {\n      this.uploadObj.destroy();\n      detach(this.uploadObj.element);\n      this.uploadObj = null;\n    }\n    if (this.webUrlBtn && !this.webUrlBtn.isDestroyed) {\n      this.webUrlBtn.destroy();\n      detach(this.webUrlBtn.element);\n      this.webUrlBtn = null;\n    }\n    if (this.embedUrlBtn && !this.embedUrlBtn.isDestroyed) {\n      this.embedUrlBtn.destroy();\n      detach(this.embedUrlBtn.element);\n      this.embedUrlBtn = null;\n    }\n    if (this.widthNum && !this.widthNum.isDestroyed) {\n      this.widthNum.destroy();\n      detach(this.widthNum.element);\n      this.widthNum = null;\n    }\n    if (this.heightNum && !this.heightNum.isDestroyed) {\n      this.heightNum.destroy();\n      detach(this.heightNum.element);\n      this.heightNum = null;\n    }\n    if (this.button && !this.button.isDestroyed) {\n      this.button.destroy();\n      detach(this.button.element);\n      this.heightNum = null;\n    }\n    if (this.dialogObj && this.dialogObj.element) {\n      this.dialogObj.destroy();\n      detach(this.dialogObj.element);\n      this.dialogObj = null;\n    }\n  };\n  // eslint-disable-next-line\n  Video.prototype.onKeyUp = function (event) {\n    if (!isNOU(this.deletedVid) && this.deletedVid.length > 0) {\n      for (var i = 0; i < this.deletedVid.length; i++) {\n        var args = {\n          element: this.deletedVid[i],\n          src: this.deletedVid[i].tagName !== 'IFRAME' ? this.deletedVid[i].querySelector('source').getAttribute('src') : this.deletedVid[i].src\n        };\n        this.parent.trigger(events.afterMediaDelete, args);\n      }\n    }\n  };\n  Video.prototype.undoStack = function (args) {\n    if ((args.subCommand.toLowerCase() === 'undo' || args.subCommand.toLowerCase() === 'redo') && this.parent.editorMode === 'HTML') {\n      for (var i = 0; i < this.parent.formatter.getUndoRedoStack().length; i++) {\n        var temp = this.parent.createElement('div');\n        var contentElem = this.parent.formatter.getUndoRedoStack()[i].text;\n        temp.appendChild(contentElem.cloneNode(true));\n        var vid = temp.querySelectorAll('video');\n        if (temp.querySelector('.e-vid-resize') && vid.length > 0) {\n          for (var j = 0; j < vid.length; j++) {\n            vid[j].style.outline = '';\n          }\n          detach(temp.querySelector('.e-vid-resize'));\n          var clonedElement = temp.cloneNode(true);\n          var fragment = document.createDocumentFragment();\n          while (clonedElement.firstChild) {\n            fragment.appendChild(clonedElement.firstChild);\n          }\n          this.parent.formatter.getUndoRedoStack()[i].text = fragment;\n        }\n      }\n    }\n  };\n  Video.prototype.onIframeMouseDown = function () {\n    if (this.dialogObj) {\n      this.dialogObj.hide({\n        returnValue: true\n      });\n    }\n  };\n  Video.prototype.videoSize = function (e) {\n    var _this = this;\n    if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n      return;\n    }\n    this.insertVideo(e);\n    if (!isNullOrUndefined(this.dialogObj)) {\n      var vidSizeHeader = this.i10n.getConstant('videoSizeHeader');\n      var linkUpdate = this.i10n.getConstant('dialogUpdate');\n      var dialogContent = this.vidsizeInput(e);\n      var selectObj_1 = {\n        args: e.args,\n        selfVideo: this,\n        selection: e.selection,\n        selectNode: e.selectNode\n      };\n      this.dialogObj.setProperties({\n        width: '290px',\n        header: vidSizeHeader,\n        content: dialogContent,\n        buttons: [{\n          // eslint-disable-next-line\n          click: function (e) {\n            _this.insertSize(selectObj_1);\n          },\n          buttonModel: {\n            content: linkUpdate,\n            cssClass: 'e-flat e-update-size',\n            isPrimary: true\n          }\n        }]\n      });\n      this.dialogObj.element.style.maxHeight = 'inherit';\n      this.dialogObj.content.querySelector('input').focus();\n    }\n  };\n  Video.prototype.vidsizeInput = function (e) {\n    var _this = this;\n    var selectNode = e.selectNode[0];\n    var vidHeight = this.i10n.getConstant('videoHeight');\n    var vidWidth = this.i10n.getConstant('videoWidth');\n    var vidSizeWrap = this.parent.createElement('div', {\n      className: 'e-video-sizewrap'\n    });\n    var widthVal = isNullOrUndefined(this.changedWidthValue) && (selectNode.style.width.toString() === 'auto' || selectNode.style.width !== '') ? selectNode.style.width : !isNullOrUndefined(this.changedWidthValue) ? this.changedWidthValue : parseInt(selectNode.getClientRects()[0].width.toString(), 10).toString();\n    var heightVal = isNullOrUndefined(this.changedHeightValue) && (selectNode.style.height.toString() === 'auto' || selectNode.style.height !== '') ? selectNode.style.height : !isNullOrUndefined(this.changedHeightValue) ? this.changedHeightValue : parseInt(selectNode.getClientRects()[0].height.toString(), 10).toString();\n    this.changedWidthValue = null;\n    this.changedHeightValue = null;\n    var content = '<div class=\"e-rte-label\"><label>' + vidWidth + '</label></div><div class=\"e-rte-field\"><input type=\"text\" id=\"vidwidth\" class=\"e-vid-width\" value=' + widthVal + ' /></div>' + '<div class=\"e-rte-label\">' + '<label>' + vidHeight + '</label></div><div class=\"e-rte-field\"> ' + '<input type=\"text\" id=\"vidheight\" class=\"e-vid-height\" value=' + heightVal + ' /></div>';\n    var contentElem = parseHtml(content);\n    vidSizeWrap.appendChild(contentElem);\n    this.widthNum = new TextBox({\n      value: formatUnit(widthVal),\n      enableRtl: this.parent.enableRtl,\n      input: function (e) {\n        _this.inputWidthValue = formatUnit(e.value);\n      }\n    });\n    this.widthNum.createElement = this.parent.createElement;\n    this.widthNum.appendTo(vidSizeWrap.querySelector('#vidwidth'));\n    this.heightNum = new TextBox({\n      value: formatUnit(heightVal),\n      enableRtl: this.parent.enableRtl,\n      input: function (e) {\n        _this.inputHeightValue = formatUnit(e.value);\n      }\n    });\n    this.heightNum.createElement = this.parent.createElement;\n    this.heightNum.appendTo(vidSizeWrap.querySelector('#vidheight'));\n    return vidSizeWrap;\n  };\n  Video.prototype.insertSize = function (e) {\n    e.selection.restore();\n    var proxy = e.selfVideo;\n    if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n      proxy.parent.formatter.saveData();\n    }\n    var dialogEle = proxy.dialogObj.element;\n    this.changedWidthValue = this.inputWidthValue;\n    this.changedHeightValue = this.inputHeightValue;\n    var width = dialogEle.querySelector('.e-vid-width').value;\n    var height = dialogEle.parentElement.querySelector('.e-vid-height').value;\n    proxy.parent.formatter.process(this.parent, e.args, e.args, {\n      width: width,\n      height: height,\n      selectNode: e.selectNode,\n      subCommand: e.args.item.subCommand\n    });\n    if (this.vidResizeDiv) {\n      e.selectNode[0] = e.selectNode[0].tagName === 'VIDEO' || e.selectNode[0].tagName === 'IFRAME' ? e.selectNode[0] : e.selectNode[0].querySelector('iframe');\n      proxy.vidResizePos(e.selectNode[0], this.vidResizeDiv);\n    }\n    proxy.dialogObj.hide({\n      returnValue: true\n    });\n  };\n  Video.prototype.resizeEnd = function (e) {\n    this.resizeBtnInit();\n    this.videoEle.parentElement.style.cursor = 'auto';\n    if (Browser.isDevice) {\n      removeClass([e.target.parentElement], 'e-mob-span');\n    }\n    var args = {\n      event: e,\n      requestType: 'videos'\n    };\n    this.parent.trigger(events.resizeStop, args);\n    /* eslint-disable */\n    var pageX = this.getPointX(e);\n    var pageY = this.parent.iframeSettings.enable ? window.pageYOffset + this.parent.element.getBoundingClientRect().top + e.clientY : e.pageY;\n    /* eslint-enable */\n    this.parent.formatter.editorManager.observer.on(events.checkUndo, this.undoStack, this);\n    this.parent.formatter.saveData();\n  };\n  Video.prototype.resizeStart = function (e, ele) {\n    var _this = this;\n    if (this.parent.readonly) {\n      return;\n    }\n    var target = ele ? ele : !this.isEmbedVidElem(e.target) ? e.target : e.target.querySelector('iframe');\n    this.prevSelectedVidEle = this.videoEle;\n    if (target.tagName === 'VIDEO' || target.tagName === 'IFRAME') {\n      this.parent.preventDefaultResize(e);\n      var videoElem = target;\n      if (this.vidResizeDiv && this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n        detach(this.vidResizeDiv);\n      }\n      this.videoResize(videoElem);\n    }\n    if (target.classList.contains('e-rte-videoboxmark')) {\n      if (this.parent.formatter.getUndoRedoStack().length === 0) {\n        this.parent.formatter.saveData();\n      }\n      this.pageX = this.getPointX(e);\n      this.pageY = this.getPointY(e);\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      this.resizeBtnInit();\n      if (this.quickToolObj) {\n        this.quickToolObj.videoQTBar.hidePopup();\n      }\n      if (target.classList.contains('e-rte-topLeft')) {\n        this.resizeBtnStat.topLeft = true;\n      }\n      if (target.classList.contains('e-rte-topRight')) {\n        this.resizeBtnStat.topRight = true;\n      }\n      if (target.classList.contains('e-rte-botLeft')) {\n        this.resizeBtnStat.botLeft = true;\n      }\n      if (target.classList.contains('e-rte-botRight')) {\n        this.resizeBtnStat.botRight = true;\n      }\n      if (Browser.isDevice && this.contentModule.getEditPanel().contains(this.vidResizeDiv) && !this.vidResizeDiv.classList.contains('e-mob-span')) {\n        addClass([this.vidResizeDiv], 'e-mob-span');\n      } else {\n        var args = {\n          event: e,\n          requestType: 'videos'\n        };\n        this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n          if (resizeStartArgs.cancel) {\n            _this.cancelResizeAction();\n          }\n        });\n      }\n      if (this.isResizeBind) {\n        EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n        EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        this.isResizeBind = false;\n      }\n    }\n  };\n  Video.prototype.videoClick = function (e) {\n    if (Browser.isDevice) {\n      if (e.target.tagName === 'VIDEO' || this.isEmbedVidElem(e.target)) {\n        this.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n        e.target.focus();\n      } else {\n        if (!this.parent.readonly) {\n          this.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n        }\n      }\n    }\n    if (e.target.tagName === 'VIDEO' || this.isEmbedVidElem(e.target)) {\n      e.preventDefault();\n    }\n  };\n  Video.prototype.onCutHandler = function () {\n    if (this.vidResizeDiv && this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n      this.cancelResizeAction();\n    }\n  };\n  Video.prototype.videoResize = function (e) {\n    this.resizeBtnInit();\n    this.videoEle = e;\n    addClass([this.videoEle], 'e-resize');\n    this.vidResizeDiv = this.parent.createElement('span', {\n      className: 'e-vid-resize',\n      id: this.rteID + '_vidResize'\n    });\n    this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n      className: 'e-rte-videoboxmark e-rte-topLeft',\n      styles: 'cursor: nwse-resize'\n    }));\n    this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n      className: 'e-rte-videoboxmark e-rte-topRight',\n      styles: 'cursor: nesw-resize'\n    }));\n    this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n      className: 'e-rte-videoboxmark e-rte-botLeft',\n      styles: 'cursor: nesw-resize'\n    }));\n    this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n      className: 'e-rte-videoboxmark e-rte-botRight',\n      styles: 'cursor: nwse-resize'\n    }));\n    if (Browser.isDevice) {\n      addClass([this.vidResizeDiv], 'e-mob-rte');\n    }\n    e.style.outline = '2px solid #4a90e2';\n    this.vidResizePos(e, this.vidResizeDiv);\n    this.resizeVidDupPos(e);\n    this.contentModule.getEditPanel().appendChild(this.vidResizeDiv);\n  };\n  Video.prototype.getPointX = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageX;\n    } else {\n      return e.pageX;\n    }\n  };\n  Video.prototype.getPointY = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageY;\n    } else {\n      return e.pageY;\n    }\n  };\n  Video.prototype.vidResizePos = function (e, vidResizeDiv) {\n    if (isNullOrUndefined(vidResizeDiv)) {\n      return;\n    }\n    var pos = this.calcPos(e);\n    var top = pos.top;\n    var left = pos.left;\n    var vidWid = e.width !== 0 && e.width !== 'auto' && e.width !== 'NaN' ? e.width : e.getBoundingClientRect().width;\n    var vidHgt = e.height !== 0 && e.height !== 'auto' && e.height !== 'NaN' ? e.height : e.getBoundingClientRect().height;\n    var borWid = Browser.isDevice ? 4 * parseInt(e.style.outline.slice(-3), 10) + 2 : 2 * parseInt(e.style.outline.slice(-3), 10) + 2; //span border width + video outline width\n    var devWid = Browser.isDevice ? 0 : 2; // span border width\n    vidResizeDiv.querySelector('.e-rte-botLeft').style.left = left - borWid + 'px';\n    vidResizeDiv.querySelector('.e-rte-botLeft').style.top = parseInt(vidHgt.toString(), 10) - borWid + top + 'px';\n    vidResizeDiv.querySelector('.e-rte-botRight').style.left = parseInt(vidWid.toString(), 10) - (borWid - devWid) + left + 'px';\n    vidResizeDiv.querySelector('.e-rte-botRight').style.top = parseInt(vidHgt.toString(), 10) - borWid + top + 'px';\n    vidResizeDiv.querySelector('.e-rte-topRight').style.left = parseInt(vidWid.toString(), 10) - (borWid - devWid) + left + 'px';\n    vidResizeDiv.querySelector('.e-rte-topRight').style.top = top - borWid + 'px';\n    vidResizeDiv.querySelector('.e-rte-topLeft').style.left = left - borWid + 'px';\n    vidResizeDiv.querySelector('.e-rte-topLeft').style.top = top - borWid + 'px';\n  };\n  Video.prototype.calcPos = function (elem) {\n    var ignoreOffset = ['TD', 'TH', 'TABLE', 'A'];\n    var parentOffset = {\n      top: 0,\n      left: 0\n    };\n    var elementOffset;\n    var doc = elem.ownerDocument;\n    var offsetParent = (elem.offsetParent && (elem.offsetParent.classList.contains('e-video-clickelem') || ignoreOffset.indexOf(elem.offsetParent.tagName) > -1) ? closest(elem, '#' + this.parent.getID() + '_rte-edit-view') : elem.offsetParent) || doc.documentElement;\n    while (offsetParent && (offsetParent === doc.body || offsetParent === doc.documentElement) && offsetParent.style.position === 'static') {\n      offsetParent = offsetParent.parentNode;\n    }\n    if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n      parentOffset = offsetParent.getBoundingClientRect();\n    }\n    if (elem && elem.nodeType === 1 && elem.tagName === 'IFRAME') {\n      elementOffset = elem.getBoundingClientRect();\n      return {\n        top: elementOffset.top - parentOffset.top,\n        left: elementOffset.left - parentOffset.left\n      };\n    } else {\n      return {\n        top: elem.offsetTop,\n        left: elem.offsetLeft\n      };\n    }\n  };\n  Video.prototype.setAspectRatio = function (vid, expectedX, expectedY, e) {\n    var vidEleStyle = getComputedStyle(vid);\n    if (isNullOrUndefined(vidEleStyle)) {\n      return;\n    }\n    var regExp = RegExp;\n    var width = vidEleStyle.width !== '' ? vidEleStyle.width.match(new regExp('^\\\\d+(\\\\.\\\\d*)?%$', 'g')) ? parseFloat(vidEleStyle.width) : parseInt(vidEleStyle.width, 10) : vid.style.width !== '' ? vid.style.width : vid.width;\n    var height = vidEleStyle.height !== '' ? parseInt(vidEleStyle.height, 10) : vid.style.height !== '' ? vid.style.height : vid.height;\n    width = width.toString().match(new regExp('\\\\b\\\\d+(\\\\.\\\\d*)?(%|$)\\\\b', 'g')) ? parseFloat(width.toString()) : parseInt(width.toString(), 10);\n    height = height.toString().match(new regExp('\\\\b\\\\d+(\\\\.\\\\d*)?(%|$)\\\\b', 'g')) ? parseFloat(height.toString()) : parseInt(height.toString(), 10);\n    /* eslint-enable */\n    if (width > height) {\n      vid.style.minWidth = this.parent.insertVideoSettings.minWidth === 0 ? '200px' : formatUnit(this.parent.insertVideoSettings.minWidth);\n      vid.style.minHeight = this.parent.insertVideoSettings.minHeight === 0 ? '90px' : formatUnit(this.parent.insertVideoSettings.minHeight);\n      if (this.parent.insertVideoSettings.resizeByPercent) {\n        this.updateVidEleWidth(vid, width, height, expectedX, expectedY);\n      } else if (vid.style.width === '' && vid.style.height !== '' || vidEleStyle.width === '' && vidEleStyle.height !== '') {\n        vid.style.height = expectedY + 'px';\n      } else if (vid.style.width !== '' && vid.style.height === '' || vidEleStyle.width !== '' && vidEleStyle.height === '') {\n        var currentWidth = width / height * expectedY + width / height < this.parent.inputElement.getBoundingClientRect().right - 32 ? width / height * expectedY + width / height : this.parent.inputElement.getBoundingClientRect().right - 32;\n        vid.style.width = currentWidth.toString() + 'px';\n      } else if (vid.style.width !== '' || vidEleStyle.width !== '') {\n        var currentWidth = width / height * expectedY < this.parent.inputElement.getBoundingClientRect().right - 32 ? width / height * expectedY : this.parent.inputElement.getBoundingClientRect().right - 32;\n        vid.style.width = currentWidth + 'px';\n        vid.style.height = expectedY + 'px';\n      } else {\n        vid.setAttribute('width', parseInt((width / height * expectedY + width / height).toString(), 10).toString());\n      }\n    } else if (height > width) {\n      if (this.parent.insertVideoSettings.resizeByPercent) {\n        this.updateVidEleWidth(vid, width, height, expectedX, expectedY);\n      } else if (vidEleStyle.width !== '' || vid.style.width !== '') {\n        vid.style.width = expectedX + 'px';\n        vid.style.height = height / width * expectedX + 'px';\n      } else {\n        vid.setAttribute('width', this.resizeBtnStat.botRight ? (this.getPointX(e.event) - vid.getBoundingClientRect().left).toString() : expectedX.toString());\n      }\n    } else {\n      if (this.parent.insertVideoSettings.resizeByPercent) {\n        vid.style.width = this.pixToPerc(expectedX, vid.previousElementSibling || vid.parentElement) + '%';\n        vid.style.height = null;\n        vid.removeAttribute('height');\n      } else {\n        vid.style.width = expectedX + 'px';\n        vid.style.height = expectedX + 'px';\n      }\n    }\n  };\n  Video.prototype.updateVidEleWidth = function (vid, width, height, expectedX, expectedY) {\n    if (parseInt('' + vid.getBoundingClientRect().width + '', 10) !== 0 && parseInt('' + width + '', 10) !== 0) {\n      var original = vid.offsetWidth + this.mouseX;\n      var finalWidthByPerc = original / vid.offsetWidth * (parseFloat(vid.style.width).toString() === 'NaN' ? vid.offsetWidth / parseFloat(getComputedStyle(this.parent.element).width) * 100 : parseFloat(vid.style.width));\n      vid.style.width = (finalWidthByPerc > 3 ? finalWidthByPerc : 3) + '%';\n    } else {\n      if (width > height) {\n        vid.style.width = this.pixToPerc(width / height * expectedY, vid.previousElementSibling || vid.parentElement) + '%';\n      } else {\n        vid.style.width = this.pixToPerc(expectedX / height * expectedY, vid.previousElementSibling || vid.parentElement) + '%';\n      }\n    }\n    vid.style.height = null;\n    vid.removeAttribute('height');\n  };\n  Video.prototype.pixToPerc = function (expected, parentEle) {\n    return expected / parseFloat(getComputedStyle(parentEle).width) * 100;\n  };\n  Video.prototype.vidDupMouseMove = function (width, height, e) {\n    var _this = this;\n    var args = {\n      event: e,\n      requestType: 'videos'\n    };\n    this.parent.trigger(events.onResize, args, function (resizingArgs) {\n      if (resizingArgs.cancel) {\n        _this.cancelResizeAction();\n      } else {\n        if (parseInt(_this.parent.insertVideoSettings.minWidth, 10) >= parseInt(width, 10) || parseInt(_this.parent.getInsertVidMaxWidth(), 10) <= parseInt(width, 10) && isNOU(_this.videoEle.style.width)) {\n          return;\n        }\n        if (!_this.parent.insertVideoSettings.resizeByPercent && (parseInt(_this.parent.insertVideoSettings.minHeight, 10) >= parseInt(height, 10) || parseInt(_this.parent.insertVideoSettings.maxHeight, 10) <= parseInt(height, 10))) {\n          return;\n        }\n        _this.videoEle.parentElement.style.cursor = 'pointer';\n        _this.setAspectRatio(_this.videoEle, parseInt(width, 10), parseInt(height, 10), args);\n        _this.resizeVidDupPos(_this.videoEle);\n        _this.vidResizePos(_this.videoEle, _this.vidResizeDiv);\n      }\n    });\n  };\n  Video.prototype.resizing = function (e) {\n    if (this.videoEle.offsetWidth >= this.parent.getInsertVidMaxWidth()) {\n      this.videoEle.style.maxHeight = this.videoEle.offsetHeight + 'px';\n    }\n    var pageX = this.getPointX(e);\n    var pageY = this.getPointY(e);\n    var mouseX = this.resizeBtnStat.botLeft || this.resizeBtnStat.topLeft ? -(pageX - this.pageX) : pageX - this.pageX;\n    var mouseY = this.resizeBtnStat.topLeft || this.resizeBtnStat.topRight ? -(pageY - this.pageY) : pageY - this.pageY;\n    var width = parseInt(this.vidDupPos.width, 10) + mouseX;\n    var height = parseInt(this.vidDupPos.height, 10) + mouseY;\n    this.pageX = pageX;\n    this.pageY = pageY;\n    this.mouseX = mouseX;\n    if (this.resizeBtnStat.botRight) {\n      this.vidDupMouseMove(width + 'px', height + 'px', e);\n    } else if (this.resizeBtnStat.botLeft) {\n      this.vidDupMouseMove(width + 'px', height + 'px', e);\n    } else if (this.resizeBtnStat.topRight) {\n      this.vidDupMouseMove(width + 'px', height + 'px', e);\n    } else if (this.resizeBtnStat.topLeft) {\n      this.vidDupMouseMove(width + 'px', height + 'px', e);\n    }\n  };\n  Video.prototype.cancelResizeAction = function () {\n    this.isResizeBind = true;\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n    if (this.videoEle && this.vidResizeDiv && this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n      detach(this.vidResizeDiv);\n      this.videoEle.style.outline = '';\n      this.vidResizeDiv = null;\n      this.pageX = null;\n      this.pageY = null;\n    }\n  };\n  Video.prototype.resizeVidDupPos = function (e) {\n    this.vidDupPos = {\n      width: e.style.width !== '' && this.parent.insertVideoSettings && !this.parent.insertVideoSettings.resizeByPercent ? this.videoEle.style.width : e.width !== 'auto' && e.width !== 0 && e.width !== 'NaN' ? e.width + 'px' : parseInt(getComputedStyle(e).width, 10) + 'px',\n      height: e.style.height !== '' ? this.videoEle.style.height : e.height !== 'auto' && e.height !== 0 && e.height !== 'NaN' ? e.height + 'px' : parseInt(getComputedStyle(e).height, 10) + 'px'\n    };\n  };\n  Video.prototype.resizeBtnInit = function () {\n    return this.resizeBtnStat = {\n      botLeft: false,\n      botRight: false,\n      topRight: false,\n      topLeft: false\n    };\n  };\n  Video.prototype.onToolbarAction = function (args) {\n    if (isIDevice()) {\n      this.parent.notify(events.selectionRestore, {});\n    }\n    var item = args.args.item;\n    switch (item.subCommand) {\n      case 'VideoReplace':\n        this.parent.notify(events.insertVideo, args);\n        break;\n      case 'VideoRemove':\n        this.parent.notify(events.videoDelete, args);\n        break;\n      case 'VideoDimension':\n        this.parent.notify(events.videoSize, args);\n    }\n  };\n  Video.prototype.onKeyDown = function (event) {\n    var originalEvent = event.args;\n    var range;\n    var save;\n    var selectNodeEle;\n    var selectParentEle;\n    this.deletedVid = [];\n    var isCursor;\n    var keyCodeValues = [27, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 44, 45, 9, 16, 17, 18, 19, 20, 33, 34, 35, 36, 37, 38, 39, 40, 91, 92, 93, 144, 145, 182, 183];\n    if (this.parent.editorMode === 'HTML') {\n      range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      isCursor = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n    }\n    if (!isCursor && this.parent.editorMode === 'HTML' && keyCodeValues.indexOf(originalEvent.which) < 0) {\n      var nodes = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n      for (var i = 0; i < nodes.length; i++) {\n        if (nodes[i].nodeName === 'VIDEO' || nodes[i].nodeName === 'IFRAME') {\n          this.deletedVid.push(nodes[i]);\n        }\n      }\n    }\n    if (this.parent.editorMode === 'HTML' && (originalEvent.which === 8 && originalEvent.code === 'Backspace' || originalEvent.which === 46 && originalEvent.code === 'Delete')) {\n      var isCursor_1 = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n      if (originalEvent.which === 8 && originalEvent.code === 'Backspace' && isCursor_1) {\n        this.checkVideoBack(range);\n      } else if (originalEvent.which === 46 && originalEvent.code === 'Delete' && isCursor_1) {\n        this.checkVideoDel(range);\n      }\n    }\n    if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && originalEvent.code !== 'KeyK') {\n      range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n      selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n      if (!originalEvent.ctrlKey && originalEvent.key && (originalEvent.key.length === 1 || originalEvent.action === 'enter') && (!isNOU(selectParentEle[0]) && selectParentEle[0].tagName === 'VIDEO' || this.isEmbedVidElem(selectParentEle[0])) && selectParentEle[0].parentElement) {\n        var prev = selectParentEle[0].parentElement.childNodes[0];\n        if (this.contentModule.getEditPanel().querySelector('.e-vid-resize')) {\n          this.removeResizeEle();\n        }\n        this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), prev, prev, prev.textContent.length, prev.textContent.length);\n        removeClass([selectParentEle[0]], classes.CLS_VID_FOCUS);\n        this.quickToolObj.videoQTBar.hidePopup();\n      }\n    }\n    if (originalEvent.ctrlKey && (originalEvent.keyCode === 89 || originalEvent.keyCode === 90)) {\n      this.undoStack({\n        subCommand: originalEvent.keyCode === 90 ? 'undo' : 'redo'\n      });\n    }\n    if (originalEvent.keyCode === 8 || originalEvent.keyCode === 46) {\n      if (selectNodeEle && selectNodeEle[0] && (selectNodeEle[0].nodeName === 'VIDEO' || this.isEmbedVidElem(selectNodeEle[0])) && selectNodeEle.length < 1) {\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n          save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n        }\n        originalEvent.preventDefault();\n        var event_1 = {\n          selectNode: selectNodeEle,\n          selection: save,\n          selectParent: selectParentEle,\n          args: {\n            item: {\n              command: 'Videos',\n              subCommand: 'VideoRemove'\n            },\n            originalEvent: originalEvent\n          }\n        };\n        this.deleteVideo(event_1, originalEvent.keyCode);\n      }\n      if (this.parent.contentModule.getEditPanel().querySelector('.e-vid-resize')) {\n        this.removeResizeEle();\n      }\n    }\n    if (originalEvent.code === 'Backspace') {\n      originalEvent.action = 'backspace';\n    }\n    switch (originalEvent.action) {\n      case 'escape':\n        if (!isNullOrUndefined(this.dialogObj)) {\n          this.dialogObj.close();\n        }\n        break;\n      case 'backspace':\n      case 'delete':\n        for (var i = 0; i < this.deletedVid.length; i++) {\n          var src = this.deletedVid[i].src;\n          this.videoRemovePost(src);\n        }\n        if (this.parent.editorMode !== 'Markdown') {\n          if (range.startContainer.nodeType === 3) {\n            if (originalEvent.code === 'Backspace') {\n              if (range.startContainer.previousElementSibling && range.startOffset === 0 && range.startContainer.previousElementSibling.classList.contains(classes.CLS_VIDEOWRAP)) {\n                detach(range.startContainer.previousElementSibling);\n              }\n            } else {\n              if (range.startContainer.nextElementSibling && range.endContainer.textContent.length === range.endOffset && range.startContainer.nextElementSibling.classList.contains(classes.CLS_VIDEOWRAP)) {\n                detach(range.startContainer.nextElementSibling);\n              }\n            }\n          } else if (range.startContainer.nodeType === 1 && range.startContainer.classList && range.startContainer.classList.contains(classes.CLS_VIDEOWRAP)) {\n            detach(range.startContainer);\n          }\n        }\n        break;\n      case 'insert-video':\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n          save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n        }\n        this.openDialog(true, originalEvent, save, selectNodeEle, selectParentEle);\n        originalEvent.preventDefault();\n        break;\n    }\n    if (originalEvent.ctrlKey && originalEvent.key === 'a') {\n      this.handleSelectAll();\n    }\n  };\n  Video.prototype.handleSelectAll = function () {\n    this.cancelResizeAction();\n    var videoFocusNodes = this.parent.inputElement.querySelectorAll('.' + classes.CLS_VID_FOCUS);\n    removeClass(videoFocusNodes, classes.CLS_VID_FOCUS);\n  };\n  Video.prototype.openDialog = function (isInternal, event, selection, ele, parentEle) {\n    var range;\n    var save;\n    var selectNodeEle;\n    var selectParentEle;\n    if (!isInternal && !isNOU(this.parent.formatter.editorManager.nodeSelection)) {\n      range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n      selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n      selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n    } else {\n      save = selection;\n      selectNodeEle = ele;\n      selectParentEle = parentEle;\n    }\n    if (this.parent.editorMode === 'HTML') {\n      this.insertVideo({\n        args: {\n          item: {\n            command: 'Videos',\n            subCommand: 'Video'\n          },\n          originalEvent: event,\n          name: !isInternal ? 'showDialog' : null\n        },\n        selectNode: selectNodeEle,\n        selection: save,\n        selectParent: selectParentEle\n      });\n    }\n  };\n  Video.prototype.showDialog = function () {\n    this.openDialog(false);\n  };\n  Video.prototype.closeDialog = function () {\n    if (this.dialogObj) {\n      this.dialogObj.hide({\n        returnValue: true\n      });\n    }\n  };\n  Video.prototype.checkVideoBack = function (range) {\n    if (range.startContainer.nodeName === '#text' && range.startOffset === 0 && !isNOU(range.startContainer.previousSibling) && (range.startContainer.previousSibling.nodeName === 'VIDEO' || this.isEmbedVidElem(range.startContainer.previousSibling))) {\n      this.deletedVid.push(range.startContainer.previousSibling);\n    } else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset - 1]) && (range.startContainer.childNodes[range.startOffset - 1].nodeName === 'VIDEO' || this.isEmbedVidElem(range.startContainer.childNodes[range.startOffset - 1]))) {\n      this.deletedVid.push(range.startContainer.childNodes[range.startOffset - 1]);\n    }\n  };\n  Video.prototype.checkVideoDel = function (range) {\n    if (range.startContainer.nodeName === '#text' && range.startOffset === range.startContainer.textContent.length && !isNOU(range.startContainer.nextSibling) && (range.startContainer.nextSibling.nodeName === 'VIDEO' || this.isEmbedVidElem(range.startContainer.nextSibling))) {\n      this.deletedVid.push(range.startContainer.nextSibling);\n    } else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset]) && (range.startContainer.childNodes[range.startOffset].nodeName === 'VIDEO' || this.isEmbedVidElem(range.startContainer.childNodes[range.startOffset]))) {\n      this.deletedVid.push(range.startContainer.childNodes[range.startOffset]);\n    }\n  };\n  Video.prototype.alignmentSelect = function (e) {\n    var item = e.item;\n    if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Videos') {\n      return;\n    }\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n    var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n    selectNodeEle = selectNodeEle[0].nodeName === 'VIDEO' ? selectNodeEle : [this.videoEle];\n    var args = {\n      args: e,\n      selectNode: selectNodeEle\n    };\n    if (this.parent.formatter.getUndoRedoStack().length === 0) {\n      this.parent.formatter.saveData();\n    }\n    switch (item.subCommand) {\n      case 'JustifyLeft':\n      case 'JustifyCenter':\n      case 'JustifyRight':\n        this.alignVideo(args, item.subCommand);\n        break;\n      case 'Inline':\n        this.inline(args);\n        break;\n      case 'Break':\n        this.break(args);\n        break;\n    }\n    if (this.quickToolObj && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n      this.quickToolObj.videoQTBar.hidePopup();\n      removeClass([selectNodeEle[0]], classes.CLS_VID_FOCUS);\n    }\n    this.cancelResizeAction();\n  };\n  Video.prototype.deleteVideo = function (e, keyCode) {\n    if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n      return;\n    }\n    if (this.isEmbedVidElem(e.selectNode[0])) {\n      e.selectNode[0] = e.selectNode[0].classList.contains(classes.CLS_VID_CLICK_ELEM) ? e.selectNode[0] : e.selectNode[0].parentElement;\n    }\n    var args = {\n      element: !this.isEmbedVidElem(e.selectNode[0]) ? e.selectNode[0].querySelector('iframe') : e.selectNode[0],\n      src: !this.isEmbedVidElem(e.selectNode[0]) ? e.selectNode[0].querySelector('source').getAttribute('src') : e.selectNode[0].querySelector('iframe').getAttribute('src')\n    };\n    if (this.parent.formatter.getUndoRedoStack().length === 0) {\n      this.parent.formatter.saveData();\n    }\n    e.selection.restore();\n    this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, {\n      selectNode: e.selectNode,\n      subCommand: e.args.item.subCommand\n    });\n    this.videoRemovePost(args.src);\n    if (this.quickToolObj && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n      this.quickToolObj.videoQTBar.hidePopup();\n    }\n    this.cancelResizeAction();\n    if (isNullOrUndefined(keyCode)) {\n      this.parent.trigger(events.afterMediaDelete, args);\n    }\n  };\n  Video.prototype.videoRemovePost = function (src) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var proxy = this;\n    var absoluteUrl = '';\n    if (isNOU(this.parent.insertVideoSettings.removeUrl) || this.parent.insertVideoSettings.removeUrl === '') {\n      return;\n    }\n    if (src.indexOf('http://') > -1 || src.indexOf('https://') > -1) {\n      absoluteUrl = src;\n    } else {\n      absoluteUrl = new URL(src, document.baseURI).href;\n    }\n    // eslint-disable-next-line no-useless-escape\n    this.removingVideoName = absoluteUrl.replace(/^.*[\\\\\\/]/, '');\n    var xhr = new XMLHttpRequest();\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    xhr.addEventListener('readystatechange', function () {\n      if (this.readyState === 4 && this.status === 200) {\n        proxy.triggerPost(this.response);\n      }\n    });\n    xhr.open('GET', absoluteUrl);\n    xhr.responseType = 'blob';\n    xhr.send();\n  };\n  Video.prototype.triggerPost = function (response) {\n    var removeUrl = this.parent.insertVideoSettings.removeUrl;\n    if (isNOU(removeUrl) || removeUrl === '') {\n      return;\n    }\n    var file = new File([response], this.removingVideoName);\n    var ajax = new Ajax(removeUrl, 'POST', true, null);\n    var formData = new FormData();\n    formData.append('UploadFiles', file);\n    ajax.send(formData);\n  };\n  Video.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n    if (isNOU(this.contentModule.getEditPanel())) {\n      return;\n    }\n    if (target.nodeName === 'VIDEO' || this.isEmbedVidElem(target)) {\n      this.videoEle = !this.isEmbedVidElem(target) ? target : target.querySelector('iframe');\n    }\n    if (!isNullOrUndefined(this.dialogObj) && (\n    // eslint-disable-next-line\n    !closest(target, '[id=' + \"'\" + this.dialogObj.element.id + \"'\" + ']') && this.parent.toolbarSettings.enable && this.parent.getToolbarElement() && !this.parent.getToolbarElement().contains(e.target) || this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) && !closest(target, '#' + this.parent.getID() + '_toolbar_Video') && !target.querySelector('#' + this.parent.getID() + '_toolbar_Video'))) {\n      /* eslint-disable */\n      if (e.offsetX > e.target.clientWidth || e.offsetY > e.target.clientHeight) {} else {\n        this.parent.notify(events.documentClickClosedBy, {\n          closedBy: \"outside click\"\n        });\n        this.dialogObj.hide({\n          returnValue: true\n        });\n        this.parent.isBlur = true;\n        dispatchEvent(this.parent.element, 'focusout');\n      }\n      /* eslint-enable */\n    }\n    // if (((e.target as HTMLElement).tagName !== 'VIDEO' || !this.isEmbedVidElem(e.target as HTMLElement)) && this.vidResizeDiv && !(this.quickToolObj &&\n    //     this.quickToolObj.videoQTBar && this.quickToolObj.videoQTBar.element.contains(e.target as HTMLElement)) &&\n    //     this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n    //     this.cancelResizeAction();\n    // }\n    if (this.contentModule.getEditPanel().querySelector('.e-vid-resize')) {\n      if (target.tagName !== 'VIDEO' && !this.isEmbedVidElem(target)) {\n        this.removeResizeEle();\n      }\n      if (target.tagName !== 'VIDEO' && !this.isEmbedVidElem(target) && !isNOU(this.videoEle)) {\n        this.videoEle.style.outline = '';\n      } else if (!isNOU(this.prevSelectedVidEle) && this.prevSelectedVidEle !== (target.tagName === 'IFRAME' || target.tagName === 'VIDEO' ? target : target.querySelector('iframe'))) {\n        this.prevSelectedVidEle.style.outline = '';\n      }\n    }\n    if (this.parent.inlineMode.enable && target && this.dialogObj && !closest(target, '#' + this.dialogObj.element.id)) {\n      this.dialogObj.hide();\n    }\n  };\n  Video.prototype.removeResizeEle = function () {\n    this.isResizeBind = true;\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n    detach(this.contentModule.getEditPanel().querySelector('.e-vid-resize'));\n  };\n  Video.prototype.onWindowResize = function () {\n    if (!isNOU(this.contentModule) && !isNOU(this.contentModule.getEditPanel().querySelector('.e-vid-resize'))) {\n      this.cancelResizeAction();\n    }\n  };\n  Video.prototype.break = function (e) {\n    if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n      return;\n    }\n    var subCommand = e.args.item ? e.args.item.subCommand : 'Break';\n    this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, {\n      selectNode: e.selectNode,\n      subCommand: subCommand\n    });\n  };\n  Video.prototype.inline = function (e) {\n    if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n      return;\n    }\n    var subCommand = e.args.item ? e.args.item.subCommand : 'Inline';\n    this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, {\n      selectNode: e.selectNode,\n      subCommand: subCommand\n    });\n  };\n  Video.prototype.alignVideo = function (e, type) {\n    var subCommand = e.args.item ? e.args.item.subCommand : type;\n    this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, {\n      selectNode: e.selectNode,\n      subCommand: subCommand\n    });\n  };\n  Video.prototype.editAreaClickHandler = function (e) {\n    if (this.parent.readonly) {\n      this.hideVideoQuickToolbar();\n      return;\n    }\n    var args = e.args;\n    var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n    if (args.which === 2 || showOnRightClick && args.which === 1 || !showOnRightClick && args.which === 3) {\n      if (showOnRightClick && args.which === 1 && !isNullOrUndefined(args.target) && (args.target.tagName === 'VIDEO' || this.isEmbedVidElem(args.target))) {\n        this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), args.target);\n      }\n      return;\n    }\n    if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.videoQTBar) {\n      this.quickToolObj = this.parent.quickToolbarModule;\n      var target = args.target;\n      this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n      var isPopupOpen = this.quickToolObj.videoQTBar.element.classList.contains('e-rte-pop');\n      if ((target.nodeName === 'VIDEO' || this.isEmbedVidElem(target)) && this.parent.quickToolbarModule) {\n        if (isPopupOpen) {\n          return;\n        }\n        this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), target);\n        if (isIDevice()) {\n          this.parent.notify(events.selectionSave, e);\n        }\n        addClass([!this.isEmbedVidElem(target) ? target : target.querySelector('iframe')], classes.CLS_VID_FOCUS);\n        this.showVideoQuickToolbar({\n          args: args,\n          type: 'Videos',\n          elements: [args.target]\n        });\n      } else {\n        this.hideVideoQuickToolbar();\n      }\n    }\n  };\n  Video.prototype.showVideoQuickToolbar = function (e) {\n    var _this = this;\n    if (e.type !== 'Videos' || !isNullOrUndefined(e.args) && e.args.detail === 2 || isNullOrUndefined(this.parent.quickToolbarModule) || isNullOrUndefined(this.parent.quickToolbarModule.videoQTBar) || isNullOrUndefined(e.args)) {\n      return;\n    }\n    this.quickToolObj = this.parent.quickToolbarModule;\n    var args = e.args;\n    var target = e.elements;\n    [].forEach.call(e.elements, function (element, index) {\n      if (index === 0) {\n        target = element;\n      }\n    });\n    if (target.tagName === 'VIDEO' || this.isEmbedVidElem(target)) {\n      addClass([!this.isEmbedVidElem(target) || target.tagName === 'IFRAME' ? target : target.querySelector('iframe')], [classes.CLS_VID_FOCUS]);\n    }\n    var pageY = this.parent.iframeSettings.enable ? window.pageYOffset + this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n    if (this.parent.quickToolbarModule.videoQTBar) {\n      if (e.isNotify) {\n        this.showPopupTime = setTimeout(function () {\n          _this.parent.formatter.editorManager.nodeSelection.Clear(_this.contentModule.getDocument());\n          _this.parent.formatter.editorManager.nodeSelection.setSelectionContents(_this.contentModule.getDocument(), target);\n          _this.quickToolObj.videoQTBar.showPopup(args.pageX - 50, pageY + target.getBoundingClientRect().height / 2 - target.offsetTop, target);\n        }, 400);\n      } else {\n        this.quickToolObj.videoQTBar.showPopup(args.pageX - 50, pageY + target.getBoundingClientRect().height / 2 - target.offsetTop, target);\n      }\n    }\n  };\n  Video.prototype.hideVideoQuickToolbar = function () {\n    if (!isNullOrUndefined(this.contentModule.getEditPanel().querySelector('.' + classes.CLS_VID_FOCUS))) {\n      removeClass([this.contentModule.getEditPanel().querySelector('.' + classes.CLS_VID_FOCUS)], classes.CLS_VID_FOCUS);\n      if (!isNOU(this.videoEle)) {\n        this.videoEle.style.outline = '';\n      }\n      if (!isNOU(this.contentModule.getEditPanel().querySelector('.e-vid-resize'))) {\n        detach(this.contentModule.getEditPanel().querySelector('.e-vid-resize'));\n      }\n      if (this.quickToolObj && this.quickToolObj.videoQTBar && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n        this.quickToolObj.videoQTBar.hidePopup();\n      }\n    }\n  };\n  Video.prototype.isEmbedVidElem = function (target) {\n    if (target && target.nodeType !== 3 && target.nodeName !== 'BR' && target.classList && target.classList.contains(classes.CLS_VID_CLICK_ELEM) || target && target.nodeName === 'IFRAME') {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  Video.prototype.insertingVideo = function (e) {\n    this.insertVideo(e);\n    if (!isNullOrUndefined(this.dialogObj)) {\n      this.dialogObj.element.style.maxHeight = 'inherit';\n      var dialogContent = this.dialogObj.element.querySelector('.e-video-content');\n      if (!isNullOrUndefined(this.parent.insertVideoSettings.path) || this.parent.editorMode === 'HTML') {\n        document.getElementById(this.rteID + '_insertVideo').focus();\n      } else {\n        dialogContent.querySelector('.e-video-url').focus();\n      }\n    }\n  };\n  Video.prototype.insertVideo = function (e) {\n    var _this = this;\n    if (this.dialogObj) {\n      this.dialogObj.hide({\n        returnValue: true\n      });\n      return;\n    }\n    var videoDialog = this.parent.createElement('div', {\n      className: 'e-rte-video-dialog',\n      id: this.rteID + '_video'\n    });\n    this.parent.rootContainer.appendChild(videoDialog);\n    var videoInsert = this.i10n.getConstant('dialogInsert');\n    var videolinkCancel = this.i10n.getConstant('dialogCancel');\n    var videoHeader = this.i10n.getConstant('videoHeader');\n    var selection = e.selection;\n    var selectObj = {\n      selfVideo: this,\n      selection: e.selection,\n      args: e.args,\n      selectParent: e.selectParent\n    };\n    var dialogModel = {\n      header: videoHeader,\n      cssClass: classes.CLS_RTE_ELEMENTS,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      showCloseIcon: true,\n      closeOnEscape: true,\n      width: Browser.isDevice ? '290px' : '340px',\n      isModal: Browser.isDevice,\n      buttons: [{\n        click: this.insertVideoUrl.bind(selectObj),\n        buttonModel: {\n          content: videoInsert,\n          cssClass: 'e-flat e-insertVideo',\n          isPrimary: true,\n          disabled: true\n        }\n      }, {\n        click: function (e) {\n          _this.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel',\n          content: videolinkCancel\n        }\n      }],\n      target: Browser.isDevice ? document.body : this.parent.element,\n      animationSettings: {\n        effect: 'None'\n      },\n      close: function (event) {\n        if (_this.isVideoUploaded) {\n          if (_this.dialogObj.element.querySelector('.e-file-abort-btn')) {\n            _this.dialogObj.element.querySelector('.e-file-abort-btn').click();\n          } else {\n            _this.uploadObj.remove();\n          }\n        }\n        _this.parent.isBlur = false;\n        if (event && !isNOU(event.event) && event.event.returnValue) {\n          if (_this.parent.editorMode === 'HTML') {\n            selection.restore();\n          }\n        }\n        _this.clearDialogObj();\n        _this.dialogRenderObj.close(event);\n      }\n    };\n    var dialogContent = this.parent.createElement('div', {\n      className: 'e-video-content'\n    });\n    if (!isNullOrUndefined(this.parent.insertVideoSettings.path) || this.parent.editorMode === 'HTML') {\n      dialogContent.appendChild(this.videoUpload(e));\n    }\n    var linkHeader = this.parent.createElement('div', {\n      className: 'e-videoheader'\n    });\n    var embedLinkHeader = this.parent.createElement('div', {\n      className: 'e-embed-videoheader'\n    });\n    var linkHeaderText = this.i10n.getConstant('videoLinkHeader');\n    var embedLinkHeaderText = this.i10n.getConstant('embedVideoLinkHeader');\n    if (this.parent.editorMode === 'HTML') {\n      linkHeader.innerHTML = linkHeaderText;\n      embedLinkHeader.innerHTML = embedLinkHeaderText;\n    }\n    dialogContent.appendChild(this.urlPopup(e));\n    if (e.selectNode && e.selectNode[0].nodeType === 1 && (e.selectNode[0].tagName === 'VIDEO' || this.isEmbedVidElem(e.selectNode[0]))) {\n      dialogModel.header = this.parent.localeObj.getConstant('editVideoHeader');\n      dialogModel.content = dialogContent;\n    } else {\n      dialogModel.content = dialogContent;\n    }\n    this.dialogObj = this.dialogRenderObj.render(dialogModel);\n    this.dialogObj.createElement = this.parent.createElement;\n    this.dialogObj.appendTo(videoDialog);\n    if (e.selectNode && e.selectNode[0].nodeType === 1 && (e.selectNode[0].tagName === 'VIDEO' || this.isEmbedVidElem(e.selectNode[0])) && e.name === 'insertVideo') {\n      this.dialogObj.element.querySelector('.e-insertVideo').textContent = this.parent.localeObj.getConstant('dialogUpdate');\n    }\n    videoDialog.style.maxHeight = 'inherit';\n    if (this.quickToolObj) {\n      if (this.quickToolObj.videoQTBar && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n        this.quickToolObj.videoQTBar.hidePopup();\n        if (!isNullOrUndefined(e.selectParent)) {\n          removeClass([e.selectParent[0]], classes.CLS_VID_FOCUS);\n        }\n      }\n      if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n        this.quickToolObj.inlineQTBar.hidePopup();\n      }\n      if (this.quickToolObj.textQTBar && this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n        this.quickToolObj.textQTBar.hidePopup();\n      }\n    }\n  };\n  Video.prototype.urlPopup = function (e) {\n    var _this = this;\n    var videoUrl = this.parent.createElement('div', {\n      className: 'e-video-url-wrap'\n    });\n    var urlContent = this.parent.createElement('div', {\n      id: 'urlcontent'\n    });\n    var placeUrl = this.i10n.getConstant('videoUrl');\n    var content = '<input id=\"embedURL\" type=\"radio\">' + '<input id=\"webURL\" type=\"radio\" >';\n    var contentElem = parseHtml(content);\n    videoUrl.appendChild(contentElem);\n    videoUrl.appendChild(urlContent);\n    this.embedInputUrl = this.parent.createElement('textarea', {\n      className: 'e-input e-embed-video-url',\n      attrs: {\n        placeholder: this.i10n.getConstant('pasteEmbeddedCodeHere'),\n        type: 'text',\n        tabindex: '-1',\n        'aria-label': this.i10n.getConstant('embedVideoLinkHeader')\n      }\n    });\n    this.embedInputUrl.addEventListener('keyup', function () {\n      if (!isNOU(_this.embedInputUrl)) {\n        if (_this.embedInputUrl.value.length === 0) {\n          _this.dialogObj.getButtons(0).element.disabled = true;\n        } else {\n          _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n        }\n      }\n    });\n    this.inputUrl = this.parent.createElement('input', {\n      className: 'e-input e-video-url',\n      attrs: {\n        placeholder: placeUrl,\n        spellcheck: 'false'\n      }\n    });\n    this.inputUrl.addEventListener('input', function () {\n      if (!isNOU(_this.inputUrl)) {\n        if (_this.inputUrl.value.length === 0) {\n          _this.dialogObj.getButtons(0).element.disabled = true;\n        } else {\n          _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n        }\n      }\n    });\n    if (e.selectNode && e.selectNode[0] && (e.selectNode[0].nodeName === 'VIDEO' || this.isEmbedVidElem(e.selectNode[0]))) {\n      if (e.selectNode[0].nodeName === 'VIDEO') {\n        var regex = new RegExp(/([^\\S]|^)(((https?:\\/\\/)|(www\\.))(\\S+))/gi);\n        var sourceElement = e.selectNode[0].querySelector('source');\n        this.inputUrl.value = sourceElement && sourceElement.src && sourceElement.src.match(regex) ? sourceElement.src : '';\n      } else {\n        this.embedInputUrl.value = e.selectNode[0].nodeName === 'IFRAME' ? e.selectNode[0].outerHTML : e.selectNode[0].querySelector('iframe').outerHTML;\n      }\n    }\n    var isWebUrl = this.inputUrl.value ? true : false;\n    this.embedUrlBtn = new RadioButton({\n      label: this.i10n.getConstant('embeddedCode'),\n      checked: !isWebUrl,\n      name: 'URL',\n      created: function () {\n        if (!isWebUrl) {\n          urlContent.appendChild(_this.embedInputUrl);\n        }\n      },\n      change: function () {\n        urlContent.innerHTML = '';\n        urlContent.appendChild(_this.embedInputUrl);\n      }\n    });\n    this.embedUrlBtn.appendTo(videoUrl.querySelector('#embedURL'));\n    this.webUrlBtn = new RadioButton({\n      label: this.i10n.getConstant('webUrl'),\n      checked: isWebUrl,\n      name: 'URL',\n      created: function () {\n        if (isWebUrl) {\n          urlContent.appendChild(_this.inputUrl);\n        }\n      },\n      change: function () {\n        urlContent.innerHTML = '';\n        urlContent.appendChild(_this.inputUrl);\n      }\n    });\n    this.webUrlBtn.appendTo(videoUrl.querySelector('#webURL'));\n    return videoUrl;\n  };\n  Video.prototype.videoUpload = function (e) {\n    var _this = this;\n    var save;\n    var selectParent;\n    // eslint-disable-next-line\n    var proxy = this;\n    var iframe = proxy.parent.iframeSettings.enable;\n    if (proxy.parent.editorMode === 'HTML' && (!iframe && isNullOrUndefined(closest(e.selection.range.startContainer.parentNode, '[id='\n    // eslint-disable-next-line\n    + \"'\" + this.parent.contentModule.getPanel().id + \"'\" + ']')) || iframe && !hasClass(e.selection.range.startContainer.parentNode.ownerDocument.querySelector('body'), 'e-lib'))) {\n      this.contentModule.getEditPanel().focus();\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n      selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n    } else {\n      save = e.selection;\n      selectParent = e.selectParent;\n    }\n    var uploadParentEle = this.parent.createElement('div', {\n      className: 'e-vid-uploadwrap e-droparea'\n    });\n    var deviceVideoUpMsg = this.i10n.getConstant('videoDeviceUploadMessage');\n    var videoUpMsg = this.i10n.getConstant('videoUploadMessage');\n    var span = this.parent.createElement('span', {\n      className: 'e-droptext'\n    });\n    var spanMsg = this.parent.createElement('span', {\n      className: 'e-rte-upload-text',\n      innerHTML: Browser.isDevice ? deviceVideoUpMsg : videoUpMsg\n    });\n    span.appendChild(spanMsg);\n    var btnEle = this.parent.createElement('button', {\n      className: 'e-browsebtn',\n      id: this.rteID + '_insertVideo',\n      attrs: {\n        autofocus: 'true',\n        type: 'button'\n      }\n    });\n    span.appendChild(btnEle);\n    uploadParentEle.appendChild(span);\n    var browserMsg = this.i10n.getConstant('browse');\n    this.button = new Button({\n      content: browserMsg,\n      enableRtl: this.parent.enableRtl\n    });\n    this.button.isStringTemplate = true;\n    this.button.createElement = this.parent.createElement;\n    this.button.appendTo(btnEle);\n    var btnClick = Browser.isDevice ? span : btnEle;\n    EventHandler.add(btnClick, 'click', this.fileSelect, this);\n    var uploadEle = this.parent.createElement('input', {\n      id: this.rteID + '_upload',\n      attrs: {\n        type: 'File',\n        name: 'UploadFiles'\n      }\n    });\n    uploadParentEle.appendChild(uploadEle);\n    var fileName;\n    var selectArgs;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    var filesData;\n    this.uploadObj = new Uploader({\n      asyncSettings: {\n        saveUrl: this.parent.insertVideoSettings.saveUrl,\n        removeUrl: this.parent.insertVideoSettings.removeUrl\n      },\n      dropArea: span,\n      multiple: false,\n      enableRtl: this.parent.enableRtl,\n      allowedExtensions: this.parent.insertVideoSettings.allowedTypes.toString(),\n      selected: function (e) {\n        proxy.isVideoUploaded = true;\n        selectArgs = e;\n        filesData = e.filesData;\n        _this.parent.trigger(events.fileSelected, selectArgs, function (selectArgs) {\n          if (!selectArgs.cancel) {\n            _this.checkExtension(selectArgs.filesData[0]);\n            fileName = selectArgs.filesData[0].name;\n            if (_this.parent.editorMode === 'HTML' && isNullOrUndefined(_this.parent.insertVideoSettings.path)) {\n              var reader_1 = new FileReader();\n              // eslint-disable-next-line\n              reader_1.addEventListener('load', function (e) {\n                var url = _this.parent.insertVideoSettings.saveFormat === 'Base64' ? reader_1.result : URL.createObjectURL(convertToBlob(reader_1.result));\n                proxy.uploadUrl = {\n                  url: url,\n                  selection: save,\n                  fileName: fileName,\n                  selectParent: selectParent\n                };\n                proxy.inputUrl.setAttribute('disabled', 'true');\n                proxy.embedInputUrl.setAttribute('disabled', 'true');\n                if (isNullOrUndefined(proxy.parent.insertVideoSettings.saveUrl) && _this.isAllowedTypes && !isNullOrUndefined(_this.dialogObj)) {\n                  _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                }\n              });\n              reader_1.readAsDataURL(selectArgs.filesData[0].rawFile);\n            }\n          }\n        });\n      },\n      beforeUpload: function (args) {\n        _this.parent.trigger(events.beforeFileUpload, args);\n      },\n      uploading: function (e) {\n        if (!_this.parent.isServerRendered) {\n          _this.parent.trigger(events.fileUploading, e);\n        }\n      },\n      success: function (e) {\n        _this.parent.trigger(events.fileUploadSuccess, e, function (e) {\n          if (!isNullOrUndefined(_this.parent.insertVideoSettings.path)) {\n            var url = _this.parent.insertVideoSettings.path + e.file.name;\n            // eslint-disable-next-line\n            var value = {\n              url: url,\n              selection: save\n            };\n            proxy.uploadUrl = {\n              url: url,\n              selection: save,\n              fileName: fileName,\n              selectParent: selectParent,\n              width: {\n                width: proxy.parent.insertVideoSettings.width,\n                minWidth: proxy.parent.insertVideoSettings.minWidth,\n                maxWidth: proxy.parent.getInsertImgMaxWidth()\n              },\n              height: {\n                height: proxy.parent.insertVideoSettings.height,\n                minHeight: proxy.parent.insertVideoSettings.minHeight,\n                maxHeight: proxy.parent.insertVideoSettings.maxHeight\n              }\n            };\n            //proxy.inputUrl.setAttribute('disabled', 'true');\n            proxy.embedInputUrl.setAttribute('disabled', 'true');\n          }\n          if (e.operation === 'upload' && !isNullOrUndefined(_this.dialogObj)) {\n            _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n          }\n        });\n      },\n      failure: function (e) {\n        _this.parent.trigger(events.fileUploadFailed, e);\n      },\n      removing: function () {\n        // eslint-disable-next-line\n        _this.parent.trigger(events.fileRemoving, e, function (e) {\n          proxy.isVideoUploaded = false;\n          _this.dialogObj.getButtons(0).element.disabled = true;\n          if (proxy.inputUrl.getAttribute('disabled')) {\n            proxy.inputUrl.removeAttribute('disabled');\n          }\n          if (proxy.embedInputUrl.getAttribute('disabled')) {\n            proxy.embedInputUrl.removeAttribute('disabled');\n          }\n          if (proxy.uploadUrl) {\n            proxy.uploadUrl.url = '';\n          }\n        });\n      }\n    });\n    this.uploadObj.isStringTemplate = true;\n    this.uploadObj.createElement = this.parent.createElement;\n    this.uploadObj.appendTo(uploadEle);\n    return uploadParentEle;\n  };\n  Video.prototype.checkExtension = function (e) {\n    if (this.uploadObj.allowedExtensions) {\n      if (this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf(('.' + e.type).toLocaleLowerCase()) === -1) {\n        this.dialogObj.getButtons(0).element.setAttribute('disabled', 'disabled');\n        this.isAllowedTypes = false;\n      } else {\n        this.isAllowedTypes = true;\n      }\n    }\n  };\n  Video.prototype.fileSelect = function () {\n    this.dialogObj.element.getElementsByClassName('e-file-select-wrap')[0].querySelector('button').click();\n    return false;\n  };\n  // eslint-disable-next-line\n  Video.prototype.cancelDialog = function (e) {\n    this.parent.isBlur = false;\n    this.dialogObj.hide({\n      returnValue: true\n    });\n    if (this.isVideoUploaded) {\n      this.uploadObj.removing();\n    }\n  };\n  // eslint-disable-next-line\n  Video.prototype.insertVideoUrl = function (e) {\n    var proxy = this.selfVideo;\n    //let audioSelectParent: Node = proxy.uploadUrl.selectParent[0];\n    proxy.isVideoUploaded = false;\n    var url = proxy.inputUrl.value;\n    var embedUrl = proxy.embedInputUrl.value;\n    if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n      proxy.parent.formatter.saveData();\n    }\n    if (!isNullOrUndefined(proxy.uploadUrl) && proxy.uploadUrl.url !== '') {\n      proxy.uploadUrl.cssClass = proxy.parent.insertVideoSettings.layoutOption === 'Inline' ? classes.CLS_VIDEOINLINE : classes.CLS_VIDEOBREAK;\n      proxy.uploadUrl.width = {\n        width: proxy.parent.insertVideoSettings.width,\n        minWidth: proxy.parent.insertVideoSettings.minWidth,\n        maxWidth: proxy.parent.getInsertImgMaxWidth()\n      };\n      proxy.uploadUrl.height = {\n        height: proxy.parent.insertVideoSettings.height,\n        minHeight: proxy.parent.insertVideoSettings.minHeight,\n        maxHeight: proxy.parent.insertVideoSettings.maxHeight\n      };\n      proxy.dialogObj.hide({\n        returnValue: false\n      });\n      if (proxy.dialogObj !== null) {\n        return;\n      }\n      proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, proxy.uploadUrl);\n      proxy.uploadUrl.url = '';\n    } else if (proxy.parent.editorMode === 'HTML' && (url !== '' || embedUrl !== '')) {\n      if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(\n      // eslint-disable-next-line\n      this.selection.range.startContainer.parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))) {\n        proxy.contentModule.getEditPanel().focus();\n        var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n        this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n        this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n      }\n      var webUrlBtn = document.getElementById('webURL');\n      var name_1 = webUrlBtn.checked ? url.split('/')[url.split('/').length - 1] : embedUrl;\n      var value = {\n        cssClass: proxy.parent.insertVideoSettings.layoutOption === 'Inline' ? classes.CLS_VIDEOINLINE : classes.CLS_VIDEOBREAK,\n        url: url,\n        selection: this.selection,\n        fileName: name_1,\n        isEmbedUrl: !webUrlBtn.checked,\n        selectParent: this.selectParent,\n        width: {\n          width: proxy.parent.insertVideoSettings.width,\n          minWidth: proxy.parent.insertVideoSettings.minWidth,\n          maxWidth: proxy.parent.getInsertImgMaxWidth()\n        },\n        height: {\n          height: proxy.parent.insertVideoSettings.height,\n          minHeight: proxy.parent.insertVideoSettings.minHeight,\n          maxHeight: proxy.parent.insertVideoSettings.maxHeight\n        }\n      };\n      proxy.dialogObj.hide({\n        returnValue: false\n      });\n      if (proxy.dialogObj !== null) {\n        return;\n      }\n      proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, value);\n    }\n  };\n  /* eslint-disable */\n  /**\n   * Destroys the ToolBar.\n   *\n   * @method destroy\n   * @returns {void}\n   * @hidden\n    */\n  /* eslint-enable */\n  Video.prototype.destroy = function () {\n    if (this.isDestroyed) {\n      return;\n    }\n    this.prevSelectedVidEle = undefined;\n    this.removeEventListener();\n    if (this.showPopupTime) {\n      clearTimeout(this.showPopupTime);\n      this.showPopupTime = null;\n    }\n    this.clearDialogObj();\n    this.isDestroyed = true;\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Video.prototype.getModuleName = function () {\n    return 'video';\n  };\n  return Video;\n}();\nexport { Video };","map":{"version":3,"names":["addClass","detach","EventHandler","isNullOrUndefined","Ajax","formatUnit","Browser","closest","removeClass","isNOU","events","classes","Uploader","TextBox","Button","RadioButton","RenderType","dispatchEvent","parseHtml","hasClass","convertToBlob","isIDevice","Video","parent","serviceLocator","isVideoUploaded","isAllowedTypes","pageX","pageY","mouseX","deletedVid","isResizeBind","rteID","element","id","i10n","getService","rendererFactory","dialogRenderObj","addEventListener","isDestroyed","docClick","onDocumentClick","bind","prototype","on","keyDown","onKeyDown","keyUp","onKeyUp","insertVideo","insertingVideo","initialEnd","afterRender","dynamicModule","windowResize","onWindowResize","showVideoDialog","showDialog","closeVideoDialog","closeDialog","dropDownSelect","alignmentSelect","videoDelete","deleteVideo","videoToolbarAction","onToolbarAction","editAreaClick","editAreaClickHandler","iframeMouseDown","onIframeMouseDown","videoSize","insertCompleted","showVideoQuickToolbar","clearDialogObj","destroy","removeEventListener","off","contentModule","remove","getEditPanel","touchEndEvent","videoClick","formatter","editorManager","observer","checkUndo","undoStack","insertVideoSettings","resize","touchStartEvent","resizeStart","ownerDocument","onCutHandler","getDocument","touchMoveEvent","resizing","getRenderer","Content","add","uploadObj","webUrlBtn","embedUrlBtn","widthNum","heightNum","button","dialogObj","event","length","i","args","src","tagName","querySelector","getAttribute","trigger","afterMediaDelete","subCommand","toLowerCase","editorMode","getUndoRedoStack","temp","createElement","contentElem","text","appendChild","cloneNode","vid","querySelectorAll","j","style","outline","clonedElement","fragment","document","createDocumentFragment","firstChild","hide","returnValue","e","_this","selectNode","nodeName","isEmbedVidElem","vidSizeHeader","getConstant","linkUpdate","dialogContent","vidsizeInput","selectObj_1","selfVideo","selection","setProperties","width","header","content","buttons","click","insertSize","buttonModel","cssClass","isPrimary","maxHeight","focus","vidHeight","vidWidth","vidSizeWrap","className","widthVal","changedWidthValue","toString","parseInt","getClientRects","heightVal","changedHeightValue","height","value","enableRtl","input","inputWidthValue","appendTo","inputHeightValue","restore","proxy","saveData","dialogEle","parentElement","process","item","vidResizeDiv","vidResizePos","resizeEnd","resizeBtnInit","videoEle","cursor","isDevice","target","requestType","resizeStop","getPointX","iframeSettings","enable","window","pageYOffset","getBoundingClientRect","top","clientY","ele","readonly","prevSelectedVidEle","preventDefaultResize","videoElem","contains","videoResize","classList","getPointY","preventDefault","stopImmediatePropagation","quickToolObj","videoQTBar","hidePopup","resizeBtnStat","topLeft","topRight","botLeft","botRight","resizeStartArgs","cancel","cancelResizeAction","setAttribute","styles","resizeVidDupPos","touches","pos","calcPos","left","vidWid","vidHgt","borWid","slice","devWid","elem","ignoreOffset","parentOffset","elementOffset","doc","offsetParent","indexOf","getID","documentElement","body","position","parentNode","nodeType","offsetTop","offsetLeft","setAspectRatio","expectedX","expectedY","vidEleStyle","getComputedStyle","regExp","RegExp","match","parseFloat","minWidth","minHeight","resizeByPercent","updateVidEleWidth","currentWidth","inputElement","right","pixToPerc","previousElementSibling","removeAttribute","original","offsetWidth","finalWidthByPerc","expected","parentEle","vidDupMouseMove","onResize","resizingArgs","getInsertVidMaxWidth","offsetHeight","mouseY","vidDupPos","notify","selectionRestore","originalEvent","range","save","selectNodeEle","selectParentEle","isCursor","keyCodeValues","nodeSelection","getRange","startContainer","endContainer","startOffset","endOffset","which","nodes","getNodeCollection","push","code","isCursor_1","checkVideoBack","checkVideoDel","getParentNodeCollection","ctrlKey","key","action","prev","childNodes","removeResizeEle","setSelectionText","textContent","CLS_VID_FOCUS","keyCode","event_1","selectParent","command","close","videoRemovePost","CLS_VIDEOWRAP","nextElementSibling","openDialog","handleSelectAll","videoFocusNodes","isInternal","name","previousSibling","nextSibling","alignVideo","inline","break","CLS_VID_CLICK_ELEM","absoluteUrl","removeUrl","URL","baseURI","href","removingVideoName","replace","xhr","XMLHttpRequest","readyState","status","triggerPost","response","open","responseType","send","file","File","ajax","formData","FormData","append","toolbarSettings","getToolbarElement","offsetX","clientWidth","offsetY","clientHeight","documentClickClosedBy","closedBy","isBlur","inlineMode","type","hideVideoQuickToolbar","showOnRightClick","quickToolbarSettings","Clear","setSelectionContents","quickToolbarModule","isPopupOpen","selectionSave","elements","detail","forEach","call","index","isNotify","showPopupTime","setTimeout","showPopup","path","getElementById","videoDialog","rootContainer","videoInsert","videolinkCancel","videoHeader","selectObj","dialogModel","CLS_RTE_ELEMENTS","locale","showCloseIcon","closeOnEscape","isModal","insertVideoUrl","disabled","cancelDialog","animationSettings","effect","videoUpload","linkHeader","embedLinkHeader","linkHeaderText","embedLinkHeaderText","innerHTML","urlPopup","localeObj","render","inlineQTBar","textQTBar","videoUrl","urlContent","placeUrl","embedInputUrl","attrs","placeholder","tabindex","getButtons","inputUrl","spellcheck","regex","sourceElement","outerHTML","isWebUrl","label","checked","created","change","iframe","getPanel","uploadParentEle","deviceVideoUpMsg","videoUpMsg","span","spanMsg","btnEle","autofocus","browserMsg","isStringTemplate","btnClick","fileSelect","uploadEle","fileName","selectArgs","filesData","asyncSettings","saveUrl","dropArea","multiple","allowedExtensions","allowedTypes","selected","fileSelected","checkExtension","reader_1","FileReader","url","saveFormat","result","createObjectURL","uploadUrl","readAsDataURL","rawFile","beforeUpload","beforeFileUpload","uploading","isServerRendered","fileUploading","success","fileUploadSuccess","maxWidth","getInsertImgMaxWidth","operation","failure","fileUploadFailed","removing","fileRemoving","toLocaleLowerCase","getElementsByClassName","embedUrl","layoutOption","CLS_VIDEOINLINE","CLS_VIDEOBREAK","name_1","split","isEmbedUrl","undefined","clearTimeout","getModuleName"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/video-module.js"],"sourcesContent":["import { addClass, detach, EventHandler, isNullOrUndefined, Ajax, formatUnit } from '@syncfusion/ej2-base';\nimport { Browser, closest, removeClass, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Uploader, TextBox } from '@syncfusion/ej2-inputs';\nimport { Button, RadioButton } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, parseHtml, hasClass, convertToBlob } from '../base/util';\nimport { isIDevice } from '../../common/util';\nvar Video = /** @class */ (function () {\n    function Video(parent, serviceLocator) {\n        this.isVideoUploaded = false;\n        this.isAllowedTypes = true;\n        this.pageX = null;\n        this.pageY = null;\n        this.mouseX = null;\n        this.deletedVid = [];\n        this.isResizeBind = true;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n        this.isDestroyed = false;\n        this.docClick = this.onDocumentClick.bind(this);\n    }\n    Video.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.keyUp, this.onKeyUp, this);\n        this.parent.on(events.insertVideo, this.insertingVideo, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.dynamicModule, this.afterRender, this);\n        this.parent.on(events.windowResize, this.onWindowResize, this);\n        this.parent.on(events.showVideoDialog, this.showDialog, this);\n        this.parent.on(events.closeVideoDialog, this.closeDialog, this);\n        this.parent.on(events.dropDownSelect, this.alignmentSelect, this);\n        this.parent.on(events.videoDelete, this.deleteVideo, this);\n        this.parent.on(events.videoToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.videoSize, this.videoSize, this);\n        this.parent.on(events.insertCompleted, this.showVideoQuickToolbar, this);\n        this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    Video.prototype.removeEventListener = function () {\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.keyUp, this.onKeyUp);\n        this.parent.off(events.insertVideo, this.insertingVideo);\n        this.parent.off(events.windowResize, this.onWindowResize);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.dynamicModule, this.afterRender);\n        this.parent.off(events.showVideoDialog, this.showDialog);\n        this.parent.off(events.closeVideoDialog, this.closeDialog);\n        this.parent.off(events.dropDownSelect, this.alignmentSelect);\n        this.parent.off(events.videoDelete, this.deleteVideo);\n        this.parent.off(events.videoToolbarAction, this.onToolbarAction);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.videoSize, this.videoSize);\n        this.parent.off(events.insertCompleted, this.showVideoQuickToolbar);\n        this.parent.off(events.clearDialogObj, this.clearDialogObj);\n        this.parent.off(events.destroy, this.destroy);\n        if (!isNullOrUndefined(this.contentModule)) {\n            EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.videoClick);\n            this.parent.formatter.editorManager.observer.off(events.checkUndo, this.undoStack);\n            if (this.parent.insertVideoSettings.resize) {\n                EventHandler.remove(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart);\n                this.parent.element.ownerDocument.removeEventListener('mousedown', this.docClick);\n                this.docClick = null;\n                EventHandler.remove(this.contentModule.getEditPanel(), 'cut', this.onCutHandler);\n                EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n            }\n        }\n    };\n    Video.prototype.afterRender = function () {\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        EventHandler.add(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.videoClick, this);\n        if (this.parent.insertVideoSettings.resize) {\n            EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n            this.parent.element.ownerDocument.addEventListener('mousedown', this.docClick);\n            EventHandler.add(this.contentModule.getEditPanel(), 'cut', this.onCutHandler, this);\n        }\n    };\n    Video.prototype.clearDialogObj = function () {\n        if (this.uploadObj && !this.uploadObj.isDestroyed) {\n            this.uploadObj.destroy();\n            detach(this.uploadObj.element);\n            this.uploadObj = null;\n        }\n        if (this.webUrlBtn && !this.webUrlBtn.isDestroyed) {\n            this.webUrlBtn.destroy();\n            detach(this.webUrlBtn.element);\n            this.webUrlBtn = null;\n        }\n        if (this.embedUrlBtn && !this.embedUrlBtn.isDestroyed) {\n            this.embedUrlBtn.destroy();\n            detach(this.embedUrlBtn.element);\n            this.embedUrlBtn = null;\n        }\n        if (this.widthNum && !this.widthNum.isDestroyed) {\n            this.widthNum.destroy();\n            detach(this.widthNum.element);\n            this.widthNum = null;\n        }\n        if (this.heightNum && !this.heightNum.isDestroyed) {\n            this.heightNum.destroy();\n            detach(this.heightNum.element);\n            this.heightNum = null;\n        }\n        if (this.button && !this.button.isDestroyed) {\n            this.button.destroy();\n            detach(this.button.element);\n            this.heightNum = null;\n        }\n        if (this.dialogObj && this.dialogObj.element) {\n            this.dialogObj.destroy();\n            detach(this.dialogObj.element);\n            this.dialogObj = null;\n        }\n    };\n    // eslint-disable-next-line\n    Video.prototype.onKeyUp = function (event) {\n        if (!isNOU(this.deletedVid) && this.deletedVid.length > 0) {\n            for (var i = 0; i < this.deletedVid.length; i++) {\n                var args = {\n                    element: this.deletedVid[i],\n                    src: this.deletedVid[i].tagName !== 'IFRAME' ? this.deletedVid[i].querySelector('source').getAttribute('src') :\n                        this.deletedVid[i].src\n                };\n                this.parent.trigger(events.afterMediaDelete, args);\n            }\n        }\n    };\n    Video.prototype.undoStack = function (args) {\n        if ((args.subCommand.toLowerCase() === 'undo' || args.subCommand.toLowerCase() === 'redo') && this.parent.editorMode === 'HTML') {\n            for (var i = 0; i < this.parent.formatter.getUndoRedoStack().length; i++) {\n                var temp = this.parent.createElement('div');\n                var contentElem = this.parent.formatter.getUndoRedoStack()[i].text;\n                temp.appendChild(contentElem.cloneNode(true));\n                var vid = temp.querySelectorAll('video');\n                if (temp.querySelector('.e-vid-resize') && vid.length > 0) {\n                    for (var j = 0; j < vid.length; j++) {\n                        vid[j].style.outline = '';\n                    }\n                    detach(temp.querySelector('.e-vid-resize'));\n                    var clonedElement = temp.cloneNode(true);\n                    var fragment = document.createDocumentFragment();\n                    while (clonedElement.firstChild) {\n                        fragment.appendChild(clonedElement.firstChild);\n                    }\n                    this.parent.formatter.getUndoRedoStack()[i].text = fragment;\n                }\n            }\n        }\n    };\n    Video.prototype.onIframeMouseDown = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Video.prototype.videoSize = function (e) {\n        var _this = this;\n        if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n            return;\n        }\n        this.insertVideo(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            var vidSizeHeader = this.i10n.getConstant('videoSizeHeader');\n            var linkUpdate = this.i10n.getConstant('dialogUpdate');\n            var dialogContent = this.vidsizeInput(e);\n            var selectObj_1 = { args: e.args, selfVideo: this, selection: e.selection, selectNode: e.selectNode };\n            this.dialogObj.setProperties({\n                width: '290px', header: vidSizeHeader, content: dialogContent,\n                buttons: [{\n                        // eslint-disable-next-line\n                        click: function (e) {\n                            _this.insertSize(selectObj_1);\n                        },\n                        buttonModel: {\n                            content: linkUpdate, cssClass: 'e-flat e-update-size', isPrimary: true\n                        }\n                    }]\n            });\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            this.dialogObj.content.querySelector('input').focus();\n        }\n    };\n    Video.prototype.vidsizeInput = function (e) {\n        var _this = this;\n        var selectNode = e.selectNode[0];\n        var vidHeight = this.i10n.getConstant('videoHeight');\n        var vidWidth = this.i10n.getConstant('videoWidth');\n        var vidSizeWrap = this.parent.createElement('div', { className: 'e-video-sizewrap' });\n        var widthVal = isNullOrUndefined(this.changedWidthValue) && (selectNode.style.width.toString() === 'auto' ||\n            selectNode.style.width !== '') ? selectNode.style.width : !isNullOrUndefined(this.changedWidthValue) ?\n            this.changedWidthValue : (parseInt(selectNode.getClientRects()[0].width.toString(), 10)).toString();\n        var heightVal = isNullOrUndefined(this.changedHeightValue) && (selectNode.style.height.toString() === 'auto' ||\n            selectNode.style.height !== '') ? selectNode.style.height : !isNullOrUndefined(this.changedHeightValue) ?\n            this.changedHeightValue : (parseInt(selectNode.getClientRects()[0].height.toString(), 10)).toString();\n        this.changedWidthValue = null;\n        this.changedHeightValue = null;\n        var content = '<div class=\"e-rte-label\"><label>' + vidWidth +\n            '</label></div><div class=\"e-rte-field\"><input type=\"text\" id=\"vidwidth\" class=\"e-vid-width\" value=' +\n            widthVal\n            + ' /></div>' +\n            '<div class=\"e-rte-label\">' + '<label>' + vidHeight + '</label></div><div class=\"e-rte-field\"> ' +\n            '<input type=\"text\" id=\"vidheight\" class=\"e-vid-height\" value=' +\n            heightVal\n            + ' /></div>';\n        var contentElem = parseHtml(content);\n        vidSizeWrap.appendChild(contentElem);\n        this.widthNum = new TextBox({\n            value: formatUnit(widthVal),\n            enableRtl: this.parent.enableRtl,\n            input: function (e) {\n                _this.inputWidthValue = formatUnit((e.value));\n            }\n        });\n        this.widthNum.createElement = this.parent.createElement;\n        this.widthNum.appendTo(vidSizeWrap.querySelector('#vidwidth'));\n        this.heightNum = new TextBox({\n            value: formatUnit(heightVal),\n            enableRtl: this.parent.enableRtl,\n            input: function (e) {\n                _this.inputHeightValue = formatUnit((e.value));\n            }\n        });\n        this.heightNum.createElement = this.parent.createElement;\n        this.heightNum.appendTo(vidSizeWrap.querySelector('#vidheight'));\n        return vidSizeWrap;\n    };\n    Video.prototype.insertSize = function (e) {\n        e.selection.restore();\n        var proxy = e.selfVideo;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        var dialogEle = proxy.dialogObj.element;\n        this.changedWidthValue = this.inputWidthValue;\n        this.changedHeightValue = this.inputHeightValue;\n        var width = dialogEle.querySelector('.e-vid-width').value;\n        var height = dialogEle.parentElement.querySelector('.e-vid-height').value;\n        proxy.parent.formatter.process(this.parent, e.args, e.args, {\n            width: width, height: height, selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        if (this.vidResizeDiv) {\n            e.selectNode[0] = (e.selectNode[0].tagName === 'VIDEO' || e.selectNode[0].tagName === 'IFRAME') ?\n                e.selectNode[0] : e.selectNode[0].querySelector('iframe');\n            proxy.vidResizePos(e.selectNode[0], this.vidResizeDiv);\n        }\n        proxy.dialogObj.hide({ returnValue: true });\n    };\n    Video.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        this.videoEle.parentElement.style.cursor = 'auto';\n        if (Browser.isDevice) {\n            removeClass([e.target.parentElement], 'e-mob-span');\n        }\n        var args = { event: e, requestType: 'videos' };\n        this.parent.trigger(events.resizeStop, args);\n        /* eslint-disable */\n        var pageX = this.getPointX(e);\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + e.clientY : e.pageY;\n        /* eslint-enable */\n        this.parent.formatter.editorManager.observer.on(events.checkUndo, this.undoStack, this);\n        this.parent.formatter.saveData();\n    };\n    Video.prototype.resizeStart = function (e, ele) {\n        var _this = this;\n        if (this.parent.readonly) {\n            return;\n        }\n        var target = ele ? ele : !this.isEmbedVidElem(e.target) ? e.target : e.target.querySelector('iframe');\n        this.prevSelectedVidEle = this.videoEle;\n        if (target.tagName === 'VIDEO' || target.tagName === 'IFRAME') {\n            this.parent.preventDefaultResize(e);\n            var videoElem = target;\n            if (this.vidResizeDiv && this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n                detach(this.vidResizeDiv);\n            }\n            this.videoResize(videoElem);\n        }\n        if (target.classList.contains('e-rte-videoboxmark')) {\n            if (this.parent.formatter.getUndoRedoStack().length === 0) {\n                this.parent.formatter.saveData();\n            }\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            this.resizeBtnInit();\n            if (this.quickToolObj) {\n                this.quickToolObj.videoQTBar.hidePopup();\n            }\n            if (target.classList.contains('e-rte-topLeft')) {\n                this.resizeBtnStat.topLeft = true;\n            }\n            if (target.classList.contains('e-rte-topRight')) {\n                this.resizeBtnStat.topRight = true;\n            }\n            if (target.classList.contains('e-rte-botLeft')) {\n                this.resizeBtnStat.botLeft = true;\n            }\n            if (target.classList.contains('e-rte-botRight')) {\n                this.resizeBtnStat.botRight = true;\n            }\n            if (Browser.isDevice && this.contentModule.getEditPanel().contains(this.vidResizeDiv) &&\n                !this.vidResizeDiv.classList.contains('e-mob-span')) {\n                addClass([this.vidResizeDiv], 'e-mob-span');\n            }\n            else {\n                var args = { event: e, requestType: 'videos' };\n                this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n                    if (resizeStartArgs.cancel) {\n                        _this.cancelResizeAction();\n                    }\n                });\n            }\n            if (this.isResizeBind) {\n                EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n                EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n                this.isResizeBind = false;\n            }\n        }\n    };\n    Video.prototype.videoClick = function (e) {\n        if (Browser.isDevice) {\n            if ((e.target.tagName === 'VIDEO' || this.isEmbedVidElem(e.target))) {\n                this.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n                e.target.focus();\n            }\n            else {\n                if (!this.parent.readonly) {\n                    this.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n                }\n            }\n        }\n        if (e.target.tagName === 'VIDEO' || this.isEmbedVidElem(e.target)) {\n            e.preventDefault();\n        }\n    };\n    Video.prototype.onCutHandler = function () {\n        if (this.vidResizeDiv && this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n            this.cancelResizeAction();\n        }\n    };\n    Video.prototype.videoResize = function (e) {\n        this.resizeBtnInit();\n        this.videoEle = e;\n        addClass([this.videoEle], 'e-resize');\n        this.vidResizeDiv = this.parent.createElement('span', { className: 'e-vid-resize', id: this.rteID + '_vidResize' });\n        this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-videoboxmark e-rte-topLeft', styles: 'cursor: nwse-resize'\n        }));\n        this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-videoboxmark e-rte-topRight', styles: 'cursor: nesw-resize'\n        }));\n        this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-videoboxmark e-rte-botLeft', styles: 'cursor: nesw-resize'\n        }));\n        this.vidResizeDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-rte-videoboxmark e-rte-botRight', styles: 'cursor: nwse-resize'\n        }));\n        if (Browser.isDevice) {\n            addClass([this.vidResizeDiv], 'e-mob-rte');\n        }\n        e.style.outline = '2px solid #4a90e2';\n        this.vidResizePos(e, this.vidResizeDiv);\n        this.resizeVidDupPos(e);\n        this.contentModule.getEditPanel().appendChild(this.vidResizeDiv);\n    };\n    Video.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Video.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Video.prototype.vidResizePos = function (e, vidResizeDiv) {\n        if (isNullOrUndefined(vidResizeDiv)) {\n            return;\n        }\n        var pos = this.calcPos(e);\n        var top = pos.top;\n        var left = pos.left;\n        var vidWid = e.width !== 0 && e.width !== 'auto' && e.width !== 'NaN' ? e.width : e.getBoundingClientRect().width;\n        var vidHgt = e.height !== 0 && e.height !== 'auto' && e.height !== 'NaN' ? e.height : e.getBoundingClientRect().height;\n        var borWid = (Browser.isDevice) ? (4 * parseInt((e.style.outline.slice(-3)), 10)) + 2 :\n            (2 * parseInt((e.style.outline.slice(-3)), 10)) + 2; //span border width + video outline width\n        var devWid = ((Browser.isDevice) ? 0 : 2); // span border width\n        vidResizeDiv.querySelector('.e-rte-botLeft').style.left = (left - borWid) + 'px';\n        vidResizeDiv.querySelector('.e-rte-botLeft').style.top = ((parseInt(vidHgt.toString(), 10) - borWid) + top) + 'px';\n        vidResizeDiv.querySelector('.e-rte-botRight').style.left = ((parseInt(vidWid.toString(), 10) - (borWid - devWid)) + left) + 'px';\n        vidResizeDiv.querySelector('.e-rte-botRight').style.top = ((parseInt(vidHgt.toString(), 10) - borWid) + top) + 'px';\n        vidResizeDiv.querySelector('.e-rte-topRight').style.left = ((parseInt(vidWid.toString(), 10) - (borWid - devWid)) + left) + 'px';\n        vidResizeDiv.querySelector('.e-rte-topRight').style.top = (top - (borWid)) + 'px';\n        vidResizeDiv.querySelector('.e-rte-topLeft').style.left = (left - borWid) + 'px';\n        vidResizeDiv.querySelector('.e-rte-topLeft').style.top = (top - borWid) + 'px';\n    };\n    Video.prototype.calcPos = function (elem) {\n        var ignoreOffset = ['TD', 'TH', 'TABLE', 'A'];\n        var parentOffset = { top: 0, left: 0 };\n        var elementOffset;\n        var doc = elem.ownerDocument;\n        var offsetParent = ((elem.offsetParent && (elem.offsetParent.classList.contains('e-video-clickelem') ||\n            ignoreOffset.indexOf(elem.offsetParent.tagName) > -1)) ? closest(elem, '#' + this.parent.getID() + '_rte-edit-view') : elem.offsetParent) || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        if (elem && elem.nodeType === 1 && elem.tagName === 'IFRAME') {\n            elementOffset = elem.getBoundingClientRect();\n            return {\n                top: elementOffset.top - parentOffset.top,\n                left: elementOffset.left - parentOffset.left\n            };\n        }\n        else {\n            return {\n                top: elem.offsetTop,\n                left: elem.offsetLeft\n            };\n        }\n    };\n    Video.prototype.setAspectRatio = function (vid, expectedX, expectedY, e) {\n        var vidEleStyle = getComputedStyle(vid);\n        if (isNullOrUndefined(vidEleStyle)) {\n            return;\n        }\n        var regExp = RegExp;\n        var width = vidEleStyle.width !== '' ? vidEleStyle.width.match(new regExp('^\\\\d+(\\\\.\\\\d*)?%$', 'g')) ? parseFloat(vidEleStyle.width) :\n            parseInt(vidEleStyle.width, 10) : vid.style.width !== '' ? vid.style.width : vid.width;\n        var height = vidEleStyle.height !== '' ? parseInt(vidEleStyle.height, 10) : vid.style.height !== '' ? vid.style.height : vid.height;\n        width = width.toString().match(new regExp('\\\\b\\\\d+(\\\\.\\\\d*)?(%|$)\\\\b', 'g')) ? parseFloat(width.toString()) : parseInt(width.toString(), 10);\n        height = height.toString().match(new regExp('\\\\b\\\\d+(\\\\.\\\\d*)?(%|$)\\\\b', 'g')) ? parseFloat(height.toString()) : parseInt(height.toString(), 10);\n        /* eslint-enable */\n        if (width > height) {\n            vid.style.minWidth = this.parent.insertVideoSettings.minWidth === 0 ? '200px' : formatUnit(this.parent.insertVideoSettings.minWidth);\n            vid.style.minHeight = this.parent.insertVideoSettings.minHeight === 0 ? '90px' : formatUnit(this.parent.insertVideoSettings.minHeight);\n            if (this.parent.insertVideoSettings.resizeByPercent) {\n                this.updateVidEleWidth(vid, width, height, expectedX, expectedY);\n            }\n            else if ((vid.style.width === '' && vid.style.height !== '') || (vidEleStyle.width === '' && vidEleStyle.height !== '')) {\n                vid.style.height = expectedY + 'px';\n            }\n            else if ((vid.style.width !== '' && vid.style.height === '') || (vidEleStyle.width !== '' && vidEleStyle.height === '')) {\n                var currentWidth = ((width / height * expectedY) +\n                    width / height) <\n                    (this.parent.inputElement.getBoundingClientRect().right - 32) ?\n                    ((width / height * expectedY) +\n                        width / height) :\n                    (this.parent.inputElement.getBoundingClientRect().right - 32);\n                vid.style.width = currentWidth.toString() + 'px';\n            }\n            else if (vid.style.width !== '' || vidEleStyle.width !== '') {\n                var currentWidth = (width / height * expectedY) <\n                    (this.parent.inputElement.getBoundingClientRect().right - 32) ?\n                    (width / height * expectedY) :\n                    (this.parent.inputElement.getBoundingClientRect().right - 32);\n                vid.style.width = currentWidth + 'px';\n                vid.style.height = expectedY + 'px';\n            }\n            else {\n                vid.setAttribute('width', (parseInt(((width / height * expectedY) + width / height).toString(), 10)).toString());\n            }\n        }\n        else if (height > width) {\n            if (this.parent.insertVideoSettings.resizeByPercent) {\n                this.updateVidEleWidth(vid, width, height, expectedX, expectedY);\n            }\n            else if (vidEleStyle.width !== '' || vid.style.width !== '') {\n                vid.style.width = expectedX + 'px';\n                vid.style.height = (height / width * expectedX) + 'px';\n            }\n            else {\n                vid.setAttribute('width', this.resizeBtnStat.botRight ? (this.getPointX(e.event) - vid.getBoundingClientRect().left).toString() : expectedX.toString());\n            }\n        }\n        else {\n            if (this.parent.insertVideoSettings.resizeByPercent) {\n                vid.style.width = this.pixToPerc(expectedX, (vid.previousElementSibling || vid.parentElement)) + '%';\n                vid.style.height = null;\n                vid.removeAttribute('height');\n            }\n            else {\n                vid.style.width = expectedX + 'px';\n                vid.style.height = expectedX + 'px';\n            }\n        }\n    };\n    Video.prototype.updateVidEleWidth = function (vid, width, height, expectedX, expectedY) {\n        if (parseInt('' + vid.getBoundingClientRect().width + '', 10) !== 0 && parseInt('' + width + '', 10) !== 0) {\n            var original = vid.offsetWidth + this.mouseX;\n            var finalWidthByPerc = (original / vid.offsetWidth) * (parseFloat(vid.style.width).toString() === 'NaN' ? (vid.offsetWidth / (parseFloat(getComputedStyle(this.parent.element).width)) * 100) : parseFloat(vid.style.width));\n            vid.style.width = ((finalWidthByPerc > 3) ? finalWidthByPerc : 3) + '%';\n        }\n        else {\n            if (width > height) {\n                vid.style.width = this.pixToPerc(width / height * expectedY, (vid.previousElementSibling || vid.parentElement)) + '%';\n            }\n            else {\n                vid.style.width = this.pixToPerc((expectedX / height * expectedY), (vid.previousElementSibling || vid.parentElement)) + '%';\n            }\n        }\n        vid.style.height = null;\n        vid.removeAttribute('height');\n    };\n    Video.prototype.pixToPerc = function (expected, parentEle) {\n        return expected / parseFloat(getComputedStyle(parentEle).width) * 100;\n    };\n    Video.prototype.vidDupMouseMove = function (width, height, e) {\n        var _this = this;\n        var args = { event: e, requestType: 'videos' };\n        this.parent.trigger(events.onResize, args, function (resizingArgs) {\n            if (resizingArgs.cancel) {\n                _this.cancelResizeAction();\n            }\n            else {\n                if ((parseInt(_this.parent.insertVideoSettings.minWidth, 10) >= parseInt(width, 10) ||\n                    (parseInt(_this.parent.getInsertVidMaxWidth(), 10) <= parseInt(width, 10) &&\n                        isNOU(_this.videoEle.style.width)))) {\n                    return;\n                }\n                if (!_this.parent.insertVideoSettings.resizeByPercent &&\n                    (parseInt(_this.parent.insertVideoSettings.minHeight, 10) >= parseInt(height, 10) ||\n                        parseInt(_this.parent.insertVideoSettings.maxHeight, 10) <= parseInt(height, 10))) {\n                    return;\n                }\n                _this.videoEle.parentElement.style.cursor = 'pointer';\n                _this.setAspectRatio(_this.videoEle, parseInt(width, 10), parseInt(height, 10), args);\n                _this.resizeVidDupPos(_this.videoEle);\n                _this.vidResizePos(_this.videoEle, _this.vidResizeDiv);\n            }\n        });\n    };\n    Video.prototype.resizing = function (e) {\n        if (this.videoEle.offsetWidth >= this.parent.getInsertVidMaxWidth()) {\n            this.videoEle.style.maxHeight = this.videoEle.offsetHeight + 'px';\n        }\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.resizeBtnStat.botLeft || this.resizeBtnStat.topLeft) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.resizeBtnStat.topLeft || this.resizeBtnStat.topRight) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        var width = parseInt(this.vidDupPos.width, 10) + mouseX;\n        var height = parseInt(this.vidDupPos.height, 10) + mouseY;\n        this.pageX = pageX;\n        this.pageY = pageY;\n        this.mouseX = mouseX;\n        if (this.resizeBtnStat.botRight) {\n            this.vidDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.botLeft) {\n            this.vidDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topRight) {\n            this.vidDupMouseMove(width + 'px', height + 'px', e);\n        }\n        else if (this.resizeBtnStat.topLeft) {\n            this.vidDupMouseMove(width + 'px', height + 'px', e);\n        }\n    };\n    Video.prototype.cancelResizeAction = function () {\n        this.isResizeBind = true;\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.videoEle && this.vidResizeDiv && this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n            detach(this.vidResizeDiv);\n            this.videoEle.style.outline = '';\n            this.vidResizeDiv = null;\n            this.pageX = null;\n            this.pageY = null;\n        }\n    };\n    Video.prototype.resizeVidDupPos = function (e) {\n        this.vidDupPos = {\n            width: (e.style.width !== '' && (this.parent.insertVideoSettings &&\n                !this.parent.insertVideoSettings.resizeByPercent)) ? this.videoEle.style.width : e.width !== 'auto' && e.width !== 0 && e.width !== 'NaN' ? e.width + 'px' : parseInt(getComputedStyle(e).width, 10) + 'px',\n            height: (e.style.height !== '') ? this.videoEle.style.height : e.height !== 'auto' && e.height !== 0 && e.height !== 'NaN' ? e.height + 'px' : parseInt(getComputedStyle(e).height, 10) + 'px'\n        };\n    };\n    Video.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { botLeft: false, botRight: false, topRight: false, topLeft: false };\n    };\n    Video.prototype.onToolbarAction = function (args) {\n        if (isIDevice()) {\n            this.parent.notify(events.selectionRestore, {});\n        }\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'VideoReplace':\n                this.parent.notify(events.insertVideo, args);\n                break;\n            case 'VideoRemove':\n                this.parent.notify(events.videoDelete, args);\n                break;\n            case 'VideoDimension':\n                this.parent.notify(events.videoSize, args);\n        }\n    };\n    Video.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        this.deletedVid = [];\n        var isCursor;\n        var keyCodeValues = [27, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,\n            44, 45, 9, 16, 17, 18, 19, 20, 33, 34, 35, 36, 37, 38, 39, 40, 91, 92, 93, 144, 145, 182, 183];\n        if (this.parent.editorMode === 'HTML') {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            isCursor = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n        }\n        if (!isCursor && this.parent.editorMode === 'HTML' && keyCodeValues.indexOf(originalEvent.which) < 0) {\n            var nodes = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            for (var i = 0; i < nodes.length; i++) {\n                if (nodes[i].nodeName === 'VIDEO' || nodes[i].nodeName === 'IFRAME') {\n                    this.deletedVid.push(nodes[i]);\n                }\n            }\n        }\n        if (this.parent.editorMode === 'HTML' && ((originalEvent.which === 8 && originalEvent.code === 'Backspace') ||\n            (originalEvent.which === 46 && originalEvent.code === 'Delete'))) {\n            var isCursor_1 = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n            if ((originalEvent.which === 8 && originalEvent.code === 'Backspace' && isCursor_1)) {\n                this.checkVideoBack(range);\n            }\n            else if ((originalEvent.which === 46 && originalEvent.code === 'Delete' && isCursor_1)) {\n                this.checkVideoDel(range);\n            }\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) &&\n            originalEvent.code !== 'KeyK') {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            if (!originalEvent.ctrlKey && originalEvent.key && (originalEvent.key.length === 1 || originalEvent.action === 'enter') &&\n                ((!isNOU(selectParentEle[0]) && selectParentEle[0].tagName === 'VIDEO' || this.isEmbedVidElem(selectParentEle[0]))) &&\n                selectParentEle[0].parentElement) {\n                var prev = selectParentEle[0].parentElement.childNodes[0];\n                if (this.contentModule.getEditPanel().querySelector('.e-vid-resize')) {\n                    this.removeResizeEle();\n                }\n                this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), prev, prev, prev.textContent.length, prev.textContent.length);\n                removeClass([selectParentEle[0]], classes.CLS_VID_FOCUS);\n                this.quickToolObj.videoQTBar.hidePopup();\n            }\n        }\n        if (originalEvent.ctrlKey && (originalEvent.keyCode === 89 || originalEvent.keyCode === 90)) {\n            this.undoStack({ subCommand: (originalEvent.keyCode === 90 ? 'undo' : 'redo') });\n        }\n        if (originalEvent.keyCode === 8 || originalEvent.keyCode === 46) {\n            if (selectNodeEle && selectNodeEle[0] && (selectNodeEle[0].nodeName === 'VIDEO' || this.isEmbedVidElem(selectNodeEle[0])) && selectNodeEle.length < 1) {\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n                    save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                }\n                originalEvent.preventDefault();\n                var event_1 = {\n                    selectNode: selectNodeEle, selection: save, selectParent: selectParentEle,\n                    args: {\n                        item: { command: 'Videos', subCommand: 'VideoRemove' },\n                        originalEvent: originalEvent\n                    }\n                };\n                this.deleteVideo(event_1, originalEvent.keyCode);\n            }\n            if (this.parent.contentModule.getEditPanel().querySelector('.e-vid-resize')) {\n                this.removeResizeEle();\n            }\n        }\n        if (originalEvent.code === 'Backspace') {\n            originalEvent.action = 'backspace';\n        }\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'backspace':\n            case 'delete':\n                for (var i = 0; i < this.deletedVid.length; i++) {\n                    var src = this.deletedVid[i].src;\n                    this.videoRemovePost(src);\n                }\n                if (this.parent.editorMode !== 'Markdown') {\n                    if (range.startContainer.nodeType === 3) {\n                        if (originalEvent.code === 'Backspace') {\n                            if (range.startContainer.previousElementSibling && range.startOffset === 0 &&\n                                range.startContainer.previousElementSibling.classList.contains(classes.CLS_VIDEOWRAP)) {\n                                detach(range.startContainer.previousElementSibling);\n                            }\n                        }\n                        else {\n                            if (range.startContainer.nextElementSibling &&\n                                range.endContainer.textContent.length === range.endOffset &&\n                                range.startContainer.nextElementSibling.classList.contains(classes.CLS_VIDEOWRAP)) {\n                                detach(range.startContainer.nextElementSibling);\n                            }\n                        }\n                    }\n                    else if (range.startContainer.nodeType === 1 && (range.startContainer.classList &&\n                        range.startContainer.classList.contains(classes.CLS_VIDEOWRAP))) {\n                        detach(range.startContainer);\n                    }\n                }\n                break;\n            case 'insert-video':\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n                    save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                }\n                this.openDialog(true, originalEvent, save, selectNodeEle, selectParentEle);\n                originalEvent.preventDefault();\n                break;\n        }\n        if (originalEvent.ctrlKey && originalEvent.key === 'a') {\n            this.handleSelectAll();\n        }\n    };\n    Video.prototype.handleSelectAll = function () {\n        this.cancelResizeAction();\n        var videoFocusNodes = this.parent.inputElement.querySelectorAll('.' + classes.CLS_VID_FOCUS);\n        removeClass(videoFocusNodes, classes.CLS_VID_FOCUS);\n    };\n    Video.prototype.openDialog = function (isInternal, event, selection, ele, parentEle) {\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        if (!isInternal && !isNOU(this.parent.formatter.editorManager.nodeSelection)) {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = selection;\n            selectNodeEle = ele;\n            selectParentEle = parentEle;\n        }\n        if (this.parent.editorMode === 'HTML') {\n            this.insertVideo({\n                args: {\n                    item: { command: 'Videos', subCommand: 'Video' },\n                    originalEvent: event,\n                    name: !isInternal ? 'showDialog' : null\n                },\n                selectNode: selectNodeEle,\n                selection: save,\n                selectParent: selectParentEle\n            });\n        }\n    };\n    Video.prototype.showDialog = function () {\n        this.openDialog(false);\n    };\n    Video.prototype.closeDialog = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Video.prototype.checkVideoBack = function (range) {\n        if (range.startContainer.nodeName === '#text' && range.startOffset === 0 &&\n            !isNOU(range.startContainer.previousSibling) && (range.startContainer.previousSibling.nodeName === 'VIDEO' ||\n            this.isEmbedVidElem(range.startContainer.previousSibling))) {\n            this.deletedVid.push(range.startContainer.previousSibling);\n        }\n        else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset - 1]) &&\n            (range.startContainer.childNodes[range.startOffset - 1].nodeName === 'VIDEO' ||\n                this.isEmbedVidElem(range.startContainer.childNodes[range.startOffset - 1]))) {\n            this.deletedVid.push(range.startContainer.childNodes[range.startOffset - 1]);\n        }\n    };\n    Video.prototype.checkVideoDel = function (range) {\n        if (range.startContainer.nodeName === '#text' && range.startOffset === range.startContainer.textContent.length &&\n            !isNOU(range.startContainer.nextSibling) && (range.startContainer.nextSibling.nodeName === 'VIDEO' ||\n            this.isEmbedVidElem(range.startContainer.nextSibling))) {\n            this.deletedVid.push(range.startContainer.nextSibling);\n        }\n        else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset]) &&\n            (range.startContainer.childNodes[range.startOffset].nodeName === 'VIDEO' ||\n                this.isEmbedVidElem(range.startContainer.childNodes[range.startOffset]))) {\n            this.deletedVid.push(range.startContainer.childNodes[range.startOffset]);\n        }\n    };\n    Video.prototype.alignmentSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Videos') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n        selectNodeEle = (selectNodeEle[0].nodeName === 'VIDEO') ? selectNodeEle : [this.videoEle];\n        var args = { args: e, selectNode: selectNodeEle };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        switch (item.subCommand) {\n            case 'JustifyLeft':\n            case 'JustifyCenter':\n            case 'JustifyRight':\n                this.alignVideo(args, item.subCommand);\n                break;\n            case 'Inline':\n                this.inline(args);\n                break;\n            case 'Break':\n                this.break(args);\n                break;\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n            this.quickToolObj.videoQTBar.hidePopup();\n            removeClass([selectNodeEle[0]], classes.CLS_VID_FOCUS);\n        }\n        this.cancelResizeAction();\n    };\n    Video.prototype.deleteVideo = function (e, keyCode) {\n        if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n            return;\n        }\n        if (this.isEmbedVidElem(e.selectNode[0])) {\n            e.selectNode[0] = e.selectNode[0].classList.contains(classes.CLS_VID_CLICK_ELEM) ? e.selectNode[0] :\n                e.selectNode[0].parentElement;\n        }\n        var args = {\n            element: !this.isEmbedVidElem(e.selectNode[0]) ? e.selectNode[0].querySelector('iframe') :\n                e.selectNode[0],\n            src: !this.isEmbedVidElem(e.selectNode[0]) ? e.selectNode[0].querySelector('source').getAttribute('src') :\n                e.selectNode[0].querySelector('iframe').getAttribute('src')\n        };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        e.selection.restore();\n        this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, {\n            selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        this.videoRemovePost(args.src);\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n            this.quickToolObj.videoQTBar.hidePopup();\n        }\n        this.cancelResizeAction();\n        if (isNullOrUndefined(keyCode)) {\n            this.parent.trigger(events.afterMediaDelete, args);\n        }\n    };\n    Video.prototype.videoRemovePost = function (src) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var absoluteUrl = '';\n        if (isNOU(this.parent.insertVideoSettings.removeUrl) || this.parent.insertVideoSettings.removeUrl === '') {\n            return;\n        }\n        if (src.indexOf('http://') > -1 || src.indexOf('https://') > -1) {\n            absoluteUrl = src;\n        }\n        else {\n            absoluteUrl = new URL(src, document.baseURI).href;\n        }\n        // eslint-disable-next-line no-useless-escape\n        this.removingVideoName = absoluteUrl.replace(/^.*[\\\\\\/]/, '');\n        var xhr = new XMLHttpRequest();\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        xhr.addEventListener('readystatechange', function () {\n            if (this.readyState === 4 && this.status === 200) {\n                proxy.triggerPost(this.response);\n            }\n        });\n        xhr.open('GET', absoluteUrl);\n        xhr.responseType = 'blob';\n        xhr.send();\n    };\n    Video.prototype.triggerPost = function (response) {\n        var removeUrl = this.parent.insertVideoSettings.removeUrl;\n        if (isNOU(removeUrl) || removeUrl === '') {\n            return;\n        }\n        var file = new File([response], this.removingVideoName);\n        var ajax = new Ajax(removeUrl, 'POST', true, null);\n        var formData = new FormData();\n        formData.append('UploadFiles', file);\n        ajax.send(formData);\n    };\n    Video.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (isNOU(this.contentModule.getEditPanel())) {\n            return;\n        }\n        if (target.nodeName === 'VIDEO' || this.isEmbedVidElem(target)) {\n            this.videoEle = !this.isEmbedVidElem(target) ? target : target.querySelector('iframe');\n        }\n        if (!isNullOrUndefined(this.dialogObj) && ((\n        // eslint-disable-next-line\n        !closest(target, '[id=' + \"'\" + this.dialogObj.element.id + \"'\" + ']') && this.parent.toolbarSettings.enable && this.parent.getToolbarElement() &&\n            !this.parent.getToolbarElement().contains(e.target)) ||\n            (this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_Video') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_Video')))) {\n            /* eslint-disable */\n            if (e.offsetX > e.target.clientWidth || e.offsetY > e.target.clientHeight) {\n            }\n            else {\n                this.parent.notify(events.documentClickClosedBy, { closedBy: \"outside click\" });\n                this.dialogObj.hide({ returnValue: true });\n                this.parent.isBlur = true;\n                dispatchEvent(this.parent.element, 'focusout');\n            }\n            /* eslint-enable */\n        }\n        // if (((e.target as HTMLElement).tagName !== 'VIDEO' || !this.isEmbedVidElem(e.target as HTMLElement)) && this.vidResizeDiv && !(this.quickToolObj &&\n        //     this.quickToolObj.videoQTBar && this.quickToolObj.videoQTBar.element.contains(e.target as HTMLElement)) &&\n        //     this.contentModule.getEditPanel().contains(this.vidResizeDiv)) {\n        //     this.cancelResizeAction();\n        // }\n        if (this.contentModule.getEditPanel().querySelector('.e-vid-resize')) {\n            if (target.tagName !== 'VIDEO' && !this.isEmbedVidElem(target)) {\n                this.removeResizeEle();\n            }\n            if ((target.tagName !== 'VIDEO' && !this.isEmbedVidElem(target)) && !isNOU(this.videoEle)) {\n                this.videoEle.style.outline = '';\n            }\n            else if (!isNOU(this.prevSelectedVidEle) &&\n                this.prevSelectedVidEle !== ((target.tagName === 'IFRAME' || target.tagName === 'VIDEO') ? target : target.querySelector('iframe'))) {\n                this.prevSelectedVidEle.style.outline = '';\n            }\n        }\n        if (this.parent.inlineMode.enable && target && this.dialogObj && !closest(target, '#' + this.dialogObj.element.id)) {\n            this.dialogObj.hide();\n        }\n    };\n    Video.prototype.removeResizeEle = function () {\n        this.isResizeBind = true;\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        detach(this.contentModule.getEditPanel().querySelector('.e-vid-resize'));\n    };\n    Video.prototype.onWindowResize = function () {\n        if (!isNOU(this.contentModule) && !isNOU(this.contentModule.getEditPanel().querySelector('.e-vid-resize'))) {\n            this.cancelResizeAction();\n        }\n    };\n    Video.prototype.break = function (e) {\n        if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Break';\n        this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Video.prototype.inline = function (e) {\n        if (e.selectNode[0].nodeName !== 'VIDEO' && !this.isEmbedVidElem(e.selectNode[0])) {\n            return;\n        }\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : 'Inline';\n        this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Video.prototype.alignVideo = function (e, type) {\n        var subCommand = (e.args.item) ?\n            e.args.item.subCommand : type;\n        this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Video.prototype.editAreaClickHandler = function (e) {\n        if (this.parent.readonly) {\n            this.hideVideoQuickToolbar();\n            return;\n        }\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            if ((showOnRightClick && args.which === 1) && !isNullOrUndefined(args.target) &&\n                (args.target.tagName === 'VIDEO' || this.isEmbedVidElem(args.target))) {\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), args.target);\n            }\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.videoQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.videoQTBar.element.classList.contains('e-rte-pop');\n            if ((target.nodeName === 'VIDEO' || this.isEmbedVidElem(target)) && this.parent.quickToolbarModule) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), target);\n                if (isIDevice()) {\n                    this.parent.notify(events.selectionSave, e);\n                }\n                addClass([!this.isEmbedVidElem(target) ? target : target.querySelector('iframe')], classes.CLS_VID_FOCUS);\n                this.showVideoQuickToolbar({ args: args, type: 'Videos', elements: [args.target] });\n            }\n            else {\n                this.hideVideoQuickToolbar();\n            }\n        }\n    };\n    Video.prototype.showVideoQuickToolbar = function (e) {\n        var _this = this;\n        if (e.type !== 'Videos' || (!isNullOrUndefined(e.args) && e.args.detail === 2) || isNullOrUndefined(this.parent.quickToolbarModule)\n            || isNullOrUndefined(this.parent.quickToolbarModule.videoQTBar) || isNullOrUndefined(e.args)) {\n            return;\n        }\n        this.quickToolObj = this.parent.quickToolbarModule;\n        var args = e.args;\n        var target = e.elements;\n        [].forEach.call(e.elements, function (element, index) {\n            if (index === 0) {\n                target = element;\n            }\n        });\n        if (target.tagName === 'VIDEO' || this.isEmbedVidElem(target)) {\n            addClass([(!this.isEmbedVidElem(target) || target.tagName === 'IFRAME') ? target : target.querySelector('iframe')], [classes.CLS_VID_FOCUS]);\n        }\n        var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n            this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n        if (this.parent.quickToolbarModule.videoQTBar) {\n            if (e.isNotify) {\n                this.showPopupTime = setTimeout(function () {\n                    _this.parent.formatter.editorManager.nodeSelection.Clear(_this.contentModule.getDocument());\n                    _this.parent.formatter.editorManager.nodeSelection.setSelectionContents(_this.contentModule.getDocument(), target);\n                    _this.quickToolObj.videoQTBar.showPopup(args.pageX - 50, pageY + (target.getBoundingClientRect().height / 2) - target.offsetTop, target);\n                }, 400);\n            }\n            else {\n                this.quickToolObj.videoQTBar.showPopup(args.pageX - 50, pageY + (target.getBoundingClientRect().height / 2) - target.offsetTop, target);\n            }\n        }\n    };\n    Video.prototype.hideVideoQuickToolbar = function () {\n        if (!isNullOrUndefined(this.contentModule.getEditPanel().querySelector('.' + classes.CLS_VID_FOCUS))) {\n            removeClass([this.contentModule.getEditPanel().querySelector('.' + classes.CLS_VID_FOCUS)], classes.CLS_VID_FOCUS);\n            if (!isNOU(this.videoEle)) {\n                this.videoEle.style.outline = '';\n            }\n            if (!isNOU(this.contentModule.getEditPanel().querySelector('.e-vid-resize'))) {\n                detach(this.contentModule.getEditPanel().querySelector('.e-vid-resize'));\n            }\n            if (this.quickToolObj && this.quickToolObj.videoQTBar && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n                this.quickToolObj.videoQTBar.hidePopup();\n            }\n        }\n    };\n    Video.prototype.isEmbedVidElem = function (target) {\n        if ((target && target.nodeType !== 3 && target.nodeName !== 'BR' && (target.classList && target.classList.contains(classes.CLS_VID_CLICK_ELEM))) ||\n            (target && target.nodeName === 'IFRAME')) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Video.prototype.insertingVideo = function (e) {\n        this.insertVideo(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            var dialogContent = this.dialogObj.element.querySelector('.e-video-content');\n            if (!isNullOrUndefined(this.parent.insertVideoSettings.path) || this.parent.editorMode === 'HTML') {\n                document.getElementById(this.rteID + '_insertVideo').focus();\n            }\n            else {\n                dialogContent.querySelector('.e-video-url').focus();\n            }\n        }\n    };\n    Video.prototype.insertVideo = function (e) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        var videoDialog = this.parent.createElement('div', { className: 'e-rte-video-dialog', id: this.rteID + '_video' });\n        this.parent.rootContainer.appendChild(videoDialog);\n        var videoInsert = this.i10n.getConstant('dialogInsert');\n        var videolinkCancel = this.i10n.getConstant('dialogCancel');\n        var videoHeader = this.i10n.getConstant('videoHeader');\n        var selection = e.selection;\n        var selectObj = { selfVideo: this, selection: e.selection, args: e.args, selectParent: e.selectParent };\n        var dialogModel = {\n            header: videoHeader,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px',\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertVideoUrl.bind(selectObj),\n                    buttonModel: { content: videoInsert, cssClass: 'e-flat e-insertVideo', isPrimary: true, disabled: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: videolinkCancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                if (_this.isVideoUploaded) {\n                    if (_this.dialogObj.element.querySelector('.e-file-abort-btn')) {\n                        _this.dialogObj.element.querySelector('.e-file-abort-btn').click();\n                    }\n                    else {\n                        _this.uploadObj.remove();\n                    }\n                }\n                _this.parent.isBlur = false;\n                if (event && !isNOU(event.event) && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                }\n                _this.clearDialogObj();\n                _this.dialogRenderObj.close(event);\n            }\n        };\n        var dialogContent = this.parent.createElement('div', { className: 'e-video-content' });\n        if (!isNullOrUndefined(this.parent.insertVideoSettings.path) || this.parent.editorMode === 'HTML') {\n            dialogContent.appendChild(this.videoUpload(e));\n        }\n        var linkHeader = this.parent.createElement('div', { className: 'e-videoheader' });\n        var embedLinkHeader = this.parent.createElement('div', { className: 'e-embed-videoheader' });\n        var linkHeaderText = this.i10n.getConstant('videoLinkHeader');\n        var embedLinkHeaderText = this.i10n.getConstant('embedVideoLinkHeader');\n        if (this.parent.editorMode === 'HTML') {\n            linkHeader.innerHTML = linkHeaderText;\n            embedLinkHeader.innerHTML = embedLinkHeaderText;\n        }\n        dialogContent.appendChild(this.urlPopup(e));\n        if (e.selectNode && e.selectNode[0].nodeType === 1 && (e.selectNode[0].tagName === 'VIDEO' || this.isEmbedVidElem(e.selectNode[0]))) {\n            dialogModel.header = this.parent.localeObj.getConstant('editVideoHeader');\n            dialogModel.content = dialogContent;\n        }\n        else {\n            dialogModel.content = dialogContent;\n        }\n        this.dialogObj = this.dialogRenderObj.render(dialogModel);\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(videoDialog);\n        if (e.selectNode && e.selectNode[0].nodeType === 1 && (e.selectNode[0].tagName === 'VIDEO' || this.isEmbedVidElem(e.selectNode[0]))\n            && (e.name === 'insertVideo')) {\n            this.dialogObj.element.querySelector('.e-insertVideo').textContent = this.parent.localeObj.getConstant('dialogUpdate');\n        }\n        videoDialog.style.maxHeight = 'inherit';\n        if (this.quickToolObj) {\n            if (this.quickToolObj.videoQTBar && document.body.contains(this.quickToolObj.videoQTBar.element)) {\n                this.quickToolObj.videoQTBar.hidePopup();\n                if (!isNullOrUndefined(e.selectParent)) {\n                    removeClass([e.selectParent[0]], classes.CLS_VID_FOCUS);\n                }\n            }\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n            if (this.quickToolObj.textQTBar && this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n                this.quickToolObj.textQTBar.hidePopup();\n            }\n        }\n    };\n    Video.prototype.urlPopup = function (e) {\n        var _this = this;\n        var videoUrl = this.parent.createElement('div', { className: 'e-video-url-wrap' });\n        var urlContent = this.parent.createElement('div', { id: 'urlcontent' });\n        var placeUrl = this.i10n.getConstant('videoUrl');\n        var content = '<input id=\"embedURL\" type=\"radio\">' + '<input id=\"webURL\" type=\"radio\" >';\n        var contentElem = parseHtml(content);\n        videoUrl.appendChild(contentElem);\n        videoUrl.appendChild(urlContent);\n        this.embedInputUrl = this.parent.createElement('textarea', {\n            className: 'e-input e-embed-video-url',\n            attrs: { placeholder: this.i10n.getConstant('pasteEmbeddedCodeHere'), type: 'text', tabindex: '-1', 'aria-label': this.i10n.getConstant('embedVideoLinkHeader') }\n        });\n        this.embedInputUrl.addEventListener('keyup', function () {\n            if (!isNOU(_this.embedInputUrl)) {\n                if (_this.embedInputUrl.value.length === 0) {\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                }\n                else {\n                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                }\n            }\n        });\n        this.inputUrl = this.parent.createElement('input', {\n            className: 'e-input e-video-url',\n            attrs: { placeholder: placeUrl, spellcheck: 'false' }\n        });\n        this.inputUrl.addEventListener('input', function () {\n            if (!isNOU(_this.inputUrl)) {\n                if (_this.inputUrl.value.length === 0) {\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                }\n                else {\n                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                }\n            }\n        });\n        if (e.selectNode && e.selectNode[0] && (e.selectNode[0].nodeName === 'VIDEO' || this.isEmbedVidElem(e.selectNode[0]))) {\n            if (e.selectNode[0].nodeName === 'VIDEO') {\n                var regex = new RegExp(/([^\\S]|^)(((https?:\\/\\/)|(www\\.))(\\S+))/gi);\n                var sourceElement = e.selectNode[0].querySelector('source');\n                this.inputUrl.value = sourceElement && sourceElement.src && sourceElement.src.match(regex) ? sourceElement.src : '';\n            }\n            else {\n                this.embedInputUrl.value = e.selectNode[0].nodeName === 'IFRAME' ? e.selectNode[0].outerHTML\n                    : e.selectNode[0].querySelector('iframe').outerHTML;\n            }\n        }\n        var isWebUrl = this.inputUrl.value ? true : false;\n        this.embedUrlBtn = new RadioButton({\n            label: this.i10n.getConstant('embeddedCode'),\n            checked: !isWebUrl,\n            name: 'URL',\n            created: function () {\n                if (!isWebUrl) {\n                    urlContent.appendChild(_this.embedInputUrl);\n                }\n            },\n            change: function () {\n                urlContent.innerHTML = '';\n                urlContent.appendChild(_this.embedInputUrl);\n            }\n        });\n        this.embedUrlBtn.appendTo(videoUrl.querySelector('#embedURL'));\n        this.webUrlBtn = new RadioButton({\n            label: this.i10n.getConstant('webUrl'),\n            checked: isWebUrl,\n            name: 'URL',\n            created: function () {\n                if (isWebUrl) {\n                    urlContent.appendChild(_this.inputUrl);\n                }\n            },\n            change: function () {\n                urlContent.innerHTML = '';\n                urlContent.appendChild(_this.inputUrl);\n            }\n        });\n        this.webUrlBtn.appendTo(videoUrl.querySelector('#webURL'));\n        return videoUrl;\n    };\n    Video.prototype.videoUpload = function (e) {\n        var _this = this;\n        var save;\n        var selectParent;\n        // eslint-disable-next-line\n        var proxy = this;\n        var iframe = proxy.parent.iframeSettings.enable;\n        if (proxy.parent.editorMode === 'HTML' && (!iframe && isNullOrUndefined(closest(e.selection.range.startContainer.parentNode, '[id='\n            // eslint-disable-next-line\n            + \"'\" + this.parent.contentModule.getPanel().id + \"'\" + ']'))\n            || (iframe && !hasClass(e.selection.range.startContainer.parentNode.ownerDocument.querySelector('body'), 'e-lib')))) {\n            this.contentModule.getEditPanel().focus();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = e.selection;\n            selectParent = e.selectParent;\n        }\n        var uploadParentEle = this.parent.createElement('div', { className: 'e-vid-uploadwrap e-droparea' });\n        var deviceVideoUpMsg = this.i10n.getConstant('videoDeviceUploadMessage');\n        var videoUpMsg = this.i10n.getConstant('videoUploadMessage');\n        var span = this.parent.createElement('span', { className: 'e-droptext' });\n        var spanMsg = this.parent.createElement('span', {\n            className: 'e-rte-upload-text', innerHTML: ((Browser.isDevice) ? deviceVideoUpMsg : videoUpMsg)\n        });\n        span.appendChild(spanMsg);\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-browsebtn', id: this.rteID + '_insertVideo', attrs: { autofocus: 'true', type: 'button' }\n        });\n        span.appendChild(btnEle);\n        uploadParentEle.appendChild(span);\n        var browserMsg = this.i10n.getConstant('browse');\n        this.button = new Button({ content: browserMsg, enableRtl: this.parent.enableRtl });\n        this.button.isStringTemplate = true;\n        this.button.createElement = this.parent.createElement;\n        this.button.appendTo(btnEle);\n        var btnClick = (Browser.isDevice) ? span : btnEle;\n        EventHandler.add(btnClick, 'click', this.fileSelect, this);\n        var uploadEle = this.parent.createElement('input', {\n            id: this.rteID + '_upload', attrs: { type: 'File', name: 'UploadFiles' }\n        });\n        uploadParentEle.appendChild(uploadEle);\n        var fileName;\n        var selectArgs;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var filesData;\n        this.uploadObj = new Uploader({\n            asyncSettings: { saveUrl: this.parent.insertVideoSettings.saveUrl, removeUrl: this.parent.insertVideoSettings.removeUrl },\n            dropArea: span, multiple: false, enableRtl: this.parent.enableRtl,\n            allowedExtensions: this.parent.insertVideoSettings.allowedTypes.toString(),\n            selected: function (e) {\n                proxy.isVideoUploaded = true;\n                selectArgs = e;\n                filesData = e.filesData;\n                _this.parent.trigger(events.fileSelected, selectArgs, function (selectArgs) {\n                    if (!selectArgs.cancel) {\n                        _this.checkExtension(selectArgs.filesData[0]);\n                        fileName = selectArgs.filesData[0].name;\n                        if (_this.parent.editorMode === 'HTML' && isNullOrUndefined(_this.parent.insertVideoSettings.path)) {\n                            var reader_1 = new FileReader();\n                            // eslint-disable-next-line\n                            reader_1.addEventListener('load', function (e) {\n                                var url = _this.parent.insertVideoSettings.saveFormat === 'Base64' ? reader_1.result :\n                                    URL.createObjectURL(convertToBlob(reader_1.result));\n                                proxy.uploadUrl = {\n                                    url: url, selection: save, fileName: fileName,\n                                    selectParent: selectParent\n                                };\n                                proxy.inputUrl.setAttribute('disabled', 'true');\n                                proxy.embedInputUrl.setAttribute('disabled', 'true');\n                                if (isNullOrUndefined(proxy.parent.insertVideoSettings.saveUrl) && _this.isAllowedTypes\n                                    && !isNullOrUndefined(_this.dialogObj)) {\n                                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                                }\n                            });\n                            reader_1.readAsDataURL(selectArgs.filesData[0].rawFile);\n                        }\n                    }\n                });\n            },\n            beforeUpload: function (args) {\n                _this.parent.trigger(events.beforeFileUpload, args);\n            },\n            uploading: function (e) {\n                if (!_this.parent.isServerRendered) {\n                    _this.parent.trigger(events.fileUploading, e);\n                }\n            },\n            success: function (e) {\n                _this.parent.trigger(events.fileUploadSuccess, e, function (e) {\n                    if (!isNullOrUndefined(_this.parent.insertVideoSettings.path)) {\n                        var url = _this.parent.insertVideoSettings.path + e.file.name;\n                        // eslint-disable-next-line\n                        var value = { url: url, selection: save };\n                        proxy.uploadUrl = {\n                            url: url, selection: save, fileName: fileName, selectParent: selectParent,\n                            width: {\n                                width: proxy.parent.insertVideoSettings.width, minWidth: proxy.parent.insertVideoSettings.minWidth,\n                                maxWidth: proxy.parent.getInsertImgMaxWidth()\n                            },\n                            height: {\n                                height: proxy.parent.insertVideoSettings.height, minHeight: proxy.parent.insertVideoSettings.minHeight,\n                                maxHeight: proxy.parent.insertVideoSettings.maxHeight\n                            }\n                        };\n                        //proxy.inputUrl.setAttribute('disabled', 'true');\n                        proxy.embedInputUrl.setAttribute('disabled', 'true');\n                    }\n                    if (e.operation === 'upload' && !isNullOrUndefined(_this.dialogObj)) {\n                        _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                    }\n                });\n            },\n            failure: function (e) {\n                _this.parent.trigger(events.fileUploadFailed, e);\n            },\n            removing: function () {\n                // eslint-disable-next-line\n                _this.parent.trigger(events.fileRemoving, e, function (e) {\n                    proxy.isVideoUploaded = false;\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                    if (proxy.inputUrl.getAttribute('disabled')) {\n                        proxy.inputUrl.removeAttribute('disabled');\n                    }\n                    if (proxy.embedInputUrl.getAttribute('disabled')) {\n                        proxy.embedInputUrl.removeAttribute('disabled');\n                    }\n                    if (proxy.uploadUrl) {\n                        proxy.uploadUrl.url = '';\n                    }\n                });\n            }\n        });\n        this.uploadObj.isStringTemplate = true;\n        this.uploadObj.createElement = this.parent.createElement;\n        this.uploadObj.appendTo(uploadEle);\n        return uploadParentEle;\n    };\n    Video.prototype.checkExtension = function (e) {\n        if (this.uploadObj.allowedExtensions) {\n            if (this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf(('.' + e.type).toLocaleLowerCase()) === -1) {\n                this.dialogObj.getButtons(0).element.setAttribute('disabled', 'disabled');\n                this.isAllowedTypes = false;\n            }\n            else {\n                this.isAllowedTypes = true;\n            }\n        }\n    };\n    Video.prototype.fileSelect = function () {\n        this.dialogObj.element.getElementsByClassName('e-file-select-wrap')[0].querySelector('button').click();\n        return false;\n    };\n    // eslint-disable-next-line\n    Video.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.dialogObj.hide({ returnValue: true });\n        if (this.isVideoUploaded) {\n            this.uploadObj.removing();\n        }\n    };\n    // eslint-disable-next-line\n    Video.prototype.insertVideoUrl = function (e) {\n        var proxy = this.selfVideo;\n        //let audioSelectParent: Node = proxy.uploadUrl.selectParent[0];\n        proxy.isVideoUploaded = false;\n        var url = proxy.inputUrl.value;\n        var embedUrl = proxy.embedInputUrl.value;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (!isNullOrUndefined(proxy.uploadUrl) && proxy.uploadUrl.url !== '') {\n            proxy.uploadUrl.cssClass = (proxy.parent.insertVideoSettings.layoutOption === 'Inline' ?\n                classes.CLS_VIDEOINLINE : classes.CLS_VIDEOBREAK);\n            proxy.uploadUrl.width = {\n                width: proxy.parent.insertVideoSettings.width, minWidth: proxy.parent.insertVideoSettings.minWidth,\n                maxWidth: proxy.parent.getInsertImgMaxWidth()\n            };\n            proxy.uploadUrl.height = {\n                height: proxy.parent.insertVideoSettings.height, minHeight: proxy.parent.insertVideoSettings.minHeight,\n                maxHeight: proxy.parent.insertVideoSettings.maxHeight\n            };\n            proxy.dialogObj.hide({ returnValue: false });\n            if (proxy.dialogObj !== null) {\n                return;\n            }\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, proxy.uploadUrl);\n            proxy.uploadUrl.url = '';\n        }\n        else if (proxy.parent.editorMode === 'HTML' && (url !== '' || embedUrl !== '')) {\n            if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(\n            // eslint-disable-next-line\n            this.selection.range.startContainer.parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))) {\n                proxy.contentModule.getEditPanel().focus();\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n                this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n                this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            }\n            var webUrlBtn = document.getElementById('webURL');\n            var name_1 = webUrlBtn.checked ? url.split('/')[url.split('/').length - 1] : embedUrl;\n            var value = {\n                cssClass: (proxy.parent.insertVideoSettings.layoutOption === 'Inline' ? classes.CLS_VIDEOINLINE : classes.CLS_VIDEOBREAK),\n                url: url, selection: this.selection, fileName: name_1, isEmbedUrl: !webUrlBtn.checked,\n                selectParent: this.selectParent, width: {\n                    width: proxy.parent.insertVideoSettings.width, minWidth: proxy.parent.insertVideoSettings.minWidth,\n                    maxWidth: proxy.parent.getInsertImgMaxWidth()\n                },\n                height: {\n                    height: proxy.parent.insertVideoSettings.height, minHeight: proxy.parent.insertVideoSettings.minHeight,\n                    maxHeight: proxy.parent.insertVideoSettings.maxHeight\n                }\n            };\n            proxy.dialogObj.hide({ returnValue: false });\n            if (proxy.dialogObj !== null) {\n                return;\n            }\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, value);\n        }\n    };\n    /* eslint-disable */\n    /**\n     * Destroys the ToolBar.\n     *\n     * @method destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    /* eslint-enable */\n    Video.prototype.destroy = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.prevSelectedVidEle = undefined;\n        this.removeEventListener();\n        if (this.showPopupTime) {\n            clearTimeout(this.showPopupTime);\n            this.showPopupTime = null;\n        }\n        this.clearDialogObj();\n        this.isDestroyed = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Video.prototype.getModuleName = function () {\n        return 'video';\n    };\n    return Video;\n}());\nexport { Video };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}