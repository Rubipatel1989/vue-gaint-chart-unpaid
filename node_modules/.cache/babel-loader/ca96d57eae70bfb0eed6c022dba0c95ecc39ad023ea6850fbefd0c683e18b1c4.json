{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\n/**\n * Defines util methods used by Rich Text Editor.\n */\nimport { isNullOrUndefined as isNOU, addClass, removeClass, selectAll, createElement } from '@syncfusion/ej2-base';\nimport { Browser, detach, SanitizeHtmlHelper, extend } from '@syncfusion/ej2-base';\nimport * as classes from '../base/classes';\nimport * as CONSTANT from '../base/constant';\nimport * as model from '../models/items';\nimport { toolsLocale, fontNameLocale, formatsLocale, numberFormatListLocale, bulletFormatListLocale } from '../models/default-locale';\nvar undoRedoItems = ['Undo', 'Redo'];\nvar inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button', 'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress', 'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'strike', 'sub', 'sup', 'svg', 'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n/**\n * @param {string} val - specifies the string value\n * @param {string} items - specifies the value\n * @returns {number} - returns the number value\n * @hidden\n */\nexport function getIndex(val, items) {\n  var index = -1;\n  items.some(function (item, i) {\n    if (typeof item === 'string' && val === item.toLocaleLowerCase()) {\n      index = i;\n      return true;\n    }\n    return false;\n  });\n  return index;\n}\n/**\n * @param {Element} element - specifies the element\n * @param {string} className - specifies the string value\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function hasClass(element, className) {\n  var hasClass = false;\n  if (element.classList.contains(className)) {\n    hasClass = true;\n  }\n  return hasClass;\n}\n/**\n * @param {IDropDownItemModel} items - specifies the item model\n * @param {string} value - specifies the string value\n * @param {string} type - specifies the string value\n * @param {string} returnType - specifies the return type\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function getDropDownValue(items, value, type, returnType) {\n  var data;\n  var result;\n  if (items.length === 0 && value === 'FontSize') {\n    return 'Font Size';\n  }\n  for (var k = 0; k < items.length; k++) {\n    if (type === 'value' && items[k].value.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n      data = items[k];\n      break;\n    } else if (type === 'text' && items[k].text.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n      data = items[k];\n      break;\n    } else if (type === 'subCommand' && items[k].subCommand.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n      data = items[k];\n      break;\n    }\n  }\n  if (!isNOU(data)) {\n    switch (returnType) {\n      case 'text':\n        result = data.text;\n        break;\n      case 'value':\n        result = data.value;\n        break;\n      case 'iconCss':\n        result = data.iconCss;\n        break;\n    }\n  }\n  return result;\n}\n/**\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function isIDevice() {\n  var result = false;\n  if (Browser.isDevice && Browser.isIos) {\n    result = true;\n  }\n  return result;\n}\n/**\n * @param {string} value - specifies the value\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function getFormattedFontSize(value) {\n  if (isNOU(value)) {\n    return '';\n  }\n  return value;\n}\n/**\n * @param {MouseEvent} e - specifies the mouse event\n * @param {HTMLElement} parentElement - specifies the parent element\n * @param {boolean} isIFrame - specifies the boolean value\n * @returns {number} - returns the number\n * @hidden\n */\nexport function pageYOffset(e, parentElement, isIFrame) {\n  var y = 0;\n  if (isIFrame) {\n    y = window.pageYOffset + parentElement.getBoundingClientRect().top + e.clientY;\n  } else {\n    y = e.pageY;\n  }\n  return y;\n}\n/**\n * @param {string} item - specifies the string\n * @param {ServiceLocator} serviceLocator - specifies the service locator\n * @returns {string} - returns the string\n * @hidden\n */\nexport function getTooltipText(item, serviceLocator) {\n  var i10n = serviceLocator.getService('rteLocale');\n  var itemLocale = toolsLocale[\"\" + item];\n  var tooltipText = i10n.getConstant(itemLocale);\n  return tooltipText;\n}\n/**\n * @param {ISetToolbarStatusArgs} e - specifies the e element\n * @param {boolean} isPopToolbar - specifies the boolean value\n * @param {IRichTextEditor} self - specifies the parent element\n * @returns {void}\n * @hidden\n */\nexport function setToolbarStatus(e, isPopToolbar, self) {\n  updateDropDownFontFormatLocale(self);\n  var dropDown = e.dropDownModule;\n  var data = e.args;\n  var keys = Object.keys(e.args);\n  for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n    var key = keys_1[_i];\n    for (var j = 0; j < e.tbItems.length; j++) {\n      var item = e.tbItems[j].subCommand;\n      var itemStr = item && item.toLocaleLowerCase();\n      if (item && itemStr === key || item === 'UL' && key === 'unorderedlist' || item === 'OL' && key === 'orderedlist' || itemStr === 'pre' && key === 'insertcode' || item === 'NumberFormatList' && key === 'numberFormatList' || item === 'BulletFormatList' && key === 'bulletFormatList') {\n        if (typeof data[\"\" + key] === 'boolean') {\n          if (data[\"\" + key] === true) {\n            addClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n          } else {\n            removeClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n          }\n        } else if ((typeof data[\"\" + key] === 'string' || data[\"\" + key] === null) && getIndex(key, e.parent.toolbarSettings.items) >= -1) {\n          var value = data[\"\" + key] ? data[\"\" + key] : '';\n          var result = '';\n          switch (key) {\n            case 'formats':\n              {\n                if (isNOU(dropDown.formatDropDown) || isPopToolbar || !isNOU(dropDown.formatDropDown) && dropDown.formatDropDown.isDestroyed) {\n                  break;\n                }\n                var formatItems = e.parent.format.types;\n                var formatContent = isNOU(e.parent.format.default) ? formatItems[0].text : e.parent.format.default;\n                result = value === 'empty' ? '' : getDropDownValue(formatItems, value, 'subCommand', 'text');\n                dropDown.formatDropDown.content = '<span style=\"display: inline-flex;' + 'width:' + e.parent.format.width + '\" >' + '<span class=\"e-rte-dropdown-btn-text' + (isNOU(e.parent.cssClass) ? '' : ' ' + e.parent.cssClass) + '\">' + (isNOU(result) ? formatContent : result) + '</span></span>';\n                dropDown.formatDropDown.dataBind();\n                break;\n              }\n            case 'alignments':\n              {\n                if (isNOU(dropDown.alignDropDown) || !isNOU(dropDown.alignDropDown) && dropDown.alignDropDown.isDestroyed) {\n                  break;\n                }\n                var alignItems = model.alignmentItems;\n                result = getDropDownValue(alignItems, value, 'subCommand', 'iconCss');\n                dropDown.alignDropDown.iconCss = isNOU(result) ? 'e-icons e-justify-left' : result;\n                dropDown.alignDropDown.dataBind();\n                break;\n              }\n            case 'fontname':\n              {\n                if (isNOU(dropDown.fontNameDropDown) || isPopToolbar || !isNOU(dropDown.fontNameDropDown) && dropDown.fontNameDropDown.isDestroyed) {\n                  break;\n                }\n                var fontNameItems = e.parent.fontFamily.items;\n                result = value === 'empty' ? '' : getDropDownValue(fontNameItems, value, 'value', 'text');\n                var fontNameContent = isNOU(e.parent.fontFamily.default) ? fontNameItems.length === 0 ? self.serviceLocator.getService('rteLocale').getConstant('fontName') : fontNameItems[0].text : e.parent.fontFamily.default;\n                var name_1 = (isNOU(result) ? fontNameContent : result) === 'Default' ? self.serviceLocator.getService('rteLocale').getConstant('fontName') : isNOU(result) ? fontNameContent : result;\n                dropDown.fontNameDropDown.content = '<span style=\"display: inline-flex;' + 'width:' + e.parent.fontFamily.width + '\" >' + '<span class=\"e-rte-dropdown-btn-text' + (isNOU(e.parent.cssClass) ? '' : ' ' + e.parent.cssClass) + '\">' + name_1 + '</span></span>';\n                dropDown.fontNameDropDown.dataBind();\n                break;\n              }\n            case 'fontsize':\n              {\n                if (isNOU(dropDown.fontSizeDropDown) || !isNOU(dropDown.fontSizeDropDown) && dropDown.fontSizeDropDown.isDestroyed) {\n                  break;\n                }\n                var fontSizeItems = e.parent.fontSize.items;\n                var fontSizeContent = isNOU(e.parent.fontSize.default) ? fontSizeItems.length === 0 ? self.serviceLocator.getService('rteLocale').getConstant('fontSize') : fontSizeItems[0].text : e.parent.fontSize.default;\n                var fontSizeToolbarText = getDropDownValue(fontSizeItems, value === '' ? fontSizeContent.replace(/\\s/g, '') : value, fontSizeItems.length > 0 && fontSizeItems[0] && fontSizeContent.replace(/\\s/g, '') === fontSizeItems[0].text && value === '' ? 'text' : 'value', 'text');\n                result = value === 'empty' ? '' : fontSizeToolbarText === 'Default' ? self.serviceLocator.getService('rteLocale').getConstant('fontSize') : fontSizeToolbarText;\n                dropDown.fontSizeDropDown.content = '<span style=\"display: inline-flex;' + 'width:' + e.parent.fontSize.width + '\" >' + '<span class=\"e-rte-dropdown-btn-text' + (isNOU(e.parent.cssClass) ? '' : ' ' + e.parent.cssClass) + '\">' + getFormattedFontSize(result) + '</span></span>';\n                dropDown.fontSizeDropDown.dataBind();\n                break;\n              }\n            case 'bulletFormatList':\n            case 'numberFormatList':\n              {\n                if (value !== '') {\n                  addClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                } else {\n                  removeClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                }\n              }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * @param {string} items - specifies the string value\n * @returns {string[]} - returns the array value\n * @hidden\n */\nexport function getCollection(items) {\n  if (typeof items === 'object') {\n    return items;\n  } else {\n    return [items];\n  }\n}\n/**\n * @param {string[]} items - specifies the array of string value\n * @param {IToolbarItemModel} toolbarItems - specifies the tool bar model\n * @returns {number} - returns the number\n * @hidden\n */\nexport function getTBarItemsIndex(items, toolbarItems) {\n  var itemsIndex = [];\n  for (var i = 0; i < items.length; i++) {\n    for (var j = 0; j < toolbarItems.length; j++) {\n      if (toolbarItems[j].type === 'Separator') {\n        continue;\n      } else {\n        if ((items[i] === 'OrderedList' || items[i] === 'NumberFormatList') && toolbarItems[j].subCommand === 'OL') {\n          itemsIndex.push(j);\n          break;\n        } else if ((items[i] === 'UnorderedList' || items[i] === 'BulletFormatList') && toolbarItems[j].subCommand === 'UL') {\n          itemsIndex.push(j);\n          break;\n        } else if (items[i] === 'InsertCode' && toolbarItems[j].subCommand === 'Pre') {\n          itemsIndex.push(j);\n          break;\n        } else if (items[i] === 'Blockquote' && toolbarItems[j].subCommand === 'blockquote') {\n          itemsIndex.push(j);\n          break;\n        } else if (items[i] === 'FileManager' && toolbarItems[j].subCommand === 'File') {\n          itemsIndex.push(j);\n          break;\n        } else if (typeof items[i] === 'object' && items[i].command === 'Custom') {\n          itemsIndex.push(i);\n          break;\n        } else if (items[i] === toolbarItems[j].subCommand) {\n          itemsIndex.push(j);\n          break;\n        }\n      }\n    }\n  }\n  return itemsIndex;\n}\n/**\n * @param {BaseToolbar} baseToolbar - specifies the base\n * @param {boolean} undoRedoStatus - specifies the boolean value\n * @returns {void}\n * @hidden\n */\nexport function updateUndoRedoStatus(baseToolbar, undoRedoStatus) {\n  var i = 0;\n  var trgItems = getTBarItemsIndex(getCollection(undoRedoItems), baseToolbar.toolbarObj.items);\n  var tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n  var keys = Object.keys(undoRedoStatus);\n  for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n    var key = keys_2[_i];\n    var target = tbItems[trgItems[i]];\n    if (target) {\n      baseToolbar.toolbarObj.enableItems(target, undoRedoStatus[\"\" + key]);\n    }\n    i++;\n  }\n}\n/**\n * To dispatch the event manually\n *\n * @param {Element} element - specifies the element.\n * @param {string} type - specifies the string type.\n * @returns {void}\n * @hidden\n\n */\nexport function dispatchEvent(element, type) {\n  var evt = document.createEvent('HTMLEvents');\n  evt.initEvent(type, false, true);\n  element.dispatchEvent(evt);\n}\n/**\n * To parse the HTML\n *\n * @param {string} value - specifies the string value\n * @returns {DocumentFragment} - returns the document\n * @hidden\n */\nexport function parseHtml(value) {\n  var tempNode = createElement('template');\n  tempNode.innerHTML = value;\n  if (tempNode.content instanceof DocumentFragment) {\n    return tempNode.content;\n  } else {\n    return document.createRange().createContextualFragment(value);\n  }\n}\n/**\n * @param {Document} docElement - specifies the document element\n * @param {Element} node - specifies the node\n * @returns {Node[]} - returns the node array\n * @hidden\n */\nexport function getTextNodesUnder(docElement, node) {\n  var nodes = [];\n  for (node = node.firstChild; node; node = node.nextSibling) {\n    if (node.nodeType === 3) {\n      nodes.push(node);\n    } else {\n      nodes = nodes.concat(getTextNodesUnder(docElement, node));\n    }\n  }\n  return nodes;\n}\n/**\n * @param {IToolsItemConfigs} obj - specifies the configuration\n * @returns {void}\n * @hidden\n */\nexport function toObjectLowerCase(obj) {\n  var convertedValue = {};\n  var keys = Object.keys(obj);\n  for (var i = 0; i < Object.keys(obj).length; i++) {\n    convertedValue[keys[i].toLocaleLowerCase()] = obj[keys[i]];\n  }\n  return convertedValue;\n}\n/**\n * @param {string} value - specifies the string value\n * @param {IRichTextEditor} rteObj - specifies the rte object\n * @returns {string} - returns the string\n * @hidden\n */\nexport function getEditValue(value, rteObj) {\n  var val;\n  if (value !== null && value !== '') {\n    val = rteObj.enableHtmlEncode ? updateTextNode(decode(value), rteObj) : updateTextNode(value, rteObj);\n    rteObj.setProperties({\n      value: val\n    }, true);\n  } else {\n    if (rteObj.enterKey === 'DIV') {\n      val = rteObj.enableHtmlEncode ? '&lt;div&gt;&lt;br/&gt;&lt;/div&gt;' : '<div><br/></div>';\n    } else if (rteObj.enterKey === 'BR') {\n      val = rteObj.enableHtmlEncode ? '&lt;br/&gt;' : '<br/>';\n    } else {\n      val = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n    }\n  }\n  return val;\n}\n/**\n * @param {string} value - specifies the value\n * @param {IRichTextEditor} rteObj - specifies the rich text editor instance.\n * @returns {string} - returns the string\n * @hidden\n */\nexport function updateTextNode(value, rteObj) {\n  var tempNode = document.createElement('div');\n  var resultElm = document.createElement('div');\n  var childNodes = tempNode.childNodes;\n  tempNode.innerHTML = value;\n  tempNode.setAttribute('class', 'tempDiv');\n  if (childNodes.length > 0) {\n    var isPreviousInlineElem = void 0;\n    var previousParent = void 0;\n    var insertElem = void 0;\n    while (tempNode.firstChild) {\n      var emptyBlockElem = tempNode.querySelectorAll(CONSTANT.blockEmptyNodes);\n      for (var i = 0; i < emptyBlockElem.length; i++) {\n        emptyBlockElem[i].innerHTML = '<br>';\n      }\n      // To handle the Empty block node with \\n\n      var allPNodes = tempNode.querySelectorAll('p');\n      for (var i = 0; i < allPNodes.length; i++) {\n        if (allPNodes[i].textContent.trim().length === 0 && allPNodes[i].childNodes.length === 1 && allPNodes[i].childNodes[0].nodeName === '#text' && isNOU(allPNodes[i].childNodes[0].textContent.match(/\\u00a0/g))) {\n          allPNodes[i].innerHTML = '<br>';\n        }\n      }\n      var emptyInlineElem = tempNode.querySelectorAll(CONSTANT.inlineEmptyNodes);\n      for (var i = 0; i < emptyInlineElem.length; i++) {\n        emptyInlineElem[i].innerHTML = '&ZeroWidthSpace;';\n      }\n      if (rteObj.enterKey !== 'BR' && (tempNode.firstChild.nodeName === '#text' && (tempNode.firstChild.textContent.indexOf('\\n') < 0 || tempNode.firstChild.textContent.trim() !== '') || inlineNode.indexOf(tempNode.firstChild.nodeName.toLocaleLowerCase()) >= 0)) {\n        if (!isPreviousInlineElem) {\n          if (rteObj.enterKey === 'DIV') {\n            insertElem = createElement('div');\n          } else {\n            insertElem = createElement('p');\n          }\n          resultElm.appendChild(insertElem);\n          insertElem.appendChild(tempNode.firstChild);\n        } else {\n          previousParent.appendChild(tempNode.firstChild);\n        }\n        previousParent = insertElem;\n        isPreviousInlineElem = true;\n      } else if (tempNode.firstChild.nodeName === '#text' && (tempNode.firstChild.textContent === '\\n' || tempNode.firstChild.textContent.indexOf('\\n') >= 0 && tempNode.firstChild.textContent.trim() === '')) {\n        detach(tempNode.firstChild);\n      } else {\n        resultElm.appendChild(tempNode.firstChild);\n        isPreviousInlineElem = false;\n      }\n    }\n    var imageElm = resultElm.querySelectorAll('img');\n    for (var i = 0; i < imageElm.length; i++) {\n      if (imageElm[i].classList.contains('e-rte-image-unsupported')) {\n        continue; // Should not add the class if the image is Broken.\n      }\n      if (!imageElm[i].classList.contains(classes.CLS_RTE_IMAGE)) {\n        imageElm[i].classList.add(classes.CLS_RTE_IMAGE);\n      }\n      if (!(imageElm[i].classList.contains(classes.CLS_IMGINLINE) || imageElm[i].classList.contains(classes.CLS_IMGBREAK)) && !(imageElm[i].classList.contains('e-imgleft') || imageElm[i].classList.contains('e-imgright') || imageElm[i].classList.contains('e-imgcenter'))) {\n        imageElm[i].classList.add(classes.CLS_IMGINLINE);\n      }\n    }\n  }\n  return resultElm.innerHTML;\n}\n/**\n * @param {IRichTextEditor} rteObj - specifies the rte object\n * @returns {string} - returns the value based on enter configuration.\n * @hidden\n */\nexport function getDefaultValue(rteObj) {\n  var currentVal;\n  if (rteObj.enterKey === 'DIV') {\n    currentVal = rteObj.enableHtmlEncode ? '&lt;div&gt;&lt;br/&gt;&lt;/div&gt;' : '<div><br/></div>';\n  } else if (rteObj.enterKey === 'BR') {\n    currentVal = rteObj.enableHtmlEncode ? '&lt;br/&gt;' : '<br/>';\n  } else {\n    currentVal = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n  }\n  return currentVal;\n}\n/**\n * @param {string} value - specifies the value\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function isEditableValueEmpty(value) {\n  return value === '<p><br></p>' || value === '&lt;p&gt;&lt;br&gt;&lt;/p&gt;' || value === '<div><br></div>' || value === '&lt;div&gt;&lt;br&gt;&lt;/div&gt;' || value === '<br>' || value === '&lt;br&gt;' || value === '' ? true : false;\n}\n/**\n * @param {string} value - specifies the string value\n * @returns {string} - returns the string\n * @hidden\n */\nexport function decode(value) {\n  return value.replace(/&amp;/g, '&').replace(/&amp;lt;/g, '<').replace(/&lt;/g, '<').replace(/&amp;gt;/g, '>').replace(/&gt;/g, '>').replace(/&nbsp;/g, ' ').replace(/&amp;nbsp;/g, ' ').replace(/&quot;/g, '');\n}\n/**\n * @param {string} value - specifies the string value\n * @param {IRichTextEditor} parent - specifies the rte\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function sanitizeHelper(value, parent) {\n  if (parent.enableHtmlSanitizer) {\n    var item = SanitizeHtmlHelper.beforeSanitize();\n    if (item.selectors.tags[2] && item.selectors.tags[2].indexOf('iframe') > -1) {\n      item.selectors.tags[2] = 'iframe:not(.e-rte-embed-url)';\n    }\n    var beforeEvent = {\n      cancel: false,\n      helper: null\n    };\n    extend(item, item, beforeEvent);\n    parent.trigger('beforeSanitizeHtml', item);\n    if (item.cancel && !isNOU(item.helper)) {\n      value = item.helper(value);\n    } else if (!item.cancel) {\n      value = SanitizeHtmlHelper.serializeValue(item, value);\n    }\n  }\n  value = parseHelper(value);\n  return value;\n}\n/**\n * @param {string} value - specifies the string value\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function parseHelper(value) {\n  var temp = createElement('div');\n  temp.innerHTML = value;\n  var fontElements = temp.querySelectorAll('font');\n  fontElements.forEach(function (font) {\n    var span = document.createElement('span');\n    var style = (font.getAttribute('style') || '').replace(/style:/gi, '').trim();\n    if (!isNOU(style) && style.trim() !== '' && !style.endsWith(';')) {\n      style += ';';\n    }\n    Array.from(font.attributes).forEach(function (attr) {\n      var name = attr.name.toLowerCase();\n      var value = attr.value;\n      switch (name) {\n        case 'size':\n          style += \"font-size:\" + value + \";\";\n          break;\n        case 'face':\n          style += \"font-family:\" + value + \";\";\n          break;\n        case 'bgcolor':\n          style += \"background-color:\" + value + \";\";\n          break;\n        case 'style':\n          break;\n        default:\n          style += name + \":\" + value + \";\";\n          break;\n      }\n    });\n    if (!isNOU(style) && style.trim() !== '') {\n      style = style.replace(/;;+/g, ';');\n      span.setAttribute('style', style);\n    }\n    span.innerHTML = font.innerHTML;\n    if (!isNOU(font.parentNode)) {\n      font.parentNode.replaceChild(span, font);\n    }\n  });\n  var parsedValue = temp.innerHTML;\n  temp.remove();\n  return parsedValue;\n}\n/**\n * @param {string} dataUrl - specifies the string value\n * @returns {BaseToolbar} - returns the value\n * @hidden\n */\n//Converting the base64 url to blob\nexport function convertToBlob(dataUrl) {\n  var arr = dataUrl.split(',');\n  var mime = arr[0].match(/:(.*?);/)[1];\n  var bstr = atob(arr[1]);\n  var n = bstr.length;\n  var u8arr = new Uint8Array(n);\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new Blob([u8arr], {\n    type: mime\n  });\n}\n/**\n * @param {IRichTextEditor} self - specifies the rte\n * @param {string} localeItems - specifies the locale items\n * @param {IDropDownItemModel} item - specifies the dropdown item\n * @returns {string} - returns the value\n * @hidden\n */\nexport function getLocaleFontFormat(self, localeItems, item) {\n  for (var i = 0; localeItems.length > i; i++) {\n    if (localeItems[i].value === item.value || localeItems[i].value === item.subCommand) {\n      return self.localeObj.getConstant(localeItems[i].locale);\n    }\n  }\n  return item.text;\n}\n/**\n * @param {IRichTextEditor} self - specifies the rte\n * @returns {void}\n * @hidden\n */\nexport function updateDropDownFontFormatLocale(self) {\n  model.fontFamily.forEach(function (item, i) {\n    model.fontFamily[i].text = getLocaleFontFormat(self, fontNameLocale, model.fontFamily[i]);\n  });\n  model.formatItems.forEach(function (item, i) {\n    model.formatItems[i].text = getLocaleFontFormat(self, formatsLocale, model.formatItems[i]);\n  });\n  model.numberFormatList.forEach(function (item, i) {\n    model.numberFormatList[i].text = getLocaleFontFormat(self, numberFormatListLocale, model.numberFormatList[i]);\n  });\n  model.bulletFormatList.forEach(function (item, i) {\n    model.bulletFormatList[i].text = getLocaleFontFormat(self, bulletFormatListLocale, model.bulletFormatList[i]);\n  });\n}","map":{"version":3,"names":["isNullOrUndefined","isNOU","addClass","removeClass","selectAll","createElement","Browser","detach","SanitizeHtmlHelper","extend","classes","CONSTANT","model","toolsLocale","fontNameLocale","formatsLocale","numberFormatListLocale","bulletFormatListLocale","undoRedoItems","inlineNode","getIndex","val","items","index","some","item","i","toLocaleLowerCase","hasClass","element","className","classList","contains","getDropDownValue","value","type","returnType","data","result","length","k","text","subCommand","iconCss","isIDevice","isDevice","isIos","getFormattedFontSize","pageYOffset","e","parentElement","isIFrame","y","window","getBoundingClientRect","top","clientY","pageY","getTooltipText","serviceLocator","i10n","getService","itemLocale","tooltipText","getConstant","setToolbarStatus","isPopToolbar","self","updateDropDownFontFormatLocale","dropDown","dropDownModule","args","keys","Object","_i","keys_1","key","j","tbItems","itemStr","tbElements","CLS_ACTIVE","parent","toolbarSettings","formatDropDown","isDestroyed","formatItems","format","types","formatContent","default","content","width","cssClass","dataBind","alignDropDown","alignItems","alignmentItems","fontNameDropDown","fontNameItems","fontFamily","fontNameContent","name_1","fontSizeDropDown","fontSizeItems","fontSize","fontSizeContent","fontSizeToolbarText","replace","getCollection","getTBarItemsIndex","toolbarItems","itemsIndex","push","command","updateUndoRedoStatus","baseToolbar","undoRedoStatus","trgItems","toolbarObj","CLS_TB_ITEM","keys_2","target","enableItems","dispatchEvent","evt","document","createEvent","initEvent","parseHtml","tempNode","innerHTML","DocumentFragment","createRange","createContextualFragment","getTextNodesUnder","docElement","node","nodes","firstChild","nextSibling","nodeType","concat","toObjectLowerCase","obj","convertedValue","getEditValue","rteObj","enableHtmlEncode","updateTextNode","decode","setProperties","enterKey","resultElm","childNodes","setAttribute","isPreviousInlineElem","previousParent","insertElem","emptyBlockElem","querySelectorAll","blockEmptyNodes","allPNodes","textContent","trim","nodeName","match","emptyInlineElem","inlineEmptyNodes","indexOf","appendChild","imageElm","CLS_RTE_IMAGE","add","CLS_IMGINLINE","CLS_IMGBREAK","getDefaultValue","currentVal","isEditableValueEmpty","sanitizeHelper","enableHtmlSanitizer","beforeSanitize","selectors","tags","beforeEvent","cancel","helper","trigger","serializeValue","parseHelper","temp","fontElements","forEach","font","span","style","getAttribute","endsWith","Array","from","attributes","attr","name","toLowerCase","parentNode","replaceChild","parsedValue","remove","convertToBlob","dataUrl","arr","split","mime","bstr","atob","n","u8arr","Uint8Array","charCodeAt","Blob","getLocaleFontFormat","localeItems","localeObj","locale","numberFormatList","bulletFormatList"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/base/util.js"],"sourcesContent":["/**\n * Defines util methods used by Rich Text Editor.\n */\nimport { isNullOrUndefined as isNOU, addClass, removeClass, selectAll, createElement } from '@syncfusion/ej2-base';\nimport { Browser, detach, SanitizeHtmlHelper, extend } from '@syncfusion/ej2-base';\nimport * as classes from '../base/classes';\nimport * as CONSTANT from '../base/constant';\nimport * as model from '../models/items';\nimport { toolsLocale, fontNameLocale, formatsLocale, numberFormatListLocale, bulletFormatListLocale } from '../models/default-locale';\nvar undoRedoItems = ['Undo', 'Redo'];\nvar inlineNode = ['a', 'abbr', 'acronym', 'audio', 'b', 'bdi', 'bdo', 'big', 'br', 'button',\n    'canvas', 'cite', 'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'font', 'i', 'iframe', 'img', 'input',\n    'ins', 'kbd', 'label', 'map', 'mark', 'meter', 'noscript', 'object', 'output', 'picture', 'progress',\n    'q', 'ruby', 's', 'samp', 'script', 'select', 'slot', 'small', 'span', 'strong', 'strike', 'sub', 'sup', 'svg',\n    'template', 'textarea', 'time', 'u', 'tt', 'var', 'video', 'wbr'];\n/**\n * @param {string} val - specifies the string value\n * @param {string} items - specifies the value\n * @returns {number} - returns the number value\n * @hidden\n */\nexport function getIndex(val, items) {\n    var index = -1;\n    items.some(function (item, i) {\n        if (typeof item === 'string' && val === item.toLocaleLowerCase()) {\n            index = i;\n            return true;\n        }\n        return false;\n    });\n    return index;\n}\n/**\n * @param {Element} element - specifies the element\n * @param {string} className - specifies the string value\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function hasClass(element, className) {\n    var hasClass = false;\n    if (element.classList.contains(className)) {\n        hasClass = true;\n    }\n    return hasClass;\n}\n/**\n * @param {IDropDownItemModel} items - specifies the item model\n * @param {string} value - specifies the string value\n * @param {string} type - specifies the string value\n * @param {string} returnType - specifies the return type\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function getDropDownValue(items, value, type, returnType) {\n    var data;\n    var result;\n    if (items.length === 0 && value === 'FontSize') {\n        return 'Font Size';\n    }\n    for (var k = 0; k < items.length; k++) {\n        if (type === 'value' && items[k].value.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'text' && items[k].text.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n        else if (type === 'subCommand' && items[k].subCommand.toLocaleLowerCase() === value.toLocaleLowerCase()) {\n            data = items[k];\n            break;\n        }\n    }\n    if (!isNOU(data)) {\n        switch (returnType) {\n            case 'text':\n                result = data.text;\n                break;\n            case 'value':\n                result = data.value;\n                break;\n            case 'iconCss':\n                result = data.iconCss;\n                break;\n        }\n    }\n    return result;\n}\n/**\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function isIDevice() {\n    var result = false;\n    if (Browser.isDevice && Browser.isIos) {\n        result = true;\n    }\n    return result;\n}\n/**\n * @param {string} value - specifies the value\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function getFormattedFontSize(value) {\n    if (isNOU(value)) {\n        return '';\n    }\n    return value;\n}\n/**\n * @param {MouseEvent} e - specifies the mouse event\n * @param {HTMLElement} parentElement - specifies the parent element\n * @param {boolean} isIFrame - specifies the boolean value\n * @returns {number} - returns the number\n * @hidden\n */\nexport function pageYOffset(e, parentElement, isIFrame) {\n    var y = 0;\n    if (isIFrame) {\n        y = window.pageYOffset + parentElement.getBoundingClientRect().top + e.clientY;\n    }\n    else {\n        y = e.pageY;\n    }\n    return y;\n}\n/**\n * @param {string} item - specifies the string\n * @param {ServiceLocator} serviceLocator - specifies the service locator\n * @returns {string} - returns the string\n * @hidden\n */\nexport function getTooltipText(item, serviceLocator) {\n    var i10n = serviceLocator.getService('rteLocale');\n    var itemLocale = toolsLocale[\"\" + item];\n    var tooltipText = i10n.getConstant(itemLocale);\n    return tooltipText;\n}\n/**\n * @param {ISetToolbarStatusArgs} e - specifies the e element\n * @param {boolean} isPopToolbar - specifies the boolean value\n * @param {IRichTextEditor} self - specifies the parent element\n * @returns {void}\n * @hidden\n */\nexport function setToolbarStatus(e, isPopToolbar, self) {\n    updateDropDownFontFormatLocale(self);\n    var dropDown = e.dropDownModule;\n    var data = e.args;\n    var keys = Object.keys(e.args);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        for (var j = 0; j < e.tbItems.length; j++) {\n            var item = e.tbItems[j].subCommand;\n            var itemStr = item && item.toLocaleLowerCase();\n            if (item && (itemStr === key) || (item === 'UL' && key === 'unorderedlist') || (item === 'OL' && key === 'orderedlist') ||\n                (itemStr === 'pre' && key === 'insertcode') || (item === 'NumberFormatList' && key === 'numberFormatList' ||\n                item === 'BulletFormatList' && key === 'bulletFormatList')) {\n                if (typeof data[\"\" + key] === 'boolean') {\n                    if (data[\"\" + key] === true) {\n                        addClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                    else {\n                        removeClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                    }\n                }\n                else if ((typeof data[\"\" + key] === 'string' || data[\"\" + key] === null) &&\n                    getIndex(key, e.parent.toolbarSettings.items) >= -1) {\n                    var value = ((data[\"\" + key]) ? data[\"\" + key] : '');\n                    var result = '';\n                    switch (key) {\n                        case 'formats': {\n                            if (isNOU(dropDown.formatDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.formatDropDown) && dropDown.formatDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var formatItems = e.parent.format.types;\n                            var formatContent = isNOU(e.parent.format.default) ? formatItems[0].text :\n                                e.parent.format.default;\n                            result = value === 'empty' ? '' : getDropDownValue(formatItems, value, 'subCommand', 'text');\n                            dropDown.formatDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.format.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text' + (isNOU(e.parent.cssClass) ? '' : ' ' + e.parent.cssClass) + '\">'\n                                + (isNOU(result) ? formatContent : result) +\n                                '</span></span>');\n                            dropDown.formatDropDown.dataBind();\n                            break;\n                        }\n                        case 'alignments': {\n                            if (isNOU(dropDown.alignDropDown) ||\n                                (!isNOU(dropDown.alignDropDown) && dropDown.alignDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var alignItems = model.alignmentItems;\n                            result = getDropDownValue(alignItems, value, 'subCommand', 'iconCss');\n                            dropDown.alignDropDown.iconCss = isNOU(result) ? 'e-icons e-justify-left' : result;\n                            dropDown.alignDropDown.dataBind();\n                            break;\n                        }\n                        case 'fontname': {\n                            if (isNOU(dropDown.fontNameDropDown) || isPopToolbar ||\n                                (!isNOU(dropDown.fontNameDropDown) && dropDown.fontNameDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var fontNameItems = e.parent.fontFamily.items;\n                            result = value === 'empty' ? '' : getDropDownValue(fontNameItems, value, 'value', 'text');\n                            var fontNameContent = isNOU(e.parent.fontFamily.default) ? (fontNameItems.length === 0) ? self.serviceLocator.getService('rteLocale').getConstant('fontName') : fontNameItems[0].text :\n                                e.parent.fontFamily.default;\n                            var name_1 = (isNOU(result) ? fontNameContent : result) === 'Default' ? self.serviceLocator.getService('rteLocale').getConstant('fontName')\n                                : (isNOU(result) ? fontNameContent : result);\n                            dropDown.fontNameDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontFamily.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text' + (isNOU(e.parent.cssClass) ? '' : ' ' + e.parent.cssClass) + '\">'\n                                + name_1 + '</span></span>');\n                            dropDown.fontNameDropDown.dataBind();\n                            break;\n                        }\n                        case 'fontsize': {\n                            if (isNOU(dropDown.fontSizeDropDown) ||\n                                (!isNOU(dropDown.fontSizeDropDown) && dropDown.fontSizeDropDown.isDestroyed)) {\n                                break;\n                            }\n                            var fontSizeItems = e.parent.fontSize.items;\n                            var fontSizeContent = isNOU(e.parent.fontSize.default) ? (fontSizeItems.length === 0) ? self.serviceLocator.getService('rteLocale').getConstant('fontSize') : fontSizeItems[0].text :\n                                e.parent.fontSize.default;\n                            var fontSizeToolbarText = getDropDownValue(fontSizeItems, (value === '' ? fontSizeContent.replace(/\\s/g, '') : value), (fontSizeItems.length > 0 && fontSizeItems[0] && fontSizeContent.replace(/\\s/g, '') === fontSizeItems[0].text && value === '') ? 'text' : 'value', 'text');\n                            result = value === 'empty' ? '' : (fontSizeToolbarText === 'Default') ? self.serviceLocator.getService('rteLocale').getConstant('fontSize') : fontSizeToolbarText;\n                            dropDown.fontSizeDropDown.content = ('<span style=\"display: inline-flex;' +\n                                'width:' + e.parent.fontSize.width + '\" >' +\n                                '<span class=\"e-rte-dropdown-btn-text' + (isNOU(e.parent.cssClass) ? '' : ' ' + e.parent.cssClass) + '\">'\n                                + getFormattedFontSize(result) + '</span></span>');\n                            dropDown.fontSizeDropDown.dataBind();\n                            break;\n                        }\n                        case 'bulletFormatList':\n                        case 'numberFormatList': {\n                            if (value !== '') {\n                                addClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                            }\n                            else {\n                                removeClass([e.tbElements[j]], [classes.CLS_ACTIVE]);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n/**\n * @param {string} items - specifies the string value\n * @returns {string[]} - returns the array value\n * @hidden\n */\nexport function getCollection(items) {\n    if (typeof items === 'object') {\n        return items;\n    }\n    else {\n        return [items];\n    }\n}\n/**\n * @param {string[]} items - specifies the array of string value\n * @param {IToolbarItemModel} toolbarItems - specifies the tool bar model\n * @returns {number} - returns the number\n * @hidden\n */\nexport function getTBarItemsIndex(items, toolbarItems) {\n    var itemsIndex = [];\n    for (var i = 0; i < items.length; i++) {\n        for (var j = 0; j < toolbarItems.length; j++) {\n            if (toolbarItems[j].type === 'Separator') {\n                continue;\n            }\n            else {\n                if ((items[i] === 'OrderedList' || items[i] === 'NumberFormatList') && toolbarItems[j].subCommand === 'OL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if ((items[i] === 'UnorderedList' || items[i] === 'BulletFormatList') && toolbarItems[j].subCommand === 'UL') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'InsertCode' && toolbarItems[j].subCommand === 'Pre') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'Blockquote' && toolbarItems[j].subCommand === 'blockquote') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (items[i] === 'FileManager' && toolbarItems[j].subCommand === 'File') {\n                    itemsIndex.push(j);\n                    break;\n                }\n                else if (typeof (items[i]) === 'object' && items[i].command === 'Custom') {\n                    itemsIndex.push(i);\n                    break;\n                }\n                else if (items[i] === toolbarItems[j].subCommand) {\n                    itemsIndex.push(j);\n                    break;\n                }\n            }\n        }\n    }\n    return itemsIndex;\n}\n/**\n * @param {BaseToolbar} baseToolbar - specifies the base\n * @param {boolean} undoRedoStatus - specifies the boolean value\n * @returns {void}\n * @hidden\n */\nexport function updateUndoRedoStatus(baseToolbar, undoRedoStatus) {\n    var i = 0;\n    var trgItems = getTBarItemsIndex(getCollection(undoRedoItems), baseToolbar.toolbarObj.items);\n    var tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n    var keys = Object.keys(undoRedoStatus);\n    for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n        var key = keys_2[_i];\n        var target = tbItems[trgItems[i]];\n        if (target) {\n            baseToolbar.toolbarObj.enableItems(target, undoRedoStatus[\"\" + key]);\n        }\n        i++;\n    }\n}\n/**\n * To dispatch the event manually\n *\n * @param {Element} element - specifies the element.\n * @param {string} type - specifies the string type.\n * @returns {void}\n * @hidden\n\n */\nexport function dispatchEvent(element, type) {\n    var evt = document.createEvent('HTMLEvents');\n    evt.initEvent(type, false, true);\n    element.dispatchEvent(evt);\n}\n/**\n * To parse the HTML\n *\n * @param {string} value - specifies the string value\n * @returns {DocumentFragment} - returns the document\n * @hidden\n */\nexport function parseHtml(value) {\n    var tempNode = createElement('template');\n    tempNode.innerHTML = value;\n    if (tempNode.content instanceof DocumentFragment) {\n        return tempNode.content;\n    }\n    else {\n        return document.createRange().createContextualFragment(value);\n    }\n}\n/**\n * @param {Document} docElement - specifies the document element\n * @param {Element} node - specifies the node\n * @returns {Node[]} - returns the node array\n * @hidden\n */\nexport function getTextNodesUnder(docElement, node) {\n    var nodes = [];\n    for (node = node.firstChild; node; node = node.nextSibling) {\n        if (node.nodeType === 3) {\n            nodes.push(node);\n        }\n        else {\n            nodes = nodes.concat(getTextNodesUnder(docElement, node));\n        }\n    }\n    return nodes;\n}\n/**\n * @param {IToolsItemConfigs} obj - specifies the configuration\n * @returns {void}\n * @hidden\n */\nexport function toObjectLowerCase(obj) {\n    var convertedValue = {};\n    var keys = Object.keys(obj);\n    for (var i = 0; i < Object.keys(obj).length; i++) {\n        convertedValue[keys[i].toLocaleLowerCase()] = obj[keys[i]];\n    }\n    return convertedValue;\n}\n/**\n * @param {string} value - specifies the string value\n * @param {IRichTextEditor} rteObj - specifies the rte object\n * @returns {string} - returns the string\n * @hidden\n */\nexport function getEditValue(value, rteObj) {\n    var val;\n    if (value !== null && value !== '') {\n        val = rteObj.enableHtmlEncode ? updateTextNode(decode(value), rteObj) : updateTextNode(value, rteObj);\n        rteObj.setProperties({ value: val }, true);\n    }\n    else {\n        if (rteObj.enterKey === 'DIV') {\n            val = rteObj.enableHtmlEncode ? '&lt;div&gt;&lt;br/&gt;&lt;/div&gt;' : '<div><br/></div>';\n        }\n        else if (rteObj.enterKey === 'BR') {\n            val = rteObj.enableHtmlEncode ? '&lt;br/&gt;' : '<br/>';\n        }\n        else {\n            val = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n        }\n    }\n    return val;\n}\n/**\n * @param {string} value - specifies the value\n * @param {IRichTextEditor} rteObj - specifies the rich text editor instance.\n * @returns {string} - returns the string\n * @hidden\n */\nexport function updateTextNode(value, rteObj) {\n    var tempNode = document.createElement('div');\n    var resultElm = document.createElement('div');\n    var childNodes = tempNode.childNodes;\n    tempNode.innerHTML = value;\n    tempNode.setAttribute('class', 'tempDiv');\n    if (childNodes.length > 0) {\n        var isPreviousInlineElem = void 0;\n        var previousParent = void 0;\n        var insertElem = void 0;\n        while (tempNode.firstChild) {\n            var emptyBlockElem = tempNode.querySelectorAll(CONSTANT.blockEmptyNodes);\n            for (var i = 0; i < emptyBlockElem.length; i++) {\n                emptyBlockElem[i].innerHTML = '<br>';\n            }\n            // To handle the Empty block node with \\n\n            var allPNodes = tempNode.querySelectorAll('p');\n            for (var i = 0; i < allPNodes.length; i++) {\n                if (allPNodes[i].textContent.trim().length === 0 && allPNodes[i].childNodes.length === 1\n                    && allPNodes[i].childNodes[0].nodeName === '#text' &&\n                    isNOU(allPNodes[i].childNodes[0].textContent.match(/\\u00a0/g))) {\n                    allPNodes[i].innerHTML = '<br>';\n                }\n            }\n            var emptyInlineElem = tempNode.querySelectorAll(CONSTANT.inlineEmptyNodes);\n            for (var i = 0; i < emptyInlineElem.length; i++) {\n                emptyInlineElem[i].innerHTML = '&ZeroWidthSpace;';\n            }\n            if (rteObj.enterKey !== 'BR' && ((tempNode.firstChild.nodeName === '#text' &&\n                (tempNode.firstChild.textContent.indexOf('\\n') < 0 || tempNode.firstChild.textContent.trim() !== '')) ||\n                inlineNode.indexOf(tempNode.firstChild.nodeName.toLocaleLowerCase()) >= 0)) {\n                if (!isPreviousInlineElem) {\n                    if (rteObj.enterKey === 'DIV') {\n                        insertElem = createElement('div');\n                    }\n                    else {\n                        insertElem = createElement('p');\n                    }\n                    resultElm.appendChild(insertElem);\n                    insertElem.appendChild(tempNode.firstChild);\n                }\n                else {\n                    previousParent.appendChild(tempNode.firstChild);\n                }\n                previousParent = insertElem;\n                isPreviousInlineElem = true;\n            }\n            else if (tempNode.firstChild.nodeName === '#text' && (tempNode.firstChild.textContent === '\\n' ||\n                (tempNode.firstChild.textContent.indexOf('\\n') >= 0 && tempNode.firstChild.textContent.trim() === ''))) {\n                detach(tempNode.firstChild);\n            }\n            else {\n                resultElm.appendChild(tempNode.firstChild);\n                isPreviousInlineElem = false;\n            }\n        }\n        var imageElm = resultElm.querySelectorAll('img');\n        for (var i = 0; i < imageElm.length; i++) {\n            if (imageElm[i].classList.contains('e-rte-image-unsupported')) {\n                continue; // Should not add the class if the image is Broken.\n            }\n            if (!imageElm[i].classList.contains(classes.CLS_RTE_IMAGE)) {\n                imageElm[i].classList.add(classes.CLS_RTE_IMAGE);\n            }\n            if (!(imageElm[i].classList.contains(classes.CLS_IMGINLINE) ||\n                imageElm[i].classList.contains(classes.CLS_IMGBREAK)) &&\n                !(imageElm[i].classList.contains('e-imgleft') || imageElm[i].classList.contains('e-imgright') || imageElm[i].classList.contains('e-imgcenter'))) {\n                imageElm[i].classList.add(classes.CLS_IMGINLINE);\n            }\n        }\n    }\n    return resultElm.innerHTML;\n}\n/**\n * @param {IRichTextEditor} rteObj - specifies the rte object\n * @returns {string} - returns the value based on enter configuration.\n * @hidden\n */\nexport function getDefaultValue(rteObj) {\n    var currentVal;\n    if (rteObj.enterKey === 'DIV') {\n        currentVal = rteObj.enableHtmlEncode ? '&lt;div&gt;&lt;br/&gt;&lt;/div&gt;' : '<div><br/></div>';\n    }\n    else if (rteObj.enterKey === 'BR') {\n        currentVal = rteObj.enableHtmlEncode ? '&lt;br/&gt;' : '<br/>';\n    }\n    else {\n        currentVal = rteObj.enableHtmlEncode ? '&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' : '<p><br/></p>';\n    }\n    return currentVal;\n}\n/**\n * @param {string} value - specifies the value\n * @returns {boolean} - returns the boolean value\n * @hidden\n */\nexport function isEditableValueEmpty(value) {\n    return (value === '<p><br></p>' || value === '&lt;p&gt;&lt;br&gt;&lt;/p&gt;'\n        || value === '<div><br></div>' || value === '&lt;div&gt;&lt;br&gt;&lt;/div&gt;'\n        || value === '<br>' || value === '&lt;br&gt;'\n        || value === '') ? true : false;\n}\n/**\n * @param {string} value - specifies the string value\n * @returns {string} - returns the string\n * @hidden\n */\nexport function decode(value) {\n    return value.replace(/&amp;/g, '&').replace(/&amp;lt;/g, '<')\n        .replace(/&lt;/g, '<').replace(/&amp;gt;/g, '>')\n        .replace(/&gt;/g, '>').replace(/&nbsp;/g, ' ')\n        .replace(/&amp;nbsp;/g, ' ').replace(/&quot;/g, '');\n}\n/**\n * @param {string} value - specifies the string value\n * @param {IRichTextEditor} parent - specifies the rte\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function sanitizeHelper(value, parent) {\n    if (parent.enableHtmlSanitizer) {\n        var item = SanitizeHtmlHelper.beforeSanitize();\n        if (item.selectors.tags[2] && item.selectors.tags[2].indexOf('iframe') > -1) {\n            item.selectors.tags[2] = 'iframe:not(.e-rte-embed-url)';\n        }\n        var beforeEvent = {\n            cancel: false,\n            helper: null\n        };\n        extend(item, item, beforeEvent);\n        parent.trigger('beforeSanitizeHtml', item);\n        if (item.cancel && !isNOU(item.helper)) {\n            value = item.helper(value);\n        }\n        else if (!item.cancel) {\n            value = SanitizeHtmlHelper.serializeValue(item, value);\n        }\n    }\n    value = parseHelper(value);\n    return value;\n}\n/**\n * @param {string} value - specifies the string value\n * @returns {string} - returns the string value\n * @hidden\n */\nexport function parseHelper(value) {\n    var temp = createElement('div');\n    temp.innerHTML = value;\n    var fontElements = temp.querySelectorAll('font');\n    fontElements.forEach(function (font) {\n        var span = document.createElement('span');\n        var style = (font.getAttribute('style') || '').replace(/style:/gi, '').trim();\n        if (!isNOU(style) && style.trim() !== '' && !style.endsWith(';')) {\n            style += ';';\n        }\n        Array.from(font.attributes).forEach(function (attr) {\n            var name = attr.name.toLowerCase();\n            var value = attr.value;\n            switch (name) {\n                case 'size':\n                    style += \"font-size:\" + value + \";\";\n                    break;\n                case 'face':\n                    style += \"font-family:\" + value + \";\";\n                    break;\n                case 'bgcolor':\n                    style += \"background-color:\" + value + \";\";\n                    break;\n                case 'style':\n                    break;\n                default:\n                    style += name + \":\" + value + \";\";\n                    break;\n            }\n        });\n        if (!isNOU(style) && style.trim() !== '') {\n            style = style.replace(/;;+/g, ';');\n            span.setAttribute('style', style);\n        }\n        span.innerHTML = font.innerHTML;\n        if (!isNOU(font.parentNode)) {\n            font.parentNode.replaceChild(span, font);\n        }\n    });\n    var parsedValue = temp.innerHTML;\n    temp.remove();\n    return parsedValue;\n}\n/**\n * @param {string} dataUrl - specifies the string value\n * @returns {BaseToolbar} - returns the value\n * @hidden\n */\n//Converting the base64 url to blob\nexport function convertToBlob(dataUrl) {\n    var arr = dataUrl.split(',');\n    var mime = arr[0].match(/:(.*?);/)[1];\n    var bstr = atob(arr[1]);\n    var n = bstr.length;\n    var u8arr = new Uint8Array(n);\n    while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n    }\n    return new Blob([u8arr], { type: mime });\n}\n/**\n * @param {IRichTextEditor} self - specifies the rte\n * @param {string} localeItems - specifies the locale items\n * @param {IDropDownItemModel} item - specifies the dropdown item\n * @returns {string} - returns the value\n * @hidden\n */\nexport function getLocaleFontFormat(self, localeItems, item) {\n    for (var i = 0; localeItems.length > i; i++) {\n        if (localeItems[i].value === item.value || localeItems[i].value === item.subCommand) {\n            return self.localeObj.getConstant(localeItems[i].locale);\n        }\n    }\n    return item.text;\n}\n/**\n * @param {IRichTextEditor} self - specifies the rte\n * @returns {void}\n * @hidden\n */\nexport function updateDropDownFontFormatLocale(self) {\n    model.fontFamily.forEach(function (item, i) {\n        model.fontFamily[i].text = getLocaleFontFormat(self, fontNameLocale, model.fontFamily[i]);\n    });\n    model.formatItems.forEach(function (item, i) {\n        model.formatItems[i].text = getLocaleFontFormat(self, formatsLocale, model.formatItems[i]);\n    });\n    model.numberFormatList.forEach(function (item, i) {\n        model.numberFormatList[i].text = getLocaleFontFormat(self, numberFormatListLocale, model.numberFormatList[i]);\n    });\n    model.bulletFormatList.forEach(function (item, i) {\n        model.bulletFormatList[i].text = getLocaleFontFormat(self, bulletFormatListLocale, model.bulletFormatList[i]);\n    });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}