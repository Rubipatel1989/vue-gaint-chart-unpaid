{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.take.js\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nimport { EventHandler, Browser, select, isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { debounce, Touch } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nvar VirtualScroll = /** @class */function () {\n  function VirtualScroll(parent) {\n    var _this = this;\n    this.sentinelInfo = {\n      'up': {\n        check: function (rect, info) {\n          var top = rect.top - _this.containerElementRect.top;\n          info.entered = top >= 0;\n          return top + _this.parent.listItemHeight * _this.parent.virtualItemCount / 2 >= 0;\n        },\n        axis: 'Y'\n      },\n      'down': {\n        check: function (rect, info) {\n          var top = rect.bottom;\n          info.entered = rect.bottom <= _this.containerElementRect.bottom;\n          return top - _this.parent.listItemHeight * _this.parent.virtualItemCount / 2 <= _this.parent.listItemHeight * _this.parent.virtualItemCount / 2;\n        },\n        axis: 'Y'\n      }\n    };\n    this.parent = parent;\n    this.removeEventListener();\n    this.addEventListener();\n  }\n  VirtualScroll.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on('observe', this.observe, this);\n    this.parent.on('setGeneratedData', this.setGeneratedData, this);\n    this.parent.on('dataProcessAsync', this.dataProcessAsync, this);\n    this.parent.on('setCurrentViewDataAsync', this.setCurrentViewDataAsync, this);\n    this.parent.on('bindScrollEvent', this.bindScrollEvent, this);\n  };\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off('observe', this.observe);\n    this.parent.off('setGeneratedData', this.setGeneratedData);\n    this.parent.off('dataProcessAsync', this.dataProcessAsync);\n    this.parent.off('setCurrentViewDataAsync', this.setCurrentViewDataAsync);\n    this.parent.off('bindScrollEvent', this.bindScrollEvent);\n  };\n  VirtualScroll.prototype.bindScrollEvent = function (component) {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.component = component.component;\n    this.observe(function (scrollArgs) {\n      return _this.scrollListener(scrollArgs);\n    });\n  };\n  VirtualScroll.prototype.observe = function (callback) {\n    this.containerElementRect = this.parent.popupContentElement.getBoundingClientRect();\n    EventHandler.add(this.parent.popupContentElement, 'wheel mousedown', this.popupScrollHandler, this);\n    this.touchModule = new Touch(this.parent.popupContentElement, {\n      scroll: this.popupScrollHandler.bind(this)\n    });\n    EventHandler.add(this.parent.popupContentElement, 'scroll', this.virtualScrollHandler(callback), this);\n  };\n  VirtualScroll.prototype.getModuleName = function () {\n    return 'VirtualScroll';\n  };\n  VirtualScroll.prototype.popupScrollHandler = function () {\n    this.parent.isMouseScrollAction = true;\n    this.parent.isPreventScrollAction = false;\n  };\n  VirtualScroll.prototype.getPageQuery = function (query, virtualStartIndex, virtualEndIndex) {\n    if (virtualEndIndex !== 0 && !this.parent.allowFiltering && this.component !== 'autocomplete') {\n      query = query.skip(virtualStartIndex);\n    }\n    return query;\n  };\n  VirtualScroll.prototype.setGeneratedData = function (qStartIndex, recentlyGeneratedData) {\n    var loopIteration = 0;\n    var endIndex = this.parent.listData.length + this.parent.virtualItemStartIndex;\n    for (var i = this.parent.virtualItemStartIndex; i < endIndex; i++) {\n      var alreadyAddedData = this.parent.generatedDataObject[i];\n      if (!alreadyAddedData) {\n        if (recentlyGeneratedData !== null && this.parent.listData.slice(loopIteration, loopIteration + 1).length > 0) {\n          var slicedData = this.parent.listData.slice(loopIteration, loopIteration + 1);\n          if (slicedData.length > 0) {\n            // Safely assign slicedData to this.parent.generatedDataObject[i]\n            this.parent.generatedDataObject[i] = slicedData;\n          }\n        }\n      }\n      loopIteration++;\n    }\n  };\n  VirtualScroll.prototype.generateAndExecuteQueryAsync = function (query, virtualItemStartIndex, virtualItemEndIndex, isQueryGenerated) {\n    if (virtualItemStartIndex === void 0) {\n      virtualItemStartIndex = 0;\n    }\n    if (virtualItemEndIndex === void 0) {\n      virtualItemEndIndex = 0;\n    }\n    if (isQueryGenerated === void 0) {\n      isQueryGenerated = false;\n    }\n    var dataSource = this.parent.dataSource;\n    if (!isQueryGenerated) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      if (!isNullOrUndefined(this.parent.query)) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var newQuery = this.removeSkipAndTakeEvents(this.parent.query.clone());\n        query = this.getPageQuery(newQuery, virtualItemStartIndex, virtualItemEndIndex);\n      } else {\n        query = this.getPageQuery(query, virtualItemStartIndex, virtualItemEndIndex);\n      }\n    }\n    var tempCustomFilter = this.parent.isCustomFilter;\n    if (this.component === 'combobox') {\n      var totalData = 0;\n      if (this.parent.dataSource instanceof DataManager) {\n        totalData = this.parent.dataSource.dataSource.json.length;\n      } else if (this.parent.dataSource && this.parent.dataSource.length > 0) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        totalData = this.parent.dataSource.length;\n      }\n      if (totalData > 0) {\n        this.parent.isCustomFilter = totalData === this.parent.totalItemCount && this.parent.queryString !== this.parent.typedString ? true : this.parent.isCustomFilter;\n      }\n    }\n    this.parent.resetList(dataSource, this.parent.fields, query);\n    this.parent.isCustomFilter = tempCustomFilter;\n  };\n  VirtualScroll.prototype.removeSkipAndTakeEvents = function (query) {\n    query.queries = query.queries.filter(function (event) {\n      return event.fn !== 'onSkip' && event.fn !== 'onTake';\n    });\n    return query;\n  };\n  VirtualScroll.prototype.setCurrentViewDataAsync = function (component) {\n    // eslint-disable-next-line\n    var currentData = [];\n    var isResetListCalled = false;\n    var isListUpdated = true;\n    if (isNullOrUndefined(this.component)) {\n      this.component = component.component;\n    }\n    var endIndex = this.parent.viewPortInfo.endIndex;\n    if (this.component === 'multiselect' && this.parent.mode === 'CheckBox' && this.parent.value && Array.isArray(this.parent.value) && this.parent.value.length > 0 && this.parent.enableSelectionOrder && this.parent.targetElement().trim() === '') {\n      if (this.parent.viewPortInfo.startIndex < this.parent.value.length) {\n        endIndex = this.parent.viewPortInfo.endIndex - this.parent.value.length;\n        if (this.parent.viewPortInfo.startIndex === 0) {\n          this.parent.updateVirtualReOrderList(true);\n          if (this.parent.value.length < this.parent.itemCount) {\n            var oldUlElement = this.parent.list.querySelector('.e-list-parent' + ':not(.e-reorder)');\n            if (oldUlElement) {\n              this.parent.list.querySelector('.e-virtual-ddl-content').removeChild(oldUlElement);\n            }\n            var query = this.parent.getForQuery(this.parent.value).clone();\n            query = query.skip(0).take(this.parent.itemCount - (this.parent.value.length - this.parent.viewPortInfo.startIndex));\n            this.parent.appendUncheckList = true;\n            this.parent.setCurrentView = false;\n            this.parent.resetList(this.parent.dataSource, this.parent.fields, query);\n            isListUpdated = false;\n            this.parent.appendUncheckList = this.parent.dataSource instanceof DataManager ? this.parent.appendUncheckList : false;\n            isListUpdated = false;\n          } else {\n            var oldUlElement = this.parent.list.querySelector('.e-list-parent' + ':not(.e-reorder)');\n            if (oldUlElement) {\n              this.parent.list.querySelector('.e-virtual-ddl-content').removeChild(oldUlElement);\n            }\n          }\n          isListUpdated = false;\n        } else if (this.parent.viewPortInfo.startIndex !== 0) {\n          this.parent.updateVirtualReOrderList(true);\n          var oldUlElement = this.parent.list.querySelector('.e-list-parent' + ':not(.e-reorder)');\n          if (oldUlElement) {\n            this.parent.list.querySelector('.e-virtual-ddl-content').removeChild(oldUlElement);\n          }\n          isListUpdated = false;\n        }\n        if (this.parent.viewPortInfo.startIndex !== 0 && this.parent.viewPortInfo.startIndex - this.parent.value.length !== this.parent.itemCount && this.parent.viewPortInfo.startIndex + this.parent.itemCount > this.parent.value.length) {\n          var query = this.parent.getForQuery(this.parent.value).clone();\n          query = query.skip(0).take(this.parent.itemCount - (this.parent.value.length - this.parent.viewPortInfo.startIndex));\n          this.parent.appendUncheckList = true;\n          this.parent.setCurrentView = false;\n          this.parent.resetList(this.parent.dataSource, this.parent.fields, query);\n          isListUpdated = false;\n          this.parent.appendUncheckList = this.parent.dataSource instanceof DataManager ? this.parent.appendUncheckList : false;\n        }\n      } else {\n        var reOrderList = this.parent.list.querySelectorAll('.e-reorder')[0];\n        if (this.parent.list.querySelector('.e-virtual-ddl-content') && reOrderList) {\n          this.parent.list.querySelector('.e-virtual-ddl-content').removeChild(reOrderList);\n        }\n        var query = this.parent.getForQuery(this.parent.value).clone(); // Assuming query is of type any\n        var skipvalue = this.parent.viewPortInfo.startIndex - this.parent.value.length >= 0 ? this.parent.viewPortInfo.startIndex - this.parent.value.length : 0;\n        query = query.skip(skipvalue);\n        this.parent.setCurrentView = false;\n        this.parent.resetList(this.parent.dataSource, this.parent.fields, query);\n        isListUpdated = false;\n      }\n      this.parent.totalItemsCount();\n    }\n    if (isListUpdated) {\n      for (var i = this.parent.viewPortInfo.startIndex; i < endIndex; i++) {\n        var index = i;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var alreadyAddedData = this.parent.generatedDataObject[index];\n        if (this.component === 'multiselect' && this.parent.hideSelectedItem) {\n          if (alreadyAddedData) {\n            var value = getValue(this.parent.fields.value, alreadyAddedData[0]);\n            if (this.parent.value && value !== null && Array.isArray(this.parent.value) && this.parent.value.length > 0 && this.parent.value.indexOf(value) < 0) {\n              var query = this.parent.getForQuery(this.parent.value).clone();\n              if (this.parent.viewPortInfo.endIndex === this.parent.totalItemCount + this.parent.value.length && this.parent.hideSelectedItem) {\n                query = query.skip(this.parent.totalItemCount - this.parent.itemCount);\n              } else {\n                query = query.skip(this.parent.viewPortInfo.startIndex);\n              }\n              this.parent.setCurrentView = false;\n              this.parent.resetList(this.parent.dataSource, this.parent.fields, query);\n              isResetListCalled = true;\n              break;\n            } else if (this.parent.value === null || this.parent.value && this.parent.value.length === 0) {\n              currentData.push(alreadyAddedData[0]);\n            }\n          }\n          if (index === endIndex - 1) {\n            if (currentData.length !== this.parent.itemCount) {\n              if (this.parent.hideSelectedItem) {\n                var query = this.parent.value && this.parent.value.length > 0 ? this.parent.getForQuery(this.parent.value).clone() : new Query();\n                if (this.parent.viewPortInfo.endIndex === this.parent.totalItemCount + this.parent.value.length && this.parent.hideSelectedItem) {\n                  query = query.skip(this.parent.totalItemCount - this.parent.itemCount);\n                } else {\n                  query = query.skip(this.parent.viewPortInfo.startIndex);\n                }\n                this.parent.setCurrentView = false;\n                this.parent.resetList(this.parent.dataSource, this.parent.fields, query);\n                isResetListCalled = true;\n              }\n            }\n          }\n        } else {\n          if (alreadyAddedData) {\n            currentData.push(alreadyAddedData[0]);\n          }\n        }\n        this.parent.setCurrentView = false;\n      }\n    }\n    if (!isResetListCalled && isListUpdated) {\n      if (this.component === 'multiselect' && this.parent.allowCustomValue && this.parent.viewPortInfo.startIndex === 0 && this.parent.virtualCustomData) {\n        currentData.splice(0, 0, this.parent.virtualCustomData);\n      }\n      var totalData = [];\n      if (this.component === 'multiselect' && this.parent.allowCustomValue && this.parent.viewPortInfo.endIndex === this.parent.totalItemCount) {\n        if (this.parent.virtualCustomSelectData && this.parent.virtualCustomSelectData.length > 0) {\n          totalData = currentData.concat(this.parent.virtualCustomSelectData);\n          currentData = totalData;\n        }\n      }\n      this.parent.renderItems(currentData, this.parent.fields, this.component === 'multiselect' && this.parent.mode === 'CheckBox');\n    }\n    if (this.component === 'multiselect') {\n      this.parent.updatevirtualizationList();\n    }\n    this.parent.getSkeletonCount();\n    this.parent.skeletonCount = this.parent.totalItemCount !== 0 && this.parent.totalItemCount < this.parent.itemCount * 2 && (!(this.parent.dataSource instanceof DataManager) || this.parent.dataSource instanceof DataManager && this.parent.totalItemCount <= this.parent.itemCount) ? 0 : this.parent.skeletonCount;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var virtualTrackElement = this.parent.list.getElementsByClassName('e-virtual-ddl')[0];\n    if (virtualTrackElement) {\n      virtualTrackElement.style = this.parent.GetVirtualTrackHeight();\n    } else if (!virtualTrackElement && this.parent.skeletonCount > 0 && this.parent.popupWrapper) {\n      var virualElement = this.parent.createElement('div', {\n        id: this.parent.element.id + '_popup',\n        className: 'e-virtual-ddl',\n        styles: this.parent.GetVirtualTrackHeight()\n      });\n      this.parent.popupWrapper.querySelector('.e-dropdownbase').appendChild(virualElement);\n    }\n    this.parent.UpdateSkeleton();\n    this.parent.liCollections = this.parent.list.querySelectorAll('.e-list-item');\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var virtualContentElement = this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0];\n    if (virtualContentElement) {\n      virtualContentElement.style = this.parent.getTransformValues();\n    }\n    if (this.parent.fields.groupBy) {\n      this.parent.scrollStop();\n    }\n    if (this.parent.keyCode === 40 && this.parent.isScrollChanged && this.parent.hideSelectedItem && !isNullOrUndefined(this.parent.currentFocuedListElement)) {\n      var currentSelectElem = this.parent.getElementByValue(this.parent.currentFocuedListElement.getAttribute('data-value'));\n      this.parent.addListFocus(currentSelectElem);\n      this.parent.isScrollChanged = false;\n    }\n  };\n  VirtualScroll.prototype.generateQueryAndSetQueryIndexAsync = function (query, isPopupOpen) {\n    var isStartIndexInitialised = false;\n    var queryStartIndex = 0;\n    var queryEndIndex = 0;\n    var vEndIndex = this.parent.viewPortInfo.endIndex;\n    if (!isPopupOpen && vEndIndex !== 0) {\n      for (var i = this.parent.viewPortInfo.startIndex; i <= vEndIndex; i++) {\n        if (!(i in this.parent.generatedDataObject)) {\n          if (!isStartIndexInitialised) {\n            isStartIndexInitialised = true;\n            queryStartIndex = queryEndIndex = i;\n          } else {\n            queryEndIndex = i === vEndIndex ? i : i + 1;\n          }\n        }\n      }\n    }\n    if (isStartIndexInitialised && !(this.parent.totalItemCount === queryStartIndex && this.parent.totalItemCount === queryEndIndex)) {\n      this.parent.virtualItemStartIndex = queryStartIndex;\n      this.parent.virtualItemEndIndex = queryEndIndex;\n      this.parent.setCurrentView = true;\n      this.generateAndExecuteQueryAsync(query, queryStartIndex, queryEndIndex);\n      if (this.component === 'multiselect' && this.parent.hideSelectedItem && this.parent.value && Array.isArray(this.parent.value) && this.parent.value.length > 0) {\n        this.parent.totalItemsCount();\n      }\n      if (this.component === 'multiselect' && this.parent.virtualItemStartIndex === this.parent.virtualItemEndIndex) {\n        this.parent.virtualItemStartIndex = this.parent.viewPortInfo.startIndex;\n        this.parent.virtualItemEndIndex = this.parent.viewPortInfo.endIndex;\n      }\n    }\n    if (!(this.parent.dataSource instanceof DataManager) || this.parent.dataSource instanceof DataManager && !this.parent.isRequesting) {\n      this.setCurrentViewDataAsync();\n    }\n  };\n  VirtualScroll.prototype.dataProcessAsync = function (isOpenPopup) {\n    this.parent.selectedValueInfo = null;\n    this.parent.virtualItemStartIndex = this.parent.viewPortInfo.startIndex;\n    this.parent.virtualItemEndIndex = this.parent.viewPortInfo.endIndex;\n    this.generateQueryAndSetQueryIndexAsync(new Query(), isOpenPopup);\n  };\n  VirtualScroll.prototype.virtualScrollRefreshAsync = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.parent.isCustomFilter = !(this.parent.isTyped || this.component === 'combobox' && this.parent.allowFiltering && this.parent.queryString !== this.parent.typedString || !isNullOrUndefined(this.parent.filterInput) && !isNullOrUndefined(this.parent.filterInput.value) && this.parent.filterInput.value !== '' && this.component !== 'combobox') && !(this.component === 'autocomplete' && this.parent.value != null) || this.parent.isCustomFilter;\n            if (this.parent.allowFiltering || this.component === 'autocomplete') {\n              if (!isNullOrUndefined(this.parent.typedString) && !(this.component === 'combobox' && !isNullOrUndefined(this.parent.typedString) && this.parent.allowFiltering)) {\n                if (this.parent.viewPortInfo.endIndex >= this.parent.dataCount) {\n                  this.parent.viewPortInfo.endIndex = this.parent.dataCount;\n                }\n                if (this.parent.viewPortInfo.startIndex >= this.parent.dataCount) {\n                  this.parent.viewPortInfo.startIndex = this.parent.dataCount - this.parent.itemCount;\n                }\n              } else {\n                this.parent.getSkeletonCount(true);\n                if (this.component === 'combobox') {\n                  this.parent.skeletonCount = this.parent.totalItemCount !== 0 && this.parent.totalItemCount < this.parent.itemCount * 2 && (!(this.parent.dataSource instanceof DataManager) || this.parent.dataSource instanceof DataManager && this.parent.totalItemCount <= this.parent.itemCount) ? 0 : this.parent.skeletonCount;\n                }\n              }\n            }\n            return [4 /*yield*/, this.dataProcessAsync()];\n          case 1:\n            _a.sent();\n            if (this.parent.keyboardEvent != null && (!(this.parent.dataSource instanceof DataManager) || this.parent.dataSource instanceof DataManager && !this.parent.isRequesting)) {\n              this.parent.handleVirtualKeyboardActions(this.parent.keyboardEvent, this.parent.pageCount);\n            }\n            if (!this.parent.customFilterQuery) {\n              this.parent.isCustomFilter = false;\n            }\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  VirtualScroll.prototype.scrollListener = function (scrollArgs) {\n    var _this = this;\n    if (!this.parent.isPreventScrollAction && !this.parent.isVirtualTrackHeight) {\n      this.parent.preventSetCurrentData = false;\n      var info = scrollArgs.sentinel;\n      var pStartIndex = this.parent.previousStartIndex;\n      this.parent.viewPortInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset, false);\n      this.parent.isUpwardScrolling = false;\n      if (this.parent.previousStartIndex !== pStartIndex && !this.parent.isKeyBoardAction) {\n        this.parent.isScrollActionTriggered = false;\n        this.parent.currentPageNumber = this.parent.viewPortInfo.currentPageNumber;\n        this.parent.virtualListInfo = __assign({}, this.parent.viewPortInfo);\n        this.parent.isPreventKeyAction = true;\n        this.parent.isVirtualScrolling = true;\n        setTimeout(function () {\n          _this.parent.pageCount = _this.parent.getPageCount();\n          _this.virtualScrollRefreshAsync().then(function () {\n            if (_this.parent.popupObj) {\n              _this.parent.list = _this.parent.popupObj.element.querySelector('.' + 'e-content') || select('.' + 'e-content');\n              _this.parent.updateSelectionList();\n              _this.parent.liCollections = _this.parent.getItems();\n            }\n            _this.parent.isKeyBoardAction = false;\n            _this.parent.isVirtualScrolling = false;\n            _this.parent.isPreventKeyAction = false;\n          });\n        }, 5);\n      } else if (this.parent.isScrollActionTriggered) {\n        this.parent.isPreventKeyAction = false;\n        this.parent.isScrollActionTriggered = false;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.parent.getTransformValues();\n      }\n      this.parent.previousInfo = this.parent.viewPortInfo;\n    }\n  };\n  VirtualScroll.prototype.getInfoFromView = function (direction, info, e, isscrollAction) {\n    var infoType = {\n      direction: direction,\n      sentinelInfo: info,\n      offsets: e,\n      startIndex: this.parent.previousStartIndex,\n      endIndex: this.parent.previousEndIndex\n    };\n    var vHeight = this.parent.popupContentElement.getBoundingClientRect().height;\n    //Row Start and End Index calculation\n    var rowHeight = this.parent.listItemHeight;\n    var exactTopIndex = e.top / rowHeight;\n    var infoViewIndices = vHeight / rowHeight;\n    var exactEndIndex = exactTopIndex + infoViewIndices;\n    var pageSizeBy4 = this.parent.virtualItemCount / 4;\n    var totalItemCount = this.parent.totalItemCount;\n    if (infoType.direction === 'down') {\n      var sIndex = Math.round(exactEndIndex) - Math.round(pageSizeBy4);\n      if (isNullOrUndefined(infoType.startIndex) || exactEndIndex > infoType.startIndex + Math.round(this.parent.virtualItemCount / 2 + pageSizeBy4) && infoType.endIndex !== totalItemCount) {\n        infoType.startIndex = sIndex >= 0 ? Math.round(sIndex) : 0;\n        infoType.startIndex = infoType.startIndex > exactTopIndex ? Math.floor(exactTopIndex) : infoType.startIndex;\n        var eIndex = infoType.startIndex + this.parent.virtualItemCount;\n        infoType.startIndex = eIndex < exactEndIndex ? Math.ceil(exactEndIndex) - this.parent.virtualItemCount : infoType.startIndex;\n        infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n        infoType.startIndex = eIndex >= totalItemCount ? infoType.endIndex - this.parent.virtualItemCount > 0 ? infoType.endIndex - this.parent.virtualItemCount : 0 : infoType.startIndex;\n        infoType.currentPageNumber = Math.ceil(infoType.endIndex / this.parent.virtualItemCount);\n      }\n    } else if (infoType.direction === 'up') {\n      if (infoType.startIndex && infoType.endIndex || Math.ceil(exactTopIndex) > this.parent.previousStartIndex) {\n        var loadAtIndex = Math.round((infoType.startIndex * rowHeight + pageSizeBy4 * rowHeight) / rowHeight);\n        if (exactTopIndex < loadAtIndex || Math.ceil(exactTopIndex) > this.parent.previousStartIndex) {\n          var idxAddedToExactTop = pageSizeBy4 > infoViewIndices ? pageSizeBy4 : infoViewIndices + infoViewIndices / 4;\n          var eIndex = Math.round(exactTopIndex + idxAddedToExactTop);\n          infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n          var sIndex = infoType.endIndex - this.parent.virtualItemCount;\n          infoType.startIndex = sIndex > 0 ? sIndex : 0;\n          infoType.endIndex = sIndex < 0 ? this.parent.virtualItemCount : infoType.endIndex;\n          infoType.currentPageNumber = Math.ceil(infoType.startIndex / this.parent.virtualItemCount);\n        }\n      }\n    }\n    if (!isscrollAction) {\n      this.parent.previousStartIndex = infoType.startIndex;\n      this.parent.startIndex = infoType.startIndex;\n      this.parent.previousEndIndex = infoType.endIndex;\n    } else {\n      this.parent.scrollPreStartIndex = infoType.startIndex;\n    }\n    return infoType;\n  };\n  VirtualScroll.prototype.virtualScrollHandler = function (callback) {\n    var _this = this;\n    var delay = Browser.info.name === 'chrome' ? 200 : 100;\n    var prevTop = 0;\n    var debounced100 = debounce(callback, delay);\n    var debounced50 = debounce(callback, 50);\n    return function (e) {\n      var top = e.target.scrollTop;\n      var left = e.target.scrollLeft;\n      var direction = prevTop < top && !_this.parent.isUpwardScrolling ? 'down' : 'up';\n      prevTop = top;\n      var current = _this.sentinelInfo[direction];\n      var pstartIndex = _this.parent.scrollPreStartIndex;\n      var scrollOffsetargs = {\n        top: top,\n        left: left\n      };\n      if (_this.parent.list && _this.parent.list.querySelectorAll('.e-virtual-list').length > 0) {\n        _this.getInfoFromView(direction, current, scrollOffsetargs, true);\n        if (_this.parent.scrollPreStartIndex !== pstartIndex && !_this.parent.isPreventScrollAction) {\n          _this.parent.isScrollActionTriggered = true;\n          var virtualPoup = _this.parent.list.querySelector('.e-virtual-ddl-content');\n          virtualPoup.style.transform = 'translate(0px,' + top + 'px)';\n        }\n      }\n      var debounceFunction = debounced100;\n      if (current.axis === 'X') {\n        debounceFunction = debounced50;\n      }\n      debounceFunction({\n        direction: direction,\n        sentinel: current,\n        offset: {\n          top: top,\n          left: left\n        },\n        focusElement: document.activeElement\n      });\n    };\n  };\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n  return VirtualScroll;\n}();\nexport { VirtualScroll };","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","EventHandler","Browser","select","isNullOrUndefined","getValue","debounce","Touch","DataManager","Query","VirtualScroll","parent","_this","sentinelInfo","check","rect","info","top","containerElementRect","entered","listItemHeight","virtualItemCount","axis","bottom","removeEventListener","addEventListener","isDestroyed","on","observe","setGeneratedData","dataProcessAsync","setCurrentViewDataAsync","bindScrollEvent","off","component","scrollArgs","scrollListener","callback","popupContentElement","getBoundingClientRect","add","popupScrollHandler","touchModule","scroll","bind","virtualScrollHandler","getModuleName","isMouseScrollAction","isPreventScrollAction","getPageQuery","query","virtualStartIndex","virtualEndIndex","allowFiltering","skip","qStartIndex","recentlyGeneratedData","loopIteration","endIndex","listData","virtualItemStartIndex","alreadyAddedData","generatedDataObject","slice","slicedData","generateAndExecuteQueryAsync","virtualItemEndIndex","isQueryGenerated","dataSource","newQuery","removeSkipAndTakeEvents","clone","tempCustomFilter","isCustomFilter","totalData","json","totalItemCount","queryString","typedString","resetList","fields","queries","filter","event","fn","currentData","isResetListCalled","isListUpdated","viewPortInfo","mode","Array","isArray","enableSelectionOrder","targetElement","trim","startIndex","updateVirtualReOrderList","itemCount","oldUlElement","list","querySelector","removeChild","getForQuery","take","appendUncheckList","setCurrentView","reOrderList","querySelectorAll","skipvalue","totalItemsCount","index","hideSelectedItem","indexOf","allowCustomValue","virtualCustomData","splice","virtualCustomSelectData","concat","renderItems","updatevirtualizationList","getSkeletonCount","skeletonCount","virtualTrackElement","getElementsByClassName","style","GetVirtualTrackHeight","popupWrapper","virualElement","createElement","id","element","className","styles","appendChild","UpdateSkeleton","liCollections","virtualContentElement","getTransformValues","groupBy","scrollStop","keyCode","isScrollChanged","currentFocuedListElement","currentSelectElem","getElementByValue","getAttribute","addListFocus","generateQueryAndSetQueryIndexAsync","isPopupOpen","isStartIndexInitialised","queryStartIndex","queryEndIndex","vEndIndex","isRequesting","isOpenPopup","selectedValueInfo","virtualScrollRefreshAsync","_a","isTyped","filterInput","dataCount","keyboardEvent","handleVirtualKeyboardActions","pageCount","customFilterQuery","isVirtualTrackHeight","preventSetCurrentData","sentinel","pStartIndex","previousStartIndex","getInfoFromView","direction","offset","isUpwardScrolling","isKeyBoardAction","isScrollActionTriggered","currentPageNumber","virtualListInfo","isPreventKeyAction","isVirtualScrolling","setTimeout","getPageCount","popupObj","updateSelectionList","getItems","previousInfo","isscrollAction","infoType","offsets","previousEndIndex","vHeight","height","rowHeight","exactTopIndex","infoViewIndices","exactEndIndex","pageSizeBy4","sIndex","Math","round","floor","eIndex","ceil","loadAtIndex","idxAddedToExactTop","scrollPreStartIndex","delay","name","prevTop","debounced100","debounced50","target","scrollTop","left","scrollLeft","current","pstartIndex","scrollOffsetargs","virtualPoup","transform","debounceFunction","focusElement","document","activeElement","destroy"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-dropdowns/src/common/virtual-scroll.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { EventHandler, Browser, select, isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { debounce, Touch } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        var _this = this;\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerElementRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.parent.listItemHeight * _this.parent.virtualItemCount / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerElementRect.bottom;\n                    return top - (_this.parent.listItemHeight * _this.parent.virtualItemCount / 2)\n                        <= _this.parent.listItemHeight * _this.parent.virtualItemCount / 2;\n                }, axis: 'Y'\n            }\n        };\n        this.parent = parent;\n        this.removeEventListener();\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('observe', this.observe, this);\n        this.parent.on('setGeneratedData', this.setGeneratedData, this);\n        this.parent.on('dataProcessAsync', this.dataProcessAsync, this);\n        this.parent.on('setCurrentViewDataAsync', this.setCurrentViewDataAsync, this);\n        this.parent.on('bindScrollEvent', this.bindScrollEvent, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('observe', this.observe);\n        this.parent.off('setGeneratedData', this.setGeneratedData);\n        this.parent.off('dataProcessAsync', this.dataProcessAsync);\n        this.parent.off('setCurrentViewDataAsync', this.setCurrentViewDataAsync);\n        this.parent.off('bindScrollEvent', this.bindScrollEvent);\n    };\n    VirtualScroll.prototype.bindScrollEvent = function (component) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.component = component.component;\n        this.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); });\n    };\n    VirtualScroll.prototype.observe = function (callback) {\n        this.containerElementRect = this.parent.popupContentElement.getBoundingClientRect();\n        EventHandler.add(this.parent.popupContentElement, 'wheel mousedown', this.popupScrollHandler, this);\n        this.touchModule = new Touch(this.parent.popupContentElement, {\n            scroll: this.popupScrollHandler.bind(this)\n        });\n        EventHandler.add(this.parent.popupContentElement, 'scroll', this.virtualScrollHandler(callback), this);\n    };\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'VirtualScroll';\n    };\n    VirtualScroll.prototype.popupScrollHandler = function () {\n        this.parent.isMouseScrollAction = true;\n        this.parent.isPreventScrollAction = false;\n    };\n    VirtualScroll.prototype.getPageQuery = function (query, virtualStartIndex, virtualEndIndex) {\n        if (virtualEndIndex !== 0 && !this.parent.allowFiltering && this.component !== 'autocomplete') {\n            query = query.skip(virtualStartIndex);\n        }\n        return query;\n    };\n    VirtualScroll.prototype.setGeneratedData = function (qStartIndex, recentlyGeneratedData) {\n        var loopIteration = 0;\n        var endIndex = this.parent.listData.length + this.parent.virtualItemStartIndex;\n        for (var i = this.parent.virtualItemStartIndex; i < endIndex; i++) {\n            var alreadyAddedData = this.parent.generatedDataObject[i];\n            if (!alreadyAddedData) {\n                if (recentlyGeneratedData !== null && this.parent.listData.slice(loopIteration, loopIteration + 1).length > 0) {\n                    var slicedData = this.parent.listData.slice(loopIteration, loopIteration + 1);\n                    if (slicedData.length > 0) {\n                        // Safely assign slicedData to this.parent.generatedDataObject[i]\n                        this.parent.generatedDataObject[i] = slicedData;\n                    }\n                }\n            }\n            loopIteration++;\n        }\n    };\n    VirtualScroll.prototype.generateAndExecuteQueryAsync = function (query, virtualItemStartIndex, virtualItemEndIndex, isQueryGenerated) {\n        if (virtualItemStartIndex === void 0) { virtualItemStartIndex = 0; }\n        if (virtualItemEndIndex === void 0) { virtualItemEndIndex = 0; }\n        if (isQueryGenerated === void 0) { isQueryGenerated = false; }\n        var dataSource = this.parent.dataSource;\n        if (!isQueryGenerated) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (!isNullOrUndefined(this.parent.query)) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var newQuery = this.removeSkipAndTakeEvents(this.parent.query.clone());\n                query = this.getPageQuery(newQuery, virtualItemStartIndex, virtualItemEndIndex);\n            }\n            else {\n                query = this.getPageQuery(query, virtualItemStartIndex, virtualItemEndIndex);\n            }\n        }\n        var tempCustomFilter = this.parent.isCustomFilter;\n        if (this.component === 'combobox') {\n            var totalData = 0;\n            if (this.parent.dataSource instanceof DataManager) {\n                totalData = this.parent.dataSource.dataSource.json.length;\n            }\n            else if (this.parent.dataSource && this.parent.dataSource.length > 0) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                totalData = this.parent.dataSource.length;\n            }\n            if (totalData > 0) {\n                this.parent.isCustomFilter = (totalData === this.parent.totalItemCount &&\n                    this.parent.queryString !== this.parent.typedString) ? true : this.parent.isCustomFilter;\n            }\n        }\n        this.parent.resetList(dataSource, this.parent.fields, query);\n        this.parent.isCustomFilter = tempCustomFilter;\n    };\n    VirtualScroll.prototype.removeSkipAndTakeEvents = function (query) {\n        query.queries = query.queries.filter(function (event) {\n            return event.fn !== 'onSkip' && event.fn !== 'onTake';\n        });\n        return query;\n    };\n    VirtualScroll.prototype.setCurrentViewDataAsync = function (component) {\n        // eslint-disable-next-line\n        var currentData = [];\n        var isResetListCalled = false;\n        var isListUpdated = true;\n        if (isNullOrUndefined(this.component)) {\n            this.component = component.component;\n        }\n        var endIndex = this.parent.viewPortInfo.endIndex;\n        if (this.component === 'multiselect' && this.parent.mode === 'CheckBox' && this.parent.value && Array.isArray(this.parent.value) && this.parent.value.length > 0 && this.parent.enableSelectionOrder && this.parent.targetElement().trim() === '') {\n            if (this.parent.viewPortInfo.startIndex < this.parent.value.length) {\n                endIndex = this.parent.viewPortInfo.endIndex - this.parent.value.length;\n                if (this.parent.viewPortInfo.startIndex === 0) {\n                    this.parent.updateVirtualReOrderList(true);\n                    if (this.parent.value.length < this.parent.itemCount) {\n                        var oldUlElement = this.parent.list.querySelector('.e-list-parent' + ':not(.e-reorder)');\n                        if (oldUlElement) {\n                            this.parent.list.querySelector('.e-virtual-ddl-content').removeChild(oldUlElement);\n                        }\n                        var query = this.parent.getForQuery(this.parent.value).clone();\n                        query = query.skip(0)\n                            .take(this.parent.itemCount - (this.parent.value.length - this.parent.viewPortInfo.startIndex));\n                        this.parent.appendUncheckList = true;\n                        this.parent.setCurrentView = false;\n                        this.parent.resetList(this.parent.dataSource, this.parent.fields, query);\n                        isListUpdated = false;\n                        this.parent.appendUncheckList = this.parent.dataSource instanceof DataManager ?\n                            this.parent.appendUncheckList : false;\n                        isListUpdated = false;\n                    }\n                    else {\n                        var oldUlElement = this.parent.list.querySelector('.e-list-parent' + ':not(.e-reorder)');\n                        if (oldUlElement) {\n                            this.parent.list.querySelector('.e-virtual-ddl-content').removeChild(oldUlElement);\n                        }\n                    }\n                    isListUpdated = false;\n                }\n                else if (this.parent.viewPortInfo.startIndex !== 0) {\n                    this.parent.updateVirtualReOrderList(true);\n                    var oldUlElement = this.parent.list.querySelector('.e-list-parent' + ':not(.e-reorder)');\n                    if (oldUlElement) {\n                        this.parent.list.querySelector('.e-virtual-ddl-content').removeChild(oldUlElement);\n                    }\n                    isListUpdated = false;\n                }\n                if (this.parent.viewPortInfo.startIndex !== 0 &&\n                    this.parent.viewPortInfo.startIndex - this.parent.value.length !== this.parent.itemCount &&\n                    (this.parent.viewPortInfo.startIndex + this.parent.itemCount > this.parent.value.length)) {\n                    var query = this.parent.getForQuery(this.parent.value).clone();\n                    query = query.skip(0).take(this.parent.itemCount - (this.parent.value.length - this.parent.viewPortInfo.startIndex));\n                    this.parent.appendUncheckList = true;\n                    this.parent.setCurrentView = false;\n                    this.parent.resetList(this.parent.dataSource, this.parent.fields, query);\n                    isListUpdated = false;\n                    this.parent.appendUncheckList = this.parent.dataSource instanceof DataManager ? this.parent.appendUncheckList : false;\n                }\n            }\n            else {\n                var reOrderList = this.parent.list.querySelectorAll('.e-reorder')[0];\n                if (this.parent.list.querySelector('.e-virtual-ddl-content') && reOrderList) {\n                    this.parent.list.querySelector('.e-virtual-ddl-content').removeChild(reOrderList);\n                }\n                var query = this.parent.getForQuery(this.parent.value).clone(); // Assuming query is of type any\n                var skipvalue = this.parent.viewPortInfo.startIndex - this.parent.value.length >= 0\n                    ? this.parent.viewPortInfo.startIndex - this.parent.value.length\n                    : 0;\n                query = query.skip(skipvalue);\n                this.parent.setCurrentView = false;\n                this.parent.resetList(this.parent.dataSource, this.parent.fields, query);\n                isListUpdated = false;\n            }\n            this.parent.totalItemsCount();\n        }\n        if (isListUpdated) {\n            for (var i = this.parent.viewPortInfo.startIndex; i < endIndex; i++) {\n                var index = i;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var alreadyAddedData = this.parent.generatedDataObject[index];\n                if (this.component === 'multiselect' && this.parent.hideSelectedItem) {\n                    if (alreadyAddedData) {\n                        var value = getValue(this.parent.fields.value, alreadyAddedData[0]);\n                        if (this.parent.value &&\n                            value !== null &&\n                            Array.isArray(this.parent.value) &&\n                            this.parent.value.length > 0 &&\n                            this.parent.value.indexOf(value) < 0) {\n                            var query = this.parent.getForQuery(this.parent.value).clone();\n                            if (this.parent.viewPortInfo.endIndex === this.parent.totalItemCount + this.parent.value.length &&\n                                this.parent.hideSelectedItem) {\n                                query = query.skip(this.parent.totalItemCount - this.parent.itemCount);\n                            }\n                            else {\n                                query = query.skip(this.parent.viewPortInfo.startIndex);\n                            }\n                            this.parent.setCurrentView = false;\n                            this.parent.resetList(this.parent.dataSource, this.parent.fields, query);\n                            isResetListCalled = true;\n                            break;\n                        }\n                        else if (this.parent.value === null || (this.parent.value && this.parent.value.length === 0)) {\n                            currentData.push(alreadyAddedData[0]);\n                        }\n                    }\n                    if (index === endIndex - 1) {\n                        if (currentData.length !== this.parent.itemCount) {\n                            if (this.parent.hideSelectedItem) {\n                                var query = this.parent.value && this.parent.value.length > 0 ?\n                                    this.parent.getForQuery(this.parent.value).clone() : new Query;\n                                if (this.parent.viewPortInfo.endIndex === this.parent.totalItemCount + this.parent.value.length &&\n                                    this.parent.hideSelectedItem) {\n                                    query = query.skip(this.parent.totalItemCount - this.parent.itemCount);\n                                }\n                                else {\n                                    query = query.skip(this.parent.viewPortInfo.startIndex);\n                                }\n                                this.parent.setCurrentView = false;\n                                this.parent.resetList(this.parent.dataSource, this.parent.fields, query);\n                                isResetListCalled = true;\n                            }\n                        }\n                    }\n                }\n                else {\n                    if (alreadyAddedData) {\n                        currentData.push(alreadyAddedData[0]);\n                    }\n                }\n                this.parent.setCurrentView = false;\n            }\n        }\n        if (!isResetListCalled && isListUpdated) {\n            if (this.component === 'multiselect' && this.parent.allowCustomValue && this.parent.viewPortInfo.startIndex === 0 && this.parent.virtualCustomData) {\n                currentData.splice(0, 0, this.parent.virtualCustomData);\n            }\n            var totalData = [];\n            if (this.component === 'multiselect' && this.parent.allowCustomValue && this.parent.viewPortInfo.endIndex === this.parent.totalItemCount) {\n                if (this.parent.virtualCustomSelectData && this.parent.virtualCustomSelectData.length > 0) {\n                    totalData = currentData.concat(this.parent.virtualCustomSelectData);\n                    currentData = totalData;\n                }\n            }\n            this.parent.renderItems(currentData, this.parent.fields, this.component === 'multiselect' && this.parent.mode === 'CheckBox');\n        }\n        if (this.component === 'multiselect') {\n            this.parent.updatevirtualizationList();\n        }\n        this.parent.getSkeletonCount();\n        this.parent.skeletonCount = this.parent.totalItemCount !== 0 && this.parent.totalItemCount < this.parent.itemCount * 2 &&\n            ((!(this.parent.dataSource instanceof DataManager)) || ((this.parent.dataSource instanceof DataManager) &&\n                (this.parent.totalItemCount <= this.parent.itemCount))) ? 0 : this.parent.skeletonCount;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var virtualTrackElement = this.parent.list.getElementsByClassName('e-virtual-ddl')[0];\n        if (virtualTrackElement) {\n            virtualTrackElement.style = this.parent.GetVirtualTrackHeight();\n        }\n        else if (!virtualTrackElement && this.parent.skeletonCount > 0 && this.parent.popupWrapper) {\n            var virualElement = this.parent.createElement('div', {\n                id: this.parent.element.id + '_popup', className: 'e-virtual-ddl', styles: this.parent.GetVirtualTrackHeight()\n            });\n            this.parent.popupWrapper.querySelector('.e-dropdownbase').appendChild(virualElement);\n        }\n        this.parent.UpdateSkeleton();\n        this.parent.liCollections = this.parent.list.querySelectorAll('.e-list-item');\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var virtualContentElement = this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0];\n        if (virtualContentElement) {\n            (virtualContentElement).style = this.parent.getTransformValues();\n        }\n        if (this.parent.fields.groupBy) {\n            this.parent.scrollStop();\n        }\n        if (this.parent.keyCode === 40 &&\n            this.parent.isScrollChanged &&\n            this.parent.hideSelectedItem &&\n            !isNullOrUndefined(this.parent.currentFocuedListElement)) {\n            var currentSelectElem = this.parent.getElementByValue(this.parent.currentFocuedListElement.getAttribute('data-value'));\n            this.parent.addListFocus(currentSelectElem);\n            this.parent.isScrollChanged = false;\n        }\n    };\n    VirtualScroll.prototype.generateQueryAndSetQueryIndexAsync = function (query, isPopupOpen) {\n        var isStartIndexInitialised = false;\n        var queryStartIndex = 0;\n        var queryEndIndex = 0;\n        var vEndIndex = this.parent.viewPortInfo.endIndex;\n        if (!isPopupOpen && vEndIndex !== 0) {\n            for (var i = this.parent.viewPortInfo.startIndex; i <= vEndIndex; i++) {\n                if (!(i in this.parent.generatedDataObject)) {\n                    if (!isStartIndexInitialised) {\n                        isStartIndexInitialised = true;\n                        queryStartIndex = queryEndIndex = i;\n                    }\n                    else {\n                        queryEndIndex = i === vEndIndex ? i : i + 1;\n                    }\n                }\n            }\n        }\n        if (isStartIndexInitialised &&\n            !(this.parent.totalItemCount === queryStartIndex &&\n                this.parent.totalItemCount === queryEndIndex)) {\n            this.parent.virtualItemStartIndex = queryStartIndex;\n            this.parent.virtualItemEndIndex = queryEndIndex;\n            this.parent.setCurrentView = true;\n            this.generateAndExecuteQueryAsync(query, queryStartIndex, queryEndIndex);\n            if (this.component === 'multiselect' &&\n                this.parent.hideSelectedItem &&\n                this.parent.value &&\n                Array.isArray(this.parent.value) &&\n                this.parent.value.length > 0) {\n                this.parent.totalItemsCount();\n            }\n            if (this.component === 'multiselect' &&\n                this.parent.virtualItemStartIndex === this.parent.virtualItemEndIndex) {\n                this.parent.virtualItemStartIndex = this.parent.viewPortInfo.startIndex;\n                this.parent.virtualItemEndIndex = this.parent.viewPortInfo.endIndex;\n            }\n        }\n        if (!(this.parent.dataSource instanceof DataManager) ||\n            (this.parent.dataSource instanceof DataManager &&\n                !this.parent.isRequesting)) {\n            this.setCurrentViewDataAsync();\n        }\n    };\n    VirtualScroll.prototype.dataProcessAsync = function (isOpenPopup) {\n        this.parent.selectedValueInfo = null;\n        this.parent.virtualItemStartIndex = this.parent.viewPortInfo.startIndex;\n        this.parent.virtualItemEndIndex = this.parent.viewPortInfo.endIndex;\n        this.generateQueryAndSetQueryIndexAsync(new Query(), isOpenPopup);\n    };\n    VirtualScroll.prototype.virtualScrollRefreshAsync = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.parent.isCustomFilter = (!(this.parent.isTyped || (this.component === 'combobox' && this.parent.allowFiltering && this.parent.queryString !== this.parent.typedString) || (!isNullOrUndefined(this.parent.filterInput) && !isNullOrUndefined(this.parent.filterInput.value) && this.parent.filterInput.value !== '') && this.component !== 'combobox') && !(this.component === 'autocomplete' && this.parent.value != null)) || this.parent.isCustomFilter;\n                        if (this.parent.allowFiltering || this.component === 'autocomplete') {\n                            if (!isNullOrUndefined(this.parent.typedString) && !(this.component === 'combobox' && !isNullOrUndefined(this.parent.typedString) && this.parent.allowFiltering)) {\n                                if (this.parent.viewPortInfo.endIndex >= this.parent.dataCount) {\n                                    this.parent.viewPortInfo.endIndex = this.parent.dataCount;\n                                }\n                                if (this.parent.viewPortInfo.startIndex >= this.parent.dataCount) {\n                                    this.parent.viewPortInfo.startIndex = this.parent.dataCount - this.parent.itemCount;\n                                }\n                            }\n                            else {\n                                this.parent.getSkeletonCount(true);\n                                if (this.component === 'combobox') {\n                                    this.parent.skeletonCount = this.parent.totalItemCount !== 0 &&\n                                        this.parent.totalItemCount < (this.parent.itemCount * 2) && ((!(this.parent.dataSource instanceof DataManager)) ||\n                                        ((this.parent.dataSource instanceof DataManager) && (this.parent.totalItemCount <= this.parent.itemCount))) ?\n                                        0 : this.parent.skeletonCount;\n                                }\n                            }\n                        }\n                        return [4 /*yield*/, this.dataProcessAsync()];\n                    case 1:\n                        _a.sent();\n                        if (this.parent.keyboardEvent != null &&\n                            (!(this.parent.dataSource instanceof DataManager) ||\n                                (this.parent.dataSource instanceof DataManager &&\n                                    !this.parent.isRequesting))) {\n                            this.parent.handleVirtualKeyboardActions(this.parent.keyboardEvent, this.parent.pageCount);\n                        }\n                        if (!this.parent.customFilterQuery) {\n                            this.parent.isCustomFilter = false;\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    VirtualScroll.prototype.scrollListener = function (scrollArgs) {\n        var _this = this;\n        if (!this.parent.isPreventScrollAction && !this.parent.isVirtualTrackHeight) {\n            this.parent.preventSetCurrentData = false;\n            var info = scrollArgs.sentinel;\n            var pStartIndex = this.parent.previousStartIndex;\n            this.parent.viewPortInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset, false);\n            this.parent.isUpwardScrolling = false;\n            if (this.parent.previousStartIndex !== pStartIndex && !this.parent.isKeyBoardAction) {\n                this.parent.isScrollActionTriggered = false;\n                this.parent.currentPageNumber = this.parent.viewPortInfo.currentPageNumber;\n                this.parent.virtualListInfo = __assign({}, this.parent.viewPortInfo);\n                this.parent.isPreventKeyAction = true;\n                this.parent.isVirtualScrolling = true;\n                setTimeout(function () {\n                    _this.parent.pageCount = _this.parent.getPageCount();\n                    _this.virtualScrollRefreshAsync().then(function () {\n                        if (_this.parent.popupObj) {\n                            _this.parent.list = _this.parent.popupObj.element.querySelector('.' + 'e-content') || select('.' + 'e-content');\n                            _this.parent.updateSelectionList();\n                            _this.parent.liCollections = _this.parent.getItems();\n                        }\n                        _this.parent.isKeyBoardAction = false;\n                        _this.parent.isVirtualScrolling = false;\n                        _this.parent.isPreventKeyAction = false;\n                    });\n                }, 5);\n            }\n            else if (this.parent.isScrollActionTriggered) {\n                this.parent.isPreventKeyAction = false;\n                this.parent.isScrollActionTriggered = false;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.parent.getTransformValues();\n            }\n            this.parent.previousInfo = this.parent.viewPortInfo;\n        }\n    };\n    VirtualScroll.prototype.getInfoFromView = function (direction, info, e, isscrollAction) {\n        var infoType = {\n            direction: direction, sentinelInfo: info, offsets: e,\n            startIndex: this.parent.previousStartIndex, endIndex: this.parent.previousEndIndex\n        };\n        var vHeight = this.parent.popupContentElement.getBoundingClientRect().height;\n        //Row Start and End Index calculation\n        var rowHeight = this.parent.listItemHeight;\n        var exactTopIndex = e.top / rowHeight;\n        var infoViewIndices = vHeight / rowHeight;\n        var exactEndIndex = exactTopIndex + infoViewIndices;\n        var pageSizeBy4 = this.parent.virtualItemCount / 4;\n        var totalItemCount = this.parent.totalItemCount;\n        if (infoType.direction === 'down') {\n            var sIndex = Math.round(exactEndIndex) - Math.round((pageSizeBy4));\n            if (isNullOrUndefined(infoType.startIndex) || (exactEndIndex >\n                (infoType.startIndex + Math.round((this.parent.virtualItemCount / 2 + pageSizeBy4)))\n                && infoType.endIndex !== totalItemCount)) {\n                infoType.startIndex = sIndex >= 0 ? Math.round(sIndex) : 0;\n                infoType.startIndex = infoType.startIndex > exactTopIndex ? Math.floor(exactTopIndex) : infoType.startIndex;\n                var eIndex = infoType.startIndex + this.parent.virtualItemCount;\n                infoType.startIndex = eIndex < exactEndIndex ? (Math.ceil(exactEndIndex) - this.parent.virtualItemCount)\n                    : infoType.startIndex;\n                infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n                infoType.startIndex = eIndex >= totalItemCount\n                    ? (infoType.endIndex - this.parent.virtualItemCount > 0\n                        ? infoType.endIndex - this.parent.virtualItemCount\n                        : 0)\n                    : infoType.startIndex;\n                infoType.currentPageNumber = Math.ceil(infoType.endIndex / this.parent.virtualItemCount);\n            }\n        }\n        else if (infoType.direction === 'up') {\n            if ((infoType.startIndex && infoType.endIndex) || (Math.ceil(exactTopIndex) > this.parent.previousStartIndex)) {\n                var loadAtIndex = Math.round(((infoType.startIndex * rowHeight) + (pageSizeBy4 * rowHeight)) / rowHeight);\n                if (exactTopIndex < loadAtIndex || (Math.ceil(exactTopIndex) > this.parent.previousStartIndex)) {\n                    var idxAddedToExactTop = (pageSizeBy4) > infoViewIndices ? pageSizeBy4 :\n                        (infoViewIndices + infoViewIndices / 4);\n                    var eIndex = Math.round(exactTopIndex + idxAddedToExactTop);\n                    infoType.endIndex = (eIndex < totalItemCount) ? eIndex : totalItemCount;\n                    var sIndex = infoType.endIndex - this.parent.virtualItemCount;\n                    infoType.startIndex = sIndex > 0 ? sIndex : 0;\n                    infoType.endIndex = sIndex < 0 ? this.parent.virtualItemCount : infoType.endIndex;\n                    infoType.currentPageNumber = Math.ceil(infoType.startIndex / this.parent.virtualItemCount);\n                }\n            }\n        }\n        if (!isscrollAction) {\n            this.parent.previousStartIndex = infoType.startIndex;\n            this.parent.startIndex = infoType.startIndex;\n            this.parent.previousEndIndex = infoType.endIndex;\n        }\n        else {\n            this.parent.scrollPreStartIndex = infoType.startIndex;\n        }\n        return infoType;\n    };\n    VirtualScroll.prototype.virtualScrollHandler = function (callback) {\n        var _this = this;\n        var delay = Browser.info.name === 'chrome' ? 200 : 100;\n        var prevTop = 0;\n        var debounced100 = debounce(callback, delay);\n        var debounced50 = debounce(callback, 50);\n        return function (e) {\n            var top = e.target.scrollTop;\n            var left = e.target.scrollLeft;\n            var direction = prevTop < top && !_this.parent.isUpwardScrolling ? 'down' : 'up';\n            prevTop = top;\n            var current = _this.sentinelInfo[direction];\n            var pstartIndex = _this.parent.scrollPreStartIndex;\n            var scrollOffsetargs = {\n                top: top,\n                left: left\n            };\n            if (_this.parent.list && _this.parent.list.querySelectorAll('.e-virtual-list').length > 0) {\n                _this.getInfoFromView(direction, current, scrollOffsetargs, true);\n                if (_this.parent.scrollPreStartIndex !== pstartIndex && !_this.parent.isPreventScrollAction) {\n                    _this.parent.isScrollActionTriggered = true;\n                    var virtualPoup = (_this.parent.list.querySelector('.e-virtual-ddl-content'));\n                    virtualPoup.style.transform = 'translate(0px,' + top + 'px)';\n                }\n            }\n            var debounceFunction = debounced100;\n            if (current.axis === 'X') {\n                debounceFunction = debounced50;\n            }\n            debounceFunction({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                focusElement: document.activeElement });\n        };\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}