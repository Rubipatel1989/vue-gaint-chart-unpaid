{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as cons from './../base/css-constants';\nimport { TreeGrid, ContextMenu as TreeGridContextMenu } from '@syncfusion/ej2-treegrid';\nimport { remove, closest, isNullOrUndefined, getValue, extend, addClass } from '@syncfusion/ej2-base';\nimport { Deferred } from '@syncfusion/ej2-data';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\n// eslint-disable-next-line\n/**\n * The ContextMenu module is used to handle the context menu items & sub-menu items.\n *\n * @returns {void} .\n */\nvar ContextMenu = /** @class */function () {\n  function ContextMenu(parent) {\n    var _this = this;\n    this.segmentIndex = -1;\n    this.isCntxtMenuDependencyDelete = false;\n    this.headerContextMenuClick = function (args) {\n      var gridRow = closest(args.event.target, '.e-row');\n      var chartRow = closest(args.event.target, '.e-chart-row');\n      if (isNullOrUndefined(gridRow) && isNullOrUndefined(chartRow)) {\n        args.type = 'Header';\n        _this.parent.trigger('contextMenuClick', args);\n      }\n    };\n    this.headerContextMenuOpen = function (args) {\n      var gridRow = closest(args.event.target, '.e-row');\n      var chartRow = closest(args.event.target, '.e-chart-row');\n      if (isNullOrUndefined(gridRow) && isNullOrUndefined(chartRow)) {\n        args.type = 'Header';\n        _this.parent.trigger('contextMenuOpen', args);\n      } else {\n        args.cancel = true;\n      }\n    };\n    this.parent = parent;\n    this.ganttID = parent.element.id;\n    TreeGrid.Inject(TreeGridContextMenu);\n    this.parent.treeGrid.contextMenuClick = this.headerContextMenuClick.bind(this);\n    this.parent.treeGrid.contextMenuOpen = this.headerContextMenuOpen.bind(this);\n    this.addEventListener();\n    this.resetItems();\n  }\n  ContextMenu.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on('initiate-contextMenu', this.render, this);\n    this.parent.on('reRender-contextMenu', this.reRenderContextMenu, this);\n    this.parent.on('contextMenuClick', this.contextMenuItemClick, this);\n    this.parent.on('contextMenuOpen', this.contextMenuBeforeOpen, this);\n  };\n  ContextMenu.prototype.reRenderContextMenu = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      if (this.contextMenu) {\n        this.contextMenu.destroy();\n        remove(this.element);\n      }\n      this.resetItems();\n      this.render();\n    }\n  };\n  ContextMenu.prototype.render = function () {\n    this.element = this.parent.createElement('ul', {\n      id: this.ganttID + '_contextmenu',\n      className: cons.focusCell\n    });\n    this.parent.element.appendChild(this.element);\n    var target = '#' + this.ganttID;\n    this.contextMenu = new Menu({\n      items: this.getMenuItems(),\n      locale: this.parent.locale,\n      enableRtl: this.parent.enableRtl,\n      target: target,\n      animationSettings: {\n        effect: 'None'\n      },\n      select: this.contextMenuItemClick.bind(this),\n      beforeOpen: this.contextMenuBeforeOpen.bind(this),\n      onOpen: this.contextMenuOpen.bind(this),\n      onClose: this.contextMenuOnClose.bind(this),\n      cssClass: 'e-gantt'\n    });\n    this.contextMenu.appendTo(this.element);\n    this.parent.treeGrid.contextMenuItems = this.headerMenuItems;\n  };\n  ContextMenu.prototype.contextMenuItemClick = function (args) {\n    this.item = this.getKeyFromId(args.item.id);\n    var position;\n    var data;\n    var taskfields;\n    var parentItem = getValue('parentObj', args.item);\n    var index = -1;\n    args.type = 'Content';\n    args.rowData = this.rowData;\n    this.parent.trigger('contextMenuClick', args);\n    if (parentItem && !isNullOrUndefined(parentItem.id) && this.getKeyFromId(parentItem.id) === 'DeleteDependency') {\n      index = parentItem.items.indexOf(args.item);\n    }\n    if (this.parent.isAdaptive) {\n      if (this.item === 'TaskInformation' || this.item === 'Above' || this.item === 'Below' || this.item === 'Child' || this.item === 'DeleteTask') {\n        if (this.parent.selectionModule && this.parent.selectionSettings.type === 'Multiple') {\n          this.parent.selectionModule.hidePopUp();\n          document.getElementsByClassName('e-gridpopup')[0].style.display = 'none';\n        }\n      }\n    }\n    switch (this.item) {\n      case 'TaskInformation':\n        if (!isNullOrUndefined(this.rowData)) {\n          if (typeof this.rowData.ganttProperties.taskId === 'string') {\n            this.parent.openEditDialog(this.rowData.ganttProperties.rowUniqueID);\n          } else {\n            this.parent.openEditDialog(Number(this.rowData.ganttProperties.rowUniqueID));\n          }\n        }\n        break;\n      case 'Above':\n      case 'Below':\n      case 'Child':\n        if (!isNullOrUndefined(this.rowData)) {\n          position = this.item;\n          data = extend({}, {}, this.rowData.taskData, true);\n          taskfields = this.parent.taskFields;\n          if (data[taskfields.startDate]) {\n            this.parent.setRecordValue(taskfields.startDate, this.rowData.ganttProperties.startDate, data, true);\n          }\n          if (data[taskfields.endDate]) {\n            this.parent.setRecordValue(taskfields.endDate, this.rowData.ganttProperties.endDate, data, true);\n          }\n          if (!isNullOrUndefined(taskfields.dependency)) {\n            data[taskfields.dependency] = null;\n          }\n          if (!isNullOrUndefined(taskfields.child) && data[taskfields.child]) {\n            delete data[taskfields.child];\n          }\n          if (!isNullOrUndefined(taskfields.parentID) && data[taskfields.parentID]) {\n            data[taskfields.parentID] = null;\n          }\n          if (this.rowData) {\n            var rowIndex = this.parent.updatedRecords.indexOf(this.rowData);\n            this.parent.addRecord(data, position, rowIndex);\n          }\n        } else if (this.parent.flatData.length === 0) {\n          this.parent.addRecord();\n        }\n        break;\n      case 'Milestone':\n      case 'ToMilestone':\n        if (!isNullOrUndefined(this.rowData)) {\n          this.parent.convertToMilestone(this.rowData.ganttProperties.rowUniqueID);\n        } else if (this.parent.flatData.length === 0 && this.item === 'Milestone') {\n          var data_1 = this.parent.editModule.createNewRecord();\n          var taskSettings = this.parent.taskFields;\n          if (this.parent.taskFields['duration']) {\n            data_1[taskSettings['duration']] = 0;\n          }\n          if (this.parent.taskFields['milestone']) {\n            data_1[taskSettings['milestone']] = true;\n          }\n          this.parent.addRecord(data_1);\n        }\n        break;\n      case 'DeleteTask':\n        if (this.parent.selectionSettings.mode !== 'Cell' && this.parent.selectionModule.selectedRowIndexes.length > 1 || this.parent.selectionSettings.mode === 'Cell' && this.parent.selectionModule.getSelectedRowCellIndexes().length) {\n          this.parent.editModule.startDeleteAction();\n        } else {\n          this.parent.editModule.deleteRecord(this.rowData);\n        }\n        break;\n      case 'ToTask':\n        if (!isNullOrUndefined(this.rowData)) {\n          data = extend({}, {}, this.rowData.taskData, true);\n          taskfields = this.parent.taskFields;\n          if (!isNullOrUndefined(taskfields.duration)) {\n            data[taskfields.duration] = parseInt(data[taskfields.duration], 10) <= 0 ? 1 : data[taskfields.duration];\n          } else {\n            data[taskfields.startDate] = new Date(this.rowData.taskData[taskfields.startDate]);\n            var endDate = new Date(this.rowData.taskData[taskfields.startDate]);\n            endDate.setDate(endDate.getDate() + 1);\n            data[taskfields.endDate] = endDate;\n          }\n          if (!isNullOrUndefined(data[taskfields.milestone])) {\n            if (data[taskfields.milestone] === true) {\n              data[taskfields.milestone] = false;\n            }\n          }\n          if (data[taskfields.startDate]) {\n            this.parent.setRecordValue(taskfields.startDate, this.rowData.ganttProperties.startDate, data, true);\n          }\n          this.parent.updateRecordByID(data);\n        }\n        break;\n      case 'Cancel':\n        this.parent.cancelEdit();\n        break;\n      case 'Save':\n        this.parent.editModule.cellEditModule.isCellEdit = false;\n        this.parent.treeGrid.grid.saveCell();\n        break;\n      case 'Dependency' + index:\n        this.isCntxtMenuDependencyDelete = true;\n        this.parent.connectorLineEditModule.removePredecessorByIndex(this.rowData, index);\n        break;\n      case 'Auto':\n      case 'Manual':\n        this.parent.changeTaskMode(this.rowData);\n        break;\n      case 'Indent':\n        this.parent.indent();\n        break;\n      case 'Outdent':\n        this.parent.outdent();\n        break;\n      case 'Left':\n      case 'Right':\n        this.mergeCall(this.item);\n        break;\n      case 'SplitTask':\n        this.splitTaskCall(args);\n        break;\n    }\n  };\n  ContextMenu.prototype.splitTaskCall = function (args) {\n    var _this = this;\n    this.isEdit = true;\n    var taskSettings = this.parent.taskFields;\n    var currentClickedDate = this.getClickedDate(args.element);\n    if (isNullOrUndefined(this.parent.timelineSettings.bottomTier) && this.parent.timelineSettings.bottomTier.unit !== 'Hour') {\n      currentClickedDate.setHours(0, 0, 0, 0);\n    }\n    var eventArgs = {\n      rowData: this.rowData,\n      requestType: 'splitTaskbar',\n      splitDate: currentClickedDate,\n      cancel: false,\n      target: this.targetElement\n    };\n    // eslint-disable-next-line\n    this.parent.trigger('actionBegin', eventArgs, function (eventArgs) {\n      if (!isNullOrUndefined(_this.parent.loadingIndicator) && _this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n        _this.parent.showMaskRow();\n      } else {\n        _this.parent.showSpinner();\n      }\n      _this.parent.chartRowsModule.splitTask(_this.rowData[taskSettings.id], currentClickedDate);\n      _this.parent.chartRowsModule.updateSegment(_this.rowData.ganttProperties.segments, _this.rowData.ganttProperties.taskId);\n    });\n  };\n  ContextMenu.prototype.mergeCall = function (item) {\n    var _this = this;\n    this.isEdit = true;\n    var taskSettings = this.parent.taskFields;\n    var segments = this.rowData.ganttProperties.segments;\n    var firstSegment = item === 'Right' ? this.segmentIndex : segments[this.segmentIndex - 1].segmentIndex;\n    var secondSegment = item === 'Left' ? this.segmentIndex : segments[this.segmentIndex + 1].segmentIndex;\n    var segmentIndexes = [{\n      'firstSegmentIndex': firstSegment,\n      'secondSegmentIndex': secondSegment\n    }];\n    var eventArgs = {\n      rowData: this.rowData,\n      mergeSegmentIndexes: segmentIndexes,\n      requestType: 'mergeSegment',\n      cancel: false,\n      target: this.targetElement\n    };\n    this.parent.trigger('actionBegin', eventArgs, function (eventArgs) {\n      if (!isNullOrUndefined(_this.parent.loadingIndicator) && _this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n        _this.parent.showMaskRow();\n      } else {\n        _this.parent.showSpinner();\n      }\n      if (eventArgs.cancel === false) {\n        _this.parent.chartRowsModule.mergeTask(_this.rowData[taskSettings.id], segmentIndexes);\n      }\n    });\n  };\n  // eslint-disable-next-line\n  ContextMenu.prototype.getClickedDate = function (element) {\n    // context menu click position\n    var ganttElementPositionLeft;\n    // task left position\n    if (this.parent.enableRtl) {\n      var box = this.parent.element.getBoundingClientRect();\n      var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft;\n      var clientLeft = document.documentElement.clientLeft || document.body.clientLeft || 0;\n      ganttElementPositionLeft = box.left + scrollLeft - clientLeft;\n    } else {\n      ganttElementPositionLeft = this.parent.getOffsetRect(this.parent.element).left;\n    }\n    var pageLeft;\n    var currentTaskDifference;\n    if (this.parent.enableRtl) {\n      pageLeft = Math.abs(ganttElementPositionLeft + this.parent.ganttChartModule.chartElement.offsetWidth - this.rowData.ganttProperties.left - this.parent.ganttChartModule.scrollElement.scrollLeft);\n      currentTaskDifference = Math.abs(this.clickedPosition - pageLeft);\n    } else {\n      pageLeft = ganttElementPositionLeft + this.parent.ganttChartModule.chartElement.offsetLeft + this.rowData.ganttProperties.left - this.parent.ganttChartModule.scrollElement.scrollLeft;\n      currentTaskDifference = this.clickedPosition - pageLeft;\n    }\n    var splitTaskDuration = Math.ceil(currentTaskDifference / this.parent.perDayWidth);\n    var startDate = this.rowData.ganttProperties.startDate;\n    if (!isNullOrUndefined(this.parent.timelineSettings.bottomTier) && this.parent.timelineSettings.bottomTier.unit === 'Hour') {\n      splitTaskDuration = Math.ceil(currentTaskDifference / this.parent.timelineSettings.timelineUnitSize);\n      splitTaskDuration -= 1;\n    }\n    var contextMenuClickDate;\n    if (!isNullOrUndefined(this.parent.timelineSettings.bottomTier) && (this.parent.timelineSettings.bottomTier.unit === 'Minutes' || this.parent.timelineSettings.bottomTier.unit === 'Hour')) {\n      splitTaskDuration = Math.ceil(currentTaskDifference / this.parent.timelineSettings.timelineUnitSize);\n      splitTaskDuration -= 1;\n      contextMenuClickDate = this.parent.dataOperation.getEndDate(startDate, splitTaskDuration, this.parent.timelineSettings.bottomTier.unit.toLocaleLowerCase(), this.rowData, false);\n    } else {\n      contextMenuClickDate = this.parent.dataOperation.getEndDate(startDate, splitTaskDuration, this.rowData.ganttProperties.duration > 1 ? this.rowData.ganttProperties.durationUnit : this.parent.timelineSettings.bottomTier.unit !== 'None' ? this.parent.timelineSettings.bottomTier.unit.toLocaleLowerCase() : this.parent.timelineSettings.topTier.unit.toLocaleLowerCase(), this.rowData, false);\n    }\n    return contextMenuClickDate;\n  };\n  ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n    var _this = this;\n    var target = args.event ? args.event.target : !this.parent.focusModule ? this.parent.focusModule.getActiveElement() : this.parent.ganttChartModule.targetElement;\n    // Closed edited cell before opening context menu\n    if (!isNullOrUndefined(this.parent.editModule) && this.parent.editModule.cellEditModule && this.parent.editModule.cellEditModule.isCellEdit && target.parentElement.classList.contains('e-row') || target.parentElement.classList.contains('e-treecolumn-container')) {\n      this.parent.treeGrid.closeEdit();\n    }\n    if (!isNullOrUndefined(args.element) && args.element.id === this.parent.element.id + '_contextmenu') {\n      this.clickedPosition = getValue('event', args).clientX;\n    }\n    var targetElement = closest(target, '.e-gantt-child-taskbar');\n    if (targetElement) {\n      this.targetElement = args.target = targetElement;\n    }\n    args.gridRow = closest(target, '.e-row');\n    args.chartRow = closest(target, '.e-chart-row');\n    var menuElement = closest(target, '.e-gantt');\n    var editForm = closest(target, cons.editForm);\n    if (!editForm && this.parent.editModule && this.parent.editModule.cellEditModule && this.parent.editModule.cellEditModule.isCellEdit && this.parent.editModule.dialogModule.dialogObj && !this.parent.editModule.dialogModule.dialogObj.open) {\n      this.parent.treeGrid.grid.saveCell();\n      this.parent.editModule.cellEditModule.isCellEdit = false;\n    }\n    if (this.parent.readOnly) {\n      this.contextMenu.enableItems(['Add', 'Save', 'Convert', 'Delete Dependency', 'Delete Task', 'TaskMode', 'Indent', 'Outdent', 'SplitTask', 'MergeTask'], false);\n    }\n    if (isNullOrUndefined(args.gridRow) && isNullOrUndefined(args.chartRow) || this.contentMenuItems.length === 0) {\n      if (!isNullOrUndefined(args.parentItem) && !isNullOrUndefined(menuElement) || !isNullOrUndefined(closest(target, '.e-content'))) {\n        args.cancel = false;\n      } else {\n        args.cancel = true;\n      }\n    }\n    if (!args.cancel) {\n      var rowIndex = -1;\n      if (args.gridRow) {\n        // eslint-disable-next-line\n        rowIndex = parseInt(args.gridRow.getAttribute('data-rowindex'), 0);\n      } else if (args.chartRow) {\n        // eslint-disable-next-line\n        rowIndex = parseInt(args.chartRow.getAttribute('data-rowindex'), 0);\n      }\n      if (this.parent.selectionModule && this.parent.allowSelection && !args.parentItem && !isNullOrUndefined(args.chartRow)) {\n        this.parent.selectionModule.selectRow(rowIndex);\n      }\n      if (!args.parentItem) {\n        this.rowData = this.parent.updatedRecords[parseInt(rowIndex.toString(), 10)];\n      }\n      for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n        var item = _a[_i];\n        // let target: EventTarget = target;\n        if (!item.separator) {\n          if (target.classList.contains('e-gantt-unscheduled-taskbar') && (item.text === this.getLocale('splitTask') || item.text === this.getLocale('mergeTask'))) {\n            this.hideItems.push(item.text);\n          } else {\n            this.updateItemStatus(item, target, rowIndex);\n          }\n        }\n      }\n      args.rowData = this.rowData;\n      args.type = 'Content';\n      args.disableItems = this.disableItems;\n      args.hideItems = this.hideItems;\n      args.hideChildItems = [];\n      if (!isNullOrUndefined(args.rowData) && args.rowData.level === 0 && this.parent.viewType === 'ResourceView') {\n        args.cancel = true;\n        return;\n      }\n      var callBackPromise_1 = new Deferred();\n      this.parent.trigger('contextMenuOpen', args, function (arg) {\n        callBackPromise_1.resolve(arg);\n        _this.hideItems = arg.hideItems;\n        _this.disableItems = arg.disableItems;\n        if (!arg.parentItem && arg.hideItems.length === arg.items.length) {\n          _this.revertItemStatus();\n          arg.cancel = true;\n        }\n        if (_this.hideItems.length > 0) {\n          _this.contextMenu.hideItems(_this.hideItems);\n        }\n        if (_this.disableItems.length > 0) {\n          _this.contextMenu.enableItems(_this.disableItems, false);\n        }\n        if (args.hideChildItems.length > 0) {\n          _this.contextMenu.hideItems(args.hideChildItems);\n        }\n      });\n      return callBackPromise_1;\n    }\n  };\n  ContextMenu.prototype.updateItemStatus = function (item, target, rowIndex) {\n    var key = this.getKeyFromId(item.id);\n    var editForm = closest(target, cons.editForm);\n    var subMenu = [];\n    var taskbarElement = closest(target, '.e-gantt-child-taskbar') || closest(target, 'e-taskbar-right-resizer') || closest(target, 'e-taskbar-left-resizer');\n    if (editForm) {\n      if (!(key === 'Save' || key === 'Cancel')) {\n        this.hideItems.push(item.text);\n      }\n    } else {\n      switch (key) {\n        case 'TaskInformation':\n          if (!this.parent.editSettings.allowEditing || !this.parent.editModule) {\n            this.updateItemVisibility(item.text);\n          }\n          if (this.parent.flatData.length === 0) {\n            this.hideItems.push(item.text);\n          }\n          break;\n        case 'Add':\n          if (!this.parent.editSettings.allowAdding || !this.parent.editModule) {\n            this.updateItemVisibility(item.text);\n          }\n          break;\n        case 'Save':\n        case 'Cancel':\n          this.hideItems.push(item.text);\n          break;\n        case 'Convert':\n          if (!isNullOrUndefined(this.rowData) && this.rowData.hasChildRecords) {\n            this.hideItems.push(item.text);\n          } else if (!this.parent.editSettings.allowEditing || !this.parent.editModule) {\n            this.updateItemVisibility(item.text);\n          } else {\n            if (!isNullOrUndefined(this.rowData) && !this.rowData.ganttProperties.isMilestone) {\n              subMenu.push(this.createItemModel(cons.content, 'ToMilestone', this.getLocale('toMilestone')));\n            } else {\n              subMenu.push(this.createItemModel(cons.content, 'ToTask', this.getLocale('toTask')));\n            }\n            item.items = subMenu;\n          }\n          if (this.parent.flatData.length === 0) {\n            this.hideItems.push(item.text);\n          }\n          break;\n        case 'DeleteDependency':\n          {\n            var items = this.getPredecessorsItems();\n            if (!isNullOrUndefined(this.rowData) && this.rowData.hasChildRecords && !this.parent.allowParentDependency) {\n              this.hideItems.push(item.text);\n            } else if (!this.parent.editSettings.allowDeleting || items.length === 0 || !this.parent.editModule) {\n              this.updateItemVisibility(item.text);\n            } else if (items.length > 0) {\n              item.items = items;\n            }\n            break;\n          }\n        case 'DeleteTask':\n          if (!this.parent.editSettings.allowDeleting || !this.parent.editModule) {\n            this.updateItemVisibility(item.text);\n          }\n          if (this.parent.flatData.length === 0) {\n            this.hideItems.push(item.text);\n          }\n          break;\n        case 'TaskMode':\n          if (this.parent.taskMode !== 'Custom') {\n            this.updateItemVisibility(item.text);\n          } else {\n            if (this.rowData.ganttProperties.isAutoSchedule) {\n              subMenu.push(this.createItemModel(cons.content, 'Manual', this.getLocale('manual')));\n            } else {\n              subMenu.push(this.createItemModel(cons.content, 'Auto', this.getLocale('auto')));\n            }\n            item.items = subMenu;\n          }\n          break;\n        case 'Indent':\n          {\n            if (!this.parent.allowSelection || !this.parent.editModule || !this.parent.editSettings) {\n              this.hideItems.push(item.text);\n            } else {\n              var index = this.parent.selectedRowIndex;\n              var isSelected = this.parent.selectionModule ? this.parent.selectionModule.selectedRowIndexes.length === 1 || this.parent.selectionModule.getSelectedRowCellIndexes().length === 1 ? true : false : false;\n              var prevRecord = this.parent.updatedRecords[this.parent.selectionModule.getSelectedRowIndexes()[0] - 1];\n              if (!this.parent.editSettings.allowEditing || index === 0 || index === -1 || !isSelected || this.parent.viewType === 'ResourceView' || this.parent.updatedRecords[parseInt(index.toString(), 10)].level - prevRecord.level === 1) {\n                this.updateItemVisibility(item.text);\n              }\n            }\n            break;\n          }\n        case 'Outdent':\n          {\n            if (!this.parent.allowSelection || !this.parent.editModule || !this.parent.editSettings) {\n              this.hideItems.push(item.text);\n            } else {\n              var ind = this.parent.selectionModule.getSelectedRowIndexes()[0];\n              var isSelect = this.parent.selectionModule ? this.parent.selectionModule.selectedRowIndexes.length === 1 || this.parent.selectionModule.getSelectedRowCellIndexes().length === 1 ? true : false : false;\n              if (!this.parent.editSettings.allowEditing || ind === -1 || ind === 0 || !isSelect || this.parent.viewType === 'ResourceView' || this.parent.updatedRecords[parseInt(ind.toString(), 10)].level === 0) {\n                this.updateItemVisibility(item.text);\n              }\n            }\n            break;\n          }\n        case 'SplitTask':\n          {\n            var taskSettings = this.parent.taskFields;\n            if (this.parent.readOnly || !taskbarElement || isNullOrUndefined(taskSettings.segments) || this.parent.currentViewData[parseInt(rowIndex.toString(), 10)].hasChildRecords) {\n              this.updateItemVisibility(item.text);\n            }\n            break;\n          }\n        case 'MergeTask':\n          if (this.parent.readOnly || !taskbarElement) {\n            this.updateItemVisibility(item.text);\n          } else {\n            this.mergeItemVisiblity(target, item);\n          }\n          break;\n      }\n    }\n  };\n  ContextMenu.prototype.mergeItemVisiblity = function (target, item) {\n    var subMenu = [];\n    var taskfields = this.parent.taskFields;\n    var currentClickedDate = this.getClickedDate(target);\n    this.segmentIndex = this.parent.chartRowsModule.getSegmentIndex(currentClickedDate, this.rowData);\n    var segments = this.rowData.ganttProperties.segments;\n    if (!isNullOrUndefined(segments) && segments.length > 0) {\n      if (isNullOrUndefined(taskfields.segments) && this.segmentIndex === -1) {\n        this.updateItemVisibility(item.text);\n      } else {\n        if (this.segmentIndex === 0) {\n          subMenu.push(this.createItemModel(cons.content, 'Right', this.getLocale('right')));\n        } else if (this.segmentIndex === segments.length - 1) {\n          subMenu.push(this.createItemModel(cons.content, 'Left', this.getLocale('left')));\n        } else {\n          subMenu.push(this.createItemModel(cons.content, 'Right', this.getLocale('right')));\n          subMenu.push(this.createItemModel(cons.content, 'Left', this.getLocale('left')));\n        }\n        item.items = subMenu;\n      }\n    } else {\n      this.hideItems.push(item.text);\n    }\n  };\n  ContextMenu.prototype.updateItemVisibility = function (text) {\n    var isDefaultItem = !isNullOrUndefined(this.parent.contextMenuItems) ? false : true;\n    if (isDefaultItem) {\n      this.hideItems.push(text);\n    } else {\n      this.disableItems.push(text);\n    }\n  };\n  ContextMenu.prototype.contextMenuOpen = function (args) {\n    this.isOpen = true;\n    var firstMenuItem = this.parent['args'] = args.element.querySelectorAll('li:not(.e-menu-hide):not(.e-disabled)')[0];\n    if (!isNullOrUndefined(firstMenuItem)) {\n      addClass([firstMenuItem], 'e-focused');\n    }\n  };\n  ContextMenu.prototype.getMenuItems = function () {\n    var menuItems = !isNullOrUndefined(this.parent.contextMenuItems) ? this.parent.contextMenuItems : this.getDefaultItems();\n    for (var _i = 0, menuItems_1 = menuItems; _i < menuItems_1.length; _i++) {\n      var item = menuItems_1[_i];\n      if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n        this.buildDefaultItems(item);\n      } else if (typeof item !== 'string') {\n        if (this.getDefaultItems().indexOf(item.text) !== -1) {\n          this.buildDefaultItems(item.text, item.iconCss);\n        } else if (item.target === cons.columnHeader) {\n          this.headerMenuItems.push(item);\n        } else {\n          this.contentMenuItems.push(item);\n        }\n      }\n    }\n    return this.contentMenuItems;\n  };\n  ContextMenu.prototype.createItemModel = function (target, item, text, iconCss) {\n    var itemModel = {\n      text: text,\n      id: this.generateID(item),\n      target: target,\n      iconCss: iconCss ? 'e-icons ' + iconCss : null\n    };\n    return itemModel;\n  };\n  ContextMenu.prototype.getLocale = function (text) {\n    var localeText = this.parent.localeObj.getConstant(text);\n    return localeText;\n  };\n  ContextMenu.prototype.buildDefaultItems = function (item, iconCSS) {\n    var contentMenuItem;\n    switch (item) {\n      case 'AutoFitAll':\n      case 'AutoFit':\n      case 'SortAscending':\n      case 'SortDescending':\n        this.headerMenuItems.push(item);\n        break;\n      case 'TaskInformation':\n        contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('taskInformation'), this.getIconCSS(cons.editIcon, iconCSS));\n        break;\n      case 'Indent':\n        contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('indent'), this.getIconCSS(cons.indentIcon, iconCSS));\n        break;\n      case 'Outdent':\n        contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('outdent'), this.getIconCSS(cons.outdentIcon, iconCSS));\n        break;\n      case 'Save':\n        contentMenuItem = this.createItemModel(cons.editIcon, item, this.getLocale('save'), this.getIconCSS(cons.saveIcon, iconCSS));\n        break;\n      case 'Cancel':\n        contentMenuItem = this.createItemModel(cons.editIcon, item, this.getLocale('cancel'), this.getIconCSS(cons.cancelIcon, iconCSS));\n        break;\n      case 'Add':\n        contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('add'), this.getIconCSS(cons.addIcon, iconCSS));\n        //Sub item menu\n        contentMenuItem.items = [];\n        contentMenuItem.items.push(this.createItemModel(cons.content, 'Above', this.getLocale('above'), this.getIconCSS(cons.addAboveIcon, iconCSS)));\n        contentMenuItem.items.push(this.createItemModel(cons.content, 'Below', this.getLocale('below'), this.getIconCSS(cons.addBelowIcon, iconCSS)));\n        if (this.parent.viewType !== 'ResourceView') {\n          contentMenuItem.items.push(this.createItemModel(cons.content, 'Child', this.getLocale('child')));\n        }\n        contentMenuItem.items.push(this.createItemModel(cons.content, 'Milestone', this.getLocale('milestone')));\n        break;\n      case 'DeleteTask':\n        contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('deleteTask'), this.getIconCSS(cons.deleteIcon, iconCSS));\n        break;\n      case 'DeleteDependency':\n        contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('deleteDependency'));\n        contentMenuItem.items = [];\n        contentMenuItem.items.push({});\n        break;\n      case 'Convert':\n        contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('convert'));\n        contentMenuItem.items = [];\n        contentMenuItem.items.push({});\n        break;\n      case 'TaskMode':\n        contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('changeScheduleMode'));\n        contentMenuItem.items = [];\n        contentMenuItem.items.push({});\n        break;\n      case 'SplitTask':\n        contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('splitTask'));\n        break;\n      case 'MergeTask':\n        contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('mergeTask'));\n        contentMenuItem.items = [];\n        contentMenuItem.items.push({});\n    }\n    if (contentMenuItem) {\n      this.contentMenuItems.push(contentMenuItem);\n    }\n  };\n  ContextMenu.prototype.getIconCSS = function (menuClass, iconString) {\n    return isNullOrUndefined(iconString) ? menuClass : iconString;\n  };\n  ContextMenu.prototype.getPredecessorsItems = function () {\n    this.predecessors = this.parent.predecessorModule.getValidPredecessor(this.rowData);\n    var items = [];\n    var itemModel;\n    var increment = 0;\n    for (var _i = 0, _a = this.predecessors; _i < _a.length; _i++) {\n      var predecessor = _a[_i];\n      var ganttData = this.parent.getRecordByID(predecessor.from);\n      var ganttProp = ganttData.ganttProperties;\n      var text = ganttProp.rowUniqueID + ' - ' + ganttProp.taskName;\n      var id = 'Dependency' + increment++;\n      itemModel = this.createItemModel(cons.content, id, text);\n      items.push(itemModel);\n    }\n    return items;\n  };\n  ContextMenu.prototype.getDefaultItems = function () {\n    return ['AutoFitAll', 'AutoFit', 'TaskInformation', 'DeleteTask', 'Save', 'Cancel', 'SortAscending', 'SortDescending', 'Add', 'DeleteDependency', 'Convert', 'TaskMode', 'Indent', 'Outdent', 'SplitTask', 'MergeTask'];\n  };\n  /**\n   * To get ContextMenu module name.\n   *\n   * @returns {string} .\n   */\n  ContextMenu.prototype.getModuleName = function () {\n    return 'contextMenu';\n  };\n  ContextMenu.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off('initiate-contextMenu', this.render);\n    this.parent.off('reRender-contextMenu', this.reRenderContextMenu);\n    this.parent.off('contextMenuClick', this.contextMenuItemClick);\n    this.parent.off('contextMenuOpen', this.contextMenuOpen);\n  };\n  ContextMenu.prototype.contextMenuOnClose = function (args) {\n    var parent = 'parentObj';\n    if (args.items.length > 0 && args.items[0][\"\" + parent] instanceof Menu) {\n      this.revertItemStatus();\n    }\n  };\n  ContextMenu.prototype.revertItemStatus = function () {\n    this.contextMenu.showItems(this.hideItems);\n    this.contextMenu.enableItems(this.disableItems);\n    this.hideItems = [];\n    this.disableItems = [];\n    this.isOpen = false;\n  };\n  ContextMenu.prototype.resetItems = function () {\n    this.hideItems = [];\n    this.disableItems = [];\n    this.headerMenuItems = [];\n    this.contentMenuItems = [];\n    this.item = null;\n  };\n  ContextMenu.prototype.generateID = function (item) {\n    return this.ganttID + '_contextMenu_' + item;\n  };\n  ContextMenu.prototype.getKeyFromId = function (id) {\n    var idPrefix = this.ganttID + '_contextMenu_';\n    if (id.indexOf(idPrefix) > -1) {\n      return id.replace(idPrefix, '');\n    } else {\n      return 'Custom';\n    }\n  };\n  /**\n   * To destroy the contextmenu module.\n   *\n   * @returns {void} .\n   * @private\n   */\n  ContextMenu.prototype.destroy = function () {\n    this.contextMenu.destroy();\n    remove(this.element);\n    this.removeEventListener();\n    this.contextMenu = null;\n    this.element = null;\n  };\n  return ContextMenu;\n}();\nexport { ContextMenu };","map":{"version":3,"names":["cons","TreeGrid","ContextMenu","TreeGridContextMenu","remove","closest","isNullOrUndefined","getValue","extend","addClass","Deferred","Menu","parent","_this","segmentIndex","isCntxtMenuDependencyDelete","headerContextMenuClick","args","gridRow","event","target","chartRow","type","trigger","headerContextMenuOpen","cancel","ganttID","element","id","Inject","treeGrid","contextMenuClick","bind","contextMenuOpen","addEventListener","resetItems","prototype","isDestroyed","on","render","reRenderContextMenu","contextMenuItemClick","contextMenuBeforeOpen","e","module","getModuleName","enable","contextMenu","destroy","createElement","className","focusCell","appendChild","items","getMenuItems","locale","enableRtl","animationSettings","effect","select","beforeOpen","onOpen","onClose","contextMenuOnClose","cssClass","appendTo","contextMenuItems","headerMenuItems","item","getKeyFromId","position","data","taskfields","parentItem","index","rowData","indexOf","isAdaptive","selectionModule","selectionSettings","hidePopUp","document","getElementsByClassName","style","display","ganttProperties","taskId","openEditDialog","rowUniqueID","Number","taskData","taskFields","startDate","setRecordValue","endDate","dependency","child","parentID","rowIndex","updatedRecords","addRecord","flatData","length","convertToMilestone","data_1","editModule","createNewRecord","taskSettings","mode","selectedRowIndexes","getSelectedRowCellIndexes","startDeleteAction","deleteRecord","duration","parseInt","Date","setDate","getDate","milestone","updateRecordByID","cancelEdit","cellEditModule","isCellEdit","grid","saveCell","connectorLineEditModule","removePredecessorByIndex","changeTaskMode","indent","outdent","mergeCall","splitTaskCall","isEdit","currentClickedDate","getClickedDate","timelineSettings","bottomTier","unit","setHours","eventArgs","requestType","splitDate","targetElement","loadingIndicator","indicatorType","showMaskRow","showSpinner","chartRowsModule","splitTask","updateSegment","segments","firstSegment","secondSegment","segmentIndexes","mergeSegmentIndexes","mergeTask","ganttElementPositionLeft","box","getBoundingClientRect","scrollLeft","window","pageXOffset","documentElement","body","clientLeft","left","getOffsetRect","pageLeft","currentTaskDifference","Math","abs","ganttChartModule","chartElement","offsetWidth","scrollElement","clickedPosition","offsetLeft","splitTaskDuration","ceil","perDayWidth","timelineUnitSize","contextMenuClickDate","dataOperation","getEndDate","toLocaleLowerCase","durationUnit","topTier","focusModule","getActiveElement","parentElement","classList","contains","closeEdit","clientX","menuElement","editForm","dialogModule","dialogObj","open","readOnly","enableItems","contentMenuItems","getAttribute","allowSelection","selectRow","toString","_i","_a","separator","text","getLocale","hideItems","push","updateItemStatus","disableItems","hideChildItems","level","viewType","callBackPromise_1","arg","resolve","revertItemStatus","key","subMenu","taskbarElement","editSettings","allowEditing","updateItemVisibility","allowAdding","hasChildRecords","isMilestone","createItemModel","content","getPredecessorsItems","allowParentDependency","allowDeleting","taskMode","isAutoSchedule","selectedRowIndex","isSelected","prevRecord","getSelectedRowIndexes","ind","isSelect","currentViewData","mergeItemVisiblity","getSegmentIndex","isDefaultItem","isOpen","firstMenuItem","querySelectorAll","menuItems","getDefaultItems","menuItems_1","buildDefaultItems","iconCss","columnHeader","itemModel","generateID","localeText","localeObj","getConstant","iconCSS","contentMenuItem","getIconCSS","editIcon","indentIcon","outdentIcon","saveIcon","cancelIcon","addIcon","addAboveIcon","addBelowIcon","deleteIcon","menuClass","iconString","predecessors","predecessorModule","getValidPredecessor","increment","predecessor","ganttData","getRecordByID","from","ganttProp","taskName","removeEventListener","off","showItems","idPrefix","replace"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-gantt/src/gantt/actions/context-menu.js"],"sourcesContent":["import * as cons from './../base/css-constants';\nimport { TreeGrid, ContextMenu as TreeGridContextMenu } from '@syncfusion/ej2-treegrid';\nimport { remove, closest, isNullOrUndefined, getValue, extend, addClass } from '@syncfusion/ej2-base';\nimport { Deferred } from '@syncfusion/ej2-data';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\n// eslint-disable-next-line\n/**\n * The ContextMenu module is used to handle the context menu items & sub-menu items.\n *\n * @returns {void} .\n */\nvar ContextMenu = /** @class */ (function () {\n    function ContextMenu(parent) {\n        var _this = this;\n        this.segmentIndex = -1;\n        this.isCntxtMenuDependencyDelete = false;\n        this.headerContextMenuClick = function (args) {\n            var gridRow = closest(args.event.target, '.e-row');\n            var chartRow = closest(args.event.target, '.e-chart-row');\n            if (isNullOrUndefined(gridRow) && isNullOrUndefined(chartRow)) {\n                args.type = 'Header';\n                _this.parent.trigger('contextMenuClick', args);\n            }\n        };\n        this.headerContextMenuOpen = function (args) {\n            var gridRow = closest(args.event.target, '.e-row');\n            var chartRow = closest(args.event.target, '.e-chart-row');\n            if (isNullOrUndefined(gridRow) && isNullOrUndefined(chartRow)) {\n                args.type = 'Header';\n                _this.parent.trigger('contextMenuOpen', args);\n            }\n            else {\n                args.cancel = true;\n            }\n        };\n        this.parent = parent;\n        this.ganttID = parent.element.id;\n        TreeGrid.Inject(TreeGridContextMenu);\n        this.parent.treeGrid.contextMenuClick = this.headerContextMenuClick.bind(this);\n        this.parent.treeGrid.contextMenuOpen = this.headerContextMenuOpen.bind(this);\n        this.addEventListener();\n        this.resetItems();\n    }\n    ContextMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('initiate-contextMenu', this.render, this);\n        this.parent.on('reRender-contextMenu', this.reRenderContextMenu, this);\n        this.parent.on('contextMenuClick', this.contextMenuItemClick, this);\n        this.parent.on('contextMenuOpen', this.contextMenuBeforeOpen, this);\n    };\n    ContextMenu.prototype.reRenderContextMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.contextMenu) {\n                this.contextMenu.destroy();\n                remove(this.element);\n            }\n            this.resetItems();\n            this.render();\n        }\n    };\n    ContextMenu.prototype.render = function () {\n        this.element = this.parent.createElement('ul', {\n            id: this.ganttID + '_contextmenu', className: cons.focusCell\n        });\n        this.parent.element.appendChild(this.element);\n        var target = '#' + this.ganttID;\n        this.contextMenu = new Menu({\n            items: this.getMenuItems(),\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            target: target,\n            animationSettings: { effect: 'None' },\n            select: this.contextMenuItemClick.bind(this),\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            onOpen: this.contextMenuOpen.bind(this),\n            onClose: this.contextMenuOnClose.bind(this),\n            cssClass: 'e-gantt'\n        });\n        this.contextMenu.appendTo(this.element);\n        this.parent.treeGrid.contextMenuItems = this.headerMenuItems;\n    };\n    ContextMenu.prototype.contextMenuItemClick = function (args) {\n        this.item = this.getKeyFromId(args.item.id);\n        var position;\n        var data;\n        var taskfields;\n        var parentItem = getValue('parentObj', args.item);\n        var index = -1;\n        args.type = 'Content';\n        args.rowData = this.rowData;\n        this.parent.trigger('contextMenuClick', args);\n        if (parentItem && !isNullOrUndefined(parentItem.id) && this.getKeyFromId(parentItem.id) === 'DeleteDependency') {\n            index = parentItem.items.indexOf(args.item);\n        }\n        if (this.parent.isAdaptive) {\n            if (this.item === 'TaskInformation' || this.item === 'Above' || this.item === 'Below'\n                || this.item === 'Child' || this.item === 'DeleteTask') {\n                if (this.parent.selectionModule && this.parent.selectionSettings.type === 'Multiple') {\n                    this.parent.selectionModule.hidePopUp();\n                    document.getElementsByClassName('e-gridpopup')[0].style.display = 'none';\n                }\n            }\n        }\n        switch (this.item) {\n            case 'TaskInformation':\n                if (!isNullOrUndefined(this.rowData)) {\n                    if (typeof this.rowData.ganttProperties.taskId === 'string') {\n                        this.parent.openEditDialog(this.rowData.ganttProperties.rowUniqueID);\n                    }\n                    else {\n                        this.parent.openEditDialog(Number(this.rowData.ganttProperties.rowUniqueID));\n                    }\n                }\n                break;\n            case 'Above':\n            case 'Below':\n            case 'Child':\n                if (!isNullOrUndefined(this.rowData)) {\n                    position = this.item;\n                    data = extend({}, {}, this.rowData.taskData, true);\n                    taskfields = this.parent.taskFields;\n                    if (data[taskfields.startDate]) {\n                        this.parent.setRecordValue(taskfields.startDate, this.rowData.ganttProperties.startDate, data, true);\n                    }\n                    if (data[taskfields.endDate]) {\n                        this.parent.setRecordValue(taskfields.endDate, this.rowData.ganttProperties.endDate, data, true);\n                    }\n                    if (!isNullOrUndefined(taskfields.dependency)) {\n                        data[taskfields.dependency] = null;\n                    }\n                    if (!isNullOrUndefined(taskfields.child) && data[taskfields.child]) {\n                        delete data[taskfields.child];\n                    }\n                    if (!isNullOrUndefined(taskfields.parentID) && data[taskfields.parentID]) {\n                        data[taskfields.parentID] = null;\n                    }\n                    if (this.rowData) {\n                        var rowIndex = this.parent.updatedRecords.indexOf(this.rowData);\n                        this.parent.addRecord(data, position, rowIndex);\n                    }\n                }\n                else if (this.parent.flatData.length === 0) {\n                    this.parent.addRecord();\n                }\n                break;\n            case 'Milestone':\n            case 'ToMilestone':\n                if (!isNullOrUndefined(this.rowData)) {\n                    this.parent.convertToMilestone(this.rowData.ganttProperties.rowUniqueID);\n                }\n                else if (this.parent.flatData.length === 0 && this.item === 'Milestone') {\n                    var data_1 = this.parent.editModule.createNewRecord();\n                    var taskSettings = this.parent.taskFields;\n                    if (this.parent.taskFields['duration']) {\n                        data_1[taskSettings['duration']] = 0;\n                    }\n                    if (this.parent.taskFields['milestone']) {\n                        data_1[taskSettings['milestone']] = true;\n                    }\n                    this.parent.addRecord(data_1);\n                }\n                break;\n            case 'DeleteTask':\n                if ((this.parent.selectionSettings.mode !== 'Cell' && this.parent.selectionModule.selectedRowIndexes.length > 1)\n                    || (this.parent.selectionSettings.mode === 'Cell' && this.parent.selectionModule.getSelectedRowCellIndexes().length)) {\n                    this.parent.editModule.startDeleteAction();\n                }\n                else {\n                    this.parent.editModule.deleteRecord(this.rowData);\n                }\n                break;\n            case 'ToTask':\n                if (!isNullOrUndefined(this.rowData)) {\n                    data = extend({}, {}, this.rowData.taskData, true);\n                    taskfields = this.parent.taskFields;\n                    if (!isNullOrUndefined(taskfields.duration)) {\n                        data[taskfields.duration] = parseInt(data[taskfields.duration], 10) <= 0 ? 1 : data[taskfields.duration];\n                    }\n                    else {\n                        data[taskfields.startDate] = new Date(this.rowData.taskData[taskfields.startDate]);\n                        var endDate = new Date(this.rowData.taskData[taskfields.startDate]);\n                        endDate.setDate(endDate.getDate() + 1);\n                        data[taskfields.endDate] = endDate;\n                    }\n                    if (!isNullOrUndefined(data[taskfields.milestone])) {\n                        if (data[taskfields.milestone] === true) {\n                            data[taskfields.milestone] = false;\n                        }\n                    }\n                    if (data[taskfields.startDate]) {\n                        this.parent.setRecordValue(taskfields.startDate, this.rowData.ganttProperties.startDate, data, true);\n                    }\n                    this.parent.updateRecordByID(data);\n                }\n                break;\n            case 'Cancel':\n                this.parent.cancelEdit();\n                break;\n            case 'Save':\n                this.parent.editModule.cellEditModule.isCellEdit = false;\n                this.parent.treeGrid.grid.saveCell();\n                break;\n            case 'Dependency' + index:\n                this.isCntxtMenuDependencyDelete = true;\n                this.parent.connectorLineEditModule.removePredecessorByIndex(this.rowData, index);\n                break;\n            case 'Auto':\n            case 'Manual':\n                this.parent.changeTaskMode(this.rowData);\n                break;\n            case 'Indent':\n                this.parent.indent();\n                break;\n            case 'Outdent':\n                this.parent.outdent();\n                break;\n            case 'Left':\n            case 'Right':\n                this.mergeCall(this.item);\n                break;\n            case 'SplitTask':\n                this.splitTaskCall(args);\n                break;\n        }\n    };\n    ContextMenu.prototype.splitTaskCall = function (args) {\n        var _this = this;\n        this.isEdit = true;\n        var taskSettings = this.parent.taskFields;\n        var currentClickedDate = this.getClickedDate(args.element);\n        if (isNullOrUndefined(this.parent.timelineSettings.bottomTier) && this.parent.timelineSettings.bottomTier.unit !== 'Hour') {\n            currentClickedDate.setHours(0, 0, 0, 0);\n        }\n        var eventArgs = {\n            rowData: this.rowData,\n            requestType: 'splitTaskbar',\n            splitDate: currentClickedDate,\n            cancel: false,\n            target: this.targetElement\n        };\n        // eslint-disable-next-line\n        this.parent.trigger('actionBegin', eventArgs, function (eventArgs) {\n            if (!isNullOrUndefined(_this.parent.loadingIndicator) && _this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n                _this.parent.showMaskRow();\n            }\n            else {\n                _this.parent.showSpinner();\n            }\n            _this.parent.chartRowsModule.splitTask(_this.rowData[taskSettings.id], currentClickedDate);\n            _this.parent.chartRowsModule.updateSegment(_this.rowData.ganttProperties.segments, _this.rowData.ganttProperties.taskId);\n        });\n    };\n    ContextMenu.prototype.mergeCall = function (item) {\n        var _this = this;\n        this.isEdit = true;\n        var taskSettings = this.parent.taskFields;\n        var segments = this.rowData.ganttProperties.segments;\n        var firstSegment = item === 'Right' ? this.segmentIndex : segments[this.segmentIndex - 1].segmentIndex;\n        var secondSegment = item === 'Left' ? this.segmentIndex : segments[this.segmentIndex + 1].segmentIndex;\n        var segmentIndexes = [\n            { 'firstSegmentIndex': firstSegment, 'secondSegmentIndex': secondSegment }\n        ];\n        var eventArgs = {\n            rowData: this.rowData,\n            mergeSegmentIndexes: segmentIndexes,\n            requestType: 'mergeSegment',\n            cancel: false,\n            target: this.targetElement\n        };\n        this.parent.trigger('actionBegin', eventArgs, function (eventArgs) {\n            if (!isNullOrUndefined(_this.parent.loadingIndicator) && _this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n                _this.parent.showMaskRow();\n            }\n            else {\n                _this.parent.showSpinner();\n            }\n            if (eventArgs.cancel === false) {\n                _this.parent.chartRowsModule.mergeTask(_this.rowData[taskSettings.id], segmentIndexes);\n            }\n        });\n    };\n    // eslint-disable-next-line\n    ContextMenu.prototype.getClickedDate = function (element) {\n        // context menu click position\n        var ganttElementPositionLeft;\n        // task left position\n        if (this.parent.enableRtl) {\n            var box = this.parent.element.getBoundingClientRect();\n            var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft ||\n                document.body.scrollLeft;\n            var clientLeft = document.documentElement.clientLeft || document.body.clientLeft || 0;\n            ganttElementPositionLeft = box.left + scrollLeft - clientLeft;\n        }\n        else {\n            ganttElementPositionLeft = this.parent.getOffsetRect(this.parent.element).left;\n        }\n        var pageLeft;\n        var currentTaskDifference;\n        if (this.parent.enableRtl) {\n            pageLeft = Math.abs(ganttElementPositionLeft + this.parent.ganttChartModule.chartElement.offsetWidth -\n                this.rowData.ganttProperties.left - this.parent.ganttChartModule.scrollElement.scrollLeft);\n            currentTaskDifference = Math.abs(this.clickedPosition - pageLeft);\n        }\n        else {\n            pageLeft = ganttElementPositionLeft + this.parent.ganttChartModule.chartElement.offsetLeft +\n                this.rowData.ganttProperties.left - this.parent.ganttChartModule.scrollElement.scrollLeft;\n            currentTaskDifference = this.clickedPosition - pageLeft;\n        }\n        var splitTaskDuration = Math.ceil(currentTaskDifference / this.parent.perDayWidth);\n        var startDate = this.rowData.ganttProperties.startDate;\n        if (!isNullOrUndefined(this.parent.timelineSettings.bottomTier) && this.parent.timelineSettings.bottomTier.unit === 'Hour') {\n            splitTaskDuration = Math.ceil(currentTaskDifference / this.parent.timelineSettings.timelineUnitSize);\n            splitTaskDuration -= 1;\n        }\n        var contextMenuClickDate;\n        if (!isNullOrUndefined(this.parent.timelineSettings.bottomTier) && (this.parent.timelineSettings.bottomTier.unit === 'Minutes' || this.parent.timelineSettings.bottomTier.unit === 'Hour')) {\n            splitTaskDuration = Math.ceil(currentTaskDifference / this.parent.timelineSettings.timelineUnitSize);\n            splitTaskDuration -= 1;\n            contextMenuClickDate = this.parent.dataOperation.getEndDate(startDate, splitTaskDuration, this.parent.timelineSettings.bottomTier.unit.toLocaleLowerCase(), this.rowData, false);\n        }\n        else {\n            contextMenuClickDate =\n                this.parent.dataOperation.getEndDate(startDate, splitTaskDuration, this.rowData.ganttProperties.duration > 1 ?\n                    this.rowData.ganttProperties.durationUnit : (this.parent.timelineSettings.bottomTier.unit !== 'None') ?\n                    this.parent.timelineSettings.bottomTier.unit.toLocaleLowerCase() :\n                    this.parent.timelineSettings.topTier.unit.toLocaleLowerCase(), this.rowData, false);\n        }\n        return contextMenuClickDate;\n    };\n    ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n        var _this = this;\n        var target = args.event ? args.event.target :\n            !this.parent.focusModule ? this.parent.focusModule.getActiveElement() :\n                this.parent.ganttChartModule.targetElement;\n        // Closed edited cell before opening context menu\n        if ((!isNullOrUndefined(this.parent.editModule) && this.parent.editModule.cellEditModule && this.parent.editModule.cellEditModule.isCellEdit && target.parentElement.classList.contains('e-row')) || target.parentElement.classList.contains('e-treecolumn-container')) {\n            this.parent.treeGrid.closeEdit();\n        }\n        if (!isNullOrUndefined(args.element) && args.element.id === this.parent.element.id + '_contextmenu') {\n            this.clickedPosition = getValue('event', args).clientX;\n        }\n        var targetElement = closest(target, '.e-gantt-child-taskbar');\n        if (targetElement) {\n            this.targetElement = args.target = targetElement;\n        }\n        args.gridRow = closest(target, '.e-row');\n        args.chartRow = closest(target, '.e-chart-row');\n        var menuElement = closest(target, '.e-gantt');\n        var editForm = closest(target, cons.editForm);\n        if (!editForm && this.parent.editModule && this.parent.editModule.cellEditModule\n            && this.parent.editModule.cellEditModule.isCellEdit && this.parent.editModule.dialogModule.dialogObj\n            && !this.parent.editModule.dialogModule.dialogObj.open) {\n            this.parent.treeGrid.grid.saveCell();\n            this.parent.editModule.cellEditModule.isCellEdit = false;\n        }\n        if (this.parent.readOnly) {\n            this.contextMenu.enableItems(['Add', 'Save', 'Convert', 'Delete Dependency', 'Delete Task', 'TaskMode', 'Indent', 'Outdent', 'SplitTask', 'MergeTask'], false);\n        }\n        if ((isNullOrUndefined(args.gridRow) && isNullOrUndefined(args.chartRow)) || this.contentMenuItems.length === 0) {\n            if (!isNullOrUndefined(args.parentItem) && !isNullOrUndefined(menuElement) || !isNullOrUndefined(closest(target, '.e-content'))) {\n                args.cancel = false;\n            }\n            else {\n                args.cancel = true;\n            }\n        }\n        if (!args.cancel) {\n            var rowIndex = -1;\n            if (args.gridRow) {\n                // eslint-disable-next-line\n                rowIndex = parseInt(args.gridRow.getAttribute('data-rowindex'), 0);\n            }\n            else if (args.chartRow) {\n                // eslint-disable-next-line\n                rowIndex = parseInt(args.chartRow.getAttribute('data-rowindex'), 0);\n            }\n            if (this.parent.selectionModule && this.parent.allowSelection && !args.parentItem && !isNullOrUndefined(args.chartRow)) {\n                this.parent.selectionModule.selectRow(rowIndex);\n            }\n            if (!args.parentItem) {\n                this.rowData = this.parent.updatedRecords[parseInt(rowIndex.toString(), 10)];\n            }\n            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                // let target: EventTarget = target;\n                if (!item.separator) {\n                    if ((target.classList.contains('e-gantt-unscheduled-taskbar')) && ((item.text === this.getLocale('splitTask')) || (item.text === this.getLocale('mergeTask')))) {\n                        this.hideItems.push(item.text);\n                    }\n                    else {\n                        this.updateItemStatus(item, target, rowIndex);\n                    }\n                }\n            }\n            args.rowData = this.rowData;\n            args.type = 'Content';\n            args.disableItems = this.disableItems;\n            args.hideItems = this.hideItems;\n            args.hideChildItems = [];\n            if (!isNullOrUndefined(args.rowData) && args.rowData.level === 0 && this.parent.viewType === 'ResourceView') {\n                args.cancel = true;\n                return;\n            }\n            var callBackPromise_1 = new Deferred();\n            this.parent.trigger('contextMenuOpen', args, function (arg) {\n                callBackPromise_1.resolve(arg);\n                _this.hideItems = arg.hideItems;\n                _this.disableItems = arg.disableItems;\n                if (!arg.parentItem && arg.hideItems.length === arg.items.length) {\n                    _this.revertItemStatus();\n                    arg.cancel = true;\n                }\n                if (_this.hideItems.length > 0) {\n                    _this.contextMenu.hideItems(_this.hideItems);\n                }\n                if (_this.disableItems.length > 0) {\n                    _this.contextMenu.enableItems(_this.disableItems, false);\n                }\n                if (args.hideChildItems.length > 0) {\n                    _this.contextMenu.hideItems(args.hideChildItems);\n                }\n            });\n            return callBackPromise_1;\n        }\n    };\n    ContextMenu.prototype.updateItemStatus = function (item, target, rowIndex) {\n        var key = this.getKeyFromId(item.id);\n        var editForm = closest(target, cons.editForm);\n        var subMenu = [];\n        var taskbarElement = closest(target, '.e-gantt-child-taskbar') ||\n            closest(target, 'e-taskbar-right-resizer') || closest(target, 'e-taskbar-left-resizer');\n        if (editForm) {\n            if (!(key === 'Save' || key === 'Cancel')) {\n                this.hideItems.push(item.text);\n            }\n        }\n        else {\n            switch (key) {\n                case 'TaskInformation':\n                    if (!this.parent.editSettings.allowEditing || !this.parent.editModule) {\n                        this.updateItemVisibility(item.text);\n                    }\n                    if (this.parent.flatData.length === 0) {\n                        this.hideItems.push(item.text);\n                    }\n                    break;\n                case 'Add':\n                    if (!this.parent.editSettings.allowAdding || !this.parent.editModule) {\n                        this.updateItemVisibility(item.text);\n                    }\n                    break;\n                case 'Save':\n                case 'Cancel':\n                    this.hideItems.push(item.text);\n                    break;\n                case 'Convert':\n                    if (!isNullOrUndefined(this.rowData) && this.rowData.hasChildRecords) {\n                        this.hideItems.push(item.text);\n                    }\n                    else if (!this.parent.editSettings.allowEditing || !this.parent.editModule) {\n                        this.updateItemVisibility(item.text);\n                    }\n                    else {\n                        if (!isNullOrUndefined(this.rowData) && !this.rowData.ganttProperties.isMilestone) {\n                            subMenu.push(this.createItemModel(cons.content, 'ToMilestone', this.getLocale('toMilestone')));\n                        }\n                        else {\n                            subMenu.push(this.createItemModel(cons.content, 'ToTask', this.getLocale('toTask')));\n                        }\n                        item.items = subMenu;\n                    }\n                    if (this.parent.flatData.length === 0) {\n                        this.hideItems.push(item.text);\n                    }\n                    break;\n                case 'DeleteDependency':\n                    {\n                        var items = this.getPredecessorsItems();\n                        if (!isNullOrUndefined(this.rowData) && this.rowData.hasChildRecords && !this.parent.allowParentDependency) {\n                            this.hideItems.push(item.text);\n                        }\n                        else if (!this.parent.editSettings.allowDeleting || items.length === 0 || !this.parent.editModule) {\n                            this.updateItemVisibility(item.text);\n                        }\n                        else if (items.length > 0) {\n                            item.items = items;\n                        }\n                        break;\n                    }\n                case 'DeleteTask':\n                    if (!this.parent.editSettings.allowDeleting || !this.parent.editModule) {\n                        this.updateItemVisibility(item.text);\n                    }\n                    if (this.parent.flatData.length === 0) {\n                        this.hideItems.push(item.text);\n                    }\n                    break;\n                case 'TaskMode':\n                    if (this.parent.taskMode !== 'Custom') {\n                        this.updateItemVisibility(item.text);\n                    }\n                    else {\n                        if (this.rowData.ganttProperties.isAutoSchedule) {\n                            subMenu.push(this.createItemModel(cons.content, 'Manual', this.getLocale('manual')));\n                        }\n                        else {\n                            subMenu.push(this.createItemModel(cons.content, 'Auto', this.getLocale('auto')));\n                        }\n                        item.items = subMenu;\n                    }\n                    break;\n                case 'Indent':\n                    {\n                        if (!this.parent.allowSelection || !this.parent.editModule || !this.parent.editSettings) {\n                            this.hideItems.push(item.text);\n                        }\n                        else {\n                            var index = this.parent.selectedRowIndex;\n                            var isSelected = this.parent.selectionModule ? this.parent.selectionModule.selectedRowIndexes.length === 1 ||\n                                this.parent.selectionModule.getSelectedRowCellIndexes().length === 1 ? true : false : false;\n                            var prevRecord = this.parent.updatedRecords[this.parent.selectionModule.getSelectedRowIndexes()[0] - 1];\n                            if (!this.parent.editSettings.allowEditing || index === 0 || index === -1 || !isSelected ||\n                                this.parent.viewType === 'ResourceView' ||\n                                this.parent.updatedRecords[parseInt(index.toString(), 10)].level - prevRecord.level === 1) {\n                                this.updateItemVisibility(item.text);\n                            }\n                        }\n                        break;\n                    }\n                case 'Outdent':\n                    {\n                        if (!this.parent.allowSelection || !this.parent.editModule || !this.parent.editSettings) {\n                            this.hideItems.push(item.text);\n                        }\n                        else {\n                            var ind = this.parent.selectionModule.getSelectedRowIndexes()[0];\n                            var isSelect = this.parent.selectionModule ? this.parent.selectionModule.selectedRowIndexes.length === 1 ||\n                                this.parent.selectionModule.getSelectedRowCellIndexes().length === 1 ? true : false : false;\n                            if (!this.parent.editSettings.allowEditing || ind === -1 || ind === 0 || !isSelect ||\n                                this.parent.viewType === 'ResourceView' || this.parent.updatedRecords[parseInt(ind.toString(), 10)].level === 0) {\n                                this.updateItemVisibility(item.text);\n                            }\n                        }\n                        break;\n                    }\n                case 'SplitTask':\n                    {\n                        var taskSettings = this.parent.taskFields;\n                        if (this.parent.readOnly || !taskbarElement || isNullOrUndefined(taskSettings.segments) ||\n                            this.parent.currentViewData[parseInt(rowIndex.toString(), 10)].hasChildRecords) {\n                            this.updateItemVisibility(item.text);\n                        }\n                        break;\n                    }\n                case 'MergeTask':\n                    if (this.parent.readOnly || !taskbarElement) {\n                        this.updateItemVisibility(item.text);\n                    }\n                    else {\n                        this.mergeItemVisiblity(target, item);\n                    }\n                    break;\n            }\n        }\n    };\n    ContextMenu.prototype.mergeItemVisiblity = function (target, item) {\n        var subMenu = [];\n        var taskfields = this.parent.taskFields;\n        var currentClickedDate = this.getClickedDate(target);\n        this.segmentIndex = this.parent.chartRowsModule.getSegmentIndex(currentClickedDate, this.rowData);\n        var segments = this.rowData.ganttProperties.segments;\n        if (!isNullOrUndefined(segments) && segments.length > 0) {\n            if (isNullOrUndefined(taskfields.segments) && this.segmentIndex === -1) {\n                this.updateItemVisibility(item.text);\n            }\n            else {\n                if (this.segmentIndex === 0) {\n                    subMenu.push(this.createItemModel(cons.content, 'Right', this.getLocale('right')));\n                }\n                else if (this.segmentIndex === segments.length - 1) {\n                    subMenu.push(this.createItemModel(cons.content, 'Left', this.getLocale('left')));\n                }\n                else {\n                    subMenu.push(this.createItemModel(cons.content, 'Right', this.getLocale('right')));\n                    subMenu.push(this.createItemModel(cons.content, 'Left', this.getLocale('left')));\n                }\n                item.items = subMenu;\n            }\n        }\n        else {\n            this.hideItems.push(item.text);\n        }\n    };\n    ContextMenu.prototype.updateItemVisibility = function (text) {\n        var isDefaultItem = !isNullOrUndefined(this.parent.contextMenuItems) ? false : true;\n        if (isDefaultItem) {\n            this.hideItems.push(text);\n        }\n        else {\n            this.disableItems.push(text);\n        }\n    };\n    ContextMenu.prototype.contextMenuOpen = function (args) {\n        this.isOpen = true;\n        var firstMenuItem = this.parent['args'] = args.element.querySelectorAll('li:not(.e-menu-hide):not(.e-disabled)')[0];\n        if (!isNullOrUndefined(firstMenuItem)) {\n            addClass([firstMenuItem], 'e-focused');\n        }\n    };\n    ContextMenu.prototype.getMenuItems = function () {\n        var menuItems = !isNullOrUndefined(this.parent.contextMenuItems) ?\n            this.parent.contextMenuItems : this.getDefaultItems();\n        for (var _i = 0, menuItems_1 = menuItems; _i < menuItems_1.length; _i++) {\n            var item = menuItems_1[_i];\n            if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n                this.buildDefaultItems(item);\n            }\n            else if (typeof item !== 'string') {\n                if (this.getDefaultItems().indexOf(item.text) !== -1) {\n                    this.buildDefaultItems(item.text, item.iconCss);\n                }\n                else if (item.target === cons.columnHeader) {\n                    this.headerMenuItems.push(item);\n                }\n                else {\n                    this.contentMenuItems.push(item);\n                }\n            }\n        }\n        return this.contentMenuItems;\n    };\n    ContextMenu.prototype.createItemModel = function (target, item, text, iconCss) {\n        var itemModel = {\n            text: text,\n            id: this.generateID(item),\n            target: target,\n            iconCss: iconCss ? 'e-icons ' + iconCss : null\n        };\n        return itemModel;\n    };\n    ContextMenu.prototype.getLocale = function (text) {\n        var localeText = this.parent.localeObj.getConstant(text);\n        return localeText;\n    };\n    ContextMenu.prototype.buildDefaultItems = function (item, iconCSS) {\n        var contentMenuItem;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n            case 'SortAscending':\n            case 'SortDescending':\n                this.headerMenuItems.push(item);\n                break;\n            case 'TaskInformation':\n                contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('taskInformation'), this.getIconCSS(cons.editIcon, iconCSS));\n                break;\n            case 'Indent':\n                contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('indent'), this.getIconCSS(cons.indentIcon, iconCSS));\n                break;\n            case 'Outdent':\n                contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('outdent'), this.getIconCSS(cons.outdentIcon, iconCSS));\n                break;\n            case 'Save':\n                contentMenuItem = this.createItemModel(cons.editIcon, item, this.getLocale('save'), this.getIconCSS(cons.saveIcon, iconCSS));\n                break;\n            case 'Cancel':\n                contentMenuItem = this.createItemModel(cons.editIcon, item, this.getLocale('cancel'), this.getIconCSS(cons.cancelIcon, iconCSS));\n                break;\n            case 'Add':\n                contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('add'), this.getIconCSS(cons.addIcon, iconCSS));\n                //Sub item menu\n                contentMenuItem.items = [];\n                contentMenuItem.items.push(this.createItemModel(cons.content, 'Above', this.getLocale('above'), this.getIconCSS(cons.addAboveIcon, iconCSS)));\n                contentMenuItem.items.push(this.createItemModel(cons.content, 'Below', this.getLocale('below'), this.getIconCSS(cons.addBelowIcon, iconCSS)));\n                if (this.parent.viewType !== 'ResourceView') {\n                    contentMenuItem.items.push(this.createItemModel(cons.content, 'Child', this.getLocale('child')));\n                }\n                contentMenuItem.items.push(this.createItemModel(cons.content, 'Milestone', this.getLocale('milestone')));\n                break;\n            case 'DeleteTask':\n                contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('deleteTask'), this.getIconCSS(cons.deleteIcon, iconCSS));\n                break;\n            case 'DeleteDependency':\n                contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('deleteDependency'));\n                contentMenuItem.items = [];\n                contentMenuItem.items.push({});\n                break;\n            case 'Convert':\n                contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('convert'));\n                contentMenuItem.items = [];\n                contentMenuItem.items.push({});\n                break;\n            case 'TaskMode':\n                contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('changeScheduleMode'));\n                contentMenuItem.items = [];\n                contentMenuItem.items.push({});\n                break;\n            case 'SplitTask':\n                contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('splitTask'));\n                break;\n            case 'MergeTask':\n                contentMenuItem = this.createItemModel(cons.content, item, this.getLocale('mergeTask'));\n                contentMenuItem.items = [];\n                contentMenuItem.items.push({});\n        }\n        if (contentMenuItem) {\n            this.contentMenuItems.push(contentMenuItem);\n        }\n    };\n    ContextMenu.prototype.getIconCSS = function (menuClass, iconString) {\n        return isNullOrUndefined(iconString) ? menuClass : iconString;\n    };\n    ContextMenu.prototype.getPredecessorsItems = function () {\n        this.predecessors = this.parent.predecessorModule.getValidPredecessor(this.rowData);\n        var items = [];\n        var itemModel;\n        var increment = 0;\n        for (var _i = 0, _a = this.predecessors; _i < _a.length; _i++) {\n            var predecessor = _a[_i];\n            var ganttData = this.parent.getRecordByID(predecessor.from);\n            var ganttProp = ganttData.ganttProperties;\n            var text = ganttProp.rowUniqueID + ' - ' + ganttProp.taskName;\n            var id = 'Dependency' + increment++;\n            itemModel = this.createItemModel(cons.content, id, text);\n            items.push(itemModel);\n        }\n        return items;\n    };\n    ContextMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit',\n            'TaskInformation', 'DeleteTask', 'Save', 'Cancel',\n            'SortAscending', 'SortDescending', 'Add',\n            'DeleteDependency', 'Convert', 'TaskMode', 'Indent', 'Outdent', 'SplitTask', 'MergeTask'\n        ];\n    };\n    /**\n     * To get ContextMenu module name.\n     *\n     * @returns {string} .\n     */\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextMenu';\n    };\n    ContextMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('initiate-contextMenu', this.render);\n        this.parent.off('reRender-contextMenu', this.reRenderContextMenu);\n        this.parent.off('contextMenuClick', this.contextMenuItemClick);\n        this.parent.off('contextMenuOpen', this.contextMenuOpen);\n    };\n    ContextMenu.prototype.contextMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][\"\" + parent] instanceof Menu) {\n            this.revertItemStatus();\n        }\n    };\n    ContextMenu.prototype.revertItemStatus = function () {\n        this.contextMenu.showItems(this.hideItems);\n        this.contextMenu.enableItems(this.disableItems);\n        this.hideItems = [];\n        this.disableItems = [];\n        this.isOpen = false;\n    };\n    ContextMenu.prototype.resetItems = function () {\n        this.hideItems = [];\n        this.disableItems = [];\n        this.headerMenuItems = [];\n        this.contentMenuItems = [];\n        this.item = null;\n    };\n    ContextMenu.prototype.generateID = function (item) {\n        return this.ganttID + '_contextMenu_' + item;\n    };\n    ContextMenu.prototype.getKeyFromId = function (id) {\n        var idPrefix = this.ganttID + '_contextMenu_';\n        if (id.indexOf(idPrefix) > -1) {\n            return id.replace(idPrefix, '');\n        }\n        else {\n            return 'Custom';\n        }\n    };\n    /**\n     * To destroy the contextmenu module.\n     *\n     * @returns {void} .\n     * @private\n     */\n    ContextMenu.prototype.destroy = function () {\n        this.contextMenu.destroy();\n        remove(this.element);\n        this.removeEventListener();\n        this.contextMenu = null;\n        this.element = null;\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n"],"mappings":";AAAA,OAAO,KAAKA,IAAI,MAAM,yBAAyB;AAC/C,SAASC,QAAQ,EAAEC,WAAW,IAAIC,mBAAmB,QAAQ,0BAA0B;AACvF,SAASC,MAAM,EAAEC,OAAO,EAAEC,iBAAiB,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,sBAAsB;AACrG,SAASC,QAAQ,QAAQ,sBAAsB;AAC/C,SAASR,WAAW,IAAIS,IAAI,QAAQ,6BAA6B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,IAAIT,WAAW,GAAG,aAAe,YAAY;EACzC,SAASA,WAAWA,CAACU,MAAM,EAAE;IACzB,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAI,CAACC,YAAY,GAAG,CAAC,CAAC;IACtB,IAAI,CAACC,2BAA2B,GAAG,KAAK;IACxC,IAAI,CAACC,sBAAsB,GAAG,UAAUC,IAAI,EAAE;MAC1C,IAAIC,OAAO,GAAGb,OAAO,CAACY,IAAI,CAACE,KAAK,CAACC,MAAM,EAAE,QAAQ,CAAC;MAClD,IAAIC,QAAQ,GAAGhB,OAAO,CAACY,IAAI,CAACE,KAAK,CAACC,MAAM,EAAE,cAAc,CAAC;MACzD,IAAId,iBAAiB,CAACY,OAAO,CAAC,IAAIZ,iBAAiB,CAACe,QAAQ,CAAC,EAAE;QAC3DJ,IAAI,CAACK,IAAI,GAAG,QAAQ;QACpBT,KAAK,CAACD,MAAM,CAACW,OAAO,CAAC,kBAAkB,EAAEN,IAAI,CAAC;MAClD;IACJ,CAAC;IACD,IAAI,CAACO,qBAAqB,GAAG,UAAUP,IAAI,EAAE;MACzC,IAAIC,OAAO,GAAGb,OAAO,CAACY,IAAI,CAACE,KAAK,CAACC,MAAM,EAAE,QAAQ,CAAC;MAClD,IAAIC,QAAQ,GAAGhB,OAAO,CAACY,IAAI,CAACE,KAAK,CAACC,MAAM,EAAE,cAAc,CAAC;MACzD,IAAId,iBAAiB,CAACY,OAAO,CAAC,IAAIZ,iBAAiB,CAACe,QAAQ,CAAC,EAAE;QAC3DJ,IAAI,CAACK,IAAI,GAAG,QAAQ;QACpBT,KAAK,CAACD,MAAM,CAACW,OAAO,CAAC,iBAAiB,EAAEN,IAAI,CAAC;MACjD,CAAC,MACI;QACDA,IAAI,CAACQ,MAAM,GAAG,IAAI;MACtB;IACJ,CAAC;IACD,IAAI,CAACb,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACc,OAAO,GAAGd,MAAM,CAACe,OAAO,CAACC,EAAE;IAChC3B,QAAQ,CAAC4B,MAAM,CAAC1B,mBAAmB,CAAC;IACpC,IAAI,CAACS,MAAM,CAACkB,QAAQ,CAACC,gBAAgB,GAAG,IAAI,CAACf,sBAAsB,CAACgB,IAAI,CAAC,IAAI,CAAC;IAC9E,IAAI,CAACpB,MAAM,CAACkB,QAAQ,CAACG,eAAe,GAAG,IAAI,CAACT,qBAAqB,CAACQ,IAAI,CAAC,IAAI,CAAC;IAC5E,IAAI,CAACE,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAACC,UAAU,CAAC,CAAC;EACrB;EACAjC,WAAW,CAACkC,SAAS,CAACF,gBAAgB,GAAG,YAAY;IACjD,IAAI,IAAI,CAACtB,MAAM,CAACyB,WAAW,EAAE;MACzB;IACJ;IACA,IAAI,CAACzB,MAAM,CAAC0B,EAAE,CAAC,sBAAsB,EAAE,IAAI,CAACC,MAAM,EAAE,IAAI,CAAC;IACzD,IAAI,CAAC3B,MAAM,CAAC0B,EAAE,CAAC,sBAAsB,EAAE,IAAI,CAACE,mBAAmB,EAAE,IAAI,CAAC;IACtE,IAAI,CAAC5B,MAAM,CAAC0B,EAAE,CAAC,kBAAkB,EAAE,IAAI,CAACG,oBAAoB,EAAE,IAAI,CAAC;IACnE,IAAI,CAAC7B,MAAM,CAAC0B,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAACI,qBAAqB,EAAE,IAAI,CAAC;EACvE,CAAC;EACDxC,WAAW,CAACkC,SAAS,CAACI,mBAAmB,GAAG,UAAUG,CAAC,EAAE;IACrD,IAAIA,CAAC,CAACC,MAAM,KAAK,IAAI,CAACC,aAAa,CAAC,CAAC,IAAIF,CAAC,CAACG,MAAM,EAAE;MAC/C,IAAI,IAAI,CAACC,WAAW,EAAE;QAClB,IAAI,CAACA,WAAW,CAACC,OAAO,CAAC,CAAC;QAC1B5C,MAAM,CAAC,IAAI,CAACuB,OAAO,CAAC;MACxB;MACA,IAAI,CAACQ,UAAU,CAAC,CAAC;MACjB,IAAI,CAACI,MAAM,CAAC,CAAC;IACjB;EACJ,CAAC;EACDrC,WAAW,CAACkC,SAAS,CAACG,MAAM,GAAG,YAAY;IACvC,IAAI,CAACZ,OAAO,GAAG,IAAI,CAACf,MAAM,CAACqC,aAAa,CAAC,IAAI,EAAE;MAC3CrB,EAAE,EAAE,IAAI,CAACF,OAAO,GAAG,cAAc;MAAEwB,SAAS,EAAElD,IAAI,CAACmD;IACvD,CAAC,CAAC;IACF,IAAI,CAACvC,MAAM,CAACe,OAAO,CAACyB,WAAW,CAAC,IAAI,CAACzB,OAAO,CAAC;IAC7C,IAAIP,MAAM,GAAG,GAAG,GAAG,IAAI,CAACM,OAAO;IAC/B,IAAI,CAACqB,WAAW,GAAG,IAAIpC,IAAI,CAAC;MACxB0C,KAAK,EAAE,IAAI,CAACC,YAAY,CAAC,CAAC;MAC1BC,MAAM,EAAE,IAAI,CAAC3C,MAAM,CAAC2C,MAAM;MAC1BC,SAAS,EAAE,IAAI,CAAC5C,MAAM,CAAC4C,SAAS;MAChCpC,MAAM,EAAEA,MAAM;MACdqC,iBAAiB,EAAE;QAAEC,MAAM,EAAE;MAAO,CAAC;MACrCC,MAAM,EAAE,IAAI,CAAClB,oBAAoB,CAACT,IAAI,CAAC,IAAI,CAAC;MAC5C4B,UAAU,EAAE,IAAI,CAAClB,qBAAqB,CAACV,IAAI,CAAC,IAAI,CAAC;MACjD6B,MAAM,EAAE,IAAI,CAAC5B,eAAe,CAACD,IAAI,CAAC,IAAI,CAAC;MACvC8B,OAAO,EAAE,IAAI,CAACC,kBAAkB,CAAC/B,IAAI,CAAC,IAAI,CAAC;MAC3CgC,QAAQ,EAAE;IACd,CAAC,CAAC;IACF,IAAI,CAACjB,WAAW,CAACkB,QAAQ,CAAC,IAAI,CAACtC,OAAO,CAAC;IACvC,IAAI,CAACf,MAAM,CAACkB,QAAQ,CAACoC,gBAAgB,GAAG,IAAI,CAACC,eAAe;EAChE,CAAC;EACDjE,WAAW,CAACkC,SAAS,CAACK,oBAAoB,GAAG,UAAUxB,IAAI,EAAE;IACzD,IAAI,CAACmD,IAAI,GAAG,IAAI,CAACC,YAAY,CAACpD,IAAI,CAACmD,IAAI,CAACxC,EAAE,CAAC;IAC3C,IAAI0C,QAAQ;IACZ,IAAIC,IAAI;IACR,IAAIC,UAAU;IACd,IAAIC,UAAU,GAAGlE,QAAQ,CAAC,WAAW,EAAEU,IAAI,CAACmD,IAAI,CAAC;IACjD,IAAIM,KAAK,GAAG,CAAC,CAAC;IACdzD,IAAI,CAACK,IAAI,GAAG,SAAS;IACrBL,IAAI,CAAC0D,OAAO,GAAG,IAAI,CAACA,OAAO;IAC3B,IAAI,CAAC/D,MAAM,CAACW,OAAO,CAAC,kBAAkB,EAAEN,IAAI,CAAC;IAC7C,IAAIwD,UAAU,IAAI,CAACnE,iBAAiB,CAACmE,UAAU,CAAC7C,EAAE,CAAC,IAAI,IAAI,CAACyC,YAAY,CAACI,UAAU,CAAC7C,EAAE,CAAC,KAAK,kBAAkB,EAAE;MAC5G8C,KAAK,GAAGD,UAAU,CAACpB,KAAK,CAACuB,OAAO,CAAC3D,IAAI,CAACmD,IAAI,CAAC;IAC/C;IACA,IAAI,IAAI,CAACxD,MAAM,CAACiE,UAAU,EAAE;MACxB,IAAI,IAAI,CAACT,IAAI,KAAK,iBAAiB,IAAI,IAAI,CAACA,IAAI,KAAK,OAAO,IAAI,IAAI,CAACA,IAAI,KAAK,OAAO,IAC9E,IAAI,CAACA,IAAI,KAAK,OAAO,IAAI,IAAI,CAACA,IAAI,KAAK,YAAY,EAAE;QACxD,IAAI,IAAI,CAACxD,MAAM,CAACkE,eAAe,IAAI,IAAI,CAAClE,MAAM,CAACmE,iBAAiB,CAACzD,IAAI,KAAK,UAAU,EAAE;UAClF,IAAI,CAACV,MAAM,CAACkE,eAAe,CAACE,SAAS,CAAC,CAAC;UACvCC,QAAQ,CAACC,sBAAsB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAACC,KAAK,CAACC,OAAO,GAAG,MAAM;QAC5E;MACJ;IACJ;IACA,QAAQ,IAAI,CAAChB,IAAI;MACb,KAAK,iBAAiB;QAClB,IAAI,CAAC9D,iBAAiB,CAAC,IAAI,CAACqE,OAAO,CAAC,EAAE;UAClC,IAAI,OAAO,IAAI,CAACA,OAAO,CAACU,eAAe,CAACC,MAAM,KAAK,QAAQ,EAAE;YACzD,IAAI,CAAC1E,MAAM,CAAC2E,cAAc,CAAC,IAAI,CAACZ,OAAO,CAACU,eAAe,CAACG,WAAW,CAAC;UACxE,CAAC,MACI;YACD,IAAI,CAAC5E,MAAM,CAAC2E,cAAc,CAACE,MAAM,CAAC,IAAI,CAACd,OAAO,CAACU,eAAe,CAACG,WAAW,CAAC,CAAC;UAChF;QACJ;QACA;MACJ,KAAK,OAAO;MACZ,KAAK,OAAO;MACZ,KAAK,OAAO;QACR,IAAI,CAAClF,iBAAiB,CAAC,IAAI,CAACqE,OAAO,CAAC,EAAE;UAClCL,QAAQ,GAAG,IAAI,CAACF,IAAI;UACpBG,IAAI,GAAG/D,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAACmE,OAAO,CAACe,QAAQ,EAAE,IAAI,CAAC;UAClDlB,UAAU,GAAG,IAAI,CAAC5D,MAAM,CAAC+E,UAAU;UACnC,IAAIpB,IAAI,CAACC,UAAU,CAACoB,SAAS,CAAC,EAAE;YAC5B,IAAI,CAAChF,MAAM,CAACiF,cAAc,CAACrB,UAAU,CAACoB,SAAS,EAAE,IAAI,CAACjB,OAAO,CAACU,eAAe,CAACO,SAAS,EAAErB,IAAI,EAAE,IAAI,CAAC;UACxG;UACA,IAAIA,IAAI,CAACC,UAAU,CAACsB,OAAO,CAAC,EAAE;YAC1B,IAAI,CAAClF,MAAM,CAACiF,cAAc,CAACrB,UAAU,CAACsB,OAAO,EAAE,IAAI,CAACnB,OAAO,CAACU,eAAe,CAACS,OAAO,EAAEvB,IAAI,EAAE,IAAI,CAAC;UACpG;UACA,IAAI,CAACjE,iBAAiB,CAACkE,UAAU,CAACuB,UAAU,CAAC,EAAE;YAC3CxB,IAAI,CAACC,UAAU,CAACuB,UAAU,CAAC,GAAG,IAAI;UACtC;UACA,IAAI,CAACzF,iBAAiB,CAACkE,UAAU,CAACwB,KAAK,CAAC,IAAIzB,IAAI,CAACC,UAAU,CAACwB,KAAK,CAAC,EAAE;YAChE,OAAOzB,IAAI,CAACC,UAAU,CAACwB,KAAK,CAAC;UACjC;UACA,IAAI,CAAC1F,iBAAiB,CAACkE,UAAU,CAACyB,QAAQ,CAAC,IAAI1B,IAAI,CAACC,UAAU,CAACyB,QAAQ,CAAC,EAAE;YACtE1B,IAAI,CAACC,UAAU,CAACyB,QAAQ,CAAC,GAAG,IAAI;UACpC;UACA,IAAI,IAAI,CAACtB,OAAO,EAAE;YACd,IAAIuB,QAAQ,GAAG,IAAI,CAACtF,MAAM,CAACuF,cAAc,CAACvB,OAAO,CAAC,IAAI,CAACD,OAAO,CAAC;YAC/D,IAAI,CAAC/D,MAAM,CAACwF,SAAS,CAAC7B,IAAI,EAAED,QAAQ,EAAE4B,QAAQ,CAAC;UACnD;QACJ,CAAC,MACI,IAAI,IAAI,CAACtF,MAAM,CAACyF,QAAQ,CAACC,MAAM,KAAK,CAAC,EAAE;UACxC,IAAI,CAAC1F,MAAM,CAACwF,SAAS,CAAC,CAAC;QAC3B;QACA;MACJ,KAAK,WAAW;MAChB,KAAK,aAAa;QACd,IAAI,CAAC9F,iBAAiB,CAAC,IAAI,CAACqE,OAAO,CAAC,EAAE;UAClC,IAAI,CAAC/D,MAAM,CAAC2F,kBAAkB,CAAC,IAAI,CAAC5B,OAAO,CAACU,eAAe,CAACG,WAAW,CAAC;QAC5E,CAAC,MACI,IAAI,IAAI,CAAC5E,MAAM,CAACyF,QAAQ,CAACC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAClC,IAAI,KAAK,WAAW,EAAE;UACrE,IAAIoC,MAAM,GAAG,IAAI,CAAC5F,MAAM,CAAC6F,UAAU,CAACC,eAAe,CAAC,CAAC;UACrD,IAAIC,YAAY,GAAG,IAAI,CAAC/F,MAAM,CAAC+E,UAAU;UACzC,IAAI,IAAI,CAAC/E,MAAM,CAAC+E,UAAU,CAAC,UAAU,CAAC,EAAE;YACpCa,MAAM,CAACG,YAAY,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC;UACxC;UACA,IAAI,IAAI,CAAC/F,MAAM,CAAC+E,UAAU,CAAC,WAAW,CAAC,EAAE;YACrCa,MAAM,CAACG,YAAY,CAAC,WAAW,CAAC,CAAC,GAAG,IAAI;UAC5C;UACA,IAAI,CAAC/F,MAAM,CAACwF,SAAS,CAACI,MAAM,CAAC;QACjC;QACA;MACJ,KAAK,YAAY;QACb,IAAK,IAAI,CAAC5F,MAAM,CAACmE,iBAAiB,CAAC6B,IAAI,KAAK,MAAM,IAAI,IAAI,CAAChG,MAAM,CAACkE,eAAe,CAAC+B,kBAAkB,CAACP,MAAM,GAAG,CAAC,IACvG,IAAI,CAAC1F,MAAM,CAACmE,iBAAiB,CAAC6B,IAAI,KAAK,MAAM,IAAI,IAAI,CAAChG,MAAM,CAACkE,eAAe,CAACgC,yBAAyB,CAAC,CAAC,CAACR,MAAO,EAAE;UACtH,IAAI,CAAC1F,MAAM,CAAC6F,UAAU,CAACM,iBAAiB,CAAC,CAAC;QAC9C,CAAC,MACI;UACD,IAAI,CAACnG,MAAM,CAAC6F,UAAU,CAACO,YAAY,CAAC,IAAI,CAACrC,OAAO,CAAC;QACrD;QACA;MACJ,KAAK,QAAQ;QACT,IAAI,CAACrE,iBAAiB,CAAC,IAAI,CAACqE,OAAO,CAAC,EAAE;UAClCJ,IAAI,GAAG/D,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAACmE,OAAO,CAACe,QAAQ,EAAE,IAAI,CAAC;UAClDlB,UAAU,GAAG,IAAI,CAAC5D,MAAM,CAAC+E,UAAU;UACnC,IAAI,CAACrF,iBAAiB,CAACkE,UAAU,CAACyC,QAAQ,CAAC,EAAE;YACzC1C,IAAI,CAACC,UAAU,CAACyC,QAAQ,CAAC,GAAGC,QAAQ,CAAC3C,IAAI,CAACC,UAAU,CAACyC,QAAQ,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG1C,IAAI,CAACC,UAAU,CAACyC,QAAQ,CAAC;UAC5G,CAAC,MACI;YACD1C,IAAI,CAACC,UAAU,CAACoB,SAAS,CAAC,GAAG,IAAIuB,IAAI,CAAC,IAAI,CAACxC,OAAO,CAACe,QAAQ,CAAClB,UAAU,CAACoB,SAAS,CAAC,CAAC;YAClF,IAAIE,OAAO,GAAG,IAAIqB,IAAI,CAAC,IAAI,CAACxC,OAAO,CAACe,QAAQ,CAAClB,UAAU,CAACoB,SAAS,CAAC,CAAC;YACnEE,OAAO,CAACsB,OAAO,CAACtB,OAAO,CAACuB,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;YACtC9C,IAAI,CAACC,UAAU,CAACsB,OAAO,CAAC,GAAGA,OAAO;UACtC;UACA,IAAI,CAACxF,iBAAiB,CAACiE,IAAI,CAACC,UAAU,CAAC8C,SAAS,CAAC,CAAC,EAAE;YAChD,IAAI/C,IAAI,CAACC,UAAU,CAAC8C,SAAS,CAAC,KAAK,IAAI,EAAE;cACrC/C,IAAI,CAACC,UAAU,CAAC8C,SAAS,CAAC,GAAG,KAAK;YACtC;UACJ;UACA,IAAI/C,IAAI,CAACC,UAAU,CAACoB,SAAS,CAAC,EAAE;YAC5B,IAAI,CAAChF,MAAM,CAACiF,cAAc,CAACrB,UAAU,CAACoB,SAAS,EAAE,IAAI,CAACjB,OAAO,CAACU,eAAe,CAACO,SAAS,EAAErB,IAAI,EAAE,IAAI,CAAC;UACxG;UACA,IAAI,CAAC3D,MAAM,CAAC2G,gBAAgB,CAAChD,IAAI,CAAC;QACtC;QACA;MACJ,KAAK,QAAQ;QACT,IAAI,CAAC3D,MAAM,CAAC4G,UAAU,CAAC,CAAC;QACxB;MACJ,KAAK,MAAM;QACP,IAAI,CAAC5G,MAAM,CAAC6F,UAAU,CAACgB,cAAc,CAACC,UAAU,GAAG,KAAK;QACxD,IAAI,CAAC9G,MAAM,CAACkB,QAAQ,CAAC6F,IAAI,CAACC,QAAQ,CAAC,CAAC;QACpC;MACJ,KAAK,YAAY,GAAGlD,KAAK;QACrB,IAAI,CAAC3D,2BAA2B,GAAG,IAAI;QACvC,IAAI,CAACH,MAAM,CAACiH,uBAAuB,CAACC,wBAAwB,CAAC,IAAI,CAACnD,OAAO,EAAED,KAAK,CAAC;QACjF;MACJ,KAAK,MAAM;MACX,KAAK,QAAQ;QACT,IAAI,CAAC9D,MAAM,CAACmH,cAAc,CAAC,IAAI,CAACpD,OAAO,CAAC;QACxC;MACJ,KAAK,QAAQ;QACT,IAAI,CAAC/D,MAAM,CAACoH,MAAM,CAAC,CAAC;QACpB;MACJ,KAAK,SAAS;QACV,IAAI,CAACpH,MAAM,CAACqH,OAAO,CAAC,CAAC;QACrB;MACJ,KAAK,MAAM;MACX,KAAK,OAAO;QACR,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC9D,IAAI,CAAC;QACzB;MACJ,KAAK,WAAW;QACZ,IAAI,CAAC+D,aAAa,CAAClH,IAAI,CAAC;QACxB;IACR;EACJ,CAAC;EACDf,WAAW,CAACkC,SAAS,CAAC+F,aAAa,GAAG,UAAUlH,IAAI,EAAE;IAClD,IAAIJ,KAAK,GAAG,IAAI;IAChB,IAAI,CAACuH,MAAM,GAAG,IAAI;IAClB,IAAIzB,YAAY,GAAG,IAAI,CAAC/F,MAAM,CAAC+E,UAAU;IACzC,IAAI0C,kBAAkB,GAAG,IAAI,CAACC,cAAc,CAACrH,IAAI,CAACU,OAAO,CAAC;IAC1D,IAAIrB,iBAAiB,CAAC,IAAI,CAACM,MAAM,CAAC2H,gBAAgB,CAACC,UAAU,CAAC,IAAI,IAAI,CAAC5H,MAAM,CAAC2H,gBAAgB,CAACC,UAAU,CAACC,IAAI,KAAK,MAAM,EAAE;MACvHJ,kBAAkB,CAACK,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC3C;IACA,IAAIC,SAAS,GAAG;MACZhE,OAAO,EAAE,IAAI,CAACA,OAAO;MACrBiE,WAAW,EAAE,cAAc;MAC3BC,SAAS,EAAER,kBAAkB;MAC7B5G,MAAM,EAAE,KAAK;MACbL,MAAM,EAAE,IAAI,CAAC0H;IACjB,CAAC;IACD;IACA,IAAI,CAAClI,MAAM,CAACW,OAAO,CAAC,aAAa,EAAEoH,SAAS,EAAE,UAAUA,SAAS,EAAE;MAC/D,IAAI,CAACrI,iBAAiB,CAACO,KAAK,CAACD,MAAM,CAACmI,gBAAgB,CAAC,IAAIlI,KAAK,CAACD,MAAM,CAACmI,gBAAgB,CAACC,aAAa,KAAK,SAAS,EAAE;QAChHnI,KAAK,CAACD,MAAM,CAACqI,WAAW,CAAC,CAAC;MAC9B,CAAC,MACI;QACDpI,KAAK,CAACD,MAAM,CAACsI,WAAW,CAAC,CAAC;MAC9B;MACArI,KAAK,CAACD,MAAM,CAACuI,eAAe,CAACC,SAAS,CAACvI,KAAK,CAAC8D,OAAO,CAACgC,YAAY,CAAC/E,EAAE,CAAC,EAAEyG,kBAAkB,CAAC;MAC1FxH,KAAK,CAACD,MAAM,CAACuI,eAAe,CAACE,aAAa,CAACxI,KAAK,CAAC8D,OAAO,CAACU,eAAe,CAACiE,QAAQ,EAAEzI,KAAK,CAAC8D,OAAO,CAACU,eAAe,CAACC,MAAM,CAAC;IAC5H,CAAC,CAAC;EACN,CAAC;EACDpF,WAAW,CAACkC,SAAS,CAAC8F,SAAS,GAAG,UAAU9D,IAAI,EAAE;IAC9C,IAAIvD,KAAK,GAAG,IAAI;IAChB,IAAI,CAACuH,MAAM,GAAG,IAAI;IAClB,IAAIzB,YAAY,GAAG,IAAI,CAAC/F,MAAM,CAAC+E,UAAU;IACzC,IAAI2D,QAAQ,GAAG,IAAI,CAAC3E,OAAO,CAACU,eAAe,CAACiE,QAAQ;IACpD,IAAIC,YAAY,GAAGnF,IAAI,KAAK,OAAO,GAAG,IAAI,CAACtD,YAAY,GAAGwI,QAAQ,CAAC,IAAI,CAACxI,YAAY,GAAG,CAAC,CAAC,CAACA,YAAY;IACtG,IAAI0I,aAAa,GAAGpF,IAAI,KAAK,MAAM,GAAG,IAAI,CAACtD,YAAY,GAAGwI,QAAQ,CAAC,IAAI,CAACxI,YAAY,GAAG,CAAC,CAAC,CAACA,YAAY;IACtG,IAAI2I,cAAc,GAAG,CACjB;MAAE,mBAAmB,EAAEF,YAAY;MAAE,oBAAoB,EAAEC;IAAc,CAAC,CAC7E;IACD,IAAIb,SAAS,GAAG;MACZhE,OAAO,EAAE,IAAI,CAACA,OAAO;MACrB+E,mBAAmB,EAAED,cAAc;MACnCb,WAAW,EAAE,cAAc;MAC3BnH,MAAM,EAAE,KAAK;MACbL,MAAM,EAAE,IAAI,CAAC0H;IACjB,CAAC;IACD,IAAI,CAAClI,MAAM,CAACW,OAAO,CAAC,aAAa,EAAEoH,SAAS,EAAE,UAAUA,SAAS,EAAE;MAC/D,IAAI,CAACrI,iBAAiB,CAACO,KAAK,CAACD,MAAM,CAACmI,gBAAgB,CAAC,IAAIlI,KAAK,CAACD,MAAM,CAACmI,gBAAgB,CAACC,aAAa,KAAK,SAAS,EAAE;QAChHnI,KAAK,CAACD,MAAM,CAACqI,WAAW,CAAC,CAAC;MAC9B,CAAC,MACI;QACDpI,KAAK,CAACD,MAAM,CAACsI,WAAW,CAAC,CAAC;MAC9B;MACA,IAAIP,SAAS,CAAClH,MAAM,KAAK,KAAK,EAAE;QAC5BZ,KAAK,CAACD,MAAM,CAACuI,eAAe,CAACQ,SAAS,CAAC9I,KAAK,CAAC8D,OAAO,CAACgC,YAAY,CAAC/E,EAAE,CAAC,EAAE6H,cAAc,CAAC;MAC1F;IACJ,CAAC,CAAC;EACN,CAAC;EACD;EACAvJ,WAAW,CAACkC,SAAS,CAACkG,cAAc,GAAG,UAAU3G,OAAO,EAAE;IACtD;IACA,IAAIiI,wBAAwB;IAC5B;IACA,IAAI,IAAI,CAAChJ,MAAM,CAAC4C,SAAS,EAAE;MACvB,IAAIqG,GAAG,GAAG,IAAI,CAACjJ,MAAM,CAACe,OAAO,CAACmI,qBAAqB,CAAC,CAAC;MACrD,IAAIC,UAAU,GAAGC,MAAM,CAACC,WAAW,IAAIhF,QAAQ,CAACiF,eAAe,CAACH,UAAU,IACtE9E,QAAQ,CAACkF,IAAI,CAACJ,UAAU;MAC5B,IAAIK,UAAU,GAAGnF,QAAQ,CAACiF,eAAe,CAACE,UAAU,IAAInF,QAAQ,CAACkF,IAAI,CAACC,UAAU,IAAI,CAAC;MACrFR,wBAAwB,GAAGC,GAAG,CAACQ,IAAI,GAAGN,UAAU,GAAGK,UAAU;IACjE,CAAC,MACI;MACDR,wBAAwB,GAAG,IAAI,CAAChJ,MAAM,CAAC0J,aAAa,CAAC,IAAI,CAAC1J,MAAM,CAACe,OAAO,CAAC,CAAC0I,IAAI;IAClF;IACA,IAAIE,QAAQ;IACZ,IAAIC,qBAAqB;IACzB,IAAI,IAAI,CAAC5J,MAAM,CAAC4C,SAAS,EAAE;MACvB+G,QAAQ,GAAGE,IAAI,CAACC,GAAG,CAACd,wBAAwB,GAAG,IAAI,CAAChJ,MAAM,CAAC+J,gBAAgB,CAACC,YAAY,CAACC,WAAW,GAChG,IAAI,CAAClG,OAAO,CAACU,eAAe,CAACgF,IAAI,GAAG,IAAI,CAACzJ,MAAM,CAAC+J,gBAAgB,CAACG,aAAa,CAACf,UAAU,CAAC;MAC9FS,qBAAqB,GAAGC,IAAI,CAACC,GAAG,CAAC,IAAI,CAACK,eAAe,GAAGR,QAAQ,CAAC;IACrE,CAAC,MACI;MACDA,QAAQ,GAAGX,wBAAwB,GAAG,IAAI,CAAChJ,MAAM,CAAC+J,gBAAgB,CAACC,YAAY,CAACI,UAAU,GACtF,IAAI,CAACrG,OAAO,CAACU,eAAe,CAACgF,IAAI,GAAG,IAAI,CAACzJ,MAAM,CAAC+J,gBAAgB,CAACG,aAAa,CAACf,UAAU;MAC7FS,qBAAqB,GAAG,IAAI,CAACO,eAAe,GAAGR,QAAQ;IAC3D;IACA,IAAIU,iBAAiB,GAAGR,IAAI,CAACS,IAAI,CAACV,qBAAqB,GAAG,IAAI,CAAC5J,MAAM,CAACuK,WAAW,CAAC;IAClF,IAAIvF,SAAS,GAAG,IAAI,CAACjB,OAAO,CAACU,eAAe,CAACO,SAAS;IACtD,IAAI,CAACtF,iBAAiB,CAAC,IAAI,CAACM,MAAM,CAAC2H,gBAAgB,CAACC,UAAU,CAAC,IAAI,IAAI,CAAC5H,MAAM,CAAC2H,gBAAgB,CAACC,UAAU,CAACC,IAAI,KAAK,MAAM,EAAE;MACxHwC,iBAAiB,GAAGR,IAAI,CAACS,IAAI,CAACV,qBAAqB,GAAG,IAAI,CAAC5J,MAAM,CAAC2H,gBAAgB,CAAC6C,gBAAgB,CAAC;MACpGH,iBAAiB,IAAI,CAAC;IAC1B;IACA,IAAII,oBAAoB;IACxB,IAAI,CAAC/K,iBAAiB,CAAC,IAAI,CAACM,MAAM,CAAC2H,gBAAgB,CAACC,UAAU,CAAC,KAAK,IAAI,CAAC5H,MAAM,CAAC2H,gBAAgB,CAACC,UAAU,CAACC,IAAI,KAAK,SAAS,IAAI,IAAI,CAAC7H,MAAM,CAAC2H,gBAAgB,CAACC,UAAU,CAACC,IAAI,KAAK,MAAM,CAAC,EAAE;MACxLwC,iBAAiB,GAAGR,IAAI,CAACS,IAAI,CAACV,qBAAqB,GAAG,IAAI,CAAC5J,MAAM,CAAC2H,gBAAgB,CAAC6C,gBAAgB,CAAC;MACpGH,iBAAiB,IAAI,CAAC;MACtBI,oBAAoB,GAAG,IAAI,CAACzK,MAAM,CAAC0K,aAAa,CAACC,UAAU,CAAC3F,SAAS,EAAEqF,iBAAiB,EAAE,IAAI,CAACrK,MAAM,CAAC2H,gBAAgB,CAACC,UAAU,CAACC,IAAI,CAAC+C,iBAAiB,CAAC,CAAC,EAAE,IAAI,CAAC7G,OAAO,EAAE,KAAK,CAAC;IACpL,CAAC,MACI;MACD0G,oBAAoB,GAChB,IAAI,CAACzK,MAAM,CAAC0K,aAAa,CAACC,UAAU,CAAC3F,SAAS,EAAEqF,iBAAiB,EAAE,IAAI,CAACtG,OAAO,CAACU,eAAe,CAAC4B,QAAQ,GAAG,CAAC,GACxG,IAAI,CAACtC,OAAO,CAACU,eAAe,CAACoG,YAAY,GAAI,IAAI,CAAC7K,MAAM,CAAC2H,gBAAgB,CAACC,UAAU,CAACC,IAAI,KAAK,MAAM,GACpG,IAAI,CAAC7H,MAAM,CAAC2H,gBAAgB,CAACC,UAAU,CAACC,IAAI,CAAC+C,iBAAiB,CAAC,CAAC,GAChE,IAAI,CAAC5K,MAAM,CAAC2H,gBAAgB,CAACmD,OAAO,CAACjD,IAAI,CAAC+C,iBAAiB,CAAC,CAAC,EAAE,IAAI,CAAC7G,OAAO,EAAE,KAAK,CAAC;IAC/F;IACA,OAAO0G,oBAAoB;EAC/B,CAAC;EACDnL,WAAW,CAACkC,SAAS,CAACM,qBAAqB,GAAG,UAAUzB,IAAI,EAAE;IAC1D,IAAIJ,KAAK,GAAG,IAAI;IAChB,IAAIO,MAAM,GAAGH,IAAI,CAACE,KAAK,GAAGF,IAAI,CAACE,KAAK,CAACC,MAAM,GACvC,CAAC,IAAI,CAACR,MAAM,CAAC+K,WAAW,GAAG,IAAI,CAAC/K,MAAM,CAAC+K,WAAW,CAACC,gBAAgB,CAAC,CAAC,GACjE,IAAI,CAAChL,MAAM,CAAC+J,gBAAgB,CAAC7B,aAAa;IAClD;IACA,IAAK,CAACxI,iBAAiB,CAAC,IAAI,CAACM,MAAM,CAAC6F,UAAU,CAAC,IAAI,IAAI,CAAC7F,MAAM,CAAC6F,UAAU,CAACgB,cAAc,IAAI,IAAI,CAAC7G,MAAM,CAAC6F,UAAU,CAACgB,cAAc,CAACC,UAAU,IAAItG,MAAM,CAACyK,aAAa,CAACC,SAAS,CAACC,QAAQ,CAAC,OAAO,CAAC,IAAK3K,MAAM,CAACyK,aAAa,CAACC,SAAS,CAACC,QAAQ,CAAC,wBAAwB,CAAC,EAAE;MACpQ,IAAI,CAACnL,MAAM,CAACkB,QAAQ,CAACkK,SAAS,CAAC,CAAC;IACpC;IACA,IAAI,CAAC1L,iBAAiB,CAACW,IAAI,CAACU,OAAO,CAAC,IAAIV,IAAI,CAACU,OAAO,CAACC,EAAE,KAAK,IAAI,CAAChB,MAAM,CAACe,OAAO,CAACC,EAAE,GAAG,cAAc,EAAE;MACjG,IAAI,CAACmJ,eAAe,GAAGxK,QAAQ,CAAC,OAAO,EAAEU,IAAI,CAAC,CAACgL,OAAO;IAC1D;IACA,IAAInD,aAAa,GAAGzI,OAAO,CAACe,MAAM,EAAE,wBAAwB,CAAC;IAC7D,IAAI0H,aAAa,EAAE;MACf,IAAI,CAACA,aAAa,GAAG7H,IAAI,CAACG,MAAM,GAAG0H,aAAa;IACpD;IACA7H,IAAI,CAACC,OAAO,GAAGb,OAAO,CAACe,MAAM,EAAE,QAAQ,CAAC;IACxCH,IAAI,CAACI,QAAQ,GAAGhB,OAAO,CAACe,MAAM,EAAE,cAAc,CAAC;IAC/C,IAAI8K,WAAW,GAAG7L,OAAO,CAACe,MAAM,EAAE,UAAU,CAAC;IAC7C,IAAI+K,QAAQ,GAAG9L,OAAO,CAACe,MAAM,EAAEpB,IAAI,CAACmM,QAAQ,CAAC;IAC7C,IAAI,CAACA,QAAQ,IAAI,IAAI,CAACvL,MAAM,CAAC6F,UAAU,IAAI,IAAI,CAAC7F,MAAM,CAAC6F,UAAU,CAACgB,cAAc,IACzE,IAAI,CAAC7G,MAAM,CAAC6F,UAAU,CAACgB,cAAc,CAACC,UAAU,IAAI,IAAI,CAAC9G,MAAM,CAAC6F,UAAU,CAAC2F,YAAY,CAACC,SAAS,IACjG,CAAC,IAAI,CAACzL,MAAM,CAAC6F,UAAU,CAAC2F,YAAY,CAACC,SAAS,CAACC,IAAI,EAAE;MACxD,IAAI,CAAC1L,MAAM,CAACkB,QAAQ,CAAC6F,IAAI,CAACC,QAAQ,CAAC,CAAC;MACpC,IAAI,CAAChH,MAAM,CAAC6F,UAAU,CAACgB,cAAc,CAACC,UAAU,GAAG,KAAK;IAC5D;IACA,IAAI,IAAI,CAAC9G,MAAM,CAAC2L,QAAQ,EAAE;MACtB,IAAI,CAACxJ,WAAW,CAACyJ,WAAW,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,mBAAmB,EAAE,aAAa,EAAE,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,WAAW,EAAE,WAAW,CAAC,EAAE,KAAK,CAAC;IAClK;IACA,IAAKlM,iBAAiB,CAACW,IAAI,CAACC,OAAO,CAAC,IAAIZ,iBAAiB,CAACW,IAAI,CAACI,QAAQ,CAAC,IAAK,IAAI,CAACoL,gBAAgB,CAACnG,MAAM,KAAK,CAAC,EAAE;MAC7G,IAAI,CAAChG,iBAAiB,CAACW,IAAI,CAACwD,UAAU,CAAC,IAAI,CAACnE,iBAAiB,CAAC4L,WAAW,CAAC,IAAI,CAAC5L,iBAAiB,CAACD,OAAO,CAACe,MAAM,EAAE,YAAY,CAAC,CAAC,EAAE;QAC7HH,IAAI,CAACQ,MAAM,GAAG,KAAK;MACvB,CAAC,MACI;QACDR,IAAI,CAACQ,MAAM,GAAG,IAAI;MACtB;IACJ;IACA,IAAI,CAACR,IAAI,CAACQ,MAAM,EAAE;MACd,IAAIyE,QAAQ,GAAG,CAAC,CAAC;MACjB,IAAIjF,IAAI,CAACC,OAAO,EAAE;QACd;QACAgF,QAAQ,GAAGgB,QAAQ,CAACjG,IAAI,CAACC,OAAO,CAACwL,YAAY,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;MACtE,CAAC,MACI,IAAIzL,IAAI,CAACI,QAAQ,EAAE;QACpB;QACA6E,QAAQ,GAAGgB,QAAQ,CAACjG,IAAI,CAACI,QAAQ,CAACqL,YAAY,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;MACvE;MACA,IAAI,IAAI,CAAC9L,MAAM,CAACkE,eAAe,IAAI,IAAI,CAAClE,MAAM,CAAC+L,cAAc,IAAI,CAAC1L,IAAI,CAACwD,UAAU,IAAI,CAACnE,iBAAiB,CAACW,IAAI,CAACI,QAAQ,CAAC,EAAE;QACpH,IAAI,CAACT,MAAM,CAACkE,eAAe,CAAC8H,SAAS,CAAC1G,QAAQ,CAAC;MACnD;MACA,IAAI,CAACjF,IAAI,CAACwD,UAAU,EAAE;QAClB,IAAI,CAACE,OAAO,GAAG,IAAI,CAAC/D,MAAM,CAACuF,cAAc,CAACe,QAAQ,CAAChB,QAAQ,CAAC2G,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MAChF;MACA,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG9L,IAAI,CAACoC,KAAK,EAAEyJ,EAAE,GAAGC,EAAE,CAACzG,MAAM,EAAEwG,EAAE,EAAE,EAAE;QACpD,IAAI1I,IAAI,GAAG2I,EAAE,CAACD,EAAE,CAAC;QACjB;QACA,IAAI,CAAC1I,IAAI,CAAC4I,SAAS,EAAE;UACjB,IAAK5L,MAAM,CAAC0K,SAAS,CAACC,QAAQ,CAAC,6BAA6B,CAAC,KAAO3H,IAAI,CAAC6I,IAAI,KAAK,IAAI,CAACC,SAAS,CAAC,WAAW,CAAC,IAAM9I,IAAI,CAAC6I,IAAI,KAAK,IAAI,CAACC,SAAS,CAAC,WAAW,CAAE,CAAC,EAAE;YAC5J,IAAI,CAACC,SAAS,CAACC,IAAI,CAAChJ,IAAI,CAAC6I,IAAI,CAAC;UAClC,CAAC,MACI;YACD,IAAI,CAACI,gBAAgB,CAACjJ,IAAI,EAAEhD,MAAM,EAAE8E,QAAQ,CAAC;UACjD;QACJ;MACJ;MACAjF,IAAI,CAAC0D,OAAO,GAAG,IAAI,CAACA,OAAO;MAC3B1D,IAAI,CAACK,IAAI,GAAG,SAAS;MACrBL,IAAI,CAACqM,YAAY,GAAG,IAAI,CAACA,YAAY;MACrCrM,IAAI,CAACkM,SAAS,GAAG,IAAI,CAACA,SAAS;MAC/BlM,IAAI,CAACsM,cAAc,GAAG,EAAE;MACxB,IAAI,CAACjN,iBAAiB,CAACW,IAAI,CAAC0D,OAAO,CAAC,IAAI1D,IAAI,CAAC0D,OAAO,CAAC6I,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC5M,MAAM,CAAC6M,QAAQ,KAAK,cAAc,EAAE;QACzGxM,IAAI,CAACQ,MAAM,GAAG,IAAI;QAClB;MACJ;MACA,IAAIiM,iBAAiB,GAAG,IAAIhN,QAAQ,CAAC,CAAC;MACtC,IAAI,CAACE,MAAM,CAACW,OAAO,CAAC,iBAAiB,EAAEN,IAAI,EAAE,UAAU0M,GAAG,EAAE;QACxDD,iBAAiB,CAACE,OAAO,CAACD,GAAG,CAAC;QAC9B9M,KAAK,CAACsM,SAAS,GAAGQ,GAAG,CAACR,SAAS;QAC/BtM,KAAK,CAACyM,YAAY,GAAGK,GAAG,CAACL,YAAY;QACrC,IAAI,CAACK,GAAG,CAAClJ,UAAU,IAAIkJ,GAAG,CAACR,SAAS,CAAC7G,MAAM,KAAKqH,GAAG,CAACtK,KAAK,CAACiD,MAAM,EAAE;UAC9DzF,KAAK,CAACgN,gBAAgB,CAAC,CAAC;UACxBF,GAAG,CAAClM,MAAM,GAAG,IAAI;QACrB;QACA,IAAIZ,KAAK,CAACsM,SAAS,CAAC7G,MAAM,GAAG,CAAC,EAAE;UAC5BzF,KAAK,CAACkC,WAAW,CAACoK,SAAS,CAACtM,KAAK,CAACsM,SAAS,CAAC;QAChD;QACA,IAAItM,KAAK,CAACyM,YAAY,CAAChH,MAAM,GAAG,CAAC,EAAE;UAC/BzF,KAAK,CAACkC,WAAW,CAACyJ,WAAW,CAAC3L,KAAK,CAACyM,YAAY,EAAE,KAAK,CAAC;QAC5D;QACA,IAAIrM,IAAI,CAACsM,cAAc,CAACjH,MAAM,GAAG,CAAC,EAAE;UAChCzF,KAAK,CAACkC,WAAW,CAACoK,SAAS,CAAClM,IAAI,CAACsM,cAAc,CAAC;QACpD;MACJ,CAAC,CAAC;MACF,OAAOG,iBAAiB;IAC5B;EACJ,CAAC;EACDxN,WAAW,CAACkC,SAAS,CAACiL,gBAAgB,GAAG,UAAUjJ,IAAI,EAAEhD,MAAM,EAAE8E,QAAQ,EAAE;IACvE,IAAI4H,GAAG,GAAG,IAAI,CAACzJ,YAAY,CAACD,IAAI,CAACxC,EAAE,CAAC;IACpC,IAAIuK,QAAQ,GAAG9L,OAAO,CAACe,MAAM,EAAEpB,IAAI,CAACmM,QAAQ,CAAC;IAC7C,IAAI4B,OAAO,GAAG,EAAE;IAChB,IAAIC,cAAc,GAAG3N,OAAO,CAACe,MAAM,EAAE,wBAAwB,CAAC,IAC1Df,OAAO,CAACe,MAAM,EAAE,yBAAyB,CAAC,IAAIf,OAAO,CAACe,MAAM,EAAE,wBAAwB,CAAC;IAC3F,IAAI+K,QAAQ,EAAE;MACV,IAAI,EAAE2B,GAAG,KAAK,MAAM,IAAIA,GAAG,KAAK,QAAQ,CAAC,EAAE;QACvC,IAAI,CAACX,SAAS,CAACC,IAAI,CAAChJ,IAAI,CAAC6I,IAAI,CAAC;MAClC;IACJ,CAAC,MACI;MACD,QAAQa,GAAG;QACP,KAAK,iBAAiB;UAClB,IAAI,CAAC,IAAI,CAAClN,MAAM,CAACqN,YAAY,CAACC,YAAY,IAAI,CAAC,IAAI,CAACtN,MAAM,CAAC6F,UAAU,EAAE;YACnE,IAAI,CAAC0H,oBAAoB,CAAC/J,IAAI,CAAC6I,IAAI,CAAC;UACxC;UACA,IAAI,IAAI,CAACrM,MAAM,CAACyF,QAAQ,CAACC,MAAM,KAAK,CAAC,EAAE;YACnC,IAAI,CAAC6G,SAAS,CAACC,IAAI,CAAChJ,IAAI,CAAC6I,IAAI,CAAC;UAClC;UACA;QACJ,KAAK,KAAK;UACN,IAAI,CAAC,IAAI,CAACrM,MAAM,CAACqN,YAAY,CAACG,WAAW,IAAI,CAAC,IAAI,CAACxN,MAAM,CAAC6F,UAAU,EAAE;YAClE,IAAI,CAAC0H,oBAAoB,CAAC/J,IAAI,CAAC6I,IAAI,CAAC;UACxC;UACA;QACJ,KAAK,MAAM;QACX,KAAK,QAAQ;UACT,IAAI,CAACE,SAAS,CAACC,IAAI,CAAChJ,IAAI,CAAC6I,IAAI,CAAC;UAC9B;QACJ,KAAK,SAAS;UACV,IAAI,CAAC3M,iBAAiB,CAAC,IAAI,CAACqE,OAAO,CAAC,IAAI,IAAI,CAACA,OAAO,CAAC0J,eAAe,EAAE;YAClE,IAAI,CAAClB,SAAS,CAACC,IAAI,CAAChJ,IAAI,CAAC6I,IAAI,CAAC;UAClC,CAAC,MACI,IAAI,CAAC,IAAI,CAACrM,MAAM,CAACqN,YAAY,CAACC,YAAY,IAAI,CAAC,IAAI,CAACtN,MAAM,CAAC6F,UAAU,EAAE;YACxE,IAAI,CAAC0H,oBAAoB,CAAC/J,IAAI,CAAC6I,IAAI,CAAC;UACxC,CAAC,MACI;YACD,IAAI,CAAC3M,iBAAiB,CAAC,IAAI,CAACqE,OAAO,CAAC,IAAI,CAAC,IAAI,CAACA,OAAO,CAACU,eAAe,CAACiJ,WAAW,EAAE;cAC/EP,OAAO,CAACX,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,aAAa,EAAE,IAAI,CAACtB,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;YAClG,CAAC,MACI;cACDa,OAAO,CAACX,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,QAAQ,EAAE,IAAI,CAACtB,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;YACxF;YACA9I,IAAI,CAACf,KAAK,GAAG0K,OAAO;UACxB;UACA,IAAI,IAAI,CAACnN,MAAM,CAACyF,QAAQ,CAACC,MAAM,KAAK,CAAC,EAAE;YACnC,IAAI,CAAC6G,SAAS,CAACC,IAAI,CAAChJ,IAAI,CAAC6I,IAAI,CAAC;UAClC;UACA;QACJ,KAAK,kBAAkB;UACnB;YACI,IAAI5J,KAAK,GAAG,IAAI,CAACoL,oBAAoB,CAAC,CAAC;YACvC,IAAI,CAACnO,iBAAiB,CAAC,IAAI,CAACqE,OAAO,CAAC,IAAI,IAAI,CAACA,OAAO,CAAC0J,eAAe,IAAI,CAAC,IAAI,CAACzN,MAAM,CAAC8N,qBAAqB,EAAE;cACxG,IAAI,CAACvB,SAAS,CAACC,IAAI,CAAChJ,IAAI,CAAC6I,IAAI,CAAC;YAClC,CAAC,MACI,IAAI,CAAC,IAAI,CAACrM,MAAM,CAACqN,YAAY,CAACU,aAAa,IAAItL,KAAK,CAACiD,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC1F,MAAM,CAAC6F,UAAU,EAAE;cAC/F,IAAI,CAAC0H,oBAAoB,CAAC/J,IAAI,CAAC6I,IAAI,CAAC;YACxC,CAAC,MACI,IAAI5J,KAAK,CAACiD,MAAM,GAAG,CAAC,EAAE;cACvBlC,IAAI,CAACf,KAAK,GAAGA,KAAK;YACtB;YACA;UACJ;QACJ,KAAK,YAAY;UACb,IAAI,CAAC,IAAI,CAACzC,MAAM,CAACqN,YAAY,CAACU,aAAa,IAAI,CAAC,IAAI,CAAC/N,MAAM,CAAC6F,UAAU,EAAE;YACpE,IAAI,CAAC0H,oBAAoB,CAAC/J,IAAI,CAAC6I,IAAI,CAAC;UACxC;UACA,IAAI,IAAI,CAACrM,MAAM,CAACyF,QAAQ,CAACC,MAAM,KAAK,CAAC,EAAE;YACnC,IAAI,CAAC6G,SAAS,CAACC,IAAI,CAAChJ,IAAI,CAAC6I,IAAI,CAAC;UAClC;UACA;QACJ,KAAK,UAAU;UACX,IAAI,IAAI,CAACrM,MAAM,CAACgO,QAAQ,KAAK,QAAQ,EAAE;YACnC,IAAI,CAACT,oBAAoB,CAAC/J,IAAI,CAAC6I,IAAI,CAAC;UACxC,CAAC,MACI;YACD,IAAI,IAAI,CAACtI,OAAO,CAACU,eAAe,CAACwJ,cAAc,EAAE;cAC7Cd,OAAO,CAACX,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,QAAQ,EAAE,IAAI,CAACtB,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;YACxF,CAAC,MACI;cACDa,OAAO,CAACX,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,MAAM,EAAE,IAAI,CAACtB,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YACpF;YACA9I,IAAI,CAACf,KAAK,GAAG0K,OAAO;UACxB;UACA;QACJ,KAAK,QAAQ;UACT;YACI,IAAI,CAAC,IAAI,CAACnN,MAAM,CAAC+L,cAAc,IAAI,CAAC,IAAI,CAAC/L,MAAM,CAAC6F,UAAU,IAAI,CAAC,IAAI,CAAC7F,MAAM,CAACqN,YAAY,EAAE;cACrF,IAAI,CAACd,SAAS,CAACC,IAAI,CAAChJ,IAAI,CAAC6I,IAAI,CAAC;YAClC,CAAC,MACI;cACD,IAAIvI,KAAK,GAAG,IAAI,CAAC9D,MAAM,CAACkO,gBAAgB;cACxC,IAAIC,UAAU,GAAG,IAAI,CAACnO,MAAM,CAACkE,eAAe,GAAG,IAAI,CAAClE,MAAM,CAACkE,eAAe,CAAC+B,kBAAkB,CAACP,MAAM,KAAK,CAAC,IACtG,IAAI,CAAC1F,MAAM,CAACkE,eAAe,CAACgC,yBAAyB,CAAC,CAAC,CAACR,MAAM,KAAK,CAAC,GAAG,IAAI,GAAG,KAAK,GAAG,KAAK;cAC/F,IAAI0I,UAAU,GAAG,IAAI,CAACpO,MAAM,CAACuF,cAAc,CAAC,IAAI,CAACvF,MAAM,CAACkE,eAAe,CAACmK,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;cACvG,IAAI,CAAC,IAAI,CAACrO,MAAM,CAACqN,YAAY,CAACC,YAAY,IAAIxJ,KAAK,KAAK,CAAC,IAAIA,KAAK,KAAK,CAAC,CAAC,IAAI,CAACqK,UAAU,IACpF,IAAI,CAACnO,MAAM,CAAC6M,QAAQ,KAAK,cAAc,IACvC,IAAI,CAAC7M,MAAM,CAACuF,cAAc,CAACe,QAAQ,CAACxC,KAAK,CAACmI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACW,KAAK,GAAGwB,UAAU,CAACxB,KAAK,KAAK,CAAC,EAAE;gBAC3F,IAAI,CAACW,oBAAoB,CAAC/J,IAAI,CAAC6I,IAAI,CAAC;cACxC;YACJ;YACA;UACJ;QACJ,KAAK,SAAS;UACV;YACI,IAAI,CAAC,IAAI,CAACrM,MAAM,CAAC+L,cAAc,IAAI,CAAC,IAAI,CAAC/L,MAAM,CAAC6F,UAAU,IAAI,CAAC,IAAI,CAAC7F,MAAM,CAACqN,YAAY,EAAE;cACrF,IAAI,CAACd,SAAS,CAACC,IAAI,CAAChJ,IAAI,CAAC6I,IAAI,CAAC;YAClC,CAAC,MACI;cACD,IAAIiC,GAAG,GAAG,IAAI,CAACtO,MAAM,CAACkE,eAAe,CAACmK,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC;cAChE,IAAIE,QAAQ,GAAG,IAAI,CAACvO,MAAM,CAACkE,eAAe,GAAG,IAAI,CAAClE,MAAM,CAACkE,eAAe,CAAC+B,kBAAkB,CAACP,MAAM,KAAK,CAAC,IACpG,IAAI,CAAC1F,MAAM,CAACkE,eAAe,CAACgC,yBAAyB,CAAC,CAAC,CAACR,MAAM,KAAK,CAAC,GAAG,IAAI,GAAG,KAAK,GAAG,KAAK;cAC/F,IAAI,CAAC,IAAI,CAAC1F,MAAM,CAACqN,YAAY,CAACC,YAAY,IAAIgB,GAAG,KAAK,CAAC,CAAC,IAAIA,GAAG,KAAK,CAAC,IAAI,CAACC,QAAQ,IAC9E,IAAI,CAACvO,MAAM,CAAC6M,QAAQ,KAAK,cAAc,IAAI,IAAI,CAAC7M,MAAM,CAACuF,cAAc,CAACe,QAAQ,CAACgI,GAAG,CAACrC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACW,KAAK,KAAK,CAAC,EAAE;gBACjH,IAAI,CAACW,oBAAoB,CAAC/J,IAAI,CAAC6I,IAAI,CAAC;cACxC;YACJ;YACA;UACJ;QACJ,KAAK,WAAW;UACZ;YACI,IAAItG,YAAY,GAAG,IAAI,CAAC/F,MAAM,CAAC+E,UAAU;YACzC,IAAI,IAAI,CAAC/E,MAAM,CAAC2L,QAAQ,IAAI,CAACyB,cAAc,IAAI1N,iBAAiB,CAACqG,YAAY,CAAC2C,QAAQ,CAAC,IACnF,IAAI,CAAC1I,MAAM,CAACwO,eAAe,CAAClI,QAAQ,CAAChB,QAAQ,CAAC2G,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACwB,eAAe,EAAE;cAChF,IAAI,CAACF,oBAAoB,CAAC/J,IAAI,CAAC6I,IAAI,CAAC;YACxC;YACA;UACJ;QACJ,KAAK,WAAW;UACZ,IAAI,IAAI,CAACrM,MAAM,CAAC2L,QAAQ,IAAI,CAACyB,cAAc,EAAE;YACzC,IAAI,CAACG,oBAAoB,CAAC/J,IAAI,CAAC6I,IAAI,CAAC;UACxC,CAAC,MACI;YACD,IAAI,CAACoC,kBAAkB,CAACjO,MAAM,EAAEgD,IAAI,CAAC;UACzC;UACA;MACR;IACJ;EACJ,CAAC;EACDlE,WAAW,CAACkC,SAAS,CAACiN,kBAAkB,GAAG,UAAUjO,MAAM,EAAEgD,IAAI,EAAE;IAC/D,IAAI2J,OAAO,GAAG,EAAE;IAChB,IAAIvJ,UAAU,GAAG,IAAI,CAAC5D,MAAM,CAAC+E,UAAU;IACvC,IAAI0C,kBAAkB,GAAG,IAAI,CAACC,cAAc,CAAClH,MAAM,CAAC;IACpD,IAAI,CAACN,YAAY,GAAG,IAAI,CAACF,MAAM,CAACuI,eAAe,CAACmG,eAAe,CAACjH,kBAAkB,EAAE,IAAI,CAAC1D,OAAO,CAAC;IACjG,IAAI2E,QAAQ,GAAG,IAAI,CAAC3E,OAAO,CAACU,eAAe,CAACiE,QAAQ;IACpD,IAAI,CAAChJ,iBAAiB,CAACgJ,QAAQ,CAAC,IAAIA,QAAQ,CAAChD,MAAM,GAAG,CAAC,EAAE;MACrD,IAAIhG,iBAAiB,CAACkE,UAAU,CAAC8E,QAAQ,CAAC,IAAI,IAAI,CAACxI,YAAY,KAAK,CAAC,CAAC,EAAE;QACpE,IAAI,CAACqN,oBAAoB,CAAC/J,IAAI,CAAC6I,IAAI,CAAC;MACxC,CAAC,MACI;QACD,IAAI,IAAI,CAACnM,YAAY,KAAK,CAAC,EAAE;UACzBiN,OAAO,CAACX,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,OAAO,EAAE,IAAI,CAACtB,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;QACtF,CAAC,MACI,IAAI,IAAI,CAACpM,YAAY,KAAKwI,QAAQ,CAAChD,MAAM,GAAG,CAAC,EAAE;UAChDyH,OAAO,CAACX,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,MAAM,EAAE,IAAI,CAACtB,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;QACpF,CAAC,MACI;UACDa,OAAO,CAACX,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,OAAO,EAAE,IAAI,CAACtB,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;UAClFa,OAAO,CAACX,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,MAAM,EAAE,IAAI,CAACtB,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;QACpF;QACA9I,IAAI,CAACf,KAAK,GAAG0K,OAAO;MACxB;IACJ,CAAC,MACI;MACD,IAAI,CAACZ,SAAS,CAACC,IAAI,CAAChJ,IAAI,CAAC6I,IAAI,CAAC;IAClC;EACJ,CAAC;EACD/M,WAAW,CAACkC,SAAS,CAAC+L,oBAAoB,GAAG,UAAUlB,IAAI,EAAE;IACzD,IAAIsC,aAAa,GAAG,CAACjP,iBAAiB,CAAC,IAAI,CAACM,MAAM,CAACsD,gBAAgB,CAAC,GAAG,KAAK,GAAG,IAAI;IACnF,IAAIqL,aAAa,EAAE;MACf,IAAI,CAACpC,SAAS,CAACC,IAAI,CAACH,IAAI,CAAC;IAC7B,CAAC,MACI;MACD,IAAI,CAACK,YAAY,CAACF,IAAI,CAACH,IAAI,CAAC;IAChC;EACJ,CAAC;EACD/M,WAAW,CAACkC,SAAS,CAACH,eAAe,GAAG,UAAUhB,IAAI,EAAE;IACpD,IAAI,CAACuO,MAAM,GAAG,IAAI;IAClB,IAAIC,aAAa,GAAG,IAAI,CAAC7O,MAAM,CAAC,MAAM,CAAC,GAAGK,IAAI,CAACU,OAAO,CAAC+N,gBAAgB,CAAC,uCAAuC,CAAC,CAAC,CAAC,CAAC;IACnH,IAAI,CAACpP,iBAAiB,CAACmP,aAAa,CAAC,EAAE;MACnChP,QAAQ,CAAC,CAACgP,aAAa,CAAC,EAAE,WAAW,CAAC;IAC1C;EACJ,CAAC;EACDvP,WAAW,CAACkC,SAAS,CAACkB,YAAY,GAAG,YAAY;IAC7C,IAAIqM,SAAS,GAAG,CAACrP,iBAAiB,CAAC,IAAI,CAACM,MAAM,CAACsD,gBAAgB,CAAC,GAC5D,IAAI,CAACtD,MAAM,CAACsD,gBAAgB,GAAG,IAAI,CAAC0L,eAAe,CAAC,CAAC;IACzD,KAAK,IAAI9C,EAAE,GAAG,CAAC,EAAE+C,WAAW,GAAGF,SAAS,EAAE7C,EAAE,GAAG+C,WAAW,CAACvJ,MAAM,EAAEwG,EAAE,EAAE,EAAE;MACrE,IAAI1I,IAAI,GAAGyL,WAAW,CAAC/C,EAAE,CAAC;MAC1B,IAAI,OAAO1I,IAAI,KAAK,QAAQ,IAAI,IAAI,CAACwL,eAAe,CAAC,CAAC,CAAChL,OAAO,CAACR,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;QACzE,IAAI,CAAC0L,iBAAiB,CAAC1L,IAAI,CAAC;MAChC,CAAC,MACI,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;QAC/B,IAAI,IAAI,CAACwL,eAAe,CAAC,CAAC,CAAChL,OAAO,CAACR,IAAI,CAAC6I,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;UAClD,IAAI,CAAC6C,iBAAiB,CAAC1L,IAAI,CAAC6I,IAAI,EAAE7I,IAAI,CAAC2L,OAAO,CAAC;QACnD,CAAC,MACI,IAAI3L,IAAI,CAAChD,MAAM,KAAKpB,IAAI,CAACgQ,YAAY,EAAE;UACxC,IAAI,CAAC7L,eAAe,CAACiJ,IAAI,CAAChJ,IAAI,CAAC;QACnC,CAAC,MACI;UACD,IAAI,CAACqI,gBAAgB,CAACW,IAAI,CAAChJ,IAAI,CAAC;QACpC;MACJ;IACJ;IACA,OAAO,IAAI,CAACqI,gBAAgB;EAChC,CAAC;EACDvM,WAAW,CAACkC,SAAS,CAACmM,eAAe,GAAG,UAAUnN,MAAM,EAAEgD,IAAI,EAAE6I,IAAI,EAAE8C,OAAO,EAAE;IAC3E,IAAIE,SAAS,GAAG;MACZhD,IAAI,EAAEA,IAAI;MACVrL,EAAE,EAAE,IAAI,CAACsO,UAAU,CAAC9L,IAAI,CAAC;MACzBhD,MAAM,EAAEA,MAAM;MACd2O,OAAO,EAAEA,OAAO,GAAG,UAAU,GAAGA,OAAO,GAAG;IAC9C,CAAC;IACD,OAAOE,SAAS;EACpB,CAAC;EACD/P,WAAW,CAACkC,SAAS,CAAC8K,SAAS,GAAG,UAAUD,IAAI,EAAE;IAC9C,IAAIkD,UAAU,GAAG,IAAI,CAACvP,MAAM,CAACwP,SAAS,CAACC,WAAW,CAACpD,IAAI,CAAC;IACxD,OAAOkD,UAAU;EACrB,CAAC;EACDjQ,WAAW,CAACkC,SAAS,CAAC0N,iBAAiB,GAAG,UAAU1L,IAAI,EAAEkM,OAAO,EAAE;IAC/D,IAAIC,eAAe;IACnB,QAAQnM,IAAI;MACR,KAAK,YAAY;MACjB,KAAK,SAAS;MACd,KAAK,eAAe;MACpB,KAAK,gBAAgB;QACjB,IAAI,CAACD,eAAe,CAACiJ,IAAI,CAAChJ,IAAI,CAAC;QAC/B;MACJ,KAAK,iBAAiB;QAClBmM,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAEpK,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,iBAAiB,CAAC,EAAE,IAAI,CAACsD,UAAU,CAACxQ,IAAI,CAACyQ,QAAQ,EAAEH,OAAO,CAAC,CAAC;QACtI;MACJ,KAAK,QAAQ;QACTC,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAEpK,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,QAAQ,CAAC,EAAE,IAAI,CAACsD,UAAU,CAACxQ,IAAI,CAAC0Q,UAAU,EAAEJ,OAAO,CAAC,CAAC;QAC/H;MACJ,KAAK,SAAS;QACVC,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAEpK,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,SAAS,CAAC,EAAE,IAAI,CAACsD,UAAU,CAACxQ,IAAI,CAAC2Q,WAAW,EAAEL,OAAO,CAAC,CAAC;QACjI;MACJ,KAAK,MAAM;QACPC,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACyQ,QAAQ,EAAErM,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,MAAM,CAAC,EAAE,IAAI,CAACsD,UAAU,CAACxQ,IAAI,CAAC4Q,QAAQ,EAAEN,OAAO,CAAC,CAAC;QAC5H;MACJ,KAAK,QAAQ;QACTC,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACyQ,QAAQ,EAAErM,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,QAAQ,CAAC,EAAE,IAAI,CAACsD,UAAU,CAACxQ,IAAI,CAAC6Q,UAAU,EAAEP,OAAO,CAAC,CAAC;QAChI;MACJ,KAAK,KAAK;QACNC,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAEpK,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,KAAK,CAAC,EAAE,IAAI,CAACsD,UAAU,CAACxQ,IAAI,CAAC8Q,OAAO,EAAER,OAAO,CAAC,CAAC;QACzH;QACAC,eAAe,CAAClN,KAAK,GAAG,EAAE;QAC1BkN,eAAe,CAAClN,KAAK,CAAC+J,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,OAAO,EAAE,IAAI,CAACtB,SAAS,CAAC,OAAO,CAAC,EAAE,IAAI,CAACsD,UAAU,CAACxQ,IAAI,CAAC+Q,YAAY,EAAET,OAAO,CAAC,CAAC,CAAC;QAC7IC,eAAe,CAAClN,KAAK,CAAC+J,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,OAAO,EAAE,IAAI,CAACtB,SAAS,CAAC,OAAO,CAAC,EAAE,IAAI,CAACsD,UAAU,CAACxQ,IAAI,CAACgR,YAAY,EAAEV,OAAO,CAAC,CAAC,CAAC;QAC7I,IAAI,IAAI,CAAC1P,MAAM,CAAC6M,QAAQ,KAAK,cAAc,EAAE;UACzC8C,eAAe,CAAClN,KAAK,CAAC+J,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,OAAO,EAAE,IAAI,CAACtB,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;QACpG;QACAqD,eAAe,CAAClN,KAAK,CAAC+J,IAAI,CAAC,IAAI,CAACmB,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE,WAAW,EAAE,IAAI,CAACtB,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC;QACxG;MACJ,KAAK,YAAY;QACbqD,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAEpK,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,YAAY,CAAC,EAAE,IAAI,CAACsD,UAAU,CAACxQ,IAAI,CAACiR,UAAU,EAAEX,OAAO,CAAC,CAAC;QACnI;MACJ,KAAK,kBAAkB;QACnBC,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAEpK,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,kBAAkB,CAAC,CAAC;QAC9FqD,eAAe,CAAClN,KAAK,GAAG,EAAE;QAC1BkN,eAAe,CAAClN,KAAK,CAAC+J,IAAI,CAAC,CAAC,CAAC,CAAC;QAC9B;MACJ,KAAK,SAAS;QACVmD,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAEpK,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,SAAS,CAAC,CAAC;QACrFqD,eAAe,CAAClN,KAAK,GAAG,EAAE;QAC1BkN,eAAe,CAAClN,KAAK,CAAC+J,IAAI,CAAC,CAAC,CAAC,CAAC;QAC9B;MACJ,KAAK,UAAU;QACXmD,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAEpK,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,oBAAoB,CAAC,CAAC;QAChGqD,eAAe,CAAClN,KAAK,GAAG,EAAE;QAC1BkN,eAAe,CAAClN,KAAK,CAAC+J,IAAI,CAAC,CAAC,CAAC,CAAC;QAC9B;MACJ,KAAK,WAAW;QACZmD,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAEpK,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,WAAW,CAAC,CAAC;QACvF;MACJ,KAAK,WAAW;QACZqD,eAAe,GAAG,IAAI,CAAChC,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAEpK,IAAI,EAAE,IAAI,CAAC8I,SAAS,CAAC,WAAW,CAAC,CAAC;QACvFqD,eAAe,CAAClN,KAAK,GAAG,EAAE;QAC1BkN,eAAe,CAAClN,KAAK,CAAC+J,IAAI,CAAC,CAAC,CAAC,CAAC;IACtC;IACA,IAAImD,eAAe,EAAE;MACjB,IAAI,CAAC9D,gBAAgB,CAACW,IAAI,CAACmD,eAAe,CAAC;IAC/C;EACJ,CAAC;EACDrQ,WAAW,CAACkC,SAAS,CAACoO,UAAU,GAAG,UAAUU,SAAS,EAAEC,UAAU,EAAE;IAChE,OAAO7Q,iBAAiB,CAAC6Q,UAAU,CAAC,GAAGD,SAAS,GAAGC,UAAU;EACjE,CAAC;EACDjR,WAAW,CAACkC,SAAS,CAACqM,oBAAoB,GAAG,YAAY;IACrD,IAAI,CAAC2C,YAAY,GAAG,IAAI,CAACxQ,MAAM,CAACyQ,iBAAiB,CAACC,mBAAmB,CAAC,IAAI,CAAC3M,OAAO,CAAC;IACnF,IAAItB,KAAK,GAAG,EAAE;IACd,IAAI4M,SAAS;IACb,IAAIsB,SAAS,GAAG,CAAC;IACjB,KAAK,IAAIzE,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAACqE,YAAY,EAAEtE,EAAE,GAAGC,EAAE,CAACzG,MAAM,EAAEwG,EAAE,EAAE,EAAE;MAC3D,IAAI0E,WAAW,GAAGzE,EAAE,CAACD,EAAE,CAAC;MACxB,IAAI2E,SAAS,GAAG,IAAI,CAAC7Q,MAAM,CAAC8Q,aAAa,CAACF,WAAW,CAACG,IAAI,CAAC;MAC3D,IAAIC,SAAS,GAAGH,SAAS,CAACpM,eAAe;MACzC,IAAI4H,IAAI,GAAG2E,SAAS,CAACpM,WAAW,GAAG,KAAK,GAAGoM,SAAS,CAACC,QAAQ;MAC7D,IAAIjQ,EAAE,GAAG,YAAY,GAAG2P,SAAS,EAAE;MACnCtB,SAAS,GAAG,IAAI,CAAC1B,eAAe,CAACvO,IAAI,CAACwO,OAAO,EAAE5M,EAAE,EAAEqL,IAAI,CAAC;MACxD5J,KAAK,CAAC+J,IAAI,CAAC6C,SAAS,CAAC;IACzB;IACA,OAAO5M,KAAK;EAChB,CAAC;EACDnD,WAAW,CAACkC,SAAS,CAACwN,eAAe,GAAG,YAAY;IAChD,OAAO,CAAC,YAAY,EAAE,SAAS,EAC3B,iBAAiB,EAAE,YAAY,EAAE,MAAM,EAAE,QAAQ,EACjD,eAAe,EAAE,gBAAgB,EAAE,KAAK,EACxC,kBAAkB,EAAE,SAAS,EAAE,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,WAAW,EAAE,WAAW,CAC3F;EACL,CAAC;EACD;AACJ;AACA;AACA;AACA;EACI1P,WAAW,CAACkC,SAAS,CAACS,aAAa,GAAG,YAAY;IAC9C,OAAO,aAAa;EACxB,CAAC;EACD3C,WAAW,CAACkC,SAAS,CAAC0P,mBAAmB,GAAG,YAAY;IACpD,IAAI,IAAI,CAAClR,MAAM,CAACyB,WAAW,EAAE;MACzB;IACJ;IACA,IAAI,CAACzB,MAAM,CAACmR,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAACxP,MAAM,CAAC;IACpD,IAAI,CAAC3B,MAAM,CAACmR,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAACvP,mBAAmB,CAAC;IACjE,IAAI,CAAC5B,MAAM,CAACmR,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAACtP,oBAAoB,CAAC;IAC9D,IAAI,CAAC7B,MAAM,CAACmR,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC9P,eAAe,CAAC;EAC5D,CAAC;EACD/B,WAAW,CAACkC,SAAS,CAAC2B,kBAAkB,GAAG,UAAU9C,IAAI,EAAE;IACvD,IAAIL,MAAM,GAAG,WAAW;IACxB,IAAIK,IAAI,CAACoC,KAAK,CAACiD,MAAM,GAAG,CAAC,IAAIrF,IAAI,CAACoC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,GAAGzC,MAAM,CAAC,YAAYD,IAAI,EAAE;MACrE,IAAI,CAACkN,gBAAgB,CAAC,CAAC;IAC3B;EACJ,CAAC;EACD3N,WAAW,CAACkC,SAAS,CAACyL,gBAAgB,GAAG,YAAY;IACjD,IAAI,CAAC9K,WAAW,CAACiP,SAAS,CAAC,IAAI,CAAC7E,SAAS,CAAC;IAC1C,IAAI,CAACpK,WAAW,CAACyJ,WAAW,CAAC,IAAI,CAACc,YAAY,CAAC;IAC/C,IAAI,CAACH,SAAS,GAAG,EAAE;IACnB,IAAI,CAACG,YAAY,GAAG,EAAE;IACtB,IAAI,CAACkC,MAAM,GAAG,KAAK;EACvB,CAAC;EACDtP,WAAW,CAACkC,SAAS,CAACD,UAAU,GAAG,YAAY;IAC3C,IAAI,CAACgL,SAAS,GAAG,EAAE;IACnB,IAAI,CAACG,YAAY,GAAG,EAAE;IACtB,IAAI,CAACnJ,eAAe,GAAG,EAAE;IACzB,IAAI,CAACsI,gBAAgB,GAAG,EAAE;IAC1B,IAAI,CAACrI,IAAI,GAAG,IAAI;EACpB,CAAC;EACDlE,WAAW,CAACkC,SAAS,CAAC8N,UAAU,GAAG,UAAU9L,IAAI,EAAE;IAC/C,OAAO,IAAI,CAAC1C,OAAO,GAAG,eAAe,GAAG0C,IAAI;EAChD,CAAC;EACDlE,WAAW,CAACkC,SAAS,CAACiC,YAAY,GAAG,UAAUzC,EAAE,EAAE;IAC/C,IAAIqQ,QAAQ,GAAG,IAAI,CAACvQ,OAAO,GAAG,eAAe;IAC7C,IAAIE,EAAE,CAACgD,OAAO,CAACqN,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE;MAC3B,OAAOrQ,EAAE,CAACsQ,OAAO,CAACD,QAAQ,EAAE,EAAE,CAAC;IACnC,CAAC,MACI;MACD,OAAO,QAAQ;IACnB;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI/R,WAAW,CAACkC,SAAS,CAACY,OAAO,GAAG,YAAY;IACxC,IAAI,CAACD,WAAW,CAACC,OAAO,CAAC,CAAC;IAC1B5C,MAAM,CAAC,IAAI,CAACuB,OAAO,CAAC;IACpB,IAAI,CAACmQ,mBAAmB,CAAC,CAAC;IAC1B,IAAI,CAAC/O,WAAW,GAAG,IAAI;IACvB,IAAI,CAACpB,OAAO,GAAG,IAAI;EACvB,CAAC;EACD,OAAOzB,WAAW;AACtB,CAAC,CAAC,CAAE;AACJ,SAASA,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}