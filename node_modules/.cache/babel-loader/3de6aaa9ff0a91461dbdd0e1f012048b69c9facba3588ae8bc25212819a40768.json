{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.reduce.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { remove, extend, isNullOrUndefined, createElement, getValue, setValue, closest, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Tab } from '@syncfusion/ej2-navigations';\nimport { Grid, Edit, Toolbar as GridToolbar, Page, getObject, Sort, RowDD, Group, Aggregate, ColumnChooser, ContextMenu, ColumnMenu, Resize, Reorder, DetailRow, Search, Print, PdfExport, ExcelExport, Filter } from '@syncfusion/ej2-grids';\nimport { ForeignKey, getActualProperties } from '@syncfusion/ej2-grids';\nimport { RichTextEditor, Toolbar as RTEToolbar, Link, HtmlEditor, QuickToolbar, Count, Image, Table, EmojiPicker, FileManager, FormatPainter, MarkdownEditor } from '@syncfusion/ej2-richtexteditor';\nimport { TextBox, NumericTextBox, MaskedTextBox, FormValidator } from '@syncfusion/ej2-inputs';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { DropDownList, ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { isScheduledTask } from '../base/utils';\nimport { TreeGrid, Selection as TreeGridSelection, Filter as TreeGridFilter, Edit as TreeGridEdit, VirtualScroll, Sort as TreeGridSort, Page as TreeGridPage, Aggregate as TreeGridAggregate, Reorder as TreeGridReorder, Resize as TreeGridResize, Toolbar as TreeGridToolbar, RowDD as TreeGridRowDD } from '@syncfusion/ej2-treegrid';\nimport { getUid } from '../base/utils';\n/**\n *\n * @hidden\n */\nvar DialogEdit = /** @class */function () {\n  /**\n   * Constructor for render module\n   *\n   * @param {Gantt} parent .\n   * @returns {void} .\n   */\n  function DialogEdit(parent) {\n    this.isFromDialogPredecessor = false;\n    this.isTriggered = false;\n    this.taskFieldColumn = [];\n    this.customFieldColumn = [];\n    this.processedId = [];\n    /**\n     * @private\n     */\n    this.updatedEditFields = null;\n    this.updatedAddFields = null;\n    this.addedRecord = null;\n    this.dialogEditValidationFlag = false;\n    this.ganttResources = [];\n    this.isValidData = true;\n    this.isResourceTabUpdated = false;\n    /**\n     * @private\n     */\n    this.previousResource = [];\n    /**\n     * @private\n     */\n    this.isResourceUpdate = false;\n    this.parent = parent;\n    this.localeObj = this.parent.localeObj;\n    this.beforeOpenArgs = {\n      cancel: false\n    };\n    this.types = this.getPredecessorType();\n    this.rowData = {};\n    this.editedRecord = {};\n    this.inputs = {\n      booleanedit: CheckBox,\n      dropdownedit: DropDownList,\n      datepickeredit: DatePicker,\n      datetimepickeredit: DateTimePicker,\n      maskededit: MaskedTextBox,\n      numericedit: NumericTextBox,\n      stringedit: TextBox,\n      defaultedit: TextBox\n    };\n    this.processDialogFields();\n    this.wireEvents();\n  }\n  DialogEdit.prototype.wireEvents = function () {\n    this.parent.on('chartDblClick', this.dblClickHandler, this);\n  };\n  DialogEdit.prototype.dblClickHandler = function (e) {\n    var ganttData = this.parent.ganttChartModule.getRecordByTarget(e);\n    if (!isNullOrUndefined(ganttData) && this.parent.editModule && this.parent.editSettings.allowEditing) {\n      this.openEditDialog(ganttData);\n    }\n  };\n  /**\n   * Method to validate add and edit dialog fields property.\n   *\n   * @returns {void} .\n   * @private\n   */\n  DialogEdit.prototype.processDialogFields = function () {\n    if (isNullOrUndefined(this.parent.editDialogFields) || this.parent.editDialogFields && this.parent.editDialogFields.length === 0) {\n      this.updatedEditFields = this.getDefaultDialogFields();\n      this.updatedEditFields = this.validateDialogFields(this.updatedEditFields);\n    } else {\n      this.updatedEditFields = this.validateDialogFields(this.parent.editDialogFields);\n    }\n    if (isNullOrUndefined(this.parent.addDialogFields) || this.parent.addDialogFields && this.parent.addDialogFields.length === 0) {\n      this.updatedAddFields = this.getDefaultDialogFields();\n      this.updatedAddFields = this.validateDialogFields(this.updatedAddFields);\n    } else {\n      this.updatedAddFields = this.validateDialogFields(this.parent.addDialogFields);\n    }\n  };\n  DialogEdit.prototype.validateDialogFields = function (dialogFields) {\n    var newDialogFields = [];\n    var emptyCustomColumn = 0;\n    for (var i = 0; i < dialogFields.length; i++) {\n      var fieldItem = getActualProperties(dialogFields[i]);\n      if (fieldItem.type === 'General' && (isNullOrUndefined(fieldItem.fields) || fieldItem.fields.length === 0)) {\n        fieldItem.fields = this.getGeneralColumnFields();\n      }\n      if (fieldItem.type === 'Dependency' && isNullOrUndefined(this.parent.taskFields.dependency) || fieldItem.type === 'Resources' && isNullOrUndefined(this.parent.taskFields.resourceInfo) || fieldItem.type === 'Notes' && isNullOrUndefined(this.parent.taskFields.notes)) {\n        continue;\n      }\n      if (fieldItem.type === 'Custom' && (isNullOrUndefined(fieldItem.fields) || fieldItem.fields.length === 0)) {\n        emptyCustomColumn += 1;\n        fieldItem.fields = this.getCustomColumnFields();\n      }\n      if (emptyCustomColumn > 1) {\n        continue;\n      }\n      newDialogFields.push(fieldItem);\n    }\n    return newDialogFields;\n  };\n  /**\n   * Method to get general column fields\n   *\n   * @returns {string[]} .\n   */\n  DialogEdit.prototype.getGeneralColumnFields = function () {\n    var fields = [];\n    for (var _i = 0, _a = Object.keys(this.parent.columnMapping); _i < _a.length; _i++) {\n      var key = _a[_i];\n      if (key === 'dependency' || key === 'resourceInfo' || key === 'notes') {\n        continue;\n      }\n      fields.push(this.parent.columnMapping[key]);\n    }\n    return fields;\n  };\n  /**\n   * Method to get custom column fields\n   *\n   * @returns {void} .\n   */\n  DialogEdit.prototype.getCustomColumnFields = function () {\n    var fields = [];\n    for (var i = 0; i < this.parent.customColumns.length; i++) {\n      fields.push(this.parent.customColumns[i]);\n    }\n    return fields;\n  };\n  /**\n   * Get default dialog fields when fields are not defined for add and edit dialogs\n   *\n   * @returns {AddDialogFieldSettings} .\n   */\n  DialogEdit.prototype.getDefaultDialogFields = function () {\n    var dialogFields = [];\n    var fieldItem = {};\n    var taskFields = this.parent.taskFields;\n    var columnMapping = this.parent.columnMapping;\n    if (Object.keys(columnMapping).length !== 0) {\n      fieldItem.type = 'General';\n      dialogFields.push(fieldItem);\n    }\n    if (!isNullOrUndefined(getValue('dependency', columnMapping))) {\n      fieldItem = {};\n      if (this.parent.columnByField[columnMapping.dependency.valueOf()].visible !== false) {\n        fieldItem.type = 'Dependency';\n      }\n      dialogFields.push(fieldItem);\n    }\n    if (!isNullOrUndefined(getValue('resourceInfo', columnMapping))) {\n      fieldItem = {};\n      if (this.parent.columnByField[columnMapping.resourceInfo.valueOf()].visible !== false) {\n        fieldItem.type = 'Resources';\n      }\n      dialogFields.push(fieldItem);\n    }\n    if (!isNullOrUndefined(getValue('notes', columnMapping))) {\n      fieldItem = {};\n      if (this.parent.columnByField[columnMapping.notes.valueOf()].visible !== false) {\n        fieldItem.type = 'Notes';\n      }\n      dialogFields.push(fieldItem);\n    }\n    if (!isNullOrUndefined(getValue('segments', taskFields))) {\n      fieldItem = {};\n      fieldItem.type = 'Segments';\n      dialogFields.push(fieldItem);\n    }\n    if (this.parent.customColumns.length > 0) {\n      fieldItem = {};\n      fieldItem.type = 'Custom';\n      dialogFields.push(fieldItem);\n    }\n    return dialogFields;\n  };\n  /**\n   * @returns {void} .\n   * @private\n   */\n  DialogEdit.prototype.openAddDialog = function () {\n    this.isEdit = false;\n    this.editedRecord = this.composeAddRecord();\n    this.isFromAddDialog = true;\n    this.createDialog();\n  };\n  /**\n   *\n   * @returns {Date} .\n   * @private\n   */\n  DialogEdit.prototype.getMinimumStartDate = function () {\n    var minDate = DataUtil.aggregates.min(this.parent.flatData, 'ganttProperties.startDate');\n    if (!isNullOrUndefined(minDate)) {\n      minDate = new Date(minDate.getTime());\n    } else {\n      minDate = new Date(this.parent.timelineModule.timelineStartDate.getTime());\n    }\n    minDate = this.parent.dateValidationModule.checkStartDate(minDate);\n    return new Date(minDate.getTime());\n  };\n  /**\n   * @returns {IGanttData} .\n   * @private\n   */\n  DialogEdit.prototype.composeAddRecord = function () {\n    var tempData = {};\n    tempData.ganttProperties = {};\n    var columns = this.parent.ganttColumns;\n    var taskSettings = this.parent.taskFields;\n    var id = this.parent.editModule.getNewTaskId();\n    for (var i = 0; i < columns.length; i++) {\n      var field = columns[i].field;\n      if (field === taskSettings.id) {\n        tempData[field] = id;\n        tempData.ganttProperties.rowUniqueID = tempData[field];\n      } else if (columns[i].field === taskSettings.startDate) {\n        if (isNullOrUndefined(tempData[taskSettings.endDate])) {\n          tempData[field] = this.getMinimumStartDate();\n        } else {\n          tempData[field] = new Date(tempData[taskSettings.endDate]);\n        }\n        if (this.parent.timezone) {\n          tempData[field] = this.parent.dateValidationModule.remove(tempData[field], this.parent.timezone);\n        }\n        tempData.ganttProperties.startDate = new Date(tempData[field]);\n      } else if (columns[i].field === taskSettings.endDate) {\n        if (isNullOrUndefined(tempData[taskSettings.startDate])) {\n          tempData[field] = this.getMinimumStartDate();\n        } else {\n          tempData[field] = new Date(tempData[taskSettings.startDate]);\n        }\n        if (this.parent.timezone) {\n          tempData[field] = this.parent.dateValidationModule.remove(tempData[field], this.parent.timezone);\n        }\n        tempData.ganttProperties.endDate = new Date(tempData[field]);\n      } else if (columns[i].field === taskSettings.duration) {\n        tempData[field] = 1;\n        tempData.ganttProperties.duration = tempData[field];\n        tempData.ganttProperties.durationUnit = this.parent.durationUnit.toLocaleLowerCase();\n      } else if (columns[i].field === taskSettings.name) {\n        tempData[field] = this.localeObj.getConstant('addDialogTitle') + ' ' + id;\n        tempData.ganttProperties.taskName = tempData[field];\n      } else if (columns[i].field === taskSettings.progress) {\n        tempData[field] = 0;\n        tempData.ganttProperties.progress = tempData[field];\n      } else if (columns[i].field === taskSettings.work) {\n        tempData[field] = 0;\n        tempData.ganttProperties.work = tempData[field];\n      } else if (columns[i].field === taskSettings.type) {\n        tempData[field] = this.parent.taskType;\n        tempData.ganttProperties.taskType = tempData[field];\n      } else {\n        tempData[this.parent.ganttColumns[i].field] = '';\n      }\n    }\n    tempData.ganttProperties.isAutoSchedule = this.parent.taskMode === 'Auto' ? true : this.parent.taskMode === 'Manual' ? false : tempData[taskSettings.manual] === true ? false : true;\n    return tempData;\n  };\n  /**\n   * @returns {void} .\n   * @private\n   */\n  DialogEdit.prototype.openToolbarEditDialog = function () {\n    var gObj = this.parent;\n    if (gObj.editModule && gObj.editSettings.allowEditing) {\n      if (this.parent.ganttChartModule.focusedRowIndex > -1 && gObj.selectionModule) {\n        gObj.selectionModule.selectRow(this.parent.ganttChartModule.focusedRowIndex, false, false);\n      }\n      var selectedRowId = gObj.selectionModule ? (gObj.selectionSettings.mode === 'Row' || gObj.selectionSettings.mode === 'Both') && gObj.selectionModule.selectedRowIndexes.length === 1 ? gObj.updatedRecords[gObj.selectionModule.selectedRowIndexes[0]].ganttProperties.rowUniqueID : gObj.selectionSettings.mode === 'Cell' && gObj.selectionModule.getSelectedRowCellIndexes().length === 1 ? gObj.updatedRecords[gObj.selectionModule.getSelectedRowCellIndexes()[0].rowIndex].ganttProperties.rowUniqueID : null : null;\n      if (!isNullOrUndefined(selectedRowId)) {\n        this.openEditDialog(selectedRowId);\n      }\n    }\n  };\n  /**\n   * @param { number | string | object} taskId .\n   * @returns {void} .\n   * @private\n   */\n  DialogEdit.prototype.openEditDialog = function (taskId) {\n    var ganttObj = this.parent;\n    if (!isNullOrUndefined(taskId)) {\n      if (!isNullOrUndefined(taskId['ganttProperties'])) {\n        if (typeof taskId['ganttProperties']['taskId'] === 'string') {\n          this.numericOrString = 'stringedit';\n        } else {\n          this.numericOrString = 'numericedit';\n        }\n      }\n      if (isNullOrUndefined(taskId['ganttProperties']) && !isNullOrUndefined(taskId)) {\n        if (isNaN(Number(taskId)) || this.parent.columnByField[this.parent.taskFields.id].editType === 'stringedit') {\n          this.numericOrString = 'stringedit';\n        } else {\n          this.numericOrString = 'numericedit';\n        }\n      }\n    }\n    if (typeof taskId === 'object' && !isNullOrUndefined(taskId)) {\n      this.rowIndex = this.parent.currentViewData.indexOf(taskId);\n      if (this.rowIndex > -1) {\n        this.rowData = taskId;\n      }\n    } else if (!isNullOrUndefined(taskId)) {\n      this.rowIndex = ganttObj.ids.indexOf(taskId.toString());\n      if (this.rowIndex > -1) {\n        this.rowData = ganttObj.flatData[this.rowIndex];\n      }\n    } else if (ganttObj.selectedRowIndex > -1) {\n      this.rowData = ganttObj.currentViewData[ganttObj.selectedRowIndex];\n      this.rowIndex = ganttObj.selectedRowIndex;\n    }\n    this.isEdit = true;\n    if (this.parent.viewType === 'ResourceView' && this.rowData.level === 0) {\n      return;\n    }\n    if (Object.keys(this.rowData).length !== 0) {\n      this.editedRecord = extend({}, {}, this.rowData, true);\n      this.isFromEditDialog = true;\n      this.createDialog();\n    }\n  };\n  DialogEdit.prototype.createDialog = function () {\n    var _this = this;\n    var ganttObj = this.parent;\n    var dialogModel = {};\n    this.beforeOpenArgs.dialogModel = dialogModel;\n    this.beforeOpenArgs.rowData = this.editedRecord;\n    this.beforeOpenArgs.rowIndex = this.rowIndex;\n    var dialogMaxWidth = this.parent.isAdaptive ? '' : '600px';\n    var dialog = this.parent.createElement('div', {\n      id: ganttObj.element.id + '_dialog',\n      styles: 'max-width:' + dialogMaxWidth\n    });\n    dialog.classList.add('e-gantt-dialog');\n    ganttObj.element.appendChild(dialog);\n    dialogModel.animationSettings = {\n      effect: 'None'\n    };\n    dialogModel.header = this.localeObj.getConstant(this.isEdit ? 'editDialogTitle' : 'addDialogTitle');\n    dialogModel.isModal = true;\n    dialogModel.enableRtl = this.parent.enableRtl;\n    dialogModel.allowDragging = this.parent.isAdaptive || this.parent.enableAdaptiveUI ? false : true;\n    dialogModel.showCloseIcon = true;\n    var position = this.parent.isAdaptive ? {\n      X: 'top',\n      Y: 'left'\n    } : {\n      X: 'center',\n      Y: 'center'\n    };\n    dialogModel.position = position;\n    //dialogModel.width = '750px';\n    dialogModel.height = this.parent.isAdaptive ? '100%' : 'auto';\n    dialogModel.target = document.body;\n    dialogModel.close = this.dialogClose.bind(this);\n    dialogModel.closeOnEscape = true;\n    /* eslint-disable-next-line */\n    dialogModel.beforeClose = function (args) {\n      if (args.closedBy === 'escape') {\n        if (args.event.name === 'key-pressed' && args.event.target.nodeName === 'INPUT') {\n          args.cancel = true;\n        }\n      }\n    };\n    dialogModel.open = function (args) {\n      var dialogElement = getValue('element', args);\n      var generalTabElement = dialogElement.querySelector('#' + _this.parent.element.id + 'GeneralTabContainer');\n      if (generalTabElement && generalTabElement.scrollHeight > generalTabElement.offsetHeight) {\n        generalTabElement.classList.add('e-scroll');\n      }\n      if (_this.tabObj.selectedItem === 0) {\n        _this.tabObj.select(0);\n      }\n      if (_this.parent.isAdaptive) {\n        dialogElement.style.maxHeight = 'none';\n      }\n      if (_this.parent.focusModule) {\n        _this.parent.focusModule.setActiveElement(dialogElement);\n      }\n    };\n    dialogModel.locale = this.parent.locale;\n    dialogModel.buttons = [{\n      buttonModel: {\n        content: this.localeObj.getConstant('saveButton'),\n        cssClass: 'e-primary'\n      },\n      click: this.buttonClick.bind(this)\n    }, {\n      buttonModel: {\n        cssClass: 'e-flat',\n        content: this.localeObj.getConstant('cancel')\n      },\n      click: this.buttonClick.bind(this)\n    }];\n    this.createTab(dialogModel, dialog);\n  };\n  DialogEdit.prototype.buttonClick = function (e) {\n    var target = e.target;\n    target.style.pointerEvents = 'none';\n    if (this.localeObj.getConstant('cancel').toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n      if (this.dialog && !this.dialogObj.isDestroyed) {\n        this.CustomformObj = null;\n        this.formObj = null;\n        this.storeValidTab = null;\n        this.customFieldColumn = [];\n        this.taskFieldColumn = [];\n        this.dialogObj.hide();\n        this.dialogClose();\n      }\n    } else {\n      if (this.CustomformObj) {\n        if (!this.CustomformObj.validate()) {\n          target.style.pointerEvents = '';\n          return;\n        }\n      }\n      if (this.formObj) {\n        /* eslint-disable-next-line */\n        var formValid = this.formObj.validate();\n        if (!formValid) {\n          target.style.pointerEvents = '';\n          return;\n        }\n      }\n      if (this.storeDependencyTab || this.firstOccuringTab === 'Dependency') {\n        /* eslint-disable-next-line */\n        var dependencyTab = void 0;\n        if (this.firstOccuringTab === 'Dependency') {\n          var element = e.target.closest('#' + this.parent.element.id + '_dialog');\n          dependencyTab = element.querySelector('.e-gridform');\n        } else {\n          dependencyTab = this.storeDependencyTab.querySelector('.e-gridform');\n        }\n        if (dependencyTab) {\n          var dependencyTabValid = dependencyTab['ej2_instances'][0].validate();\n          if (!dependencyTabValid) {\n            target.style.pointerEvents = '';\n            return;\n          }\n        }\n      }\n      if (this.storeResourceTab || this.firstOccuringTab === 'Resources') {\n        /* eslint-disable-next-line */\n        var resourceTab = void 0;\n        if (this.firstOccuringTab === 'Resources') {\n          var element = e.target.closest('#' + this.parent.element.id + '_dialog');\n          resourceTab = element.querySelector('.e-gridform');\n        } else {\n          resourceTab = this.storeResourceTab.querySelector('.e-gridform');\n        }\n        if (resourceTab) {\n          var resourceTabValid = resourceTab['ej2_instances'][0].validate();\n          if (!resourceTabValid) {\n            target.style.pointerEvents = '';\n            return;\n          }\n        }\n      }\n      this.initiateDialogSave();\n      this.CustomformObj = null;\n      this.formObj = null;\n      this.storeValidTab = null;\n      this.customFieldColumn = [];\n      this.taskFieldColumn = [];\n      target.style.pointerEvents = 'auto';\n    }\n  };\n  /**\n   * @returns {void} .\n   * @private\n   */\n  DialogEdit.prototype.dialogClose = function () {\n    if (this.dialog) {\n      this.resetValues();\n    }\n    if (!isNullOrUndefined(this.parent.focusModule) && !isNullOrUndefined(this.parent.focusModule.getActiveElement(true))) {\n      this.parent.focusModule.getActiveElement(true).focus();\n    }\n  };\n  DialogEdit.prototype.resetValues = function () {\n    this.isEdit = false;\n    this.isAddNewResource = false;\n    this.editedRecord = {};\n    this.parent['triggeredColumnName'] = '';\n    this.rowData = {};\n    this.rowIndex = -1;\n    this.addedRecord = null;\n    this.ganttResources = [];\n    this.dialogEditValidationFlag = false;\n    if (this.dialog && !this.dialogObj.isDestroyed) {\n      this.destroyDialogInnerElements();\n      this.dialogObj.destroy();\n      remove(this.dialog);\n    }\n  };\n  DialogEdit.prototype.destroyDialogInnerElements = function () {\n    var ganttObj = this.parent;\n    var tabModel = this.beforeOpenArgs.tabModel;\n    var items = tabModel.items;\n    for (var i = 0; i < items.length; i++) {\n      var element = items[i].content;\n      var id = element.getAttribute('id');\n      if (!isNullOrUndefined(id) || id !== '') {\n        id = id.replace(ganttObj.element.id, '');\n        id = id.replace('TabContainer', '');\n        if (id === 'General') {\n          this.destroyCustomField(element);\n        } else if (id === 'Dependency') {\n          var gridObj = element.ej2_instances[0];\n          gridObj.destroy();\n        } else if (id === 'Notes') {\n          var rte = element.ej2_instances[0];\n          rte.destroy();\n        } else if (id === 'Resources') {\n          var treeGridObj = element.ej2_instances[0];\n          treeGridObj.destroy();\n        } else if (id.indexOf('Custom') !== -1) {\n          this.destroyCustomField(element);\n        }\n      }\n    }\n  };\n  DialogEdit.prototype.destroyCustomField = function (element) {\n    var childNodes = element.childNodes;\n    var ganttObj = this.parent;\n    for (var i = 0; i < childNodes.length; i++) {\n      var div = childNodes[i];\n      var inputElement = div.querySelector('input[id^=\"' + ganttObj.element.id + '\"]');\n      if (inputElement) {\n        var fieldName = inputElement.id.replace(ganttObj.element.id, '');\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var controlObj = div.querySelector('#' + ganttObj.element.id + fieldName).ej2_instances[0];\n        if (!isNullOrUndefined(controlObj)) {\n          var column = ganttObj.columnByField[fieldName];\n          if (!isNullOrUndefined(column) && !isNullOrUndefined(column.edit) && isNullOrUndefined(column.edit.params)) {\n            var destroy = column.edit.destroy;\n            if (typeof destroy === 'string') {\n              destroy = getObject(destroy, window);\n              destroy();\n            } else {\n              column.edit.destroy();\n            }\n          } else {\n            controlObj.destroy();\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @returns {void} .\n   * @private\n   */\n  DialogEdit.prototype.destroy = function () {\n    this.resetValues();\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off('chartDblClick', this.dblClickHandler);\n    this.parent.editModule.dialogModule = undefined;\n  };\n  /**\n   * Method to get current edit dialog fields value\n   *\n   * @returns {AddDialogFieldSettings} .\n   */\n  DialogEdit.prototype.getEditFields = function () {\n    if (this.isEdit) {\n      return this.updatedEditFields;\n    } else {\n      return this.updatedAddFields;\n    }\n  };\n  DialogEdit.prototype.createTab = function (dialogModel, dialog) {\n    var _this = this;\n    var ganttObj = this.parent;\n    var tabModel = {};\n    var tabItems = [];\n    var dialogSettings = this.getEditFields();\n    var tabElement;\n    var tasks = ganttObj.taskFields;\n    var length = dialogSettings.length;\n    tabModel.items = tabItems;\n    tabModel.locale = this.parent.locale;\n    tabModel.enableRtl = this.parent.enableRtl;\n    this.beforeOpenArgs.tabModel = tabModel;\n    var count = 0;\n    var index = 0;\n    if (length > 0) {\n      for (var i = 0; i < length; i++) {\n        var dialogField = dialogSettings[i];\n        var tabItem = {};\n        if (dialogField.type === 'General') {\n          if (Object.keys(ganttObj.columnMapping).length === 0) {\n            continue;\n          }\n          if (isNullOrUndefined(dialogField.headerText)) {\n            dialogField.headerText = this.localeObj.getConstant('generalTab');\n          }\n          tabItem.content = 'General';\n          this.beforeOpenArgs[tabItem.content] = this.getFieldsModel(dialogField.fields);\n        } else if (dialogField.type === 'Segments') {\n          if (isNullOrUndefined(tasks.segments)) {\n            continue;\n          }\n          if (isNullOrUndefined(dialogField.headerText)) {\n            dialogField.headerText = this.localeObj.getConstant('segments');\n          }\n          tabItem.content = 'Segments';\n          this.beforeOpenArgs[tabItem.content] = this.getSegmentsModel(dialogField.fields);\n        } else if (dialogField.type === 'Dependency') {\n          if (isNullOrUndefined(tasks.dependency)) {\n            continue;\n          }\n          if (isNullOrUndefined(dialogField.headerText)) {\n            dialogField.headerText = this.localeObj.getConstant('dependency');\n          }\n          tabItem.content = 'Dependency';\n          this.beforeOpenArgs[tabItem.content] = this.getPredecessorModel(dialogField.fields);\n        } else if (dialogField.type === 'Resources') {\n          if (isNullOrUndefined(tasks.resourceInfo)) {\n            continue;\n          }\n          if (isNullOrUndefined(dialogField.headerText)) {\n            dialogField.headerText = this.localeObj.getConstant('resourceName');\n          }\n          tabItem.content = 'Resources';\n          this.beforeOpenArgs[tabItem.content] = this.getResourcesModel(dialogField.fields);\n        } else if (dialogField.type === 'Notes') {\n          if (isNullOrUndefined(tasks.notes)) {\n            continue;\n          }\n          if (isNullOrUndefined(dialogField.headerText)) {\n            dialogField.headerText = this.localeObj.getConstant('notes');\n          }\n          tabItem.content = 'Notes';\n          this.beforeOpenArgs[tabItem.content] = this.getNotesModel(dialogField.fields);\n        } else {\n          if (isNullOrUndefined(dialogField.fields) || dialogField.fields.length === 0) {\n            continue;\n          }\n          if (isNullOrUndefined(dialogField.headerText)) {\n            dialogField.headerText = this.localeObj.getConstant('customTab'); // eslint-disable-next-line\n            count++;\n          }\n          tabItem.content = 'Custom' + '' + index++;\n          this.beforeOpenArgs[tabItem.content] = this.getFieldsModel(dialogField.fields);\n        }\n        tabItem.header = {\n          text: dialogField.headerText\n        };\n        tabItems.push(tabItem);\n      }\n    }\n    this.beforeOpenArgs.requestType = this.isEdit ? 'beforeOpenEditDialog' : 'beforeOpenAddDialog';\n    this.parent.trigger('actionBegin', this.beforeOpenArgs, function (arg) {\n      if (!isNullOrUndefined(_this.parent.loadingIndicator) && _this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n        _this.parent.showMaskRow();\n      } else {\n        _this.parent.showSpinner();\n      }\n      if (!arg.cancel) {\n        _this.renderTabItems();\n        tabModel.selected = _this.tabSelectedEvent.bind(_this);\n        tabModel.height = _this.parent.isAdaptive ? '100%' : 'auto';\n        tabModel.overflowMode = 'Scrollable';\n        _this.tabObj = new Tab(tabModel);\n        _this.tabObj.isStringTemplate = true;\n        tabElement = _this.parent.createElement('div', {\n          id: ganttObj.element.id + '_Tab'\n        });\n        _this.tabObj.appendTo(tabElement);\n        dialogModel.content = tabElement;\n        _this.dialog = dialog;\n        _this.dialogObj = new Dialog(dialogModel);\n        _this.dialogObj.isStringTemplate = true;\n        _this.dialogObj.appendTo(_this.dialog);\n        var actionCompleteArgs = {\n          action: 'OpenDialog',\n          requestType: _this.isEdit ? 'openEditDialog' : 'openAddDialog',\n          data: _this.beforeOpenArgs.rowData,\n          element: _this.dialog,\n          cancel: false\n        };\n        var columns = _this.parent.treeGrid.grid.getColumns();\n        /* eslint-disable-next-line */\n        var isValidateColumn = columns.some(function (obj) {\n          return obj.validationRules;\n        });\n        if (isValidateColumn) {\n          _this.CustomformObj = null;\n          _this.formObj = null;\n          _this.storeValidTab = null;\n          _this.customFieldColumn = [];\n          _this.taskFieldColumn = [];\n          _this.changeFormObj(actionCompleteArgs.element);\n        }\n        _this.parent.trigger('actionComplete', actionCompleteArgs, function (actionCompleteArg) {\n          if (!isNullOrUndefined(_this.parent.loadingIndicator) && _this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n            _this.parent.hideMaskRow();\n          } else {\n            _this.parent.hideSpinner();\n          }\n          if (actionCompleteArg.cancel) {\n            _this.resetValues();\n          }\n        });\n      } else {\n        arg.cancel = false;\n        if (!isNullOrUndefined(_this.parent.loadingIndicator) && _this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n          _this.parent.hideMaskRow();\n        } else {\n          _this.parent.hideSpinner();\n        }\n      }\n    });\n  };\n  /* eslint-disable-next-line */\n  DialogEdit.prototype.changeFormObj = function (actionCompleteArgs) {\n    if (!this.storeColumn) {\n      this.storeColumn = this.parent.treeGrid.grid.getColumns();\n    }\n    if (!this.taskfields) {\n      this.taskfields = this.parent.taskFields['properties'];\n    }\n    if (!this.storeValidTab) {\n      this.storeValidTab = this.getFilteredDialogFields();\n    }\n    if (this.customFieldColumn.length === 0 || this.taskFieldColumn.length === 0) {\n      this.validateColumn(this.storeColumn, this.taskfields, this.storeValidTab);\n    }\n    if (this.isFromAddDialog && this.parent.addDialogFields && this.parent.addDialogFields.length > 0) {\n      var firstFieldType = this.parent.addDialogFields[0].type;\n      if (firstFieldType === 'Resources' || firstFieldType === 'Dependency') {\n        this.firstOccuringTab = firstFieldType;\n      }\n    } else if (this.isFromEditDialog && this.parent.editDialogFields && this.parent.editDialogFields.length > 0) {\n      var firstFieldType = this.parent.editDialogFields[0].type;\n      if (firstFieldType === 'Resources' || firstFieldType === 'Dependency') {\n        this.firstOccuringTab = firstFieldType;\n      }\n    }\n    if (!this.CustomformObj || !this.formObj) {\n      var customFieldColumns = this.customFieldColumn;\n      var taskFieldColumns = this.taskFieldColumn;\n      if (!this.CustomformObj && customFieldColumns && customFieldColumns.length > 0) {\n        /* eslint-disable-next-line */\n        var validationRulesArray = {};\n        for (var i = 0; i < customFieldColumns.length; i++) {\n          var customColumn = customFieldColumns[i]; // Rename the variable\n          if (customColumn.visible && customColumn.validationRules) {\n            validationRulesArray[customColumn.field] = customColumn.validationRules;\n          }\n        }\n        if (Object.keys(validationRulesArray).length > 0) {\n          this.CustomformObj = actionCompleteArgs.querySelector('#' + this.parent.element.id + 'Custom0TabContainer');\n          if (this.CustomformObj) {\n            this.CustomformObj = this.createFormObj(this.CustomformObj, validationRulesArray);\n          }\n        }\n      }\n      if (!this.formObj && taskFieldColumns && taskFieldColumns.length > 0) {\n        /* eslint-disable-next-line */\n        var validationRulesArray = {};\n        for (var i = 0; i < taskFieldColumns.length; i++) {\n          var taskColumn = taskFieldColumns[i]; // Rename the variable\n          if (taskColumn.visible && taskColumn.validationRules) {\n            validationRulesArray[taskColumn.field] = taskColumn.validationRules;\n          }\n        }\n        if (Object.keys(validationRulesArray).length > 0) {\n          this.formObj = actionCompleteArgs.querySelector('#' + this.parent.element.id + 'GeneralTabContainer');\n          if (this.formObj) {\n            this.formObj = this.createFormObj(this.formObj, validationRulesArray);\n          }\n        }\n      }\n    }\n    this.isFromAddDialog = false;\n    this.isFromEditDialog = false;\n  };\n  DialogEdit.prototype.getFilteredDialogFields = function () {\n    var dialogFields = this.isFromAddDialog ? this.parent.addDialogFields : this.parent.editDialogFields;\n    if (dialogFields.length !== 0) {\n      return dialogFields.filter(function (obj) {\n        return obj.type === 'General' || obj.type === 'Custom';\n      });\n    }\n    return null;\n  };\n  /* eslint-disable-next-line */\n  DialogEdit.prototype.validateColumn = function (storeColumn, taskfields, storeValidTab) {\n    var _this = this;\n    if (storeValidTab) {\n      storeValidTab.forEach(function (element) {\n        /* eslint-disable-next-line */\n        var targetArray = element.type === 'General' ? _this.taskFieldColumn : _this.customFieldColumn;\n        element.fields.forEach(function (field) {\n          var columnValue = _this.parent.getColumnByField(field, storeColumn);\n          if (columnValue !== null) {\n            targetArray.push(columnValue);\n          } else {\n            targetArray.push(_this.parent.columnByField[field]);\n          }\n        });\n      });\n    } else {\n      /* eslint-disable-next-line */\n      storeColumn.forEach(function (column) {\n        if (_this.parent.customColumns.indexOf(column.field) !== -1) {\n          _this.customFieldColumn.push(column);\n        } else {\n          _this.taskFieldColumn.push(column);\n        }\n      });\n    }\n  };\n  DialogEdit.prototype.createFormObj = function (form, rules) {\n    var _this = this;\n    return new FormValidator(form, {\n      rules: rules,\n      locale: this.parent.locale,\n      validationComplete: function (args) {\n        _this.validationComplete(args);\n      },\n      customPlacement: function (inputElement, error) {\n        var nameAttribute = inputElement.getAttribute('name');\n        if (nameAttribute) {\n          var columnName = nameAttribute;\n          _this.valErrorPlacement(inputElement, error, columnName);\n        }\n      }\n    });\n  };\n  DialogEdit.prototype.valErrorPlacement = function (inputElement, error, columnName) {\n    var id = columnName + \"-tooltip\";\n    var elem = this.getElemTable(inputElement);\n    if (!elem) {\n      this.createTooltip(inputElement, error, id);\n    } else {\n      var tooltipContent = elem.querySelector('.e-tip-content');\n      if (tooltipContent) {\n        tooltipContent.innerHTML = error.outerHTML;\n      }\n    }\n  };\n  DialogEdit.prototype.createTooltip = function (inputElement, errorMessage, id, display) {\n    if (display === void 0) {\n      display = 'block';\n    }\n    var existingTooltip = document.getElementById(id);\n    if (existingTooltip) {\n      existingTooltip.remove();\n    }\n    var parentElement = inputElement.parentElement;\n    if (parentElement) {\n      parentElement.style.position = 'relative';\n    }\n    var tooltipContainer = document.createElement('div');\n    tooltipContainer.className = 'e-tooltip-wrap e-lib e-control e-popup e-griderror';\n    tooltipContainer.style.display = display;\n    tooltipContainer.style.zIndex = '1000';\n    var labelId = id + \"-label\";\n    var tooltipLabel = document.createElement('div');\n    tooltipLabel.id = labelId;\n    tooltipLabel.className = 'sr-only';\n    var tooltipContent = document.createElement('div');\n    tooltipContent.className = 'e-tip-content';\n    var errorMessageElement = document.createElement('div');\n    errorMessageElement.className = 'error-message';\n    errorMessageElement.appendChild(errorMessage.cloneNode(true));\n    var arrow = document.createElement('div');\n    arrow.className = 'e-arrow-tip e-tip-top';\n    arrow.appendChild(document.createElement('div')).className = 'e-arrow-tip-outer e-tip-top';\n    arrow.appendChild(document.createElement('div')).className = 'e-arrow-tip-inner e-tip-top';\n    tooltipContainer.setAttribute('aria-labelledby', labelId);\n    tooltipContent.appendChild(errorMessageElement);\n    tooltipContainer.appendChild(tooltipContent);\n    tooltipContainer.appendChild(arrow);\n    tooltipContainer.style.top = '125%';\n    tooltipContainer.style.left = '50%';\n    tooltipContainer.style.transform = 'translateX(-50%)';\n    if (parentElement) {\n      parentElement.appendChild(tooltipLabel);\n      parentElement.appendChild(tooltipContainer);\n    }\n  };\n  DialogEdit.prototype.getElemTable = function (inputElement) {\n    var parentElement = inputElement.parentElement;\n    if (parentElement) {\n      return parentElement.querySelector('.e-tooltip-wrap');\n    }\n    return null;\n  };\n  DialogEdit.prototype.validationComplete = function (args) {\n    var elem = this.getElemTable(args.element);\n    if (elem) {\n      if (args.status === 'failure') {\n        elem.style.display = '';\n      } else {\n        elem.style.display = 'none';\n      }\n    }\n  };\n  DialogEdit.prototype.tabSelectedEvent = function (args) {\n    var ganttObj = this.parent;\n    var id = args.selectedContent.childNodes[0].id;\n    var dialogModule = this.parent.editModule.dialogModule;\n    var dialog = dialogModule.dialog;\n    var hasEditedBatchCell = dialog.getElementsByClassName('e-editedbatchcell').length > 0;\n    var hasEditedOrAddedRow = dialog.getElementsByClassName('e-editedrow').length > 0 || dialog.getElementsByClassName('e-addedrow').length > 0;\n    if (dialogModule.storeResourceTab && hasEditedBatchCell) {\n      document.querySelector('#' + ganttObj.element.id + '' + 'Resources' + 'TabContainer_gridcontrol').ej2_instances[0].saveCell();\n    } else if (dialogModule.storeDependencyTab && hasEditedOrAddedRow) {\n      document.querySelector('#' + ganttObj.element.id + '' + 'Dependency' + 'TabContainer').ej2_instances[0].editModule.batchSave();\n    }\n    if (id === ganttObj.element.id + 'DependencyTabContainer') {\n      this.storeDependencyTab = args.selectedContent;\n    }\n    if (id === ganttObj.element.id + 'ResourcesTabContainer') {\n      this.storeResourceTab = args.selectedContent;\n    }\n    if (id === ganttObj.element.id + 'Custom0TabContainer') {\n      var columns = this.parent.treeGrid.grid.getColumns();\n      /* eslint-disable-next-line */\n      var isValidateColumn = columns.some(function (obj) {\n        return obj.validationRules;\n      });\n      if (isValidateColumn) {\n        this.changeFormObj(args.selectedContent);\n      }\n    }\n    if (id === ganttObj.element.id + 'GeneralTabContainer') {\n      var columns = this.parent.treeGrid.grid.getColumns();\n      /* eslint-disable-next-line */\n      var isValidateColumn = columns.some(function (obj) {\n        return obj.validationRules;\n      });\n      if (isValidateColumn) {\n        this.changeFormObj(args.selectedContent);\n      }\n    }\n    if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {\n      this.responsiveTabContent(id, ganttObj);\n    }\n    if (id === ganttObj.element.id + 'ResourcesTabContainer') {\n      this.resourceSelection(id);\n    } else if (id === ganttObj.element.id + 'NotesTabContainer') {\n      document.getElementById(id).ej2_instances[0].refresh();\n      // const notesTabElement: HTMLElement = document.querySelector('#' + this.parent.element.id + 'NotesTabContainer') as HTMLInputElement;\n    } else if (id === ganttObj.element.id + 'SegmentsTabContainer') {\n      if (isNullOrUndefined(this.beforeOpenArgs.rowData.ganttProperties.startDate)) {\n        document.getElementById(id).ej2_instances[0].enableToolbarItems([this.parent.element.id + 'SegmentsTabContainer' + '_add'], false);\n      } else {\n        document.getElementById(id).ej2_instances[0].enableToolbarItems([this.parent.element.id + 'SegmentsTabContainer' + '_add'], true);\n      }\n    }\n  };\n  DialogEdit.prototype.responsiveTabContent = function (id, ganttObj) {\n    var dialogContent = document.getElementById(ganttObj.element.id + '_dialog_dialog-content');\n    var dialogContentHeight = dialogContent.clientHeight;\n    dialogContentHeight -= dialogContent.querySelector('.e-tab-header').offsetHeight;\n    var grid = document.querySelector('#' + id);\n    if (grid.classList.contains('e-grid')) {\n      dialogContentHeight -= grid.ej2_instances[0].getHeaderContent().offsetHeight;\n      var toolbar_1 = grid.querySelector('.e-toolbar');\n      if (toolbar_1) {\n        dialogContentHeight -= toolbar_1.offsetHeight;\n      }\n    }\n    grid.parentElement.style.height = dialogContentHeight + 'px';\n  };\n  DialogEdit.prototype.getFieldsModel = function (fields) {\n    var fieldsModel = {};\n    var columnByField = this.parent.columnByField;\n    for (var i = 0; i < fields.length; i++) {\n      if (fields[i] === this.parent.taskFields.dependency || fields[i] === this.parent.taskFields.resourceInfo || fields[i] === this.parent.taskFields.notes) {\n        continue;\n      }\n      if (!isNullOrUndefined(columnByField[fields[i]])) {\n        var fieldName = fields[i];\n        this.createInputModel(columnByField[fieldName], fieldsModel);\n      }\n    }\n    return fieldsModel;\n  };\n  DialogEdit.prototype.createInputModel = function (column, fieldsModel) {\n    var _this = this;\n    var ganttObj = this.parent;\n    var locale = this.parent.locale;\n    var taskSettings = this.parent.taskFields;\n    var common = {\n      placeholder: column.headerText,\n      floatLabelType: 'Auto'\n    };\n    if (!isNullOrUndefined(this.parent.taskFields.id) && !isNullOrUndefined(this.parent.columnMapping.id) && !isNullOrUndefined(this.numericOrString)) {\n      if (taskSettings.id === column.field) {\n        column.editType = this.numericOrString;\n      }\n    }\n    switch (column.editType) {\n      case 'booleanedit':\n        {\n          var checkboxModel = {\n            label: column.headerText,\n            locale: locale,\n            enableRtl: this.parent.enableRtl\n          };\n          fieldsModel[column.field] = checkboxModel;\n          break;\n        }\n      case 'defaultedit':\n      case 'stringedit':\n        {\n          var textBox = common;\n          textBox.enableRtl = this.parent.enableRtl;\n          if (column.field === ganttObj.columnMapping.duration || column.field === ganttObj.columnMapping.id || column.field === ganttObj.columnMapping.startDate || column.field === ganttObj.columnMapping.endDate) {\n            textBox.change = function (args) {\n              if (!_this.isTriggered) {\n                if ((column.field === _this.parent.taskFields.duration || column.field === _this.parent.taskFields.work) && !_this.isTriggered && _this.editedRecord.ganttProperties.taskType === 'FixedUnit') {\n                  _this.isTriggered = true;\n                  _this.parent['triggeredColumnName'] = column.field;\n                }\n                _this.validateScheduleFields(args, column, ganttObj);\n              }\n            };\n          }\n          fieldsModel[column.field] = common;\n          break;\n        }\n      case 'numericedit':\n        {\n          var numeric = common;\n          numeric.enableRtl = this.parent.enableRtl;\n          if (taskSettings.progress === column.field) {\n            numeric.min = 0;\n            numeric.max = 100;\n          }\n          numeric.change = function (args) {\n            if (!_this.isTriggered) {\n              if ((column.field === _this.parent.taskFields.duration || column.field === _this.parent.taskFields.work) && !_this.isTriggered && _this.editedRecord.ganttProperties.taskType === 'FixedUnit') {\n                _this.isTriggered = true;\n                _this.parent['triggeredColumnName'] = column.field;\n              }\n              _this.validateScheduleFields(args, column, ganttObj);\n            }\n          };\n          fieldsModel[column.field] = numeric;\n          break;\n        }\n      case 'datepickeredit':\n        {\n          var datePickerObj = common;\n          datePickerObj.format = this.parent.getDateFormat();\n          datePickerObj.enableRtl = this.parent.enableRtl;\n          datePickerObj.strictMode = true;\n          datePickerObj.firstDayOfWeek = ganttObj.timelineModule.customTimelineSettings.weekStartDay;\n          if (column.field === ganttObj.columnMapping.startDate || column.field === ganttObj.columnMapping.endDate) {\n            datePickerObj.renderDayCell = this.parent.renderWorkingDayCell.bind(this.parent);\n            datePickerObj.change = function (args) {\n              _this.validateScheduleFields(args, column, ganttObj);\n            };\n          }\n          fieldsModel[column.field] = datePickerObj;\n          break;\n        }\n      case 'datetimepickeredit':\n        {\n          var dateTimePickerObj = common;\n          dateTimePickerObj.format = this.parent.getDateFormat();\n          dateTimePickerObj.enableRtl = this.parent.enableRtl;\n          dateTimePickerObj.strictMode = true;\n          dateTimePickerObj.firstDayOfWeek = ganttObj.timelineModule.customTimelineSettings.weekStartDay;\n          if (column.field === ganttObj.columnMapping.startDate || column.field === ganttObj.columnMapping.endDate) {\n            dateTimePickerObj.renderDayCell = this.parent.renderWorkingDayCell.bind(this.parent);\n            dateTimePickerObj.change = function (args) {\n              _this.validateScheduleFields(args, column, ganttObj);\n            };\n          }\n          fieldsModel[column.field] = dateTimePickerObj;\n          break;\n        }\n      case 'dropdownedit':\n        if (column.field === ganttObj.columnMapping.type || column.field === ganttObj.columnMapping.manual) {\n          var dataKey = 'dataSource';\n          var fieldsKey = 'fields';\n          var types = [{\n            'ID': 1,\n            'Value': 'FixedUnit'\n          }, {\n            'ID': 2,\n            'Value': 'FixedWork'\n          }, {\n            'ID': 3,\n            'Value': 'FixedDuration'\n          }];\n          common[dataKey] = types;\n          common[fieldsKey] = {\n            value: 'Value'\n          };\n          var dropDownListObj = common;\n          dropDownListObj.enableRtl = this.parent.enableRtl;\n          dropDownListObj.change = function (args) {\n            if (column.field === taskSettings.manual) {\n              _this.editedRecord.ganttProperties.isAutoSchedule = !args.value;\n            }\n            _this.validateScheduleFields(args, column, ganttObj);\n          };\n        }\n        fieldsModel[column.field] = common;\n        break;\n      case 'maskededit':\n        fieldsModel[column.field] = common;\n        break;\n    }\n    if (!isNullOrUndefined(column.edit) && !isNullOrUndefined(column.edit.params)) {\n      extend(fieldsModel[column.field], column.edit.params);\n    }\n    return fieldsModel;\n  };\n  DialogEdit.prototype.validateScheduleFields = function (args, column, ganttObj) {\n    var _a;\n    var dialog;\n    if (!isNullOrUndefined(ganttObj.editModule.dialogModule.dialog)) {\n      dialog = ganttObj.editModule.dialogModule.dialog;\n    }\n    var targetId = null;\n    var inputElement;\n    var currentData = ganttObj.editModule.dialogModule.editedRecord;\n    var cellValue = null;\n    var colName = null;\n    var formObject;\n    var ids = this.parent.viewType === 'ResourceView' ? this.parent.getTaskIds() : this.parent.ids;\n    var strViewType = this.parent.viewType;\n    if (!isNullOrUndefined(args.element)) {\n      inputElement = args.element;\n      targetId = inputElement.getAttribute('id');\n    } else if (!isNullOrUndefined(args.container)) {\n      inputElement = args.container;\n      targetId = inputElement.querySelector('input').getAttribute('id');\n      inputElement = inputElement.querySelector('#' + targetId);\n    } else if (!isNullOrUndefined(args.event) && !isNullOrUndefined(args.event.path) && !isNullOrUndefined(args.event.path)[1]) {\n      inputElement = args.event.path[1];\n      targetId = inputElement.querySelector('input').getAttribute('id');\n      inputElement = inputElement.querySelector('#' + targetId);\n    }\n    if (isNullOrUndefined(inputElement)) {\n      cellValue = args.value;\n      colName = column.field;\n    } else {\n      cellValue = inputElement.value;\n      colName = targetId.replace(ganttObj.element.id, '');\n      if (this.parent.columnByField[this.parent.taskFields.id].editType === 'stringedit') {\n        var customFn = function (args) {\n          if (strViewType === 'ResourceView') {\n            return ids.indexOf('T' + args['value']) === -1 && ids.indexOf('R' + args['value']) === -1;\n          } else {\n            return ids.indexOf(args['value']) === -1;\n          }\n        };\n        var options = {\n          rules: (_a = {}, _a[this.parent.taskFields.id] = {\n            required: true,\n            minLength: [customFn, 'ID is already present, please enter new value']\n          }, _a)\n        };\n        /* eslint-disable-next-line */\n        formObject = new FormValidator('#' + this.parent.element.id + 'GeneralTabContainer', options);\n      }\n    }\n    if (colName.search('Segments') === 0) {\n      colName = colName.replace('SegmentsTabContainer', '');\n      this.validateSegmentFields(ganttObj, colName, cellValue, args);\n      this.isTriggered = false;\n      return true;\n    } else {\n      this.validateScheduleValuesByCurrentField(colName, cellValue, this.editedRecord);\n      var ganttProp = currentData.ganttProperties;\n      var tasks = ganttObj.taskFields;\n      if (!isNullOrUndefined(tasks.startDate) && tasks.startDate !== colName) {\n        this.updateScheduleFields(dialog, ganttProp, 'startDate');\n      }\n      if (tasks.endDate === colName && !isNullOrUndefined(ganttProp.startDate) && !isNullOrUndefined(args.value) && ganttProp.startDate.getTime() > args.value) {\n        this.updateScheduleFields(dialog, ganttProp, 'endDate');\n      }\n      if (!isNullOrUndefined(tasks.endDate) && tasks.endDate !== colName) {\n        this.updateScheduleFields(dialog, ganttProp, 'endDate');\n      }\n      if (!isNullOrUndefined(tasks.duration) && tasks.duration !== colName || ganttProp.duration >= 0) {\n        this.updateScheduleFields(dialog, ganttProp, 'duration');\n      }\n      if (!isNullOrUndefined(tasks.work) && (tasks.work !== colName || ganttProp.taskType !== 'FixedWork')) {\n        this.updateScheduleFields(dialog, ganttProp, 'work');\n      }\n      this.dialogEditValidationFlag = false;\n      this.isTriggered = false;\n      return true;\n    }\n  };\n  DialogEdit.prototype.updateScheduleFields = function (dialog, ganttProp, ganttField) {\n    var ganttObj = this.parent;\n    var ganttId = ganttObj.element.id;\n    var columnName = getValue(ganttField, ganttObj.columnMapping);\n    var col = ganttObj.columnByField[columnName];\n    var tempValue;\n    var taskField = this.parent.taskFields;\n    if (col.editType === 'stringedit') {\n      var element = dialog.querySelector('#' + ganttId + columnName);\n      if (element) {\n        var textBox = element.ej2_instances[0];\n        if (textBox) {\n          tempValue = !isNullOrUndefined(col.edit) && !isNullOrUndefined(col.edit.read) ? col.edit.read() : !isNullOrUndefined(col.valueAccessor) ? col.valueAccessor(columnName, ganttObj.editModule.dialogModule.editedRecord, col) : this.parent.dataOperation.getDurationString(ganttProp.duration, ganttProp.durationUnit);\n          if (textBox.value !== tempValue.toString() && taskField.duration === columnName) {\n            textBox.value = tempValue;\n            textBox.dataBind();\n          } else if (taskField.startDate === columnName || taskField.endDate === columnName) {\n            textBox.value = taskField.startDate === columnName ? ganttProp.startDate.toString() : ganttProp.endDate.toString();\n            textBox.dataBind();\n          }\n        }\n      }\n    } else if (col.editType === 'datepickeredit' || col.editType === 'datetimepickeredit') {\n      var element = dialog.querySelector('#' + ganttId + columnName);\n      if (element) {\n        var picker = col.editType === 'datepickeredit' ? element.ej2_instances[0] : element.ej2_instances[0];\n        if (picker) {\n          tempValue = ganttProp[ganttField];\n          if (isNullOrUndefined(picker.value) && !isNullOrUndefined(tempValue) || isNullOrUndefined(tempValue) && !isNullOrUndefined(picker.value) || picker.value !== tempValue && !isNullOrUndefined(picker.value) && !isNullOrUndefined(tempValue) && picker.value.toString() !== tempValue.toString()) {\n            picker.value = tempValue;\n            picker.dataBind();\n          }\n        }\n      }\n    } else if (col.editType === 'numericedit') {\n      var numericTextBox = dialog.querySelector('#' + ganttId + columnName).ej2_instances[0];\n      tempValue = ganttProp[ganttField];\n      if (!isNullOrUndefined(tempValue) && numericTextBox.value !== tempValue) {\n        numericTextBox.value = tempValue;\n        numericTextBox.dataBind();\n      }\n    }\n  };\n  /**\n   * @param {IGanttData} ganttData .\n   * @returns {void} .\n   * @private\n   */\n  DialogEdit.prototype.validateDuration = function (ganttData) {\n    var ganttProp = ganttData.ganttProperties;\n    if (!this.dialogEditValidationFlag) {\n      if (!isNullOrUndefined(ganttProp.startDate) && !isScheduledTask(ganttProp) && isNullOrUndefined(ganttProp.duration)) {\n        this.parent.setRecordValue('endDate', null, ganttProp, true);\n        this.parent.setRecordValue('isMilestone', false, ganttProp, true);\n      } else if (isScheduledTask(ganttProp) || !isNullOrUndefined(ganttProp.startDate)) {\n        if (ganttData.ganttProperties.isMilestone && ganttData.ganttProperties.duration !== 0) {\n          this.parent.dateValidationModule.checkStartDate(ganttProp.startDate);\n        }\n        this.parent.dateValidationModule.calculateEndDate(ganttData);\n      } else if (!isScheduledTask(ganttProp) && !isNullOrUndefined(ganttProp.endDate)) {\n        this.parent.dateValidationModule.calculateStartDate(ganttData);\n      }\n      var milestone = ganttProp.duration === 0 ? true : false;\n      this.parent.setRecordValue('isMilestone', milestone, ganttProp, true);\n      this.dialogEditValidationFlag = true;\n    }\n  };\n  DialogEdit.prototype.validateStartDate = function (ganttData) {\n    var ganttProp = ganttData.ganttProperties;\n    var tasks = this.parent.taskFields;\n    if (!this.dialogEditValidationFlag) {\n      if (isNullOrUndefined(ganttProp.startDate)) {\n        this.parent.setRecordValue('duration', null, ganttProp, true);\n        this.parent.setRecordValue('isMilestone', false, ganttProp, true);\n        if (this.parent.allowUnscheduledTasks && isNullOrUndefined(tasks.endDate)) {\n          this.parent.setRecordValue('endDate', null, ganttProp, true);\n        }\n      } else if (isScheduledTask(ganttProp)) {\n        if (isNullOrUndefined(tasks.duration)) {\n          this.parent.dateValidationModule.calculateDuration(ganttData);\n        } else if (isNullOrUndefined(tasks.endDate)) {\n          this.parent.dateValidationModule.calculateEndDate(ganttData);\n        } else {\n          this.parent.dateValidationModule.calculateEndDate(ganttData);\n        }\n      } else {\n        if (!isNullOrUndefined(ganttProp.endDate)) {\n          this.parent.dateValidationModule.calculateDuration(ganttData);\n        } else if (!isNullOrUndefined(ganttProp.duration)) {\n          this.parent.dateValidationModule.calculateEndDate(ganttData);\n        }\n      }\n      this.dialogEditValidationFlag = true;\n    }\n  };\n  DialogEdit.prototype.validateEndDate = function (ganttData) {\n    var ganttProp = ganttData.ganttProperties;\n    var tasks = this.parent.taskFields;\n    if (!this.dialogEditValidationFlag) {\n      if (isNullOrUndefined(ganttProp.endDate)) {\n        this.parent.setRecordValue('duration', null, ganttProp, true);\n        this.parent.setRecordValue('isMilestone', false, ganttProp, true);\n      } else if (isScheduledTask(ganttProp)) {\n        if (isNullOrUndefined(tasks.duration)) {\n          this.parent.dateValidationModule.calculateDuration(ganttData);\n        } else if (isNullOrUndefined(ganttProp.startDate)) {\n          this.parent.dateValidationModule.calculateStartDate(ganttData);\n        } else {\n          if (!isNullOrUndefined(ganttProp.segments) && ganttProp.segments.length > 0) {\n            ganttProp.segments = this.parent.editModule.cellEditModule.validateEndDateWithSegments(ganttProp);\n          }\n          this.parent.dateValidationModule.calculateDuration(ganttData);\n        }\n      } else {\n        if (!isNullOrUndefined(ganttProp.duration)) {\n          this.parent.dateValidationModule.calculateStartDate(ganttData);\n        } else if (!isNullOrUndefined(ganttProp.startDate)) {\n          this.parent.dateValidationModule.calculateDuration(ganttData);\n        }\n      }\n      this.dialogEditValidationFlag = true;\n    }\n  };\n  /**\n   *\n   * @param {string} columnName .\n   * @param {string} value .\n   * @param {IGanttData} currentData .\n   * @returns {boolean} .\n   * @private\n   */\n  DialogEdit.prototype.validateScheduleValuesByCurrentField = function (columnName, value, currentData) {\n    var ganttObj = this.parent;\n    var ganttProp = currentData.ganttProperties;\n    var taskSettings = ganttObj.taskFields;\n    if (taskSettings.duration === columnName) {\n      if (!isNullOrUndefined(value) && value !== '' && (parseInt(value, 10) >= 0 || parseFloat(value) >= 0)) {\n        ganttObj.dataOperation.updateDurationValue(value, ganttProp);\n        this.parent.setRecordValue(taskSettings.duration, value, currentData);\n        this.parent.setRecordValue('taskData.' + taskSettings.duration, ganttProp.duration, currentData);\n        if (ganttProp.isMilestone && !isNullOrUndefined(this.parent.editModule.cellEditModule)) {\n          var editedArgs = {};\n          editedArgs.data = currentData;\n          this.parent.editModule.cellEditModule['updateDates'](editedArgs);\n        }\n        this.validateDuration(currentData);\n      } else {\n        if (ganttObj.allowUnscheduledTasks) {\n          if (ganttProp.startDate && ganttProp.endDate && ganttProp.startDate.getTime() > ganttProp.endDate.getTime() || value.indexOf('-') !== -1) {\n            this.parent.setRecordValue('duration', 0, ganttProp, true);\n            if (ganttProp.endDate) {\n              this.parent.setRecordValue('startDate', ganttProp.endDate, ganttProp, true);\n            }\n          } else {\n            if (value === '') {\n              this.parent.setRecordValue('duration', null, ganttProp, true);\n              if (ganttProp.endDate && ganttProp.startDate) {\n                this.parent.setRecordValue('endDate', null, ganttProp, true);\n              }\n            } else {\n              var regex = /^[^\\d.-]+$/;\n              if (regex.test(value)) {\n                var err = \"The provided value for the \" + taskSettings.duration + \" field is invalid. Please ensure the \" + taskSettings.duration + \" field contains only valid numeric values.\";\n                this.parent.trigger('actionFailure', {\n                  error: err\n                });\n              }\n              this.parent.setRecordValue('duration', ganttProp.duration, ganttProp, true);\n            }\n          }\n        }\n      }\n      this.parent.editModule.updateResourceRelatedFields(currentData, 'duration');\n    }\n    if (taskSettings.startDate === columnName) {\n      if (value !== '') {\n        var startDate = this.parent.dateValidationModule.getDateFromFormat(value);\n        startDate = this.parent.dateValidationModule.checkStartDate(startDate, ganttProp);\n        this.parent.setRecordValue('startDate', startDate, ganttProp, true);\n        this.validateStartDate(currentData);\n      } else {\n        if (ganttObj.allowUnscheduledTasks && !currentData.hasChildRecords) {\n          this.parent.setRecordValue('startDate', null, ganttProp, true);\n          this.parent.setRecordValue('duration', null, ganttProp, true);\n          this.parent.setRecordValue('isMilestone', false, ganttProp, true);\n        }\n      }\n    }\n    if (taskSettings.endDate === columnName) {\n      if (value !== '') {\n        var endDate = this.parent.dateValidationModule.getDateFromFormat(value);\n        var dayEndTime = this.parent['getCurrentDayEndTime'](endDate);\n        if (endDate.getHours() === 0 && dayEndTime !== 86400) {\n          this.parent.dateValidationModule.setTime(dayEndTime, endDate);\n        }\n        if (!isNullOrUndefined(ganttProp.startDate) && !isNullOrUndefined(ganttProp.endDate) && !isNullOrUndefined(endDate) && ganttProp.startDate.getTime() > endDate.getTime()) {\n          endDate = ganttProp.endDate;\n        }\n        endDate = this.parent.dateValidationModule.checkEndDate(endDate, ganttProp);\n        if (isNullOrUndefined(ganttProp.startDate) || endDate.getTime() >= ganttProp.startDate.getTime()) {\n          this.parent.setRecordValue('endDate', endDate, ganttProp, true);\n        }\n        this.validateEndDate(currentData);\n        if (ganttProp.isMilestone && !isNullOrUndefined(this.parent.editModule.cellEditModule)) {\n          var editedArgs = {};\n          editedArgs.data = currentData;\n          this.parent.editModule.cellEditModule['updateDates'](editedArgs);\n        }\n      } else {\n        if (ganttObj.allowUnscheduledTasks) {\n          this.parent.setRecordValue('endDate', null, ganttProp, true);\n          this.parent.setRecordValue('duration', null, ganttProp, true);\n          this.parent.setRecordValue('isMilestone', false, ganttProp, true);\n        }\n      }\n    }\n    if (taskSettings.work === columnName) {\n      if (!isNullOrUndefined(value) && value !== '') {\n        this.parent.setRecordValue('work', value, ganttProp, true);\n        this.parent.editModule.updateResourceRelatedFields(currentData, 'work');\n        this.validateDuration(currentData);\n      }\n    }\n    if (columnName === taskSettings.type) {\n      this.parent.setRecordValue('taskType', value, ganttProp, true);\n      // To validate the work column as well, if duartion column value is 0, when FixedDuration type\n      if (value && value === 'FixedDuration' && ganttProp.duration === 0) {\n        this.parent.editModule.updateResourceRelatedFields(currentData, 'work');\n      }\n    }\n    if (taskSettings.manual === columnName) {\n      this.parent.editModule.updateTaskScheduleModes(currentData);\n    }\n    return true;\n  };\n  DialogEdit.prototype.getSegmentsModel = function (fields) {\n    var _this = this;\n    var taskSettings = this.parent.taskFields;\n    if (isNullOrUndefined(fields) || fields.length === 0) {\n      fields = [];\n      if (!isNullOrUndefined(taskSettings.startDate)) {\n        fields.push(this.parent.taskFields.startDate);\n      }\n      if (!isNullOrUndefined(taskSettings.endDate)) {\n        fields.push(this.parent.taskFields.endDate);\n      }\n      if (!isNullOrUndefined(taskSettings.duration)) {\n        fields.push(this.parent.taskFields.duration);\n      }\n      if (!isNullOrUndefined(taskSettings.id)) {\n        fields.push(this.parent.taskFields.id);\n      }\n    }\n    var segmentInputModel = {};\n    segmentInputModel.editSettings = {\n      allowEditing: true,\n      allowAdding: true,\n      allowDeleting: true,\n      mode: 'Normal',\n      newRowPosition: 'Bottom'\n    };\n    segmentInputModel.locale = this.parent.locale;\n    segmentInputModel.dataSource = [];\n    segmentInputModel.rowHeight = this.parent.isAdaptive ? 48 : null;\n    segmentInputModel.toolbar = [{\n      id: this.parent.element.id + 'SegmentsTabContainer' + '_add',\n      prefixIcon: 'e-add',\n      tooltipText: this.localeObj.getConstant('add'),\n      align: 'Right',\n      text: this.parent.isAdaptive ? '' : this.localeObj.getConstant('add')\n    }, {\n      id: this.parent.element.id + 'SegmentsTabContainer' + '_delete',\n      prefixIcon: 'e-delete',\n      tooltipText: this.localeObj.getConstant('delete'),\n      align: 'Right',\n      text: this.parent.isAdaptive ? '' : this.localeObj.getConstant('delete')\n    }];\n    var gridColumns = [];\n    var _loop_1 = function (i) {\n      var gridColumn = {};\n      var generalTabString = 'General';\n      switch (fields[i]) {\n        case this_1.parent.taskFields.id:\n          gridColumn = {\n            field: fields[i],\n            visible: false,\n            isPrimaryKey: true\n          };\n          gridColumns.push(gridColumn);\n          break;\n        case this_1.parent.taskFields.startDate:\n        case this_1.parent.taskFields.endDate:\n          gridColumn = {\n            field: fields[i],\n            headerText: this_1.localeObj.getConstant(fields[i] === this_1.parent.taskFields.startDate ? 'startDate' : 'endDate'),\n            editType: 'stringedit',\n            width: '200px',\n            edit: {\n              write: function (args) {\n                var datePickerModel;\n                if (!isNullOrUndefined(_this.beforeOpenArgs[generalTabString]) && !isNullOrUndefined(_this.beforeOpenArgs[generalTabString][fields[i]])) {\n                  datePickerModel = _this.beforeOpenArgs[generalTabString][fields[i]];\n                } else {\n                  var columnFields = _this.getGeneralColumnFields();\n                  var columnModel = _this.getFieldsModel(columnFields);\n                  datePickerModel = columnModel[fields[i]];\n                }\n                var value = args.rowData[args.column.field];\n                setValue('value', value, datePickerModel);\n                var datePicker = new _this.inputs[_this.parent.columnByField[fields[i]].editType](datePickerModel);\n                datePicker.appendTo(args.element);\n              },\n              read: function (args) {\n                var ej2Instance = args.ej2_instances[0];\n                return ej2Instance.value;\n              }\n            },\n            format: this_1.parent.getDateFormat()\n          };\n          if (fields[i] === this_1.parent.taskFields.startDate) {\n            gridColumn.validationRules = {\n              required: true\n            };\n          }\n          gridColumns.push(gridColumn);\n          break;\n        case this_1.parent.taskFields.duration:\n          gridColumn = {\n            field: fields[i],\n            headerText: this_1.localeObj.getConstant(fields[i].toLocaleLowerCase()),\n            editType: 'stringedit',\n            width: '100px',\n            edit: {\n              write: function (args) {\n                var inputTextModel;\n                if (!isNullOrUndefined(_this.beforeOpenArgs[generalTabString]) && !isNullOrUndefined(_this.beforeOpenArgs[generalTabString][fields[i]])) {\n                  inputTextModel = _this.beforeOpenArgs[generalTabString][fields[i]];\n                } else {\n                  var columnFields = _this.getGeneralColumnFields();\n                  var columnModel = _this.getFieldsModel(columnFields);\n                  inputTextModel = columnModel[fields[i]];\n                }\n                inputTextModel.floatLabelType = 'Never';\n                var value = args.rowData[args.column.field];\n                if (!isNullOrUndefined(value)) {\n                  setValue('value', value, inputTextModel);\n                } else {\n                  setValue('value', null, inputTextModel);\n                }\n                setValue('value', value, inputTextModel);\n                var inputModel = new TextBox(inputTextModel);\n                inputModel.appendTo(args.element);\n              },\n              read: function (args) {\n                var ej2Instance = args.ej2_instances[0];\n                return ej2Instance.value.toString();\n              }\n            }\n          };\n          gridColumns.push(gridColumn);\n          break;\n      }\n    };\n    var this_1 = this;\n    for (var i = 0; i < fields.length; i++) {\n      _loop_1(i);\n    }\n    segmentInputModel.columns = gridColumns;\n    segmentInputModel.height = this.parent.isAdaptive || this.parent.enableAdaptiveUI ? '100%' : '153px';\n    return segmentInputModel;\n  };\n  DialogEdit.prototype.getGridColumnByField = function (fieldName, columns) {\n    var column;\n    for (var i = 0; i < columns.length; i++) {\n      if (columns[i].field === fieldName) {\n        column = columns[i];\n      }\n    }\n    return column;\n  };\n  DialogEdit.prototype.updateSegmentField = function (columnName, args, segment) {\n    var dialog = this.parent.editModule.dialogModule.dialog;\n    var gridModel = getValue('Segments', this.beforeOpenArgs);\n    var col = this.getGridColumnByField(columnName, gridModel.columns);\n    var ganttId = this.parent.element.id;\n    var tempValue = segment[columnName];\n    var inputValue;\n    if (col.editType === 'stringedit') {\n      inputValue = dialog.querySelector('#' + ganttId + 'SegmentsTabContainer' + columnName).ej2_instances[0];\n    } else if (col.editType === 'datepickeredit') {\n      inputValue = dialog.querySelector('#' + ganttId + 'SegmentsTabContainer' + columnName).ej2_instances[0];\n    }\n    if (!isNullOrUndefined(inputValue.value) && !isNullOrUndefined(tempValue) && inputValue.value.toString() !== tempValue.toString()) {\n      inputValue.value = tempValue;\n      inputValue.dataBind();\n    }\n  };\n  DialogEdit.prototype.validateSegmentFields = function (ganttObj, columnName, cellValue, args) {\n    var taskSettings = this.parent.taskFields;\n    if (!isNullOrUndefined(taskSettings.duration) && taskSettings.duration.toLowerCase() === columnName.toLowerCase()) {\n      if (!isNullOrUndefined(cellValue) && cellValue !== '') {\n        this.selectedSegment[taskSettings.duration] = Number(cellValue);\n        var endDate = ganttObj.dataOperation.getEndDate(this.selectedSegment[taskSettings.startDate], Number(cellValue), this.editedRecord.ganttProperties.durationUnit, this.editedRecord.ganttProperties, false);\n        endDate = ganttObj.dataOperation.checkEndDate(endDate, this.editedRecord.ganttProperties, false);\n        this.selectedSegment[taskSettings.endDate] = endDate;\n      }\n    }\n    if (!isNullOrUndefined(taskSettings.startDate) && taskSettings.startDate.toLowerCase() === columnName.toLowerCase()) {\n      if (cellValue !== '') {\n        var startDate = this.parent.dateValidationModule.getDateFromFormat(cellValue);\n        startDate = this.parent.dateValidationModule.checkStartDate(startDate);\n        this.selectedSegment[taskSettings.startDate] = startDate;\n        if (!isNullOrUndefined(taskSettings.endDate)) {\n          this.selectedSegment.endDate = this.parent.dataOperation.getEndDate(startDate, this.selectedSegment[taskSettings.duration], this.editedRecord.ganttProperties.durationUnit, this.editedRecord.ganttProperties, false);\n        }\n      }\n    }\n    if (!isNullOrUndefined(taskSettings.endDate) && taskSettings.endDate.toLowerCase() === columnName.toLowerCase()) {\n      if (cellValue !== '') {\n        var endDate = this.parent.dateValidationModule.getDateFromFormat(cellValue);\n        var dayEndTime = this.parent['getCurrentDayEndTime'](endDate);\n        if (endDate.getHours() === 0 && dayEndTime !== 86400) {\n          this.parent.dateValidationModule.setTime(dayEndTime, endDate);\n        }\n        endDate = this.parent.dateValidationModule.checkEndDate(endDate, this.editedRecord.ganttProperties);\n        this.selectedSegment[taskSettings.endDate] = endDate;\n        this.selectedSegment[taskSettings.duration] = this.parent.dataOperation.getDuration(this.selectedSegment[taskSettings.startDate], this.selectedSegment[taskSettings.endDate], this.editedRecord.ganttProperties.durationUnit, true, false, true);\n      }\n    }\n    if (!isNullOrUndefined(taskSettings.startDate)) {\n      this.updateSegmentField(taskSettings.startDate, args, this.selectedSegment);\n    }\n    if (!isNullOrUndefined(taskSettings.endDate)) {\n      this.updateSegmentField(taskSettings.endDate, args, this.selectedSegment);\n    }\n    if (!isNullOrUndefined(taskSettings.duration)) {\n      this.updateSegmentField(taskSettings.duration, args, this.selectedSegment);\n    }\n  };\n  DialogEdit.prototype.getPredecessorModel = function (fields) {\n    if (isNullOrUndefined(fields) || fields.length === 0) {\n      fields = ['ID', 'Name', 'Type', 'Offset', 'UniqueId'];\n    }\n    var inputModel = {};\n    inputModel.editSettings = {\n      allowEditing: true,\n      allowAdding: true,\n      allowDeleting: true,\n      mode: 'Normal'\n    };\n    inputModel.locale = this.parent.locale;\n    inputModel.dataSource = [];\n    inputModel.rowHeight = this.parent.isAdaptive ? 48 : null;\n    inputModel.toolbar = [{\n      id: this.parent.element.id + 'DependencyTabContainer' + '_add',\n      prefixIcon: 'e-add',\n      tooltipText: this.localeObj.getConstant('add'),\n      align: 'Right',\n      text: this.parent.isAdaptive ? '' : this.localeObj.getConstant('add')\n    }, {\n      id: this.parent.element.id + 'DependencyTabContainer' + '_delete',\n      prefixIcon: 'e-delete',\n      tooltipText: this.localeObj.getConstant('delete'),\n      align: 'Right',\n      text: this.parent.isAdaptive ? '' : this.localeObj.getConstant('delete')\n    }];\n    var columns = [];\n    for (var i = 0; i < fields.length; i++) {\n      var column = {};\n      if (fields[i].toLowerCase() === 'id') {\n        column = {\n          field: 'id',\n          headerText: this.localeObj.getConstant('id'),\n          allowEditing: false,\n          width: '70px'\n        };\n        columns.push(column);\n      } else if (fields[i].toLowerCase() === 'name') {\n        column = {\n          field: 'name',\n          headerText: this.localeObj.getConstant('name'),\n          editType: 'stringedit',\n          width: '250px',\n          validationRules: {\n            required: true\n          }\n        };\n        columns.push(column);\n      } else if (fields[i].toLowerCase() === 'type') {\n        column = {\n          field: 'type',\n          headerText: this.localeObj.getConstant('type'),\n          editType: 'dropdownedit',\n          dataSource: this.types,\n          foreignKeyField: 'id',\n          foreignKeyValue: 'text',\n          defaultValue: 'FS',\n          validationRules: {\n            required: true\n          },\n          width: '150px'\n        };\n        columns.push(column);\n      } else if (fields[i].toLowerCase() === 'offset') {\n        column = {\n          field: 'offset',\n          headerText: this.localeObj.getConstant('offset'),\n          editType: 'stringedit',\n          defaultValue: this.parent.dataOperation.getDurationString(0, this.beforeOpenArgs.rowData.ganttProperties.durationUnit),\n          validationRules: {\n            required: true\n          },\n          width: '100px'\n        };\n        columns.push(column);\n      } else if (fields[i].toLowerCase() === 'uniqueid') {\n        column = {\n          field: 'uniqueId',\n          isPrimaryKey: true,\n          visible: false,\n          defaultValue: getUid().toString()\n        };\n        columns.push(column);\n      }\n    }\n    inputModel.columns = columns;\n    inputModel.height = this.parent.isAdaptive || this.parent.enableAdaptiveUI ? '100%' : '153px';\n    return inputModel;\n  };\n  DialogEdit.prototype.getResourcesModel = function (fields) {\n    var ganttObj = this.parent;\n    var resourceSettings = ganttObj.resourceFields;\n    if (isNullOrUndefined(fields) || fields.length === 0) {\n      fields = [resourceSettings.id, resourceSettings.name, resourceSettings.unit, resourceSettings.group];\n    }\n    var inputModel = {\n      allowFiltering: true,\n      treeColumnIndex: -1,\n      childMapping: '',\n      editSettings: {\n        allowEditing: true,\n        mode: 'Cell'\n      },\n      locale: this.parent.locale,\n      allowSelection: true,\n      rowHeight: this.parent.isAdaptive ? 48 : null,\n      filterSettings: {\n        type: 'Menu'\n      },\n      selectionSettings: {\n        checkboxOnly: true,\n        checkboxMode: 'Default',\n        persistSelection: true,\n        type: 'Multiple'\n      }\n    };\n    var columns = [{\n      type: 'checkbox',\n      allowEditing: false,\n      allowSorting: false,\n      allowFiltering: false,\n      width: 60\n    }];\n    for (var i = 0; i < fields.length; i++) {\n      var column = {};\n      if (fields[i] === resourceSettings.id) {\n        column = {\n          field: resourceSettings.id,\n          headerText: this.localeObj.getConstant('id'),\n          isPrimaryKey: true,\n          width: '100px',\n          allowEditing: false\n        };\n        columns.push(column);\n      } else if (fields[i] === resourceSettings.name) {\n        column = {\n          field: resourceSettings.name,\n          headerText: this.localeObj.getConstant('name'),\n          allowEditing: false\n        };\n        columns.push(column);\n      } else if (fields[i] === resourceSettings.unit) {\n        column = {\n          field: resourceSettings.unit,\n          headerText: this.localeObj.getConstant('unit'),\n          editType: 'numericedit',\n          edit: {\n            params: {\n              min: 0\n            }\n          }\n        };\n        columns.push(column);\n      } else if (fields[i] === resourceSettings.group && !isNullOrUndefined(resourceSettings.group)) {\n        column = {\n          field: resourceSettings.group,\n          headerText: this.localeObj.getConstant('group'),\n          allowEditing: false\n        };\n        columns.push(column);\n      }\n    }\n    inputModel.columns = columns;\n    inputModel.height = this.parent.isAdaptive || this.parent.enableAdaptiveUI ? '100%' : '196px';\n    return inputModel;\n  };\n  DialogEdit.prototype.getNotesModel = function (fields) {\n    if (isNullOrUndefined(fields) || fields.length === 0) {\n      fields = ['Bold', 'Italic', 'Underline', 'StrikeThrough', 'FontName', 'FontSize', 'FontColor', 'BackgroundColor', 'LowerCase', 'UpperCase', '|', 'Alignments', 'OrderedList', 'UnorderedList', 'Outdent', 'Indent', '|', 'CreateTable', 'CreateLink', '|', 'ClearFormat', 'Print', '|', 'Undo', 'Redo'];\n    }\n    var inputModel = {\n      placeholder: this.localeObj.getConstant('writeNotes'),\n      toolbarSettings: {\n        items: fields\n      },\n      height: this.parent.isAdaptive || this.parent.enableAdaptiveUI ? '100%' : 'auto',\n      locale: this.parent.locale\n    };\n    return inputModel;\n  };\n  DialogEdit.prototype.createDivElement = function (className, id) {\n    return createElement('div', {\n      className: className,\n      id: id\n    });\n  };\n  DialogEdit.prototype.createFormElement = function (className, id) {\n    return createElement('form', {\n      className: className,\n      id: id\n    });\n  };\n  DialogEdit.prototype.createInputElement = function (className, id, fieldName, type) {\n    return createElement(type || 'input', {\n      className: className,\n      attrs: {\n        type: 'text',\n        id: id,\n        name: fieldName,\n        title: fieldName\n      }\n    });\n  };\n  DialogEdit.prototype.renderTabItems = function () {\n    var tabModel = this.beforeOpenArgs.tabModel;\n    var isCustomTab = false;\n    var items = tabModel.items;\n    var index = 0;\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      if (item.content instanceof HTMLElement) {\n        continue;\n      } else if (item.content === 'General') {\n        item.content = this.renderGeneralTab(item.content);\n      } else if (item.content === 'Dependency') {\n        if (this.editedRecord.hasChildRecords && !this.parent.allowParentDependency) {\n          item.disabled = true;\n        }\n        item.content = this.renderPredecessorTab(item.content);\n      } else if (item.content === 'Resources') {\n        item.content = this.renderResourceTab(item.content);\n      } else if (item.content === 'Custom' + '' + index) {\n        isCustomTab = true;\n        item.content = this.renderCustomTab(item.content, isCustomTab);\n        index++;\n      } else if (item.content === 'Notes') {\n        item.content = this.renderNotesTab(item.content);\n      } else if (item.content === 'Segments') {\n        if (this.editedRecord.hasChildRecords) {\n          item.disabled = true;\n        }\n        item.content = this.renderSegmentsTab(item.content);\n      }\n    }\n  };\n  DialogEdit.prototype.segmentGridActionBegin = function (args) {\n    var _a, _b;\n    var taskFields = this.parent.taskFields;\n    var itemName = 'Segments';\n    var gridModel = this.beforeOpenArgs[itemName];\n    if (args.requestType === 'add' || args.requestType === 'beginEdit' || args.requestType === 'save') {\n      var gridData = gridModel.dataSource;\n      var selectedItem = getValue('rowData', args);\n      var startDate = this.beforeOpenArgs.rowData.ganttProperties.startDate;\n      if (!isNullOrUndefined(startDate)) {\n        if (args.requestType === 'add') {\n          var arg = {};\n          var sDate = getValue(this.parent.taskFields.startDate, selectedItem);\n          var eDate = this.parent.taskFields.endDate ? getValue(this.parent.taskFields.endDate, selectedItem) : null;\n          var duration = void 0;\n          if (!isNullOrUndefined(this.parent.taskFields.duration)) {\n            duration = getValue(this.parent.taskFields.duration, selectedItem);\n          }\n          var startDate_1 = !isNullOrUndefined(gridData) && gridData.length > 0 ? !isNullOrUndefined(taskFields.endDate) && !isNullOrUndefined(gridData[0][taskFields.endDate]) ? new Date(getValue(taskFields.endDate, gridData[0]).getTime()) : new Date(getValue(taskFields.startDate, gridData[0]).getTime()) : !isNullOrUndefined(this.beforeOpenArgs.rowData.ganttProperties.startDate) && new Date(this.beforeOpenArgs.rowData.ganttProperties.startDate.getTime());\n          startDate_1.setHours(0, 0, 0, 0);\n          if (!isNullOrUndefined(gridData) && gridData.length > 0) {\n            startDate_1.setDate(startDate_1.getDate() + 2);\n          }\n          sDate = this.parent.dataOperation.checkStartDate(startDate_1);\n          eDate = this.parent.dateValidationModule.getDateFromFormat(sDate);\n          var dayEndTime = this.parent['getCurrentDayEndTime'](eDate);\n          if (eDate.getHours() === 0 && dayEndTime !== 86400) {\n            this.parent.dateValidationModule.setTime(dayEndTime, eDate);\n          }\n          eDate = !isNullOrUndefined(taskFields.endDate) && !isNullOrUndefined(gridData) && gridData.length <= 0 ? this.beforeOpenArgs.rowData.ganttProperties.endDate : eDate;\n          var rowData = this.beforeOpenArgs.rowData.ganttProperties;\n          if (sDate.getTime() === eDate.getTime()) {\n            duration = 1;\n          } else {\n            duration = this.parent.dataOperation.getDuration(sDate, eDate, rowData.durationUnit, true, false, true);\n          }\n          if (!isNullOrUndefined(taskFields['duration'])) {\n            arg = (_a = {}, _a[taskFields['startDate']] = sDate, _a[taskFields['endDate']] = eDate, _a[taskFields['duration']] = duration, _a);\n          } else {\n            arg = (_b = {}, _b[taskFields['startDate']] = sDate, _b[taskFields['endDate']] = eDate, _b);\n          }\n          args.rowData = arg;\n        }\n      }\n      if (args.requestType === 'save') {\n        var dataSource = gridModel.dataSource;\n        var taskIdField_1 = this.parent.taskFields.id;\n        var newId_1 = dataSource.length;\n        while (dataSource.some(function (item) {\n          return item[taskIdField_1] === newId_1;\n        })) {\n          newId_1++;\n        }\n        if (isNullOrUndefined(args.data[taskIdField_1])) {\n          args.data[taskIdField_1] = newId_1;\n          args.rowData[taskIdField_1] = newId_1;\n        }\n      }\n      this.selectedSegment = args.rowData;\n      // if (args.requestType === 'save') {\n      //     // let duration: string = 'duration';\n      //     // let tempDuration: Object = this.parent.dataOperation.getDurationValue(args.data[duration]);\n      //     // args.data[duration] = getValue('duration', tempDuration);\n      //     this.selectedSegment = !isNullOrUndefined(this.editedRecord.ganttProperties.segments[args.rowIndex]) ?\n      //         this.editedRecord.ganttProperties.segments[args.rowIndex] : !isNullOrUndefined(gridData[args.rowIndex]) ?\n      //             gridData[args.rowIndex] : gridData;\n      // }\n    }\n  };\n  DialogEdit.prototype.getDialogTabIndex = function (tabName) {\n    var indexValue;\n    if (!this.isEdit) {\n      this.parent.addDialogFields.map(function (item, index) {\n        if (item.type === tabName) {\n          indexValue = index;\n        }\n      });\n    } else {\n      this.parent.editDialogFields.map(function (item, index) {\n        if (item.type === tabName) {\n          indexValue = index;\n        }\n      });\n    }\n    return indexValue;\n  };\n  /* eslint-disable-next-line */\n  DialogEdit.prototype.setInjected = function (dialogField, allProperty, Grid, toolbar, toolbarCollection, gridModel, columnCollection) {\n    if (!isNullOrUndefined(dialogField) && !isNullOrUndefined(dialogField.additionalParams)) {\n      allProperty = dialogField.additionalParams;\n      for (var i in allProperty) {\n        if (Object.prototype.hasOwnProperty.call(allProperty, i)) {\n          switch (i) {\n            case 'allowFiltering':\n              Grid.Inject(Filter);\n              break;\n            case 'allowSorting':\n              Grid.Inject(Sort);\n              break;\n            case 'allowPaging':\n              Grid.Inject(Page);\n              break;\n            case 'allowGrouping':\n              Grid.Inject(Group);\n              break;\n            case 'editSettings':\n              Grid.Inject(Edit);\n              break;\n            case 'aggregates':\n              Grid.Inject(Aggregate);\n              break;\n            case 'showColumnChooser':\n              Grid.Inject(ColumnChooser);\n              break;\n            case 'showColumnMenu':\n              Grid.Inject(ColumnMenu);\n              break;\n            case 'contextMenuItems':\n              Grid.Inject(ContextMenu);\n              break;\n            case 'allowResizing':\n              Grid.Inject(Resize);\n              break;\n            case 'allowReordering':\n              Grid.Inject(Reorder);\n              break;\n            case 'detailTemplate':\n              Grid.Inject(DetailRow);\n              break;\n            case 'allowRowDragAndDrop':\n              Grid.Inject(RowDD);\n              break;\n            case 'searchSettings':\n              Grid.Inject(Search);\n              break;\n            case 'selectionSettings':\n              Grid.Inject(Selection);\n              break;\n            case 'enableVirtualization':\n              Grid.Inject(VirtualScroll);\n              break;\n            case 'toolbar':\n              toolbar = allProperty['toolbar'];\n              toolbar.map(function (item) {\n                switch (item) {\n                  case 'Search':\n                    Grid.Inject(Search);\n                    break;\n                  case 'Print':\n                    Grid.Inject(Print);\n                    break;\n                  case 'PdfExport':\n                    Grid.Inject(PdfExport);\n                    break;\n                  case 'ExcelExport':\n                    Grid.Inject(ExcelExport);\n                    break;\n                  default:\n                    break;\n                }\n              });\n              toolbarCollection = gridModel.toolbar;\n              Grid.Inject(GridToolbar);\n              break;\n            case 'columns':\n              columnCollection = gridModel.columns;\n              break;\n            default:\n              break;\n          }\n        }\n      }\n    }\n  };\n  DialogEdit.prototype.renderSegmentsTab = function (itemName) {\n    var _this = this;\n    var ganttObj = this.parent;\n    var gridModel = this.beforeOpenArgs[itemName];\n    gridModel.enableAdaptiveUI = this.parent.enableAdaptiveUI;\n    var ganttData = this.beforeOpenArgs.rowData;\n    var preData = [];\n    if (this.isEdit) {\n      preData = isNullOrUndefined(ganttData.taskData[this.parent.taskFields['segments']]) ? [] : ganttData.taskData[this.parent.taskFields['segments']];\n    }\n    /* eslint-disable-next-line */\n    preData.map(function (item, index) {\n      if (isNullOrUndefined(item[_this.parent.taskFields['id']])) {\n        item[_this.parent.taskFields['id']] = index;\n      }\n    });\n    gridModel.dataSource = preData;\n    gridModel.actionBegin = this.segmentGridActionBegin.bind(this);\n    var tabIndex = this.getDialogTabIndex('Segments');\n    var dialogField;\n    if (!this.isEdit) {\n      dialogField = this.parent.addDialogFields[tabIndex];\n    } else if (this.isEdit) {\n      dialogField = this.parent.editDialogFields[tabIndex];\n    }\n    var allProperty;\n    var toolbarCollection = [];\n    /* eslint-disable-next-line */\n    var columnCollection = [];\n    var toolbar;\n    if (!isNullOrUndefined(dialogField) && !isNullOrUndefined(dialogField.additionalParams)) {\n      allProperty = dialogField.additionalParams;\n    }\n    this.setInjected(dialogField, allProperty, Grid, toolbar, toolbarCollection, gridModel, columnCollection);\n    Grid.Inject(Edit, Page, GridToolbar, ForeignKey);\n    gridModel = __assign({}, gridModel, allProperty);\n    gridModel.toolbar = toolbarCollection.concat(gridModel.toolbar);\n    var columnCollections = this.updateColumns(columnCollection, gridModel.columns);\n    gridModel.columns = columnCollections;\n    var gridObj = new Grid(gridModel);\n    var divElement = this.createDivElement('', ganttObj.element.id + '' + itemName + 'TabContainer');\n    gridObj.appendTo(divElement);\n    return divElement;\n  };\n  DialogEdit.prototype.renderGeneralTab = function (itemName, isCustomTab) {\n    var ganttObj = this.parent;\n    /* eslint-disable-next-line */\n    var addFields = [];\n    var divElement;\n    var itemModel = this.beforeOpenArgs[itemName];\n    if (isCustomTab) {\n      divElement = this.createDivElement('e-edit-form-row', ganttObj.element.id + '' + itemName + 'TabContainer');\n    } else {\n      divElement = this.createFormElement('e-edit-form-row', ganttObj.element.id + '' + itemName + 'TabContainer');\n    }\n    var table;\n    var tbody;\n    if (this.parent.enableAdaptiveUI) {\n      divElement.style.height = '100%';\n      table = createElement('table', {\n        className: 'e-table'\n      });\n      table.style.width = '100%';\n      tbody = createElement('tbody');\n    }\n    var getId = divElement.id;\n    for (var _i = 0, _a = Object.keys(itemModel); _i < _a.length; _i++) {\n      var key = _a[_i];\n      if (this.parent.columnByField[key].visible === false) {\n        continue;\n      }\n      var column = this.parent.columnByField[key];\n      var inputModel = itemModel[key];\n      if (this.parent.enableAdaptiveUI) {\n        tbody.appendChild(this.renderInputElements(inputModel, column));\n      } else {\n        divElement.appendChild(this.renderInputElements(inputModel, column));\n      }\n      addFields.push(key);\n    }\n    if (this.parent.enableAdaptiveUI) {\n      table.appendChild(tbody);\n      divElement.appendChild(table);\n    }\n    if (getId !== divElement.id) {\n      divElement.id = getId;\n    }\n    var tabIndex = this.getDialogTabIndex('General');\n    var fields = [];\n    if (!this.isEdit && !isNullOrUndefined(this.parent.addDialogFields[tabIndex]) && !isNullOrUndefined(this.parent.addDialogFields[tabIndex].fields)) {\n      fields = this.parent.addDialogFields[tabIndex].fields;\n    } else if (this.isEdit && !isNullOrUndefined(this.parent.editDialogFields[tabIndex]) && !isNullOrUndefined(this.parent.editDialogFields[tabIndex].fields)) {\n      fields = this.parent.editDialogFields[tabIndex].fields;\n    }\n    if (!isNullOrUndefined(fields)) {\n      var templateFields = fields.filter(function (item) {\n        return !addFields.includes(item);\n      });\n      if (!isNullOrUndefined(templateFields)) {\n        var template = templateFields;\n        for (var i = 0; i <= template.length - 1; i++) {\n          var scriptElement = document.getElementById(template[i]);\n          if (!isNullOrUndefined(scriptElement)) {\n            var templateContent = scriptElement.innerHTML;\n            var div = createElement('div');\n            div.innerHTML = templateContent;\n            divElement.appendChild(div.children[0]);\n          }\n        }\n      }\n    }\n    return divElement;\n  };\n  DialogEdit.prototype.isCheckIsDisabled = function (column) {\n    var disabled = false;\n    var stringOrNumber;\n    if (column.allowEditing === false || column.isPrimaryKey || this.parent.readOnly) {\n      if (this.parent.customColumns.indexOf(column.field) !== -1) {\n        disabled = true;\n      } else {\n        if (column.field === this.parent.taskFields.baselineStartDate || column.field === this.parent.taskFields.baselineEndDate || column.field === this.parent.taskFields.work || column.field === this.parent.taskFields.type || column.field === this.parent.taskFields.id || column.field === this.parent.taskFields.name || column.field === this.parent.taskFields.duration || column.field === this.parent.taskFields.progress || column.field === this.parent.taskFields.startDate || column.field === this.parent.taskFields.endDate) {\n          for (var i = 0; i < this.parent.currentViewData['length']; i++) {\n            if (!isNullOrUndefined(this.parent.currentViewData[i].ganttProperties.taskId)) {\n              stringOrNumber = this.parent.currentViewData[i].ganttProperties.taskId;\n              break;\n            }\n          }\n          if (typeof stringOrNumber === 'string') {\n            disabled = false;\n          } else {\n            disabled = true;\n          }\n        }\n      }\n    }\n    if (this.isEdit) {\n      if (column.field === this.parent.taskFields.id) {\n        disabled = true;\n      }\n      if (this.editedRecord.hasChildRecords) {\n        if (column.field === this.parent.taskFields.endDate && (!isNullOrUndefined(this.editedRecord['isManual']) && this.editedRecord['isManual'] === false || this.parent.taskMode === 'Auto') || column.field === this.parent.taskFields.duration || column.field === this.parent.taskFields.progress || column.field === this.parent.taskFields.work || column.field === this.parent.taskFields.type) {\n          disabled = true;\n        }\n      }\n    }\n    return disabled;\n  };\n  DialogEdit.prototype.isParentValid = function (data) {\n    if (data.length > 0) {\n      for (var i = 0; i < data.length; i++) {\n        if (data[i].uniqueID === this.beforeOpenArgs.rowData['uniqueID']) {\n          this.isValidData = false;\n          break;\n        }\n        if (data[i].hasChildRecords) {\n          this.isParentValid(data[i].childRecords);\n        }\n        if (!this.isValidData) {\n          break;\n        }\n      }\n    }\n    return this.isValidData;\n  };\n  DialogEdit.prototype.renderPredecessorTab = function (itemName) {\n    var _this = this;\n    var ganttObj = this.parent;\n    var gridModel = this.beforeOpenArgs[itemName];\n    var dependencyColumn = this.parent.columnByField[this.parent.taskFields.dependency];\n    if (dependencyColumn.allowEditing === false || dependencyColumn.isPrimaryKey || this.parent.readOnly) {\n      gridModel.editSettings.allowEditing = false;\n      gridModel.editSettings.allowAdding = false;\n      gridModel.editSettings.allowDeleting = false;\n    }\n    var ganttData = this.beforeOpenArgs.rowData;\n    var preData = [];\n    this.taskNameCollection();\n    if (this.isEdit) {\n      preData = this.predecessorEditCollection(ganttData);\n      this.updatePredecessorDropDownData(ganttData);\n    }\n    var predecessorLength;\n    if (ganttData[this.parent.taskFields.dependency]) {\n      predecessorLength = ganttData[this.parent.taskFields.dependency].split(',').length;\n    }\n    if (this.preTableCollection.length === 0 || this.preTableCollection.length === predecessorLength) {\n      gridModel.editSettings.allowAdding = false;\n    }\n    gridModel.actionComplete = this.gridActionComplete.bind(this);\n    gridModel.dataSource = preData;\n    gridModel.enableAdaptiveUI = this.parent.enableAdaptiveUI;\n    gridModel.actionBegin = this.gridActionBegin.bind(this);\n    var columns = gridModel.columns;\n    columns[1].edit = {\n      write: function (args) {\n        if (getValue('requestType', args) === 'add') {\n          setValue('rowData.uniqueId', getUid(), args);\n        }\n        var field = 'name';\n        var autoObj = new ComboBox({\n          dataSource: new DataManager(_this.idCollection),\n          popupHeight: '180px',\n          allowCustom: false,\n          enableRtl: _this.parent.enableRtl,\n          fields: {\n            value: 'text'\n          },\n          value: args.rowData[field],\n          change: function (arg) {\n            var tr = closest(arg.element, 'tr');\n            var idInput = tr.querySelector('#' + _this.parent.element.id + 'DependencyTabContainerid');\n            if (idInput) {\n              if (!isNullOrUndefined(arg.itemData) && !isNullOrUndefined(arg.item)) {\n                idInput.value = arg.itemData.id;\n              } else {\n                idInput.value = '';\n              }\n            }\n          },\n          autofill: true\n        });\n        autoObj.appendTo(args.element);\n      },\n      read: function (args) {\n        var ej2Instance = args.ej2_instances[0];\n        return ej2Instance.value;\n      }\n    };\n    var tabIndex = this.getDialogTabIndex('Dependency');\n    var dialogField;\n    if (!this.isEdit) {\n      dialogField = this.parent.addDialogFields[tabIndex];\n    } else if (this.isEdit) {\n      dialogField = this.parent.editDialogFields[tabIndex];\n    }\n    var toolbarCollection = [];\n    var allProperty;\n    var columnCollection = [];\n    var toolbar;\n    if (!isNullOrUndefined(dialogField) && !isNullOrUndefined(dialogField.additionalParams)) {\n      allProperty = dialogField.additionalParams;\n    }\n    this.setInjected(dialogField, allProperty, Grid, toolbar, toolbarCollection, gridModel, columnCollection);\n    Grid.Inject(Edit, Page, GridToolbar, ForeignKey);\n    gridModel = __assign({}, gridModel, allProperty);\n    gridModel.toolbar = gridModel.toolbar.concat(toolbarCollection);\n    var columnCollections = this.updateColumns(columnCollection, gridModel.columns);\n    gridModel.columns = columnCollections;\n    var gridObj = new Grid(gridModel);\n    var divElement = this.createDivElement('e-dependent-div', ganttObj.element.id + '' + itemName + 'TabContainer');\n    gridObj.appendTo(divElement);\n    return divElement;\n  };\n  DialogEdit.prototype.updateColumns = function (existingColumns, newColumns) {\n    var columnMap = {};\n    existingColumns.forEach(function (column) {\n      if (typeof column === 'object') {\n        columnMap[column.field] = column;\n      }\n    });\n    newColumns.forEach(function (newColumn) {\n      if (typeof newColumn === 'object') {\n        var field = newColumn.field;\n        if (columnMap[field]) {\n          Object.assign(columnMap[field], newColumn);\n        } else {\n          existingColumns.push(newColumn);\n        }\n      }\n    });\n    return existingColumns;\n  };\n  DialogEdit.prototype.gridActionBegin = function (args) {\n    var _this = this;\n    var itemName = 'Dependency';\n    var gridModel = this.beforeOpenArgs[itemName];\n    if (args.requestType === 'add' || args.requestType === 'beginEdit') {\n      var isEdit_1 = args.requestType === 'add' ? false : true;\n      this.idCollection = extend([], [], this.preTableCollection, true);\n      var gridData_1 = gridModel.dataSource;\n      var _loop_2 = function (i) {\n        // eslint-disable-next-line\n        this_2.idCollection.forEach(function (data, index) {\n          if (data.id === getValue('id', gridData_1[i])) {\n            var selectedItem = getValue('rowData', args);\n            if (isEdit_1 && getValue('id', selectedItem) === data.id) {\n              return;\n            }\n            _this.idCollection.splice(_this.idCollection.indexOf(data), 1);\n          }\n        });\n      };\n      var this_2 = this;\n      for (var i = 0; i <= gridData_1.length; i++) {\n        _loop_2(i);\n      }\n    }\n  };\n  DialogEdit.prototype.gridActionComplete = function (args) {\n    if (args.requestType === 'save') {\n      var dialogElement = this.parent.editModule.dialogModule.dialog.querySelector('#' + this.parent.element.id + 'DependencyTabContainer');\n      if (!isNullOrUndefined(dialogElement)) {\n        if (!isNullOrUndefined(args['rows']) && args['rows'].length === this.preTableCollection.length) {\n          /* eslint-disable-next-line */\n          var gridObj = dialogElement['ej2_instances'][0];\n          if (gridObj) {\n            gridObj.editSettings.allowAdding = false;\n          }\n        }\n      }\n    }\n  };\n  DialogEdit.prototype.updateResourceCollection = function (args, resourceTreeGridId) {\n    if (!isNullOrUndefined(args.data) && Object.keys(args.data).length) {\n      var treeGridId = document.querySelector('#' + resourceTreeGridId);\n      var resourceTreeGrid = treeGridId.ej2_instances[0];\n      if (!isNullOrUndefined(resourceTreeGrid) && resourceTreeGrid.getSelectedRecords().length > 0) {\n        var tempRecords = resourceTreeGrid.getSelectedRecords();\n        var index = void 0;\n        var selectedItems = [];\n        for (index = 0; index < tempRecords.length; index++) {\n          selectedItems.push(tempRecords[index].taskData);\n        }\n        this.ganttResources = extend([], selectedItems);\n      } else {\n        this.ganttResources = [];\n      }\n    } else {\n      this.ganttResources = [];\n    }\n  };\n  DialogEdit.prototype.renderResourceTab = function (itemName) {\n    var _this = this;\n    var ganttObj = this.parent;\n    var resourceSettings = ganttObj.resourceFields;\n    var ganttData = this.beforeOpenArgs.rowData;\n    if ((this.beforeOpenArgs.requestType === 'beforeOpenEditDialog' && !isNullOrUndefined(this.editedRecord[this.parent.taskFields.resourceInfo]) || this.beforeOpenArgs.requestType === 'beforeOpenAddDialog' && !isNullOrUndefined(this.editedRecord[this.parent.taskFields.resourceInfo])) && typeof this.editedRecord[this.parent.taskFields.resourceInfo] === 'object') {\n      this.parent.setRecordValue('resourceInfo', this.parent.dataOperation.setResourceInfo(this.editedRecord), ganttData.ganttProperties, true);\n    }\n    var rowResource = ganttData.ganttProperties.resourceInfo;\n    var inputModel = this.beforeOpenArgs[itemName];\n    inputModel.enableAdaptiveUI = this.parent.enableAdaptiveUI;\n    var resourceTreeGridId = ganttObj.element.id + '' + itemName + 'TabContainer';\n    var resourceData = [];\n    if (this.parent.viewType === 'ResourceView') {\n      for (var i = 0; i < ganttObj.currentViewData.length; i++) {\n        for (var j = 0; j < ganttObj.resources.length; j++) {\n          if (ganttObj.currentViewData[i][ganttObj.taskFields.id] === ganttObj.resources[j][resourceSettings.id] && (ganttObj.currentViewData[i].hasChildRecords || isNullOrUndefined(ganttObj.currentViewData[i].parentItem))) {\n            resourceData.push(extend([], [], [ganttObj.resources[j]], true)[0]);\n          }\n        }\n      }\n    } else {\n      resourceData = extend([], [], ganttObj.resources, true);\n    }\n    this.parent.dataOperation.updateResourceUnit(resourceData);\n    if (!isNullOrUndefined(rowResource)) {\n      var count = void 0;\n      var rowResourceLength = rowResource.length;\n      var index = void 0;\n      var resourceDataLength = resourceData.length;\n      for (count = 0; count < rowResourceLength; count++) {\n        for (index = 0; index < resourceDataLength; index++) {\n          if (rowResource[count][resourceSettings.id] === resourceData[index][resourceSettings.id]) {\n            resourceData[index][resourceSettings.unit] = rowResource[count][resourceSettings.unit];\n          }\n        }\n      }\n    }\n    inputModel.dataSource = resourceData;\n    var resourceInfo = ganttData.ganttProperties.resourceInfo;\n    if (this.isEdit && !isNullOrUndefined(resourceInfo)) {\n      for (var i = 0; i < resourceInfo.length; i++) {\n        this.ganttResources.push(resourceInfo[i]);\n      }\n    } else if (!this.isEdit && !isNullOrUndefined(resourceInfo)) {\n      for (var i = 0; i < resourceInfo.length; i++) {\n        this.ganttResources.push(resourceInfo[i]);\n      }\n    }\n    /* eslint-disable-next-line */\n    inputModel.actionBegin = function (args) {\n      if (args.rowData && args.columnName === _this.parent.resourceFields.unit && _this.editedRecord.ganttProperties.resourceInfo) {\n        for (var i = 0; i < _this.editedRecord.ganttProperties.resourceInfo.length; i++) {\n          if (_this.editedRecord.ganttProperties.resourceInfo[i][_this.parent.resourceFields.id] === args.rowData[_this.parent.resourceFields.id]) {\n            _this.editedRecord.ganttProperties.resourceInfo[i][_this.parent.resourceFields.unit] = args.value;\n          }\n        }\n      }\n    };\n    inputModel.rowSelected = function (args) {\n      _this.updateResourceCollection(args, resourceTreeGridId);\n      _this.currentResources = _this.ganttResources;\n    };\n    inputModel.rowDeselected = function (args) {\n      _this.updateResourceCollection(args, resourceTreeGridId);\n      _this.currentResources = _this.ganttResources;\n    };\n    var divElement = this.createDivElement('e-resource-div', resourceTreeGridId);\n    var tabIndex = this.getDialogTabIndex('Resources');\n    var dialogField;\n    if (!this.isEdit) {\n      dialogField = this.parent.addDialogFields[tabIndex];\n    } else if (this.isEdit) {\n      dialogField = this.parent.editDialogFields[tabIndex];\n    }\n    var allProperty;\n    /* eslint-disable-next-line */\n    var columnCollection = [];\n    var toolbars;\n    if (!isNullOrUndefined(dialogField) && !isNullOrUndefined(dialogField.additionalParams)) {\n      allProperty = dialogField.additionalParams;\n      for (var i in allProperty) {\n        if (Object.prototype.hasOwnProperty.call(allProperty, i)) {\n          switch (i) {\n            case 'allowFiltering':\n              TreeGrid.Inject(TreeGridFilter);\n              break;\n            case 'allowSorting':\n              TreeGrid.Inject(TreeGridSort);\n              break;\n            case 'allowPaging':\n              TreeGrid.Inject(TreeGridPage);\n              break;\n            case 'editSettings':\n              TreeGrid.Inject(TreeGridEdit);\n              break;\n            case 'aggregates':\n              TreeGrid.Inject(TreeGridAggregate);\n              break;\n            case 'showColumnChooser':\n              TreeGrid.Inject(TreeGridAggregate);\n              break;\n            case 'showColumnMenu':\n              TreeGrid.Inject(ColumnMenu);\n              break;\n            case 'contextMenuItems':\n              TreeGrid.Inject(ContextMenu);\n              break;\n            case 'allowResizing':\n              TreeGrid.Inject(TreeGridResize);\n              break;\n            case 'allowReordering':\n              TreeGrid.Inject(TreeGridReorder);\n              break;\n            case 'detailTemplate':\n              TreeGrid.Inject(DetailRow);\n              break;\n            case 'allowRowDragAndDrop':\n              TreeGrid.Inject(TreeGridRowDD);\n              break;\n            case 'searchSettings':\n              TreeGrid.Inject(Search);\n              break;\n            case 'selectionSettings':\n              TreeGrid.Inject(TreeGridSelection);\n              break;\n            case 'toolbar':\n              toolbars = allProperty['toolbar'];\n              toolbars.map(function (item) {\n                switch (item) {\n                  case 'Search':\n                    TreeGrid.Inject(Search);\n                    break;\n                  case 'Print':\n                    TreeGrid.Inject(Print);\n                    break;\n                  case 'PdfExport':\n                    TreeGrid.Inject(PdfExport);\n                    break;\n                  case 'ExcelExport':\n                    TreeGrid.Inject(ExcelExport);\n                    break;\n                  default:\n                    break;\n                }\n              });\n              if (!isNullOrUndefined(toolbars)) {\n                inputModel.toolbar = [];\n                inputModel.toolbar = inputModel.toolbar.concat(toolbars);\n              }\n              TreeGrid.Inject(TreeGridToolbar);\n              break;\n            case 'enableVirtualization':\n              TreeGrid.Inject(VirtualScroll);\n              break;\n            case 'columns':\n              columnCollection = inputModel.columns;\n              break;\n            default:\n              break;\n          }\n        }\n      }\n    }\n    TreeGrid.Inject(TreeGridSelection, TreeGridFilter, TreeGridEdit, VirtualScroll, TreeGridToolbar);\n    inputModel = __assign({}, inputModel, allProperty);\n    var columnCollections = this.updateColumns(columnCollection, inputModel.columns);\n    inputModel.columns = columnCollections;\n    var treeGridObj = new TreeGrid(inputModel);\n    var resourceColumn = this.parent.columnByField[this.parent.taskFields.resourceInfo];\n    if (resourceColumn.allowEditing === false || resourceColumn.isPrimaryKey || this.parent.readOnly) {\n      treeGridObj.allowSelection = false;\n      treeGridObj.allowFiltering = false;\n      treeGridObj.editSettings.allowEditing = false;\n    }\n    treeGridObj.dataBound = function () {\n      if (_this.parent.editDialogFields.length >= 1 && _this.parent.editDialogFields[0].type === 'Resources') {\n        var id = _this.parent.element.id + 'ResourcesTabContainer';\n        _this.resourceSelection(id);\n      }\n    };\n    treeGridObj.appendTo(divElement);\n    return divElement;\n  };\n  DialogEdit.prototype.resourceSelection = function (id) {\n    var _this = this;\n    var resourceTreeGrid = document.querySelector('#' + id).ej2_instances[0];\n    this.parent['triggeredColumnName'] = '';\n    var currentViewData = resourceTreeGrid.getCurrentViewRecords();\n    var resources = this.ganttResources;\n    if (resources && resources.length > 0) {\n      currentViewData.forEach(function (data, index) {\n        for (var i = 0; i < resources.length; i++) {\n          if (data.taskData[_this.parent.resourceFields.id] === resources[i][_this.parent.resourceFields.id] && !isNullOrUndefined(resourceTreeGrid.selectionModule) && resourceTreeGrid.getSelectedRowIndexes().indexOf(index) === -1) {\n            resourceTreeGrid.selectRow(index);\n          }\n        }\n      });\n    }\n  };\n  DialogEdit.prototype.renderCustomTab = function (itemName, isCustomTab) {\n    return this.renderGeneralTab(itemName, isCustomTab);\n  };\n  DialogEdit.prototype.renderNotesTab = function (itemName) {\n    var ganttObj = this.parent;\n    var inputModel = this.beforeOpenArgs[itemName];\n    inputModel.enableHtmlSanitizer = this.parent.enableHtmlSanitizer;\n    var ganttProp = this.editedRecord.ganttProperties;\n    var divElement = this.createDivElement('', ganttObj.element.id + '' + itemName + 'TabContainer');\n    var tabIndex = this.getDialogTabIndex('Notes');\n    var dialogField;\n    var toolbarCollection = [];\n    if (!this.isEdit) {\n      dialogField = this.parent.addDialogFields[tabIndex];\n    } else if (this.isEdit) {\n      dialogField = this.parent.editDialogFields[tabIndex];\n    }\n    var allProperty;\n    if (!isNullOrUndefined(dialogField) && !isNullOrUndefined(dialogField.additionalParams)) {\n      allProperty = dialogField.additionalParams;\n      for (var i in allProperty) {\n        if (Object.prototype.hasOwnProperty.call(allProperty, i)) {\n          switch (i) {\n            case 'toolbarSettings':\n              for (var j = 0; j < allProperty['toolbarSettings'].items.length; j++) {\n                /* eslint-disable-next-line */\n                var key = allProperty['toolbarSettings'].items[j];\n                if (key) {\n                  switch (key) {\n                    case 'Image':\n                      RichTextEditor.Inject(Image);\n                      break;\n                    case 'CreateTable':\n                      RichTextEditor.Inject(Table);\n                      break;\n                    case 'EmojiPicker':\n                      RichTextEditor.Inject(EmojiPicker);\n                      break;\n                    case 'FileManager':\n                      RichTextEditor.Inject(FileManager);\n                      break;\n                    case 'FormatPainter':\n                      RichTextEditor.Inject(FormatPainter);\n                      break;\n                    default:\n                      break;\n                  }\n                }\n              }\n              if (!isNullOrUndefined(allProperty['toolbarSettings'].items)) {\n                toolbarCollection = inputModel.toolbarSettings.items;\n              }\n              RichTextEditor.Inject(RTEToolbar);\n              break;\n            case 'editorMode':\n              RichTextEditor.Inject(MarkdownEditor);\n              break;\n            default:\n              break;\n          }\n        }\n      }\n    }\n    RichTextEditor.Inject(RTEToolbar, Link, HtmlEditor, QuickToolbar, Count, Table);\n    inputModel.value = ganttProp.notes;\n    var notesColumn = this.parent.columnByField[this.parent.taskFields.notes];\n    if (notesColumn.allowEditing === false || notesColumn.isPrimaryKey || this.parent.readOnly) {\n      inputModel.enabled = false;\n    }\n    inputModel = __assign({}, inputModel, allProperty);\n    inputModel.toolbarSettings.items = toolbarCollection.concat(inputModel.toolbarSettings.items);\n    var rteObj = new RichTextEditor(inputModel);\n    rteObj.appendTo(divElement);\n    return divElement;\n  };\n  DialogEdit.prototype.renderInputElements = function (inputModel, column) {\n    var _this = this;\n    var ganttId = this.parent.element.id;\n    var ganttData = this.editedRecord;\n    var divElement = this.createDivElement('e-edit-form-column');\n    var inputElement;\n    var tr;\n    var td;\n    if (this.parent.enableAdaptiveUI) {\n      tr = createElement('tr');\n      td = createElement('td');\n      divElement.style.width = '100%';\n    }\n    var editArgs = {\n      column: column,\n      data: ganttData\n    };\n    if (!isNullOrUndefined(column.edit) && isNullOrUndefined(column.edit.params)) {\n      var create = column.edit.create;\n      if (typeof create === 'string') {\n        create = getObject(create, window);\n        inputElement = create(editArgs);\n      } else {\n        inputElement = column.edit.create(editArgs);\n      }\n      inputElement.className = '';\n      inputElement.setAttribute('type', 'text');\n      inputElement.setAttribute('id', ganttId + '' + column.field);\n      inputElement.setAttribute('name', column.field);\n      inputElement.setAttribute('title', column.field);\n      divElement.appendChild(inputElement);\n    } else {\n      inputElement = this.createInputElement('', ganttId + '' + column.field, column.field);\n      divElement.appendChild(inputElement);\n    }\n    inputModel.enabled = !isNullOrUndefined(inputModel.enabled) ? inputModel.enabled : !this.isCheckIsDisabled(column);\n    if (column.field === this.parent.taskFields.duration) {\n      if (!isNullOrUndefined(column.valueAccessor)) {\n        if (typeof column.valueAccessor === 'string') {\n          var valueAccessor = getObject(column.valueAccessor, window);\n          inputModel.value = valueAccessor(column.field, ganttData, column);\n        } else {\n          inputModel.value = column.valueAccessor(column.field, ganttData, column);\n        }\n      } else if (isNullOrUndefined(column.edit)) {\n        var ganttProp = ganttData.ganttProperties;\n        inputModel.value = this.parent.dataOperation.getDurationString(ganttProp.duration, ganttProp.durationUnit);\n      }\n    } else {\n      if (column.editType === 'booleanedit') {\n        if (ganttData[column.field] === true) {\n          inputModel.checked = true;\n        } else {\n          inputModel.checked = false;\n        }\n      } else {\n        if (!this.parent.taskFields[column.field] && column.editType === 'numericedit' && (ganttData[column.field] === '' || ganttData[column.field] === 0)) {\n          inputModel.value = 0;\n        } else {\n          inputModel.value = ganttData[column.field];\n        }\n      }\n    }\n    if (!isNullOrUndefined(column.edit) && isNullOrUndefined(column.edit.params)) {\n      var write = column.edit.write;\n      var inputObj = void 0;\n      if (typeof write === 'string') {\n        write = getObject(write, window);\n        inputObj = write({\n          column: column,\n          rowData: ganttData,\n          element: inputElement\n        });\n      } else {\n        inputObj = column.edit.write({\n          column: column,\n          rowData: ganttData,\n          element: inputElement\n        });\n      }\n      if (column.field === this.parent.taskFields.duration) {\n        inputObj.change = function (args) {\n          _this.validateScheduleFields(args, column, _this.parent);\n        };\n      }\n    } else {\n      var inputObj = new this.inputs[column.editType](inputModel);\n      inputObj.appendTo(inputElement);\n    }\n    if (this.parent.enableAdaptiveUI) {\n      td.appendChild(divElement);\n      tr.appendChild(td);\n      return tr;\n    } else {\n      return divElement;\n    }\n  };\n  DialogEdit.prototype.taskNameCollection = function () {\n    var flatData = this.parent.flatData;\n    this.preTaskIds = [];\n    this.preTableCollection = [];\n    for (var i = 0; i < flatData.length; i++) {\n      var data = flatData[i];\n      if (this.parent.allowParentDependency) {\n        var currentFlatData = data;\n        if (data.parentUniqueID === this.beforeOpenArgs.rowData['uniqueID']) {\n          this.isValidData = false;\n        } else {\n          do {\n            if (currentFlatData.parentItem) {\n              currentFlatData = this.parent.flatData[this.parent.ids.indexOf(currentFlatData.parentItem.taskId)];\n              if (currentFlatData.uniqueID === this.beforeOpenArgs.rowData['uniqueID']) {\n                this.isValidData = false;\n                break;\n              }\n            }\n          } while (currentFlatData.parentItem);\n        }\n        if (data.hasChildRecords && this.isValidData) {\n          this.isValidData = this.isParentValid(data.childRecords);\n        }\n        if (!this.isValidData) {\n          this.isValidData = true;\n          continue;\n        }\n      } else {\n        if (data.hasChildRecords) {\n          continue;\n        }\n      }\n      var taskId = this.parent.viewType === 'ResourceView' ? data.ganttProperties.taskId.toString() : data.ganttProperties.rowUniqueID.toString();\n      var tempObject = {\n        id: taskId,\n        text: taskId + '-' + data.ganttProperties.taskName,\n        value: taskId\n      };\n      this.preTaskIds.push(tempObject.id);\n      this.preTableCollection.push(tempObject);\n    }\n  };\n  DialogEdit.prototype.predecessorEditCollection = function (ganttData) {\n    var preDataCollection = [];\n    var ganttProp = ganttData.ganttProperties;\n    if (this.isEdit && !isNullOrUndefined(this.parent.taskFields.dependency) && !isNullOrUndefined(ganttData) && !isNullOrUndefined(ganttProp.predecessor)) {\n      var predecessor = ganttProp.predecessor;\n      var idCollection = this.preTableCollection;\n      for (var i = 0; i < predecessor.length; i++) {\n        var from = predecessor[i].from.toString();\n        var preData = {};\n        var taskID = this.parent.viewType === 'ResourceView' ? ganttProp.taskId : ganttProp.rowUniqueID;\n        if (taskID.toString() !== from) {\n          preData.id = from;\n          for (var index = 0; index < idCollection.length; index++) {\n            if (idCollection[index].value === from) {\n              preData.name = idCollection[index].text;\n              break;\n            }\n          }\n          preData.type = predecessor[i].type;\n          var offset = predecessor[i].offset;\n          var offsetUnit = predecessor[i].offsetUnit;\n          preData.offset = this.parent.dataOperation.getDurationString(offset, offsetUnit);\n          preData.uniqueId = getUid();\n          preDataCollection.push(preData);\n        }\n      }\n    }\n    return preDataCollection;\n  };\n  DialogEdit.prototype.updatePredecessorDropDownData = function (ganttData) {\n    var index = -1;\n    var id = this.parent.viewType === 'ResourceView' ? ganttData.ganttProperties.taskId.toString() : ganttData.ganttProperties.rowUniqueID.toString();\n    index = this.preTaskIds.indexOf(id);\n    this.preTableCollection.splice(index, 1);\n    this.preTaskIds.splice(index, 1);\n    this.validSuccessorTasks(ganttData, this.preTaskIds, this.preTableCollection);\n  };\n  DialogEdit.prototype.validSuccessorTasks = function (data, ids, idCollection) {\n    var _this = this;\n    var ganttProp = data.ganttProperties;\n    if (ganttProp.predecessor && ganttProp.predecessor.length > 0) {\n      var predecessor = ganttProp.predecessor;\n      var fromId_1 = this.parent.viewType === 'ResourceView' ? ganttProp.taskId.toString() : ganttProp.rowUniqueID.toString();\n      predecessor.forEach(function (item) {\n        if (item.from.toString() === fromId_1) {\n          var toId = item.to;\n          var idIndex = -1;\n          idIndex = ids.indexOf(toId);\n          if (idIndex > -1) {\n            ids.splice(idIndex, 1);\n            idCollection.splice(idIndex, 1);\n          }\n          var ganttData = _this.parent.connectorLineModule.getRecordByID(toId);\n          var isIdInclude = true;\n          for (var _i = 0, _a = _this.processedId; _i < _a.length; _i++) {\n            var item_1 = _a[_i];\n            if (item_1.id === ganttData.ganttProperties.taskId) {\n              if (Array.isArray(item_1.value) && Array.isArray(ganttData.ganttProperties.predecessor)) {\n                if (item_1.value.length === ganttData.ganttProperties.predecessor.length) {\n                  var arraysMatch = true;\n                  for (var i = 0; i < item_1.value.length; i++) {\n                    if (item_1.value[i] !== ganttData.ganttProperties.predecessor[i]) {\n                      arraysMatch = false;\n                      break;\n                    }\n                  }\n                  if (arraysMatch) {\n                    isIdInclude = false;\n                    break;\n                  }\n                }\n              }\n            }\n          }\n          if (isIdInclude) {\n            _this.processedId.push({\n              id: ganttData.ganttProperties.taskId,\n              value: ganttData.ganttProperties.predecessor\n            });\n            _this.validSuccessorTasks(ganttData, ids, idCollection);\n          }\n        }\n      });\n    }\n  };\n  DialogEdit.prototype.getPredecessorType = function () {\n    var typeText = [this.parent.getPredecessorTextValue('SS'), this.parent.getPredecessorTextValue('SF'), this.parent.getPredecessorTextValue('FS'), this.parent.getPredecessorTextValue('FF')];\n    var types = [{\n      id: 'FS',\n      text: typeText[2],\n      value: typeText[2]\n    }, {\n      id: 'FF',\n      text: typeText[3],\n      value: typeText[3]\n    }, {\n      id: 'SS',\n      text: typeText[0],\n      value: typeText[0]\n    }, {\n      id: 'SF',\n      text: typeText[1],\n      value: typeText[1]\n    }];\n    return types;\n  };\n  DialogEdit.prototype.initiateDialogSave = function () {\n    if (this.isEdit) {\n      this.parent.initiateEditAction(true);\n    } else {\n      this.addedRecord = {};\n    }\n    if (this.currentResources) {\n      this.currentResources = null;\n    }\n    if (this.parent.undoRedoModule && this.parent['isUndoRedoItemPresent']('Edit')) {\n      if (this.parent.undoRedoModule['redoEnabled']) {\n        this.parent.undoRedoModule['disableRedo']();\n      }\n      if (this.isEdit) {\n        this.parent.undoRedoModule['createUndoCollection']();\n        var action = {};\n        action['action'] = 'DialogEdit';\n        action['modifiedRecords'] = [];\n        this.parent.undoRedoModule['getUndoCollection'][this.parent.undoRedoModule['getUndoCollection'].length - 1] = action;\n        if (this.parent.viewType === 'ResourceView') {\n          var isValid = false;\n          if (!this.rowData.ganttProperties.resourceInfo) {\n            if (this.ganttResources.length > 0) {\n              isValid = true;\n            }\n          } else if (this.ganttResources.length !== this.rowData.ganttProperties.resourceInfo.length) {\n            isValid = true;\n          } else {\n            for (var i = 0; i < this.rowData.ganttProperties.resourceInfo.length; i++) {\n              if (this.ganttResources[i][this.parent.resourceFields.id] !== this.rowData.ganttProperties.resourceInfo[i][this.parent.resourceFields.id]) {\n                isValid = true;\n                break;\n              }\n            }\n          }\n          if (isValid) {\n            var indexes = {};\n            indexes['deletedIndexes'] = [];\n            var id_1 = 'T' + this.rowData.ganttProperties.taskId;\n            var rowItems_1 = [];\n            this.parent.taskIds.reduce(function (e, i) {\n              if (i === id_1) {\n                if (this.ganttResources.length === 0) {\n                  rowItems_1.push(this.parent.flatData[this.parent.taskIds.indexOf(i)]);\n                } else {\n                  var parent_1 = this.parent.getTaskByUniqueID(this.parent.flatData[this.parent.taskIds.indexOf(i)].parentUniqueID);\n                  for (var j = 0; j < this.ganttResources.length; j++) {\n                    if (parent_1.ganttProperties.taskId !== this.ganttResources[j][this.parent.resourceFields.id] && rowItems_1.indexOf(this.parent.flatData[this.parent.taskIds.indexOf(i)]) === -1) {\n                      rowItems_1.push(this.parent.flatData[this.parent.taskIds.indexOf(i)]);\n                    }\n                  }\n                }\n              }\n            }.bind(this), []);\n            this.parent.undoRedoModule['findPosition'](extend([], [], rowItems_1, true), indexes, 'deletedIndexes');\n            if (this['indexes']) {\n              this['indexes']['deletedIndexes'][this['indexes']['deletedIndexes'].length] = indexes['deletedIndexes'][0];\n            } else {\n              this['indexes'] = indexes;\n            }\n          }\n        }\n      }\n    }\n    var ganttObj = this.parent;\n    var tabModel = this.beforeOpenArgs.tabModel;\n    var items = tabModel.items;\n    for (var i = 0; i < items.length; i++) {\n      var element = items[i].content;\n      var id = element.getAttribute('id');\n      if (!isNullOrUndefined(id) || id !== '') {\n        id = id.replace(ganttObj.element.id, '');\n        id = id.replace('TabContainer', '');\n        if (id === 'General') {\n          this.updateGeneralTab(element, false);\n        } else if (id === 'Dependency') {\n          this.isFromDialogPredecessor = true;\n          this.updatePredecessorTab(element);\n          this.isFromDialogPredecessor = false;\n        } else if (id === 'Notes') {\n          this.updateNotesTab(element);\n        } else if (id === 'Resources') {\n          this.updateResourceTab(element);\n        } else if (id.indexOf('Custom') !== -1) {\n          this.updateCustomTab(element);\n        } else if (id === 'Segments') {\n          this.updateSegmentsData(element);\n        }\n      }\n    }\n    if (!this.disableUndo && this.parent.undoRedoModule) {\n      this.parent.undoRedoModule['getUndoCollection'].splice(this.parent.undoRedoModule['getUndoCollection'].length - 1, 1);\n      if (this.parent.toolbarModule && this.parent.undoRedoModule['getUndoCollection'].length === 0) {\n        this.parent.toolbarModule.enableItems([this.parent.controlId + '_undo'], false);\n      }\n      this.parent['totalUndoAction']--;\n    }\n    if (this.isEdit) {\n      /**\n       * If any update on edited task do it here\n       */\n      this.parent.editModule['editedRecord'] = this.rowData;\n      this.parent.dataOperation.updateWidthLeft(this.rowData);\n      var editArgs = {\n        data: this.rowData,\n        action: 'DialogEditing'\n      };\n      this.parent.editModule.initiateUpdateAction(editArgs);\n    } else {\n      this.parent.editModule['editedRecord'] = this.addedRecord;\n      if (this.parent.viewType === 'ResourceView') {\n        var newRecords = extend({}, this.addedRecord, true);\n        if (newRecords[this.parent.taskFields.resourceInfo].length) {\n          for (var i = 0; i < newRecords[this.parent.taskFields.resourceInfo].length; i++) {\n            var id = newRecords[this.parent.taskFields.resourceInfo][i].toString();\n            var parentRecordIndex = this.parent.getTaskIds().indexOf('R' + id.toString());\n            if (parentRecordIndex !== -1) {\n              this.parent.editModule.addRecord(this.addedRecord, 'Child', parentRecordIndex);\n              break;\n            }\n          }\n        } else {\n          this.parent.editModule.addRecord(this.addedRecord, 'Bottom');\n        }\n      } else {\n        this.parent.editModule.addRecord(this.addedRecord, this.parent.editSettings.newRowPosition, this.parent.selectedRowIndex);\n      }\n    }\n    return true;\n  };\n  DialogEdit.prototype.updateSegmentTaskData = function (dataSource) {\n    var taskSettings = this.parent.taskFields;\n    if (!this.isEdit) {\n      this.addedRecord[taskSettings.segments] = dataSource;\n    } else {\n      this.parent.setRecordValue('taskData.' + this.parent.taskFields.segments, dataSource, this.rowData);\n      this.parent.setRecordValue('segments', this.parent.dataOperation.setSegmentsInfo(this.rowData, true), this.rowData.ganttProperties, true);\n      this.parent.setRecordValue('segments', this.parent.dataOperation.setSegmentsInfo(this.rowData, false), this.rowData.ganttProperties, true);\n      if (dataSource.length <= 0) {\n        this.validateDuration(this.rowData);\n      }\n    }\n  };\n  DialogEdit.prototype.updateSegmentsData = function (segmentForm) {\n    var gridObj = segmentForm.ej2_instances[0];\n    var isEdit = gridObj.isEdit;\n    var dataSource;\n    if (gridObj.isEdit) {\n      gridObj.endEdit();\n    }\n    if (isEdit && gridObj.currentViewData.length !== gridObj.dataSource['length']) {\n      dataSource = gridObj.dataSource;\n    } else {\n      dataSource = gridObj.currentViewData;\n    }\n    this.updateSegmentTaskData(dataSource);\n  };\n  DialogEdit.prototype.updateGeneralTab = function (generalForm, isCustom) {\n    var ganttObj = this.parent;\n    var childNodes = generalForm.childNodes;\n    var tasksData = {};\n    if (!this.isEdit) {\n      tasksData = this.addedRecord;\n    }\n    for (var i = 0; i < childNodes.length; i++) {\n      var div = childNodes[i];\n      var inputElement = div.querySelector('input[id^=\"' + ganttObj.element.id + '\"]') || div.querySelector('textarea[id^=\"' + ganttObj.element.id + '\"]');\n      if (inputElement) {\n        var fieldName = inputElement.id.replace(ganttObj.element.id, '');\n        var controlObj = div.querySelector('#' + ganttObj.element.id + fieldName).ej2_instances[0];\n        if (this.parent.columnByField[this.parent.taskFields.id].editType === 'stringedit' && fieldName === this.parent.taskFields.id) {\n          var valueString = controlObj.value.toString();\n          controlObj.value = valueString;\n        }\n        var column = ganttObj.columnByField[fieldName];\n        if (fieldName === this.parent.taskFields.duration ? parseInt(this.rowData[fieldName], 10) !== parseInt(controlObj.value, 10) : this.rowData[fieldName] !== controlObj.value) {\n          this.disableUndo = true;\n        }\n        if (!isNullOrUndefined(column) && !isNullOrUndefined(column.edit) && isNullOrUndefined(column.edit.params)) {\n          var read = column.edit.read;\n          if (typeof read === 'string') {\n            read = getObject(read, window);\n            tasksData[fieldName] = read(inputElement, controlObj.value);\n          } else {\n            tasksData[fieldName] = column.edit.read(inputElement, controlObj.value);\n          }\n        } else if (!isNullOrUndefined(column) && column.editType === 'booleanedit') {\n          if (inputElement instanceof HTMLInputElement && inputElement.checked === true) {\n            tasksData[fieldName] = true;\n          } else {\n            tasksData[fieldName] = false;\n          }\n        } else {\n          if (fieldName === this.parent.taskFields.duration) {\n            var numericValue = parseFloat(String(controlObj.value));\n            tasksData[fieldName] = numericValue;\n          } else {\n            if (this.parent.weekWorkingTime.length > 0 && controlObj.value && (fieldName === this.parent.taskFields.startDate || fieldName === this.parent.taskFields.baselineStartDate)) {\n              var sDate = fieldName === this.parent.taskFields.startDate ? this.beforeOpenArgs.rowData['ganttProperties'].startDate : this.beforeOpenArgs.rowData['ganttProperties'].baselineStartDate;\n              var prevDay = this.parent['getStartTime'](sDate);\n              if (prevDay / 3600 === sDate.getHours()) {\n                var dayStartTime = this.parent['getStartTime'](controlObj.value);\n                this.parent.dataOperation.setTime(dayStartTime, controlObj.value);\n                tasksData[fieldName] = controlObj.value;\n              } else {\n                tasksData[fieldName] = controlObj.value;\n              }\n            } else {\n              tasksData[fieldName] = controlObj.value;\n            }\n          }\n          if (this.parent.enableHtmlSanitizer && typeof controlObj.value === 'string') {\n            controlObj.value = SanitizeHtmlHelper.sanitize(controlObj.value);\n            tasksData[fieldName] = controlObj.value;\n          }\n        }\n      }\n    }\n    if (this.isEdit) {\n      if (!isCustom) {\n        this.updateScheduleProperties(this.editedRecord, this.rowData);\n      }\n      ganttObj.editModule.validateUpdateValues(tasksData, this.rowData, true);\n    }\n  };\n  DialogEdit.prototype.updateScheduleProperties = function (fromRecord, toRecord) {\n    this.parent.setRecordValue('startDate', fromRecord.ganttProperties.startDate, toRecord.ganttProperties, true);\n    this.parent.setRecordValue('endDate', fromRecord.ganttProperties.endDate, toRecord.ganttProperties, true);\n    this.parent.setRecordValue('duration', fromRecord.ganttProperties.duration, toRecord.ganttProperties, true);\n    this.parent.setRecordValue('durationUnit', fromRecord.ganttProperties.durationUnit, toRecord.ganttProperties, true);\n    this.parent.setRecordValue('work', fromRecord.ganttProperties.work, toRecord.ganttProperties, true);\n    this.parent.setRecordValue('type', fromRecord.ganttProperties.taskType, toRecord.ganttProperties, true);\n    this.parent.setRecordValue('taskType', fromRecord.ganttProperties.taskType, toRecord.ganttProperties, true);\n    this.parent.setRecordValue('resourceNames', fromRecord.ganttProperties.resourceNames, toRecord.ganttProperties, true);\n    this.parent.setRecordValue('resourceInfo', fromRecord.ganttProperties.resourceInfo, toRecord.ganttProperties, true);\n    if (!isNullOrUndefined(this.parent.taskFields.startDate)) {\n      this.parent.dataOperation.updateMappingData(toRecord, this.parent.taskFields.startDate);\n    }\n    if (!isNullOrUndefined(this.parent.taskFields.endDate)) {\n      this.parent.dataOperation.updateMappingData(toRecord, this.parent.taskFields.endDate);\n    }\n    if (!isNullOrUndefined(this.parent.taskFields.duration)) {\n      this.parent.dataOperation.updateMappingData(toRecord, this.parent.taskFields.duration);\n      this.parent.setRecordValue('durationUnit', fromRecord.ganttProperties.durationUnit, this.rowData, true);\n      if (this.rowData.ganttProperties.duration === 0) {\n        this.parent.setRecordValue('isMilestone', true, toRecord.ganttProperties, true);\n      } else {\n        this.parent.setRecordValue('isMilestone', false, this.rowData.ganttProperties, true);\n      }\n    }\n    if (!isNullOrUndefined(this.parent.taskFields.work)) {\n      this.parent.dataOperation.updateMappingData(this.rowData, this.parent.taskFields.work);\n    }\n    if (!isNullOrUndefined(this.parent.taskFields.manual)) {\n      this.parent.dataOperation.updateMappingData(this.rowData, this.parent.taskFields.manual);\n    }\n    if (!isNullOrUndefined(this.parent.taskFields.type)) {\n      this.parent.dataOperation.updateMappingData(this.rowData, 'type');\n    }\n    if (!isNullOrUndefined(this.parent.taskFields.resourceInfo)) {\n      this.parent.dataOperation.updateMappingData(this.rowData, 'resourceInfo');\n    }\n  };\n  DialogEdit.prototype.updatePredecessorTab = function (preElement) {\n    var gridObj = preElement.ej2_instances[0];\n    if (gridObj.isEdit) {\n      gridObj.endEdit();\n    }\n    var dataSource = gridObj.dataSource;\n    var predecessorName = [];\n    var newValues = [];\n    var predecessorString = '';\n    var ids = [];\n    var parentRecord = [];\n    for (var i = 0; i < dataSource.length; i++) {\n      var preData = dataSource[i];\n      var lastIndex = preData.name.lastIndexOf('-');\n      var splitString = [preData.name.substring(0, lastIndex)];\n      if (isNullOrUndefined(preData.id) || preData.id !== splitString[0]) {\n        preData.id = splitString[0];\n      }\n      if (ids.indexOf(preData.id) === -1) {\n        if (this.parent.viewType === 'ProjectView') {\n          var currentRecord = this.parent.flatData[this.parent.ids.indexOf(preData.id)];\n          if (currentRecord.hasChildRecords && parentRecord.indexOf(currentRecord) === -1) {\n            parentRecord.push(currentRecord);\n          }\n        }\n        var name_1 = preData.id + preData.type;\n        if (preData.offset && preData.offset.indexOf('-') !== -1) {\n          name_1 += preData.offset;\n        } else {\n          name_1 += '+' + preData.offset;\n        }\n        predecessorName.push(name_1);\n        ids.push(preData.id);\n      }\n    }\n    if (this.isEdit) {\n      if (predecessorName.length > 0) {\n        newValues = this.parent.predecessorModule.calculatePredecessor(predecessorName.join(','), this.rowData);\n        this.parent.setRecordValue('predecessor', newValues, this.rowData.ganttProperties, true);\n        predecessorString = this.parent.predecessorModule.getPredecessorStringValue(this.rowData);\n      } else {\n        newValues = [];\n        this.parent.setRecordValue('predecessor', newValues, this.rowData.ganttProperties, true);\n        predecessorString = '';\n      }\n      if (this.parent.undoRedoModule && this.parent.undoRedoModule['getUndoCollection'].length > 0) {\n        this.parent.undoRedoModule['getUndoCollection'][this.parent.undoRedoModule['getUndoCollection'].length - 1]['connectedRecords'] = parentRecord;\n        if (predecessorString !== '' || !isNullOrUndefined(this.rowData.ganttProperties.predecessorsName) && this.rowData.ganttProperties.predecessorsName !== predecessorString && !this.disableUndo) {\n          this.disableUndo = true;\n        }\n      }\n      this.parent.setRecordValue('predecessorsName', predecessorString, this.rowData.ganttProperties, true);\n      this.parent.setRecordValue('taskData.' + this.parent.taskFields.dependency, predecessorString, this.rowData);\n      this.parent.setRecordValue(this.parent.taskFields.dependency, predecessorString, this.rowData);\n      this.parent.predecessorModule.updateUnscheduledDependency(this.rowData);\n    } else {\n      this.addedRecord[this.parent.taskFields.dependency] = predecessorName.length > 0 ? predecessorName.join(',') : '';\n    }\n  };\n  DialogEdit.prototype.updateResourceTab = function (resourceElement) {\n    var treeGridObj = resourceElement.ej2_instances[0];\n    if (treeGridObj) {\n      treeGridObj.grid.endEdit();\n    }\n    var selectedItems = this.ganttResources;\n    if (this.parent.viewType === 'ResourceView' && !isNullOrUndefined(this.rowData.ganttProperties)) {\n      if (JSON.stringify(this.ganttResources) !== JSON.stringify(this.rowData.ganttProperties.resourceInfo)) {\n        this.isResourceUpdate = true;\n        this.previousResource = !isNullOrUndefined(this.rowData.ganttProperties.resourceInfo) ? this.rowData.ganttProperties.resourceInfo.slice() : [];\n      } else {\n        this.isResourceUpdate = false;\n      }\n    }\n    var idArray = [];\n    if (this.isEdit) {\n      if (this.rowData.ganttProperties.resourceInfo && selectedItems.length !== this.rowData.ganttProperties.resourceInfo.length || isNullOrUndefined(this.rowData.ganttProperties.resourceInfo) && selectedItems.length > 0) {\n        this.disableUndo = true;\n      }\n      if (!this.disableUndo) {\n        for (var i = 0; i < selectedItems.length; i++) {\n          if (JSON.stringify(selectedItems[i]) !== JSON.stringify(this.rowData.ganttProperties.resourceInfo[i])) {\n            this.disableUndo = true;\n            break;\n          }\n        }\n      }\n      this.parent.setRecordValue('resourceInfo', selectedItems, this.editedRecord.ganttProperties, true);\n      this.parent.dataOperation.updateMappingData(this.editedRecord, 'resourceInfo');\n      this.parent.editModule.updateResourceRelatedFields(this.editedRecord, 'resource');\n      this.validateDuration(this.editedRecord);\n      this.updateScheduleProperties(this.editedRecord, this.rowData);\n    } else {\n      for (var i = 0; i < selectedItems.length; i++) {\n        idArray.push(selectedItems[i][this.parent.resourceFields.id]);\n        this.isAddNewResource = true;\n      }\n      this.addedRecord[this.parent.taskFields.resourceInfo] = idArray;\n    }\n  };\n  DialogEdit.prototype.updateNotesTab = function (notesElement) {\n    var ganttObj = this.parent;\n    var rte = notesElement.ej2_instances[0];\n    if (this.isEdit) {\n      if (!ganttObj.columnByField[ganttObj.taskFields.notes].disableHtmlEncode) {\n        if (this.rowData.ganttProperties.notes !== rte.getHtml() && (this.rowData.ganttProperties.notes !== null || rte.getHtml() !== '<p><br></p>') && !this.disableUndo) {\n          this.disableUndo = true;\n        }\n        this.parent.setRecordValue('notes', rte.getHtml(), this.rowData.ganttProperties, true);\n      } else {\n        if (this.rowData.ganttProperties.notes !== rte.getText() && (this.rowData.ganttProperties.notes !== null || rte.getText() !== '') && !this.disableUndo) {\n          this.disableUndo = true;\n        }\n        if (rte.getHtml().includes('href')) {\n          this.parent.setRecordValue('notes', rte.getHtml(), this.rowData.ganttProperties, true);\n        } else {\n          this.parent.setRecordValue('notes', rte.getText(), this.rowData.ganttProperties, true);\n        }\n      }\n      ganttObj.dataOperation.updateMappingData(this.rowData, 'notes');\n    } else {\n      this.addedRecord[this.parent.taskFields.notes] = rte.getHtml();\n    }\n  };\n  DialogEdit.prototype.updateCustomTab = function (customElement) {\n    this.updateGeneralTab(customElement, true);\n  };\n  return DialogEdit;\n}();\nexport { DialogEdit };","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","remove","extend","isNullOrUndefined","createElement","getValue","setValue","closest","SanitizeHtmlHelper","DataManager","DataUtil","Dialog","Tab","Grid","Edit","Toolbar","GridToolbar","Page","getObject","Sort","RowDD","Group","Aggregate","ColumnChooser","ContextMenu","ColumnMenu","Resize","Reorder","DetailRow","Search","Print","PdfExport","ExcelExport","Filter","ForeignKey","getActualProperties","RichTextEditor","RTEToolbar","Link","HtmlEditor","QuickToolbar","Count","Image","Table","EmojiPicker","FileManager","FormatPainter","MarkdownEditor","TextBox","NumericTextBox","MaskedTextBox","FormValidator","CheckBox","DatePicker","DateTimePicker","DropDownList","ComboBox","isScheduledTask","TreeGrid","Selection","TreeGridSelection","TreeGridFilter","TreeGridEdit","VirtualScroll","TreeGridSort","TreeGridPage","TreeGridAggregate","TreeGridReorder","TreeGridResize","TreeGridToolbar","TreeGridRowDD","getUid","DialogEdit","parent","isFromDialogPredecessor","isTriggered","taskFieldColumn","customFieldColumn","processedId","updatedEditFields","updatedAddFields","addedRecord","dialogEditValidationFlag","ganttResources","isValidData","isResourceTabUpdated","previousResource","isResourceUpdate","localeObj","beforeOpenArgs","cancel","types","getPredecessorType","rowData","editedRecord","inputs","booleanedit","dropdownedit","datepickeredit","datetimepickeredit","maskededit","numericedit","stringedit","defaultedit","processDialogFields","wireEvents","on","dblClickHandler","e","ganttData","ganttChartModule","getRecordByTarget","editModule","editSettings","allowEditing","openEditDialog","editDialogFields","getDefaultDialogFields","validateDialogFields","addDialogFields","dialogFields","newDialogFields","emptyCustomColumn","fieldItem","type","fields","getGeneralColumnFields","taskFields","dependency","resourceInfo","notes","getCustomColumnFields","push","_i","_a","keys","columnMapping","key","customColumns","columnByField","valueOf","visible","openAddDialog","isEdit","composeAddRecord","isFromAddDialog","createDialog","getMinimumStartDate","minDate","aggregates","min","flatData","Date","getTime","timelineModule","timelineStartDate","dateValidationModule","checkStartDate","tempData","ganttProperties","columns","ganttColumns","taskSettings","id","getNewTaskId","field","rowUniqueID","startDate","endDate","timezone","duration","durationUnit","toLocaleLowerCase","name","getConstant","taskName","progress","work","taskType","isAutoSchedule","taskMode","manual","openToolbarEditDialog","gObj","focusedRowIndex","selectionModule","selectRow","selectedRowId","selectionSettings","mode","selectedRowIndexes","updatedRecords","getSelectedRowCellIndexes","rowIndex","taskId","ganttObj","numericOrString","isNaN","Number","editType","currentViewData","indexOf","ids","toString","selectedRowIndex","viewType","level","isFromEditDialog","_this","dialogModel","dialogMaxWidth","isAdaptive","dialog","element","styles","classList","add","appendChild","animationSettings","effect","header","isModal","enableRtl","allowDragging","enableAdaptiveUI","showCloseIcon","position","X","Y","height","target","document","body","close","dialogClose","bind","closeOnEscape","beforeClose","args","closedBy","event","nodeName","open","dialogElement","generalTabElement","querySelector","scrollHeight","offsetHeight","tabObj","selectedItem","select","style","maxHeight","focusModule","setActiveElement","locale","buttons","buttonModel","content","cssClass","click","buttonClick","createTab","pointerEvents","toLowerCase","innerText","trim","dialogObj","isDestroyed","CustomformObj","formObj","storeValidTab","hide","validate","formValid","storeDependencyTab","firstOccuringTab","dependencyTab","dependencyTabValid","storeResourceTab","resourceTab","resourceTabValid","initiateDialogSave","resetValues","getActiveElement","focus","isAddNewResource","destroyDialogInnerElements","destroy","tabModel","items","getAttribute","replace","destroyCustomField","gridObj","ej2_instances","rte","treeGridObj","childNodes","div","inputElement","fieldName","controlObj","column","edit","params","window","off","dialogModule","undefined","getEditFields","tabItems","dialogSettings","tabElement","tasks","count","index","dialogField","tabItem","headerText","getFieldsModel","segments","getSegmentsModel","getPredecessorModel","getResourcesModel","getNotesModel","text","requestType","trigger","arg","loadingIndicator","indicatorType","showMaskRow","showSpinner","renderTabItems","selected","tabSelectedEvent","overflowMode","isStringTemplate","appendTo","actionCompleteArgs","action","data","treeGrid","grid","getColumns","isValidateColumn","some","obj","validationRules","changeFormObj","actionCompleteArg","hideMaskRow","hideSpinner","storeColumn","taskfields","getFilteredDialogFields","validateColumn","firstFieldType","customFieldColumns","taskFieldColumns","validationRulesArray","customColumn","createFormObj","taskColumn","filter","forEach","targetArray","columnValue","getColumnByField","form","rules","validationComplete","customPlacement","error","nameAttribute","columnName","valErrorPlacement","elem","getElemTable","createTooltip","tooltipContent","innerHTML","outerHTML","errorMessage","display","existingTooltip","getElementById","parentElement","tooltipContainer","className","zIndex","labelId","tooltipLabel","errorMessageElement","cloneNode","arrow","setAttribute","top","left","transform","status","selectedContent","hasEditedBatchCell","getElementsByClassName","hasEditedOrAddedRow","saveCell","batchSave","responsiveTabContent","resourceSelection","refresh","enableToolbarItems","dialogContent","dialogContentHeight","clientHeight","contains","getHeaderContent","toolbar_1","fieldsModel","createInputModel","common","placeholder","floatLabelType","checkboxModel","label","textBox","change","validateScheduleFields","numeric","max","datePickerObj","format","getDateFormat","strictMode","firstDayOfWeek","customTimelineSettings","weekStartDay","renderDayCell","renderWorkingDayCell","dateTimePickerObj","dataKey","fieldsKey","value","dropDownListObj","targetId","currentData","cellValue","colName","formObject","getTaskIds","strViewType","container","path","customFn","options","required","minLength","search","validateSegmentFields","validateScheduleValuesByCurrentField","ganttProp","updateScheduleFields","ganttField","ganttId","col","tempValue","taskField","read","valueAccessor","dataOperation","getDurationString","dataBind","picker","numericTextBox","validateDuration","setRecordValue","isMilestone","calculateEndDate","calculateStartDate","milestone","validateStartDate","allowUnscheduledTasks","calculateDuration","validateEndDate","cellEditModule","validateEndDateWithSegments","parseInt","parseFloat","updateDurationValue","editedArgs","regex","test","err","updateResourceRelatedFields","getDateFromFormat","hasChildRecords","dayEndTime","getHours","setTime","checkEndDate","updateTaskScheduleModes","segmentInputModel","allowAdding","allowDeleting","newRowPosition","dataSource","rowHeight","toolbar","prefixIcon","tooltipText","align","gridColumns","_loop_1","gridColumn","generalTabString","this_1","isPrimaryKey","width","write","datePickerModel","columnFields","columnModel","datePicker","ej2Instance","inputTextModel","inputModel","getGridColumnByField","updateSegmentField","segment","gridModel","inputValue","selectedSegment","getEndDate","getDuration","foreignKeyField","foreignKeyValue","defaultValue","resourceSettings","resourceFields","unit","group","allowFiltering","treeColumnIndex","childMapping","allowSelection","filterSettings","checkboxOnly","checkboxMode","persistSelection","allowSorting","toolbarSettings","createDivElement","createFormElement","createInputElement","attrs","title","isCustomTab","item","HTMLElement","renderGeneralTab","allowParentDependency","disabled","renderPredecessorTab","renderResourceTab","renderCustomTab","renderNotesTab","renderSegmentsTab","segmentGridActionBegin","_b","itemName","gridData","sDate","eDate","startDate_1","setHours","setDate","getDate","taskIdField_1","newId_1","getDialogTabIndex","tabName","indexValue","map","setInjected","allProperty","toolbarCollection","columnCollection","additionalParams","Inject","preData","taskData","actionBegin","tabIndex","concat","columnCollections","updateColumns","divElement","addFields","itemModel","table","tbody","getId","renderInputElements","templateFields","includes","template","scriptElement","templateContent","children","isCheckIsDisabled","stringOrNumber","readOnly","baselineStartDate","baselineEndDate","isParentValid","uniqueID","childRecords","dependencyColumn","taskNameCollection","predecessorEditCollection","updatePredecessorDropDownData","predecessorLength","split","preTableCollection","actionComplete","gridActionComplete","gridActionBegin","autoObj","idCollection","popupHeight","allowCustom","tr","idInput","itemData","autofill","existingColumns","newColumns","columnMap","newColumn","isEdit_1","gridData_1","_loop_2","this_2","splice","updateResourceCollection","resourceTreeGridId","treeGridId","resourceTreeGrid","getSelectedRecords","tempRecords","selectedItems","setResourceInfo","rowResource","resourceData","j","resources","parentItem","updateResourceUnit","rowResourceLength","resourceDataLength","rowSelected","currentResources","rowDeselected","toolbars","resourceColumn","dataBound","getCurrentViewRecords","getSelectedRowIndexes","enableHtmlSanitizer","notesColumn","enabled","rteObj","td","editArgs","create","checked","inputObj","preTaskIds","currentFlatData","parentUniqueID","tempObject","preDataCollection","predecessor","from","taskID","offset","offsetUnit","uniqueId","validSuccessorTasks","fromId_1","toId","to","idIndex","connectorLineModule","getRecordByID","isIdInclude","item_1","Array","isArray","arraysMatch","typeText","getPredecessorTextValue","initiateEditAction","undoRedoModule","isValid","indexes","id_1","rowItems_1","taskIds","reduce","parent_1","getTaskByUniqueID","updateGeneralTab","updatePredecessorTab","updateNotesTab","updateResourceTab","updateCustomTab","updateSegmentsData","disableUndo","toolbarModule","enableItems","controlId","updateWidthLeft","initiateUpdateAction","newRecords","parentRecordIndex","addRecord","updateSegmentTaskData","setSegmentsInfo","segmentForm","endEdit","generalForm","isCustom","tasksData","valueString","HTMLInputElement","numericValue","String","weekWorkingTime","prevDay","dayStartTime","sanitize","updateScheduleProperties","validateUpdateValues","fromRecord","toRecord","resourceNames","updateMappingData","preElement","predecessorName","newValues","predecessorString","parentRecord","lastIndex","lastIndexOf","splitString","substring","currentRecord","name_1","predecessorModule","calculatePredecessor","join","getPredecessorStringValue","predecessorsName","updateUnscheduledDependency","resourceElement","JSON","stringify","slice","idArray","notesElement","disableHtmlEncode","getHtml","getText","customElement"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-gantt/src/gantt/actions/dialog-edit.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { remove, extend, isNullOrUndefined, createElement, getValue, setValue, closest, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Tab } from '@syncfusion/ej2-navigations';\nimport { Grid, Edit, Toolbar as GridToolbar, Page, getObject, Sort, RowDD, Group, Aggregate, ColumnChooser, ContextMenu, ColumnMenu, Resize, Reorder, DetailRow, Search, Print, PdfExport, ExcelExport, Filter } from '@syncfusion/ej2-grids';\nimport { ForeignKey, getActualProperties } from '@syncfusion/ej2-grids';\nimport { RichTextEditor, Toolbar as RTEToolbar, Link, HtmlEditor, QuickToolbar, Count, Image, Table, EmojiPicker, FileManager, FormatPainter, MarkdownEditor } from '@syncfusion/ej2-richtexteditor';\nimport { TextBox, NumericTextBox, MaskedTextBox, FormValidator } from '@syncfusion/ej2-inputs';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { DropDownList, ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { isScheduledTask } from '../base/utils';\nimport { TreeGrid, Selection as TreeGridSelection, Filter as TreeGridFilter, Edit as TreeGridEdit, VirtualScroll, Sort as TreeGridSort, Page as TreeGridPage, Aggregate as TreeGridAggregate, Reorder as TreeGridReorder, Resize as TreeGridResize, Toolbar as TreeGridToolbar, RowDD as TreeGridRowDD } from '@syncfusion/ej2-treegrid';\nimport { getUid } from '../base/utils';\n/**\n *\n * @hidden\n */\nvar DialogEdit = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {Gantt} parent .\n     * @returns {void} .\n     */\n    function DialogEdit(parent) {\n        this.isFromDialogPredecessor = false;\n        this.isTriggered = false;\n        this.taskFieldColumn = [];\n        this.customFieldColumn = [];\n        this.processedId = [];\n        /**\n         * @private\n         */\n        this.updatedEditFields = null;\n        this.updatedAddFields = null;\n        this.addedRecord = null;\n        this.dialogEditValidationFlag = false;\n        this.ganttResources = [];\n        this.isValidData = true;\n        this.isResourceTabUpdated = false;\n        /**\n         * @private\n         */\n        this.previousResource = [];\n        /**\n         * @private\n         */\n        this.isResourceUpdate = false;\n        this.parent = parent;\n        this.localeObj = this.parent.localeObj;\n        this.beforeOpenArgs = { cancel: false };\n        this.types = this.getPredecessorType();\n        this.rowData = {};\n        this.editedRecord = {};\n        this.inputs = {\n            booleanedit: CheckBox,\n            dropdownedit: DropDownList,\n            datepickeredit: DatePicker,\n            datetimepickeredit: DateTimePicker,\n            maskededit: MaskedTextBox,\n            numericedit: NumericTextBox,\n            stringedit: TextBox,\n            defaultedit: TextBox\n        };\n        this.processDialogFields();\n        this.wireEvents();\n    }\n    DialogEdit.prototype.wireEvents = function () {\n        this.parent.on('chartDblClick', this.dblClickHandler, this);\n    };\n    DialogEdit.prototype.dblClickHandler = function (e) {\n        var ganttData = this.parent.ganttChartModule.getRecordByTarget(e);\n        if (!isNullOrUndefined(ganttData) && this.parent.editModule && this.parent.editSettings.allowEditing) {\n            this.openEditDialog(ganttData);\n        }\n    };\n    /**\n     * Method to validate add and edit dialog fields property.\n     *\n     * @returns {void} .\n     * @private\n     */\n    DialogEdit.prototype.processDialogFields = function () {\n        if (isNullOrUndefined(this.parent.editDialogFields) ||\n            this.parent.editDialogFields && this.parent.editDialogFields.length === 0) {\n            this.updatedEditFields = this.getDefaultDialogFields();\n            this.updatedEditFields = this.validateDialogFields(this.updatedEditFields);\n        }\n        else {\n            this.updatedEditFields = this.validateDialogFields(this.parent.editDialogFields);\n        }\n        if (isNullOrUndefined(this.parent.addDialogFields) ||\n            this.parent.addDialogFields && this.parent.addDialogFields.length === 0) {\n            this.updatedAddFields = this.getDefaultDialogFields();\n            this.updatedAddFields = this.validateDialogFields(this.updatedAddFields);\n        }\n        else {\n            this.updatedAddFields = this.validateDialogFields(this.parent.addDialogFields);\n        }\n    };\n    DialogEdit.prototype.validateDialogFields = function (dialogFields) {\n        var newDialogFields = [];\n        var emptyCustomColumn = 0;\n        for (var i = 0; i < dialogFields.length; i++) {\n            var fieldItem = getActualProperties(dialogFields[i]);\n            if (fieldItem.type === 'General' && (isNullOrUndefined(fieldItem.fields) || fieldItem.fields.length === 0)) {\n                fieldItem.fields = this.getGeneralColumnFields();\n            }\n            if (fieldItem.type === 'Dependency' && isNullOrUndefined(this.parent.taskFields.dependency)\n                || fieldItem.type === 'Resources' && isNullOrUndefined(this.parent.taskFields.resourceInfo)\n                || fieldItem.type === 'Notes' && isNullOrUndefined(this.parent.taskFields.notes)) {\n                continue;\n            }\n            if (fieldItem.type === 'Custom' && (isNullOrUndefined(fieldItem.fields) || fieldItem.fields.length === 0)) {\n                emptyCustomColumn += 1;\n                fieldItem.fields = this.getCustomColumnFields();\n            }\n            if (emptyCustomColumn > 1) {\n                continue;\n            }\n            newDialogFields.push(fieldItem);\n        }\n        return newDialogFields;\n    };\n    /**\n     * Method to get general column fields\n     *\n     * @returns {string[]} .\n     */\n    DialogEdit.prototype.getGeneralColumnFields = function () {\n        var fields = [];\n        for (var _i = 0, _a = Object.keys(this.parent.columnMapping); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (key === 'dependency' || key === 'resourceInfo' || key === 'notes') {\n                continue;\n            }\n            fields.push(this.parent.columnMapping[key]);\n        }\n        return fields;\n    };\n    /**\n     * Method to get custom column fields\n     *\n     * @returns {void} .\n     */\n    DialogEdit.prototype.getCustomColumnFields = function () {\n        var fields = [];\n        for (var i = 0; i < this.parent.customColumns.length; i++) {\n            fields.push(this.parent.customColumns[i]);\n        }\n        return fields;\n    };\n    /**\n     * Get default dialog fields when fields are not defined for add and edit dialogs\n     *\n     * @returns {AddDialogFieldSettings} .\n     */\n    DialogEdit.prototype.getDefaultDialogFields = function () {\n        var dialogFields = [];\n        var fieldItem = {};\n        var taskFields = this.parent.taskFields;\n        var columnMapping = this.parent.columnMapping;\n        if (Object.keys(columnMapping).length !== 0) {\n            fieldItem.type = 'General';\n            dialogFields.push(fieldItem);\n        }\n        if (!isNullOrUndefined(getValue('dependency', columnMapping))) {\n            fieldItem = {};\n            if (this.parent.columnByField[columnMapping.dependency.valueOf()].visible !== false) {\n                fieldItem.type = 'Dependency';\n            }\n            dialogFields.push(fieldItem);\n        }\n        if (!isNullOrUndefined(getValue('resourceInfo', columnMapping))) {\n            fieldItem = {};\n            if (this.parent.columnByField[columnMapping.resourceInfo.valueOf()].visible !== false) {\n                fieldItem.type = 'Resources';\n            }\n            dialogFields.push(fieldItem);\n        }\n        if (!isNullOrUndefined(getValue('notes', columnMapping))) {\n            fieldItem = {};\n            if (this.parent.columnByField[columnMapping.notes.valueOf()].visible !== false) {\n                fieldItem.type = 'Notes';\n            }\n            dialogFields.push(fieldItem);\n        }\n        if (!isNullOrUndefined(getValue('segments', taskFields))) {\n            fieldItem = {};\n            fieldItem.type = 'Segments';\n            dialogFields.push(fieldItem);\n        }\n        if (this.parent.customColumns.length > 0) {\n            fieldItem = {};\n            fieldItem.type = 'Custom';\n            dialogFields.push(fieldItem);\n        }\n        return dialogFields;\n    };\n    /**\n     * @returns {void} .\n     * @private\n     */\n    DialogEdit.prototype.openAddDialog = function () {\n        this.isEdit = false;\n        this.editedRecord = this.composeAddRecord();\n        this.isFromAddDialog = true;\n        this.createDialog();\n    };\n    /**\n     *\n     * @returns {Date} .\n     * @private\n     */\n    DialogEdit.prototype.getMinimumStartDate = function () {\n        var minDate = DataUtil.aggregates.min(this.parent.flatData, 'ganttProperties.startDate');\n        if (!isNullOrUndefined(minDate)) {\n            minDate = new Date(minDate.getTime());\n        }\n        else {\n            minDate = new Date(this.parent.timelineModule.timelineStartDate.getTime());\n        }\n        minDate = this.parent.dateValidationModule.checkStartDate(minDate);\n        return new Date(minDate.getTime());\n    };\n    /**\n     * @returns {IGanttData} .\n     * @private\n     */\n    DialogEdit.prototype.composeAddRecord = function () {\n        var tempData = {};\n        tempData.ganttProperties = {};\n        var columns = this.parent.ganttColumns;\n        var taskSettings = this.parent.taskFields;\n        var id = this.parent.editModule.getNewTaskId();\n        for (var i = 0; i < columns.length; i++) {\n            var field = columns[i].field;\n            if (field === taskSettings.id) {\n                tempData[field] = id;\n                tempData.ganttProperties.rowUniqueID = tempData[field];\n            }\n            else if (columns[i].field === taskSettings.startDate) {\n                if (isNullOrUndefined(tempData[taskSettings.endDate])) {\n                    tempData[field] = this.getMinimumStartDate();\n                }\n                else {\n                    tempData[field] = new Date(tempData[taskSettings.endDate]);\n                }\n                if (this.parent.timezone) {\n                    tempData[field] = this.parent.dateValidationModule.remove(tempData[field], this.parent.timezone);\n                }\n                tempData.ganttProperties.startDate = new Date(tempData[field]);\n            }\n            else if (columns[i].field === taskSettings.endDate) {\n                if (isNullOrUndefined(tempData[taskSettings.startDate])) {\n                    tempData[field] = this.getMinimumStartDate();\n                }\n                else {\n                    tempData[field] = new Date(tempData[taskSettings.startDate]);\n                }\n                if (this.parent.timezone) {\n                    tempData[field] = this.parent.dateValidationModule.remove(tempData[field], this.parent.timezone);\n                }\n                tempData.ganttProperties.endDate = new Date(tempData[field]);\n            }\n            else if (columns[i].field === taskSettings.duration) {\n                tempData[field] = 1;\n                tempData.ganttProperties.duration = tempData[field];\n                tempData.ganttProperties.durationUnit = this.parent.durationUnit.toLocaleLowerCase();\n            }\n            else if (columns[i].field === taskSettings.name) {\n                tempData[field] = this.localeObj.getConstant('addDialogTitle') + ' ' + id;\n                tempData.ganttProperties.taskName = tempData[field];\n            }\n            else if (columns[i].field === taskSettings.progress) {\n                tempData[field] = 0;\n                tempData.ganttProperties.progress = tempData[field];\n            }\n            else if (columns[i].field === taskSettings.work) {\n                tempData[field] = 0;\n                tempData.ganttProperties.work = tempData[field];\n            }\n            else if (columns[i].field === taskSettings.type) {\n                tempData[field] = this.parent.taskType;\n                tempData.ganttProperties.taskType = tempData[field];\n            }\n            else {\n                tempData[this.parent.ganttColumns[i].field] = '';\n            }\n        }\n        tempData.ganttProperties.isAutoSchedule = (this.parent.taskMode === 'Auto') ? true :\n            (this.parent.taskMode === 'Manual') ? false :\n                tempData[taskSettings.manual] === true ? false : true;\n        return tempData;\n    };\n    /**\n     * @returns {void} .\n     * @private\n     */\n    DialogEdit.prototype.openToolbarEditDialog = function () {\n        var gObj = this.parent;\n        if (gObj.editModule && gObj.editSettings.allowEditing) {\n            if (this.parent.ganttChartModule.focusedRowIndex > -1 && gObj.selectionModule) {\n                gObj.selectionModule.selectRow(this.parent.ganttChartModule.focusedRowIndex, false, false);\n            }\n            var selectedRowId = gObj.selectionModule ?\n                (gObj.selectionSettings.mode === 'Row' || gObj.selectionSettings.mode === 'Both') &&\n                    gObj.selectionModule.selectedRowIndexes.length === 1 ?\n                    gObj.updatedRecords[gObj.selectionModule.selectedRowIndexes[0]].ganttProperties.rowUniqueID :\n                    gObj.selectionSettings.mode === 'Cell' &&\n                        gObj.selectionModule.getSelectedRowCellIndexes().length === 1 ?\n                        gObj.updatedRecords[gObj.selectionModule.getSelectedRowCellIndexes()[0].rowIndex].ganttProperties.rowUniqueID :\n                        null : null;\n            if (!isNullOrUndefined(selectedRowId)) {\n                this.openEditDialog(selectedRowId);\n            }\n        }\n    };\n    /**\n     * @param { number | string | object} taskId .\n     * @returns {void} .\n     * @private\n     */\n    DialogEdit.prototype.openEditDialog = function (taskId) {\n        var ganttObj = this.parent;\n        if (!isNullOrUndefined(taskId)) {\n            if (!isNullOrUndefined(taskId['ganttProperties'])) {\n                if (typeof taskId['ganttProperties']['taskId'] === 'string') {\n                    this.numericOrString = 'stringedit';\n                }\n                else {\n                    this.numericOrString = 'numericedit';\n                }\n            }\n            if (isNullOrUndefined(taskId['ganttProperties']) && !isNullOrUndefined(taskId)) {\n                if (isNaN(Number(taskId)) || this.parent.columnByField[this.parent.taskFields.id].editType === 'stringedit') {\n                    this.numericOrString = 'stringedit';\n                }\n                else {\n                    this.numericOrString = 'numericedit';\n                }\n            }\n        }\n        if (typeof taskId === 'object' && !isNullOrUndefined(taskId)) {\n            this.rowIndex = this.parent.currentViewData.indexOf(taskId);\n            if (this.rowIndex > -1) {\n                this.rowData = taskId;\n            }\n        }\n        else if (!isNullOrUndefined(taskId)) {\n            this.rowIndex = ganttObj.ids.indexOf(taskId.toString());\n            if (this.rowIndex > -1) {\n                this.rowData = ganttObj.flatData[this.rowIndex];\n            }\n        }\n        else if (ganttObj.selectedRowIndex > -1) {\n            this.rowData = ganttObj.currentViewData[ganttObj.selectedRowIndex];\n            this.rowIndex = ganttObj.selectedRowIndex;\n        }\n        this.isEdit = true;\n        if (this.parent.viewType === 'ResourceView' && this.rowData.level === 0) {\n            return;\n        }\n        if (Object.keys(this.rowData).length !== 0) {\n            this.editedRecord = extend({}, {}, this.rowData, true);\n            this.isFromEditDialog = true;\n            this.createDialog();\n        }\n    };\n    DialogEdit.prototype.createDialog = function () {\n        var _this = this;\n        var ganttObj = this.parent;\n        var dialogModel = {};\n        this.beforeOpenArgs.dialogModel = dialogModel;\n        this.beforeOpenArgs.rowData = this.editedRecord;\n        this.beforeOpenArgs.rowIndex = this.rowIndex;\n        var dialogMaxWidth = this.parent.isAdaptive ? '' : '600px';\n        var dialog = this.parent.createElement('div', { id: ganttObj.element.id + '_dialog', styles: 'max-width:' + dialogMaxWidth });\n        dialog.classList.add('e-gantt-dialog');\n        ganttObj.element.appendChild(dialog);\n        dialogModel.animationSettings = { effect: 'None' };\n        dialogModel.header = this.localeObj.getConstant(this.isEdit ? 'editDialogTitle' : 'addDialogTitle');\n        dialogModel.isModal = true;\n        dialogModel.enableRtl = this.parent.enableRtl;\n        dialogModel.allowDragging = (this.parent.isAdaptive || this.parent.enableAdaptiveUI) ? false : true;\n        dialogModel.showCloseIcon = true;\n        var position = this.parent.isAdaptive ? { X: 'top', Y: 'left' } : { X: 'center', Y: 'center' };\n        dialogModel.position = position;\n        //dialogModel.width = '750px';\n        dialogModel.height = this.parent.isAdaptive ? '100%' : 'auto';\n        dialogModel.target = document.body;\n        dialogModel.close = this.dialogClose.bind(this);\n        dialogModel.closeOnEscape = true;\n        /* eslint-disable-next-line */\n        dialogModel.beforeClose = function (args) {\n            if (args.closedBy === 'escape') {\n                if (args.event.name === 'key-pressed' && args.event.target.nodeName === 'INPUT') {\n                    args.cancel = true;\n                }\n            }\n        };\n        dialogModel.open = function (args) {\n            var dialogElement = getValue('element', args);\n            var generalTabElement = dialogElement.querySelector('#' + _this.parent.element.id + 'GeneralTabContainer');\n            if (generalTabElement && generalTabElement.scrollHeight > generalTabElement.offsetHeight) {\n                generalTabElement.classList.add('e-scroll');\n            }\n            if (_this.tabObj.selectedItem === 0) {\n                _this.tabObj.select(0);\n            }\n            if (_this.parent.isAdaptive) {\n                dialogElement.style.maxHeight = 'none';\n            }\n            if (_this.parent.focusModule) {\n                _this.parent.focusModule.setActiveElement(dialogElement);\n            }\n        };\n        dialogModel.locale = this.parent.locale;\n        dialogModel.buttons = [{\n                buttonModel: {\n                    content: this.localeObj.getConstant('saveButton'), cssClass: 'e-primary'\n                },\n                click: this.buttonClick.bind(this)\n            }, {\n                buttonModel: { cssClass: 'e-flat', content: this.localeObj.getConstant('cancel') },\n                click: this.buttonClick.bind(this)\n            }];\n        this.createTab(dialogModel, dialog);\n    };\n    DialogEdit.prototype.buttonClick = function (e) {\n        var target = e.target;\n        target.style.pointerEvents = 'none';\n        if ((this.localeObj.getConstant('cancel')).toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n            if (this.dialog && !this.dialogObj.isDestroyed) {\n                this.CustomformObj = null;\n                this.formObj = null;\n                this.storeValidTab = null;\n                this.customFieldColumn = [];\n                this.taskFieldColumn = [];\n                this.dialogObj.hide();\n                this.dialogClose();\n            }\n        }\n        else {\n            if (this.CustomformObj) {\n                if (!this.CustomformObj.validate()) {\n                    target.style.pointerEvents = '';\n                    return;\n                }\n            }\n            if (this.formObj) {\n                /* eslint-disable-next-line */\n                var formValid = this.formObj.validate();\n                if (!formValid) {\n                    target.style.pointerEvents = '';\n                    return;\n                }\n            }\n            if (this.storeDependencyTab || this.firstOccuringTab === 'Dependency') {\n                /* eslint-disable-next-line */\n                var dependencyTab = void 0;\n                if (this.firstOccuringTab === 'Dependency') {\n                    var element = e.target.closest('#' + this.parent.element.id + '_dialog');\n                    dependencyTab = element.querySelector('.e-gridform');\n                }\n                else {\n                    dependencyTab = this.storeDependencyTab.querySelector('.e-gridform');\n                }\n                if (dependencyTab) {\n                    var dependencyTabValid = dependencyTab['ej2_instances'][0].validate();\n                    if (!dependencyTabValid) {\n                        target.style.pointerEvents = '';\n                        return;\n                    }\n                }\n            }\n            if (this.storeResourceTab || this.firstOccuringTab === 'Resources') {\n                /* eslint-disable-next-line */\n                var resourceTab = void 0;\n                if (this.firstOccuringTab === 'Resources') {\n                    var element = e.target.closest('#' + this.parent.element.id + '_dialog');\n                    resourceTab = element.querySelector('.e-gridform');\n                }\n                else {\n                    resourceTab = this.storeResourceTab.querySelector('.e-gridform');\n                }\n                if (resourceTab) {\n                    var resourceTabValid = resourceTab['ej2_instances'][0].validate();\n                    if (!resourceTabValid) {\n                        target.style.pointerEvents = '';\n                        return;\n                    }\n                }\n            }\n            this.initiateDialogSave();\n            this.CustomformObj = null;\n            this.formObj = null;\n            this.storeValidTab = null;\n            this.customFieldColumn = [];\n            this.taskFieldColumn = [];\n            target.style.pointerEvents = 'auto';\n        }\n    };\n    /**\n     * @returns {void} .\n     * @private\n     */\n    DialogEdit.prototype.dialogClose = function () {\n        if (this.dialog) {\n            this.resetValues();\n        }\n        if (!isNullOrUndefined(this.parent.focusModule) &&\n            !isNullOrUndefined(this.parent.focusModule.getActiveElement(true))) {\n            this.parent.focusModule.getActiveElement(true).focus();\n        }\n    };\n    DialogEdit.prototype.resetValues = function () {\n        this.isEdit = false;\n        this.isAddNewResource = false;\n        this.editedRecord = {};\n        this.parent['triggeredColumnName'] = '';\n        this.rowData = {};\n        this.rowIndex = -1;\n        this.addedRecord = null;\n        this.ganttResources = [];\n        this.dialogEditValidationFlag = false;\n        if (this.dialog && !this.dialogObj.isDestroyed) {\n            this.destroyDialogInnerElements();\n            this.dialogObj.destroy();\n            remove(this.dialog);\n        }\n    };\n    DialogEdit.prototype.destroyDialogInnerElements = function () {\n        var ganttObj = this.parent;\n        var tabModel = this.beforeOpenArgs.tabModel;\n        var items = tabModel.items;\n        for (var i = 0; i < items.length; i++) {\n            var element = items[i].content;\n            var id = element.getAttribute('id');\n            if (!isNullOrUndefined(id) || id !== '') {\n                id = id.replace(ganttObj.element.id, '');\n                id = id.replace('TabContainer', '');\n                if (id === 'General') {\n                    this.destroyCustomField(element);\n                }\n                else if (id === 'Dependency') {\n                    var gridObj = element.ej2_instances[0];\n                    gridObj.destroy();\n                }\n                else if (id === 'Notes') {\n                    var rte = element.ej2_instances[0];\n                    rte.destroy();\n                }\n                else if (id === 'Resources') {\n                    var treeGridObj = element.ej2_instances[0];\n                    treeGridObj.destroy();\n                }\n                else if (id.indexOf('Custom') !== -1) {\n                    this.destroyCustomField(element);\n                }\n            }\n        }\n    };\n    DialogEdit.prototype.destroyCustomField = function (element) {\n        var childNodes = element.childNodes;\n        var ganttObj = this.parent;\n        for (var i = 0; i < childNodes.length; i++) {\n            var div = childNodes[i];\n            var inputElement = div.querySelector('input[id^=\"' + ganttObj.element.id + '\"]');\n            if (inputElement) {\n                var fieldName = inputElement.id.replace(ganttObj.element.id, '');\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var controlObj = div.querySelector('#' + ganttObj.element.id + fieldName).ej2_instances[0];\n                if (!isNullOrUndefined(controlObj)) {\n                    var column = ganttObj.columnByField[fieldName];\n                    if (!isNullOrUndefined(column) && !isNullOrUndefined(column.edit) && isNullOrUndefined(column.edit.params)) {\n                        var destroy = column.edit.destroy;\n                        if (typeof destroy === 'string') {\n                            destroy = getObject(destroy, window);\n                            destroy();\n                        }\n                        else {\n                            column.edit.destroy();\n                        }\n                    }\n                    else {\n                        controlObj.destroy();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @returns {void} .\n     * @private\n     */\n    DialogEdit.prototype.destroy = function () {\n        this.resetValues();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('chartDblClick', this.dblClickHandler);\n        this.parent.editModule.dialogModule = undefined;\n    };\n    /**\n     * Method to get current edit dialog fields value\n     *\n     * @returns {AddDialogFieldSettings} .\n     */\n    DialogEdit.prototype.getEditFields = function () {\n        if (this.isEdit) {\n            return this.updatedEditFields;\n        }\n        else {\n            return this.updatedAddFields;\n        }\n    };\n    DialogEdit.prototype.createTab = function (dialogModel, dialog) {\n        var _this = this;\n        var ganttObj = this.parent;\n        var tabModel = {};\n        var tabItems = [];\n        var dialogSettings = this.getEditFields();\n        var tabElement;\n        var tasks = ganttObj.taskFields;\n        var length = dialogSettings.length;\n        tabModel.items = tabItems;\n        tabModel.locale = this.parent.locale;\n        tabModel.enableRtl = this.parent.enableRtl;\n        this.beforeOpenArgs.tabModel = tabModel;\n        var count = 0;\n        var index = 0;\n        if (length > 0) {\n            for (var i = 0; i < length; i++) {\n                var dialogField = dialogSettings[i];\n                var tabItem = {};\n                if (dialogField.type === 'General') {\n                    if (Object.keys(ganttObj.columnMapping).length === 0) {\n                        continue;\n                    }\n                    if (isNullOrUndefined(dialogField.headerText)) {\n                        dialogField.headerText = this.localeObj.getConstant('generalTab');\n                    }\n                    tabItem.content = 'General';\n                    this.beforeOpenArgs[tabItem.content] = this.getFieldsModel(dialogField.fields);\n                }\n                else if (dialogField.type === 'Segments') {\n                    if (isNullOrUndefined(tasks.segments)) {\n                        continue;\n                    }\n                    if (isNullOrUndefined(dialogField.headerText)) {\n                        dialogField.headerText = this.localeObj.getConstant('segments');\n                    }\n                    tabItem.content = 'Segments';\n                    this.beforeOpenArgs[tabItem.content] = this.getSegmentsModel(dialogField.fields);\n                }\n                else if (dialogField.type === 'Dependency') {\n                    if (isNullOrUndefined(tasks.dependency)) {\n                        continue;\n                    }\n                    if (isNullOrUndefined(dialogField.headerText)) {\n                        dialogField.headerText = this.localeObj.getConstant('dependency');\n                    }\n                    tabItem.content = 'Dependency';\n                    this.beforeOpenArgs[tabItem.content] = this.getPredecessorModel(dialogField.fields);\n                }\n                else if (dialogField.type === 'Resources') {\n                    if (isNullOrUndefined(tasks.resourceInfo)) {\n                        continue;\n                    }\n                    if (isNullOrUndefined(dialogField.headerText)) {\n                        dialogField.headerText = this.localeObj.getConstant('resourceName');\n                    }\n                    tabItem.content = 'Resources';\n                    this.beforeOpenArgs[tabItem.content] = this.getResourcesModel(dialogField.fields);\n                }\n                else if (dialogField.type === 'Notes') {\n                    if (isNullOrUndefined(tasks.notes)) {\n                        continue;\n                    }\n                    if (isNullOrUndefined(dialogField.headerText)) {\n                        dialogField.headerText = this.localeObj.getConstant('notes');\n                    }\n                    tabItem.content = 'Notes';\n                    this.beforeOpenArgs[tabItem.content] = this.getNotesModel(dialogField.fields);\n                }\n                else {\n                    if (isNullOrUndefined(dialogField.fields) || dialogField.fields.length === 0) {\n                        continue;\n                    }\n                    if (isNullOrUndefined(dialogField.headerText)) {\n                        dialogField.headerText = this.localeObj.getConstant('customTab'); // eslint-disable-next-line\n                        count++;\n                    }\n                    tabItem.content = 'Custom' + '' + index++;\n                    this.beforeOpenArgs[tabItem.content] = this.getFieldsModel(dialogField.fields);\n                }\n                tabItem.header = { text: dialogField.headerText };\n                tabItems.push(tabItem);\n            }\n        }\n        this.beforeOpenArgs.requestType = this.isEdit ? 'beforeOpenEditDialog' : 'beforeOpenAddDialog';\n        this.parent.trigger('actionBegin', this.beforeOpenArgs, function (arg) {\n            if (!isNullOrUndefined(_this.parent.loadingIndicator) && _this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n                _this.parent.showMaskRow();\n            }\n            else {\n                _this.parent.showSpinner();\n            }\n            if (!arg.cancel) {\n                _this.renderTabItems();\n                tabModel.selected = _this.tabSelectedEvent.bind(_this);\n                tabModel.height = _this.parent.isAdaptive ? '100%' : 'auto';\n                tabModel.overflowMode = 'Scrollable';\n                _this.tabObj = new Tab(tabModel);\n                _this.tabObj.isStringTemplate = true;\n                tabElement = _this.parent.createElement('div', { id: ganttObj.element.id + '_Tab' });\n                _this.tabObj.appendTo(tabElement);\n                dialogModel.content = tabElement;\n                _this.dialog = dialog;\n                _this.dialogObj = new Dialog(dialogModel);\n                _this.dialogObj.isStringTemplate = true;\n                _this.dialogObj.appendTo(_this.dialog);\n                var actionCompleteArgs = {\n                    action: 'OpenDialog',\n                    requestType: _this.isEdit ? 'openEditDialog' : 'openAddDialog',\n                    data: _this.beforeOpenArgs.rowData,\n                    element: _this.dialog,\n                    cancel: false\n                };\n                var columns = _this.parent.treeGrid.grid.getColumns();\n                /* eslint-disable-next-line */\n                var isValidateColumn = columns.some(function (obj) { return obj.validationRules; });\n                if (isValidateColumn) {\n                    _this.CustomformObj = null;\n                    _this.formObj = null;\n                    _this.storeValidTab = null;\n                    _this.customFieldColumn = [];\n                    _this.taskFieldColumn = [];\n                    _this.changeFormObj(actionCompleteArgs.element);\n                }\n                _this.parent.trigger('actionComplete', actionCompleteArgs, function (actionCompleteArg) {\n                    if (!isNullOrUndefined(_this.parent.loadingIndicator) && _this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n                        _this.parent.hideMaskRow();\n                    }\n                    else {\n                        _this.parent.hideSpinner();\n                    }\n                    if (actionCompleteArg.cancel) {\n                        _this.resetValues();\n                    }\n                });\n            }\n            else {\n                arg.cancel = false;\n                if (!isNullOrUndefined(_this.parent.loadingIndicator) && _this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n                    _this.parent.hideMaskRow();\n                }\n                else {\n                    _this.parent.hideSpinner();\n                }\n            }\n        });\n    };\n    /* eslint-disable-next-line */\n    DialogEdit.prototype.changeFormObj = function (actionCompleteArgs) {\n        if (!this.storeColumn) {\n            this.storeColumn = this.parent.treeGrid.grid.getColumns();\n        }\n        if (!this.taskfields) {\n            this.taskfields = this.parent.taskFields['properties'];\n        }\n        if (!this.storeValidTab) {\n            this.storeValidTab = this.getFilteredDialogFields();\n        }\n        if (this.customFieldColumn.length === 0 || this.taskFieldColumn.length === 0) {\n            this.validateColumn(this.storeColumn, this.taskfields, this.storeValidTab);\n        }\n        if (this.isFromAddDialog && this.parent.addDialogFields && this.parent.addDialogFields.length > 0) {\n            var firstFieldType = this.parent.addDialogFields[0].type;\n            if (firstFieldType === 'Resources' || firstFieldType === 'Dependency') {\n                this.firstOccuringTab = firstFieldType;\n            }\n        }\n        else if (this.isFromEditDialog && this.parent.editDialogFields && this.parent.editDialogFields.length > 0) {\n            var firstFieldType = this.parent.editDialogFields[0].type;\n            if (firstFieldType === 'Resources' || firstFieldType === 'Dependency') {\n                this.firstOccuringTab = firstFieldType;\n            }\n        }\n        if (!this.CustomformObj || !this.formObj) {\n            var customFieldColumns = this.customFieldColumn;\n            var taskFieldColumns = this.taskFieldColumn;\n            if (!this.CustomformObj && customFieldColumns && customFieldColumns.length > 0) {\n                /* eslint-disable-next-line */\n                var validationRulesArray = {};\n                for (var i = 0; i < customFieldColumns.length; i++) {\n                    var customColumn = customFieldColumns[i]; // Rename the variable\n                    if (customColumn.visible && customColumn.validationRules) {\n                        validationRulesArray[customColumn.field] = customColumn.validationRules;\n                    }\n                }\n                if (Object.keys(validationRulesArray).length > 0) {\n                    this.CustomformObj = actionCompleteArgs.querySelector('#' + this.parent.element.id + 'Custom0TabContainer');\n                    if (this.CustomformObj) {\n                        this.CustomformObj = this.createFormObj(this.CustomformObj, validationRulesArray);\n                    }\n                }\n            }\n            if (!this.formObj && taskFieldColumns && taskFieldColumns.length > 0) {\n                /* eslint-disable-next-line */\n                var validationRulesArray = {};\n                for (var i = 0; i < taskFieldColumns.length; i++) {\n                    var taskColumn = taskFieldColumns[i]; // Rename the variable\n                    if (taskColumn.visible && taskColumn.validationRules) {\n                        validationRulesArray[taskColumn.field] = taskColumn.validationRules;\n                    }\n                }\n                if (Object.keys(validationRulesArray).length > 0) {\n                    this.formObj = actionCompleteArgs.querySelector('#' + this.parent.element.id + 'GeneralTabContainer');\n                    if (this.formObj) {\n                        this.formObj = this.createFormObj(this.formObj, validationRulesArray);\n                    }\n                }\n            }\n        }\n        this.isFromAddDialog = false;\n        this.isFromEditDialog = false;\n    };\n    DialogEdit.prototype.getFilteredDialogFields = function () {\n        var dialogFields = this.isFromAddDialog\n            ? this.parent.addDialogFields\n            : this.parent.editDialogFields;\n        if (dialogFields.length !== 0) {\n            return dialogFields.filter(function (obj) { return obj.type === 'General' || obj.type === 'Custom'; });\n        }\n        return null;\n    };\n    /* eslint-disable-next-line */\n    DialogEdit.prototype.validateColumn = function (storeColumn, taskfields, storeValidTab) {\n        var _this = this;\n        if (storeValidTab) {\n            storeValidTab.forEach(function (element) {\n                /* eslint-disable-next-line */\n                var targetArray = element.type === 'General' ? _this.taskFieldColumn : _this.customFieldColumn;\n                element.fields.forEach(function (field) {\n                    var columnValue = _this.parent.getColumnByField(field, storeColumn);\n                    if (columnValue !== null) {\n                        targetArray.push(columnValue);\n                    }\n                    else {\n                        targetArray.push(_this.parent.columnByField[field]);\n                    }\n                });\n            });\n        }\n        else {\n            /* eslint-disable-next-line */\n            storeColumn.forEach(function (column) {\n                if (_this.parent.customColumns.indexOf(column.field) !== -1) {\n                    _this.customFieldColumn.push(column);\n                }\n                else {\n                    _this.taskFieldColumn.push(column);\n                }\n            });\n        }\n    };\n    DialogEdit.prototype.createFormObj = function (form, rules) {\n        var _this = this;\n        return new FormValidator(form, {\n            rules: rules,\n            locale: this.parent.locale,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            customPlacement: function (inputElement, error) {\n                var nameAttribute = inputElement.getAttribute('name');\n                if (nameAttribute) {\n                    var columnName = nameAttribute;\n                    _this.valErrorPlacement(inputElement, error, columnName);\n                }\n            }\n        });\n    };\n    DialogEdit.prototype.valErrorPlacement = function (inputElement, error, columnName) {\n        var id = columnName + \"-tooltip\";\n        var elem = this.getElemTable(inputElement);\n        if (!elem) {\n            this.createTooltip(inputElement, error, id);\n        }\n        else {\n            var tooltipContent = elem.querySelector('.e-tip-content');\n            if (tooltipContent) {\n                tooltipContent.innerHTML = error.outerHTML;\n            }\n        }\n    };\n    DialogEdit.prototype.createTooltip = function (inputElement, errorMessage, id, display) {\n        if (display === void 0) { display = 'block'; }\n        var existingTooltip = document.getElementById(id);\n        if (existingTooltip) {\n            existingTooltip.remove();\n        }\n        var parentElement = inputElement.parentElement;\n        if (parentElement) {\n            parentElement.style.position = 'relative';\n        }\n        var tooltipContainer = document.createElement('div');\n        tooltipContainer.className = 'e-tooltip-wrap e-lib e-control e-popup e-griderror';\n        tooltipContainer.style.display = display;\n        tooltipContainer.style.zIndex = '1000';\n        var labelId = id + \"-label\";\n        var tooltipLabel = document.createElement('div');\n        tooltipLabel.id = labelId;\n        tooltipLabel.className = 'sr-only';\n        var tooltipContent = document.createElement('div');\n        tooltipContent.className = 'e-tip-content';\n        var errorMessageElement = document.createElement('div');\n        errorMessageElement.className = 'error-message';\n        errorMessageElement.appendChild(errorMessage.cloneNode(true));\n        var arrow = document.createElement('div');\n        arrow.className = 'e-arrow-tip e-tip-top';\n        arrow.appendChild(document.createElement('div')).className = 'e-arrow-tip-outer e-tip-top';\n        arrow.appendChild(document.createElement('div')).className = 'e-arrow-tip-inner e-tip-top';\n        tooltipContainer.setAttribute('aria-labelledby', labelId);\n        tooltipContent.appendChild(errorMessageElement);\n        tooltipContainer.appendChild(tooltipContent);\n        tooltipContainer.appendChild(arrow);\n        tooltipContainer.style.top = '125%';\n        tooltipContainer.style.left = '50%';\n        tooltipContainer.style.transform = 'translateX(-50%)';\n        if (parentElement) {\n            parentElement.appendChild(tooltipLabel);\n            parentElement.appendChild(tooltipContainer);\n        }\n    };\n    DialogEdit.prototype.getElemTable = function (inputElement) {\n        var parentElement = inputElement.parentElement;\n        if (parentElement) {\n            return parentElement.querySelector('.e-tooltip-wrap');\n        }\n        return null;\n    };\n    DialogEdit.prototype.validationComplete = function (args) {\n        var elem = this.getElemTable(args.element);\n        if (elem) {\n            if (args.status === 'failure') {\n                elem.style.display = '';\n            }\n            else {\n                elem.style.display = 'none';\n            }\n        }\n    };\n    DialogEdit.prototype.tabSelectedEvent = function (args) {\n        var ganttObj = this.parent;\n        var id = args.selectedContent.childNodes[0].id;\n        var dialogModule = this.parent.editModule.dialogModule;\n        var dialog = dialogModule.dialog;\n        var hasEditedBatchCell = dialog.getElementsByClassName('e-editedbatchcell').length > 0;\n        var hasEditedOrAddedRow = dialog.getElementsByClassName('e-editedrow').length > 0 ||\n            dialog.getElementsByClassName('e-addedrow').length > 0;\n        if (dialogModule.storeResourceTab && hasEditedBatchCell) {\n            document.querySelector('#' + ganttObj.element.id + '' + 'Resources' +\n                'TabContainer_gridcontrol').ej2_instances[0].saveCell();\n        }\n        else if (dialogModule.storeDependencyTab && hasEditedOrAddedRow) {\n            document.querySelector('#' + ganttObj.element.id + '' + 'Dependency' +\n                'TabContainer').ej2_instances[0].editModule.batchSave();\n        }\n        if (id === ganttObj.element.id + 'DependencyTabContainer') {\n            this.storeDependencyTab = args.selectedContent;\n        }\n        if (id === ganttObj.element.id + 'ResourcesTabContainer') {\n            this.storeResourceTab = args.selectedContent;\n        }\n        if (id === ganttObj.element.id + 'Custom0TabContainer') {\n            var columns = this.parent.treeGrid.grid.getColumns();\n            /* eslint-disable-next-line */\n            var isValidateColumn = columns.some(function (obj) { return obj.validationRules; });\n            if (isValidateColumn) {\n                this.changeFormObj(args.selectedContent);\n            }\n        }\n        if (id === ganttObj.element.id + 'GeneralTabContainer') {\n            var columns = this.parent.treeGrid.grid.getColumns();\n            /* eslint-disable-next-line */\n            var isValidateColumn = columns.some(function (obj) { return obj.validationRules; });\n            if (isValidateColumn) {\n                this.changeFormObj(args.selectedContent);\n            }\n        }\n        if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {\n            this.responsiveTabContent(id, ganttObj);\n        }\n        if (id === ganttObj.element.id + 'ResourcesTabContainer') {\n            this.resourceSelection(id);\n        }\n        else if (id === ganttObj.element.id + 'NotesTabContainer') {\n            document.getElementById(id).ej2_instances[0].refresh();\n            // const notesTabElement: HTMLElement = document.querySelector('#' + this.parent.element.id + 'NotesTabContainer') as HTMLInputElement;\n        }\n        else if (id === ganttObj.element.id + 'SegmentsTabContainer') {\n            if (isNullOrUndefined(this.beforeOpenArgs.rowData.ganttProperties.startDate)) {\n                document.getElementById(id).ej2_instances[0]\n                    .enableToolbarItems([this.parent.element.id + 'SegmentsTabContainer' + '_add'], false);\n            }\n            else {\n                document.getElementById(id).ej2_instances[0]\n                    .enableToolbarItems([this.parent.element.id + 'SegmentsTabContainer' + '_add'], true);\n            }\n        }\n    };\n    DialogEdit.prototype.responsiveTabContent = function (id, ganttObj) {\n        var dialogContent = document.getElementById(ganttObj.element.id + '_dialog_dialog-content');\n        var dialogContentHeight = dialogContent.clientHeight;\n        dialogContentHeight -= dialogContent.querySelector('.e-tab-header').offsetHeight;\n        var grid = document.querySelector('#' + id);\n        if (grid.classList.contains('e-grid')) {\n            dialogContentHeight -= grid.ej2_instances[0].getHeaderContent().offsetHeight;\n            var toolbar_1 = grid.querySelector('.e-toolbar');\n            if (toolbar_1) {\n                dialogContentHeight -= toolbar_1.offsetHeight;\n            }\n        }\n        grid.parentElement.style.height = dialogContentHeight + 'px';\n    };\n    DialogEdit.prototype.getFieldsModel = function (fields) {\n        var fieldsModel = {};\n        var columnByField = this.parent.columnByField;\n        for (var i = 0; i < fields.length; i++) {\n            if (fields[i] === this.parent.taskFields.dependency ||\n                fields[i] === this.parent.taskFields.resourceInfo ||\n                fields[i] === this.parent.taskFields.notes) {\n                continue;\n            }\n            if (!isNullOrUndefined(columnByField[fields[i]])) {\n                var fieldName = fields[i];\n                this.createInputModel(columnByField[fieldName], fieldsModel);\n            }\n        }\n        return fieldsModel;\n    };\n    DialogEdit.prototype.createInputModel = function (column, fieldsModel) {\n        var _this = this;\n        var ganttObj = this.parent;\n        var locale = this.parent.locale;\n        var taskSettings = this.parent.taskFields;\n        var common = {\n            placeholder: column.headerText,\n            floatLabelType: 'Auto'\n        };\n        if (!isNullOrUndefined(this.parent.taskFields.id) && !isNullOrUndefined(this.parent.columnMapping.id)\n            && !isNullOrUndefined(this.numericOrString)) {\n            if (taskSettings.id === column.field) {\n                column.editType = this.numericOrString;\n            }\n        }\n        switch (column.editType) {\n            case 'booleanedit':\n                {\n                    var checkboxModel = {\n                        label: column.headerText,\n                        locale: locale,\n                        enableRtl: this.parent.enableRtl\n                    };\n                    fieldsModel[column.field] = checkboxModel;\n                    break;\n                }\n            case 'defaultedit':\n            case 'stringedit':\n                {\n                    var textBox = common;\n                    textBox.enableRtl = this.parent.enableRtl;\n                    if (column.field === ganttObj.columnMapping.duration ||\n                        column.field === ganttObj.columnMapping.id || column.field === ganttObj.columnMapping.startDate ||\n                        column.field === ganttObj.columnMapping.endDate) {\n                        textBox.change = function (args) {\n                            if (!_this.isTriggered) {\n                                if ((column.field === _this.parent.taskFields.duration ||\n                                    column.field === _this.parent.taskFields.work) && !_this.isTriggered\n                                    && _this.editedRecord.ganttProperties.taskType === 'FixedUnit') {\n                                    _this.isTriggered = true;\n                                    _this.parent['triggeredColumnName'] = column.field;\n                                }\n                                _this.validateScheduleFields(args, column, ganttObj);\n                            }\n                        };\n                    }\n                    fieldsModel[column.field] = common;\n                    break;\n                }\n            case 'numericedit':\n                {\n                    var numeric = common;\n                    numeric.enableRtl = this.parent.enableRtl;\n                    if (taskSettings.progress === column.field) {\n                        numeric.min = 0;\n                        numeric.max = 100;\n                    }\n                    numeric.change = function (args) {\n                        if (!_this.isTriggered) {\n                            if ((column.field === _this.parent.taskFields.duration ||\n                                column.field === _this.parent.taskFields.work) && !_this.isTriggered\n                                && _this.editedRecord.ganttProperties.taskType === 'FixedUnit') {\n                                _this.isTriggered = true;\n                                _this.parent['triggeredColumnName'] = column.field;\n                            }\n                            _this.validateScheduleFields(args, column, ganttObj);\n                        }\n                    };\n                    fieldsModel[column.field] = numeric;\n                    break;\n                }\n            case 'datepickeredit':\n                {\n                    var datePickerObj = common;\n                    datePickerObj.format = this.parent.getDateFormat();\n                    datePickerObj.enableRtl = this.parent.enableRtl;\n                    datePickerObj.strictMode = true;\n                    datePickerObj.firstDayOfWeek = ganttObj.timelineModule.customTimelineSettings.weekStartDay;\n                    if (column.field === ganttObj.columnMapping.startDate ||\n                        column.field === ganttObj.columnMapping.endDate) {\n                        datePickerObj.renderDayCell = this.parent.renderWorkingDayCell.bind(this.parent);\n                        datePickerObj.change = function (args) {\n                            _this.validateScheduleFields(args, column, ganttObj);\n                        };\n                    }\n                    fieldsModel[column.field] = datePickerObj;\n                    break;\n                }\n            case 'datetimepickeredit':\n                {\n                    var dateTimePickerObj = common;\n                    dateTimePickerObj.format = this.parent.getDateFormat();\n                    dateTimePickerObj.enableRtl = this.parent.enableRtl;\n                    dateTimePickerObj.strictMode = true;\n                    dateTimePickerObj.firstDayOfWeek = ganttObj.timelineModule.customTimelineSettings.weekStartDay;\n                    if (column.field === ganttObj.columnMapping.startDate ||\n                        column.field === ganttObj.columnMapping.endDate) {\n                        dateTimePickerObj.renderDayCell = this.parent.renderWorkingDayCell.bind(this.parent);\n                        dateTimePickerObj.change = function (args) {\n                            _this.validateScheduleFields(args, column, ganttObj);\n                        };\n                    }\n                    fieldsModel[column.field] = dateTimePickerObj;\n                    break;\n                }\n            case 'dropdownedit':\n                if (column.field === ganttObj.columnMapping.type || column.field === ganttObj.columnMapping.manual) {\n                    var dataKey = 'dataSource';\n                    var fieldsKey = 'fields';\n                    var types = [\n                        { 'ID': 1, 'Value': 'FixedUnit' }, { 'ID': 2, 'Value': 'FixedWork' }, { 'ID': 3, 'Value': 'FixedDuration' }\n                    ];\n                    common[dataKey] = types;\n                    common[fieldsKey] = { value: 'Value' };\n                    var dropDownListObj = common;\n                    dropDownListObj.enableRtl = this.parent.enableRtl;\n                    dropDownListObj.change = function (args) {\n                        if (column.field === taskSettings.manual) {\n                            _this.editedRecord.ganttProperties.isAutoSchedule = !args.value;\n                        }\n                        _this.validateScheduleFields(args, column, ganttObj);\n                    };\n                }\n                fieldsModel[column.field] = common;\n                break;\n            case 'maskededit':\n                fieldsModel[column.field] = common;\n                break;\n        }\n        if (!isNullOrUndefined(column.edit) && !isNullOrUndefined(column.edit.params)) {\n            extend(fieldsModel[column.field], column.edit.params);\n        }\n        return fieldsModel;\n    };\n    DialogEdit.prototype.validateScheduleFields = function (args, column, ganttObj) {\n        var _a;\n        var dialog;\n        if (!isNullOrUndefined(ganttObj.editModule.dialogModule.dialog)) {\n            dialog = ganttObj.editModule.dialogModule.dialog;\n        }\n        var targetId = null;\n        var inputElement;\n        var currentData = ganttObj.editModule.dialogModule.editedRecord;\n        var cellValue = null;\n        var colName = null;\n        var formObject;\n        var ids = this.parent.viewType === 'ResourceView' ? this.parent.getTaskIds() : this.parent.ids;\n        var strViewType = this.parent.viewType;\n        if (!isNullOrUndefined(args.element)) {\n            inputElement = args.element;\n            targetId = inputElement.getAttribute('id');\n        }\n        else if (!isNullOrUndefined(args.container)) {\n            inputElement = args.container;\n            targetId = inputElement.querySelector('input').getAttribute('id');\n            inputElement = inputElement.querySelector('#' + targetId);\n        }\n        else if (!isNullOrUndefined(args.event) && !isNullOrUndefined(args.event.path) &&\n            !isNullOrUndefined(args.event.path)[1]) {\n            inputElement = args.event.path[1];\n            targetId = inputElement.querySelector('input').getAttribute('id');\n            inputElement = inputElement.querySelector('#' + targetId);\n        }\n        if (isNullOrUndefined(inputElement)) {\n            cellValue = args.value;\n            colName = column.field;\n        }\n        else {\n            cellValue = inputElement.value;\n            colName = targetId.replace(ganttObj.element.id, '');\n            if (this.parent.columnByField[this.parent.taskFields.id].editType === 'stringedit') {\n                var customFn = function (args) {\n                    if (strViewType === 'ResourceView') {\n                        return ids.indexOf('T' + args['value']) === -1 && ids.indexOf('R' + args['value']) === -1;\n                    }\n                    else {\n                        return ids.indexOf(args['value']) === -1;\n                    }\n                };\n                var options = {\n                    rules: (_a = {},\n                        _a[this.parent.taskFields.id] = { required: true, minLength: [customFn, 'ID is already present, please enter new value'] },\n                        _a)\n                };\n                /* eslint-disable-next-line */\n                formObject = new FormValidator('#' + this.parent.element.id + 'GeneralTabContainer', options);\n            }\n        }\n        if (colName.search('Segments') === 0) {\n            colName = colName.replace('SegmentsTabContainer', '');\n            this.validateSegmentFields(ganttObj, colName, cellValue, args);\n            this.isTriggered = false;\n            return true;\n        }\n        else {\n            this.validateScheduleValuesByCurrentField(colName, cellValue, this.editedRecord);\n            var ganttProp = currentData.ganttProperties;\n            var tasks = ganttObj.taskFields;\n            if (!isNullOrUndefined(tasks.startDate) && tasks.startDate !== colName) {\n                this.updateScheduleFields(dialog, ganttProp, 'startDate');\n            }\n            if (tasks.endDate === colName && !isNullOrUndefined(ganttProp.startDate) && !isNullOrUndefined(args.value) &&\n                ganttProp.startDate.getTime() > args.value) {\n                this.updateScheduleFields(dialog, ganttProp, 'endDate');\n            }\n            if (!isNullOrUndefined(tasks.endDate) && tasks.endDate !== colName) {\n                this.updateScheduleFields(dialog, ganttProp, 'endDate');\n            }\n            if (!isNullOrUndefined(tasks.duration) && tasks.duration !== colName || ganttProp.duration >= 0) {\n                this.updateScheduleFields(dialog, ganttProp, 'duration');\n            }\n            if (!isNullOrUndefined(tasks.work) && (tasks.work !== colName || ganttProp.taskType !== 'FixedWork')) {\n                this.updateScheduleFields(dialog, ganttProp, 'work');\n            }\n            this.dialogEditValidationFlag = false;\n            this.isTriggered = false;\n            return true;\n        }\n    };\n    DialogEdit.prototype.updateScheduleFields = function (dialog, ganttProp, ganttField) {\n        var ganttObj = this.parent;\n        var ganttId = ganttObj.element.id;\n        var columnName = getValue(ganttField, ganttObj.columnMapping);\n        var col = ganttObj.columnByField[columnName];\n        var tempValue;\n        var taskField = this.parent.taskFields;\n        if (col.editType === 'stringedit') {\n            var element = dialog.querySelector('#' + ganttId + columnName);\n            if (element) {\n                var textBox = element.ej2_instances[0];\n                if (textBox) {\n                    tempValue = !isNullOrUndefined(col.edit) && !isNullOrUndefined(col.edit.read) ? col.edit.read() :\n                        !isNullOrUndefined(col.valueAccessor) ?\n                            col.valueAccessor(columnName, ganttObj.editModule.dialogModule.editedRecord, col) :\n                            this.parent.dataOperation.getDurationString(ganttProp.duration, ganttProp.durationUnit);\n                    if (textBox.value !== tempValue.toString() && taskField.duration === columnName) {\n                        textBox.value = tempValue;\n                        textBox.dataBind();\n                    }\n                    else if (taskField.startDate === columnName || taskField.endDate === columnName) {\n                        textBox.value = taskField.startDate === columnName ? ganttProp.startDate.toString() : ganttProp.endDate.toString();\n                        textBox.dataBind();\n                    }\n                }\n            }\n        }\n        else if (col.editType === 'datepickeredit' || col.editType === 'datetimepickeredit') {\n            var element = dialog.querySelector('#' + ganttId + columnName);\n            if (element) {\n                var picker = col.editType === 'datepickeredit' ?\n                    element.ej2_instances[0] :\n                    element.ej2_instances[0];\n                if (picker) {\n                    tempValue = ganttProp[ganttField];\n                    if (((isNullOrUndefined(picker.value)) && !isNullOrUndefined(tempValue)) ||\n                        (isNullOrUndefined(tempValue) && !isNullOrUndefined(picker.value)) ||\n                        (picker.value !== tempValue && !isNullOrUndefined(picker.value) && !isNullOrUndefined(tempValue)\n                            && picker.value.toString() !== tempValue.toString())) {\n                        picker.value = tempValue;\n                        picker.dataBind();\n                    }\n                }\n            }\n        }\n        else if (col.editType === 'numericedit') {\n            var numericTextBox = dialog.querySelector('#' + ganttId + columnName).ej2_instances[0];\n            tempValue = ganttProp[ganttField];\n            if (!isNullOrUndefined(tempValue) && numericTextBox.value !== tempValue) {\n                numericTextBox.value = tempValue;\n                numericTextBox.dataBind();\n            }\n        }\n    };\n    /**\n     * @param {IGanttData} ganttData .\n     * @returns {void} .\n     * @private\n     */\n    DialogEdit.prototype.validateDuration = function (ganttData) {\n        var ganttProp = ganttData.ganttProperties;\n        if (!this.dialogEditValidationFlag) {\n            if (!isNullOrUndefined(ganttProp.startDate) && !isScheduledTask(ganttProp) && isNullOrUndefined(ganttProp.duration)) {\n                this.parent.setRecordValue('endDate', null, ganttProp, true);\n                this.parent.setRecordValue('isMilestone', false, ganttProp, true);\n            }\n            else if (isScheduledTask(ganttProp) || !isNullOrUndefined(ganttProp.startDate)) {\n                if (ganttData.ganttProperties.isMilestone && ganttData.ganttProperties.duration !== 0) {\n                    this.parent.dateValidationModule.checkStartDate(ganttProp.startDate);\n                }\n                this.parent.dateValidationModule.calculateEndDate(ganttData);\n            }\n            else if (!isScheduledTask(ganttProp) && !isNullOrUndefined(ganttProp.endDate)) {\n                this.parent.dateValidationModule.calculateStartDate(ganttData);\n            }\n            var milestone = ganttProp.duration === 0 ? true : false;\n            this.parent.setRecordValue('isMilestone', milestone, ganttProp, true);\n            this.dialogEditValidationFlag = true;\n        }\n    };\n    DialogEdit.prototype.validateStartDate = function (ganttData) {\n        var ganttProp = ganttData.ganttProperties;\n        var tasks = this.parent.taskFields;\n        if (!this.dialogEditValidationFlag) {\n            if (isNullOrUndefined(ganttProp.startDate)) {\n                this.parent.setRecordValue('duration', null, ganttProp, true);\n                this.parent.setRecordValue('isMilestone', false, ganttProp, true);\n                if (this.parent.allowUnscheduledTasks && isNullOrUndefined(tasks.endDate)) {\n                    this.parent.setRecordValue('endDate', null, ganttProp, true);\n                }\n            }\n            else if (isScheduledTask(ganttProp)) {\n                if (isNullOrUndefined(tasks.duration)) {\n                    this.parent.dateValidationModule.calculateDuration(ganttData);\n                }\n                else if (isNullOrUndefined(tasks.endDate)) {\n                    this.parent.dateValidationModule.calculateEndDate(ganttData);\n                }\n                else {\n                    this.parent.dateValidationModule.calculateEndDate(ganttData);\n                }\n            }\n            else {\n                if (!isNullOrUndefined(ganttProp.endDate)) {\n                    this.parent.dateValidationModule.calculateDuration(ganttData);\n                }\n                else if (!isNullOrUndefined(ganttProp.duration)) {\n                    this.parent.dateValidationModule.calculateEndDate(ganttData);\n                }\n            }\n            this.dialogEditValidationFlag = true;\n        }\n    };\n    DialogEdit.prototype.validateEndDate = function (ganttData) {\n        var ganttProp = ganttData.ganttProperties;\n        var tasks = this.parent.taskFields;\n        if (!this.dialogEditValidationFlag) {\n            if (isNullOrUndefined(ganttProp.endDate)) {\n                this.parent.setRecordValue('duration', null, ganttProp, true);\n                this.parent.setRecordValue('isMilestone', false, ganttProp, true);\n            }\n            else if (isScheduledTask(ganttProp)) {\n                if (isNullOrUndefined(tasks.duration)) {\n                    this.parent.dateValidationModule.calculateDuration(ganttData);\n                }\n                else if (isNullOrUndefined(ganttProp.startDate)) {\n                    this.parent.dateValidationModule.calculateStartDate(ganttData);\n                }\n                else {\n                    if (!isNullOrUndefined(ganttProp.segments) && ganttProp.segments.length > 0) {\n                        ganttProp.segments = this.parent.editModule.cellEditModule.validateEndDateWithSegments(ganttProp);\n                    }\n                    this.parent.dateValidationModule.calculateDuration(ganttData);\n                }\n            }\n            else {\n                if (!isNullOrUndefined(ganttProp.duration)) {\n                    this.parent.dateValidationModule.calculateStartDate(ganttData);\n                }\n                else if (!isNullOrUndefined(ganttProp.startDate)) {\n                    this.parent.dateValidationModule.calculateDuration(ganttData);\n                }\n            }\n            this.dialogEditValidationFlag = true;\n        }\n    };\n    /**\n     *\n     * @param {string} columnName .\n     * @param {string} value .\n     * @param {IGanttData} currentData .\n     * @returns {boolean} .\n     * @private\n     */\n    DialogEdit.prototype.validateScheduleValuesByCurrentField = function (columnName, value, currentData) {\n        var ganttObj = this.parent;\n        var ganttProp = currentData.ganttProperties;\n        var taskSettings = ganttObj.taskFields;\n        if (taskSettings.duration === columnName) {\n            if (!isNullOrUndefined(value) && value !== '' && (parseInt(value, 10) >= 0 || parseFloat(value) >= 0)) {\n                ganttObj.dataOperation.updateDurationValue(value, ganttProp);\n                this.parent.setRecordValue(taskSettings.duration, value, currentData);\n                this.parent.setRecordValue('taskData.' + taskSettings.duration, ganttProp.duration, currentData);\n                if (ganttProp.isMilestone && !isNullOrUndefined(this.parent.editModule.cellEditModule)) {\n                    var editedArgs = {};\n                    editedArgs.data = currentData;\n                    this.parent.editModule.cellEditModule['updateDates'](editedArgs);\n                }\n                this.validateDuration(currentData);\n            }\n            else {\n                if (ganttObj.allowUnscheduledTasks) {\n                    if ((ganttProp.startDate && ganttProp.endDate && ganttProp.startDate.getTime() > ganttProp.endDate.getTime()) || value.indexOf('-') !== -1) {\n                        this.parent.setRecordValue('duration', 0, ganttProp, true);\n                        if (ganttProp.endDate) {\n                            this.parent.setRecordValue('startDate', ganttProp.endDate, ganttProp, true);\n                        }\n                    }\n                    else {\n                        if (value === '') {\n                            this.parent.setRecordValue('duration', null, ganttProp, true);\n                            if (ganttProp.endDate && ganttProp.startDate) {\n                                this.parent.setRecordValue('endDate', null, ganttProp, true);\n                            }\n                        }\n                        else {\n                            var regex = /^[^\\d.-]+$/;\n                            if (regex.test(value)) {\n                                var err = \"The provided value for the \" + taskSettings.duration + \" field is invalid. Please ensure the \" + taskSettings.duration + \" field contains only valid numeric values.\";\n                                this.parent.trigger('actionFailure', { error: err });\n                            }\n                            this.parent.setRecordValue('duration', ganttProp.duration, ganttProp, true);\n                        }\n                    }\n                }\n            }\n            this.parent.editModule.updateResourceRelatedFields(currentData, 'duration');\n        }\n        if (taskSettings.startDate === columnName) {\n            if (value !== '') {\n                var startDate = this.parent.dateValidationModule.getDateFromFormat(value);\n                startDate = this.parent.dateValidationModule.checkStartDate(startDate, ganttProp);\n                this.parent.setRecordValue('startDate', startDate, ganttProp, true);\n                this.validateStartDate(currentData);\n            }\n            else {\n                if (ganttObj.allowUnscheduledTasks && !(currentData.hasChildRecords)) {\n                    this.parent.setRecordValue('startDate', null, ganttProp, true);\n                    this.parent.setRecordValue('duration', null, ganttProp, true);\n                    this.parent.setRecordValue('isMilestone', false, ganttProp, true);\n                }\n            }\n        }\n        if (taskSettings.endDate === columnName) {\n            if (value !== '') {\n                var endDate = this.parent.dateValidationModule.getDateFromFormat(value);\n                var dayEndTime = this.parent['getCurrentDayEndTime'](endDate);\n                if (endDate.getHours() === 0 && dayEndTime !== 86400) {\n                    this.parent.dateValidationModule.setTime(dayEndTime, endDate);\n                }\n                if (!isNullOrUndefined(ganttProp.startDate) && !isNullOrUndefined(ganttProp.endDate) && !isNullOrUndefined(endDate) &&\n                    ganttProp.startDate.getTime() > endDate.getTime()) {\n                    endDate = ganttProp.endDate;\n                }\n                endDate = this.parent.dateValidationModule.checkEndDate(endDate, ganttProp);\n                if (isNullOrUndefined(ganttProp.startDate) || endDate.getTime() >= (ganttProp.startDate).getTime()) {\n                    this.parent.setRecordValue('endDate', endDate, ganttProp, true);\n                }\n                this.validateEndDate(currentData);\n                if (ganttProp.isMilestone && !isNullOrUndefined(this.parent.editModule.cellEditModule)) {\n                    var editedArgs = {};\n                    editedArgs.data = currentData;\n                    this.parent.editModule.cellEditModule['updateDates'](editedArgs);\n                }\n            }\n            else {\n                if (ganttObj.allowUnscheduledTasks) {\n                    this.parent.setRecordValue('endDate', null, ganttProp, true);\n                    this.parent.setRecordValue('duration', null, ganttProp, true);\n                    this.parent.setRecordValue('isMilestone', false, ganttProp, true);\n                }\n            }\n        }\n        if (taskSettings.work === columnName) {\n            if (!isNullOrUndefined(value) && value !== '') {\n                this.parent.setRecordValue('work', value, ganttProp, true);\n                this.parent.editModule.updateResourceRelatedFields(currentData, 'work');\n                this.validateDuration(currentData);\n            }\n        }\n        if (columnName === taskSettings.type) {\n            this.parent.setRecordValue('taskType', value, ganttProp, true);\n            // To validate the work column as well, if duartion column value is 0, when FixedDuration type\n            if (value && value === 'FixedDuration' && ganttProp.duration === 0) {\n                this.parent.editModule.updateResourceRelatedFields(currentData, 'work');\n            }\n        }\n        if (taskSettings.manual === columnName) {\n            this.parent.editModule.updateTaskScheduleModes(currentData);\n        }\n        return true;\n    };\n    DialogEdit.prototype.getSegmentsModel = function (fields) {\n        var _this = this;\n        var taskSettings = this.parent.taskFields;\n        if (isNullOrUndefined(fields) || fields.length === 0) {\n            fields = [];\n            if (!isNullOrUndefined(taskSettings.startDate)) {\n                fields.push(this.parent.taskFields.startDate);\n            }\n            if (!isNullOrUndefined(taskSettings.endDate)) {\n                fields.push(this.parent.taskFields.endDate);\n            }\n            if (!isNullOrUndefined(taskSettings.duration)) {\n                fields.push(this.parent.taskFields.duration);\n            }\n            if (!isNullOrUndefined(taskSettings.id)) {\n                fields.push(this.parent.taskFields.id);\n            }\n        }\n        var segmentInputModel = {};\n        segmentInputModel.editSettings = {\n            allowEditing: true, allowAdding: true, allowDeleting: true, mode: 'Normal', newRowPosition: 'Bottom'\n        };\n        segmentInputModel.locale = this.parent.locale;\n        segmentInputModel.dataSource = [];\n        segmentInputModel.rowHeight = this.parent.isAdaptive ? 48 : null;\n        segmentInputModel.toolbar = [\n            {\n                id: this.parent.element.id + 'SegmentsTabContainer' + '_add', prefixIcon: 'e-add',\n                tooltipText: this.localeObj.getConstant('add'), align: 'Right',\n                text: this.parent.isAdaptive ? '' : this.localeObj.getConstant('add')\n            },\n            {\n                id: this.parent.element.id + 'SegmentsTabContainer' + '_delete', prefixIcon: 'e-delete',\n                tooltipText: this.localeObj.getConstant('delete'), align: 'Right',\n                text: this.parent.isAdaptive ? '' : this.localeObj.getConstant('delete')\n            }\n        ];\n        var gridColumns = [];\n        var _loop_1 = function (i) {\n            var gridColumn = {};\n            var generalTabString = 'General';\n            switch (fields[i]) {\n                case this_1.parent.taskFields.id:\n                    gridColumn = {\n                        field: fields[i], visible: false, isPrimaryKey: true\n                    };\n                    gridColumns.push(gridColumn);\n                    break;\n                case this_1.parent.taskFields.startDate:\n                case this_1.parent.taskFields.endDate:\n                    gridColumn = {\n                        field: fields[i], headerText: this_1.localeObj.getConstant((fields[i] === this_1.parent.taskFields.startDate) ? 'startDate' : 'endDate'), editType: 'stringedit', width: '200px',\n                        edit: {\n                            write: function (args) {\n                                var datePickerModel;\n                                if (!isNullOrUndefined(_this.beforeOpenArgs[generalTabString]) &&\n                                    !isNullOrUndefined(_this.beforeOpenArgs[generalTabString][fields[i]])) {\n                                    datePickerModel = _this.beforeOpenArgs[generalTabString][fields[i]];\n                                }\n                                else {\n                                    var columnFields = _this.getGeneralColumnFields();\n                                    var columnModel = _this.getFieldsModel(columnFields);\n                                    datePickerModel = columnModel[fields[i]];\n                                }\n                                var value = args.rowData[args.column.field];\n                                setValue('value', value, datePickerModel);\n                                var datePicker = new _this.inputs[_this.parent.columnByField[fields[i]].editType](datePickerModel);\n                                datePicker.appendTo(args.element);\n                            },\n                            read: function (args) {\n                                var ej2Instance = args.ej2_instances[0];\n                                return ej2Instance.value;\n                            }\n                        },\n                        format: this_1.parent.getDateFormat()\n                    };\n                    if (fields[i] === this_1.parent.taskFields.startDate) {\n                        gridColumn.validationRules = { required: true };\n                    }\n                    gridColumns.push(gridColumn);\n                    break;\n                case this_1.parent.taskFields.duration:\n                    gridColumn = {\n                        field: fields[i], headerText: this_1.localeObj.getConstant(fields[i].toLocaleLowerCase()), editType: 'stringedit',\n                        width: '100px', edit: {\n                            write: function (args) {\n                                var inputTextModel;\n                                if (!isNullOrUndefined(_this.beforeOpenArgs[generalTabString]) &&\n                                    !isNullOrUndefined(_this.beforeOpenArgs[generalTabString][fields[i]])) {\n                                    inputTextModel = _this.beforeOpenArgs[generalTabString][fields[i]];\n                                }\n                                else {\n                                    var columnFields = _this.getGeneralColumnFields();\n                                    var columnModel = _this.getFieldsModel(columnFields);\n                                    inputTextModel = columnModel[fields[i]];\n                                }\n                                inputTextModel.floatLabelType = 'Never';\n                                var value = args.rowData[args.column.field];\n                                if (!isNullOrUndefined(value)) {\n                                    setValue('value', value, inputTextModel);\n                                }\n                                else {\n                                    setValue('value', null, inputTextModel);\n                                }\n                                setValue('value', value, inputTextModel);\n                                var inputModel = new TextBox(inputTextModel);\n                                inputModel.appendTo(args.element);\n                            },\n                            read: function (args) {\n                                var ej2Instance = args.ej2_instances[0];\n                                return ej2Instance.value.toString();\n                            }\n                        }\n                    };\n                    gridColumns.push(gridColumn);\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var i = 0; i < fields.length; i++) {\n            _loop_1(i);\n        }\n        segmentInputModel.columns = gridColumns;\n        segmentInputModel.height = (this.parent.isAdaptive || this.parent.enableAdaptiveUI) ? '100%' : '153px';\n        return segmentInputModel;\n    };\n    DialogEdit.prototype.getGridColumnByField = function (fieldName, columns) {\n        var column;\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].field === fieldName) {\n                column = columns[i];\n            }\n        }\n        return column;\n    };\n    DialogEdit.prototype.updateSegmentField = function (columnName, args, segment) {\n        var dialog = this.parent.editModule.dialogModule.dialog;\n        var gridModel = getValue('Segments', this.beforeOpenArgs);\n        var col = this.getGridColumnByField(columnName, gridModel.columns);\n        var ganttId = this.parent.element.id;\n        var tempValue = segment[columnName];\n        var inputValue;\n        if (col.editType === 'stringedit') {\n            inputValue = dialog.querySelector('#' + ganttId + 'SegmentsTabContainer' + columnName)\n                .ej2_instances[0];\n        }\n        else if (col.editType === 'datepickeredit') {\n            inputValue = dialog.querySelector('#' + ganttId + 'SegmentsTabContainer' + columnName)\n                .ej2_instances[0];\n        }\n        if ((!isNullOrUndefined(inputValue.value)) && (!isNullOrUndefined(tempValue)) &&\n            (inputValue.value.toString() !== tempValue.toString())) {\n            inputValue.value = tempValue;\n            inputValue.dataBind();\n        }\n    };\n    DialogEdit.prototype.validateSegmentFields = function (ganttObj, columnName, cellValue, args) {\n        var taskSettings = this.parent.taskFields;\n        if (!isNullOrUndefined(taskSettings.duration) && taskSettings.duration.toLowerCase() === columnName.toLowerCase()) {\n            if (!isNullOrUndefined(cellValue) && cellValue !== '') {\n                this.selectedSegment[taskSettings.duration] = Number(cellValue);\n                var endDate = ganttObj.dataOperation.getEndDate(this.selectedSegment[taskSettings.startDate], Number(cellValue), this.editedRecord.ganttProperties.durationUnit, this.editedRecord.ganttProperties, false);\n                endDate = ganttObj.dataOperation.checkEndDate(endDate, this.editedRecord.ganttProperties, false);\n                this.selectedSegment[taskSettings.endDate] = endDate;\n            }\n        }\n        if (!isNullOrUndefined(taskSettings.startDate) && taskSettings.startDate.toLowerCase() === columnName.toLowerCase()) {\n            if (cellValue !== '') {\n                var startDate = this.parent.dateValidationModule.getDateFromFormat(cellValue);\n                startDate = this.parent.dateValidationModule.checkStartDate(startDate);\n                this.selectedSegment[taskSettings.startDate] = startDate;\n                if (!isNullOrUndefined(taskSettings.endDate)) {\n                    this.selectedSegment.endDate = this.parent.dataOperation.getEndDate(startDate, this.selectedSegment[taskSettings.duration], this.editedRecord.ganttProperties.durationUnit, this.editedRecord.ganttProperties, false);\n                }\n            }\n        }\n        if (!isNullOrUndefined(taskSettings.endDate) && taskSettings.endDate.toLowerCase() === columnName.toLowerCase()) {\n            if (cellValue !== '') {\n                var endDate = this.parent.dateValidationModule.getDateFromFormat(cellValue);\n                var dayEndTime = this.parent['getCurrentDayEndTime'](endDate);\n                if (endDate.getHours() === 0 && dayEndTime !== 86400) {\n                    this.parent.dateValidationModule.setTime(dayEndTime, endDate);\n                }\n                endDate = this.parent.dateValidationModule.checkEndDate(endDate, this.editedRecord.ganttProperties);\n                this.selectedSegment[taskSettings.endDate] = endDate;\n                this.selectedSegment[taskSettings.duration] = this.parent.dataOperation.getDuration(this.selectedSegment[taskSettings.startDate], this.selectedSegment[taskSettings.endDate], this.editedRecord.ganttProperties.durationUnit, true, false, true);\n            }\n        }\n        if (!isNullOrUndefined(taskSettings.startDate)) {\n            this.updateSegmentField(taskSettings.startDate, args, this.selectedSegment);\n        }\n        if (!isNullOrUndefined(taskSettings.endDate)) {\n            this.updateSegmentField(taskSettings.endDate, args, this.selectedSegment);\n        }\n        if (!isNullOrUndefined(taskSettings.duration)) {\n            this.updateSegmentField(taskSettings.duration, args, this.selectedSegment);\n        }\n    };\n    DialogEdit.prototype.getPredecessorModel = function (fields) {\n        if (isNullOrUndefined(fields) || fields.length === 0) {\n            fields = ['ID', 'Name', 'Type', 'Offset', 'UniqueId'];\n        }\n        var inputModel = {};\n        inputModel.editSettings = { allowEditing: true, allowAdding: true, allowDeleting: true, mode: 'Normal' };\n        inputModel.locale = this.parent.locale;\n        inputModel.dataSource = [];\n        inputModel.rowHeight = this.parent.isAdaptive ? 48 : null;\n        inputModel.toolbar = [\n            {\n                id: this.parent.element.id + 'DependencyTabContainer' + '_add', prefixIcon: 'e-add',\n                tooltipText: this.localeObj.getConstant('add'), align: 'Right',\n                text: this.parent.isAdaptive ? '' : this.localeObj.getConstant('add')\n            },\n            {\n                id: this.parent.element.id + 'DependencyTabContainer' + '_delete', prefixIcon: 'e-delete',\n                tooltipText: this.localeObj.getConstant('delete'), align: 'Right',\n                text: this.parent.isAdaptive ? '' : this.localeObj.getConstant('delete')\n            }\n        ];\n        var columns = [];\n        for (var i = 0; i < fields.length; i++) {\n            var column = {};\n            if (fields[i].toLowerCase() === 'id') {\n                column = {\n                    field: 'id', headerText: this.localeObj.getConstant('id'), allowEditing: false, width: '70px'\n                };\n                columns.push(column);\n            }\n            else if (fields[i].toLowerCase() === 'name') {\n                column = {\n                    field: 'name', headerText: this.localeObj.getConstant('name'), editType: 'stringedit', width: '250px',\n                    validationRules: { required: true }\n                };\n                columns.push(column);\n            }\n            else if (fields[i].toLowerCase() === 'type') {\n                column = {\n                    field: 'type', headerText: this.localeObj.getConstant('type'), editType: 'dropdownedit',\n                    dataSource: this.types, foreignKeyField: 'id', foreignKeyValue: 'text',\n                    defaultValue: 'FS', validationRules: { required: true }, width: '150px'\n                };\n                columns.push(column);\n            }\n            else if (fields[i].toLowerCase() === 'offset') {\n                column = {\n                    field: 'offset', headerText: this.localeObj.getConstant('offset'), editType: 'stringedit',\n                    defaultValue: this.parent.dataOperation.getDurationString(0, this.beforeOpenArgs.rowData.ganttProperties.durationUnit),\n                    validationRules: { required: true }, width: '100px'\n                };\n                columns.push(column);\n            }\n            else if (fields[i].toLowerCase() === 'uniqueid') {\n                column = {\n                    field: 'uniqueId', isPrimaryKey: true, visible: false, defaultValue: getUid().toString()\n                };\n                columns.push(column);\n            }\n        }\n        inputModel.columns = columns;\n        inputModel.height = (this.parent.isAdaptive || this.parent.enableAdaptiveUI) ? '100%' : '153px';\n        return inputModel;\n    };\n    DialogEdit.prototype.getResourcesModel = function (fields) {\n        var ganttObj = this.parent;\n        var resourceSettings = ganttObj.resourceFields;\n        if (isNullOrUndefined(fields) || fields.length === 0) {\n            fields = [resourceSettings.id, resourceSettings.name, resourceSettings.unit, resourceSettings.group];\n        }\n        var inputModel = {\n            allowFiltering: true,\n            treeColumnIndex: -1,\n            childMapping: '',\n            editSettings: { allowEditing: true, mode: 'Cell' },\n            locale: this.parent.locale,\n            allowSelection: true,\n            rowHeight: this.parent.isAdaptive ? 48 : null,\n            filterSettings: { type: 'Menu' },\n            selectionSettings: { checkboxOnly: true, checkboxMode: 'Default', persistSelection: true, type: 'Multiple' }\n        };\n        var columns = [\n            { type: 'checkbox', allowEditing: false, allowSorting: false, allowFiltering: false, width: 60 }\n        ];\n        for (var i = 0; i < fields.length; i++) {\n            var column = {};\n            if (fields[i] === resourceSettings.id) {\n                column = {\n                    field: resourceSettings.id,\n                    headerText: this.localeObj.getConstant('id'), isPrimaryKey: true, width: '100px',\n                    allowEditing: false\n                };\n                columns.push(column);\n            }\n            else if (fields[i] === resourceSettings.name) {\n                column = {\n                    field: resourceSettings.name, headerText: this.localeObj.getConstant('name'),\n                    allowEditing: false\n                };\n                columns.push(column);\n            }\n            else if (fields[i] === resourceSettings.unit) {\n                column = {\n                    field: resourceSettings.unit,\n                    headerText: this.localeObj.getConstant('unit'),\n                    editType: 'numericedit',\n                    edit: { params: { min: 0 } }\n                };\n                columns.push(column);\n            }\n            else if (fields[i] === resourceSettings.group && !isNullOrUndefined(resourceSettings.group)) {\n                column = {\n                    field: resourceSettings.group,\n                    headerText: this.localeObj.getConstant('group'),\n                    allowEditing: false\n                };\n                columns.push(column);\n            }\n        }\n        inputModel.columns = columns;\n        inputModel.height = (this.parent.isAdaptive || this.parent.enableAdaptiveUI) ? '100%' : '196px';\n        return inputModel;\n    };\n    DialogEdit.prototype.getNotesModel = function (fields) {\n        if (isNullOrUndefined(fields) || fields.length === 0) {\n            fields = ['Bold', 'Italic', 'Underline', 'StrikeThrough',\n                'FontName', 'FontSize', 'FontColor', 'BackgroundColor',\n                'LowerCase', 'UpperCase', '|',\n                'Alignments', 'OrderedList', 'UnorderedList',\n                'Outdent', 'Indent', '|', 'CreateTable',\n                'CreateLink', '|', 'ClearFormat', 'Print',\n                '|', 'Undo', 'Redo'];\n        }\n        var inputModel = {\n            placeholder: this.localeObj.getConstant('writeNotes'),\n            toolbarSettings: {\n                items: fields\n            },\n            height: (this.parent.isAdaptive || this.parent.enableAdaptiveUI) ? '100%' : 'auto',\n            locale: this.parent.locale\n        };\n        return inputModel;\n    };\n    DialogEdit.prototype.createDivElement = function (className, id) {\n        return createElement('div', { className: className, id: id });\n    };\n    DialogEdit.prototype.createFormElement = function (className, id) {\n        return createElement('form', { className: className, id: id });\n    };\n    DialogEdit.prototype.createInputElement = function (className, id, fieldName, type) {\n        return createElement(type || 'input', {\n            className: className, attrs: {\n                type: 'text', id: id, name: fieldName,\n                title: fieldName\n            }\n        });\n    };\n    DialogEdit.prototype.renderTabItems = function () {\n        var tabModel = this.beforeOpenArgs.tabModel;\n        var isCustomTab = false;\n        var items = tabModel.items;\n        var index = 0;\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            if (item.content instanceof HTMLElement) {\n                continue;\n            }\n            else if (item.content === 'General') {\n                item.content = this.renderGeneralTab(item.content);\n            }\n            else if (item.content === 'Dependency') {\n                if (this.editedRecord.hasChildRecords && !this.parent.allowParentDependency) {\n                    item.disabled = true;\n                }\n                item.content = this.renderPredecessorTab(item.content);\n            }\n            else if (item.content === 'Resources') {\n                item.content = this.renderResourceTab(item.content);\n            }\n            else if (item.content === ('Custom' + '' + index)) {\n                isCustomTab = true;\n                item.content = this.renderCustomTab(item.content, isCustomTab);\n                index++;\n            }\n            else if (item.content === 'Notes') {\n                item.content = this.renderNotesTab(item.content);\n            }\n            else if (item.content === 'Segments') {\n                if (this.editedRecord.hasChildRecords) {\n                    item.disabled = true;\n                }\n                item.content = this.renderSegmentsTab(item.content);\n            }\n        }\n    };\n    DialogEdit.prototype.segmentGridActionBegin = function (args) {\n        var _a, _b;\n        var taskFields = this.parent.taskFields;\n        var itemName = 'Segments';\n        var gridModel = this.beforeOpenArgs[itemName];\n        if (args.requestType === 'add' || args.requestType === 'beginEdit' || args.requestType === 'save') {\n            var gridData = gridModel.dataSource;\n            var selectedItem = getValue('rowData', args);\n            var startDate = this.beforeOpenArgs.rowData.ganttProperties.startDate;\n            if (!isNullOrUndefined(startDate)) {\n                if (args.requestType === 'add') {\n                    var arg = {};\n                    var sDate = getValue(this.parent.taskFields.startDate, selectedItem);\n                    var eDate = this.parent.taskFields.endDate ? getValue(this.parent.taskFields.endDate, selectedItem) : null;\n                    var duration = void 0;\n                    if (!isNullOrUndefined(this.parent.taskFields.duration)) {\n                        duration = getValue(this.parent.taskFields.duration, selectedItem);\n                    }\n                    var startDate_1 = !isNullOrUndefined(gridData) && gridData.length > 0 ?\n                        (!isNullOrUndefined(taskFields.endDate) && !isNullOrUndefined(gridData[0][taskFields.endDate])) ?\n                            new Date(getValue(taskFields.endDate, gridData[0]).getTime()) :\n                            new Date(getValue(taskFields.startDate, gridData[0]).getTime()) :\n                        !isNullOrUndefined(this.beforeOpenArgs.rowData.ganttProperties.startDate) &&\n                            new Date(this.beforeOpenArgs.rowData.ganttProperties.startDate.getTime());\n                    startDate_1.setHours(0, 0, 0, 0);\n                    if (!isNullOrUndefined(gridData) && gridData.length > 0) {\n                        startDate_1.setDate(startDate_1.getDate() + 2);\n                    }\n                    sDate = this.parent.dataOperation.checkStartDate(startDate_1);\n                    eDate = this.parent.dateValidationModule.getDateFromFormat(sDate);\n                    var dayEndTime = this.parent['getCurrentDayEndTime'](eDate);\n                    if (eDate.getHours() === 0 && dayEndTime !== 86400) {\n                        this.parent.dateValidationModule.setTime(dayEndTime, eDate);\n                    }\n                    eDate = !isNullOrUndefined(taskFields.endDate) && !isNullOrUndefined(gridData) && gridData.length <= 0 ?\n                        this.beforeOpenArgs.rowData.ganttProperties.endDate : eDate;\n                    var rowData = this.beforeOpenArgs.rowData.ganttProperties;\n                    if (sDate.getTime() === eDate.getTime()) {\n                        duration = 1;\n                    }\n                    else {\n                        duration = this.parent.dataOperation.getDuration(sDate, eDate, rowData.durationUnit, true, false, true);\n                    }\n                    if (!isNullOrUndefined(taskFields['duration'])) {\n                        arg = (_a = {},\n                            _a[taskFields['startDate']] = sDate,\n                            _a[taskFields['endDate']] = eDate,\n                            _a[taskFields['duration']] = duration,\n                            _a);\n                    }\n                    else {\n                        arg = (_b = {},\n                            _b[taskFields['startDate']] = sDate,\n                            _b[taskFields['endDate']] = eDate,\n                            _b);\n                    }\n                    args.rowData = arg;\n                }\n            }\n            if (args.requestType === 'save') {\n                var dataSource = gridModel.dataSource;\n                var taskIdField_1 = this.parent.taskFields.id;\n                var newId_1 = dataSource.length;\n                while (dataSource.some(function (item) { return item[taskIdField_1] === newId_1; })) {\n                    newId_1++;\n                }\n                if (isNullOrUndefined(args.data[taskIdField_1])) {\n                    args.data[taskIdField_1] = newId_1;\n                    args.rowData[taskIdField_1] = newId_1;\n                }\n            }\n            this.selectedSegment = args.rowData;\n            // if (args.requestType === 'save') {\n            //     // let duration: string = 'duration';\n            //     // let tempDuration: Object = this.parent.dataOperation.getDurationValue(args.data[duration]);\n            //     // args.data[duration] = getValue('duration', tempDuration);\n            //     this.selectedSegment = !isNullOrUndefined(this.editedRecord.ganttProperties.segments[args.rowIndex]) ?\n            //         this.editedRecord.ganttProperties.segments[args.rowIndex] : !isNullOrUndefined(gridData[args.rowIndex]) ?\n            //             gridData[args.rowIndex] : gridData;\n            // }\n        }\n    };\n    DialogEdit.prototype.getDialogTabIndex = function (tabName) {\n        var indexValue;\n        if (!this.isEdit) {\n            this.parent.addDialogFields.map(function (item, index) {\n                if (item.type === tabName) {\n                    indexValue = index;\n                }\n            });\n        }\n        else {\n            this.parent.editDialogFields.map(function (item, index) {\n                if (item.type === tabName) {\n                    indexValue = index;\n                }\n            });\n        }\n        return indexValue;\n    };\n    /* eslint-disable-next-line */\n    DialogEdit.prototype.setInjected = function (dialogField, allProperty, Grid, toolbar, toolbarCollection, gridModel, columnCollection) {\n        if (!isNullOrUndefined(dialogField) && !isNullOrUndefined(dialogField.additionalParams)) {\n            allProperty = (dialogField.additionalParams);\n            for (var i in allProperty) {\n                if (Object.prototype.hasOwnProperty.call(allProperty, i)) {\n                    switch (i) {\n                        case 'allowFiltering':\n                            Grid.Inject(Filter);\n                            break;\n                        case 'allowSorting':\n                            Grid.Inject(Sort);\n                            break;\n                        case 'allowPaging':\n                            Grid.Inject(Page);\n                            break;\n                        case 'allowGrouping':\n                            Grid.Inject(Group);\n                            break;\n                        case 'editSettings':\n                            Grid.Inject(Edit);\n                            break;\n                        case 'aggregates':\n                            Grid.Inject(Aggregate);\n                            break;\n                        case 'showColumnChooser':\n                            Grid.Inject(ColumnChooser);\n                            break;\n                        case 'showColumnMenu':\n                            Grid.Inject(ColumnMenu);\n                            break;\n                        case 'contextMenuItems':\n                            Grid.Inject(ContextMenu);\n                            break;\n                        case 'allowResizing':\n                            Grid.Inject(Resize);\n                            break;\n                        case 'allowReordering':\n                            Grid.Inject(Reorder);\n                            break;\n                        case 'detailTemplate':\n                            Grid.Inject(DetailRow);\n                            break;\n                        case 'allowRowDragAndDrop':\n                            Grid.Inject(RowDD);\n                            break;\n                        case 'searchSettings':\n                            Grid.Inject(Search);\n                            break;\n                        case 'selectionSettings':\n                            Grid.Inject(Selection);\n                            break;\n                        case 'enableVirtualization':\n                            Grid.Inject(VirtualScroll);\n                            break;\n                        case 'toolbar':\n                            toolbar = allProperty['toolbar'];\n                            toolbar.map(function (item) {\n                                switch (item) {\n                                    case 'Search':\n                                        Grid.Inject(Search);\n                                        break;\n                                    case 'Print':\n                                        Grid.Inject(Print);\n                                        break;\n                                    case 'PdfExport':\n                                        Grid.Inject(PdfExport);\n                                        break;\n                                    case 'ExcelExport':\n                                        Grid.Inject(ExcelExport);\n                                        break;\n                                    default:\n                                        break;\n                                }\n                            });\n                            toolbarCollection = gridModel.toolbar;\n                            Grid.Inject(GridToolbar);\n                            break;\n                        case 'columns':\n                            columnCollection = gridModel.columns;\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            }\n        }\n    };\n    DialogEdit.prototype.renderSegmentsTab = function (itemName) {\n        var _this = this;\n        var ganttObj = this.parent;\n        var gridModel = this.beforeOpenArgs[itemName];\n        gridModel.enableAdaptiveUI = this.parent.enableAdaptiveUI;\n        var ganttData = this.beforeOpenArgs.rowData;\n        var preData = [];\n        if (this.isEdit) {\n            preData = isNullOrUndefined(ganttData.taskData[this.parent.taskFields['segments']]) ? [] : ganttData.taskData[this.parent.taskFields['segments']];\n        }\n        /* eslint-disable-next-line */\n        preData.map(function (item, index) {\n            if (isNullOrUndefined(item[_this.parent.taskFields['id']])) {\n                item[_this.parent.taskFields['id']] = index;\n            }\n        });\n        gridModel.dataSource = preData;\n        gridModel.actionBegin = this.segmentGridActionBegin.bind(this);\n        var tabIndex = this.getDialogTabIndex('Segments');\n        var dialogField;\n        if (!this.isEdit) {\n            dialogField = this.parent.addDialogFields[tabIndex];\n        }\n        else if (this.isEdit) {\n            dialogField = this.parent.editDialogFields[tabIndex];\n        }\n        var allProperty;\n        var toolbarCollection = [];\n        /* eslint-disable-next-line */\n        var columnCollection = [];\n        var toolbar;\n        if (!isNullOrUndefined(dialogField) && !isNullOrUndefined(dialogField.additionalParams)) {\n            allProperty = (dialogField.additionalParams);\n        }\n        this.setInjected(dialogField, allProperty, Grid, toolbar, toolbarCollection, gridModel, columnCollection);\n        Grid.Inject(Edit, Page, GridToolbar, ForeignKey);\n        gridModel = __assign({}, gridModel, allProperty);\n        gridModel.toolbar = toolbarCollection.concat(gridModel.toolbar);\n        var columnCollections = this.updateColumns(columnCollection, gridModel.columns);\n        gridModel.columns = columnCollections;\n        var gridObj = new Grid(gridModel);\n        var divElement = this.createDivElement('', ganttObj.element.id + '' + itemName + 'TabContainer');\n        gridObj.appendTo(divElement);\n        return divElement;\n    };\n    DialogEdit.prototype.renderGeneralTab = function (itemName, isCustomTab) {\n        var ganttObj = this.parent;\n        /* eslint-disable-next-line */\n        var addFields = [];\n        var divElement;\n        var itemModel = this.beforeOpenArgs[itemName];\n        if (isCustomTab) {\n            divElement = this.createDivElement('e-edit-form-row', ganttObj.element.id\n                + '' + itemName + 'TabContainer');\n        }\n        else {\n            divElement = this.createFormElement('e-edit-form-row', ganttObj.element.id\n                + '' + itemName + 'TabContainer');\n        }\n        var table;\n        var tbody;\n        if (this.parent.enableAdaptiveUI) {\n            divElement.style.height = '100%';\n            table = createElement('table', { className: 'e-table' });\n            table.style.width = '100%';\n            tbody = createElement('tbody');\n        }\n        var getId = divElement.id;\n        for (var _i = 0, _a = Object.keys(itemModel); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (this.parent.columnByField[key].visible === false) {\n                continue;\n            }\n            var column = this.parent.columnByField[key];\n            var inputModel = itemModel[key];\n            if (this.parent.enableAdaptiveUI) {\n                tbody.appendChild(this.renderInputElements(inputModel, column));\n            }\n            else {\n                divElement.appendChild(this.renderInputElements(inputModel, column));\n            }\n            addFields.push(key);\n        }\n        if (this.parent.enableAdaptiveUI) {\n            table.appendChild(tbody);\n            divElement.appendChild(table);\n        }\n        if (getId !== divElement.id) {\n            divElement.id = getId;\n        }\n        var tabIndex = this.getDialogTabIndex('General');\n        var fields = [];\n        if (!this.isEdit && !isNullOrUndefined(this.parent.addDialogFields[tabIndex]) &&\n            !isNullOrUndefined(this.parent.addDialogFields[tabIndex].fields)) {\n            fields = this.parent.addDialogFields[tabIndex].fields;\n        }\n        else if (this.isEdit && !isNullOrUndefined(this.parent.editDialogFields[tabIndex]) &&\n            !isNullOrUndefined(this.parent.editDialogFields[tabIndex].fields)) {\n            fields = this.parent.editDialogFields[tabIndex].fields;\n        }\n        if (!isNullOrUndefined(fields)) {\n            var templateFields = fields.filter(function (item) { return !addFields.includes(item); });\n            if (!isNullOrUndefined(templateFields)) {\n                var template = templateFields;\n                for (var i = 0; i <= template.length - 1; i++) {\n                    var scriptElement = document.getElementById(template[i]);\n                    if (!isNullOrUndefined(scriptElement)) {\n                        var templateContent = scriptElement.innerHTML;\n                        var div = createElement('div');\n                        div.innerHTML = templateContent;\n                        divElement.appendChild(div.children[0]);\n                    }\n                }\n            }\n        }\n        return divElement;\n    };\n    DialogEdit.prototype.isCheckIsDisabled = function (column) {\n        var disabled = false;\n        var stringOrNumber;\n        if (column.allowEditing === false || column.isPrimaryKey || this.parent.readOnly) {\n            if (this.parent.customColumns.indexOf(column.field) !== -1) {\n                disabled = true;\n            }\n            else {\n                if (column.field === this.parent.taskFields.baselineStartDate || column.field === this.parent.taskFields.baselineEndDate ||\n                    column.field === this.parent.taskFields.work || column.field === this.parent.taskFields.type ||\n                    column.field === this.parent.taskFields.id || column.field === this.parent.taskFields.name ||\n                    column.field === this.parent.taskFields.duration || column.field === this.parent.taskFields.progress ||\n                    column.field === this.parent.taskFields.startDate || column.field === this.parent.taskFields.endDate) {\n                    for (var i = 0; i < this.parent.currentViewData['length']; i++) {\n                        if (!isNullOrUndefined(this.parent.currentViewData[i].ganttProperties.taskId)) {\n                            stringOrNumber = this.parent.currentViewData[i].ganttProperties.taskId;\n                            break;\n                        }\n                    }\n                    if (typeof (stringOrNumber) === 'string') {\n                        disabled = false;\n                    }\n                    else {\n                        disabled = true;\n                    }\n                }\n            }\n        }\n        if (this.isEdit) {\n            if (column.field === this.parent.taskFields.id) {\n                disabled = true;\n            }\n            if (this.editedRecord.hasChildRecords) {\n                if ((column.field === this.parent.taskFields.endDate && ((!isNullOrUndefined(this.editedRecord['isManual']) &&\n                    this.editedRecord['isManual'] === false) || this.parent.taskMode === 'Auto')) || column.field === this.parent.taskFields.duration ||\n                    column.field === this.parent.taskFields.progress || column.field === this.parent.taskFields.work ||\n                    column.field === this.parent.taskFields.type) {\n                    disabled = true;\n                }\n            }\n        }\n        return disabled;\n    };\n    DialogEdit.prototype.isParentValid = function (data) {\n        if (data.length > 0) {\n            for (var i = 0; i < data.length; i++) {\n                if (data[i].uniqueID === this.beforeOpenArgs.rowData['uniqueID']) {\n                    this.isValidData = false;\n                    break;\n                }\n                if (data[i].hasChildRecords) {\n                    this.isParentValid(data[i].childRecords);\n                }\n                if (!this.isValidData) {\n                    break;\n                }\n            }\n        }\n        return this.isValidData;\n    };\n    DialogEdit.prototype.renderPredecessorTab = function (itemName) {\n        var _this = this;\n        var ganttObj = this.parent;\n        var gridModel = this.beforeOpenArgs[itemName];\n        var dependencyColumn = this.parent.columnByField[this.parent.taskFields.dependency];\n        if (dependencyColumn.allowEditing === false || dependencyColumn.isPrimaryKey || this.parent.readOnly) {\n            gridModel.editSettings.allowEditing = false;\n            gridModel.editSettings.allowAdding = false;\n            gridModel.editSettings.allowDeleting = false;\n        }\n        var ganttData = this.beforeOpenArgs.rowData;\n        var preData = [];\n        this.taskNameCollection();\n        if (this.isEdit) {\n            preData = this.predecessorEditCollection(ganttData);\n            this.updatePredecessorDropDownData(ganttData);\n        }\n        var predecessorLength;\n        if (ganttData[this.parent.taskFields.dependency]) {\n            predecessorLength = ganttData[this.parent.taskFields.dependency].split(',').length;\n        }\n        if (this.preTableCollection.length === 0 || this.preTableCollection.length === predecessorLength) {\n            gridModel.editSettings.allowAdding = false;\n        }\n        gridModel.actionComplete = this.gridActionComplete.bind(this);\n        gridModel.dataSource = preData;\n        gridModel.enableAdaptiveUI = this.parent.enableAdaptiveUI;\n        gridModel.actionBegin = this.gridActionBegin.bind(this);\n        var columns = gridModel.columns;\n        columns[1].edit = {\n            write: function (args) {\n                if (getValue('requestType', args) === 'add') {\n                    setValue('rowData.uniqueId', getUid(), args);\n                }\n                var field = 'name';\n                var autoObj = new ComboBox({\n                    dataSource: new DataManager(_this.idCollection),\n                    popupHeight: '180px',\n                    allowCustom: false,\n                    enableRtl: _this.parent.enableRtl,\n                    fields: { value: 'text' },\n                    value: args.rowData[field],\n                    change: function (arg) {\n                        var tr = closest(arg.element, 'tr');\n                        var idInput = tr.querySelector('#' + _this.parent.element.id + 'DependencyTabContainerid');\n                        if (idInput) {\n                            if (!isNullOrUndefined(arg.itemData) && !isNullOrUndefined(arg.item)) {\n                                idInput.value = arg.itemData.id;\n                            }\n                            else {\n                                idInput.value = '';\n                            }\n                        }\n                    },\n                    autofill: true\n                });\n                autoObj.appendTo(args.element);\n            },\n            read: function (args) {\n                var ej2Instance = args.ej2_instances[0];\n                return ej2Instance.value;\n            }\n        };\n        var tabIndex = this.getDialogTabIndex('Dependency');\n        var dialogField;\n        if (!this.isEdit) {\n            dialogField = this.parent.addDialogFields[tabIndex];\n        }\n        else if (this.isEdit) {\n            dialogField = this.parent.editDialogFields[tabIndex];\n        }\n        var toolbarCollection = [];\n        var allProperty;\n        var columnCollection = [];\n        var toolbar;\n        if (!isNullOrUndefined(dialogField) && !isNullOrUndefined(dialogField.additionalParams)) {\n            allProperty = dialogField.additionalParams;\n        }\n        this.setInjected(dialogField, allProperty, Grid, toolbar, toolbarCollection, gridModel, columnCollection);\n        Grid.Inject(Edit, Page, GridToolbar, ForeignKey);\n        gridModel = __assign({}, gridModel, allProperty);\n        gridModel.toolbar = gridModel.toolbar.concat(toolbarCollection);\n        var columnCollections = this.updateColumns(columnCollection, gridModel.columns);\n        gridModel.columns = columnCollections;\n        var gridObj = new Grid(gridModel);\n        var divElement = this.createDivElement('e-dependent-div', ganttObj.element.id + '' + itemName + 'TabContainer');\n        gridObj.appendTo(divElement);\n        return divElement;\n    };\n    DialogEdit.prototype.updateColumns = function (existingColumns, newColumns) {\n        var columnMap = {};\n        existingColumns.forEach(function (column) {\n            if (typeof column === 'object') {\n                columnMap[column.field] = column;\n            }\n        });\n        newColumns.forEach(function (newColumn) {\n            if (typeof newColumn === 'object') {\n                var field = newColumn.field;\n                if (columnMap[field]) {\n                    Object.assign(columnMap[field], newColumn);\n                }\n                else {\n                    existingColumns.push(newColumn);\n                }\n            }\n        });\n        return existingColumns;\n    };\n    DialogEdit.prototype.gridActionBegin = function (args) {\n        var _this = this;\n        var itemName = 'Dependency';\n        var gridModel = this.beforeOpenArgs[itemName];\n        if (args.requestType === 'add' || args.requestType === 'beginEdit') {\n            var isEdit_1 = args.requestType === 'add' ? false : true;\n            this.idCollection = extend([], [], this.preTableCollection, true);\n            var gridData_1 = gridModel.dataSource;\n            var _loop_2 = function (i) {\n                // eslint-disable-next-line\n                this_2.idCollection.forEach(function (data, index) {\n                    if (data.id === getValue('id', gridData_1[i])) {\n                        var selectedItem = getValue('rowData', args);\n                        if (isEdit_1 && getValue('id', selectedItem) === data.id) {\n                            return;\n                        }\n                        _this.idCollection.splice(_this.idCollection.indexOf(data), 1);\n                    }\n                });\n            };\n            var this_2 = this;\n            for (var i = 0; i <= gridData_1.length; i++) {\n                _loop_2(i);\n            }\n        }\n    };\n    DialogEdit.prototype.gridActionComplete = function (args) {\n        if (args.requestType === 'save') {\n            var dialogElement = this.parent.editModule.dialogModule.dialog.querySelector('#' + this.parent.element.id + 'DependencyTabContainer');\n            if (!isNullOrUndefined(dialogElement)) {\n                if (!isNullOrUndefined(args['rows']) && args['rows'].length === this.preTableCollection.length) {\n                    /* eslint-disable-next-line */\n                    var gridObj = dialogElement['ej2_instances'][0];\n                    if (gridObj) {\n                        gridObj.editSettings.allowAdding = false;\n                    }\n                }\n            }\n        }\n    };\n    DialogEdit.prototype.updateResourceCollection = function (args, resourceTreeGridId) {\n        if (!isNullOrUndefined(args.data) && Object.keys(args.data).length) {\n            var treeGridId = document.querySelector('#' + resourceTreeGridId);\n            var resourceTreeGrid = treeGridId.ej2_instances[0];\n            if (!isNullOrUndefined(resourceTreeGrid) && resourceTreeGrid.getSelectedRecords().length > 0) {\n                var tempRecords = resourceTreeGrid.getSelectedRecords();\n                var index = void 0;\n                var selectedItems = [];\n                for (index = 0; index < tempRecords.length; index++) {\n                    selectedItems.push(tempRecords[index].taskData);\n                }\n                this.ganttResources = extend([], selectedItems);\n            }\n            else {\n                this.ganttResources = [];\n            }\n        }\n        else {\n            this.ganttResources = [];\n        }\n    };\n    DialogEdit.prototype.renderResourceTab = function (itemName) {\n        var _this = this;\n        var ganttObj = this.parent;\n        var resourceSettings = ganttObj.resourceFields;\n        var ganttData = this.beforeOpenArgs.rowData;\n        if (((this.beforeOpenArgs.requestType === 'beforeOpenEditDialog' && !isNullOrUndefined(this.editedRecord[this.parent.taskFields.resourceInfo])) || (this.beforeOpenArgs.requestType === 'beforeOpenAddDialog' && !isNullOrUndefined(this.editedRecord[this.parent.taskFields.resourceInfo]))) &&\n            (typeof (this.editedRecord[this.parent.taskFields.resourceInfo]) === 'object')) {\n            this.parent.setRecordValue('resourceInfo', this.parent.dataOperation.setResourceInfo(this.editedRecord), ganttData.ganttProperties, true);\n        }\n        var rowResource = ganttData.ganttProperties.resourceInfo;\n        var inputModel = this.beforeOpenArgs[itemName];\n        inputModel.enableAdaptiveUI = this.parent.enableAdaptiveUI;\n        var resourceTreeGridId = ganttObj.element.id + '' + itemName + 'TabContainer';\n        var resourceData = [];\n        if (this.parent.viewType === 'ResourceView') {\n            for (var i = 0; i < ganttObj.currentViewData.length; i++) {\n                for (var j = 0; j < ganttObj.resources.length; j++) {\n                    if (ganttObj.currentViewData[i][ganttObj.taskFields.id] ===\n                        ganttObj.resources[j][resourceSettings.id] &&\n                        (ganttObj.currentViewData[i].hasChildRecords ||\n                            isNullOrUndefined(ganttObj.currentViewData[i].parentItem))) {\n                        resourceData.push(extend([], [], [ganttObj.resources[j]], true)[0]);\n                    }\n                }\n            }\n        }\n        else {\n            resourceData = extend([], [], ganttObj.resources, true);\n        }\n        this.parent.dataOperation.updateResourceUnit(resourceData);\n        if (!isNullOrUndefined(rowResource)) {\n            var count = void 0;\n            var rowResourceLength = rowResource.length;\n            var index = void 0;\n            var resourceDataLength = resourceData.length;\n            for (count = 0; count < rowResourceLength; count++) {\n                for (index = 0; index < resourceDataLength; index++) {\n                    if (rowResource[count][resourceSettings.id] === resourceData[index][resourceSettings.id]) {\n                        resourceData[index][resourceSettings.unit] = rowResource[count][resourceSettings.unit];\n                    }\n                }\n            }\n        }\n        inputModel.dataSource = resourceData;\n        var resourceInfo = ganttData.ganttProperties.resourceInfo;\n        if (this.isEdit && !isNullOrUndefined(resourceInfo)) {\n            for (var i = 0; i < resourceInfo.length; i++) {\n                this.ganttResources.push(resourceInfo[i]);\n            }\n        }\n        else if (!this.isEdit && !isNullOrUndefined(resourceInfo)) {\n            for (var i = 0; i < resourceInfo.length; i++) {\n                this.ganttResources.push(resourceInfo[i]);\n            }\n        }\n        /* eslint-disable-next-line */\n        inputModel.actionBegin = function (args) {\n            if (args.rowData && args.columnName === _this.parent.resourceFields.unit && _this.editedRecord.ganttProperties.resourceInfo) {\n                for (var i = 0; i < _this.editedRecord.ganttProperties.resourceInfo.length; i++) {\n                    if (_this.editedRecord.ganttProperties.resourceInfo[i][_this.parent.resourceFields.id] ===\n                        args.rowData[_this.parent.resourceFields.id]) {\n                        _this.editedRecord.ganttProperties.resourceInfo[i][_this.parent.resourceFields.unit] = args.value;\n                    }\n                }\n            }\n        };\n        inputModel.rowSelected = function (args) {\n            _this.updateResourceCollection(args, resourceTreeGridId);\n            _this.currentResources = _this.ganttResources;\n        };\n        inputModel.rowDeselected = function (args) {\n            _this.updateResourceCollection(args, resourceTreeGridId);\n            _this.currentResources = _this.ganttResources;\n        };\n        var divElement = this.createDivElement('e-resource-div', resourceTreeGridId);\n        var tabIndex = this.getDialogTabIndex('Resources');\n        var dialogField;\n        if (!this.isEdit) {\n            dialogField = this.parent.addDialogFields[tabIndex];\n        }\n        else if (this.isEdit) {\n            dialogField = this.parent.editDialogFields[tabIndex];\n        }\n        var allProperty;\n        /* eslint-disable-next-line */\n        var columnCollection = [];\n        var toolbars;\n        if (!isNullOrUndefined(dialogField) && !isNullOrUndefined(dialogField.additionalParams)) {\n            allProperty = (dialogField.additionalParams);\n            for (var i in allProperty) {\n                if (Object.prototype.hasOwnProperty.call(allProperty, i)) {\n                    switch (i) {\n                        case 'allowFiltering':\n                            TreeGrid.Inject(TreeGridFilter);\n                            break;\n                        case 'allowSorting':\n                            TreeGrid.Inject(TreeGridSort);\n                            break;\n                        case 'allowPaging':\n                            TreeGrid.Inject(TreeGridPage);\n                            break;\n                        case 'editSettings':\n                            TreeGrid.Inject(TreeGridEdit);\n                            break;\n                        case 'aggregates':\n                            TreeGrid.Inject(TreeGridAggregate);\n                            break;\n                        case 'showColumnChooser':\n                            TreeGrid.Inject(TreeGridAggregate);\n                            break;\n                        case 'showColumnMenu':\n                            TreeGrid.Inject(ColumnMenu);\n                            break;\n                        case 'contextMenuItems':\n                            TreeGrid.Inject(ContextMenu);\n                            break;\n                        case 'allowResizing':\n                            TreeGrid.Inject(TreeGridResize);\n                            break;\n                        case 'allowReordering':\n                            TreeGrid.Inject(TreeGridReorder);\n                            break;\n                        case 'detailTemplate':\n                            TreeGrid.Inject(DetailRow);\n                            break;\n                        case 'allowRowDragAndDrop':\n                            TreeGrid.Inject(TreeGridRowDD);\n                            break;\n                        case 'searchSettings':\n                            TreeGrid.Inject(Search);\n                            break;\n                        case 'selectionSettings':\n                            TreeGrid.Inject(TreeGridSelection);\n                            break;\n                        case 'toolbar':\n                            toolbars = allProperty['toolbar'];\n                            toolbars.map(function (item) {\n                                switch (item) {\n                                    case 'Search':\n                                        TreeGrid.Inject(Search);\n                                        break;\n                                    case 'Print':\n                                        TreeGrid.Inject(Print);\n                                        break;\n                                    case 'PdfExport':\n                                        TreeGrid.Inject(PdfExport);\n                                        break;\n                                    case 'ExcelExport':\n                                        TreeGrid.Inject(ExcelExport);\n                                        break;\n                                    default:\n                                        break;\n                                }\n                            });\n                            if (!isNullOrUndefined(toolbars)) {\n                                inputModel.toolbar = [];\n                                inputModel.toolbar = inputModel.toolbar.concat(toolbars);\n                            }\n                            TreeGrid.Inject(TreeGridToolbar);\n                            break;\n                        case 'enableVirtualization':\n                            TreeGrid.Inject(VirtualScroll);\n                            break;\n                        case 'columns':\n                            columnCollection = inputModel.columns;\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            }\n        }\n        TreeGrid.Inject(TreeGridSelection, TreeGridFilter, TreeGridEdit, VirtualScroll, TreeGridToolbar);\n        inputModel = __assign({}, inputModel, allProperty);\n        var columnCollections = this.updateColumns(columnCollection, inputModel.columns);\n        inputModel.columns = columnCollections;\n        var treeGridObj = new TreeGrid(inputModel);\n        var resourceColumn = this.parent.columnByField[this.parent.taskFields.resourceInfo];\n        if (resourceColumn.allowEditing === false || resourceColumn.isPrimaryKey || this.parent.readOnly) {\n            treeGridObj.allowSelection = false;\n            treeGridObj.allowFiltering = false;\n            treeGridObj.editSettings.allowEditing = false;\n        }\n        treeGridObj.dataBound = function () {\n            if (_this.parent.editDialogFields.length >= 1 && _this.parent.editDialogFields[0].type === 'Resources') {\n                var id = _this.parent.element.id + 'ResourcesTabContainer';\n                _this.resourceSelection(id);\n            }\n        };\n        treeGridObj.appendTo(divElement);\n        return divElement;\n    };\n    DialogEdit.prototype.resourceSelection = function (id) {\n        var _this = this;\n        var resourceTreeGrid = document.querySelector('#' + id).ej2_instances[0];\n        this.parent['triggeredColumnName'] = '';\n        var currentViewData = resourceTreeGrid.getCurrentViewRecords();\n        var resources = this.ganttResources;\n        if (resources && resources.length > 0) {\n            currentViewData.forEach(function (data, index) {\n                for (var i = 0; i < resources.length; i++) {\n                    if (data.taskData[_this.parent.resourceFields.id] === resources[i][_this.parent.resourceFields.id] &&\n                        !isNullOrUndefined(resourceTreeGrid.selectionModule) &&\n                        resourceTreeGrid.getSelectedRowIndexes().indexOf(index) === -1) {\n                        resourceTreeGrid.selectRow(index);\n                    }\n                }\n            });\n        }\n    };\n    DialogEdit.prototype.renderCustomTab = function (itemName, isCustomTab) {\n        return this.renderGeneralTab(itemName, isCustomTab);\n    };\n    DialogEdit.prototype.renderNotesTab = function (itemName) {\n        var ganttObj = this.parent;\n        var inputModel = this.beforeOpenArgs[itemName];\n        inputModel.enableHtmlSanitizer = this.parent.enableHtmlSanitizer;\n        var ganttProp = this.editedRecord.ganttProperties;\n        var divElement = this.createDivElement('', ganttObj.element.id + '' + itemName + 'TabContainer');\n        var tabIndex = this.getDialogTabIndex('Notes');\n        var dialogField;\n        var toolbarCollection = [];\n        if (!this.isEdit) {\n            dialogField = this.parent.addDialogFields[tabIndex];\n        }\n        else if (this.isEdit) {\n            dialogField = this.parent.editDialogFields[tabIndex];\n        }\n        var allProperty;\n        if (!isNullOrUndefined(dialogField) && !isNullOrUndefined(dialogField.additionalParams)) {\n            allProperty = dialogField.additionalParams;\n            for (var i in allProperty) {\n                if (Object.prototype.hasOwnProperty.call(allProperty, i)) {\n                    switch (i) {\n                        case 'toolbarSettings':\n                            for (var j = 0; j < allProperty['toolbarSettings'].items.length; j++) {\n                                /* eslint-disable-next-line */\n                                var key = allProperty['toolbarSettings'].items[j];\n                                if (key) {\n                                    switch (key) {\n                                        case 'Image':\n                                            RichTextEditor.Inject(Image);\n                                            break;\n                                        case 'CreateTable':\n                                            RichTextEditor.Inject(Table);\n                                            break;\n                                        case 'EmojiPicker':\n                                            RichTextEditor.Inject(EmojiPicker);\n                                            break;\n                                        case 'FileManager':\n                                            RichTextEditor.Inject(FileManager);\n                                            break;\n                                        case 'FormatPainter':\n                                            RichTextEditor.Inject(FormatPainter);\n                                            break;\n                                        default:\n                                            break;\n                                    }\n                                }\n                            }\n                            if (!isNullOrUndefined(allProperty['toolbarSettings'].items)) {\n                                toolbarCollection = inputModel.toolbarSettings.items;\n                            }\n                            RichTextEditor.Inject(RTEToolbar);\n                            break;\n                        case 'editorMode':\n                            RichTextEditor.Inject(MarkdownEditor);\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            }\n        }\n        RichTextEditor.Inject(RTEToolbar, Link, HtmlEditor, QuickToolbar, Count, Table);\n        inputModel.value = ganttProp.notes;\n        var notesColumn = this.parent.columnByField[this.parent.taskFields.notes];\n        if (notesColumn.allowEditing === false || notesColumn.isPrimaryKey || this.parent.readOnly) {\n            inputModel.enabled = false;\n        }\n        inputModel = __assign({}, inputModel, allProperty);\n        inputModel.toolbarSettings.items = toolbarCollection.concat(inputModel.toolbarSettings.items);\n        var rteObj = new RichTextEditor(inputModel);\n        rteObj.appendTo(divElement);\n        return divElement;\n    };\n    DialogEdit.prototype.renderInputElements = function (inputModel, column) {\n        var _this = this;\n        var ganttId = this.parent.element.id;\n        var ganttData = this.editedRecord;\n        var divElement = this.createDivElement('e-edit-form-column');\n        var inputElement;\n        var tr;\n        var td;\n        if (this.parent.enableAdaptiveUI) {\n            tr = createElement('tr');\n            td = createElement('td');\n            divElement.style.width = '100%';\n        }\n        var editArgs = { column: column, data: ganttData };\n        if (!isNullOrUndefined(column.edit) && isNullOrUndefined(column.edit.params)) {\n            var create = column.edit.create;\n            if (typeof create === 'string') {\n                create = getObject(create, window);\n                inputElement = create(editArgs);\n            }\n            else {\n                inputElement = column.edit.create(editArgs);\n            }\n            inputElement.className = '';\n            inputElement.setAttribute('type', 'text');\n            inputElement.setAttribute('id', ganttId + '' + column.field);\n            inputElement.setAttribute('name', column.field);\n            inputElement.setAttribute('title', column.field);\n            divElement.appendChild(inputElement);\n        }\n        else {\n            inputElement = this.createInputElement('', ganttId + '' + column.field, column.field);\n            divElement.appendChild(inputElement);\n        }\n        inputModel.enabled = !isNullOrUndefined(inputModel.enabled) ? inputModel.enabled : !this.isCheckIsDisabled(column);\n        if (column.field === this.parent.taskFields.duration) {\n            if (!isNullOrUndefined(column.valueAccessor)) {\n                if (typeof column.valueAccessor === 'string') {\n                    var valueAccessor = getObject(column.valueAccessor, window);\n                    inputModel.value = valueAccessor(column.field, ganttData, column);\n                }\n                else {\n                    inputModel.value = column.valueAccessor(column.field, ganttData, column);\n                }\n            }\n            else if (isNullOrUndefined(column.edit)) {\n                var ganttProp = ganttData.ganttProperties;\n                inputModel.value = this.parent.dataOperation.getDurationString(ganttProp.duration, ganttProp.durationUnit);\n            }\n        }\n        else {\n            if (column.editType === 'booleanedit') {\n                if (ganttData[column.field] === true) {\n                    inputModel.checked = true;\n                }\n                else {\n                    inputModel.checked = false;\n                }\n            }\n            else {\n                if (!this.parent.taskFields[column.field] && column.editType === 'numericedit' && (ganttData[column.field] === '' || ganttData[column.field] === 0)) {\n                    inputModel.value = 0;\n                }\n                else {\n                    inputModel.value = ganttData[column.field];\n                }\n            }\n        }\n        if (!isNullOrUndefined(column.edit) && isNullOrUndefined(column.edit.params)) {\n            var write = column.edit.write;\n            var inputObj = void 0;\n            if (typeof write === 'string') {\n                write = getObject(write, window);\n                inputObj = write({\n                    column: column, rowData: ganttData, element: inputElement\n                });\n            }\n            else {\n                inputObj = column.edit.write({\n                    column: column, rowData: ganttData, element: inputElement\n                });\n            }\n            if (column.field === this.parent.taskFields.duration) {\n                inputObj.change = function (args) {\n                    _this.validateScheduleFields(args, column, _this.parent);\n                };\n            }\n        }\n        else {\n            var inputObj = new this.inputs[column.editType](inputModel);\n            inputObj.appendTo(inputElement);\n        }\n        if (this.parent.enableAdaptiveUI) {\n            td.appendChild(divElement);\n            tr.appendChild(td);\n            return tr;\n        }\n        else {\n            return divElement;\n        }\n    };\n    DialogEdit.prototype.taskNameCollection = function () {\n        var flatData = this.parent.flatData;\n        this.preTaskIds = [];\n        this.preTableCollection = [];\n        for (var i = 0; i < flatData.length; i++) {\n            var data = flatData[i];\n            if (this.parent.allowParentDependency) {\n                var currentFlatData = data;\n                if (data.parentUniqueID === this.beforeOpenArgs.rowData['uniqueID']) {\n                    this.isValidData = false;\n                }\n                else {\n                    do {\n                        if (currentFlatData.parentItem) {\n                            currentFlatData = this.parent.flatData[this.parent.ids.indexOf(currentFlatData.parentItem.taskId)];\n                            if (currentFlatData.uniqueID === this.beforeOpenArgs.rowData['uniqueID']) {\n                                this.isValidData = false;\n                                break;\n                            }\n                        }\n                    } while (currentFlatData.parentItem);\n                }\n                if (data.hasChildRecords && this.isValidData) {\n                    this.isValidData = this.isParentValid(data.childRecords);\n                }\n                if (!this.isValidData) {\n                    this.isValidData = true;\n                    continue;\n                }\n            }\n            else {\n                if (data.hasChildRecords) {\n                    continue;\n                }\n            }\n            var taskId = this.parent.viewType === 'ResourceView' ? data.ganttProperties.taskId.toString()\n                : data.ganttProperties.rowUniqueID.toString();\n            var tempObject = {\n                id: taskId,\n                text: (taskId + '-' + data.ganttProperties.taskName),\n                value: taskId\n            };\n            this.preTaskIds.push(tempObject.id);\n            this.preTableCollection.push(tempObject);\n        }\n    };\n    DialogEdit.prototype.predecessorEditCollection = function (ganttData) {\n        var preDataCollection = [];\n        var ganttProp = ganttData.ganttProperties;\n        if (this.isEdit && !isNullOrUndefined(this.parent.taskFields.dependency) && !isNullOrUndefined(ganttData) &&\n            !isNullOrUndefined(ganttProp.predecessor)) {\n            var predecessor = ganttProp.predecessor;\n            var idCollection = this.preTableCollection;\n            for (var i = 0; i < predecessor.length; i++) {\n                var from = predecessor[i].from.toString();\n                var preData = {};\n                var taskID = this.parent.viewType === 'ResourceView' ? ganttProp.taskId : ganttProp.rowUniqueID;\n                if (taskID.toString() !== from) {\n                    preData.id = from;\n                    for (var index = 0; index < idCollection.length; index++) {\n                        if (idCollection[index].value === from) {\n                            preData.name = idCollection[index].text;\n                            break;\n                        }\n                    }\n                    preData.type = predecessor[i].type;\n                    var offset = predecessor[i].offset;\n                    var offsetUnit = predecessor[i].offsetUnit;\n                    preData.offset = this.parent.dataOperation.getDurationString(offset, offsetUnit);\n                    preData.uniqueId = getUid();\n                    preDataCollection.push(preData);\n                }\n            }\n        }\n        return preDataCollection;\n    };\n    DialogEdit.prototype.updatePredecessorDropDownData = function (ganttData) {\n        var index = -1;\n        var id = this.parent.viewType === 'ResourceView' ? ganttData.ganttProperties.taskId.toString()\n            : ganttData.ganttProperties.rowUniqueID.toString();\n        index = this.preTaskIds.indexOf(id);\n        this.preTableCollection.splice(index, 1);\n        this.preTaskIds.splice(index, 1);\n        this.validSuccessorTasks(ganttData, this.preTaskIds, this.preTableCollection);\n    };\n    DialogEdit.prototype.validSuccessorTasks = function (data, ids, idCollection) {\n        var _this = this;\n        var ganttProp = data.ganttProperties;\n        if (ganttProp.predecessor && ganttProp.predecessor.length > 0) {\n            var predecessor = ganttProp.predecessor;\n            var fromId_1 = this.parent.viewType === 'ResourceView' ? ganttProp.taskId.toString() : ganttProp.rowUniqueID.toString();\n            predecessor.forEach(function (item) {\n                if (item.from.toString() === fromId_1) {\n                    var toId = item.to;\n                    var idIndex = -1;\n                    idIndex = ids.indexOf(toId);\n                    if (idIndex > -1) {\n                        ids.splice(idIndex, 1);\n                        idCollection.splice(idIndex, 1);\n                    }\n                    var ganttData = _this.parent.connectorLineModule.getRecordByID(toId);\n                    var isIdInclude = true;\n                    for (var _i = 0, _a = _this.processedId; _i < _a.length; _i++) {\n                        var item_1 = _a[_i];\n                        if (item_1.id === ganttData.ganttProperties.taskId) {\n                            if (Array.isArray(item_1.value) && Array.isArray(ganttData.ganttProperties.predecessor)) {\n                                if (item_1.value.length === ganttData.ganttProperties.predecessor.length) {\n                                    var arraysMatch = true;\n                                    for (var i = 0; i < item_1.value.length; i++) {\n                                        if (item_1.value[i] !== ganttData.ganttProperties.predecessor[i]) {\n                                            arraysMatch = false;\n                                            break;\n                                        }\n                                    }\n                                    if (arraysMatch) {\n                                        isIdInclude = false;\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    if (isIdInclude) {\n                        _this.processedId.push({ id: ganttData.ganttProperties.taskId, value: ganttData.ganttProperties.predecessor });\n                        _this.validSuccessorTasks(ganttData, ids, idCollection);\n                    }\n                }\n            });\n        }\n    };\n    DialogEdit.prototype.getPredecessorType = function () {\n        var typeText = [this.parent.getPredecessorTextValue('SS'), this.parent.getPredecessorTextValue('SF'),\n            this.parent.getPredecessorTextValue('FS'), this.parent.getPredecessorTextValue('FF')];\n        var types = [\n            { id: 'FS', text: typeText[2], value: typeText[2] },\n            { id: 'FF', text: typeText[3], value: typeText[3] },\n            { id: 'SS', text: typeText[0], value: typeText[0] },\n            { id: 'SF', text: typeText[1], value: typeText[1] }\n        ];\n        return types;\n    };\n    DialogEdit.prototype.initiateDialogSave = function () {\n        if (this.isEdit) {\n            this.parent.initiateEditAction(true);\n        }\n        else {\n            this.addedRecord = {};\n        }\n        if (this.currentResources) {\n            this.currentResources = null;\n        }\n        if (this.parent.undoRedoModule && this.parent['isUndoRedoItemPresent']('Edit')) {\n            if (this.parent.undoRedoModule['redoEnabled']) {\n                this.parent.undoRedoModule['disableRedo']();\n            }\n            if (this.isEdit) {\n                this.parent.undoRedoModule['createUndoCollection']();\n                var action = {};\n                action['action'] = 'DialogEdit';\n                action['modifiedRecords'] = [];\n                this.parent.undoRedoModule['getUndoCollection'][this.parent.undoRedoModule['getUndoCollection'].length - 1] = action;\n                if (this.parent.viewType === 'ResourceView') {\n                    var isValid = false;\n                    if (!this.rowData.ganttProperties.resourceInfo) {\n                        if (this.ganttResources.length > 0) {\n                            isValid = true;\n                        }\n                    }\n                    else if (this.ganttResources.length !== this.rowData.ganttProperties.resourceInfo.length) {\n                        isValid = true;\n                    }\n                    else {\n                        for (var i = 0; i < this.rowData.ganttProperties.resourceInfo.length; i++) {\n                            if (this.ganttResources[i][this.parent.resourceFields.id] !==\n                                this.rowData.ganttProperties.resourceInfo[i][this.parent.resourceFields.id]) {\n                                isValid = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (isValid) {\n                        var indexes = {};\n                        indexes['deletedIndexes'] = [];\n                        var id_1 = 'T' + this.rowData.ganttProperties.taskId;\n                        var rowItems_1 = [];\n                        this.parent.taskIds.reduce(function (e, i) {\n                            if (i === id_1) {\n                                if (this.ganttResources.length === 0) {\n                                    rowItems_1.push(this.parent.flatData[this.parent.taskIds.indexOf(i)]);\n                                }\n                                else {\n                                    var parent_1 = this.parent.getTaskByUniqueID(this.parent.flatData[this.parent.taskIds.indexOf(i)].parentUniqueID);\n                                    for (var j = 0; j < this.ganttResources.length; j++) {\n                                        if (parent_1.ganttProperties.taskId !==\n                                            this.ganttResources[j][this.parent.resourceFields.id] &&\n                                            rowItems_1.indexOf(this.parent.flatData[this.parent.taskIds.indexOf(i)]) === -1) {\n                                            rowItems_1.push(this.parent.flatData[this.parent.taskIds.indexOf(i)]);\n                                        }\n                                    }\n                                }\n                            }\n                        }.bind(this), []);\n                        this.parent.undoRedoModule['findPosition'](extend([], [], rowItems_1, true), indexes, 'deletedIndexes');\n                        if (this['indexes']) {\n                            this['indexes']['deletedIndexes'][this['indexes']['deletedIndexes'].length] = indexes['deletedIndexes'][0];\n                        }\n                        else {\n                            this['indexes'] = indexes;\n                        }\n                    }\n                }\n            }\n        }\n        var ganttObj = this.parent;\n        var tabModel = this.beforeOpenArgs.tabModel;\n        var items = tabModel.items;\n        for (var i = 0; i < items.length; i++) {\n            var element = items[i].content;\n            var id = element.getAttribute('id');\n            if (!isNullOrUndefined(id) || id !== '') {\n                id = id.replace(ganttObj.element.id, '');\n                id = id.replace('TabContainer', '');\n                if (id === 'General') {\n                    this.updateGeneralTab(element, false);\n                }\n                else if (id === 'Dependency') {\n                    this.isFromDialogPredecessor = true;\n                    this.updatePredecessorTab(element);\n                    this.isFromDialogPredecessor = false;\n                }\n                else if (id === 'Notes') {\n                    this.updateNotesTab(element);\n                }\n                else if (id === 'Resources') {\n                    this.updateResourceTab(element);\n                }\n                else if (id.indexOf('Custom') !== -1) {\n                    this.updateCustomTab(element);\n                }\n                else if (id === 'Segments') {\n                    this.updateSegmentsData(element);\n                }\n            }\n        }\n        if (!this.disableUndo && this.parent.undoRedoModule) {\n            this.parent.undoRedoModule['getUndoCollection'].splice(this.parent.undoRedoModule['getUndoCollection'].length - 1, 1);\n            if (this.parent.toolbarModule && this.parent.undoRedoModule['getUndoCollection'].length === 0) {\n                this.parent.toolbarModule.enableItems([this.parent.controlId + '_undo'], false);\n            }\n            this.parent['totalUndoAction']--;\n        }\n        if (this.isEdit) {\n            /**\n             * If any update on edited task do it here\n             */\n            this.parent.editModule['editedRecord'] = this.rowData;\n            this.parent.dataOperation.updateWidthLeft(this.rowData);\n            var editArgs = {\n                data: this.rowData,\n                action: 'DialogEditing'\n            };\n            this.parent.editModule.initiateUpdateAction(editArgs);\n        }\n        else {\n            this.parent.editModule['editedRecord'] = this.addedRecord;\n            if (this.parent.viewType === 'ResourceView') {\n                var newRecords = extend({}, this.addedRecord, true);\n                if (newRecords[this.parent.taskFields.resourceInfo].length) {\n                    for (var i = 0; i < newRecords[this.parent.taskFields.resourceInfo].length; i++) {\n                        var id = newRecords[this.parent.taskFields.resourceInfo][i].toString();\n                        var parentRecordIndex = this.parent.getTaskIds().indexOf('R' + id.toString());\n                        if (parentRecordIndex !== -1) {\n                            this.parent.editModule.addRecord(this.addedRecord, 'Child', parentRecordIndex);\n                            break;\n                        }\n                    }\n                }\n                else {\n                    this.parent.editModule.addRecord(this.addedRecord, 'Bottom');\n                }\n            }\n            else {\n                this.parent.editModule.addRecord(this.addedRecord, this.parent.editSettings.newRowPosition, this.parent.selectedRowIndex);\n            }\n        }\n        return true;\n    };\n    DialogEdit.prototype.updateSegmentTaskData = function (dataSource) {\n        var taskSettings = this.parent.taskFields;\n        if (!this.isEdit) {\n            this.addedRecord[taskSettings.segments] = dataSource;\n        }\n        else {\n            this.parent.setRecordValue('taskData.' + this.parent.taskFields.segments, dataSource, this.rowData);\n            this.parent.setRecordValue('segments', this.parent.dataOperation.setSegmentsInfo(this.rowData, true), this.rowData.ganttProperties, true);\n            this.parent.setRecordValue('segments', this.parent.dataOperation.setSegmentsInfo(this.rowData, false), this.rowData.ganttProperties, true);\n            if (dataSource.length <= 0) {\n                this.validateDuration(this.rowData);\n            }\n        }\n    };\n    DialogEdit.prototype.updateSegmentsData = function (segmentForm) {\n        var gridObj = segmentForm.ej2_instances[0];\n        var isEdit = gridObj.isEdit;\n        var dataSource;\n        if (gridObj.isEdit) {\n            gridObj.endEdit();\n        }\n        if (isEdit && gridObj.currentViewData.length !== gridObj.dataSource['length']) {\n            dataSource = gridObj.dataSource;\n        }\n        else {\n            dataSource = gridObj.currentViewData;\n        }\n        this.updateSegmentTaskData(dataSource);\n    };\n    DialogEdit.prototype.updateGeneralTab = function (generalForm, isCustom) {\n        var ganttObj = this.parent;\n        var childNodes = generalForm.childNodes;\n        var tasksData = {};\n        if (!this.isEdit) {\n            tasksData = this.addedRecord;\n        }\n        for (var i = 0; i < childNodes.length; i++) {\n            var div = childNodes[i];\n            var inputElement = div.querySelector('input[id^=\"' + ganttObj.element.id + '\"]') || div.querySelector('textarea[id^=\"' + ganttObj.element.id + '\"]');\n            if (inputElement) {\n                var fieldName = inputElement.id.replace(ganttObj.element.id, '');\n                var controlObj = div.querySelector('#' + ganttObj.element.id + fieldName).ej2_instances[0];\n                if (this.parent.columnByField[this.parent.taskFields.id].editType === 'stringedit' && fieldName === this.parent.taskFields.id) {\n                    var valueString = controlObj.value.toString();\n                    controlObj.value = valueString;\n                }\n                var column = ganttObj.columnByField[fieldName];\n                if (fieldName === this.parent.taskFields.duration ?\n                    parseInt(this.rowData[fieldName], 10) !== parseInt(controlObj.value, 10) :\n                    this.rowData[fieldName] !== controlObj.value) {\n                    this.disableUndo = true;\n                }\n                if (!isNullOrUndefined(column) && !isNullOrUndefined(column.edit) && isNullOrUndefined(column.edit.params)) {\n                    var read = column.edit.read;\n                    if (typeof read === 'string') {\n                        read = getObject(read, window);\n                        tasksData[fieldName] = read(inputElement, controlObj.value);\n                    }\n                    else {\n                        tasksData[fieldName] = column.edit.read(inputElement, controlObj.value);\n                    }\n                }\n                else if (!isNullOrUndefined(column) && column.editType === 'booleanedit') {\n                    if (inputElement instanceof HTMLInputElement && inputElement.checked === true) {\n                        tasksData[fieldName] = true;\n                    }\n                    else {\n                        tasksData[fieldName] = false;\n                    }\n                }\n                else {\n                    if (fieldName === this.parent.taskFields.duration) {\n                        var numericValue = parseFloat(String(controlObj.value));\n                        tasksData[fieldName] = numericValue;\n                    }\n                    else {\n                        if (this.parent.weekWorkingTime.length > 0 && controlObj.value && (fieldName === this.parent.taskFields.startDate ||\n                            fieldName === this.parent.taskFields.baselineStartDate)) {\n                            var sDate = fieldName === this.parent.taskFields.startDate ? this.beforeOpenArgs.rowData['ganttProperties'].startDate : this.beforeOpenArgs.rowData['ganttProperties'].baselineStartDate;\n                            var prevDay = this.parent['getStartTime'](sDate);\n                            if (prevDay / 3600 === sDate.getHours()) {\n                                var dayStartTime = this.parent['getStartTime'](controlObj.value);\n                                this.parent.dataOperation.setTime(dayStartTime, controlObj.value);\n                                tasksData[fieldName] = controlObj.value;\n                            }\n                            else {\n                                tasksData[fieldName] = controlObj.value;\n                            }\n                        }\n                        else {\n                            tasksData[fieldName] = controlObj.value;\n                        }\n                    }\n                    if (this.parent.enableHtmlSanitizer && typeof (controlObj.value) === 'string') {\n                        controlObj.value = SanitizeHtmlHelper.sanitize(controlObj.value);\n                        tasksData[fieldName] = controlObj.value;\n                    }\n                }\n            }\n        }\n        if (this.isEdit) {\n            if (!isCustom) {\n                this.updateScheduleProperties(this.editedRecord, this.rowData);\n            }\n            ganttObj.editModule.validateUpdateValues(tasksData, this.rowData, true);\n        }\n    };\n    DialogEdit.prototype.updateScheduleProperties = function (fromRecord, toRecord) {\n        this.parent.setRecordValue('startDate', fromRecord.ganttProperties.startDate, toRecord.ganttProperties, true);\n        this.parent.setRecordValue('endDate', fromRecord.ganttProperties.endDate, toRecord.ganttProperties, true);\n        this.parent.setRecordValue('duration', fromRecord.ganttProperties.duration, toRecord.ganttProperties, true);\n        this.parent.setRecordValue('durationUnit', fromRecord.ganttProperties.durationUnit, toRecord.ganttProperties, true);\n        this.parent.setRecordValue('work', fromRecord.ganttProperties.work, toRecord.ganttProperties, true);\n        this.parent.setRecordValue('type', fromRecord.ganttProperties.taskType, toRecord.ganttProperties, true);\n        this.parent.setRecordValue('taskType', fromRecord.ganttProperties.taskType, toRecord.ganttProperties, true);\n        this.parent.setRecordValue('resourceNames', fromRecord.ganttProperties.resourceNames, toRecord.ganttProperties, true);\n        this.parent.setRecordValue('resourceInfo', fromRecord.ganttProperties.resourceInfo, toRecord.ganttProperties, true);\n        if (!isNullOrUndefined(this.parent.taskFields.startDate)) {\n            this.parent.dataOperation.updateMappingData(toRecord, this.parent.taskFields.startDate);\n        }\n        if (!isNullOrUndefined(this.parent.taskFields.endDate)) {\n            this.parent.dataOperation.updateMappingData(toRecord, this.parent.taskFields.endDate);\n        }\n        if (!isNullOrUndefined(this.parent.taskFields.duration)) {\n            this.parent.dataOperation.updateMappingData(toRecord, this.parent.taskFields.duration);\n            this.parent.setRecordValue('durationUnit', fromRecord.ganttProperties.durationUnit, this.rowData, true);\n            if (this.rowData.ganttProperties.duration === 0) {\n                this.parent.setRecordValue('isMilestone', true, toRecord.ganttProperties, true);\n            }\n            else {\n                this.parent.setRecordValue('isMilestone', false, this.rowData.ganttProperties, true);\n            }\n        }\n        if (!isNullOrUndefined(this.parent.taskFields.work)) {\n            this.parent.dataOperation.updateMappingData(this.rowData, this.parent.taskFields.work);\n        }\n        if (!isNullOrUndefined(this.parent.taskFields.manual)) {\n            this.parent.dataOperation.updateMappingData(this.rowData, this.parent.taskFields.manual);\n        }\n        if (!isNullOrUndefined(this.parent.taskFields.type)) {\n            this.parent.dataOperation.updateMappingData(this.rowData, 'type');\n        }\n        if (!isNullOrUndefined(this.parent.taskFields.resourceInfo)) {\n            this.parent.dataOperation.updateMappingData(this.rowData, 'resourceInfo');\n        }\n    };\n    DialogEdit.prototype.updatePredecessorTab = function (preElement) {\n        var gridObj = preElement.ej2_instances[0];\n        if (gridObj.isEdit) {\n            gridObj.endEdit();\n        }\n        var dataSource = gridObj.dataSource;\n        var predecessorName = [];\n        var newValues = [];\n        var predecessorString = '';\n        var ids = [];\n        var parentRecord = [];\n        for (var i = 0; i < dataSource.length; i++) {\n            var preData = dataSource[i];\n            var lastIndex = preData.name.lastIndexOf('-');\n            var splitString = [preData.name.substring(0, lastIndex)];\n            if (isNullOrUndefined(preData.id) || preData.id !== splitString[0]) {\n                preData.id = splitString[0];\n            }\n            if (ids.indexOf(preData.id) === -1) {\n                if (this.parent.viewType === 'ProjectView') {\n                    var currentRecord = this.parent.flatData[(this.parent.ids.indexOf(preData.id))];\n                    if (currentRecord.hasChildRecords && parentRecord.indexOf(currentRecord) === -1) {\n                        parentRecord.push(currentRecord);\n                    }\n                }\n                var name_1 = preData.id + preData.type;\n                if (preData.offset && preData.offset.indexOf('-') !== -1) {\n                    name_1 += preData.offset;\n                }\n                else {\n                    name_1 += ('+' + preData.offset);\n                }\n                predecessorName.push(name_1);\n                ids.push(preData.id);\n            }\n        }\n        if (this.isEdit) {\n            if (predecessorName.length > 0) {\n                newValues = this.parent.predecessorModule.calculatePredecessor(predecessorName.join(','), this.rowData);\n                this.parent.setRecordValue('predecessor', newValues, this.rowData.ganttProperties, true);\n                predecessorString = this.parent.predecessorModule.getPredecessorStringValue(this.rowData);\n            }\n            else {\n                newValues = [];\n                this.parent.setRecordValue('predecessor', newValues, this.rowData.ganttProperties, true);\n                predecessorString = '';\n            }\n            if (this.parent.undoRedoModule && this.parent.undoRedoModule['getUndoCollection'].length > 0) {\n                this.parent.undoRedoModule['getUndoCollection'][this.parent.undoRedoModule['getUndoCollection'].length - 1]['connectedRecords'] = parentRecord;\n                if (predecessorString !== '' || (!isNullOrUndefined(this.rowData.ganttProperties.predecessorsName) && this.rowData.ganttProperties.predecessorsName !== predecessorString) && !this.disableUndo) {\n                    this.disableUndo = true;\n                }\n            }\n            this.parent.setRecordValue('predecessorsName', predecessorString, this.rowData.ganttProperties, true);\n            this.parent.setRecordValue('taskData.' + this.parent.taskFields.dependency, predecessorString, this.rowData);\n            this.parent.setRecordValue(this.parent.taskFields.dependency, predecessorString, this.rowData);\n            this.parent.predecessorModule.updateUnscheduledDependency(this.rowData);\n        }\n        else {\n            this.addedRecord[this.parent.taskFields.dependency] = predecessorName.length > 0 ? predecessorName.join(',') : '';\n        }\n    };\n    DialogEdit.prototype.updateResourceTab = function (resourceElement) {\n        var treeGridObj = resourceElement.ej2_instances[0];\n        if (treeGridObj) {\n            treeGridObj.grid.endEdit();\n        }\n        var selectedItems = this.ganttResources;\n        if (this.parent.viewType === 'ResourceView' && !isNullOrUndefined(this.rowData.ganttProperties)) {\n            if (JSON.stringify(this.ganttResources) !== JSON.stringify(this.rowData.ganttProperties.resourceInfo)) {\n                this.isResourceUpdate = true;\n                this.previousResource = !isNullOrUndefined(this.rowData.ganttProperties.resourceInfo) ? this.rowData.ganttProperties.resourceInfo.slice() : [];\n            }\n            else {\n                this.isResourceUpdate = false;\n            }\n        }\n        var idArray = [];\n        if (this.isEdit) {\n            if ((this.rowData.ganttProperties.resourceInfo && selectedItems.length !== this.rowData.ganttProperties.resourceInfo.length) ||\n                (isNullOrUndefined(this.rowData.ganttProperties.resourceInfo) && selectedItems.length > 0)) {\n                this.disableUndo = true;\n            }\n            if (!this.disableUndo) {\n                for (var i = 0; i < selectedItems.length; i++) {\n                    if (JSON.stringify(selectedItems[i]) !==\n                        JSON.stringify(this.rowData.ganttProperties.resourceInfo[i])) {\n                        this.disableUndo = true;\n                        break;\n                    }\n                }\n            }\n            this.parent.setRecordValue('resourceInfo', selectedItems, this.editedRecord.ganttProperties, true);\n            this.parent.dataOperation.updateMappingData(this.editedRecord, 'resourceInfo');\n            this.parent.editModule.updateResourceRelatedFields(this.editedRecord, 'resource');\n            this.validateDuration(this.editedRecord);\n            this.updateScheduleProperties(this.editedRecord, this.rowData);\n        }\n        else {\n            for (var i = 0; i < selectedItems.length; i++) {\n                idArray.push(selectedItems[i][this.parent.resourceFields.id]);\n                this.isAddNewResource = true;\n            }\n            this.addedRecord[this.parent.taskFields.resourceInfo] = idArray;\n        }\n    };\n    DialogEdit.prototype.updateNotesTab = function (notesElement) {\n        var ganttObj = this.parent;\n        var rte = notesElement.ej2_instances[0];\n        if (this.isEdit) {\n            if (!ganttObj.columnByField[ganttObj.taskFields.notes].disableHtmlEncode) {\n                if (this.rowData.ganttProperties.notes !== rte.getHtml() && (this.rowData.ganttProperties.notes !== null || rte.getHtml() !== '<p><br></p>') && !this.disableUndo) {\n                    this.disableUndo = true;\n                }\n                this.parent.setRecordValue('notes', rte.getHtml(), this.rowData.ganttProperties, true);\n            }\n            else {\n                if (this.rowData.ganttProperties.notes !== rte.getText() && (this.rowData.ganttProperties.notes !== null || rte.getText() !== '') && !this.disableUndo) {\n                    this.disableUndo = true;\n                }\n                if (rte.getHtml().includes('href')) {\n                    this.parent.setRecordValue('notes', rte.getHtml(), this.rowData.ganttProperties, true);\n                }\n                else {\n                    this.parent.setRecordValue('notes', rte.getText(), this.rowData.ganttProperties, true);\n                }\n            }\n            ganttObj.dataOperation.updateMappingData(this.rowData, 'notes');\n        }\n        else {\n            this.addedRecord[this.parent.taskFields.notes] = rte.getHtml();\n        }\n    };\n    DialogEdit.prototype.updateCustomTab = function (customElement) {\n        this.updateGeneralTab(customElement, true);\n    };\n    return DialogEdit;\n}());\nexport { DialogEdit };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}