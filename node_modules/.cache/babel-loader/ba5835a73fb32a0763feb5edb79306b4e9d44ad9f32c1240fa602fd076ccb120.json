{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { createElement, isNullOrUndefined, getValue, addClass, removeClass, extend, append } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constants';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * Configures the `Timeline` of the gantt.\n */\nvar Timeline = /** @class */function () {\n  function Timeline(ganttObj) {\n    this.isZoomIn = false;\n    this.isZooming = false;\n    this.isZoomToFit = false;\n    this.topTierCollection = [];\n    this.bottomTierCollection = [];\n    this.pdfExportTopTierCollection = [];\n    this.pdfExportBottomTierCollection = [];\n    this.restrictRender = true;\n    this.performedTimeSpanAction = false;\n    this.isZoomedToFit = false;\n    this.parent = ganttObj;\n    this.initProperties();\n  }\n  /**\n   * To initialize the public property.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.initProperties = function () {\n    this.timelineStartDate = null;\n    this.timelineEndDate = null;\n    this.totalTimelineWidth = 0;\n    this.customTimelineSettings = null;\n    this.parent.isTimelineRoundOff = this.isZoomToFit ? false : isNullOrUndefined(this.parent.projectStartDate) ? true : false;\n    if (this.parent.enablePersistence && this.parent.isLoad) {\n      this.parent.timelineSettings = this.parent.currentZoomingLevel;\n    }\n  };\n  /**\n   * To render timeline header series.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.validateTimelineProp = function () {\n    this.roundOffDays();\n    this.processTimelineProperty();\n    this.timelineWidthCalculation();\n  };\n  /**\n   * Function used to refresh Gantt rows.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.refreshTimeline = function () {\n    this.initProperties();\n    this.processTimelineUnit();\n    this.parent.dataOperation.calculateProjectDates();\n    if (!this.parent.isFromOnPropertyChange) {\n      this.parent.updateProjectDates(this.parent.cloneProjectStartDate, this.parent.cloneProjectEndDate, this.parent.isTimelineRoundOff);\n    }\n    var timelineContainer = this.parent.element.getElementsByClassName('e-timeline-header-container')[0]['offsetHeight'];\n    this.parent.element.getElementsByClassName('e-gridcontent')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n    this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n  };\n  /**\n   * Function used to refresh Gantt rows.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.refreshTimelineByTimeSpan = function () {\n    this.validateTimelineProp();\n    if (!this.parent.pdfExportModule || this.parent.pdfExportModule && !this.parent.pdfExportModule.isPdfExport || this.parent.pdfExportModule && this.parent.pdfExportModule.isPdfExport && this.parent.pdfExportModule.helper.exportProps && !this.parent.pdfExportModule.helper.exportProps.fitToWidthSettings.isFitToWidth) {\n      this.parent.ganttChartModule.chartTimelineContainer.innerHTML = '';\n    }\n    this.createTimelineSeries();\n  };\n  /**\n   * Function used to refresh Gantt rows.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.updateChartByNewTimeline = function () {\n    this.parent.chartRowsModule.refreshChartByTimeline();\n    var currentScrollLeft = this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0].scrollLeft;\n    this.parent.element.getElementsByClassName('e-timeline-header-container')[0].scrollLeft = currentScrollLeft;\n    this.parent.notify('refreshDayMarkers', {});\n  };\n  /**\n   * Function used to perform Zoomin and Zoomout actions in Gantt control.\n   *\n   * @param {boolean} isZoomIn .\n   * @private\n   * @returns {void}\n   */\n  Timeline.prototype.processZooming = function (isZoomIn) {\n    this.isZoomToFit = false;\n    this.isZoomedToFit = false;\n    var action = isZoomIn ? 'ZoomIn' : 'ZoomOut';\n    if (this.parent.undoRedoModule && this.parent['isUndoRedoItemPresent'](action)) {\n      if (this.parent.undoRedoModule['redoEnabled']) {\n        this.parent.undoRedoModule['disableRedo']();\n      }\n      this.parent.undoRedoModule['createUndoCollection']();\n      var previousTimeline = {};\n      previousTimeline['action'] = action;\n      previousTimeline['previousZoomingLevel'] = extend({}, {}, this.parent.currentZoomingLevel, true);\n      this.parent.undoRedoModule['getUndoCollection'][this.parent.undoRedoModule['getUndoCollection'].length - 1] = previousTimeline;\n    }\n    if (!this.parent['isProjectDateUpdated']) {\n      this.parent.dateValidationModule.calculateProjectDates();\n    }\n    if (!isNullOrUndefined(this.parent.zoomingProjectStartDate)) {\n      this.parent.cloneProjectStartDate = this.parent.zoomingProjectStartDate;\n      this.parent.cloneProjectEndDate = this.parent.zoomingProjectEndDate;\n    }\n    this.parent.zoomingProjectStartDate = null;\n    this.parent.zoomingProjectEndDate = null;\n    var currentZoomingLevel = this.checkCurrentZoomingLevel();\n    this.isZoomIn = isZoomIn;\n    this.isZooming = true;\n    var currentLevel;\n    var level = isZoomIn ? currentZoomingLevel + 1 : currentZoomingLevel - 1;\n    var foundLevel = this.parent.zoomingLevels.find(function (tempLevel) {\n      return tempLevel.level === level;\n    });\n    if (foundLevel) {\n      currentLevel = level;\n    } else {\n      currentLevel = currentZoomingLevel;\n    }\n    if (this.parent.toolbarModule) {\n      if (isZoomIn) {\n        if (currentLevel === this.parent.zoomingLevels[this.parent.zoomingLevels.length - 1].level) {\n          this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin'], false); // disable toolbar items.\n          this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomout'], true);\n        } else {\n          this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomout'], true); // disable toolbar items.\n        }\n      } else {\n        if (currentLevel === this.parent.zoomingLevels[0].level) {\n          this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomout'], false); // disable toolbar items.\n          this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin'], true);\n        } else {\n          this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin'], true); // enable toolbar items.\n        }\n      }\n    }\n    currentLevel = this.parent.zoomingLevels.findIndex(function (tempLevel) {\n      return tempLevel.level === currentLevel;\n    });\n    var newTimeline = this.parent.zoomingLevels[currentLevel];\n    var args = {\n      requestType: isZoomIn ? 'beforeZoomIn' : 'beforeZoomOut',\n      timeline: newTimeline,\n      cancel: false\n    };\n    this.parent.trigger('actionBegin', args);\n    if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n      this.parent.showMaskRow();\n    } else {\n      this.parent.showSpinner();\n    }\n    if (!args.cancel) {\n      newTimeline = args.timeline;\n      this.changeTimelineSettings(newTimeline);\n    }\n  };\n  /**\n   * To change the timeline settings property values based upon the Zooming levels.\n   *\n   * @param {ZoomTimelineSettings} newTimeline .\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.changeTimelineSettings = function (newTimeline) {\n    var _this = this;\n    if (this.isZoomToFit) {\n      this.isSingleTier = this.customTimelineSettings.topTier.unit === 'None' || this.customTimelineSettings.bottomTier.unit === 'None' ? true : false;\n    } else if (!this.isZoomIn) {\n      this.isSingleTier = newTimeline.topTier.unit === 'None' || newTimeline.bottomTier.unit === 'None' ? true : false;\n    }\n    var skipProperty = this.isSingleTier ? this.customTimelineSettings.topTier.unit === 'None' ? 'topTier' : 'bottomTier' : null;\n    Object.keys(this.customTimelineSettings).forEach(function (property) {\n      if (property !== skipProperty) {\n        _this.customTimelineSettings[property] = typeof newTimeline[property] === 'object' && !isNullOrUndefined(newTimeline[property]) ? __assign({}, newTimeline[property]) : newTimeline[property];\n      } else {\n        var value = property === 'topTier' ? 'bottomTier' : 'topTier';\n        var assignValue = 'bottomTier';\n        if (newTimeline[\"\" + assignValue].unit !== 'None') {\n          _this.customTimelineSettings[value] = __assign({}, newTimeline[assignValue]);\n        }\n      }\n    });\n    this.parent.isTimelineRoundOff = this.isZoomToFit ? false : isNullOrUndefined(this.parent.projectStartDate) ? true : false;\n    this.processTimelineUnit();\n    this.parent.updateProjectDates(this.parent.cloneProjectStartDate, this.parent.cloneProjectEndDate, this.parent.isTimelineRoundOff);\n    var criticalModule = this.parent.criticalPathModule;\n    if (this.parent.enableCriticalPath && criticalModule && criticalModule.criticalPathCollection) {\n      criticalModule.criticalConnectorLine(criticalModule.criticalPathCollection, criticalModule.detailPredecessorCollection, true, criticalModule.predecessorCollectionTaskIds);\n    }\n    if (this.isZooming || this.isZoomToFit) {\n      var args = {\n        requestType: this.isZoomIn ? 'AfterZoomIn' : this.isZoomToFit ? 'AfterZoomToProject' : 'AfterZoomOut',\n        timeline: this.parent.currentZoomingLevel\n      };\n      this.parent.trigger('actionComplete', args);\n      if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n        this.parent.hideMaskRow();\n      } else {\n        this.parent.hideSpinner();\n      }\n    }\n    var tier = this.topTier === 'None' ? 'bottomTier' : 'topTier';\n    if (this.parent.enableTimelineVirtualization && (!this.parent.pdfExportModule || this.parent.pdfExportModule && !this.parent.pdfExportModule.isPdfExport)) {\n      this.wholeTimelineWidth = this.calculateWidthBetweenTwoDate(tier, this.parent.timelineModule.timelineStartDate, this.parent.timelineModule.timelineEndDate);\n      if (this.wholeTimelineWidth <= this.totalTimelineWidth) {\n        this.wholeTimelineWidth = this.totalTimelineWidth;\n      }\n      // Handled zoomtofit horizontal scrollbar hide while performing different zooming levels in browser at virtualtimeline mode-Task(919516)\n      if (this.isZoomToFit) {\n        this.clientWidthDifference = Math.abs(this.wholeTimelineWidth - this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0].clientWidth) + 1;\n        this.parent.element.querySelectorAll('.e-chart-scroll-container')[0].querySelector('.e-virtualtrack')['style'].width = this.wholeTimelineWidth - this.clientWidthDifference + 'px';\n        if (!isNullOrUndefined(this.parent.element.querySelectorAll('.e-timeline-header-container')[0].querySelector('.e-virtualtrack'))) {\n          this.parent.element.querySelectorAll('.e-timeline-header-container')[0].querySelector('.e-virtualtrack')['style'].width = this.wholeTimelineWidth - this.clientWidthDifference + 'px';\n        }\n      } else {\n        this.parent.element.querySelectorAll('.e-chart-scroll-container')[0].querySelector('.e-virtualtrack')['style'].width = this.wholeTimelineWidth + 'px';\n        if (!isNullOrUndefined(this.parent.element.querySelectorAll('.e-timeline-header-container')[0].querySelector('.e-virtualtrack'))) {\n          this.parent.element.querySelectorAll('.e-timeline-header-container')[0].querySelector('.e-virtualtrack')['style'].width = this.wholeTimelineWidth + 'px';\n        }\n      }\n      this.parent.ganttChartModule.updateWidthAndHeight();\n    }\n  };\n  /**\n   * To perform the zoom to fit operation in Gantt.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.processZoomToFit = function () {\n    this.isZoomToFit = true;\n    this.isZooming = false;\n    this.isZoomedToFit = true;\n    var previousTimeline = {};\n    if (this.parent.undoRedoModule && !this.parent.undoRedoModule['isUndoRedoPerformed'] && this.parent['isUndoRedoItemPresent']('ZoomToFit')) {\n      if (this.parent.undoRedoModule['redoEnabled']) {\n        this.parent.undoRedoModule['disableRedo']();\n      }\n      this.parent.undoRedoModule['createUndoCollection']();\n      previousTimeline['action'] = 'ZoomToFit';\n      previousTimeline['previousTimelineStartDate'] = extend([], [], [this.parent.cloneProjectStartDate], true)[0];\n      previousTimeline['previousTimelineEndDate'] = extend([], [], [this.parent.cloneProjectEndDate], true)[0];\n      previousTimeline['previousZoomingLevel'] = extend({}, {}, this.parent.currentZoomingLevel, true);\n      this.parent.undoRedoModule['getUndoCollection'][this.parent.undoRedoModule['getUndoCollection'].length - 1] = previousTimeline;\n    }\n    if (!this.parent.zoomingProjectStartDate) {\n      this.parent.zoomingProjectStartDate = this.parent.cloneProjectStartDate;\n      this.parent.zoomingProjectEndDate = this.parent.cloneProjectEndDate;\n    }\n    if (this.parent.zoomingProjectStartDate > this.parent.cloneProjectStartDate) {\n      this.parent.cloneProjectStartDate = new Date(this.parent.allowUnscheduledTasks ? this.parent.zoomingProjectStartDate : this.parent.cloneProjectStartDate);\n    }\n    this.parent.dataOperation.calculateProjectDates();\n    var timeDifference = this.parent.cloneProjectEndDate.getTime() - this.parent.cloneProjectStartDate.getTime();\n    var totalDays = timeDifference / (1000 * 3600 * 24);\n    var chartWidth = this.parent.ganttChartModule.chartElement.offsetWidth;\n    var perDayWidth = chartWidth / totalDays;\n    var zoomingLevel;\n    var firstValue;\n    var secondValue;\n    var zoomingCollections = this.parent.zoomingLevels.slice();\n    var sortedCollectons = zoomingCollections.sort(function (a, b) {\n      return !a.perDayWidth && !b.perDayWidth ? 0 : a.perDayWidth < b.perDayWidth ? 1 : -1;\n    });\n    if (perDayWidth === 0) {\n      // return when the Gantt chart is not in viewable state.\n      return;\n    }\n    for (var i = 0; i < sortedCollectons.length; i++) {\n      firstValue = sortedCollectons[i];\n      if (i === sortedCollectons.length - 1) {\n        zoomingLevel = sortedCollectons[i];\n        break;\n      } else {\n        secondValue = sortedCollectons[i + 1];\n      }\n      if (perDayWidth >= firstValue.perDayWidth) {\n        zoomingLevel = sortedCollectons[i];\n        break;\n      }\n      if (perDayWidth < firstValue.perDayWidth && perDayWidth > secondValue.perDayWidth) {\n        zoomingLevel = sortedCollectons[i + 1];\n        break;\n      }\n    }\n    var newTimeline = extend({}, {}, zoomingLevel, true);\n    this.roundOffDateToZoom(this.parent.cloneProjectStartDate, true, perDayWidth, newTimeline.bottomTier.unit, zoomingLevel);\n    this.roundOffDateToZoom(this.parent.cloneProjectEndDate, false, perDayWidth, newTimeline.bottomTier.unit, zoomingLevel);\n    var numberOfCells = this.calculateNumberOfTimelineCells(newTimeline);\n    var scrollHeight = this.parent.ganttChartModule.scrollElement.offsetHeight - 17; //17 is horizontal scrollbar width\n    var contentHeight = this.parent.ganttChartModule.chartBodyContent.offsetHeight;\n    var emptySpace = contentHeight <= scrollHeight ? 0 : 17;\n    newTimeline.timelineUnitSize = Math.abs(chartWidth - emptySpace) / numberOfCells;\n    var args = {\n      requestType: 'beforeZoomToProject',\n      timeline: newTimeline\n    };\n    if (this.parent.toolbarModule) {\n      this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin', this.parent.controlId + '_zoomout'], true);\n    }\n    this.parent.trigger('actionBegin', args);\n    if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n      this.parent.showMaskRow();\n    } else {\n      this.parent.showSpinner();\n    }\n    this.changeTimelineSettings(newTimeline);\n    this.parent.isTimelineRoundOff = isNullOrUndefined(this.parent.projectStartDate) ? true : false;\n    this.isZoomToFit = false;\n  };\n  Timeline.prototype.bottomTierCellWidthCalc = function (mode, zoomLevel, date) {\n    var convertedMilliSeconds;\n    switch (mode) {\n      case 'Minutes':\n        convertedMilliSeconds = zoomLevel.bottomTier.count * (60 * 1000);\n        break;\n      case 'Hour':\n        convertedMilliSeconds = zoomLevel.bottomTier.count * (60 * 60 * 1000);\n        break;\n      case 'Week':\n        convertedMilliSeconds = zoomLevel.bottomTier.count * (7 * 24 * 60 * 60 * 1000);\n        break;\n      case 'Day':\n        convertedMilliSeconds = zoomLevel.bottomTier.count * (24 * 60 * 60 * 1000);\n        break;\n      case 'Month':\n        {\n          var daysInMonth = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n          convertedMilliSeconds = zoomLevel.bottomTier.count * (60 * 60 * 24 * daysInMonth * 1000);\n          break;\n        }\n      case 'Year':\n        {\n          var daysInYear = date.getFullYear() % 400 === 0 || date.getFullYear() % 100 !== 0 && date.getFullYear() % 4 === 0 ? 366 : 365;\n          convertedMilliSeconds = zoomLevel.bottomTier.count * (60 * 60 * 24 * daysInYear * 1000);\n          break;\n        }\n    }\n    return convertedMilliSeconds;\n  };\n  Timeline.prototype.roundOffDateToZoom = function (date, isStartDate, perDayWidth, tierMode, zoomingLevel) {\n    var roundOffTime = this.bottomTierCellWidthCalc(tierMode, zoomingLevel, date);\n    if (isStartDate) {\n      date.setTime(date.getTime() - roundOffTime);\n    } else {\n      date.setTime(date.getTime() + roundOffTime);\n    }\n  };\n  Timeline.prototype.calculateNumberOfTimelineCells = function (newTimeline) {\n    var sDate = new Date(this.parent.cloneProjectStartDate.getTime());\n    var eDate = new Date(this.parent.cloneProjectEndDate.getTime());\n    this.parent.dateValidationModule['updateDateWithTimeZone'](sDate, eDate);\n    var numberOfDays = Math.abs((eDate.getTime() - sDate.getTime()) / (24 * 60 * 60 * 1000));\n    var count = newTimeline.bottomTier.count;\n    var unit = newTimeline.bottomTier.unit;\n    if (unit === 'Day') {\n      return numberOfDays / count;\n    } else if (unit === 'Week') {\n      return numberOfDays / count / 7;\n    } else if (unit === 'Month') {\n      return numberOfDays / count / 28;\n    } else if (unit === 'Year') {\n      return numberOfDays / count / (12 * 28);\n    } else if (unit === 'Hour') {\n      return numberOfDays * (24 / count);\n    } else {\n      return numberOfDays * (60 * 24 / count);\n    }\n  };\n  /**\n   * To validate time line unit.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.processTimelineUnit = function () {\n    var directProperty = ['timelineViewMode', 'timelineUnitSize', 'weekStartDay', 'weekendBackground'];\n    var innerProperty = {\n      'topTier': ['unit', 'format', 'count', 'formatter'],\n      'bottomTier': ['unit', 'format', 'count', 'formatter']\n    };\n    var tierUnits = ['Year', 'Month', 'Week', 'Day', 'Hour', 'Minutes'];\n    this.customTimelineSettings = this.customTimelineSettings ? this.customTimelineSettings : this.extendFunction(this.parent.timelineSettings, directProperty, innerProperty);\n    if (tierUnits.indexOf(this.customTimelineSettings.topTier.unit) === -1 && tierUnits.indexOf(this.customTimelineSettings.bottomTier.unit) === -1) {\n      this.customTimelineSettings.topTier.unit = tierUnits.indexOf(this.customTimelineSettings.timelineViewMode) !== -1 ? this.customTimelineSettings.timelineViewMode : 'Week';\n      this.customTimelineSettings.bottomTier.unit = tierUnits.indexOf(this.customTimelineSettings.topTier.unit) !== 5 ? tierUnits[tierUnits.indexOf(this.customTimelineSettings.topTier.unit) + 1] : 'None';\n    } else if (tierUnits.indexOf(this.customTimelineSettings.topTier.unit) !== -1 && tierUnits.indexOf(this.customTimelineSettings.bottomTier.unit) !== -1 && tierUnits.indexOf(this.customTimelineSettings.topTier.unit) > tierUnits.indexOf(this.customTimelineSettings.bottomTier.unit)) {\n      this.customTimelineSettings.bottomTier.unit = this.customTimelineSettings.topTier.unit;\n    } else {\n      this.customTimelineSettings.topTier.unit = tierUnits.indexOf(this.customTimelineSettings.topTier.unit) === -1 ? 'None' : this.customTimelineSettings.topTier.unit;\n      this.customTimelineSettings.bottomTier.unit = tierUnits.indexOf(this.customTimelineSettings.bottomTier.unit) === -1 ? 'None' : this.customTimelineSettings.bottomTier.unit;\n    }\n    this.topTier = this.customTimelineSettings.topTier.unit;\n    this.bottomTier = this.customTimelineSettings.bottomTier.unit;\n    this.previousIsSingleTier = this.isSingleTier;\n    this.isSingleTier = this.topTier === 'None' || this.bottomTier === 'None' ? true : false;\n  };\n  /**\n   * To validate timeline properties.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.processTimelineProperty = function () {\n    this.customTimelineSettings.topTier.count = this.topTier === 'None' ? 1 : this.validateCount(this.customTimelineSettings.topTier.unit, this.customTimelineSettings.topTier.count, 'topTier');\n    this.customTimelineSettings.bottomTier.count = this.customTimelineSettings.bottomTier.unit === 'None' ? 1 : this.validateCount(this.customTimelineSettings.bottomTier.unit, this.customTimelineSettings.bottomTier.count, 'bottomTier');\n    this.customTimelineSettings.bottomTier.format = this.validateFormat(this.customTimelineSettings.bottomTier.unit, this.customTimelineSettings.bottomTier.format);\n    this.customTimelineSettings.topTier.format = this.validateFormat(this.topTier, this.customTimelineSettings.topTier.format);\n    this.customTimelineSettings.weekStartDay = this.customTimelineSettings.weekStartDay >= 0 && this.customTimelineSettings.weekStartDay <= 6 ? this.customTimelineSettings.weekStartDay : 0;\n    if (!(this.parent.pdfExportModule && this.parent.pdfExportModule.helper.exportProps && this.parent.pdfExportModule.isPdfExport && this.parent.pdfExportModule.helper.exportProps.fitToWidthSettings.isFitToWidth)) {\n      this.checkCurrentZoomingLevel();\n    }\n  };\n  /**\n   * To find the current zooming level of the Gantt control.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.calculateZoomingLevelsPerDayWidth = function () {\n    var collections = this.parent.zoomingLevels;\n    for (var i = 0; i < collections.length; i++) {\n      var perDayWidth = this.getPerDayWidth(collections[i].timelineUnitSize, collections[i].bottomTier.count, collections[i].bottomTier.unit);\n      collections[i].perDayWidth = perDayWidth;\n    }\n  };\n  /**\n   * To find the current zooming level of the Gantt control.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.checkCurrentZoomingLevel = function () {\n    var count = this.customTimelineSettings.bottomTier.unit !== 'None' ? this.customTimelineSettings.bottomTier.count : this.customTimelineSettings.topTier.count;\n    var unit = this.customTimelineSettings.bottomTier.unit !== 'None' ? this.customTimelineSettings.bottomTier.unit : this.customTimelineSettings.topTier.unit;\n    var tier = this.customTimelineSettings.bottomTier.unit !== 'None' ? 'bottomTier' : 'topTier';\n    var zoomLevel = this.getCurrentZoomingLevel(unit, count, tier);\n    if (this.parent.toolbarModule) {\n      if (zoomLevel === this.parent.zoomingLevels[this.parent.zoomingLevels.length - 1].level) {\n        this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin'], false);\n      } else if (zoomLevel === this.parent.zoomingLevels[0].level) {\n        this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomout'], false);\n      }\n    }\n    this.parent.currentZoomingLevel = this.parent.zoomingLevels[zoomLevel];\n    return zoomLevel;\n  };\n  /**\n   * @param {string} unit .\n   * @param {number} count .\n   * @param {string} tier .\n   * @returns {number} .\n   * @private\n   */\n  Timeline.prototype.getCurrentZoomingLevel = function (unit, count, tier) {\n    var level;\n    var currentZoomCollection;\n    var checkSameCountLevels;\n    var secondValue;\n    var firstValue;\n    if (!this.parent.zoomingLevels.length) {\n      this.parent.zoomingLevels = this.parent.getZoomingLevels();\n    }\n    var sameUnitLevels = this.parent.zoomingLevels.filter(function (tempLevel) {\n      if (tier === 'bottomTier') {\n        return tempLevel.bottomTier.unit === unit;\n      } else {\n        return tempLevel.topTier.unit === unit;\n      }\n    });\n    if (sameUnitLevels.length === 0) {\n      var closestUnit_1 = this.getClosestUnit(unit, '', false);\n      sameUnitLevels = this.parent.zoomingLevels.filter(function (tempLevel) {\n        if (tier === 'bottomTier') {\n          return tempLevel.bottomTier.unit === closestUnit_1;\n        } else {\n          return tempLevel.topTier.unit === closestUnit_1;\n        }\n      });\n    }\n    var sortedUnitLevels = sameUnitLevels.sort(function (a, b) {\n      if (tier === 'bottomTier') {\n        return !a.bottomTier.count || !b.bottomTier.count ? 0 : a.bottomTier.count < b.bottomTier.count ? 1 : -1;\n      } else {\n        return !a.topTier.count || !b.topTier.count ? 0 : a.topTier.count < b.topTier.count ? 1 : -1;\n      }\n    });\n    for (var i = 0; i < sortedUnitLevels.length; i++) {\n      firstValue = sortedUnitLevels[i];\n      if (i === sortedUnitLevels.length - 1) {\n        level = sortedUnitLevels[i].level;\n        break;\n      } else {\n        secondValue = sortedUnitLevels[i + 1];\n      }\n      if (count >= firstValue[\"\" + tier].count) {\n        currentZoomCollection = sortedUnitLevels[i];\n        checkSameCountLevels = sortedUnitLevels.filter(function (tempLevel) {\n          if (tier === 'bottomTier') {\n            return tempLevel.bottomTier.count === currentZoomCollection.bottomTier.count;\n          } else {\n            return tempLevel.topTier.count === currentZoomCollection.topTier.count;\n          }\n        });\n        if (checkSameCountLevels.length > 1) {\n          level = this.checkCollectionsWidth(checkSameCountLevels);\n        } else {\n          level = checkSameCountLevels[0].level;\n        }\n        break;\n      } else if (count < firstValue[\"\" + tier].count && count > secondValue[\"\" + tier].count) {\n        currentZoomCollection = sortedUnitLevels[i + 1];\n        checkSameCountLevels = sortedUnitLevels.filter(function (tempLevel) {\n          if (tier === 'bottomTier') {\n            return tempLevel.bottomTier.count === currentZoomCollection.bottomTier.count;\n          } else {\n            return tempLevel.topTier.count === currentZoomCollection.topTier.count;\n          }\n        });\n        if (checkSameCountLevels.length > 1) {\n          level = this.checkCollectionsWidth(checkSameCountLevels);\n        } else {\n          level = checkSameCountLevels[0].level;\n        }\n        break;\n      }\n    }\n    return level;\n  };\n  /**\n   * Getting closest zooimg level.\n   *\n   * @param {string} unit .\n   * @param {string} closetUnit .\n   * @param {boolean} isCont .\n   * @returns {string} .\n   * @private\n   */\n  Timeline.prototype.getClosestUnit = function (unit, closetUnit, isCont) {\n    var bottomTierUnits = ['Year', 'Month', 'Week', 'Day', 'Hour', 'Minutes'];\n    var index = bottomTierUnits.indexOf(unit);\n    if (index === 0) {\n      isCont = true;\n    }\n    if (this.isZoomIn || isCont) {\n      unit = bottomTierUnits[index + 1];\n    } else {\n      unit = bottomTierUnits[index - 1];\n    }\n    var sameUnitLevels = this.parent.zoomingLevels.filter(function (tempLevel) {\n      return tempLevel.bottomTier.unit === unit;\n    });\n    if (sameUnitLevels.length === 0) {\n      if (unit === 'Year') {\n        isCont = true;\n      }\n      closetUnit = unit;\n      return this.getClosestUnit(unit, closetUnit, isCont);\n    } else {\n      return unit;\n    }\n  };\n  Timeline.prototype.checkCollectionsWidth = function (checkSameLevels) {\n    var zoomLevels = checkSameLevels;\n    var width = this.customTimelineSettings.timelineUnitSize;\n    var level;\n    var secondValue;\n    var firstValue;\n    var sortedZoomLevels = zoomLevels.sort(function (a, b) {\n      return a.timelineUnitSize < b.timelineUnitSize ? 1 : -1;\n    });\n    for (var i = 0; i < sortedZoomLevels.length; i++) {\n      firstValue = sortedZoomLevels[i];\n      if (i === sortedZoomLevels.length - 1) {\n        level = sortedZoomLevels[i].level;\n        break;\n      } else {\n        secondValue = sortedZoomLevels[i + 1];\n      }\n      if (width >= firstValue.timelineUnitSize) {\n        level = sortedZoomLevels[i].level;\n        break;\n      } else if (width < firstValue.timelineUnitSize && width > secondValue.timelineUnitSize) {\n        level = sortedZoomLevels[i + 1].level;\n        break;\n      }\n    }\n    return level;\n  };\n  /**\n   * To create timeline header template.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.updateTimelineHeaderHeight = function () {\n    if (this.parent.timelineModule.isSingleTier) {\n      addClass([this.parent.ganttChartModule.chartTimelineContainer], cls.timelineSingleHeaderOuterDiv);\n      if (this.parent.treeGrid.element) {\n        addClass(this.parent.treeGrid.element.querySelectorAll('.e-headercell'), cls.timelineSingleHeaderOuterDiv);\n        addClass(this.parent.treeGrid.element.querySelectorAll('.e-columnheader'), cls.timelineSingleHeaderOuterDiv);\n      }\n    } else {\n      removeClass([this.parent.ganttChartModule.chartTimelineContainer], cls.timelineSingleHeaderOuterDiv);\n      if (this.parent.treeGrid.element) {\n        removeClass(this.parent.treeGrid.element.querySelectorAll('.e-headercell'), cls.timelineSingleHeaderOuterDiv);\n        removeClass(this.parent.treeGrid.element.querySelectorAll('.e-columnheader'), cls.timelineSingleHeaderOuterDiv);\n      }\n    }\n    if (this.previousIsSingleTier !== this.isSingleTier) {\n      var toolbarHeight = 0;\n      if (!isNullOrUndefined(this.parent.toolbarModule) && !isNullOrUndefined(this.parent.toolbarModule.element)) {\n        toolbarHeight = this.parent.toolbarModule.element.offsetHeight;\n      }\n      this.parent.ganttChartModule.scrollObject.setHeight(this.parent.ganttHeight - this.parent.ganttChartModule.chartTimelineContainer.offsetHeight - toolbarHeight);\n      this.parent.treeGrid.height = this.parent.ganttHeight - toolbarHeight - this.parent.ganttChartModule.chartTimelineContainer.offsetHeight;\n    }\n  };\n  Timeline.prototype.dateByLeftValue = function (left, isMilestone, property) {\n    var pStartDate = new Date(this.parent.timelineModule.timelineStartDate.toString());\n    var milliSecondsPerPixel = 24 * 60 * 60 * 1000 / this.parent.perDayWidth;\n    pStartDate.setTime(pStartDate.getTime() + left * milliSecondsPerPixel);\n    /* To render the milestone in proper date while editing */\n    if (isMilestone && !isNullOrUndefined(property.predecessorsName) && property.predecessorsName !== '') {\n      pStartDate.setDate(pStartDate.getDate() - 1);\n      var dayEndTime = this.parent['getCurrentDayEndTime'](property.isAutoSchedule ? property.autoEndDate : property.endDate);\n      this.parent.dateValidationModule.setTime(dayEndTime, pStartDate);\n      pStartDate = this.parent.dateValidationModule.checkStartDate(pStartDate, property, true);\n    }\n    var tierMode = this.parent.timelineModule.bottomTier !== 'None' ? this.parent.timelineModule.topTier : this.parent.timelineModule.bottomTier;\n    if (tierMode !== 'Hour' && tierMode !== 'Minutes') {\n      if (this.parent.isInDst(new Date(this.parent.timelineModule.timelineStartDate.toString())) && !this.parent.isInDst(pStartDate)) {\n        pStartDate.setTime(pStartDate.getTime() + 60 * 60 * 1000);\n      } else if (!this.parent.isInDst(new Date(this.parent.timelineModule.timelineStartDate.toString())) && this.parent.isInDst(pStartDate)) {\n        pStartDate.setTime(pStartDate.getTime() - 60 * 60 * 1000);\n      }\n    }\n    return pStartDate;\n  };\n  /**\n   * To create timeline header template.\n   *\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.createTimelineSeries = function () {\n    var tr;\n    var td;\n    var div;\n    var table;\n    var thead;\n    var virtualTableDiv;\n    var virtualTrackDiv;\n    var loopCount = this.isSingleTier ? 1 : 2;\n    var tier = this.topTier === 'None' ? 'bottomTier' : 'topTier';\n    this.topTierCollection = [];\n    this.bottomTierCollection = [];\n    if (this.restrictRender === true) {\n      this.updateTimelineHeaderHeight();\n      this.wholeTimelineWidth = this.calculateWidthBetweenTwoDate(tier, this.parent.timelineModule.timelineStartDate, this.parent.timelineModule.timelineEndDate);\n    }\n    if (this.parent.enableTimelineVirtualization && this.wholeTimelineWidth > this.parent.element.offsetWidth * 3) {\n      for (var count = 0; count < loopCount; count++) {\n        table = createElement('table', {\n          className: cls.timelineHeaderTableContainer,\n          styles: 'display: block;'\n        });\n        table.setAttribute('role', 'none');\n        thead = createElement('thead', {\n          className: cls.timelineHeaderTableBody,\n          styles: 'display:block; border-collapse:collapse'\n        });\n        var trTemplate = this.createTimelineTemplate(tier);\n        tr = createElement('tr');\n        Array.from(trTemplate.childNodes).forEach(function (child) {\n          tr.appendChild(child);\n        });\n        td = createElement('td');\n        div = createElement('div', {\n          styles: 'width: 20px'\n        });\n        virtualTableDiv = createElement('div', {\n          className: cls.virtualTable\n        });\n        virtualTrackDiv = createElement('div', {\n          className: cls.virtualTrack\n        });\n        td.appendChild(div);\n        tr.appendChild(td);\n        virtualTableDiv.appendChild(tr);\n        thead.appendChild(virtualTableDiv);\n        thead.appendChild(virtualTrackDiv);\n        table.appendChild(thead);\n        this.parent.ganttChartModule.chartTimelineContainer.appendChild(table);\n        tier = 'bottomTier';\n        tr = null;\n        this.restrictRender = false;\n      }\n      if (this.parent.height === 'auto' || this.parent.timelineModule.isSingleTier) {\n        var timelineContainer = this.parent.element.getElementsByClassName('e-timeline-header-container')[0]['offsetHeight'];\n        this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n        if (!isNullOrUndefined(this.parent.element.getElementsByClassName('e-gridcontent')[0])) {\n          this.parent.treeGrid.element.getElementsByClassName('e-gridcontent')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n        }\n      }\n      this.timelineVirtualizationStyles();\n    } else {\n      for (var count = 0; count < loopCount; count++) {\n        table = createElement('table', {\n          className: cls.timelineHeaderTableContainer,\n          styles: 'display: block;'\n        });\n        table.setAttribute('role', 'none');\n        thead = createElement('thead', {\n          className: cls.timelineHeaderTableBody,\n          styles: 'display:block; border-collapse:collapse'\n        });\n        var trTemplate = this.createTimelineTemplate(tier);\n        tr = createElement('tr');\n        Array.from(trTemplate.childNodes).forEach(function (child) {\n          tr.appendChild(child);\n        });\n        td = createElement('td');\n        div = createElement('div', {\n          styles: 'width: 20px'\n        });\n        td.appendChild(div);\n        tr.appendChild(td);\n        thead.appendChild(tr);\n        table.appendChild(thead);\n        this.parent.ganttChartModule.chartTimelineContainer.appendChild(table);\n        tier = 'bottomTier';\n        tr = null;\n      }\n      this.wholeTimelineWidth = this.totalTimelineWidth;\n      if (this.parent.height === 'auto' || this.parent.timelineModule.isSingleTier) {\n        var timelineContainer = this.parent.element.getElementsByClassName('e-timeline-header-container')[0]['offsetHeight'];\n        this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n        if (!isNullOrUndefined(this.parent.element.getElementsByClassName('e-gridcontent')[0])) {\n          this.parent.treeGrid.element.getElementsByClassName('e-gridcontent')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n        }\n      }\n    }\n  };\n  Timeline.prototype.timelineVirtualizationStyles = function () {\n    var translateXValue = 0;\n    var translateYValue = 0;\n    var trackWidth = this.wholeTimelineWidth;\n    if (this.parent.enableTimelineVirtualization) {\n      //e-content styles updating\n      translateXValue = this.parent.enableTimelineVirtualization && !isNullOrUndefined(this.parent.ganttChartModule.scrollObject.element.scrollLeft) && this.parent.ganttChartModule.scrollObject.element.scrollLeft !== 0 ? this.parent.ganttChartModule.scrollObject.getTimelineLeft() : 0;\n      if (this.parent.enableRtl) {\n        translateXValue = -translateXValue;\n      }\n      var contentVirtualTable = this.parent.element.querySelectorAll('.e-chart-scroll-container')[0].querySelector('.e-virtualtable');\n      contentVirtualTable.style.transform = \"translate(\" + translateXValue + \"px, \" + translateYValue + \"px)\";\n      var contentVirtualTrack = this.parent.element.querySelectorAll('.e-chart-scroll-container')[0].querySelector('.e-virtualtrack');\n      contentVirtualTrack.style.position = 'relative';\n      contentVirtualTrack.style.width = trackWidth + 'px';\n      //timeline styles updating\n      if (this.parent.ganttChartModule.scrollObject['isSetScrollLeft']) {\n        var virtualTableStylesT = this.parent.element.querySelectorAll('.e-timeline-header-table-container')[0].querySelector('.e-virtualtable');\n        var virtualTableStylesB = this.parent.element.querySelectorAll('.e-timeline-header-table-container')[1].querySelector('.e-virtualtable');\n        virtualTableStylesT.style.transform = \"translate(\" + translateXValue + \"px, \" + translateYValue + \"px)\";\n        virtualTableStylesB.style.transform = \"translate(\" + translateXValue + \"px, \" + translateYValue + \"px)\";\n      }\n      var virtualTrackStylesT = this.parent.element.querySelectorAll('.e-timeline-header-table-container')[0].querySelector('.e-virtualtrack');\n      var virtualTrackStylesB = this.parent.element.querySelectorAll('.e-timeline-header-table-container')[1].querySelector('.e-virtualtrack');\n      virtualTrackStylesT.style.position = 'relative';\n      virtualTrackStylesB.style.position = 'relative';\n      virtualTrackStylesT.style.width = trackWidth + 'px';\n      virtualTrackStylesB.style.width = trackWidth + 'px';\n      //dependency viewer styles updating\n      var dependencyViewer = this.parent.connectorLineModule.svgObject;\n      dependencyViewer['style'].width = trackWidth + 'px';\n      // timeline header container width updating\n      var timelineHeader = this.parent.element.querySelector('.' + cls.timelineHeaderContainer);\n      timelineHeader['style'].width = 'calc(100% - ' + 17 + 'px)';\n      if (this.parent.timelineModule.isZooming || this.parent.timelineModule.isZoomToFit) {\n        this.parent.ganttChartModule.scrollElement.scrollLeft = 0;\n        this.parent.ganttChartModule.scrollObject.updateChartElementStyles();\n      }\n    }\n  };\n  /**\n   * To validate timeline tier count.\n   *\n   * @param {string} mode .\n   * @param {number} count .\n   * @param {string} tier .\n   * @returns {number} .\n   * @private\n   */\n  Timeline.prototype.validateCount = function (mode, count, tier) {\n    var tierCount = !isNullOrUndefined(count) && parseInt(count.toString(), 10) > 0 ? parseInt(count.toString(), 10) : 1;\n    var timeDifference = Math.abs(this.timelineRoundOffEndDate.getTime() - this.timelineStartDate.getTime());\n    var difference;\n    switch (mode) {\n      case 'Year':\n        difference = Math.round(timeDifference / (1000 * 3600 * 24) / (12 * 28));\n        tierCount = tierCount <= difference ? tierCount : difference > 0 ? difference : 1;\n        if (this.topTier !== 'None' && tier === 'bottomTier') {\n          tierCount = this.validateBottomTierCount(mode, tierCount);\n        }\n        break;\n      case 'Month':\n        difference = Math.round(timeDifference / (1000 * 3600 * 24) / 28);\n        tierCount = tierCount <= difference ? tierCount : difference > 0 ? difference + 1 : 1;\n        if (this.topTier !== 'None' && tier === 'bottomTier') {\n          tierCount = this.validateBottomTierCount(mode, tierCount);\n        }\n        break;\n      case 'Week':\n        difference = Math.round(timeDifference / (1000 * 3600 * 24) / 7);\n        tierCount = tierCount <= difference ? tierCount : difference > 0 ? difference : 1;\n        if (this.topTier !== 'None' && tier === 'bottomTier') {\n          tierCount = this.validateBottomTierCount(mode, tierCount);\n        }\n        break;\n      case 'Day':\n        difference = Math.round(timeDifference / (1000 * 3600 * 24));\n        tierCount = tierCount <= difference ? tierCount : difference > 0 ? difference : 1;\n        if (this.topTier !== 'None' && tier === 'bottomTier') {\n          tierCount = this.validateBottomTierCount(mode, tierCount);\n        }\n        break;\n      case 'Hour':\n        difference = Math.round(timeDifference / (1000 * 3600));\n        tierCount = tierCount <= difference ? tierCount : difference > 0 ? difference : 1;\n        if (this.topTier !== 'None' && tier === 'bottomTier') {\n          tierCount = this.validateBottomTierCount(mode, tierCount);\n        }\n        break;\n      case 'Minutes':\n        difference = Math.round(timeDifference / (1000 * 60));\n        tierCount = tierCount <= difference ? tierCount : difference > 0 ? difference : 1;\n        if (this.topTier !== 'None' && tier === 'bottomTier') {\n          tierCount = this.validateBottomTierCount(mode, tierCount);\n        }\n        break;\n    }\n    if (count !== tierCount && this.isZooming && this.parent.toolbarModule && (tier === 'bottomTier' || this.isSingleTier)) {\n      if (this.isZoomIn) {\n        this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin'], false);\n      } else {\n        this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomout'], false);\n      }\n    }\n    return tierCount;\n  };\n  /**\n   * To validate bottom tier count.\n   *\n   * @param {string} mode .\n   * @param {number} tierCount .\n   * @returns {number} .\n   * @private\n   */\n  Timeline.prototype.validateBottomTierCount = function (mode, tierCount) {\n    var count;\n    switch (mode) {\n      case 'Year':\n        count = tierCount <= this.customTimelineSettings.topTier.count ? tierCount : this.customTimelineSettings.topTier.count;\n        break;\n      case 'Month':\n        count = this.topTier === 'Year' ? tierCount <= this.customTimelineSettings.topTier.count * 12 ? tierCount : this.customTimelineSettings.topTier.count * 12 : tierCount <= this.customTimelineSettings.topTier.count ? tierCount : this.customTimelineSettings.topTier.count;\n        break;\n      case 'Week':\n        count = this.topTier === 'Year' ? tierCount <= this.customTimelineSettings.topTier.count * (12 * 4) ? tierCount : this.customTimelineSettings.topTier.count * (12 * 4) : this.topTier === 'Month' ? tierCount <= this.customTimelineSettings.topTier.count * 4 ? tierCount : this.customTimelineSettings.topTier.count * 4 : tierCount <= this.customTimelineSettings.topTier.count ? tierCount : this.customTimelineSettings.topTier.count;\n        break;\n      case 'Day':\n        count = this.topTier === 'Year' ? tierCount <= this.customTimelineSettings.topTier.count * (12 * 28) ? tierCount : this.customTimelineSettings.topTier.count * (12 * 28) : this.topTier === 'Month' ? tierCount <= this.customTimelineSettings.topTier.count * 28 ? tierCount : this.customTimelineSettings.topTier.count * 28 : this.topTier === 'Week' ? tierCount <= this.customTimelineSettings.topTier.count * 7 ? tierCount : this.customTimelineSettings.topTier.count * 7 : tierCount <= this.customTimelineSettings.topTier.count ? tierCount : this.customTimelineSettings.topTier.count;\n        break;\n      case 'Hour':\n        count = this.topTier === 'Year' ? tierCount <= this.customTimelineSettings.topTier.count * (12 * 28 * 24) ? tierCount : this.customTimelineSettings.topTier.count * (12 * 28 * 24) : this.topTier === 'Month' ? tierCount <= this.customTimelineSettings.topTier.count * (28 * 24) ? tierCount : this.customTimelineSettings.topTier.count * (28 * 24) : this.topTier === 'Week' ? tierCount <= this.customTimelineSettings.topTier.count * 7 * 24 ? tierCount : this.customTimelineSettings.topTier.count * 7 * 24 : this.topTier === 'Day' ? tierCount <= this.customTimelineSettings.topTier.count * 24 ? tierCount : this.customTimelineSettings.topTier.count * 24 : tierCount <= this.customTimelineSettings.topTier.count ? tierCount : this.customTimelineSettings.topTier.count;\n        break;\n      case 'Minutes':\n        count = this.topTier === 'Year' ? tierCount <= this.customTimelineSettings.topTier.count * (12 * 28 * 24 * 60) ? tierCount : this.customTimelineSettings.topTier.count * (12 * 28 * 24 * 60) : this.topTier === 'Month' ? tierCount <= this.customTimelineSettings.topTier.count * (28 * 24 * 60) ? tierCount : this.customTimelineSettings.topTier.count * (28 * 24 * 60) : this.topTier === 'Week' ? tierCount <= this.customTimelineSettings.topTier.count * 7 * 24 * 60 ? tierCount : this.customTimelineSettings.topTier.count * 7 * 24 * 60 : this.topTier === 'Day' ? tierCount <= this.customTimelineSettings.topTier.count * 24 * 60 ? tierCount : this.customTimelineSettings.topTier.count * 24 * 60 : this.topTier === 'Hour' ? tierCount <= this.customTimelineSettings.topTier.count * 60 ? tierCount : this.customTimelineSettings.topTier.count * 60 : tierCount <= this.customTimelineSettings.topTier.count ? tierCount : this.customTimelineSettings.topTier.count;\n        break;\n    }\n    return count;\n  };\n  /**\n   * To validate timeline tier format.\n   *\n   * @param {string} mode .\n   * @param {string} format .\n   * @returns {string} .\n   * @private\n   */\n  Timeline.prototype.validateFormat = function (mode, format) {\n    var tierFormat;\n    switch (mode) {\n      case 'Week':\n        tierFormat = !format ? 'MMM dd, yyyy' : format;\n        break;\n      case 'Day':\n      case 'None':\n        tierFormat = !format ? '' : format;\n        break;\n      case 'Hour':\n        tierFormat = !format ? 'H' : format;\n        break;\n      case 'Month':\n        tierFormat = !format ? 'MMM yyyy' : format;\n        break;\n      case 'Year':\n        tierFormat = !format ? 'yyyy' : format;\n        break;\n      case 'Minutes':\n        tierFormat = !format ? 'm' : format;\n        break;\n    }\n    return tierFormat;\n  };\n  /**\n   * To perform extend operation.\n   *\n   * @param {object} cloneObj .\n   * @param {string[]} propertyCollection .\n   * @param {object} innerProperty .\n   * @returns {object} .\n   * @private\n   */\n  Timeline.prototype.extendFunction = function (cloneObj, propertyCollection, innerProperty) {\n    var _this = this;\n    var tempObj = {};\n    for (var index = 0; index < propertyCollection.length; index++) {\n      tempObj[propertyCollection[index]] = cloneObj[propertyCollection[index]];\n    }\n    if (innerProperty) {\n      Object.keys(innerProperty).forEach(function (key) {\n        tempObj[key] = _this.extendFunction(cloneObj[key], innerProperty[key], null);\n      });\n    }\n    return tempObj;\n  };\n  /**\n   * To format date.\n   *\n   * @param {string} dayFormat .\n   * @param {Date} data .\n   * @returns {string} .\n   * @private\n   */\n  Timeline.prototype.formatDateHeader = function (dayFormat, data) {\n    var date = new Date(data.getTime());\n    var dateString;\n    if (dayFormat === '') {\n      dateString = this.parent.globalize.formatDate(date, {\n        format: 'E'\n      });\n      if (this.parent.locale === 'zh') {\n        dateString = dateString.slice(1);\n      } else {\n        if (this.parent.locale === 'ar') {\n          var dateStringValue = dateString;\n          dateString = dateStringValue;\n        } else {\n          dateString = dateString.slice(0, 1);\n        }\n      }\n    } else {\n      dateString = this.parent.globalize.formatDate(date, {\n        format: dayFormat\n      });\n    }\n    return dateString;\n  };\n  /**\n   * Custom Formatting.\n   *\n   * @param {Date} date .\n   * @param {string} format .\n   * @param {string} tier .\n   * @param {string} mode .\n   * @param {string | ITimelineFormatter} formatter .\n   * @returns {string} .\n   * @private\n   */\n  Timeline.prototype.customFormat = function (date, format, tier, mode, formatter) {\n    formatter = typeof formatter === 'string' ? getValue(formatter, window) : formatter;\n    return formatter(date, format, tier, mode);\n  };\n  /**\n   * To create timeline template .\n   *\n   * @param {string} tier .\n   * @returns {string} .\n   * @private\n   */\n  Timeline.prototype.createTimelineTemplate = function (tier) {\n    var isFirstCell = false;\n    var parent = this.parent;\n    var parentTh = createElement('th');\n    var parentTr;\n    var mode = tier === 'topTier' ? parent.timelineModule.customTimelineSettings.topTier.unit : parent.timelineModule.customTimelineSettings.bottomTier.unit;\n    var count = tier === 'topTier' ? parent.timelineModule.customTimelineSettings.topTier.count : parent.timelineModule.customTimelineSettings.bottomTier.count;\n    var increment;\n    var newTime;\n    var leftValueForStartDate = this.parent.enableTimelineVirtualization && this.parent.ganttChartModule.scrollObject.element.scrollLeft !== 0 ? this.parent.ganttChartModule.scrollObject.getTimelineLeft() : null;\n    var startDate = this.parent.enableTimelineVirtualization && !isNullOrUndefined(leftValueForStartDate) ? new Date(this.dateByLeftValue(leftValueForStartDate).toString()) : new Date(this.parent.timelineModule.timelineStartDate.toString());\n    var endDate = new Date(this.timelineRoundOffEndDate.toString());\n    var scheduleDateCollection = [];\n    var width = 0;\n    var WidthForVirtualTable = this.parent.element.offsetWidth * 3;\n    do {\n      // PDf export collection\n      var timelineCell = {};\n      timelineCell.startDate = new Date(startDate.getTime());\n      if ((mode === 'Month' || mode === 'Hour') && tier === 'bottomTier' && count !== 1 && scheduleDateCollection.length === 0) {\n        isFirstCell = true;\n      }\n      parentTr = this.getHeaterTemplateString(new Date(startDate.toString()), mode, tier, false, count, timelineCell, isFirstCell);\n      scheduleDateCollection.push(new Date(startDate.toString()));\n      if (isFirstCell && mode === 'Month') {\n        newTime = this.calculateQuarterEndDate(startDate, count).getTime();\n      } else {\n        increment = Math.abs(this.getIncrement(startDate, count, mode));\n        newTime = startDate.getTime() + increment;\n      }\n      var dubStartDate = new Date(startDate.getTime());\n      isFirstCell = false;\n      startDate.setTime(newTime);\n      var dubStartHour = dubStartDate.getHours();\n      var startHour = startDate.getHours();\n      var difference = startHour - dubStartHour;\n      if (difference !== count && difference > 1) {\n        if (!this.parent.isInDst(startDate) && this.parent.isInDst(dubStartDate) || this.parent.isInDst(startDate) && !this.parent.isInDst(dubStartDate)) {\n          if (startDate.getTimezoneOffset() > dubStartDate.getTimezoneOffset()) {\n            startDate.setTime(startDate.getTime() - 1000 * 60 * 60 * (difference - count));\n          }\n        }\n      }\n      if (startDate.getHours() === 5 && count === 2 && tier === 'bottomTier' && parent.timelineModule.customTimelineSettings.bottomTier.unit === 'Hour') {\n        startDate.setTime(startDate.getTime() - 1000 * 60 * 60);\n      }\n      if (startDate.getHours() === 8 && count === 12 && tier === 'bottomTier' && this.parent.timelineModule.customTimelineSettings.bottomTier.unit === 'Hour') {\n        startDate.setTime(startDate.getTime() - 1000 * 60 * 60 * 8);\n      }\n      if (startDate >= endDate) {\n        /* eslint-disable-next-line */\n        parentTr = this.getHeaterTemplateString(scheduleDateCollection[scheduleDateCollection.length - 1], mode, tier, true, count, timelineCell);\n      }\n      parentTh.appendChild(parentTr);\n      var tierCollection = tier === 'topTier' ? this.topTierCollection : this.bottomTierCollection;\n      timelineCell.endDate = new Date(startDate.getTime());\n      if (this.parent.pdfExportModule && this.parent.pdfExportModule.isPdfExport && this.parent.enableTimelineVirtualization) {\n        if (tier === 'topTier') {\n          this.pdfExportTopTierCollection.push(timelineCell);\n        } else {\n          this.pdfExportBottomTierCollection.push(timelineCell);\n        }\n      } else {\n        tierCollection.push(timelineCell);\n      }\n      width += timelineCell.width;\n      this.weekendEndDate = timelineCell.endDate >= endDate ? endDate : timelineCell.endDate;\n    } while (this.parent.enableTimelineVirtualization && (!this.parent.pdfExportModule || this.parent.pdfExportModule && !this.parent.pdfExportModule.isPdfExport) ? width < WidthForVirtualTable && startDate < endDate : startDate < endDate);\n    return parentTh;\n  };\n  Timeline.prototype.updateTimelineAfterZooming = function (endDate, resized) {\n    var timeDiff;\n    var perDayWidth;\n    var totWidth;\n    var contentElement = document.getElementsByClassName('e-chart-scroll-container e-content')[0];\n    if (!isNullOrUndefined(contentElement)) {\n      var contentWidth = contentElement['offsetWidth'];\n      var contentHeight = contentElement['offsetHeight'];\n      var scrollHeight = document.getElementsByClassName('e-chart-rows-container')[0]['offsetHeight'];\n      timeDiff = Math.abs(this.timelineStartDate.getTime() - endDate.getTime());\n      timeDiff = timeDiff / (1000 * 3600 * 24);\n      if (this.bottomTier === 'None') {\n        perDayWidth = this.getPerDayWidth(this.customTimelineSettings.timelineUnitSize, this.customTimelineSettings.topTier.count, this.topTier);\n      } else {\n        perDayWidth = this.getPerDayWidth(this.customTimelineSettings.timelineUnitSize, this.customTimelineSettings.bottomTier.count, this.bottomTier);\n      }\n      if (contentHeight < scrollHeight) {\n        totWidth = perDayWidth * timeDiff + 17;\n      } else {\n        totWidth = perDayWidth * timeDiff;\n      }\n      if (contentWidth >= totWidth) {\n        var widthDiff = contentWidth - totWidth;\n        widthDiff = Math.round(widthDiff / perDayWidth);\n        endDate.setDate(endDate.getDate() + widthDiff);\n        this.parent.timelineModule.timelineEndDate = endDate;\n        if (resized) {\n          this.parent.updateProjectDates(this.timelineStartDate, this.timelineEndDate, this.parent.isTimelineRoundOff);\n        }\n      }\n    }\n  };\n  Timeline.prototype.getTimelineRoundOffEndDate = function (date) {\n    var tierMode = this.topTier === 'None' ? this.bottomTier : this.topTier;\n    var endDate = new Date(date.toString());\n    if (this.parent.isTimelineRoundOff) {\n      if (tierMode === 'Hour') {\n        endDate.setMinutes(60);\n      } else if (tierMode === 'Minutes') {\n        endDate.setSeconds(60);\n      } else {\n        endDate.setHours(24, 0, 0, 0);\n      }\n    }\n    if (isNullOrUndefined(this.parent.projectEndDate)) {\n      this.updateTimelineAfterZooming(endDate, false);\n    }\n    return endDate;\n  };\n  /**\n   *\n   * @param {Date} startDate .\n   * @param {number} count .\n   * @param {string} mode .\n   * @param {boolean} isFirstCell .\n   * @returns {number} .\n   * @private\n   */\n  Timeline.prototype.getIncrement = function (startDate, count, mode, isFirstCell) {\n    var firstDay = new Date(startDate.getTime());\n    var lastDay = new Date(startDate.getTime());\n    var increment;\n    switch (mode) {\n      case 'Year':\n        firstDay = startDate;\n        lastDay = new Date(startDate.getFullYear() + (count - 1), 11, 31);\n        increment = lastDay.getTime() - firstDay.getTime() + 1000 * 60 * 60 * 24;\n        break;\n      case 'Month':\n        firstDay = startDate;\n        lastDay = new Date(startDate.getFullYear(), startDate.getMonth() + count, 1);\n        increment = lastDay.getTime() - firstDay.getTime();\n        break;\n      case 'Week':\n        {\n          var dayIndex = this.parent.timelineModule.customTimelineSettings.weekStartDay;\n          var dayIntervel = startDate.getDay() < dayIndex ? dayIndex - startDate.getDay() : 6 - startDate.getDay() + dayIndex;\n          count = dayIntervel > 0 ? count - 1 : 0;\n          lastDay.setHours(24, 0, 0, 0);\n          dayIntervel = startDate.getDay() < dayIndex ? dayIntervel > 0 ? dayIntervel - 1 : dayIntervel : dayIntervel;\n          lastDay.setDate(lastDay.getDate() + (dayIntervel + 7 * count));\n          increment = lastDay.getTime() - firstDay.getTime();\n          break;\n        }\n      case 'Day':\n        lastDay.setHours(24, 0, 0, 0);\n        increment = lastDay.getTime() - firstDay.getTime() + 1000 * 60 * 60 * 24 * (count - 1);\n        increment = this.checkDate(firstDay, lastDay, increment, count, mode);\n        break;\n      case 'Hour':\n        {\n          lastDay.setMinutes(60);\n          lastDay.setSeconds(0);\n          increment = lastDay.getTime() - firstDay.getTime() + 1000 * 60 * 60 * (count - 1);\n          var date = new Date(lastDay);\n          date.setTime(date.getTime() + increment);\n          if (isFirstCell && count === 12) {\n            if (firstDay.getHours() !== 0) {\n              date.setHours(0, 0, 0, 0);\n              increment = date.getTime() - firstDay.getTime();\n            }\n          }\n          if (isFirstCell && count === 6) {\n            if (firstDay.getHours() !== 0) {\n              date.setHours(6, 0, 0, 0);\n              increment = date.getTime() - firstDay.getTime();\n            }\n          }\n          increment = this.checkDate(firstDay, lastDay, increment, count, mode);\n          break;\n        }\n      case 'Minutes':\n        lastDay.setSeconds(60);\n        increment = lastDay.getTime() - firstDay.getTime() + 1000 * 60 * (count - 1);\n        increment = this.checkDate(firstDay, lastDay, increment, count, mode);\n        break;\n    }\n    return increment;\n  };\n  Timeline.prototype.checkDate = function (firstDay, lastDay, increment, count, mode) {\n    var date = new Date(firstDay.getTime());\n    date.setTime(date.getTime() + increment);\n    if (mode === 'Day' && count !== 1 && (date.getTime() - lastDay.getTime()) / (1000 * 60 * 60 * 24) !== count && firstDay.getTimezoneOffset() !== date.getTimezoneOffset()) {\n      var diffCount = count - (date.getTime() - lastDay.getTime()) / (1000 * 60 * 60 * 24);\n      if (!this.parent.isInDst(date)) {\n        increment += 1000 * 60 * 60 * diffCount;\n      } else if (this.parent.isInDst(date) && count !== 2) {\n        increment -= 1000 * 60 * 60 * diffCount;\n      }\n    } else if (mode === 'Hour' && count !== 1 && (date.getTime() - lastDay.getTime()) / (1000 * 60 * 60) !== count && firstDay.getTimezoneOffset() !== date.getTimezoneOffset()) {\n      var diffCount = count - (date.getTime() - lastDay.getTime()) / (1000 * 60 * 60);\n      if (!this.parent.isInDst(date)) {\n        increment += 1000 * 60 * 60 * diffCount;\n      } else if (this.parent.isInDst(date) && count !== 2) {\n        increment -= 1000 * 60 * 60 * diffCount;\n      }\n    } else if (mode === 'Minutes' && count !== 1 && (date.getTime() - lastDay.getTime()) / (1000 * 60) !== count && firstDay.getTimezoneOffset() !== date.getTimezoneOffset()) {\n      var diffCount = count - (date.getTime() - lastDay.getTime()) / (1000 * 60);\n      if (!this.parent.isInDst(date)) {\n        increment += 1000 * 60 * 60 * diffCount;\n      } else if (this.parent.isInDst(date) && count !== 2 && count !== 15) {\n        increment -= 1000 * 60 * 60 * diffCount;\n      }\n    }\n    return increment;\n  };\n  /**\n   * Method to find header cell was weekend or not\n   *\n   * @param {string} mode .\n   * @param {string} tier .\n   * @param {Date} day .\n   * @returns {boolean} .\n   */\n  Timeline.prototype.isWeekendHeaderCell = function (mode, tier, day) {\n    return (mode === 'Day' || mode === 'Hour' || mode === 'Minutes') && (this.customTimelineSettings[tier].count === 1 || mode === 'Hour' || mode === 'Minutes') && this.parent.nonWorkingDayIndex.indexOf(day.getDay()) !== -1;\n  };\n  Timeline.prototype.calculateQuarterEndDate = function (date, count) {\n    var month = date.getMonth();\n    if (count === 3) {\n      if (month >= 0 && month <= 2) {\n        return new Date(date.getFullYear(), 3, 1);\n      } else if (month >= 3 && month <= 5) {\n        return new Date(date.getFullYear(), 6, 1);\n      } else if (month >= 6 && month <= 8) {\n        return new Date(date.getFullYear(), 9, 1);\n      } else {\n        return new Date(date.getFullYear() + 1, 0, 1);\n      }\n    } else {\n      if (month >= 0 && month <= 5) {\n        return new Date(date.getFullYear(), 6, 1);\n      } else {\n        return new Date(date.getFullYear() + 1, 0, 1);\n      }\n    }\n  };\n  Timeline.prototype.calculateTotalHours = function (mode, count) {\n    var totalHour = 0;\n    switch (mode) {\n      case 'Hour':\n        totalHour = 1 * count;\n        break;\n      case 'Day':\n        totalHour = 24 * count;\n        break;\n      case 'Week':\n        totalHour = 7 * 24 * count;\n        break;\n      case 'Minutes':\n        totalHour = count / 60;\n        break;\n    }\n    return totalHour;\n  };\n  /**\n   * To construct template string.\n   *\n   * @param {Date} scheduleWeeks .\n   * @param {string} mode .\n   * @param {string} tier .\n   * @param {boolean} isLast .\n   * @param {number} count .\n   * @param {TimelineFormat} timelineCell .\n   * @returns {string} .\n   * @private\n   */\n  /* eslint-disable-next-line */\n  Timeline.prototype.getHeaterTemplateString = function (scheduleWeeks, mode, tier, isLast, count, timelineCell, isFirstCell) {\n    var parentTr = '';\n    var template;\n    var timelineTemplate = null;\n    if (!isNullOrUndefined(this.parent.timelineTemplate)) {\n      timelineTemplate = this.parent.chartRowsModule.templateCompiler(this.parent.timelineTemplate);\n    }\n    var format = tier === 'topTier' ? this.parent.timelineModule.customTimelineSettings.topTier.format : this.parent.timelineModule.customTimelineSettings.bottomTier.format;\n    var formatter = tier === 'topTier' ? this.parent.timelineModule.customTimelineSettings.topTier.formatter : this.parent.timelineModule.customTimelineSettings.bottomTier.formatter;\n    var thWidth;\n    var date = isNullOrUndefined(formatter) ? this.parent.globalize.formatDate(scheduleWeeks, {\n      format: this.parent.getDateFormat()\n    }) : this.customFormat(scheduleWeeks, format, tier, mode, formatter);\n    thWidth = Math.abs(this.getIncrement(scheduleWeeks, count, mode, isFirstCell) / (1000 * 60 * 60 * 24) * this.parent.perDayWidth);\n    var incrementValue = this.getIncrement(scheduleWeeks, count, mode);\n    var newDate = new Date(scheduleWeeks.getTime() + incrementValue);\n    var dubNewDate = new Date(scheduleWeeks.getTime() + 60 * 60 * 1000 * count);\n    var newDateOffset = newDate.getTime();\n    var dubNewDateOffset = dubNewDate.getTime();\n    var timelineStartDate = this.parent.timelineModule.timelineStartDate;\n    var timelineStartTime = timelineStartDate.getTime();\n    var hasDST = this.parent.dataOperation.hasDSTTransition(scheduleWeeks.getFullYear());\n    var timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    var transitions;\n    var dstStartTime;\n    if (hasDST) {\n      transitions = this.parent.dataOperation.getDSTTransitions(scheduleWeeks.getFullYear(), timeZone);\n      dstStartTime = transitions['dstStart'].getTime();\n    }\n    if (!this.parent.isInDst(newDate) && this.parent.isInDst(scheduleWeeks) || this.parent.isInDst(newDate) && !this.parent.isInDst(scheduleWeeks) || hasDST && newDateOffset !== dubNewDateOffset && dubNewDateOffset > newDateOffset && timelineStartTime <= dstStartTime) {\n      var temp = void 0;\n      var totalHour = 0;\n      var incrementHour = incrementValue / (1000 * 60 * 60);\n      if (!this.parent.isInDst(newDate) && this.parent.isInDst(scheduleWeeks)) {\n        totalHour = this.calculateTotalHours(mode, count);\n        if (incrementHour !== totalHour && totalHour !== 0 && incrementHour > totalHour) {\n          temp = this.getIncrement(scheduleWeeks, count, mode) - 1000 * 60 * 60 * (incrementHour - totalHour);\n          thWidth = temp / (1000 * 60 * 60 * 24) * this.parent.perDayWidth;\n          if (thWidth === 0 && mode === 'Minutes') {\n            var perMinuteWidth = this.parent.perDayWidth / 1440;\n            thWidth = perMinuteWidth * count;\n          }\n        }\n      } else {\n        var zoomOrTimeline = this.parent.currentZoomingLevel ? this.parent.currentZoomingLevel : this.parent.timelineSettings;\n        var bottomTierSettings = zoomOrTimeline['bottomTier'] !== null ? zoomOrTimeline['bottomTier'] : zoomOrTimeline['topTier'];\n        var bottomTierCountIsOneAndUnitIsHour = bottomTierSettings['count'] === 1 && bottomTierSettings['unit'] === 'Hour';\n        totalHour = this.calculateTotalHours(mode, count);\n        if (incrementHour !== totalHour && incrementHour < totalHour && !(tier === 'topTier' && bottomTierCountIsOneAndUnitIsHour)) {\n          temp = this.getIncrement(scheduleWeeks, count, mode) + 1000 * 60 * 60;\n          thWidth = temp / (1000 * 60 * 60 * 24) * this.parent.perDayWidth;\n          if (thWidth === 0 && mode === 'Minutes') {\n            var perMinuteWidth = this.parent.perDayWidth / 1440;\n            thWidth = perMinuteWidth * count;\n          }\n        }\n      }\n    }\n    var cellWidth = thWidth;\n    thWidth = isLast || isFirstCell && mode !== 'Hour' ? isLast ? this.calculateWidthBetweenTwoDate(mode, scheduleWeeks, this.timelineRoundOffEndDate) : this.calculateWidthBetweenTwoDate(mode, scheduleWeeks, this.calculateQuarterEndDate(scheduleWeeks, count)) : thWidth;\n    var isWeekendCell = this.isWeekendHeaderCell(mode, tier, scheduleWeeks);\n    var textClassName = tier === 'topTier' ? ' e-gantt-top-cell-text' : '';\n    if (isFirstCell && scheduleWeeks.getHours() === 20 && count === 12 && tier === 'bottomTier' && this.parent.timelineModule.customTimelineSettings.bottomTier.unit === 'Hour') {\n      scheduleWeeks.setTime(scheduleWeeks.getTime() - 1000 * 60 * 60 * 20);\n    }\n    var value = isNullOrUndefined(formatter) ? this.formatDateHeader(format, scheduleWeeks) : this.customFormat(scheduleWeeks, format, tier, mode, formatter);\n    if (!isNullOrUndefined(timelineTemplate)) {\n      var args = {\n        date: date,\n        tier: tier,\n        value: value\n      };\n      template = timelineTemplate(extend({}, args), this.parent, 'TimelineTemplate', this.parent.chartRowsModule.getTemplateID('TimelineTemplate'), false, undefined, null, this.parent['root']);\n    }\n    var className = this.parent.timelineModule.isSingleTier ? cls.timelineSingleHeaderCell : cls.timelineTopHeaderCell;\n    var weekendClass = isWeekendCell ? ' ' + cls.weekendHeaderCell : '';\n    var th = createElement('th', {\n      className: \"\" + className + weekendClass,\n      styles: \"width:\" + thWidth + \"px;\" + (isWeekendCell && this.customTimelineSettings.weekendBackground ? 'background-color:' + this.customTimelineSettings.weekendBackground + ';' : '')\n    });\n    th.tabIndex = -1;\n    th.setAttribute('aria-label', this.parent.localeObj.getConstant('timelineCell') + \" \" + date);\n    var div = createElement('div', {\n      className: \"\" + cls.timelineHeaderCellLabel + textClassName,\n      styles: \"width:\" + (thWidth - 1) + \"px;\"\n    });\n    div.title = this.parent.timelineSettings.showTooltip ? date : '';\n    div.textContent = value;\n    if (this.parent.isReact && !isNullOrUndefined(template) && template.length > 0) {\n      template[0]['style'].width = '100%';\n      template[0]['style'].height = '100%';\n    }\n    if (!isNullOrUndefined(timelineTemplate) && !isNullOrUndefined(template) && template.length > 0) {\n      append(template, th);\n    } else {\n      th.append(div);\n    }\n    /* eslint-disable-next-line */\n    parentTr += th.outerHTML;\n    if ((this.isSingleTier || tier === 'topTier') && !isLast) {\n      this.totalTimelineWidth = this.totalTimelineWidth + thWidth;\n    } else if ((this.isSingleTier || tier === 'topTier') && isLast) {\n      this.totalTimelineWidth = this.totalTimelineWidth - cellWidth + thWidth;\n    }\n    // PDf export collection\n    timelineCell.value = value;\n    timelineCell.isWeekend = isWeekendCell;\n    timelineCell.width = thWidth;\n    return th;\n  };\n  /**\n   * To calculate last 'th' width.\n   *\n   * @param {string} mode .\n   * @param {Date} scheduleWeeks .\n   * @param {Date} endDate .\n   * @returns {number} .\n   * @private\n   */\n  Timeline.prototype.calculateWidthBetweenTwoDate = function (mode, scheduleWeeks, endDate) {\n    var sDate = new Date(scheduleWeeks.getTime());\n    var eDate = new Date(endDate.getTime());\n    this.parent.dateValidationModule['updateDateWithTimeZone'](sDate, eDate);\n    var timeDifference = eDate.getTime() - sDate.getTime();\n    var balanceDay = timeDifference / (1000 * 60 * 60 * 24);\n    return balanceDay * this.parent.perDayWidth;\n  };\n  /**\n   * To calculate timeline width.\n   *\n   * @returns {void} .\n   * @private\n   */\n  Timeline.prototype.timelineWidthCalculation = function () {\n    var timelineUnitSize = this.customTimelineSettings.timelineUnitSize;\n    var bottomTierCount = this.customTimelineSettings.bottomTier.count;\n    var topTierCount = this.customTimelineSettings.topTier.count;\n    this.bottomTierCellWidth = timelineUnitSize;\n    if (this.bottomTier === 'None') {\n      this.parent.perDayWidth = this.getPerDayWidth(timelineUnitSize, topTierCount, this.topTier);\n    } else {\n      this.parent.perDayWidth = this.getPerDayWidth(timelineUnitSize, bottomTierCount, this.bottomTier);\n    }\n    this.topTierCellWidth = this.bottomTier !== 'None' ? this.topTier === 'Week' ? this.parent.perDayWidth * 7 : this.topTier === 'Hour' ? this.parent.perDayWidth / 24 : this.topTier === 'Minutes' ? this.parent.perDayWidth / (24 * 60) : this.parent.perDayWidth : timelineUnitSize;\n    this.topTierCellWidth = this.isSingleTier ? this.topTierCellWidth : this.topTierCellWidth * topTierCount;\n  };\n  /**\n   * To validate per day width.\n   *\n   * @param {number} timelineUnitSize .\n   * @param {number} bottomTierCount .\n   * @param {string} mode .\n   * @returns {number} .\n   * @private\n   */\n  Timeline.prototype.getPerDayWidth = function (timelineUnitSize, bottomTierCount, mode) {\n    var perDayWidth;\n    switch (mode) {\n      case 'Year':\n        perDayWidth = timelineUnitSize / bottomTierCount / (12 * 28);\n        break;\n      case 'Month':\n        perDayWidth = timelineUnitSize / bottomTierCount / 28;\n        break;\n      case 'Week':\n        perDayWidth = timelineUnitSize / bottomTierCount / 7;\n        break;\n      case 'Day':\n        perDayWidth = timelineUnitSize / bottomTierCount;\n        break;\n      case 'Hour':\n        perDayWidth = 24 / bottomTierCount * timelineUnitSize;\n        break;\n      case 'Minutes':\n        perDayWidth = 60 * 24 / bottomTierCount * timelineUnitSize;\n        break;\n    }\n    return perDayWidth;\n  };\n  /**\n   * To validate project start date and end date.\n   *\n   * @returns {void} .\n   * @private\n   */\n  Timeline.prototype.roundOffDays = function () {\n    var startDate = this.parent.cloneProjectStartDate;\n    var endDate = this.parent.cloneProjectEndDate;\n    var tierMode = this.topTier === 'None' ? this.bottomTier : this.topTier;\n    if (this.parent.isTimelineRoundOff) {\n      if (tierMode === 'Year') {\n        startDate = new Date(startDate.getFullYear(), 0, 1);\n        endDate = new Date(endDate.getFullYear(), 11, 31);\n      } else if (tierMode === 'Month') {\n        startDate = new Date(startDate.getFullYear(), startDate.getMonth(), 1);\n        endDate = new Date(endDate.getFullYear(), endDate.getMonth() + 1, 0);\n      } else if (tierMode === 'Week') {\n        var dayIndex = !isNullOrUndefined(this.customTimelineSettings.weekStartDay) ? this.parent.timelineModule.customTimelineSettings.weekStartDay : 0;\n        var roundOffStartDate = startDate.getDay() < dayIndex ? startDate.getDate() - (7 - dayIndex + startDate.getDay()) : startDate.getDate() - startDate.getDay() + dayIndex;\n        startDate.setDate(roundOffStartDate);\n        var first = endDate.getDate() - endDate.getDay();\n        var last = first + 6 + dayIndex;\n        endDate.setDate(last);\n      }\n      if (tierMode === 'Hour') {\n        startDate.setMinutes(0);\n      } else if (tierMode === 'Minutes') {\n        startDate.setSeconds(0);\n      } else {\n        startDate.setHours(0, 0, 0, 0);\n      }\n    }\n    this.timelineStartDate = startDate;\n    this.timelineEndDate = endDate;\n    this.timelineRoundOffEndDate = this.getTimelineRoundOffEndDate(this.timelineEndDate);\n  };\n  /**\n   * To validate project start date and end date.\n   *\n   * @param {string} mode .\n   * @param {string} span .\n   * @param {Date} startDate .\n   * @param {Date} endDate .\n   * @returns {void} .\n   * @private\n   */\n  Timeline.prototype.updateScheduleDatesByToolBar = function (mode, span, startDate, endDate) {\n    if (mode === 'Year') {\n      if (span === 'prevTimeSpan') {\n        if (startDate.getMonth() === 0) {\n          startDate = new Date(startDate.getFullYear() - 1, 0, 1);\n        } else {\n          startDate = new Date(startDate.getFullYear(), 0, 1);\n        }\n      } else {\n        if (endDate.getMonth() === 11) {\n          endDate = new Date(endDate.getFullYear() + 1, 0, 1);\n        } else {\n          endDate = new Date(endDate.getFullYear(), 12, 1);\n        }\n      }\n    }\n    if (mode === 'Month') {\n      if (span === 'prevTimeSpan') {\n        if (startDate.getDate() === 1) {\n          startDate = new Date(startDate.getFullYear(), startDate.getMonth() - 1, 1);\n        } else {\n          startDate = new Date(startDate.getFullYear(), startDate.getMonth(), 1);\n        }\n      } else {\n        endDate = new Date(endDate.getFullYear(), endDate.getMonth() + 1, 1);\n      }\n    }\n    if (mode === 'Week') {\n      var dayIndex = this.parent.timelineModule.customTimelineSettings.weekStartDay;\n      var dayIntervel = void 0;\n      if (span === 'prevTimeSpan') {\n        dayIntervel = startDate.getDay() < dayIndex ? 7 - (dayIndex - startDate.getDay()) : startDate.getDay() - dayIndex;\n        startDate.setHours(0, 0, 0, 0);\n        if (dayIntervel === 0) {\n          startDate.setDate(startDate.getDate() - 7);\n        } else {\n          startDate.setDate(startDate.getDate() - dayIntervel);\n        }\n      } else {\n        dayIntervel = endDate.getDay() < dayIndex ? dayIndex - endDate.getDay() : 7 - endDate.getDay() + dayIndex;\n        endDate.setHours(0, 0, 0, 0);\n        if (dayIntervel === 0) {\n          endDate.setDate(endDate.getDate() + 6);\n        } else {\n          endDate.setDate(endDate.getDate() + dayIntervel);\n        }\n      }\n    }\n    if (mode === 'Day') {\n      if (span === 'prevTimeSpan') {\n        if (startDate.getHours() === 0) {\n          startDate.setTime(startDate.getTime() - 1000 * 60 * 60 * 24);\n        } else {\n          startDate.setHours(0);\n        }\n      } else {\n        if (endDate.getHours() === 0) {\n          endDate.setTime(endDate.getTime() + 1000 * 60 * 60 * 24);\n        } else {\n          endDate.setHours(24);\n        }\n      }\n    }\n    if (mode === 'Hour') {\n      if (span === 'prevTimeSpan') {\n        if (startDate.getMinutes() === 0) {\n          startDate.setTime(startDate.getTime() - 1000 * 60 * 60);\n        } else {\n          startDate.setMinutes(0);\n        }\n      } else {\n        if (endDate.getMinutes() === 0) {\n          endDate.setTime(endDate.getTime() + 1000 * 60 * 60);\n        } else {\n          endDate.setMinutes(60);\n        }\n      }\n    }\n    if (mode === 'Minutes') {\n      if (span === 'prevTimeSpan') {\n        if (startDate.getSeconds() === 0) {\n          startDate.setTime(startDate.getTime() - 1000 * 60);\n        } else {\n          startDate.setSeconds(0);\n        }\n      } else {\n        if (endDate.getSeconds() === 0) {\n          endDate.setTime(endDate.getTime() + 1000 * 60);\n        } else {\n          endDate.setSeconds(60);\n        }\n      }\n    }\n    this.parent.cloneProjectStartDate = startDate;\n    this.parent.cloneProjectEndDate = endDate;\n  };\n  /**\n   * To validate project start date and end date.\n   *\n   * @param {IGanttData[]} tempArray .\n   * @param {string} action .\n   * @returns {void} .\n   * @private\n   */\n  Timeline.prototype.updateTimeLineOnEditing = function (tempArray, action) {\n    if (tempArray[0].length >= 1) {\n      for (var i = 0; i < tempArray.length; i++) {\n        var temp = tempArray[parseInt(i.toString(), 10)];\n        var filteredStartDateRecord = temp.filter(function (pdc) {\n          return !isNullOrUndefined(pdc.ganttProperties.startDate);\n        });\n        var filteredEndDateRecord = temp.filter(function (pdc) {\n          return !isNullOrUndefined(pdc.ganttProperties.endDate);\n        });\n        var minStartDate = filteredStartDateRecord.length > 0 ? new Date(DataUtil.aggregates.min(filteredStartDateRecord, 'ganttProperties.startDate')) : null;\n        var minEndDate = filteredStartDateRecord.length > 0 ? new Date(DataUtil.aggregates.min(filteredEndDateRecord, 'ganttProperties.endDate')) : null;\n        var maxEndDate = filteredEndDateRecord.length > 0 ? new Date(DataUtil.aggregates.max(filteredEndDateRecord, 'ganttProperties.endDate')) : null;\n        var validStartDate = new Date(this.parent.dataOperation.checkStartDate(this.timelineStartDate).getTime());\n        var validEndDate = new Date(this.parent.dataOperation.checkEndDate(this.timelineEndDate).getTime());\n        var maxStartLeft = isNullOrUndefined(minStartDate) ? null : this.parent.dataOperation.getTaskLeft(minStartDate, false);\n        var maxEndLeft = isNullOrUndefined(maxEndDate) ? null : this.parent.dataOperation.getTaskLeft(maxEndDate, false);\n        var validStartLeft = this.parent.dataOperation.getTaskLeft(validStartDate, false);\n        var validEndLeft = this.parent.dataOperation.getTaskLeft(validEndDate, false);\n        var isChanged = void 0;\n        var taskbarModule = this.parent.editModule.taskbarEditModule;\n        var startDate = filteredStartDateRecord.length > 0 ? new Date(DataUtil.aggregates.min(filteredStartDateRecord, 'ganttProperties.startDate')).setHours(0, 0, 0, 0) : null;\n        var timelineStartDate = new Date(this.timelineStartDate.getTime()).setHours(0, 0, 0, 0);\n        if (!isNullOrUndefined(maxStartLeft) && !isNullOrUndefined(taskbarModule) && (taskbarModule.taskBarEditAction && taskbarModule.taskBarEditAction !== 'RightResizing' || isNullOrUndefined(taskbarModule.taskBarEditAction)) && startDate <= timelineStartDate && (maxStartLeft < this.bottomTierCellWidth || maxStartLeft <= validStartLeft)) {\n          isChanged = 'prevTimeSpan';\n          minStartDate = minStartDate > this.timelineStartDate ? this.timelineStartDate : minStartDate;\n        } else {\n          minStartDate = this.timelineStartDate;\n        }\n        if (!isNullOrUndefined(maxEndLeft) && maxEndLeft >= (this.parent.enableTimelineVirtualization ? this.wholeTimelineWidth : this.totalTimelineWidth) - this.bottomTierCellWidth && maxEndLeft > validEndLeft) {\n          isChanged = isChanged === 'prevTimeSpan' ? 'both' : 'nextTimeSpan';\n          maxEndDate = maxEndDate < this.timelineEndDate ? this.timelineEndDate : maxEndDate;\n        } else {\n          maxEndDate = this.timelineEndDate;\n        }\n        if (isChanged) {\n          this.performTimeSpanAction(isChanged, action, minStartDate, maxEndDate);\n        } else if (!isNullOrUndefined(temp[0].ganttProperties.segments)) {\n          this.parent.dataOperation.updateWidthLeft(temp[0]);\n        }\n        if (!isNullOrUndefined(minStartDate) && !isNullOrUndefined(minEndDate) && minEndDate <= minStartDate && (action === 'CellEditing' || action === 'DialogEditing') && this.parent.allowUnscheduledTasks) {\n          minStartDate = new Date(Math.min(minStartDate.getTime(), minEndDate.getTime()));\n          minStartDate = new Date(Math.min(minStartDate.getTime(), this.timelineStartDate.getTime()));\n          this.performTimeSpanAction('prevTimeSpan', action, minStartDate, maxEndDate);\n        } else if (isNullOrUndefined(minEndDate) && minEndDate <= minStartDate && (action === 'CellEditing' || action === 'DialogEditing') && this.parent.allowUnscheduledTasks && tempArray[0].length === 1 && !isNullOrUndefined(tempArray[0][0].ganttProperties.endDate)) {\n          minStartDate = new Date(Math.min(tempArray[0][0].ganttProperties.endDate.getTime(), minStartDate.getTime()));\n          this.performTimeSpanAction('prevTimeSpan', action, minStartDate, maxEndDate);\n        }\n        break;\n      }\n    }\n  };\n  /**\n   * To validate project start date and end date on editing action\n   *\n   * @param {string} type .\n   * @param {string} isFrom .\n   * @param {Date} startDate .\n   * @param {Date} endDate .\n   * @param {string} mode .\n   * @returns {void} .\n   * @private\n   */\n  Timeline.prototype.performTimeSpanAction = function (type, isFrom, startDate, endDate, mode) {\n    mode = !isNullOrUndefined(mode) ? mode : this.parent.timelineModule.topTier === 'None' ? this.parent.timelineModule.bottomTier : this.parent.timelineModule.topTier;\n    var projectStartDate = new Date(this.parent.cloneProjectStartDate.getTime());\n    var projectEndDate = new Date(this.parent.cloneProjectEndDate.getTime());\n    if (isFrom !== 'publicMethod' && type === 'both') {\n      this.updateScheduleDatesByToolBar(mode, 'prevTimeSpan', startDate, endDate);\n      this.updateScheduleDatesByToolBar(mode, 'nextTimeSpan', new Date(this.parent.cloneProjectStartDate.getTime()), endDate);\n    } else {\n      this.updateScheduleDatesByToolBar(mode, type, startDate, endDate);\n    }\n    var args = this.timeSpanActionEvent('actionBegin', type, isFrom);\n    if (!args.cancel) {\n      this.restrictRender = true;\n      this.performedTimeSpanAction = true;\n      var previousScrollLeft = this.parent.ganttChartModule.scrollElement.scrollLeft;\n      this.parent.updateProjectDates(args.projectStartDate, args.ProjectEndDate, args.isTimelineRoundOff, isFrom);\n      if (type === 'prevTimeSpan' && isFrom === 'publicMethod') {\n        this.parent.ganttChartModule.updateScrollLeft(0);\n        this.parent.timelineModule.isZoomToFit = false;\n      } else if (type === 'nextTimeSpan' && isFrom === 'publicMethod') {\n        this.parent.ganttChartModule.updateScrollLeft(this.parent.enableTimelineVirtualization ? this.wholeTimelineWidth : this.totalTimelineWidth);\n        this.parent.timelineModule.isZoomToFit = false;\n      } else if (type === 'nextTimeSpan' && isFrom === 'TaskbarEditing') {\n        var currentScrollLeft = document.getElementsByClassName('e-chart-scroll-container e-content')[0].scrollLeft;\n        this.parent.element.querySelector('.e-timeline-header-container').scrollLeft = currentScrollLeft;\n        this.parent.timelineModule.isZoomToFit = false;\n      }\n      if (isFrom === 'TaskbarEditing' && this.parent.enableTimelineVirtualization && (this.wholeTimelineWidth > this.parent.element.offsetWidth * 3 || isNullOrUndefined(this.parent.projectStartDate) && isNullOrUndefined(this.parent.projectEndDate))) {\n        this.parent.ganttChartModule.scrollObject.setScrollLeft(previousScrollLeft);\n        this.parent.ganttChartModule.scrollObject.updateContent();\n      }\n      this.parent.timelineModule.timeSpanActionEvent('actionComplete', type, isFrom);\n    } else {\n      this.parent.cloneProjectStartDate = projectStartDate;\n      this.parent.cloneProjectEndDate = projectEndDate;\n    }\n  };\n  /**\n   * To validate project start date and end date.\n   *\n   * @param {string} eventType .\n   * @param {string} requestType .\n   * @param {string} isFrom .\n   * @returns {void}\n   * @private\n   */\n  Timeline.prototype.timeSpanActionEvent = function (eventType, requestType, isFrom) {\n    var args = {};\n    args.projectStartDate = new Date(this.parent.cloneProjectStartDate.getTime());\n    args.ProjectEndDate = new Date(this.parent.cloneProjectEndDate.getTime());\n    args.requestType = isFrom === 'publicMethod' ? requestType : isFrom === 'beforeAdd' ? 'TimelineRefreshOnAdd' : isFrom === 'TaskbarEditing' ? 'TimelineRefreshOnEdit' : requestType;\n    if (eventType === 'actionBegin') {\n      args.isTimelineRoundOff = this.parent.isTimelineRoundOff;\n      args.cancel = false;\n    }\n    args.action = 'TimescaleUpdate';\n    this.parent.trigger(eventType, args);\n    return args;\n  };\n  return Timeline;\n}();\nexport { Timeline };","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","createElement","isNullOrUndefined","getValue","addClass","removeClass","extend","append","cls","DataUtil","Timeline","ganttObj","isZoomIn","isZooming","isZoomToFit","topTierCollection","bottomTierCollection","pdfExportTopTierCollection","pdfExportBottomTierCollection","restrictRender","performedTimeSpanAction","isZoomedToFit","parent","initProperties","timelineStartDate","timelineEndDate","totalTimelineWidth","customTimelineSettings","isTimelineRoundOff","projectStartDate","enablePersistence","isLoad","timelineSettings","currentZoomingLevel","validateTimelineProp","roundOffDays","processTimelineProperty","timelineWidthCalculation","refreshTimeline","processTimelineUnit","dataOperation","calculateProjectDates","isFromOnPropertyChange","updateProjectDates","cloneProjectStartDate","cloneProjectEndDate","timelineContainer","element","getElementsByClassName","height","refreshTimelineByTimeSpan","pdfExportModule","isPdfExport","helper","exportProps","fitToWidthSettings","isFitToWidth","ganttChartModule","chartTimelineContainer","innerHTML","createTimelineSeries","updateChartByNewTimeline","chartRowsModule","refreshChartByTimeline","currentScrollLeft","scrollLeft","notify","processZooming","action","undoRedoModule","previousTimeline","dateValidationModule","zoomingProjectStartDate","zoomingProjectEndDate","checkCurrentZoomingLevel","currentLevel","level","foundLevel","zoomingLevels","find","tempLevel","toolbarModule","enableItems","controlId","findIndex","newTimeline","args","requestType","timeline","cancel","trigger","loadingIndicator","indicatorType","showMaskRow","showSpinner","changeTimelineSettings","_this","isSingleTier","topTier","unit","bottomTier","skipProperty","keys","forEach","property","value","assignValue","criticalModule","criticalPathModule","enableCriticalPath","criticalPathCollection","criticalConnectorLine","detailPredecessorCollection","predecessorCollectionTaskIds","hideMaskRow","hideSpinner","tier","enableTimelineVirtualization","wholeTimelineWidth","calculateWidthBetweenTwoDate","timelineModule","clientWidthDifference","Math","abs","clientWidth","querySelectorAll","querySelector","width","updateWidthAndHeight","processZoomToFit","Date","allowUnscheduledTasks","timeDifference","getTime","totalDays","chartWidth","chartElement","offsetWidth","perDayWidth","zoomingLevel","firstValue","secondValue","zoomingCollections","slice","sortedCollectons","sort","a","b","roundOffDateToZoom","numberOfCells","calculateNumberOfTimelineCells","scrollHeight","scrollElement","offsetHeight","contentHeight","chartBodyContent","emptySpace","timelineUnitSize","bottomTierCellWidthCalc","mode","zoomLevel","date","convertedMilliSeconds","count","daysInMonth","getFullYear","getMonth","getDate","daysInYear","isStartDate","tierMode","roundOffTime","setTime","sDate","eDate","numberOfDays","directProperty","innerProperty","tierUnits","extendFunction","indexOf","timelineViewMode","previousIsSingleTier","validateCount","format","validateFormat","weekStartDay","calculateZoomingLevelsPerDayWidth","collections","getPerDayWidth","getCurrentZoomingLevel","currentZoomCollection","checkSameCountLevels","getZoomingLevels","sameUnitLevels","filter","closestUnit_1","getClosestUnit","sortedUnitLevels","checkCollectionsWidth","closetUnit","isCont","bottomTierUnits","index","checkSameLevels","zoomLevels","sortedZoomLevels","updateTimelineHeaderHeight","timelineSingleHeaderOuterDiv","treeGrid","toolbarHeight","scrollObject","setHeight","ganttHeight","dateByLeftValue","left","isMilestone","pStartDate","toString","milliSecondsPerPixel","predecessorsName","setDate","dayEndTime","isAutoSchedule","autoEndDate","endDate","checkStartDate","isInDst","tr","td","div","table","thead","virtualTableDiv","virtualTrackDiv","loopCount","className","timelineHeaderTableContainer","styles","setAttribute","timelineHeaderTableBody","trTemplate","createTimelineTemplate","Array","from","childNodes","child","appendChild","virtualTable","virtualTrack","timelineVirtualizationStyles","translateXValue","translateYValue","trackWidth","getTimelineLeft","enableRtl","contentVirtualTable","style","transform","contentVirtualTrack","position","virtualTableStylesT","virtualTableStylesB","virtualTrackStylesT","virtualTrackStylesB","dependencyViewer","connectorLineModule","svgObject","timelineHeader","timelineHeaderContainer","updateChartElementStyles","tierCount","parseInt","timelineRoundOffEndDate","difference","round","validateBottomTierCount","tierFormat","cloneObj","propertyCollection","tempObj","key","formatDateHeader","dayFormat","data","dateString","globalize","formatDate","locale","dateStringValue","customFormat","formatter","window","isFirstCell","parentTh","parentTr","increment","newTime","leftValueForStartDate","startDate","scheduleDateCollection","WidthForVirtualTable","timelineCell","getHeaterTemplateString","push","calculateQuarterEndDate","getIncrement","dubStartDate","dubStartHour","getHours","startHour","getTimezoneOffset","tierCollection","weekendEndDate","updateTimelineAfterZooming","resized","timeDiff","totWidth","contentElement","document","contentWidth","widthDiff","getTimelineRoundOffEndDate","setMinutes","setSeconds","setHours","projectEndDate","firstDay","lastDay","dayIndex","dayIntervel","getDay","checkDate","diffCount","isWeekendHeaderCell","day","nonWorkingDayIndex","month","calculateTotalHours","totalHour","scheduleWeeks","isLast","template","timelineTemplate","templateCompiler","thWidth","getDateFormat","incrementValue","newDate","dubNewDate","newDateOffset","dubNewDateOffset","timelineStartTime","hasDST","hasDSTTransition","timeZone","Intl","DateTimeFormat","resolvedOptions","transitions","dstStartTime","getDSTTransitions","temp","incrementHour","perMinuteWidth","zoomOrTimeline","bottomTierSettings","bottomTierCountIsOneAndUnitIsHour","cellWidth","isWeekendCell","textClassName","getTemplateID","undefined","timelineSingleHeaderCell","timelineTopHeaderCell","weekendClass","weekendHeaderCell","th","weekendBackground","tabIndex","localeObj","getConstant","timelineHeaderCellLabel","title","showTooltip","textContent","isReact","outerHTML","isWeekend","balanceDay","bottomTierCount","topTierCount","bottomTierCellWidth","topTierCellWidth","roundOffStartDate","first","last","updateScheduleDatesByToolBar","span","getMinutes","getSeconds","updateTimeLineOnEditing","tempArray","filteredStartDateRecord","pdc","ganttProperties","filteredEndDateRecord","minStartDate","aggregates","min","minEndDate","maxEndDate","max","validStartDate","validEndDate","checkEndDate","maxStartLeft","getTaskLeft","maxEndLeft","validStartLeft","validEndLeft","isChanged","taskbarModule","editModule","taskbarEditModule","taskBarEditAction","performTimeSpanAction","segments","updateWidthLeft","type","isFrom","timeSpanActionEvent","previousScrollLeft","ProjectEndDate","updateScrollLeft","setScrollLeft","updateContent","eventType"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-gantt/src/gantt/renderer/timeline.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { createElement, isNullOrUndefined, getValue, addClass, removeClass, extend, append } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constants';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * Configures the `Timeline` of the gantt.\n */\nvar Timeline = /** @class */ (function () {\n    function Timeline(ganttObj) {\n        this.isZoomIn = false;\n        this.isZooming = false;\n        this.isZoomToFit = false;\n        this.topTierCollection = [];\n        this.bottomTierCollection = [];\n        this.pdfExportTopTierCollection = [];\n        this.pdfExportBottomTierCollection = [];\n        this.restrictRender = true;\n        this.performedTimeSpanAction = false;\n        this.isZoomedToFit = false;\n        this.parent = ganttObj;\n        this.initProperties();\n    }\n    /**\n     * To initialize the public property.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.initProperties = function () {\n        this.timelineStartDate = null;\n        this.timelineEndDate = null;\n        this.totalTimelineWidth = 0;\n        this.customTimelineSettings = null;\n        this.parent.isTimelineRoundOff = this.isZoomToFit ? false : isNullOrUndefined(this.parent.projectStartDate) ? true : false;\n        if (this.parent.enablePersistence && this.parent.isLoad) {\n            this.parent.timelineSettings = this.parent.currentZoomingLevel;\n        }\n    };\n    /**\n     * To render timeline header series.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.validateTimelineProp = function () {\n        this.roundOffDays();\n        this.processTimelineProperty();\n        this.timelineWidthCalculation();\n    };\n    /**\n     * Function used to refresh Gantt rows.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.refreshTimeline = function () {\n        this.initProperties();\n        this.processTimelineUnit();\n        this.parent.dataOperation.calculateProjectDates();\n        if (!this.parent.isFromOnPropertyChange) {\n            this.parent.updateProjectDates(this.parent.cloneProjectStartDate, this.parent.cloneProjectEndDate, this.parent.isTimelineRoundOff);\n        }\n        var timelineContainer = this.parent.element.getElementsByClassName('e-timeline-header-container')[0]['offsetHeight'];\n        this.parent.element.getElementsByClassName('e-gridcontent')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n        this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n    };\n    /**\n     * Function used to refresh Gantt rows.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.refreshTimelineByTimeSpan = function () {\n        this.validateTimelineProp();\n        if (!this.parent.pdfExportModule || (this.parent.pdfExportModule && !this.parent.pdfExportModule.isPdfExport) ||\n            (this.parent.pdfExportModule && this.parent.pdfExportModule.isPdfExport &&\n                this.parent.pdfExportModule.helper.exportProps &&\n                !this.parent.pdfExportModule.helper.exportProps.fitToWidthSettings.isFitToWidth)) {\n            this.parent.ganttChartModule.chartTimelineContainer.innerHTML = '';\n        }\n        this.createTimelineSeries();\n    };\n    /**\n     * Function used to refresh Gantt rows.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.updateChartByNewTimeline = function () {\n        this.parent.chartRowsModule.refreshChartByTimeline();\n        var currentScrollLeft = this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0].scrollLeft;\n        this.parent.element.getElementsByClassName('e-timeline-header-container')[0].scrollLeft = currentScrollLeft;\n        this.parent.notify('refreshDayMarkers', {});\n    };\n    /**\n     * Function used to perform Zoomin and Zoomout actions in Gantt control.\n     *\n     * @param {boolean} isZoomIn .\n     * @private\n     * @returns {void}\n     */\n    Timeline.prototype.processZooming = function (isZoomIn) {\n        this.isZoomToFit = false;\n        this.isZoomedToFit = false;\n        var action = isZoomIn ? 'ZoomIn' : 'ZoomOut';\n        if (this.parent.undoRedoModule && this.parent['isUndoRedoItemPresent'](action)) {\n            if (this.parent.undoRedoModule['redoEnabled']) {\n                this.parent.undoRedoModule['disableRedo']();\n            }\n            this.parent.undoRedoModule['createUndoCollection']();\n            var previousTimeline = {};\n            previousTimeline['action'] = action;\n            previousTimeline['previousZoomingLevel'] = extend({}, {}, this.parent.currentZoomingLevel, true);\n            this.parent.undoRedoModule['getUndoCollection'][this.parent.undoRedoModule['getUndoCollection'].length - 1] = previousTimeline;\n        }\n        if (!this.parent['isProjectDateUpdated']) {\n            this.parent.dateValidationModule.calculateProjectDates();\n        }\n        if (!isNullOrUndefined(this.parent.zoomingProjectStartDate)) {\n            this.parent.cloneProjectStartDate = this.parent.zoomingProjectStartDate;\n            this.parent.cloneProjectEndDate = this.parent.zoomingProjectEndDate;\n        }\n        this.parent.zoomingProjectStartDate = null;\n        this.parent.zoomingProjectEndDate = null;\n        var currentZoomingLevel = this.checkCurrentZoomingLevel();\n        this.isZoomIn = isZoomIn;\n        this.isZooming = true;\n        var currentLevel;\n        var level = isZoomIn ? currentZoomingLevel + 1 : currentZoomingLevel - 1;\n        var foundLevel = this.parent.zoomingLevels.find(function (tempLevel) { return tempLevel.level === level; });\n        if (foundLevel) {\n            currentLevel = level;\n        }\n        else {\n            currentLevel = currentZoomingLevel;\n        }\n        if (this.parent.toolbarModule) {\n            if (isZoomIn) {\n                if (currentLevel === this.parent.zoomingLevels[this.parent.zoomingLevels.length - 1].level) {\n                    this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin'], false); // disable toolbar items.\n                    this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomout'], true);\n                }\n                else {\n                    this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomout'], true); // disable toolbar items.\n                }\n            }\n            else {\n                if (currentLevel === this.parent.zoomingLevels[0].level) {\n                    this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomout'], false); // disable toolbar items.\n                    this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin'], true);\n                }\n                else {\n                    this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin'], true); // enable toolbar items.\n                }\n            }\n        }\n        currentLevel = this.parent.zoomingLevels.findIndex(function (tempLevel) {\n            return tempLevel.level === currentLevel;\n        });\n        var newTimeline = this.parent.zoomingLevels[currentLevel];\n        var args = {\n            requestType: isZoomIn ? 'beforeZoomIn' : 'beforeZoomOut',\n            timeline: newTimeline,\n            cancel: false\n        };\n        this.parent.trigger('actionBegin', args);\n        if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n            this.parent.showMaskRow();\n        }\n        else {\n            this.parent.showSpinner();\n        }\n        if (!args.cancel) {\n            newTimeline = args.timeline;\n            this.changeTimelineSettings(newTimeline);\n        }\n    };\n    /**\n     * To change the timeline settings property values based upon the Zooming levels.\n     *\n     * @param {ZoomTimelineSettings} newTimeline .\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.changeTimelineSettings = function (newTimeline) {\n        var _this = this;\n        if (this.isZoomToFit) {\n            this.isSingleTier = this.customTimelineSettings.topTier.unit === 'None' || this.customTimelineSettings.bottomTier.unit === 'None' ? true : false;\n        }\n        else if (!this.isZoomIn) {\n            this.isSingleTier = newTimeline.topTier.unit === 'None' || newTimeline.bottomTier.unit === 'None' ? true : false;\n        }\n        var skipProperty = this.isSingleTier ?\n            this.customTimelineSettings.topTier.unit === 'None' ?\n                'topTier' : 'bottomTier' : null;\n        Object.keys(this.customTimelineSettings).forEach(function (property) {\n            if (property !== skipProperty) {\n                _this.customTimelineSettings[property] = (typeof newTimeline[property] === 'object'\n                    && !isNullOrUndefined(newTimeline[property])) ? __assign({}, newTimeline[property]) : newTimeline[property];\n            }\n            else {\n                var value = property === 'topTier' ? 'bottomTier' : 'topTier';\n                var assignValue = 'bottomTier';\n                if (newTimeline[\"\" + assignValue].unit !== 'None') {\n                    _this.customTimelineSettings[value] = __assign({}, newTimeline[assignValue]);\n                }\n            }\n        });\n        this.parent.isTimelineRoundOff = this.isZoomToFit ? false : isNullOrUndefined(this.parent.projectStartDate) ? true : false;\n        this.processTimelineUnit();\n        this.parent.updateProjectDates(this.parent.cloneProjectStartDate, this.parent.cloneProjectEndDate, this.parent.isTimelineRoundOff);\n        var criticalModule = this.parent.criticalPathModule;\n        if (this.parent.enableCriticalPath && criticalModule && criticalModule.criticalPathCollection) {\n            criticalModule.criticalConnectorLine(criticalModule.criticalPathCollection, criticalModule.detailPredecessorCollection, true, criticalModule.predecessorCollectionTaskIds);\n        }\n        if (this.isZooming || this.isZoomToFit) {\n            var args = {\n                requestType: this.isZoomIn ? 'AfterZoomIn' : this.isZoomToFit ? 'AfterZoomToProject' : 'AfterZoomOut',\n                timeline: this.parent.currentZoomingLevel\n            };\n            this.parent.trigger('actionComplete', args);\n            if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n                this.parent.hideMaskRow();\n            }\n            else {\n                this.parent.hideSpinner();\n            }\n        }\n        var tier = this.topTier === 'None' ? 'bottomTier' : 'topTier';\n        if (this.parent.enableTimelineVirtualization && (!this.parent.pdfExportModule || this.parent.pdfExportModule\n            && !this.parent.pdfExportModule.isPdfExport)) {\n            this.wholeTimelineWidth = this.calculateWidthBetweenTwoDate(tier, this.parent.timelineModule.timelineStartDate, this.parent.timelineModule.timelineEndDate);\n            if (this.wholeTimelineWidth <= this.totalTimelineWidth) {\n                this.wholeTimelineWidth = this.totalTimelineWidth;\n            }\n            // Handled zoomtofit horizontal scrollbar hide while performing different zooming levels in browser at virtualtimeline mode-Task(919516)\n            if (this.isZoomToFit) {\n                this.clientWidthDifference = Math.abs(this.wholeTimelineWidth - this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0].clientWidth) + 1;\n                this.parent.element.querySelectorAll('.e-chart-scroll-container')[0].querySelector('.e-virtualtrack')['style'].width = (this.wholeTimelineWidth - this.clientWidthDifference) + 'px';\n                if (!isNullOrUndefined(this.parent.element.querySelectorAll('.e-timeline-header-container')[0].querySelector('.e-virtualtrack'))) {\n                    this.parent.element.querySelectorAll('.e-timeline-header-container')[0].querySelector('.e-virtualtrack')['style'].width = (this.wholeTimelineWidth - this.clientWidthDifference) + 'px';\n                }\n            }\n            else {\n                this.parent.element.querySelectorAll('.e-chart-scroll-container')[0].querySelector('.e-virtualtrack')['style'].width = this.wholeTimelineWidth + 'px';\n                if (!isNullOrUndefined(this.parent.element.querySelectorAll('.e-timeline-header-container')[0].querySelector('.e-virtualtrack'))) {\n                    this.parent.element.querySelectorAll('.e-timeline-header-container')[0].querySelector('.e-virtualtrack')['style'].width = this.wholeTimelineWidth + 'px';\n                }\n            }\n            this.parent.ganttChartModule.updateWidthAndHeight();\n        }\n    };\n    /**\n     * To perform the zoom to fit operation in Gantt.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.processZoomToFit = function () {\n        this.isZoomToFit = true;\n        this.isZooming = false;\n        this.isZoomedToFit = true;\n        var previousTimeline = {};\n        if (this.parent.undoRedoModule && !this.parent.undoRedoModule['isUndoRedoPerformed'] && this.parent['isUndoRedoItemPresent']('ZoomToFit')) {\n            if (this.parent.undoRedoModule['redoEnabled']) {\n                this.parent.undoRedoModule['disableRedo']();\n            }\n            this.parent.undoRedoModule['createUndoCollection']();\n            previousTimeline['action'] = 'ZoomToFit';\n            previousTimeline['previousTimelineStartDate'] = extend([], [], [this.parent.cloneProjectStartDate], true)[0];\n            previousTimeline['previousTimelineEndDate'] = extend([], [], [this.parent.cloneProjectEndDate], true)[0];\n            previousTimeline['previousZoomingLevel'] = extend({}, {}, this.parent.currentZoomingLevel, true);\n            this.parent.undoRedoModule['getUndoCollection'][this.parent.undoRedoModule['getUndoCollection'].length - 1] = previousTimeline;\n        }\n        if (!this.parent.zoomingProjectStartDate) {\n            this.parent.zoomingProjectStartDate = this.parent.cloneProjectStartDate;\n            this.parent.zoomingProjectEndDate = this.parent.cloneProjectEndDate;\n        }\n        if (this.parent.zoomingProjectStartDate > this.parent.cloneProjectStartDate) {\n            this.parent.cloneProjectStartDate = new Date(this.parent.allowUnscheduledTasks ?\n                this.parent.zoomingProjectStartDate : this.parent.cloneProjectStartDate);\n        }\n        this.parent.dataOperation.calculateProjectDates();\n        var timeDifference = (this.parent.cloneProjectEndDate.getTime() - this.parent.cloneProjectStartDate.getTime());\n        var totalDays = (timeDifference / (1000 * 3600 * 24));\n        var chartWidth = this.parent.ganttChartModule.chartElement.offsetWidth;\n        var perDayWidth = chartWidth / totalDays;\n        var zoomingLevel;\n        var firstValue;\n        var secondValue;\n        var zoomingCollections = this.parent.zoomingLevels.slice();\n        var sortedCollectons = zoomingCollections.sort(function (a, b) {\n            return (!a.perDayWidth && !b.perDayWidth ? 0 : (a.perDayWidth < b.perDayWidth) ? 1 : -1);\n        });\n        if (perDayWidth === 0) { // return when the Gantt chart is not in viewable state.\n            return;\n        }\n        for (var i = 0; i < sortedCollectons.length; i++) {\n            firstValue = sortedCollectons[i];\n            if (i === sortedCollectons.length - 1) {\n                zoomingLevel = sortedCollectons[i];\n                break;\n            }\n            else {\n                secondValue = sortedCollectons[i + 1];\n            }\n            if (perDayWidth >= firstValue.perDayWidth) {\n                zoomingLevel = sortedCollectons[i];\n                break;\n            }\n            if (perDayWidth < firstValue.perDayWidth && perDayWidth > secondValue.perDayWidth) {\n                zoomingLevel = sortedCollectons[i + 1];\n                break;\n            }\n        }\n        var newTimeline = extend({}, {}, zoomingLevel, true);\n        this.roundOffDateToZoom(this.parent.cloneProjectStartDate, true, perDayWidth, newTimeline.bottomTier.unit, zoomingLevel);\n        this.roundOffDateToZoom(this.parent.cloneProjectEndDate, false, perDayWidth, newTimeline.bottomTier.unit, zoomingLevel);\n        var numberOfCells = this.calculateNumberOfTimelineCells(newTimeline);\n        var scrollHeight = this.parent.ganttChartModule.scrollElement.offsetHeight - 17; //17 is horizontal scrollbar width\n        var contentHeight = this.parent.ganttChartModule.chartBodyContent.offsetHeight;\n        var emptySpace = contentHeight <= scrollHeight ? 0 : 17;\n        newTimeline.timelineUnitSize = Math.abs((chartWidth - emptySpace)) / numberOfCells;\n        var args = {\n            requestType: 'beforeZoomToProject',\n            timeline: newTimeline\n        };\n        if (this.parent.toolbarModule) {\n            this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin', this.parent.controlId + '_zoomout'], true);\n        }\n        this.parent.trigger('actionBegin', args);\n        if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n            this.parent.showMaskRow();\n        }\n        else {\n            this.parent.showSpinner();\n        }\n        this.changeTimelineSettings(newTimeline);\n        this.parent.isTimelineRoundOff = isNullOrUndefined(this.parent.projectStartDate) ? true : false;\n        this.isZoomToFit = false;\n    };\n    Timeline.prototype.bottomTierCellWidthCalc = function (mode, zoomLevel, date) {\n        var convertedMilliSeconds;\n        switch (mode) {\n            case 'Minutes':\n                convertedMilliSeconds = zoomLevel.bottomTier.count * (60 * 1000);\n                break;\n            case 'Hour':\n                convertedMilliSeconds = zoomLevel.bottomTier.count * (60 * 60 * 1000);\n                break;\n            case 'Week':\n                convertedMilliSeconds = zoomLevel.bottomTier.count * (7 * 24 * 60 * 60 * 1000);\n                break;\n            case 'Day':\n                convertedMilliSeconds = zoomLevel.bottomTier.count * (24 * 60 * 60 * 1000);\n                break;\n            case 'Month':\n                {\n                    var daysInMonth = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n                    convertedMilliSeconds = zoomLevel.bottomTier.count * (60 * 60 * 24 * daysInMonth * 1000);\n                    break;\n                }\n            case 'Year':\n                {\n                    var daysInYear = (date.getFullYear() % 400 === 0 ||\n                        (date.getFullYear() % 100 !== 0 && date.getFullYear() % 4 === 0)) ? 366 : 365;\n                    convertedMilliSeconds = zoomLevel.bottomTier.count * (60 * 60 * 24 * daysInYear * 1000);\n                    break;\n                }\n        }\n        return convertedMilliSeconds;\n    };\n    Timeline.prototype.roundOffDateToZoom = function (date, isStartDate, perDayWidth, tierMode, zoomingLevel) {\n        var roundOffTime = this.bottomTierCellWidthCalc(tierMode, zoomingLevel, date);\n        if (isStartDate) {\n            date.setTime(date.getTime() - roundOffTime);\n        }\n        else {\n            date.setTime(date.getTime() + roundOffTime);\n        }\n    };\n    Timeline.prototype.calculateNumberOfTimelineCells = function (newTimeline) {\n        var sDate = new Date(this.parent.cloneProjectStartDate.getTime());\n        var eDate = new Date(this.parent.cloneProjectEndDate.getTime());\n        this.parent.dateValidationModule['updateDateWithTimeZone'](sDate, eDate);\n        var numberOfDays = Math.abs((eDate.getTime() - sDate.getTime()) / (24 * 60 * 60 * 1000));\n        var count = newTimeline.bottomTier.count;\n        var unit = newTimeline.bottomTier.unit;\n        if (unit === 'Day') {\n            return numberOfDays / count;\n        }\n        else if (unit === 'Week') {\n            return (numberOfDays / count) / 7;\n        }\n        else if (unit === 'Month') {\n            return (numberOfDays / count) / 28;\n        }\n        else if (unit === 'Year') {\n            return (numberOfDays / count) / (12 * 28);\n        }\n        else if (unit === 'Hour') {\n            return numberOfDays * (24 / count);\n        }\n        else {\n            return numberOfDays * ((60 * 24) / count);\n        }\n    };\n    /**\n     * To validate time line unit.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.processTimelineUnit = function () {\n        var directProperty = ['timelineViewMode', 'timelineUnitSize', 'weekStartDay', 'weekendBackground'];\n        var innerProperty = {\n            'topTier': ['unit', 'format', 'count', 'formatter'],\n            'bottomTier': ['unit', 'format', 'count', 'formatter']\n        };\n        var tierUnits = ['Year', 'Month', 'Week', 'Day', 'Hour', 'Minutes'];\n        this.customTimelineSettings = this.customTimelineSettings ? this.customTimelineSettings :\n            this.extendFunction(this.parent.timelineSettings, directProperty, innerProperty);\n        if ((tierUnits.indexOf(this.customTimelineSettings.topTier.unit) === -1) &&\n            (tierUnits.indexOf(this.customTimelineSettings.bottomTier.unit) === -1)) {\n            this.customTimelineSettings.topTier.unit = tierUnits.indexOf(this.customTimelineSettings.timelineViewMode) !== -1 ?\n                this.customTimelineSettings.timelineViewMode : 'Week';\n            this.customTimelineSettings.bottomTier.unit = tierUnits.indexOf(this.customTimelineSettings.topTier.unit) !== 5 ?\n                tierUnits[tierUnits.indexOf(this.customTimelineSettings.topTier.unit) + 1] : 'None';\n        }\n        else if ((tierUnits.indexOf(this.customTimelineSettings.topTier.unit) !== -1 &&\n            tierUnits.indexOf(this.customTimelineSettings.bottomTier.unit) !== -1)\n            && (tierUnits.indexOf(this.customTimelineSettings.topTier.unit) >\n                tierUnits.indexOf(this.customTimelineSettings.bottomTier.unit))) {\n            this.customTimelineSettings.bottomTier.unit = this.customTimelineSettings.topTier.unit;\n        }\n        else {\n            this.customTimelineSettings.topTier.unit = tierUnits.indexOf(this.customTimelineSettings.topTier.unit) === -1 ?\n                'None' : this.customTimelineSettings.topTier.unit;\n            this.customTimelineSettings.bottomTier.unit = tierUnits.indexOf(this.customTimelineSettings.bottomTier.unit) === -1 ?\n                'None' : this.customTimelineSettings.bottomTier.unit;\n        }\n        this.topTier = this.customTimelineSettings.topTier.unit;\n        this.bottomTier = this.customTimelineSettings.bottomTier.unit;\n        this.previousIsSingleTier = this.isSingleTier;\n        this.isSingleTier = this.topTier === 'None' || this.bottomTier === 'None' ? true : false;\n    };\n    /**\n     * To validate timeline properties.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.processTimelineProperty = function () {\n        this.customTimelineSettings.topTier.count = (this.topTier === 'None') ?\n            1 : this.validateCount(this.customTimelineSettings.topTier.unit, this.customTimelineSettings.topTier.count, 'topTier');\n        this.customTimelineSettings.bottomTier.count = this.customTimelineSettings.bottomTier.unit === 'None' ?\n            1 : this.validateCount(this.customTimelineSettings.bottomTier.unit, this.customTimelineSettings.bottomTier.count, 'bottomTier');\n        this.customTimelineSettings.bottomTier.format = this.validateFormat(this.customTimelineSettings.bottomTier.unit, this.customTimelineSettings.bottomTier.format);\n        this.customTimelineSettings.topTier.format = this.validateFormat(this.topTier, this.customTimelineSettings.topTier.format);\n        this.customTimelineSettings.weekStartDay = this.customTimelineSettings.weekStartDay >= 0 &&\n            this.customTimelineSettings.weekStartDay <= 6 ? this.customTimelineSettings.weekStartDay : 0;\n        if (!(this.parent.pdfExportModule && this.parent.pdfExportModule.helper.exportProps &&\n            this.parent.pdfExportModule.isPdfExport && this.parent.pdfExportModule.helper.exportProps.fitToWidthSettings.isFitToWidth)) {\n            this.checkCurrentZoomingLevel();\n        }\n    };\n    /**\n     * To find the current zooming level of the Gantt control.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.calculateZoomingLevelsPerDayWidth = function () {\n        var collections = this.parent.zoomingLevels;\n        for (var i = 0; i < collections.length; i++) {\n            var perDayWidth = this.getPerDayWidth(collections[i].timelineUnitSize, collections[i].bottomTier.count, collections[i].bottomTier.unit);\n            collections[i].perDayWidth = perDayWidth;\n        }\n    };\n    /**\n     * To find the current zooming level of the Gantt control.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.checkCurrentZoomingLevel = function () {\n        var count = this.customTimelineSettings.bottomTier.unit !== 'None' ?\n            this.customTimelineSettings.bottomTier.count : this.customTimelineSettings.topTier.count;\n        var unit = this.customTimelineSettings.bottomTier.unit !== 'None' ?\n            this.customTimelineSettings.bottomTier.unit : this.customTimelineSettings.topTier.unit;\n        var tier = this.customTimelineSettings.bottomTier.unit !== 'None' ?\n            'bottomTier' : 'topTier';\n        var zoomLevel = this.getCurrentZoomingLevel(unit, count, tier);\n        if (this.parent.toolbarModule) {\n            if (zoomLevel === this.parent.zoomingLevels[this.parent.zoomingLevels.length - 1].level) {\n                this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin'], false);\n            }\n            else if (zoomLevel === this.parent.zoomingLevels[0].level) {\n                this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomout'], false);\n            }\n        }\n        this.parent.currentZoomingLevel = this.parent.zoomingLevels[zoomLevel];\n        return zoomLevel;\n    };\n    /**\n     * @param {string} unit .\n     * @param {number} count .\n     * @param {string} tier .\n     * @returns {number} .\n     * @private\n     */\n    Timeline.prototype.getCurrentZoomingLevel = function (unit, count, tier) {\n        var level;\n        var currentZoomCollection;\n        var checkSameCountLevels;\n        var secondValue;\n        var firstValue;\n        if (!this.parent.zoomingLevels.length) {\n            this.parent.zoomingLevels = this.parent.getZoomingLevels();\n        }\n        var sameUnitLevels = this.parent.zoomingLevels.filter(function (tempLevel) {\n            if (tier === 'bottomTier') {\n                return tempLevel.bottomTier.unit === unit;\n            }\n            else {\n                return tempLevel.topTier.unit === unit;\n            }\n        });\n        if (sameUnitLevels.length === 0) {\n            var closestUnit_1 = this.getClosestUnit(unit, '', false);\n            sameUnitLevels = this.parent.zoomingLevels.filter(function (tempLevel) {\n                if (tier === 'bottomTier') {\n                    return tempLevel.bottomTier.unit === closestUnit_1;\n                }\n                else {\n                    return tempLevel.topTier.unit === closestUnit_1;\n                }\n            });\n        }\n        var sortedUnitLevels = sameUnitLevels.sort(function (a, b) {\n            if (tier === 'bottomTier') {\n                return (!a.bottomTier.count || !b.bottomTier.count) ? 0 : ((a.bottomTier.count < b.bottomTier.count) ? 1 : -1);\n            }\n            else {\n                return (!a.topTier.count || !b.topTier.count) ? 0 : ((a.topTier.count < b.topTier.count) ? 1 : -1);\n            }\n        });\n        for (var i = 0; i < sortedUnitLevels.length; i++) {\n            firstValue = sortedUnitLevels[i];\n            if (i === sortedUnitLevels.length - 1) {\n                level = sortedUnitLevels[i].level;\n                break;\n            }\n            else {\n                secondValue = sortedUnitLevels[i + 1];\n            }\n            if (count >= firstValue[\"\" + tier].count) {\n                currentZoomCollection = sortedUnitLevels[i];\n                checkSameCountLevels = sortedUnitLevels.filter(function (tempLevel) {\n                    if (tier === 'bottomTier') {\n                        return tempLevel.bottomTier.count === currentZoomCollection.bottomTier.count;\n                    }\n                    else {\n                        return tempLevel.topTier.count === currentZoomCollection.topTier.count;\n                    }\n                });\n                if (checkSameCountLevels.length > 1) {\n                    level = this.checkCollectionsWidth(checkSameCountLevels);\n                }\n                else {\n                    level = checkSameCountLevels[0].level;\n                }\n                break;\n            }\n            else if (count < firstValue[\"\" + tier].count && count > secondValue[\"\" + tier].count) {\n                currentZoomCollection = sortedUnitLevels[i + 1];\n                checkSameCountLevels = sortedUnitLevels.filter(function (tempLevel) {\n                    if (tier === 'bottomTier') {\n                        return tempLevel.bottomTier.count === currentZoomCollection.bottomTier.count;\n                    }\n                    else {\n                        return tempLevel.topTier.count === currentZoomCollection.topTier.count;\n                    }\n                });\n                if (checkSameCountLevels.length > 1) {\n                    level = this.checkCollectionsWidth(checkSameCountLevels);\n                }\n                else {\n                    level = checkSameCountLevels[0].level;\n                }\n                break;\n            }\n        }\n        return level;\n    };\n    /**\n     * Getting closest zooimg level.\n     *\n     * @param {string} unit .\n     * @param {string} closetUnit .\n     * @param {boolean} isCont .\n     * @returns {string} .\n     * @private\n     */\n    Timeline.prototype.getClosestUnit = function (unit, closetUnit, isCont) {\n        var bottomTierUnits = ['Year', 'Month', 'Week', 'Day', 'Hour', 'Minutes'];\n        var index = bottomTierUnits.indexOf(unit);\n        if (index === 0) {\n            isCont = true;\n        }\n        if (this.isZoomIn || isCont) {\n            unit = bottomTierUnits[index + 1];\n        }\n        else {\n            unit = bottomTierUnits[index - 1];\n        }\n        var sameUnitLevels = this.parent.zoomingLevels.filter(function (tempLevel) {\n            return tempLevel.bottomTier.unit === unit;\n        });\n        if (sameUnitLevels.length === 0) {\n            if (unit === 'Year') {\n                isCont = true;\n            }\n            closetUnit = unit;\n            return this.getClosestUnit(unit, closetUnit, isCont);\n        }\n        else {\n            return unit;\n        }\n    };\n    Timeline.prototype.checkCollectionsWidth = function (checkSameLevels) {\n        var zoomLevels = checkSameLevels;\n        var width = this.customTimelineSettings.timelineUnitSize;\n        var level;\n        var secondValue;\n        var firstValue;\n        var sortedZoomLevels = zoomLevels.sort(function (a, b) {\n            return (a.timelineUnitSize < b.timelineUnitSize) ? 1 : -1;\n        });\n        for (var i = 0; i < sortedZoomLevels.length; i++) {\n            firstValue = sortedZoomLevels[i];\n            if (i === sortedZoomLevels.length - 1) {\n                level = sortedZoomLevels[i].level;\n                break;\n            }\n            else {\n                secondValue = sortedZoomLevels[i + 1];\n            }\n            if (width >= firstValue.timelineUnitSize) {\n                level = sortedZoomLevels[i].level;\n                break;\n            }\n            else if (width < firstValue.timelineUnitSize && width > secondValue.timelineUnitSize) {\n                level = sortedZoomLevels[i + 1].level;\n                break;\n            }\n        }\n        return level;\n    };\n    /**\n     * To create timeline header template.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.updateTimelineHeaderHeight = function () {\n        if (this.parent.timelineModule.isSingleTier) {\n            addClass([this.parent.ganttChartModule.chartTimelineContainer], cls.timelineSingleHeaderOuterDiv);\n            if (this.parent.treeGrid.element) {\n                addClass(this.parent.treeGrid.element.querySelectorAll('.e-headercell'), cls.timelineSingleHeaderOuterDiv);\n                addClass(this.parent.treeGrid.element.querySelectorAll('.e-columnheader'), cls.timelineSingleHeaderOuterDiv);\n            }\n        }\n        else {\n            removeClass([this.parent.ganttChartModule.chartTimelineContainer], cls.timelineSingleHeaderOuterDiv);\n            if (this.parent.treeGrid.element) {\n                removeClass(this.parent.treeGrid.element.querySelectorAll('.e-headercell'), cls.timelineSingleHeaderOuterDiv);\n                removeClass(this.parent.treeGrid.element.querySelectorAll('.e-columnheader'), cls.timelineSingleHeaderOuterDiv);\n            }\n        }\n        if (this.previousIsSingleTier !== this.isSingleTier) {\n            var toolbarHeight = 0;\n            if (!isNullOrUndefined(this.parent.toolbarModule) && !isNullOrUndefined(this.parent.toolbarModule.element)) {\n                toolbarHeight = this.parent.toolbarModule.element.offsetHeight;\n            }\n            this.parent.ganttChartModule.scrollObject.\n                setHeight(this.parent.ganttHeight - this.parent.ganttChartModule.chartTimelineContainer.offsetHeight - toolbarHeight);\n            this.parent.treeGrid.height = this.parent.ganttHeight - toolbarHeight -\n                this.parent.ganttChartModule.chartTimelineContainer.offsetHeight;\n        }\n    };\n    Timeline.prototype.dateByLeftValue = function (left, isMilestone, property) {\n        var pStartDate = new Date(this.parent.timelineModule.timelineStartDate.toString());\n        var milliSecondsPerPixel = (24 * 60 * 60 * 1000) / this.parent.perDayWidth;\n        pStartDate.setTime(pStartDate.getTime() + (left * milliSecondsPerPixel));\n        /* To render the milestone in proper date while editing */\n        if (isMilestone && !isNullOrUndefined(property.predecessorsName) && property.predecessorsName !== '') {\n            pStartDate.setDate(pStartDate.getDate() - 1);\n            var dayEndTime = this.parent['getCurrentDayEndTime'](property.isAutoSchedule ? property.autoEndDate : property.endDate);\n            this.parent.dateValidationModule.setTime(dayEndTime, pStartDate);\n            pStartDate = this.parent.dateValidationModule.checkStartDate(pStartDate, property, true);\n        }\n        var tierMode = this.parent.timelineModule.bottomTier !== 'None' ? this.parent.timelineModule.topTier :\n            this.parent.timelineModule.bottomTier;\n        if (tierMode !== 'Hour' && tierMode !== 'Minutes') {\n            if (this.parent.isInDst(new Date(this.parent.timelineModule.timelineStartDate.toString())) &&\n                !this.parent.isInDst(pStartDate)) {\n                pStartDate.setTime(pStartDate.getTime() + (60 * 60 * 1000));\n            }\n            else if (!this.parent.isInDst(new Date(this.parent.timelineModule.timelineStartDate.toString())) &&\n                this.parent.isInDst(pStartDate)) {\n                pStartDate.setTime(pStartDate.getTime() - (60 * 60 * 1000));\n            }\n        }\n        return pStartDate;\n    };\n    /**\n     * To create timeline header template.\n     *\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.createTimelineSeries = function () {\n        var tr;\n        var td;\n        var div;\n        var table;\n        var thead;\n        var virtualTableDiv;\n        var virtualTrackDiv;\n        var loopCount = this.isSingleTier ? 1 : 2;\n        var tier = this.topTier === 'None' ? 'bottomTier' : 'topTier';\n        this.topTierCollection = [];\n        this.bottomTierCollection = [];\n        if (this.restrictRender === true) {\n            this.updateTimelineHeaderHeight();\n            this.wholeTimelineWidth = this.calculateWidthBetweenTwoDate(tier, this.parent.timelineModule.timelineStartDate, this.parent.timelineModule.timelineEndDate);\n        }\n        if (this.parent.enableTimelineVirtualization && (this.wholeTimelineWidth > this.parent.element.offsetWidth * 3)) {\n            for (var count = 0; count < loopCount; count++) {\n                table = createElement('table', { className: cls.timelineHeaderTableContainer, styles: 'display: block;' });\n                table.setAttribute('role', 'none');\n                thead = createElement('thead', { className: cls.timelineHeaderTableBody, styles: 'display:block; border-collapse:collapse' });\n                var trTemplate = this.createTimelineTemplate(tier);\n                tr = createElement('tr');\n                Array.from(trTemplate.childNodes).forEach(function (child) {\n                    tr.appendChild(child);\n                });\n                td = createElement('td');\n                div = createElement('div', { styles: 'width: 20px' });\n                virtualTableDiv = createElement('div', { className: cls.virtualTable });\n                virtualTrackDiv = createElement('div', { className: cls.virtualTrack });\n                td.appendChild(div);\n                tr.appendChild(td);\n                virtualTableDiv.appendChild(tr);\n                thead.appendChild(virtualTableDiv);\n                thead.appendChild(virtualTrackDiv);\n                table.appendChild(thead);\n                this.parent.ganttChartModule.chartTimelineContainer.appendChild(table);\n                tier = 'bottomTier';\n                tr = null;\n                this.restrictRender = false;\n            }\n            if (this.parent.height === 'auto' || this.parent.timelineModule.isSingleTier) {\n                var timelineContainer = this.parent.element.getElementsByClassName('e-timeline-header-container')[0]['offsetHeight'];\n                this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n                if (!isNullOrUndefined(this.parent.element.getElementsByClassName('e-gridcontent')[0])) {\n                    this.parent.treeGrid.element.getElementsByClassName('e-gridcontent')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n                }\n            }\n            this.timelineVirtualizationStyles();\n        }\n        else {\n            for (var count = 0; count < loopCount; count++) {\n                table = createElement('table', { className: cls.timelineHeaderTableContainer, styles: 'display: block;' });\n                table.setAttribute('role', 'none');\n                thead = createElement('thead', { className: cls.timelineHeaderTableBody, styles: 'display:block; border-collapse:collapse' });\n                var trTemplate = this.createTimelineTemplate(tier);\n                tr = createElement('tr');\n                Array.from(trTemplate.childNodes).forEach(function (child) {\n                    tr.appendChild(child);\n                });\n                td = createElement('td');\n                div = createElement('div', { styles: 'width: 20px' });\n                td.appendChild(div);\n                tr.appendChild(td);\n                thead.appendChild(tr);\n                table.appendChild(thead);\n                this.parent.ganttChartModule.chartTimelineContainer.appendChild(table);\n                tier = 'bottomTier';\n                tr = null;\n            }\n            this.wholeTimelineWidth = this.totalTimelineWidth;\n            if (this.parent.height === 'auto' || this.parent.timelineModule.isSingleTier) {\n                var timelineContainer = this.parent.element.getElementsByClassName('e-timeline-header-container')[0]['offsetHeight'];\n                this.parent.element.getElementsByClassName('e-chart-scroll-container e-content')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n                if (!isNullOrUndefined(this.parent.element.getElementsByClassName('e-gridcontent')[0])) {\n                    this.parent.treeGrid.element.getElementsByClassName('e-gridcontent')[0]['style'].height = 'calc(100% - ' + timelineContainer + 'px)';\n                }\n            }\n        }\n    };\n    Timeline.prototype.timelineVirtualizationStyles = function () {\n        var translateXValue = 0;\n        var translateYValue = 0;\n        var trackWidth = this.wholeTimelineWidth;\n        if (this.parent.enableTimelineVirtualization) {\n            //e-content styles updating\n            translateXValue = (this.parent.enableTimelineVirtualization &&\n                !isNullOrUndefined(this.parent.ganttChartModule.scrollObject.element.scrollLeft)\n                && this.parent.ganttChartModule.scrollObject.element.scrollLeft !== 0) ?\n                this.parent.ganttChartModule.scrollObject.getTimelineLeft() : 0;\n            if (this.parent.enableRtl) {\n                translateXValue = -(translateXValue);\n            }\n            var contentVirtualTable = this.parent.element.querySelectorAll('.e-chart-scroll-container')[0].querySelector('.e-virtualtable');\n            contentVirtualTable.style.transform = \"translate(\" + translateXValue + \"px, \" + translateYValue + \"px)\";\n            var contentVirtualTrack = this.parent.element.querySelectorAll('.e-chart-scroll-container')[0].querySelector('.e-virtualtrack');\n            contentVirtualTrack.style.position = 'relative';\n            contentVirtualTrack.style.width = trackWidth + 'px';\n            //timeline styles updating\n            if (this.parent.ganttChartModule.scrollObject['isSetScrollLeft']) {\n                var virtualTableStylesT = this.parent.element.querySelectorAll('.e-timeline-header-table-container')[0].querySelector('.e-virtualtable');\n                var virtualTableStylesB = this.parent.element.querySelectorAll('.e-timeline-header-table-container')[1].querySelector('.e-virtualtable');\n                virtualTableStylesT.style.transform = \"translate(\" + translateXValue + \"px, \" + translateYValue + \"px)\";\n                virtualTableStylesB.style.transform = \"translate(\" + translateXValue + \"px, \" + translateYValue + \"px)\";\n            }\n            var virtualTrackStylesT = this.parent.element.querySelectorAll('.e-timeline-header-table-container')[0].querySelector('.e-virtualtrack');\n            var virtualTrackStylesB = this.parent.element.querySelectorAll('.e-timeline-header-table-container')[1].querySelector('.e-virtualtrack');\n            virtualTrackStylesT.style.position = 'relative';\n            virtualTrackStylesB.style.position = 'relative';\n            virtualTrackStylesT.style.width = trackWidth + 'px';\n            virtualTrackStylesB.style.width = trackWidth + 'px';\n            //dependency viewer styles updating\n            var dependencyViewer = this.parent.connectorLineModule.svgObject;\n            dependencyViewer['style'].width = trackWidth + 'px';\n            // timeline header container width updating\n            var timelineHeader = this.parent.element.querySelector('.' + cls.timelineHeaderContainer);\n            timelineHeader['style'].width = 'calc(100% - ' + 17 + 'px)';\n            if (this.parent.timelineModule.isZooming || this.parent.timelineModule.isZoomToFit) {\n                this.parent.ganttChartModule.scrollElement.scrollLeft = 0;\n                this.parent.ganttChartModule.scrollObject.updateChartElementStyles();\n            }\n        }\n    };\n    /**\n     * To validate timeline tier count.\n     *\n     * @param {string} mode .\n     * @param {number} count .\n     * @param {string} tier .\n     * @returns {number} .\n     * @private\n     */\n    Timeline.prototype.validateCount = function (mode, count, tier) {\n        var tierCount = !isNullOrUndefined(count) && parseInt(count.toString(), 10) > 0 ? parseInt(count.toString(), 10) : 1;\n        var timeDifference = Math.abs(this.timelineRoundOffEndDate.getTime() - this.timelineStartDate.getTime());\n        var difference;\n        switch (mode) {\n            case 'Year':\n                difference = Math.round((timeDifference / (1000 * 3600 * 24)) / (12 * 28));\n                tierCount = tierCount <= difference ? tierCount : difference > 0 ? difference : 1;\n                if (this.topTier !== 'None' && tier === 'bottomTier') {\n                    tierCount = this.validateBottomTierCount(mode, tierCount);\n                }\n                break;\n            case 'Month':\n                difference = Math.round((timeDifference / (1000 * 3600 * 24)) / 28);\n                tierCount = tierCount <= difference ? tierCount : difference > 0 ? (difference + 1) : 1;\n                if (this.topTier !== 'None' && tier === 'bottomTier') {\n                    tierCount = this.validateBottomTierCount(mode, tierCount);\n                }\n                break;\n            case 'Week':\n                difference = Math.round((timeDifference / (1000 * 3600 * 24)) / 7);\n                tierCount = tierCount <= difference ? tierCount : difference > 0 ? difference : 1;\n                if (this.topTier !== 'None' && tier === 'bottomTier') {\n                    tierCount = this.validateBottomTierCount(mode, tierCount);\n                }\n                break;\n            case 'Day':\n                difference = Math.round(timeDifference / (1000 * 3600 * 24));\n                tierCount = tierCount <= difference ? tierCount : difference > 0 ? difference : 1;\n                if (this.topTier !== 'None' && tier === 'bottomTier') {\n                    tierCount = this.validateBottomTierCount(mode, tierCount);\n                }\n                break;\n            case 'Hour':\n                difference = Math.round(timeDifference / (1000 * 3600));\n                tierCount = tierCount <= difference ? tierCount : difference > 0 ? difference : 1;\n                if (this.topTier !== 'None' && tier === 'bottomTier') {\n                    tierCount = this.validateBottomTierCount(mode, tierCount);\n                }\n                break;\n            case 'Minutes':\n                difference = Math.round(timeDifference / (1000 * 60));\n                tierCount = tierCount <= difference ? tierCount : difference > 0 ? difference : 1;\n                if (this.topTier !== 'None' && tier === 'bottomTier') {\n                    tierCount = this.validateBottomTierCount(mode, tierCount);\n                }\n                break;\n        }\n        if (count !== tierCount && this.isZooming && this.parent.toolbarModule && (tier === 'bottomTier' || this.isSingleTier)) {\n            if (this.isZoomIn) {\n                this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomin'], false);\n            }\n            else {\n                this.parent.toolbarModule.enableItems([this.parent.controlId + '_zoomout'], false);\n            }\n        }\n        return tierCount;\n    };\n    /**\n     * To validate bottom tier count.\n     *\n     * @param {string} mode .\n     * @param {number} tierCount .\n     * @returns {number} .\n     * @private\n     */\n    Timeline.prototype.validateBottomTierCount = function (mode, tierCount) {\n        var count;\n        switch (mode) {\n            case 'Year':\n                count = tierCount <= this.customTimelineSettings.topTier.count ?\n                    tierCount : this.customTimelineSettings.topTier.count;\n                break;\n            case 'Month':\n                count = this.topTier === 'Year' ? tierCount <= (this.customTimelineSettings.topTier.count * 12) ?\n                    tierCount : (this.customTimelineSettings.topTier.count * 12) :\n                    tierCount <= this.customTimelineSettings.topTier.count ?\n                        tierCount : this.customTimelineSettings.topTier.count;\n                break;\n            case 'Week':\n                count = this.topTier === 'Year' ? tierCount <= (this.customTimelineSettings.topTier.count * (12 * 4)) ?\n                    tierCount : (this.customTimelineSettings.topTier.count * (12 * 4)) :\n                    this.topTier === 'Month' ? tierCount <= (this.customTimelineSettings.topTier.count * 4) ?\n                        tierCount : (this.customTimelineSettings.topTier.count * 4) :\n                        tierCount <= this.customTimelineSettings.topTier.count ?\n                            tierCount : this.customTimelineSettings.topTier.count;\n                break;\n            case 'Day':\n                count = this.topTier === 'Year' ? tierCount <= (this.customTimelineSettings.topTier.count * (12 * 28)) ?\n                    tierCount : (this.customTimelineSettings.topTier.count * (12 * 28)) :\n                    this.topTier === 'Month' ? tierCount <= (this.customTimelineSettings.topTier.count * 28) ?\n                        tierCount : (this.customTimelineSettings.topTier.count * 28) :\n                        this.topTier === 'Week' ? tierCount <= (this.customTimelineSettings.topTier.count * 7) ?\n                            tierCount : (this.customTimelineSettings.topTier.count * 7) :\n                            tierCount <= this.customTimelineSettings.topTier.count ? tierCount : this.customTimelineSettings.topTier.count;\n                break;\n            case 'Hour':\n                count = this.topTier === 'Year' ? tierCount <= (this.customTimelineSettings.topTier.count * (12 * 28 * 24)) ?\n                    tierCount : (this.customTimelineSettings.topTier.count * (12 * 28 * 24)) :\n                    this.topTier === 'Month' ? tierCount <= (this.customTimelineSettings.topTier.count * (28 * 24)) ?\n                        tierCount : (this.customTimelineSettings.topTier.count * (28 * 24)) :\n                        this.topTier === 'Week' ? tierCount <= (this.customTimelineSettings.topTier.count * 7 * 24) ?\n                            tierCount : (this.customTimelineSettings.topTier.count * 7 * 24) :\n                            this.topTier === 'Day' ? tierCount <= (this.customTimelineSettings.topTier.count * 24) ?\n                                tierCount : (this.customTimelineSettings.topTier.count * 24) :\n                                tierCount <= this.customTimelineSettings.topTier.count ?\n                                    tierCount : this.customTimelineSettings.topTier.count;\n                break;\n            case 'Minutes':\n                count = this.topTier === 'Year' ? tierCount <= (this.customTimelineSettings.topTier.count * (12 * 28 * 24 * 60)) ?\n                    tierCount : (this.customTimelineSettings.topTier.count * (12 * 28 * 24 * 60)) :\n                    this.topTier === 'Month' ? tierCount <= (this.customTimelineSettings.topTier.count * (28 * 24 * 60)) ?\n                        tierCount : (this.customTimelineSettings.topTier.count * (28 * 24 * 60)) :\n                        this.topTier === 'Week' ? tierCount <= (this.customTimelineSettings.topTier.count * 7 * 24 * 60) ?\n                            tierCount : (this.customTimelineSettings.topTier.count * 7 * 24 * 60) :\n                            this.topTier === 'Day' ? tierCount <= (this.customTimelineSettings.topTier.count * 24 * 60) ?\n                                tierCount : (this.customTimelineSettings.topTier.count * 24 * 60) :\n                                this.topTier === 'Hour' ? tierCount <= (this.customTimelineSettings.topTier.count * 60) ?\n                                    tierCount : (this.customTimelineSettings.topTier.count * 60) :\n                                    tierCount <= this.customTimelineSettings.topTier.count ?\n                                        tierCount : this.customTimelineSettings.topTier.count;\n                break;\n        }\n        return count;\n    };\n    /**\n     * To validate timeline tier format.\n     *\n     * @param {string} mode .\n     * @param {string} format .\n     * @returns {string} .\n     * @private\n     */\n    Timeline.prototype.validateFormat = function (mode, format) {\n        var tierFormat;\n        switch (mode) {\n            case 'Week':\n                tierFormat = !format ? 'MMM dd, yyyy' : format;\n                break;\n            case 'Day':\n            case 'None':\n                tierFormat = !format ? '' : format;\n                break;\n            case 'Hour':\n                tierFormat = !format ? 'H' : format;\n                break;\n            case 'Month':\n                tierFormat = !format ? 'MMM yyyy' : format;\n                break;\n            case 'Year':\n                tierFormat = !format ? 'yyyy' : format;\n                break;\n            case 'Minutes':\n                tierFormat = !format ? 'm' : format;\n                break;\n        }\n        return tierFormat;\n    };\n    /**\n     * To perform extend operation.\n     *\n     * @param {object} cloneObj .\n     * @param {string[]} propertyCollection .\n     * @param {object} innerProperty .\n     * @returns {object} .\n     * @private\n     */\n    Timeline.prototype.extendFunction = function (cloneObj, propertyCollection, innerProperty) {\n        var _this = this;\n        var tempObj = {};\n        for (var index = 0; index < propertyCollection.length; index++) {\n            tempObj[propertyCollection[index]] = cloneObj[propertyCollection[index]];\n        }\n        if (innerProperty) {\n            Object.keys(innerProperty).forEach(function (key) {\n                tempObj[key] = _this.extendFunction(cloneObj[key], innerProperty[key], null);\n            });\n        }\n        return tempObj;\n    };\n    /**\n     * To format date.\n     *\n     * @param {string} dayFormat .\n     * @param {Date} data .\n     * @returns {string} .\n     * @private\n     */\n    Timeline.prototype.formatDateHeader = function (dayFormat, data) {\n        var date = new Date(data.getTime());\n        var dateString;\n        if (dayFormat === '') {\n            dateString = this.parent.globalize.formatDate(date, { format: 'E' });\n            if (this.parent.locale === 'zh') {\n                dateString = dateString.slice(1);\n            }\n            else {\n                if (this.parent.locale === 'ar') {\n                    var dateStringValue = dateString;\n                    dateString = dateStringValue;\n                }\n                else {\n                    dateString = dateString.slice(0, 1);\n                }\n            }\n        }\n        else {\n            dateString = this.parent.globalize.formatDate(date, { format: dayFormat });\n        }\n        return dateString;\n    };\n    /**\n     * Custom Formatting.\n     *\n     * @param {Date} date .\n     * @param {string} format .\n     * @param {string} tier .\n     * @param {string} mode .\n     * @param {string | ITimelineFormatter} formatter .\n     * @returns {string} .\n     * @private\n     */\n    Timeline.prototype.customFormat = function (date, format, tier, mode, formatter) {\n        formatter = (typeof formatter === 'string' ? getValue(formatter, window) : formatter);\n        return formatter(date, format, tier, mode);\n    };\n    /**\n     * To create timeline template .\n     *\n     * @param {string} tier .\n     * @returns {string} .\n     * @private\n     */\n    Timeline.prototype.createTimelineTemplate = function (tier) {\n        var isFirstCell = false;\n        var parent = this.parent;\n        var parentTh = createElement('th');\n        var parentTr;\n        var mode = tier === 'topTier' ?\n            parent.timelineModule.customTimelineSettings.topTier.unit :\n            parent.timelineModule.customTimelineSettings.bottomTier.unit;\n        var count = tier === 'topTier' ? parent.timelineModule.customTimelineSettings.topTier.count :\n            parent.timelineModule.customTimelineSettings.bottomTier.count;\n        var increment;\n        var newTime;\n        var leftValueForStartDate = (this.parent.enableTimelineVirtualization &&\n            this.parent.ganttChartModule.scrollObject.element.scrollLeft !== 0)\n            ? this.parent.ganttChartModule.scrollObject.getTimelineLeft() : null;\n        var startDate = (this.parent.enableTimelineVirtualization && !isNullOrUndefined(leftValueForStartDate))\n            ? new Date((this.dateByLeftValue(leftValueForStartDate)).toString()) :\n            new Date(this.parent.timelineModule.timelineStartDate.toString());\n        var endDate = new Date(this.timelineRoundOffEndDate.toString());\n        var scheduleDateCollection = [];\n        var width = 0;\n        var WidthForVirtualTable = this.parent.element.offsetWidth * 3;\n        do {\n            // PDf export collection\n            var timelineCell = {};\n            timelineCell.startDate = new Date(startDate.getTime());\n            if ((mode === 'Month' || mode === 'Hour') && tier === 'bottomTier' && (count !== 1) && scheduleDateCollection.length === 0) {\n                isFirstCell = true;\n            }\n            parentTr = this.getHeaterTemplateString(new Date(startDate.toString()), mode, tier, false, count, timelineCell, isFirstCell);\n            scheduleDateCollection.push(new Date(startDate.toString()));\n            if (isFirstCell && mode === 'Month') {\n                newTime = this.calculateQuarterEndDate(startDate, count).getTime();\n            }\n            else {\n                increment = Math.abs(this.getIncrement(startDate, count, mode));\n                newTime = startDate.getTime() + increment;\n            }\n            var dubStartDate = new Date(startDate.getTime());\n            isFirstCell = false;\n            startDate.setTime(newTime);\n            var dubStartHour = dubStartDate.getHours();\n            var startHour = startDate.getHours();\n            var difference = startHour - dubStartHour;\n            if (difference !== count && difference > 1) {\n                if ((!this.parent.isInDst(startDate) && this.parent.isInDst(dubStartDate)) ||\n                    (this.parent.isInDst(startDate) && !this.parent.isInDst(dubStartDate))) {\n                    if (startDate.getTimezoneOffset() > dubStartDate.getTimezoneOffset()) {\n                        startDate.setTime(startDate.getTime() - ((1000 * 60 * 60) * (difference - count)));\n                    }\n                }\n            }\n            if (startDate.getHours() === 5 && count === 2 && tier === 'bottomTier' &&\n                parent.timelineModule.customTimelineSettings.bottomTier.unit === 'Hour') {\n                startDate.setTime(startDate.getTime() - (1000 * 60 * 60));\n            }\n            if (startDate.getHours() === 8 && count === 12 && tier === 'bottomTier' &&\n                this.parent.timelineModule.customTimelineSettings.bottomTier.unit === 'Hour') {\n                startDate.setTime(startDate.getTime() - (1000 * 60 * 60 * 8));\n            }\n            if (startDate >= endDate) {\n                /* eslint-disable-next-line */\n                parentTr = this.getHeaterTemplateString(scheduleDateCollection[scheduleDateCollection.length - 1], mode, tier, true, count, timelineCell);\n            }\n            parentTh.appendChild(parentTr);\n            var tierCollection = tier === 'topTier' ? this.topTierCollection : this.bottomTierCollection;\n            timelineCell.endDate = new Date(startDate.getTime());\n            if (this.parent.pdfExportModule && this.parent.pdfExportModule.isPdfExport && this.parent.enableTimelineVirtualization) {\n                if (tier === 'topTier') {\n                    this.pdfExportTopTierCollection.push(timelineCell);\n                }\n                else {\n                    this.pdfExportBottomTierCollection.push(timelineCell);\n                }\n            }\n            else {\n                tierCollection.push(timelineCell);\n            }\n            width += timelineCell.width;\n            this.weekendEndDate = timelineCell.endDate >= endDate ? endDate : timelineCell.endDate;\n        } while ((this.parent.enableTimelineVirtualization && (!this.parent.pdfExportModule ||\n            this.parent.pdfExportModule && !this.parent.pdfExportModule.isPdfExport)) ? (width < WidthForVirtualTable) &&\n            (startDate < endDate) : (startDate < endDate));\n        return parentTh;\n    };\n    Timeline.prototype.updateTimelineAfterZooming = function (endDate, resized) {\n        var timeDiff;\n        var perDayWidth;\n        var totWidth;\n        var contentElement = document.getElementsByClassName('e-chart-scroll-container e-content')[0];\n        if (!isNullOrUndefined(contentElement)) {\n            var contentWidth = contentElement['offsetWidth'];\n            var contentHeight = contentElement['offsetHeight'];\n            var scrollHeight = document.getElementsByClassName('e-chart-rows-container')[0]['offsetHeight'];\n            timeDiff = Math.abs(this.timelineStartDate.getTime() - endDate.getTime());\n            timeDiff = timeDiff / (1000 * 3600 * 24);\n            if (this.bottomTier === 'None') {\n                perDayWidth = this.getPerDayWidth(this.customTimelineSettings.timelineUnitSize, this.customTimelineSettings.topTier.count, this.topTier);\n            }\n            else {\n                perDayWidth = this.getPerDayWidth(this.customTimelineSettings.timelineUnitSize, this.customTimelineSettings.bottomTier.count, this.bottomTier);\n            }\n            if (contentHeight < scrollHeight) {\n                totWidth = (perDayWidth * timeDiff) + 17;\n            }\n            else {\n                totWidth = (perDayWidth * timeDiff);\n            }\n            if (contentWidth >= totWidth) {\n                var widthDiff = contentWidth - totWidth;\n                widthDiff = Math.round(widthDiff / perDayWidth);\n                endDate.setDate(endDate.getDate() + widthDiff);\n                this.parent.timelineModule.timelineEndDate = endDate;\n                if (resized) {\n                    this.parent.updateProjectDates(this.timelineStartDate, this.timelineEndDate, this.parent.isTimelineRoundOff);\n                }\n            }\n        }\n    };\n    Timeline.prototype.getTimelineRoundOffEndDate = function (date) {\n        var tierMode = this.topTier === 'None' ? this.bottomTier : this.topTier;\n        var endDate = new Date(date.toString());\n        if (this.parent.isTimelineRoundOff) {\n            if (tierMode === 'Hour') {\n                endDate.setMinutes(60);\n            }\n            else if (tierMode === 'Minutes') {\n                endDate.setSeconds(60);\n            }\n            else {\n                endDate.setHours(24, 0, 0, 0);\n            }\n        }\n        if (isNullOrUndefined(this.parent.projectEndDate)) {\n            this.updateTimelineAfterZooming(endDate, false);\n        }\n        return endDate;\n    };\n    /**\n     *\n     * @param {Date} startDate .\n     * @param {number} count .\n     * @param {string} mode .\n     * @param {boolean} isFirstCell .\n     * @returns {number} .\n     * @private\n     */\n    Timeline.prototype.getIncrement = function (startDate, count, mode, isFirstCell) {\n        var firstDay = new Date(startDate.getTime());\n        var lastDay = new Date(startDate.getTime());\n        var increment;\n        switch (mode) {\n            case 'Year':\n                firstDay = startDate;\n                lastDay = new Date(startDate.getFullYear() + (count - 1), 11, 31);\n                increment = (lastDay.getTime() - firstDay.getTime()) + (1000 * 60 * 60 * 24);\n                break;\n            case 'Month':\n                firstDay = startDate;\n                lastDay = new Date(startDate.getFullYear(), startDate.getMonth() + count, 1);\n                increment = lastDay.getTime() - firstDay.getTime();\n                break;\n            case 'Week':\n                {\n                    var dayIndex = this.parent.timelineModule.customTimelineSettings.weekStartDay;\n                    var dayIntervel = startDate.getDay() < dayIndex ? (dayIndex - startDate.getDay()) :\n                        (6 - startDate.getDay()) + dayIndex;\n                    count = dayIntervel > 0 ? count - 1 : 0;\n                    lastDay.setHours(24, 0, 0, 0);\n                    dayIntervel = startDate.getDay() < dayIndex ? dayIntervel > 0 ?\n                        dayIntervel - 1 : dayIntervel : dayIntervel;\n                    lastDay.setDate(lastDay.getDate() + (dayIntervel + (7 * count)));\n                    increment = lastDay.getTime() - firstDay.getTime();\n                    break;\n                }\n            case 'Day':\n                lastDay.setHours(24, 0, 0, 0);\n                increment = (lastDay.getTime() - firstDay.getTime()) + (1000 * 60 * 60 * 24 * (count - 1));\n                increment = this.checkDate(firstDay, lastDay, increment, count, mode);\n                break;\n            case 'Hour':\n                {\n                    lastDay.setMinutes(60);\n                    lastDay.setSeconds(0);\n                    increment = (lastDay.getTime() - firstDay.getTime()) + (1000 * 60 * 60 * (count - 1));\n                    var date = new Date(lastDay);\n                    date.setTime(date.getTime() + increment);\n                    if (isFirstCell && count === 12) {\n                        if (firstDay.getHours() !== 0) {\n                            date.setHours(0, 0, 0, 0);\n                            increment = date.getTime() - firstDay.getTime();\n                        }\n                    }\n                    if (isFirstCell && count === 6) {\n                        if (firstDay.getHours() !== 0) {\n                            date.setHours(6, 0, 0, 0);\n                            increment = date.getTime() - firstDay.getTime();\n                        }\n                    }\n                    increment = this.checkDate(firstDay, lastDay, increment, count, mode);\n                    break;\n                }\n            case 'Minutes':\n                lastDay.setSeconds(60);\n                increment = (lastDay.getTime() - firstDay.getTime()) + (1000 * 60 * (count - 1));\n                increment = this.checkDate(firstDay, lastDay, increment, count, mode);\n                break;\n        }\n        return increment;\n    };\n    Timeline.prototype.checkDate = function (firstDay, lastDay, increment, count, mode) {\n        var date = new Date(firstDay.getTime());\n        date.setTime(date.getTime() + increment);\n        if (mode === 'Day' && count !== 1 && ((date.getTime() - lastDay.getTime()) / (1000 * 60 * 60 * 24)) !== count && (firstDay.getTimezoneOffset() !== date.getTimezoneOffset())) {\n            var diffCount = count - (date.getTime() - lastDay.getTime()) / (1000 * 60 * 60 * 24);\n            if (!this.parent.isInDst(date)) {\n                increment += (1000 * 60 * 60 * diffCount);\n            }\n            else if (this.parent.isInDst(date) && count !== 2) {\n                increment -= (1000 * 60 * 60 * diffCount);\n            }\n        }\n        else if (mode === 'Hour' && count !== 1 && ((date.getTime() - lastDay.getTime()) / (1000 * 60 * 60)) !== count && (firstDay.getTimezoneOffset() !== date.getTimezoneOffset())) {\n            var diffCount = count - (date.getTime() - lastDay.getTime()) / (1000 * 60 * 60);\n            if (!this.parent.isInDst(date)) {\n                increment += (1000 * 60 * 60 * diffCount);\n            }\n            else if (this.parent.isInDst(date) && count !== 2) {\n                increment -= (1000 * 60 * 60 * diffCount);\n            }\n        }\n        else if (mode === 'Minutes' && count !== 1 && ((date.getTime() - lastDay.getTime()) / (1000 * 60)) !== count && (firstDay.getTimezoneOffset() !== date.getTimezoneOffset())) {\n            var diffCount = count - (date.getTime() - lastDay.getTime()) / (1000 * 60);\n            if (!this.parent.isInDst(date)) {\n                increment += (1000 * 60 * 60 * diffCount);\n            }\n            else if (this.parent.isInDst(date) && count !== 2 && count !== 15) {\n                increment -= (1000 * 60 * 60 * diffCount);\n            }\n        }\n        return increment;\n    };\n    /**\n     * Method to find header cell was weekend or not\n     *\n     * @param {string} mode .\n     * @param {string} tier .\n     * @param {Date} day .\n     * @returns {boolean} .\n     */\n    Timeline.prototype.isWeekendHeaderCell = function (mode, tier, day) {\n        return (mode === 'Day' || mode === 'Hour' || mode === 'Minutes') && (this.customTimelineSettings[tier].count === 1 ||\n            mode === 'Hour' || mode === 'Minutes') &&\n            this.parent.nonWorkingDayIndex.indexOf(day.getDay()) !== -1;\n    };\n    Timeline.prototype.calculateQuarterEndDate = function (date, count) {\n        var month = date.getMonth();\n        if (count === 3) {\n            if (month >= 0 && month <= 2) {\n                return new Date(date.getFullYear(), 3, 1);\n            }\n            else if (month >= 3 && month <= 5) {\n                return new Date(date.getFullYear(), 6, 1);\n            }\n            else if (month >= 6 && month <= 8) {\n                return new Date(date.getFullYear(), 9, 1);\n            }\n            else {\n                return new Date(date.getFullYear() + 1, 0, 1);\n            }\n        }\n        else {\n            if (month >= 0 && month <= 5) {\n                return new Date(date.getFullYear(), 6, 1);\n            }\n            else {\n                return new Date(date.getFullYear() + 1, 0, 1);\n            }\n        }\n    };\n    Timeline.prototype.calculateTotalHours = function (mode, count) {\n        var totalHour = 0;\n        switch (mode) {\n            case 'Hour':\n                totalHour = 1 * count;\n                break;\n            case 'Day':\n                totalHour = 24 * count;\n                break;\n            case 'Week':\n                totalHour = 7 * 24 * count;\n                break;\n            case 'Minutes':\n                totalHour = count / 60;\n                break;\n        }\n        return totalHour;\n    };\n    /**\n     * To construct template string.\n     *\n     * @param {Date} scheduleWeeks .\n     * @param {string} mode .\n     * @param {string} tier .\n     * @param {boolean} isLast .\n     * @param {number} count .\n     * @param {TimelineFormat} timelineCell .\n     * @returns {string} .\n     * @private\n     */\n    /* eslint-disable-next-line */\n    Timeline.prototype.getHeaterTemplateString = function (scheduleWeeks, mode, tier, isLast, count, timelineCell, isFirstCell) {\n        var parentTr = '';\n        var template;\n        var timelineTemplate = null;\n        if (!isNullOrUndefined(this.parent.timelineTemplate)) {\n            timelineTemplate = this.parent.chartRowsModule.templateCompiler(this.parent.timelineTemplate);\n        }\n        var format = tier === 'topTier' ?\n            this.parent.timelineModule.customTimelineSettings.topTier.format :\n            this.parent.timelineModule.customTimelineSettings.bottomTier.format;\n        var formatter = tier === 'topTier' ?\n            this.parent.timelineModule.customTimelineSettings.topTier.formatter :\n            this.parent.timelineModule.customTimelineSettings.bottomTier.formatter;\n        var thWidth;\n        var date = isNullOrUndefined(formatter) ?\n            this.parent.globalize.formatDate(scheduleWeeks, { format: this.parent.getDateFormat() }) :\n            this.customFormat(scheduleWeeks, format, tier, mode, formatter);\n        thWidth = Math.abs((this.getIncrement(scheduleWeeks, count, mode, isFirstCell) / (1000 * 60 * 60 * 24)) * this.parent.perDayWidth);\n        var incrementValue = this.getIncrement(scheduleWeeks, count, mode);\n        var newDate = new Date(scheduleWeeks.getTime() + incrementValue);\n        var dubNewDate = new Date(scheduleWeeks.getTime() + ((60 * 60 * 1000) * count));\n        var newDateOffset = newDate.getTime();\n        var dubNewDateOffset = dubNewDate.getTime();\n        var timelineStartDate = this.parent.timelineModule.timelineStartDate;\n        var timelineStartTime = timelineStartDate.getTime();\n        var hasDST = this.parent.dataOperation.hasDSTTransition(scheduleWeeks.getFullYear());\n        var timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n        var transitions;\n        var dstStartTime;\n        if (hasDST) {\n            transitions = this.parent.dataOperation.getDSTTransitions(scheduleWeeks.getFullYear(), timeZone);\n            dstStartTime = transitions['dstStart'].getTime();\n        }\n        if ((!this.parent.isInDst(newDate) && this.parent.isInDst(scheduleWeeks)) ||\n            (this.parent.isInDst(newDate) && !this.parent.isInDst(scheduleWeeks)) ||\n            (hasDST && newDateOffset !== dubNewDateOffset && dubNewDateOffset > newDateOffset &&\n                timelineStartTime <= dstStartTime)) {\n            var temp = void 0;\n            var totalHour = 0;\n            var incrementHour = incrementValue / (1000 * 60 * 60);\n            if ((!this.parent.isInDst(newDate) && this.parent.isInDst(scheduleWeeks))) {\n                totalHour = this.calculateTotalHours(mode, count);\n                if (incrementHour !== totalHour && totalHour !== 0 && incrementHour > totalHour) {\n                    temp = this.getIncrement(scheduleWeeks, count, mode) - ((1000 * 60 * 60) * (incrementHour - totalHour));\n                    thWidth = (temp / (1000 * 60 * 60 * 24)) * this.parent.perDayWidth;\n                    if (thWidth === 0 && mode === 'Minutes') {\n                        var perMinuteWidth = this.parent.perDayWidth / 1440;\n                        thWidth = perMinuteWidth * count;\n                    }\n                }\n            }\n            else {\n                var zoomOrTimeline = this.parent.currentZoomingLevel ? this.parent.currentZoomingLevel :\n                    this.parent.timelineSettings;\n                var bottomTierSettings = zoomOrTimeline['bottomTier'] !== null ? zoomOrTimeline['bottomTier'] :\n                    zoomOrTimeline['topTier'];\n                var bottomTierCountIsOneAndUnitIsHour = (bottomTierSettings['count'] === 1 && bottomTierSettings['unit'] === 'Hour');\n                totalHour = this.calculateTotalHours(mode, count);\n                if (incrementHour !== totalHour && incrementHour < totalHour && !(tier === 'topTier' && bottomTierCountIsOneAndUnitIsHour)) {\n                    temp = this.getIncrement(scheduleWeeks, count, mode) + (1000 * 60 * 60);\n                    thWidth = (temp / (1000 * 60 * 60 * 24)) * this.parent.perDayWidth;\n                    if (thWidth === 0 && mode === 'Minutes') {\n                        var perMinuteWidth = this.parent.perDayWidth / 1440;\n                        thWidth = perMinuteWidth * count;\n                    }\n                }\n            }\n        }\n        var cellWidth = thWidth;\n        thWidth = isLast || (isFirstCell && mode !== 'Hour') ? isLast ? this.calculateWidthBetweenTwoDate(mode, scheduleWeeks, this.timelineRoundOffEndDate) :\n            this.calculateWidthBetweenTwoDate(mode, scheduleWeeks, this.calculateQuarterEndDate(scheduleWeeks, count))\n            : thWidth;\n        var isWeekendCell = this.isWeekendHeaderCell(mode, tier, scheduleWeeks);\n        var textClassName = tier === 'topTier' ? ' e-gantt-top-cell-text' : '';\n        if (isFirstCell && scheduleWeeks.getHours() === 20 && count === 12 && tier === 'bottomTier' &&\n            this.parent.timelineModule.customTimelineSettings.bottomTier.unit === 'Hour') {\n            scheduleWeeks.setTime(scheduleWeeks.getTime() - (1000 * 60 * 60 * 20));\n        }\n        var value = (isNullOrUndefined(formatter) ? this.formatDateHeader(format, scheduleWeeks) :\n            this.customFormat(scheduleWeeks, format, tier, mode, formatter));\n        if (!isNullOrUndefined(timelineTemplate)) {\n            var args = {\n                date: date,\n                tier: tier,\n                value: value\n            };\n            template = timelineTemplate(extend({}, args), this.parent, 'TimelineTemplate', this.parent.chartRowsModule.getTemplateID('TimelineTemplate'), false, undefined, null, this.parent['root']);\n        }\n        var className = this.parent.timelineModule.isSingleTier ? cls.timelineSingleHeaderCell : cls.timelineTopHeaderCell;\n        var weekendClass = isWeekendCell ? ' ' + cls.weekendHeaderCell : '';\n        var th = createElement('th', {\n            className: \"\" + className + weekendClass,\n            styles: \"width:\" + thWidth + \"px;\" + (isWeekendCell && this.customTimelineSettings.weekendBackground ? 'background-color:' + this.customTimelineSettings.weekendBackground + ';' : '')\n        });\n        th.tabIndex = -1;\n        th.setAttribute('aria-label', this.parent.localeObj.getConstant('timelineCell') + \" \" + date);\n        var div = createElement('div', {\n            className: \"\" + cls.timelineHeaderCellLabel + textClassName,\n            styles: \"width:\" + (thWidth - 1) + \"px;\"\n        });\n        div.title = this.parent.timelineSettings.showTooltip ? date : '';\n        div.textContent = value;\n        if (this.parent.isReact && !isNullOrUndefined(template) && template.length > 0) {\n            template[0]['style'].width = '100%';\n            template[0]['style'].height = '100%';\n        }\n        if (!isNullOrUndefined(timelineTemplate) && !isNullOrUndefined(template) && template.length > 0) {\n            append(template, th);\n        }\n        else {\n            th.append(div);\n        }\n        /* eslint-disable-next-line */\n        parentTr += th.outerHTML;\n        if ((this.isSingleTier || tier === 'topTier') && !isLast) {\n            this.totalTimelineWidth = this.totalTimelineWidth + thWidth;\n        }\n        else if ((this.isSingleTier || tier === 'topTier') && isLast) {\n            this.totalTimelineWidth = (this.totalTimelineWidth - cellWidth) + thWidth;\n        }\n        // PDf export collection\n        timelineCell.value = value;\n        timelineCell.isWeekend = isWeekendCell;\n        timelineCell.width = thWidth;\n        return th;\n    };\n    /**\n     * To calculate last 'th' width.\n     *\n     * @param {string} mode .\n     * @param {Date} scheduleWeeks .\n     * @param {Date} endDate .\n     * @returns {number} .\n     * @private\n     */\n    Timeline.prototype.calculateWidthBetweenTwoDate = function (mode, scheduleWeeks, endDate) {\n        var sDate = new Date(scheduleWeeks.getTime());\n        var eDate = new Date(endDate.getTime());\n        this.parent.dateValidationModule['updateDateWithTimeZone'](sDate, eDate);\n        var timeDifference = (eDate.getTime() - sDate.getTime());\n        var balanceDay = (timeDifference / (1000 * 60 * 60 * 24));\n        return balanceDay * this.parent.perDayWidth;\n    };\n    /**\n     * To calculate timeline width.\n     *\n     * @returns {void} .\n     * @private\n     */\n    Timeline.prototype.timelineWidthCalculation = function () {\n        var timelineUnitSize = this.customTimelineSettings.timelineUnitSize;\n        var bottomTierCount = this.customTimelineSettings.bottomTier.count;\n        var topTierCount = this.customTimelineSettings.topTier.count;\n        this.bottomTierCellWidth = timelineUnitSize;\n        if (this.bottomTier === 'None') {\n            this.parent.perDayWidth = this.getPerDayWidth(timelineUnitSize, topTierCount, this.topTier);\n        }\n        else {\n            this.parent.perDayWidth = this.getPerDayWidth(timelineUnitSize, bottomTierCount, this.bottomTier);\n        }\n        this.topTierCellWidth = this.bottomTier !== 'None' ? this.topTier === 'Week' ?\n            this.parent.perDayWidth * 7 : this.topTier === 'Hour' ?\n            this.parent.perDayWidth / 24 : this.topTier === 'Minutes' ?\n            this.parent.perDayWidth / (24 * 60) : this.parent.perDayWidth : timelineUnitSize;\n        this.topTierCellWidth = this.isSingleTier ? this.topTierCellWidth : this.topTierCellWidth * topTierCount;\n    };\n    /**\n     * To validate per day width.\n     *\n     * @param {number} timelineUnitSize .\n     * @param {number} bottomTierCount .\n     * @param {string} mode .\n     * @returns {number} .\n     * @private\n     */\n    Timeline.prototype.getPerDayWidth = function (timelineUnitSize, bottomTierCount, mode) {\n        var perDayWidth;\n        switch (mode) {\n            case 'Year':\n                perDayWidth = (timelineUnitSize / bottomTierCount) / (12 * 28);\n                break;\n            case 'Month':\n                perDayWidth = (timelineUnitSize / bottomTierCount) / 28;\n                break;\n            case 'Week':\n                perDayWidth = (timelineUnitSize / bottomTierCount) / 7;\n                break;\n            case 'Day':\n                perDayWidth = timelineUnitSize / bottomTierCount;\n                break;\n            case 'Hour':\n                perDayWidth = (24 / bottomTierCount) * timelineUnitSize;\n                break;\n            case 'Minutes':\n                perDayWidth = ((60 * 24) / bottomTierCount) * timelineUnitSize;\n                break;\n        }\n        return perDayWidth;\n    };\n    /**\n     * To validate project start date and end date.\n     *\n     * @returns {void} .\n     * @private\n     */\n    Timeline.prototype.roundOffDays = function () {\n        var startDate = this.parent.cloneProjectStartDate;\n        var endDate = this.parent.cloneProjectEndDate;\n        var tierMode = this.topTier === 'None' ? this.bottomTier : this.topTier;\n        if (this.parent.isTimelineRoundOff) {\n            if (tierMode === 'Year') {\n                startDate = new Date(startDate.getFullYear(), 0, 1);\n                endDate = new Date(endDate.getFullYear(), 11, 31);\n            }\n            else if (tierMode === 'Month') {\n                startDate = new Date(startDate.getFullYear(), startDate.getMonth(), 1);\n                endDate = new Date(endDate.getFullYear(), endDate.getMonth() + 1, 0);\n            }\n            else if (tierMode === 'Week') {\n                var dayIndex = !isNullOrUndefined(this.customTimelineSettings.weekStartDay) ?\n                    this.parent.timelineModule.customTimelineSettings.weekStartDay : 0;\n                var roundOffStartDate = startDate.getDay() < dayIndex ?\n                    (startDate.getDate()) - (7 - dayIndex + startDate.getDay()) :\n                    (startDate.getDate()) - startDate.getDay() + dayIndex;\n                startDate.setDate(roundOffStartDate);\n                var first = endDate.getDate() - endDate.getDay();\n                var last = first + 6 + dayIndex;\n                endDate.setDate(last);\n            }\n            if (tierMode === 'Hour') {\n                startDate.setMinutes(0);\n            }\n            else if (tierMode === 'Minutes') {\n                startDate.setSeconds(0);\n            }\n            else {\n                startDate.setHours(0, 0, 0, 0);\n            }\n        }\n        this.timelineStartDate = startDate;\n        this.timelineEndDate = endDate;\n        this.timelineRoundOffEndDate = this.getTimelineRoundOffEndDate(this.timelineEndDate);\n    };\n    /**\n     * To validate project start date and end date.\n     *\n     * @param {string} mode .\n     * @param {string} span .\n     * @param {Date} startDate .\n     * @param {Date} endDate .\n     * @returns {void} .\n     * @private\n     */\n    Timeline.prototype.updateScheduleDatesByToolBar = function (mode, span, startDate, endDate) {\n        if (mode === 'Year') {\n            if (span === 'prevTimeSpan') {\n                if (startDate.getMonth() === 0) {\n                    startDate = new Date(startDate.getFullYear() - 1, 0, 1);\n                }\n                else {\n                    startDate = new Date(startDate.getFullYear(), 0, 1);\n                }\n            }\n            else {\n                if (endDate.getMonth() === 11) {\n                    endDate = new Date(endDate.getFullYear() + 1, 0, 1);\n                }\n                else {\n                    endDate = new Date(endDate.getFullYear(), 12, 1);\n                }\n            }\n        }\n        if (mode === 'Month') {\n            if (span === 'prevTimeSpan') {\n                if (startDate.getDate() === 1) {\n                    startDate = new Date(startDate.getFullYear(), startDate.getMonth() - 1, 1);\n                }\n                else {\n                    startDate = new Date(startDate.getFullYear(), startDate.getMonth(), 1);\n                }\n            }\n            else {\n                endDate = new Date(endDate.getFullYear(), endDate.getMonth() + 1, 1);\n            }\n        }\n        if (mode === 'Week') {\n            var dayIndex = this.parent.timelineModule.customTimelineSettings.weekStartDay;\n            var dayIntervel = void 0;\n            if (span === 'prevTimeSpan') {\n                dayIntervel = startDate.getDay() < dayIndex ? 7 - (dayIndex - startDate.getDay()) :\n                    startDate.getDay() - dayIndex;\n                startDate.setHours(0, 0, 0, 0);\n                if (dayIntervel === 0) {\n                    startDate.setDate(startDate.getDate() - 7);\n                }\n                else {\n                    startDate.setDate(startDate.getDate() - dayIntervel);\n                }\n            }\n            else {\n                dayIntervel = endDate.getDay() < dayIndex ? (dayIndex - endDate.getDay()) :\n                    (7 - endDate.getDay()) + dayIndex;\n                endDate.setHours(0, 0, 0, 0);\n                if (dayIntervel === 0) {\n                    endDate.setDate(endDate.getDate() + 6);\n                }\n                else {\n                    endDate.setDate(endDate.getDate() + dayIntervel);\n                }\n            }\n        }\n        if (mode === 'Day') {\n            if (span === 'prevTimeSpan') {\n                if (startDate.getHours() === 0) {\n                    startDate.setTime(startDate.getTime() - (1000 * 60 * 60 * 24));\n                }\n                else {\n                    startDate.setHours(0);\n                }\n            }\n            else {\n                if (endDate.getHours() === 0) {\n                    endDate.setTime(endDate.getTime() + (1000 * 60 * 60 * 24));\n                }\n                else {\n                    endDate.setHours(24);\n                }\n            }\n        }\n        if (mode === 'Hour') {\n            if (span === 'prevTimeSpan') {\n                if (startDate.getMinutes() === 0) {\n                    startDate.setTime(startDate.getTime() - (1000 * 60 * 60));\n                }\n                else {\n                    startDate.setMinutes(0);\n                }\n            }\n            else {\n                if (endDate.getMinutes() === 0) {\n                    endDate.setTime(endDate.getTime() + (1000 * 60 * 60));\n                }\n                else {\n                    endDate.setMinutes(60);\n                }\n            }\n        }\n        if (mode === 'Minutes') {\n            if (span === 'prevTimeSpan') {\n                if (startDate.getSeconds() === 0) {\n                    startDate.setTime(startDate.getTime() - (1000 * 60));\n                }\n                else {\n                    startDate.setSeconds(0);\n                }\n            }\n            else {\n                if (endDate.getSeconds() === 0) {\n                    endDate.setTime(endDate.getTime() + (1000 * 60));\n                }\n                else {\n                    endDate.setSeconds(60);\n                }\n            }\n        }\n        this.parent.cloneProjectStartDate = startDate;\n        this.parent.cloneProjectEndDate = endDate;\n    };\n    /**\n     * To validate project start date and end date.\n     *\n     * @param {IGanttData[]} tempArray .\n     * @param {string} action .\n     * @returns {void} .\n     * @private\n     */\n    Timeline.prototype.updateTimeLineOnEditing = function (tempArray, action) {\n        if (tempArray[0].length >= 1) {\n            for (var i = 0; i < tempArray.length; i++) {\n                var temp = tempArray[parseInt(i.toString(), 10)];\n                var filteredStartDateRecord = temp.filter(function (pdc) { return !isNullOrUndefined(pdc.ganttProperties.startDate); });\n                var filteredEndDateRecord = temp.filter(function (pdc) { return !isNullOrUndefined(pdc.ganttProperties.endDate); });\n                var minStartDate = filteredStartDateRecord.length > 0 ?\n                    new Date(DataUtil.aggregates.min(filteredStartDateRecord, 'ganttProperties.startDate')) : null;\n                var minEndDate = filteredStartDateRecord.length > 0 ?\n                    new Date(DataUtil.aggregates.min(filteredEndDateRecord, 'ganttProperties.endDate')) : null;\n                var maxEndDate = filteredEndDateRecord.length > 0 ?\n                    new Date(DataUtil.aggregates.max(filteredEndDateRecord, 'ganttProperties.endDate')) : null;\n                var validStartDate = new Date(this.parent.dataOperation.checkStartDate(this.timelineStartDate).getTime());\n                var validEndDate = new Date(this.parent.dataOperation.checkEndDate(this.timelineEndDate).getTime());\n                var maxStartLeft = isNullOrUndefined(minStartDate) ?\n                    null : this.parent.dataOperation.getTaskLeft(minStartDate, false);\n                var maxEndLeft = isNullOrUndefined(maxEndDate) ?\n                    null : this.parent.dataOperation.getTaskLeft(maxEndDate, false);\n                var validStartLeft = this.parent.dataOperation.getTaskLeft(validStartDate, false);\n                var validEndLeft = this.parent.dataOperation.getTaskLeft(validEndDate, false);\n                var isChanged = void 0;\n                var taskbarModule = this.parent.editModule.taskbarEditModule;\n                var startDate = filteredStartDateRecord.length > 0 ?\n                    new Date(DataUtil.aggregates.min(filteredStartDateRecord, 'ganttProperties.startDate')).setHours(0, 0, 0, 0) : null;\n                var timelineStartDate = new Date(this.timelineStartDate.getTime()).setHours(0, 0, 0, 0);\n                if (!isNullOrUndefined(maxStartLeft) && (((((!isNullOrUndefined(taskbarModule)) && ((taskbarModule.taskBarEditAction && taskbarModule.taskBarEditAction !== 'RightResizing') || isNullOrUndefined(taskbarModule.taskBarEditAction)))) &&\n                    (startDate <= timelineStartDate))) && (maxStartLeft < this.bottomTierCellWidth || maxStartLeft <= validStartLeft)) {\n                    isChanged = 'prevTimeSpan';\n                    minStartDate = minStartDate > this.timelineStartDate ? this.timelineStartDate : minStartDate;\n                }\n                else {\n                    minStartDate = this.timelineStartDate;\n                }\n                if (!isNullOrUndefined(maxEndLeft) && (maxEndLeft >= ((this.parent.enableTimelineVirtualization ?\n                    this.wholeTimelineWidth : this.totalTimelineWidth) - this.bottomTierCellWidth) &&\n                    maxEndLeft > validEndLeft)) {\n                    isChanged = isChanged === 'prevTimeSpan' ? 'both' : 'nextTimeSpan';\n                    maxEndDate = maxEndDate < this.timelineEndDate ? this.timelineEndDate : maxEndDate;\n                }\n                else {\n                    maxEndDate = this.timelineEndDate;\n                }\n                if (isChanged) {\n                    this.performTimeSpanAction(isChanged, action, minStartDate, maxEndDate);\n                }\n                else if (!isNullOrUndefined(temp[0].ganttProperties.segments)) {\n                    this.parent.dataOperation.updateWidthLeft(temp[0]);\n                }\n                if (!isNullOrUndefined(minStartDate) && !isNullOrUndefined(minEndDate) && minEndDate <= minStartDate && (action === 'CellEditing' || action === 'DialogEditing') && this.parent.allowUnscheduledTasks) {\n                    minStartDate = new Date(Math.min(minStartDate.getTime(), minEndDate.getTime()));\n                    minStartDate = new Date(Math.min(minStartDate.getTime(), this.timelineStartDate.getTime()));\n                    this.performTimeSpanAction('prevTimeSpan', action, minStartDate, maxEndDate);\n                }\n                else if (isNullOrUndefined(minEndDate) && minEndDate <= minStartDate && (action === 'CellEditing' || action === 'DialogEditing') && this.parent.allowUnscheduledTasks && tempArray[0].length === 1 && !isNullOrUndefined(tempArray[0][0].ganttProperties.endDate)) {\n                    minStartDate = new Date(Math.min(tempArray[0][0].ganttProperties.endDate.getTime(), minStartDate.getTime()));\n                    this.performTimeSpanAction('prevTimeSpan', action, minStartDate, maxEndDate);\n                }\n                break;\n            }\n        }\n    };\n    /**\n     * To validate project start date and end date on editing action\n     *\n     * @param {string} type .\n     * @param {string} isFrom .\n     * @param {Date} startDate .\n     * @param {Date} endDate .\n     * @param {string} mode .\n     * @returns {void} .\n     * @private\n     */\n    Timeline.prototype.performTimeSpanAction = function (type, isFrom, startDate, endDate, mode) {\n        mode = !isNullOrUndefined(mode) ? mode : this.parent.timelineModule.topTier === 'None' ?\n            this.parent.timelineModule.bottomTier : this.parent.timelineModule.topTier;\n        var projectStartDate = new Date(this.parent.cloneProjectStartDate.getTime());\n        var projectEndDate = new Date(this.parent.cloneProjectEndDate.getTime());\n        if (isFrom !== 'publicMethod' && type === 'both') {\n            this.updateScheduleDatesByToolBar(mode, 'prevTimeSpan', startDate, endDate);\n            this.updateScheduleDatesByToolBar(mode, 'nextTimeSpan', new Date(this.parent.cloneProjectStartDate.getTime()), endDate);\n        }\n        else {\n            this.updateScheduleDatesByToolBar(mode, type, startDate, endDate);\n        }\n        var args = this.timeSpanActionEvent('actionBegin', type, isFrom);\n        if (!args.cancel) {\n            this.restrictRender = true;\n            this.performedTimeSpanAction = true;\n            var previousScrollLeft = this.parent.ganttChartModule.scrollElement.scrollLeft;\n            this.parent.updateProjectDates(args.projectStartDate, args.ProjectEndDate, args.isTimelineRoundOff, isFrom);\n            if (type === 'prevTimeSpan' && isFrom === 'publicMethod') {\n                this.parent.ganttChartModule.updateScrollLeft(0);\n                this.parent.timelineModule.isZoomToFit = false;\n            }\n            else if (type === 'nextTimeSpan' && isFrom === 'publicMethod') {\n                this.parent.ganttChartModule.updateScrollLeft(this.parent.enableTimelineVirtualization ?\n                    this.wholeTimelineWidth : this.totalTimelineWidth);\n                this.parent.timelineModule.isZoomToFit = false;\n            }\n            else if (type === 'nextTimeSpan' && isFrom === 'TaskbarEditing') {\n                var currentScrollLeft = document.getElementsByClassName('e-chart-scroll-container e-content')[0].scrollLeft;\n                this.parent.element.querySelector('.e-timeline-header-container').scrollLeft = currentScrollLeft;\n                this.parent.timelineModule.isZoomToFit = false;\n            }\n            if (isFrom === 'TaskbarEditing' && this.parent.enableTimelineVirtualization && (this.wholeTimelineWidth > this.parent.element.offsetWidth * 3 || (isNullOrUndefined(this.parent.projectStartDate) && isNullOrUndefined(this.parent.projectEndDate)))) {\n                this.parent.ganttChartModule.scrollObject.setScrollLeft(previousScrollLeft);\n                this.parent.ganttChartModule.scrollObject.updateContent();\n            }\n            this.parent.timelineModule.timeSpanActionEvent('actionComplete', type, isFrom);\n        }\n        else {\n            this.parent.cloneProjectStartDate = projectStartDate;\n            this.parent.cloneProjectEndDate = projectEndDate;\n        }\n    };\n    /**\n     * To validate project start date and end date.\n     *\n     * @param {string} eventType .\n     * @param {string} requestType .\n     * @param {string} isFrom .\n     * @returns {void}\n     * @private\n     */\n    Timeline.prototype.timeSpanActionEvent = function (eventType, requestType, isFrom) {\n        var args = {};\n        args.projectStartDate = new Date(this.parent.cloneProjectStartDate.getTime());\n        args.ProjectEndDate = new Date(this.parent.cloneProjectEndDate.getTime());\n        args.requestType = isFrom === 'publicMethod' ? requestType : isFrom === 'beforeAdd' ?\n            'TimelineRefreshOnAdd' : isFrom === 'TaskbarEditing' ? 'TimelineRefreshOnEdit' : requestType;\n        if (eventType === 'actionBegin') {\n            args.isTimelineRoundOff = this.parent.isTimelineRoundOff;\n            args.cancel = false;\n        }\n        args.action = 'TimescaleUpdate';\n        this.parent.trigger(eventType, args);\n        return args;\n    };\n    return Timeline;\n}());\nexport { Timeline };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}