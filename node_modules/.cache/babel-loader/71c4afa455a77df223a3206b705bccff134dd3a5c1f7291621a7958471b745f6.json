{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { addClass, detach, EventHandler, isNullOrUndefined, Ajax } from '@syncfusion/ej2-base';\nimport { Browser, closest, removeClass, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Uploader } from '@syncfusion/ej2-inputs';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, hasClass, convertToBlob } from '../base/util';\nimport { isIDevice } from '../../common/util';\n/**\n * `Audio` module is used to handle audio actions.\n */\nvar Audio = /** @class */function () {\n  function Audio(parent, serviceLocator) {\n    this.isAudioUploaded = false;\n    this.isAllowedTypes = true;\n    this.deletedAudio = [];\n    this.parent = parent;\n    this.rteID = parent.element.id;\n    this.i10n = serviceLocator.getService('rteLocale');\n    this.rendererFactory = serviceLocator.getService('rendererFactory');\n    this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n    this.addEventListener();\n    this.docClick = this.onDocumentClick.bind(this);\n    this.isDestroyed = false;\n  }\n  Audio.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.keyDown, this.onKeyDown, this);\n    this.parent.on(events.keyUp, this.onKeyUp, this);\n    this.parent.on(events.insertAudio, this.insertingAudio, this);\n    this.parent.on(events.initialEnd, this.afterRender, this);\n    this.parent.on(events.dynamicModule, this.afterRender, this);\n    this.parent.on(events.showAudioDialog, this.showDialog, this);\n    this.parent.on(events.closeAudioDialog, this.closeDialog, this);\n    this.parent.on(events.audioToolbarAction, this.onToolbarAction, this);\n    this.parent.on(events.dropDownSelect, this.alignmentSelect, this);\n    this.parent.on(events.audioDelete, this.deleteAudio, this);\n    this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n    this.parent.on(events.insertCompleted, this.showAudioQuickToolbar, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.iframeMouseDown, this.closeDialog, this);\n  };\n  Audio.prototype.removeEventListener = function () {\n    this.parent.off(events.keyDown, this.onKeyDown);\n    this.parent.off(events.keyUp, this.onKeyUp);\n    this.parent.off(events.insertAudio, this.insertingAudio);\n    this.parent.off(events.initialEnd, this.afterRender);\n    this.parent.off(events.dynamicModule, this.afterRender);\n    this.parent.off(events.showAudioDialog, this.showDialog);\n    this.parent.off(events.closeAudioDialog, this.closeDialog);\n    this.parent.off(events.audioToolbarAction, this.onToolbarAction);\n    this.parent.off(events.dropDownSelect, this.alignmentSelect);\n    this.parent.off(events.audioDelete, this.deleteAudio);\n    this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n    this.parent.off(events.insertCompleted, this.showAudioQuickToolbar);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.iframeMouseDown, this.closeDialog);\n    if (!isNullOrUndefined(this.contentModule)) {\n      EventHandler.remove(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.touchStart);\n      EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.audioClick);\n      this.parent.element.ownerDocument.removeEventListener('mousedown', this.docClick);\n      this.docClick = null;\n    }\n  };\n  Audio.prototype.afterRender = function () {\n    this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n    EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.touchStart, this);\n    EventHandler.add(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.audioClick, this);\n    this.parent.element.ownerDocument.addEventListener('mousedown', this.docClick);\n  };\n  Audio.prototype.checkAudioBack = function (range) {\n    if (range.startContainer.nodeName === '#text' && range.startOffset === 0 && !isNOU(range.startContainer.previousSibling) && this.isAudioElem(range.startContainer.previousSibling)) {\n      this.deletedAudio.push(range.startContainer.previousSibling);\n    } else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset - 1]) && this.isAudioElem(range.startContainer.childNodes[range.startOffset - 1])) {\n      this.deletedAudio.push(range.startContainer.childNodes[range.startOffset - 1]);\n    }\n  };\n  Audio.prototype.checkAudioDel = function (range) {\n    if (range.startContainer.nodeName === '#text' && range.startOffset === range.startContainer.textContent.length && !isNOU(range.startContainer.nextSibling) && range.startContainer.nextSibling.nodeName === 'AUDIO') {\n      this.deletedAudio.push(range.startContainer.nextSibling);\n    } else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset]) && this.isAudioElem(range.startContainer.childNodes[range.startOffset])) {\n      this.deletedAudio.push(range.startContainer.childNodes[range.startOffset]);\n    }\n  };\n  Audio.prototype.undoStack = function (args) {\n    if ((args.subCommand.toLowerCase() === 'undo' || args.subCommand.toLowerCase() === 'redo') && this.parent.editorMode === 'HTML') {\n      for (var i = 0; i < this.parent.formatter.getUndoRedoStack().length; i++) {\n        var temp = this.parent.createElement('div');\n        var contentElem = this.parent.formatter.getUndoRedoStack()[i].text;\n        temp.appendChild(contentElem.cloneNode(true));\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  Audio.prototype.touchStart = function (e, ele) {\n    if (this.parent.readonly) {\n      return;\n    }\n    this.prevSelectedAudEle = this.audEle;\n  };\n  Audio.prototype.onToolbarAction = function (args) {\n    if (isIDevice()) {\n      this.parent.notify(events.selectionRestore, {});\n    }\n    var item = args.args.item;\n    switch (item.subCommand) {\n      case 'AudioReplace':\n        this.parent.notify(events.insertAudio, args);\n        break;\n      case 'AudioRemove':\n        this.parent.notify(events.audioDelete, args);\n        break;\n    }\n  };\n  // eslint-disable-next-line\n  Audio.prototype.onKeyUp = function (event) {\n    if (!isNOU(this.deletedAudio) && this.deletedAudio.length > 0) {\n      for (var i = 0; i < this.deletedAudio.length; i++) {\n        var args = {\n          element: this.deletedAudio[i].querySelector('audio'),\n          src: this.deletedAudio[i].querySelector('source').getAttribute('src')\n        };\n        this.parent.trigger(events.afterMediaDelete, args);\n      }\n    }\n  };\n  Audio.prototype.onKeyDown = function (event) {\n    var originalEvent = event.args;\n    var range;\n    var save;\n    var selectNodeEle;\n    var selectParentEle;\n    this.deletedAudio = [];\n    var isCursor;\n    var keyCodeValues = [27, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 44, 45, 9, 16, 17, 18, 19, 20, 33, 34, 35, 36, 37, 38, 39, 40, 91, 92, 93, 144, 145, 182, 183];\n    if (this.parent.editorMode === 'HTML') {\n      range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      isCursor = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n    }\n    if (!isCursor && this.parent.editorMode === 'HTML' && keyCodeValues.indexOf(originalEvent.which) < 0) {\n      var nodes = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n      for (var i = 0; i < nodes.length; i++) {\n        if (this.isAudioElem(nodes[i])) {\n          this.deletedAudio.push(nodes[i]);\n        }\n      }\n    }\n    if (this.parent.editorMode === 'HTML' && (originalEvent.which === 8 && originalEvent.code === 'Backspace' || originalEvent.which === 46 && originalEvent.code === 'Delete')) {\n      var isCursor_1 = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n      if (originalEvent.which === 8 && originalEvent.code === 'Backspace' && isCursor_1) {\n        this.checkAudioBack(range);\n      } else if (originalEvent.which === 46 && originalEvent.code === 'Delete' && isCursor_1) {\n        this.checkAudioDel(range);\n      }\n    }\n    if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && originalEvent.code !== 'KeyK') {\n      range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n      selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n      if (!originalEvent.ctrlKey && originalEvent.key && (originalEvent.key.length === 1 || originalEvent.action === 'enter') && this.isAudioElem(selectParentEle[0]) && selectParentEle[0].parentElement) {\n        var prev = selectParentEle[0].parentElement.childNodes[0];\n        this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), prev, prev, prev.textContent.length, prev.textContent.length);\n        removeClass([selectParentEle[0]], classes.CLS_AUD_FOCUS);\n        this.quickToolObj.audioQTBar.hidePopup();\n      }\n    }\n    if (originalEvent.ctrlKey && (originalEvent.keyCode === 89 || originalEvent.keyCode === 90)) {\n      this.undoStack({\n        subCommand: originalEvent.keyCode === 90 ? 'undo' : 'redo'\n      });\n    }\n    if (originalEvent.keyCode === 8 || originalEvent.keyCode === 46) {\n      if (selectNodeEle && this.isAudioElem(selectNodeEle[0]) && selectNodeEle.length < 1) {\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n          save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n        }\n        originalEvent.preventDefault();\n        var event_1 = {\n          selectNode: selectNodeEle,\n          selection: save,\n          selectParent: selectParentEle,\n          args: {\n            item: {\n              command: 'Audios',\n              subCommand: 'AudioRemove'\n            },\n            originalEvent: originalEvent\n          }\n        };\n        this.deleteAudio(event_1, originalEvent.keyCode);\n      }\n    }\n    switch (originalEvent.action) {\n      case 'escape':\n        if (!isNullOrUndefined(this.dialogObj)) {\n          this.dialogObj.close();\n        }\n        break;\n      case 'backspace':\n      case 'delete':\n        for (var i = 0; i < this.deletedAudio.length; i++) {\n          var src = this.deletedAudio[i].src;\n          this.audioRemovePost(src);\n        }\n        if (this.parent.editorMode !== 'Markdown') {\n          if (range.startContainer.nodeType === 3) {\n            if (originalEvent.code === 'Backspace') {\n              if (range.startContainer.previousElementSibling && range.startOffset === 0 && range.startContainer.previousElementSibling.classList.contains(classes.CLS_AUDIOWRAP)) {\n                detach(range.startContainer.previousElementSibling);\n              }\n            } else {\n              if (range.startContainer.nextElementSibling && range.endContainer.textContent.length === range.endOffset && range.startContainer.nextElementSibling.classList.contains(classes.CLS_AUDIOWRAP)) {\n                detach(range.startContainer.nextElementSibling);\n              }\n            }\n          } else if (range.startContainer.nodeType === 1 && range.startContainer.classList && (range.startContainer.classList.contains(classes.CLS_AUDIOWRAP) || range.startContainer.classList.contains(classes.CLS_CLICKELEM) || range.startContainer.classList.contains(classes.CLS_VID_CLICK_ELEM))) {\n            detach(range.startContainer);\n          }\n        }\n        break;\n      case 'insert-audio':\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n          save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n        }\n        this.openDialog(true, originalEvent, save, selectNodeEle, selectParentEle);\n        originalEvent.preventDefault();\n        break;\n    }\n    if (originalEvent.ctrlKey && originalEvent.key === 'a') {\n      this.handleSelectAll();\n    }\n  };\n  Audio.prototype.handleSelectAll = function () {\n    var audioFocusNodes = this.parent.inputElement.querySelectorAll('.' + classes.CLS_AUD_FOCUS);\n    removeClass(audioFocusNodes, classes.CLS_AUD_FOCUS);\n  };\n  Audio.prototype.openDialog = function (isInternal, event, selection, ele, parentEle) {\n    var range;\n    var save;\n    var selectNodeEle;\n    var selectParentEle;\n    if (!isInternal && !isNOU(this.parent.formatter.editorManager.nodeSelection)) {\n      range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n      selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n      selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n    } else {\n      save = selection;\n      selectNodeEle = ele;\n      selectParentEle = parentEle;\n    }\n    if (this.parent.editorMode === 'HTML') {\n      this.insertAudio({\n        args: {\n          item: {\n            command: 'Audios',\n            subCommand: 'Audio'\n          },\n          originalEvent: event,\n          name: !isInternal ? 'showDialog' : null\n        },\n        selectNode: selectNodeEle,\n        selection: save,\n        selectParent: selectParentEle\n      });\n    }\n  };\n  Audio.prototype.showDialog = function () {\n    this.openDialog(false);\n  };\n  Audio.prototype.closeDialog = function () {\n    if (this.dialogObj) {\n      this.dialogObj.hide({\n        returnValue: true\n      });\n    }\n  };\n  Audio.prototype.deleteAudio = function (e, keyCode) {\n    if (!this.isAudioElem(e.selectNode[0])) {\n      return;\n    }\n    if (this.audEle) {\n      if (e.selectNode[0].nodeType === 3) {\n        e.selectNode[0] = this.audEle;\n      } else if (this.isAudioElem(e.selectNode[0])) {\n        e.selectNode[0] = e.selectNode[0].classList.contains(classes.CLS_AUDIOWRAP) ? e.selectNode[0] : e.selectNode[0].parentElement;\n      }\n    }\n    var args = {\n      element: e.selectNode[0].querySelector('audio'),\n      src: e.selectNode[0].querySelector('source').getAttribute('src')\n    };\n    if (this.parent.formatter.getUndoRedoStack().length === 0) {\n      this.parent.formatter.saveData();\n    }\n    e.selection.restore();\n    this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, {\n      selectNode: e.selectNode,\n      subCommand: e.args.item.subCommand\n    });\n    this.audioRemovePost(args.src);\n    if (this.quickToolObj && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n      this.quickToolObj.audioQTBar.hidePopup();\n    }\n    if (isNullOrUndefined(keyCode)) {\n      this.parent.trigger(events.afterMediaDelete, args);\n    }\n  };\n  Audio.prototype.audioRemovePost = function (src) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var proxy = this;\n    var absoluteUrl = '';\n    if (isNOU(this.parent.insertAudioSettings.removeUrl) || this.parent.insertAudioSettings.removeUrl === '') {\n      return;\n    }\n    if (src.indexOf('http://') > -1 || src.indexOf('https://') > -1) {\n      absoluteUrl = src;\n    } else {\n      absoluteUrl = new URL(src, document.baseURI).href;\n    }\n    this.removingAudioName = absoluteUrl.replace(/^.*[\\\\/]/, '');\n    var xhr = new XMLHttpRequest();\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    xhr.addEventListener('readystatechange', function () {\n      if (this.readyState === 4 && this.status === 200) {\n        proxy.triggerPost(this.response);\n      }\n    });\n    xhr.open('GET', absoluteUrl);\n    xhr.responseType = 'blob';\n    xhr.send();\n  };\n  Audio.prototype.triggerPost = function (response) {\n    var removeUrl = this.parent.insertAudioSettings.removeUrl;\n    if (isNOU(removeUrl) || removeUrl === '') {\n      return;\n    }\n    var file = new File([response], this.removingAudioName);\n    var ajax = new Ajax(removeUrl, 'POST', true, null);\n    var formData = new FormData();\n    formData.append('UploadFiles', file);\n    ajax.send(formData);\n  };\n  Audio.prototype.audioClick = function (e) {\n    if (Browser.isDevice) {\n      if (this.isAudioElem(e.target)) {\n        this.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n        e.target.focus();\n      } else {\n        if (!this.parent.readonly) {\n          this.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n        }\n      }\n    }\n    if (this.isAudioElem(e.target)) {\n      this.audEle = e.target.querySelector('audio');\n      e.preventDefault();\n    }\n  };\n  Audio.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n    if (isNOU(this.contentModule.getEditPanel())) {\n      return;\n    }\n    if (this.isAudioElem(target)) {\n      this.audEle = target.querySelector('audio');\n    }\n    if (!isNullOrUndefined(this.dialogObj) && (\n    // eslint-disable-next-line\n    !closest(target, '[id=' + \"'\" + this.dialogObj.element.id + \"'\" + ']') && this.parent.toolbarSettings.enable && this.parent.getToolbarElement() && !this.parent.getToolbarElement().contains(e.target) || this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) && !closest(target, '#' + this.parent.getID() + '_toolbar_Audio') && !target.querySelector('#' + this.parent.getID() + '_toolbar_Audio'))) {\n      /* eslint-disable */\n      if (e.offsetX > e.target.clientWidth || e.offsetY > e.target.clientHeight) {} else {\n        this.parent.notify(events.documentClickClosedBy, {\n          closedBy: \"outside click\"\n        });\n        this.dialogObj.hide({\n          returnValue: true\n        });\n        this.parent.isBlur = true;\n        dispatchEvent(this.parent.element, 'focusout');\n      }\n      /* eslint-enable */\n    }\n    if (this.contentModule.getEditPanel().querySelector('.' + classes.CLS_AUD_FOCUS)) {\n      if (!this.isAudioElem(e.target) && !isNOU(this.audEle)) {\n        this.audEle.style.outline = '';\n      } else if (!isNOU(this.prevSelectedAudEle) && this.prevSelectedAudEle !== target) {\n        this.prevSelectedAudEle.style.outline = '';\n      }\n    }\n    if (this.parent.inlineMode.enable && target && this.dialogObj && !closest(target, '#' + this.dialogObj.element.id)) {\n      this.dialogObj.hide();\n    }\n  };\n  Audio.prototype.alignmentSelect = function (e) {\n    var item = e.item;\n    if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Audios') {\n      return;\n    }\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n    var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n    selectNodeEle = [this.audEle];\n    var args = {\n      args: e,\n      selectNode: selectNodeEle\n    };\n    if (this.parent.formatter.getUndoRedoStack().length === 0) {\n      this.parent.formatter.saveData();\n    }\n    switch (item.subCommand) {\n      case 'Inline':\n        this.inline(args);\n        break;\n      case 'Break':\n        this.break(args);\n        break;\n    }\n    if (this.quickToolObj && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n      this.quickToolObj.audioQTBar.hidePopup();\n      removeClass([selectNodeEle[0]], classes.CLS_AUD_FOCUS);\n    }\n  };\n  Audio.prototype.break = function (e) {\n    if (e.selectNode[0].nodeName !== 'AUDIO') {\n      return;\n    }\n    var subCommand = e.args.item && e.args.item.subCommand ? e.args.item.subCommand : 'Break';\n    this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, {\n      selectNode: e.selectNode,\n      subCommand: subCommand\n    });\n  };\n  Audio.prototype.inline = function (e) {\n    if (e.selectNode[0].nodeName !== 'AUDIO') {\n      return;\n    }\n    var subCommand = e.args.item && e.args.item.subCommand ? e.args.item.subCommand : 'Inline';\n    this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, {\n      selectNode: e.selectNode,\n      subCommand: subCommand\n    });\n  };\n  Audio.prototype.editAreaClickHandler = function (e) {\n    if (this.parent.readonly) {\n      this.hideAudioQuickToolbar();\n      return;\n    }\n    var args = e.args;\n    var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n    if (args.which === 2 || showOnRightClick && args.which === 1 || !showOnRightClick && args.which === 3) {\n      if (showOnRightClick && args.which === 1 && !isNullOrUndefined(args.target) && this.isAudioElem(args.target)) {\n        this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), args.target);\n      }\n      return;\n    }\n    if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.audioQTBar) {\n      this.quickToolObj = this.parent.quickToolbarModule;\n      var target = args.target;\n      this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n      var isPopupOpen = this.quickToolObj.audioQTBar.element.classList.contains('e-rte-pop');\n      if (this.isAudioElem(target) && this.parent.quickToolbarModule) {\n        if (isPopupOpen) {\n          return;\n        }\n        this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), target);\n        if (isIDevice()) {\n          this.parent.notify(events.selectionSave, e);\n        }\n        target.querySelector('audio').style.outline = '2px solid #4a90e2';\n        this.showAudioQuickToolbar({\n          args: args,\n          type: 'Audios',\n          elements: [args.target]\n        });\n      } else {\n        this.hideAudioQuickToolbar();\n      }\n    }\n  };\n  Audio.prototype.isAudioElem = function (target) {\n    if (target && target.nodeType !== 3 && target.nodeName !== 'BR' && target.classList && (target.classList.contains(classes.CLS_AUDIOWRAP) || target.classList.contains(classes.CLS_CLICKELEM))) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  Audio.prototype.showAudioQuickToolbar = function (e) {\n    var _this = this;\n    if (e.type !== 'Audios' || isNullOrUndefined(this.parent.quickToolbarModule) || isNullOrUndefined(this.parent.quickToolbarModule.audioQTBar) || isNullOrUndefined(e.args)) {\n      return;\n    }\n    this.quickToolObj = this.parent.quickToolbarModule;\n    var args = e.args;\n    var target = e.elements;\n    [].forEach.call(e.elements, function (element, index) {\n      if (index === 0) {\n        target = element;\n      }\n    });\n    if (this.isAudioElem(target)) {\n      addClass([target.querySelector('audio')], [classes.CLS_AUD_FOCUS]);\n      target.querySelector('audio').style.outline = '2px solid #4a90e2';\n    }\n    if (this.parent.quickToolbarModule.audioQTBar) {\n      if (e.isNotify) {\n        this.showPopupTime = setTimeout(function () {\n          _this.parent.formatter.editorManager.nodeSelection.Clear(_this.contentModule.getDocument());\n          _this.parent.formatter.editorManager.nodeSelection.setSelectionContents(_this.contentModule.getDocument(), target);\n          _this.quickToolObj.audioQTBar.showPopup(args.pageX - 50, target.getBoundingClientRect().top + 34, target);\n        }, 400);\n      } else {\n        this.quickToolObj.audioQTBar.showPopup(args.pageX - 50, target.getBoundingClientRect().top + 34, target);\n      }\n    }\n  };\n  Audio.prototype.hideAudioQuickToolbar = function () {\n    if (!isNullOrUndefined(this.contentModule.getEditPanel().querySelector('.' + classes.CLS_AUD_FOCUS))) {\n      removeClass([this.contentModule.getEditPanel().querySelector('.' + classes.CLS_AUD_FOCUS)], classes.CLS_AUD_FOCUS);\n      if (!isNOU(this.audEle)) {\n        this.audEle.style.outline = '';\n      }\n      if (this.quickToolObj && this.quickToolObj.audioQTBar && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n        this.quickToolObj.audioQTBar.hidePopup();\n      }\n    }\n  };\n  Audio.prototype.insertingAudio = function (e) {\n    this.insertAudio(e);\n    if (!isNullOrUndefined(this.dialogObj)) {\n      this.dialogObj.element.style.maxHeight = 'inherit';\n      var dialogContent = this.dialogObj.element.querySelector('.e-audio-content');\n      if (!isNullOrUndefined(this.parent.insertAudioSettings.path) || this.parent.editorMode === 'HTML') {\n        document.getElementById(this.rteID + '_insertAudio').focus();\n      } else {\n        dialogContent.querySelector('.e-audio-url').focus();\n      }\n    }\n  };\n  Audio.prototype.clearDialogObj = function () {\n    if (this.uploadObj && !this.uploadObj.isDestroyed) {\n      this.uploadObj.destroy();\n      detach(this.uploadObj.element);\n      this.uploadObj = null;\n    }\n    if (this.button && !this.button.isDestroyed) {\n      this.button.destroy();\n      detach(this.button.element);\n      this.button = null;\n    }\n    if (this.dialogObj && !this.dialogObj.isDestroyed) {\n      this.dialogObj.destroy();\n      detach(this.dialogObj.element);\n      this.dialogObj = null;\n    }\n  };\n  Audio.prototype.insertAudio = function (e) {\n    var _this = this;\n    if (this.dialogObj) {\n      this.dialogObj.hide({\n        returnValue: true\n      });\n      return;\n    }\n    var audioDialog = this.parent.createElement('div', {\n      className: 'e-rte-audio-dialog',\n      id: this.rteID + '_audio'\n    });\n    this.parent.rootContainer.appendChild(audioDialog);\n    var audioInsert = this.i10n.getConstant('dialogInsert');\n    var audiolinkCancel = this.i10n.getConstant('dialogCancel');\n    var audioHeader = this.i10n.getConstant('audioHeader');\n    var selection = e.selection;\n    var selectObj = {\n      selfAudio: this,\n      selection: e.selection,\n      args: e.args,\n      selectParent: e.selectParent\n    };\n    var dialogModel = {\n      header: audioHeader,\n      cssClass: classes.CLS_RTE_ELEMENTS,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      showCloseIcon: true,\n      closeOnEscape: true,\n      width: Browser.isDevice ? '290px' : '340px',\n      isModal: Browser.isDevice,\n      buttons: [{\n        click: this.insertAudioUrl.bind(selectObj),\n        buttonModel: {\n          content: audioInsert,\n          cssClass: 'e-flat e-insertAudio',\n          isPrimary: true,\n          disabled: true\n        }\n      }, {\n        click: function (e) {\n          _this.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel',\n          content: audiolinkCancel\n        }\n      }],\n      target: Browser.isDevice ? document.body : this.parent.element,\n      animationSettings: {\n        effect: 'None'\n      },\n      close: function (event) {\n        if (_this.isAudioUploaded) {\n          if (_this.dialogObj.element.querySelector('.e-file-abort-btn')) {\n            _this.dialogObj.element.querySelector('.e-file-abort-btn').click();\n          } else {\n            _this.uploadObj.remove();\n          }\n        }\n        _this.parent.isBlur = false;\n        if (event && !isNOU(event.event) && event.event.returnValue) {\n          if (_this.parent.editorMode === 'HTML') {\n            selection.restore();\n          }\n        }\n        _this.clearDialogObj();\n        _this.dialogRenderObj.close(event);\n      }\n    };\n    var dialogContent = this.parent.createElement('div', {\n      className: 'e-audio-content'\n    });\n    if (!isNullOrUndefined(this.parent.insertAudioSettings.path) || this.parent.editorMode === 'HTML') {\n      dialogContent.appendChild(this.audioUpload(e));\n    }\n    var linkHeader = this.parent.createElement('div', {\n      className: 'e-audioheader'\n    });\n    var linkHeaderText = this.i10n.getConstant('audioLinkHeader');\n    if (this.parent.editorMode === 'HTML') {\n      linkHeader.innerHTML = linkHeaderText;\n    }\n    dialogContent.appendChild(linkHeader);\n    dialogContent.appendChild(this.audioUrlPopup(e));\n    if (e.selectNode && e.selectNode[0].nodeType === 1 && this.isAudioElem(e.selectNode[0])) {\n      dialogModel.header = this.parent.localeObj.getConstant('editAudioHeader');\n      dialogModel.content = dialogContent;\n    } else {\n      dialogModel.content = dialogContent;\n    }\n    this.dialogObj = this.dialogRenderObj.render(dialogModel);\n    this.dialogObj.createElement = this.parent.createElement;\n    this.dialogObj.appendTo(audioDialog);\n    if (e.selectNode && e.selectNode[0].nodeType === 1 && this.isAudioElem(e.selectNode[0]) && e.name === 'insertAudio') {\n      this.dialogObj.element.querySelector('.e-insertAudio').textContent = this.parent.localeObj.getConstant('dialogUpdate');\n    }\n    audioDialog.style.maxHeight = 'inherit';\n    if (this.quickToolObj) {\n      if (this.quickToolObj.audioQTBar && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n        this.quickToolObj.audioQTBar.hidePopup();\n      }\n      if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n        this.quickToolObj.inlineQTBar.hidePopup();\n      }\n      if (this.quickToolObj.textQTBar && this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n        this.quickToolObj.textQTBar.hidePopup();\n      }\n    }\n  };\n  Audio.prototype.audioUrlPopup = function (e) {\n    var _this = this;\n    var audioUrl = this.parent.createElement('div', {\n      className: 'audioUrl'\n    });\n    var placeUrl = this.i10n.getConstant('audioUrl');\n    this.inputUrl = this.parent.createElement('input', {\n      className: 'e-input e-audio-url',\n      attrs: {\n        placeholder: placeUrl,\n        spellcheck: 'false',\n        'aria-label': this.i10n.getConstant('audioLinkHeader')\n      }\n    });\n    this.inputUrl.addEventListener('input', function () {\n      if (!isNOU(_this.inputUrl)) {\n        if (_this.inputUrl.value.length === 0) {\n          _this.dialogObj.getButtons(0).element.disabled = true;\n        } else {\n          _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n        }\n      }\n    });\n    if (e.selectNode && this.isAudioElem(e.selectNode[0])) {\n      var regex = new RegExp(/([^\\S]|^)(((https?:\\/\\/)|(www\\.))(\\S+))/gi);\n      var sourceElement = e.selectNode[0].querySelector('source');\n      this.inputUrl.value = sourceElement.src.match(regex) ? sourceElement.src : '';\n    }\n    audioUrl.appendChild(this.inputUrl);\n    return audioUrl;\n  };\n  Audio.prototype.audioUpload = function (e) {\n    var _this = this;\n    var save;\n    var selectParent;\n    // eslint-disable-next-line\n    var proxy = this;\n    var iframe = proxy.parent.iframeSettings.enable;\n    if (proxy.parent.editorMode === 'HTML' && (!iframe && isNullOrUndefined(closest(e.selection.range.startContainer.parentNode, '[id='\n    // eslint-disable-next-line\n    + \"'\" + this.parent.contentModule.getPanel().id + \"'\" + ']')) || iframe && !hasClass(e.selection.range.startContainer.parentNode.ownerDocument.querySelector('body'), 'e-lib'))) {\n      this.contentModule.getEditPanel().focus();\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n      selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n    } else {\n      save = e.selection;\n      selectParent = e.selectParent;\n    }\n    var uploadParentEle = this.parent.createElement('div', {\n      className: 'e-aud-uploadwrap e-droparea'\n    });\n    var deviceAudioUpMsg = this.i10n.getConstant('audioDeviceUploadMessage');\n    var audioUpMsg = this.i10n.getConstant('audioUploadMessage');\n    var span = this.parent.createElement('span', {\n      className: 'e-droptext'\n    });\n    var spanMsg = this.parent.createElement('span', {\n      className: 'e-rte-upload-text',\n      innerHTML: Browser.isDevice ? deviceAudioUpMsg : audioUpMsg\n    });\n    span.appendChild(spanMsg);\n    var btnEle = this.parent.createElement('button', {\n      className: 'e-browsebtn',\n      id: this.rteID + '_insertAudio',\n      attrs: {\n        autofocus: 'true',\n        type: 'button'\n      }\n    });\n    span.appendChild(btnEle);\n    uploadParentEle.appendChild(span);\n    var browserMsg = this.i10n.getConstant('browse');\n    this.button = new Button({\n      content: browserMsg,\n      enableRtl: this.parent.enableRtl\n    });\n    this.button.isStringTemplate = true;\n    this.button.createElement = this.parent.createElement;\n    this.button.appendTo(btnEle);\n    var btnClick = Browser.isDevice ? span : btnEle;\n    EventHandler.add(btnClick, 'click', this.fileSelect, this);\n    var uploadEle = this.parent.createElement('input', {\n      id: this.rteID + '_upload',\n      attrs: {\n        type: 'File',\n        name: 'UploadFiles'\n      }\n    });\n    uploadParentEle.appendChild(uploadEle);\n    var fileName;\n    var selectArgs;\n    var filesData;\n    this.uploadObj = new Uploader({\n      asyncSettings: {\n        saveUrl: this.parent.insertAudioSettings.saveUrl,\n        removeUrl: this.parent.insertAudioSettings.removeUrl\n      },\n      dropArea: span,\n      multiple: false,\n      enableRtl: this.parent.enableRtl,\n      allowedExtensions: this.parent.insertAudioSettings.allowedTypes.toString(),\n      selected: function (e) {\n        proxy.isAudioUploaded = true;\n        selectArgs = e;\n        // eslint-disable-next-line\n        filesData = e.filesData;\n        _this.parent.trigger(events.fileSelected, selectArgs, function (selectArgs) {\n          if (!selectArgs.cancel) {\n            _this.checkExtension(selectArgs.filesData[0]);\n            fileName = selectArgs.filesData[0].name;\n            if (_this.parent.editorMode === 'HTML' && isNullOrUndefined(_this.parent.insertAudioSettings.path)) {\n              var reader_1 = new FileReader();\n              // eslint-disable-next-line\n              reader_1.addEventListener('load', function (e) {\n                var url = _this.parent.insertAudioSettings.saveFormat === 'Base64' ? reader_1.result : URL.createObjectURL(convertToBlob(reader_1.result));\n                proxy.uploadUrl = {\n                  url: url,\n                  selection: save,\n                  fileName: fileName,\n                  selectParent: selectParent\n                };\n                proxy.inputUrl.setAttribute('disabled', 'true');\n                if (isNullOrUndefined(proxy.parent.insertAudioSettings.saveUrl) && _this.isAllowedTypes && !isNullOrUndefined(_this.dialogObj)) {\n                  _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                }\n              });\n              reader_1.readAsDataURL(selectArgs.filesData[0].rawFile);\n            }\n          }\n        });\n      },\n      beforeUpload: function (args) {\n        _this.parent.trigger(events.beforeFileUpload, args);\n      },\n      uploading: function (e) {\n        if (!_this.parent.isServerRendered) {\n          _this.parent.trigger(events.fileUploading, e);\n        }\n      },\n      success: function (e) {\n        _this.parent.trigger(events.fileUploadSuccess, e, function (e) {\n          if (!isNullOrUndefined(_this.parent.insertAudioSettings.path)) {\n            var url = _this.parent.insertAudioSettings.path + e.file.name;\n            // eslint-disable-next-line\n            var value = {\n              url: url,\n              selection: save\n            };\n            proxy.uploadUrl = {\n              url: url,\n              selection: save,\n              fileName: fileName,\n              selectParent: selectParent\n            };\n            proxy.inputUrl.setAttribute('disabled', 'true');\n          }\n          if (e.operation === 'upload' && !isNullOrUndefined(_this.dialogObj)) {\n            _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n          }\n        });\n      },\n      failure: function (e) {\n        _this.parent.trigger(events.fileUploadFailed, e);\n      },\n      removing: function () {\n        // eslint-disable-next-line\n        _this.parent.trigger(events.fileRemoving, e, function (e) {\n          proxy.isAudioUploaded = false;\n          _this.dialogObj.getButtons(0).element.disabled = true;\n          proxy.inputUrl.removeAttribute('disabled');\n          if (proxy.uploadUrl) {\n            proxy.uploadUrl.url = '';\n          }\n        });\n      }\n    });\n    this.uploadObj.isStringTemplate = true;\n    this.uploadObj.createElement = this.parent.createElement;\n    this.uploadObj.appendTo(uploadEle);\n    return uploadParentEle;\n  };\n  Audio.prototype.checkExtension = function (e) {\n    if (this.uploadObj.allowedExtensions) {\n      if (this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf(('.' + e.type).toLocaleLowerCase()) === -1) {\n        this.dialogObj.getButtons(0).element.setAttribute('disabled', 'disabled');\n        this.isAllowedTypes = false;\n      } else {\n        this.isAllowedTypes = true;\n      }\n    }\n  };\n  Audio.prototype.fileSelect = function () {\n    this.dialogObj.element.getElementsByClassName('e-file-select-wrap')[0].querySelector('button').click();\n    return false;\n  };\n  // eslint-disable-next-line\n  Audio.prototype.cancelDialog = function (e) {\n    this.parent.isBlur = false;\n    this.dialogObj.hide({\n      returnValue: true\n    });\n    if (this.isAudioUploaded) {\n      this.uploadObj.removing();\n    }\n  };\n  // eslint-disable-next-line\n  Audio.prototype.insertAudioUrl = function (e) {\n    var proxy = this.selfAudio;\n    //let audioSelectParent: Node = proxy.uploadUrl.selectParent[0];\n    proxy.isAudioUploaded = false;\n    var url = proxy.inputUrl.value;\n    if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n      proxy.parent.formatter.saveData();\n    }\n    if (!isNullOrUndefined(proxy.uploadUrl) && proxy.uploadUrl.url !== '') {\n      proxy.uploadUrl.cssClass = proxy.parent.insertAudioSettings.layoutOption === 'Inline' ? classes.CLS_AUDIOINLINE : classes.CLS_AUDIOBREAK;\n      proxy.dialogObj.hide({\n        returnValue: false\n      });\n      if (proxy.dialogObj !== null) {\n        return;\n      }\n      proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, proxy.uploadUrl);\n      proxy.uploadUrl.url = '';\n    } else if (url !== '') {\n      if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(\n      // eslint-disable-next-line\n      this.selection.range.startContainer.parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))) {\n        proxy.contentModule.getEditPanel().focus();\n        var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n        this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n        this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n      }\n      var name_1 = proxy.parent.editorMode === 'HTML' ? url.split('/')[url.split('/').length - 1] : '';\n      var value = {\n        cssClass: proxy.parent.insertAudioSettings.layoutOption === 'Inline' ? classes.CLS_AUDIOINLINE : classes.CLS_AUDIOBREAK,\n        url: url,\n        selection: this.selection,\n        fileName: name_1,\n        selectParent: this.selectParent\n      };\n      proxy.dialogObj.hide({\n        returnValue: false\n      });\n      if (proxy.dialogObj !== null) {\n        return;\n      }\n      proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, value);\n    }\n  };\n  /* eslint-disable */\n  /**\n   * Destroys the ToolBar.\n   *\n   * @method destroy\n   * @returns {void}\n   * @hidden\n    */\n  /* eslint-enable */\n  Audio.prototype.destroy = function () {\n    if (this.isDestroyed) {\n      return;\n    }\n    this.prevSelectedAudEle = undefined;\n    if (this.showPopupTime) {\n      clearTimeout(this.showPopupTime);\n      this.showPopupTime = null;\n    }\n    this.removeEventListener();\n    this.clearDialogObj();\n    this.isDestroyed = true;\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Audio.prototype.getModuleName = function () {\n    return 'audio';\n  };\n  return Audio;\n}();\nexport { Audio };","map":{"version":3,"names":["addClass","detach","EventHandler","isNullOrUndefined","Ajax","Browser","closest","removeClass","isNOU","events","classes","Uploader","Button","RenderType","dispatchEvent","hasClass","convertToBlob","isIDevice","Audio","parent","serviceLocator","isAudioUploaded","isAllowedTypes","deletedAudio","rteID","element","id","i10n","getService","rendererFactory","dialogRenderObj","addEventListener","docClick","onDocumentClick","bind","isDestroyed","prototype","on","keyDown","onKeyDown","keyUp","onKeyUp","insertAudio","insertingAudio","initialEnd","afterRender","dynamicModule","showAudioDialog","showDialog","closeAudioDialog","closeDialog","audioToolbarAction","onToolbarAction","dropDownSelect","alignmentSelect","audioDelete","deleteAudio","editAreaClick","editAreaClickHandler","insertCompleted","showAudioQuickToolbar","destroy","iframeMouseDown","removeEventListener","off","contentModule","remove","getEditPanel","touchStartEvent","touchStart","touchEndEvent","audioClick","ownerDocument","getRenderer","Content","add","checkAudioBack","range","startContainer","nodeName","startOffset","previousSibling","isAudioElem","push","childNodes","checkAudioDel","textContent","length","nextSibling","undoStack","args","subCommand","toLowerCase","editorMode","i","formatter","getUndoRedoStack","temp","createElement","contentElem","text","appendChild","cloneNode","e","ele","readonly","prevSelectedAudEle","audEle","notify","selectionRestore","item","event","querySelector","src","getAttribute","trigger","afterMediaDelete","originalEvent","save","selectNodeEle","selectParentEle","isCursor","keyCodeValues","editorManager","nodeSelection","getRange","getDocument","endContainer","endOffset","indexOf","which","nodes","getNodeCollection","code","isCursor_1","getParentNodeCollection","ctrlKey","key","action","parentElement","prev","setSelectionText","CLS_AUD_FOCUS","quickToolObj","audioQTBar","hidePopup","keyCode","preventDefault","event_1","selectNode","selection","selectParent","command","dialogObj","close","audioRemovePost","nodeType","previousElementSibling","classList","contains","CLS_AUDIOWRAP","nextElementSibling","CLS_CLICKELEM","CLS_VID_CLICK_ELEM","openDialog","handleSelectAll","audioFocusNodes","inputElement","querySelectorAll","isInternal","parentEle","name","hide","returnValue","saveData","restore","process","document","body","proxy","absoluteUrl","insertAudioSettings","removeUrl","URL","baseURI","href","removingAudioName","replace","xhr","XMLHttpRequest","readyState","status","triggerPost","response","open","responseType","send","file","File","ajax","formData","FormData","append","isDevice","target","setAttribute","focus","toolbarSettings","enable","getToolbarElement","getID","offsetX","clientWidth","offsetY","clientHeight","documentClickClosedBy","closedBy","isBlur","style","outline","inlineMode","inline","break","hideAudioQuickToolbar","showOnRightClick","quickToolbarSettings","Clear","setSelectionContents","quickToolbarModule","isPopupOpen","selectionSave","type","elements","_this","forEach","call","index","isNotify","showPopupTime","setTimeout","showPopup","pageX","getBoundingClientRect","top","maxHeight","dialogContent","path","getElementById","clearDialogObj","uploadObj","button","audioDialog","className","rootContainer","audioInsert","getConstant","audiolinkCancel","audioHeader","selectObj","selfAudio","dialogModel","header","cssClass","CLS_RTE_ELEMENTS","enableRtl","locale","showCloseIcon","closeOnEscape","width","isModal","buttons","click","insertAudioUrl","buttonModel","content","isPrimary","disabled","cancelDialog","animationSettings","effect","audioUpload","linkHeader","linkHeaderText","innerHTML","audioUrlPopup","localeObj","render","appendTo","inlineQTBar","textQTBar","audioUrl","placeUrl","inputUrl","attrs","placeholder","spellcheck","value","getButtons","removeAttribute","regex","RegExp","sourceElement","match","iframe","iframeSettings","parentNode","getPanel","uploadParentEle","deviceAudioUpMsg","audioUpMsg","span","spanMsg","btnEle","autofocus","browserMsg","isStringTemplate","btnClick","fileSelect","uploadEle","fileName","selectArgs","filesData","asyncSettings","saveUrl","dropArea","multiple","allowedExtensions","allowedTypes","toString","selected","fileSelected","cancel","checkExtension","reader_1","FileReader","url","saveFormat","result","createObjectURL","uploadUrl","readAsDataURL","rawFile","beforeUpload","beforeFileUpload","uploading","isServerRendered","fileUploading","success","fileUploadSuccess","operation","failure","fileUploadFailed","removing","fileRemoving","toLocaleLowerCase","getElementsByClassName","layoutOption","CLS_AUDIOINLINE","CLS_AUDIOBREAK","name_1","split","undefined","clearTimeout","getModuleName"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/audio-module.js"],"sourcesContent":["import { addClass, detach, EventHandler, isNullOrUndefined, Ajax } from '@syncfusion/ej2-base';\nimport { Browser, closest, removeClass, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { Uploader } from '@syncfusion/ej2-inputs';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { RenderType } from '../base/enum';\nimport { dispatchEvent, hasClass, convertToBlob } from '../base/util';\nimport { isIDevice } from '../../common/util';\n/**\n * `Audio` module is used to handle audio actions.\n */\nvar Audio = /** @class */ (function () {\n    function Audio(parent, serviceLocator) {\n        this.isAudioUploaded = false;\n        this.isAllowedTypes = true;\n        this.deletedAudio = [];\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.i10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n        this.docClick = this.onDocumentClick.bind(this);\n        this.isDestroyed = false;\n    }\n    Audio.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.keyUp, this.onKeyUp, this);\n        this.parent.on(events.insertAudio, this.insertingAudio, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.dynamicModule, this.afterRender, this);\n        this.parent.on(events.showAudioDialog, this.showDialog, this);\n        this.parent.on(events.closeAudioDialog, this.closeDialog, this);\n        this.parent.on(events.audioToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.dropDownSelect, this.alignmentSelect, this);\n        this.parent.on(events.audioDelete, this.deleteAudio, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.insertCompleted, this.showAudioQuickToolbar, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.iframeMouseDown, this.closeDialog, this);\n    };\n    Audio.prototype.removeEventListener = function () {\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.keyUp, this.onKeyUp);\n        this.parent.off(events.insertAudio, this.insertingAudio);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.dynamicModule, this.afterRender);\n        this.parent.off(events.showAudioDialog, this.showDialog);\n        this.parent.off(events.closeAudioDialog, this.closeDialog);\n        this.parent.off(events.audioToolbarAction, this.onToolbarAction);\n        this.parent.off(events.dropDownSelect, this.alignmentSelect);\n        this.parent.off(events.audioDelete, this.deleteAudio);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.insertCompleted, this.showAudioQuickToolbar);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.iframeMouseDown, this.closeDialog);\n        if (!isNullOrUndefined(this.contentModule)) {\n            EventHandler.remove(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.touchStart);\n            EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.audioClick);\n            this.parent.element.ownerDocument.removeEventListener('mousedown', this.docClick);\n            this.docClick = null;\n        }\n    };\n    Audio.prototype.afterRender = function () {\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n        EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.touchStart, this);\n        EventHandler.add(this.contentModule.getEditPanel(), Browser.touchEndEvent, this.audioClick, this);\n        this.parent.element.ownerDocument.addEventListener('mousedown', this.docClick);\n    };\n    Audio.prototype.checkAudioBack = function (range) {\n        if (range.startContainer.nodeName === '#text' && range.startOffset === 0 &&\n            !isNOU(range.startContainer.previousSibling) && this.isAudioElem(range.startContainer.previousSibling)) {\n            this.deletedAudio.push(range.startContainer.previousSibling);\n        }\n        else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset - 1]) &&\n            this.isAudioElem(range.startContainer.childNodes[range.startOffset - 1])) {\n            this.deletedAudio.push(range.startContainer.childNodes[range.startOffset - 1]);\n        }\n    };\n    Audio.prototype.checkAudioDel = function (range) {\n        if (range.startContainer.nodeName === '#text' && range.startOffset === range.startContainer.textContent.length &&\n            !isNOU(range.startContainer.nextSibling) && range.startContainer.nextSibling.nodeName === 'AUDIO') {\n            this.deletedAudio.push(range.startContainer.nextSibling);\n        }\n        else if (range.startContainer.nodeName !== '#text' && !isNOU(range.startContainer.childNodes[range.startOffset]) &&\n            this.isAudioElem(range.startContainer.childNodes[range.startOffset])) {\n            this.deletedAudio.push(range.startContainer.childNodes[range.startOffset]);\n        }\n    };\n    Audio.prototype.undoStack = function (args) {\n        if ((args.subCommand.toLowerCase() === 'undo' || args.subCommand.toLowerCase() === 'redo') && this.parent.editorMode === 'HTML') {\n            for (var i = 0; i < this.parent.formatter.getUndoRedoStack().length; i++) {\n                var temp = this.parent.createElement('div');\n                var contentElem = this.parent.formatter.getUndoRedoStack()[i].text;\n                temp.appendChild(contentElem.cloneNode(true));\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Audio.prototype.touchStart = function (e, ele) {\n        if (this.parent.readonly) {\n            return;\n        }\n        this.prevSelectedAudEle = this.audEle;\n    };\n    Audio.prototype.onToolbarAction = function (args) {\n        if (isIDevice()) {\n            this.parent.notify(events.selectionRestore, {});\n        }\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'AudioReplace':\n                this.parent.notify(events.insertAudio, args);\n                break;\n            case 'AudioRemove':\n                this.parent.notify(events.audioDelete, args);\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    Audio.prototype.onKeyUp = function (event) {\n        if (!isNOU(this.deletedAudio) && this.deletedAudio.length > 0) {\n            for (var i = 0; i < this.deletedAudio.length; i++) {\n                var args = {\n                    element: this.deletedAudio[i].querySelector('audio'),\n                    src: this.deletedAudio[i].querySelector('source').getAttribute('src')\n                };\n                this.parent.trigger(events.afterMediaDelete, args);\n            }\n        }\n    };\n    Audio.prototype.onKeyDown = function (event) {\n        var originalEvent = event.args;\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        this.deletedAudio = [];\n        var isCursor;\n        var keyCodeValues = [27, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,\n            44, 45, 9, 16, 17, 18, 19, 20, 33, 34, 35, 36, 37, 38, 39, 40, 91, 92, 93, 144, 145, 182, 183];\n        if (this.parent.editorMode === 'HTML') {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            isCursor = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n        }\n        if (!isCursor && this.parent.editorMode === 'HTML' && keyCodeValues.indexOf(originalEvent.which) < 0) {\n            var nodes = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            for (var i = 0; i < nodes.length; i++) {\n                if (this.isAudioElem(nodes[i])) {\n                    this.deletedAudio.push(nodes[i]);\n                }\n            }\n        }\n        if (this.parent.editorMode === 'HTML' && ((originalEvent.which === 8 && originalEvent.code === 'Backspace') ||\n            (originalEvent.which === 46 && originalEvent.code === 'Delete'))) {\n            var isCursor_1 = range.startContainer === range.endContainer && range.startOffset === range.endOffset;\n            if ((originalEvent.which === 8 && originalEvent.code === 'Backspace' && isCursor_1)) {\n                this.checkAudioBack(range);\n            }\n            else if ((originalEvent.which === 46 && originalEvent.code === 'Delete' && isCursor_1)) {\n                this.checkAudioDel(range);\n            }\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) &&\n            originalEvent.code !== 'KeyK') {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            if (!originalEvent.ctrlKey && originalEvent.key && (originalEvent.key.length === 1 || originalEvent.action === 'enter') &&\n                (this.isAudioElem(selectParentEle[0])) && selectParentEle[0].parentElement) {\n                var prev = selectParentEle[0].parentElement.childNodes[0];\n                this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), prev, prev, prev.textContent.length, prev.textContent.length);\n                removeClass([selectParentEle[0]], classes.CLS_AUD_FOCUS);\n                this.quickToolObj.audioQTBar.hidePopup();\n            }\n        }\n        if (originalEvent.ctrlKey && (originalEvent.keyCode === 89 || originalEvent.keyCode === 90)) {\n            this.undoStack({ subCommand: (originalEvent.keyCode === 90 ? 'undo' : 'redo') });\n        }\n        if (originalEvent.keyCode === 8 || originalEvent.keyCode === 46) {\n            if (selectNodeEle && this.isAudioElem(selectNodeEle[0]) && selectNodeEle.length < 1) {\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n                    save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                }\n                originalEvent.preventDefault();\n                var event_1 = {\n                    selectNode: selectNodeEle, selection: save, selectParent: selectParentEle,\n                    args: {\n                        item: { command: 'Audios', subCommand: 'AudioRemove' },\n                        originalEvent: originalEvent\n                    }\n                };\n                this.deleteAudio(event_1, originalEvent.keyCode);\n            }\n        }\n        switch (originalEvent.action) {\n            case 'escape':\n                if (!isNullOrUndefined(this.dialogObj)) {\n                    this.dialogObj.close();\n                }\n                break;\n            case 'backspace':\n            case 'delete':\n                for (var i = 0; i < this.deletedAudio.length; i++) {\n                    var src = this.deletedAudio[i].src;\n                    this.audioRemovePost(src);\n                }\n                if (this.parent.editorMode !== 'Markdown') {\n                    if (range.startContainer.nodeType === 3) {\n                        if (originalEvent.code === 'Backspace') {\n                            if (range.startContainer.previousElementSibling && range.startOffset === 0 &&\n                                range.startContainer.previousElementSibling.classList.contains(classes.CLS_AUDIOWRAP)) {\n                                detach(range.startContainer.previousElementSibling);\n                            }\n                        }\n                        else {\n                            if (range.startContainer.nextElementSibling &&\n                                range.endContainer.textContent.length === range.endOffset &&\n                                range.startContainer.nextElementSibling.classList.contains(classes.CLS_AUDIOWRAP)) {\n                                detach(range.startContainer.nextElementSibling);\n                            }\n                        }\n                    }\n                    else if (range.startContainer.nodeType === 1 && (range.startContainer.classList &&\n                        (range.startContainer.classList.contains(classes.CLS_AUDIOWRAP) ||\n                            range.startContainer.classList.contains(classes.CLS_CLICKELEM) ||\n                            range.startContainer.classList.contains(classes.CLS_VID_CLICK_ELEM)))) {\n                        detach(range.startContainer);\n                    }\n                }\n                break;\n            case 'insert-audio':\n                if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)) {\n                    save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n                }\n                this.openDialog(true, originalEvent, save, selectNodeEle, selectParentEle);\n                originalEvent.preventDefault();\n                break;\n        }\n        if (originalEvent.ctrlKey && originalEvent.key === 'a') {\n            this.handleSelectAll();\n        }\n    };\n    Audio.prototype.handleSelectAll = function () {\n        var audioFocusNodes = this.parent.inputElement.querySelectorAll('.' + classes.CLS_AUD_FOCUS);\n        removeClass(audioFocusNodes, classes.CLS_AUD_FOCUS);\n    };\n    Audio.prototype.openDialog = function (isInternal, event, selection, ele, parentEle) {\n        var range;\n        var save;\n        var selectNodeEle;\n        var selectParentEle;\n        if (!isInternal && !isNOU(this.parent.formatter.editorManager.nodeSelection)) {\n            range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n            selectParentEle = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = selection;\n            selectNodeEle = ele;\n            selectParentEle = parentEle;\n        }\n        if (this.parent.editorMode === 'HTML') {\n            this.insertAudio({\n                args: {\n                    item: { command: 'Audios', subCommand: 'Audio' },\n                    originalEvent: event,\n                    name: !isInternal ? 'showDialog' : null\n                },\n                selectNode: selectNodeEle,\n                selection: save,\n                selectParent: selectParentEle\n            });\n        }\n    };\n    Audio.prototype.showDialog = function () {\n        this.openDialog(false);\n    };\n    Audio.prototype.closeDialog = function () {\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n        }\n    };\n    Audio.prototype.deleteAudio = function (e, keyCode) {\n        if (!this.isAudioElem(e.selectNode[0])) {\n            return;\n        }\n        if (this.audEle) {\n            if (e.selectNode[0].nodeType === 3) {\n                e.selectNode[0] = this.audEle;\n            }\n            else if (this.isAudioElem(e.selectNode[0])) {\n                e.selectNode[0] = e.selectNode[0].classList.contains(classes.CLS_AUDIOWRAP) ? e.selectNode[0] :\n                    e.selectNode[0].parentElement;\n            }\n        }\n        var args = {\n            element: e.selectNode[0].querySelector('audio'),\n            src: e.selectNode[0].querySelector('source').getAttribute('src')\n        };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        e.selection.restore();\n        this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, {\n            selectNode: e.selectNode,\n            subCommand: e.args.item.subCommand\n        });\n        this.audioRemovePost(args.src);\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n            this.quickToolObj.audioQTBar.hidePopup();\n        }\n        if (isNullOrUndefined(keyCode)) {\n            this.parent.trigger(events.afterMediaDelete, args);\n        }\n    };\n    Audio.prototype.audioRemovePost = function (src) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var absoluteUrl = '';\n        if (isNOU(this.parent.insertAudioSettings.removeUrl) || this.parent.insertAudioSettings.removeUrl === '') {\n            return;\n        }\n        if (src.indexOf('http://') > -1 || src.indexOf('https://') > -1) {\n            absoluteUrl = src;\n        }\n        else {\n            absoluteUrl = new URL(src, document.baseURI).href;\n        }\n        this.removingAudioName = absoluteUrl.replace(/^.*[\\\\/]/, '');\n        var xhr = new XMLHttpRequest();\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        xhr.addEventListener('readystatechange', function () {\n            if (this.readyState === 4 && this.status === 200) {\n                proxy.triggerPost(this.response);\n            }\n        });\n        xhr.open('GET', absoluteUrl);\n        xhr.responseType = 'blob';\n        xhr.send();\n    };\n    Audio.prototype.triggerPost = function (response) {\n        var removeUrl = this.parent.insertAudioSettings.removeUrl;\n        if (isNOU(removeUrl) || removeUrl === '') {\n            return;\n        }\n        var file = new File([response], this.removingAudioName);\n        var ajax = new Ajax(removeUrl, 'POST', true, null);\n        var formData = new FormData();\n        formData.append('UploadFiles', file);\n        ajax.send(formData);\n    };\n    Audio.prototype.audioClick = function (e) {\n        if (Browser.isDevice) {\n            if (this.isAudioElem(e.target)) {\n                this.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n                e.target.focus();\n            }\n            else {\n                if (!this.parent.readonly) {\n                    this.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n                }\n            }\n        }\n        if (this.isAudioElem(e.target)) {\n            this.audEle = e.target.querySelector('audio');\n            e.preventDefault();\n        }\n    };\n    Audio.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (isNOU(this.contentModule.getEditPanel())) {\n            return;\n        }\n        if (this.isAudioElem(target)) {\n            this.audEle = target.querySelector('audio');\n        }\n        if (!isNullOrUndefined(this.dialogObj) && ((\n        // eslint-disable-next-line\n        !closest(target, '[id=' + \"'\" + this.dialogObj.element.id + \"'\" + ']') && this.parent.toolbarSettings.enable && this.parent.getToolbarElement() &&\n            !this.parent.getToolbarElement().contains(e.target)) ||\n            (this.parent.getToolbarElement() && this.parent.getToolbarElement().contains(e.target) &&\n                !closest(target, '#' + this.parent.getID() + '_toolbar_Audio') &&\n                !target.querySelector('#' + this.parent.getID() + '_toolbar_Audio')))) {\n            /* eslint-disable */\n            if (e.offsetX > e.target.clientWidth || e.offsetY > e.target.clientHeight) {\n            }\n            else {\n                this.parent.notify(events.documentClickClosedBy, { closedBy: \"outside click\" });\n                this.dialogObj.hide({ returnValue: true });\n                this.parent.isBlur = true;\n                dispatchEvent(this.parent.element, 'focusout');\n            }\n            /* eslint-enable */\n        }\n        if (this.contentModule.getEditPanel().querySelector('.' + classes.CLS_AUD_FOCUS)) {\n            if (!this.isAudioElem(e.target) && !isNOU(this.audEle)) {\n                this.audEle.style.outline = '';\n            }\n            else if (!isNOU(this.prevSelectedAudEle) && this.prevSelectedAudEle !== target) {\n                this.prevSelectedAudEle.style.outline = '';\n            }\n        }\n        if (this.parent.inlineMode.enable && target && this.dialogObj && !closest(target, '#' + this.dialogObj.element.id)) {\n            this.dialogObj.hide();\n        }\n    };\n    Audio.prototype.alignmentSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Audios') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var selectNodeEle = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n        selectNodeEle = [this.audEle];\n        var args = { args: e, selectNode: selectNodeEle };\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        switch (item.subCommand) {\n            case 'Inline':\n                this.inline(args);\n                break;\n            case 'Break':\n                this.break(args);\n                break;\n        }\n        if (this.quickToolObj && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n            this.quickToolObj.audioQTBar.hidePopup();\n            removeClass([selectNodeEle[0]], classes.CLS_AUD_FOCUS);\n        }\n    };\n    Audio.prototype.break = function (e) {\n        if (e.selectNode[0].nodeName !== 'AUDIO') {\n            return;\n        }\n        var subCommand = (e.args.item && e.args.item.subCommand) ?\n            e.args.item.subCommand : 'Break';\n        this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Audio.prototype.inline = function (e) {\n        if (e.selectNode[0].nodeName !== 'AUDIO') {\n            return;\n        }\n        var subCommand = (e.args.item && e.args.item.subCommand) ?\n            e.args.item.subCommand : 'Inline';\n        this.parent.formatter.process(this.parent, e.args, e.args.originalEvent, { selectNode: e.selectNode, subCommand: subCommand });\n    };\n    Audio.prototype.editAreaClickHandler = function (e) {\n        if (this.parent.readonly) {\n            this.hideAudioQuickToolbar();\n            return;\n        }\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            if ((showOnRightClick && args.which === 1) && !isNullOrUndefined(args.target) &&\n                this.isAudioElem(args.target)) {\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), args.target);\n            }\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.audioQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.audioQTBar.element.classList.contains('e-rte-pop');\n            if (this.isAudioElem(target) && this.parent.quickToolbarModule) {\n                if (isPopupOpen) {\n                    return;\n                }\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(), target);\n                if (isIDevice()) {\n                    this.parent.notify(events.selectionSave, e);\n                }\n                target.querySelector('audio').style.outline = '2px solid #4a90e2';\n                this.showAudioQuickToolbar({ args: args, type: 'Audios', elements: [args.target] });\n            }\n            else {\n                this.hideAudioQuickToolbar();\n            }\n        }\n    };\n    Audio.prototype.isAudioElem = function (target) {\n        if (target && target.nodeType !== 3 && target.nodeName !== 'BR' && (target.classList &&\n            (target.classList.contains(classes.CLS_AUDIOWRAP) || target.classList.contains(classes.CLS_CLICKELEM)))) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Audio.prototype.showAudioQuickToolbar = function (e) {\n        var _this = this;\n        if (e.type !== 'Audios' || isNullOrUndefined(this.parent.quickToolbarModule)\n            || isNullOrUndefined(this.parent.quickToolbarModule.audioQTBar) || isNullOrUndefined(e.args)) {\n            return;\n        }\n        this.quickToolObj = this.parent.quickToolbarModule;\n        var args = e.args;\n        var target = e.elements;\n        [].forEach.call(e.elements, function (element, index) {\n            if (index === 0) {\n                target = element;\n            }\n        });\n        if (this.isAudioElem(target)) {\n            addClass([target.querySelector('audio')], [classes.CLS_AUD_FOCUS]);\n            target.querySelector('audio').style.outline = '2px solid #4a90e2';\n        }\n        if (this.parent.quickToolbarModule.audioQTBar) {\n            if (e.isNotify) {\n                this.showPopupTime = setTimeout(function () {\n                    _this.parent.formatter.editorManager.nodeSelection.Clear(_this.contentModule.getDocument());\n                    _this.parent.formatter.editorManager.nodeSelection.setSelectionContents(_this.contentModule.getDocument(), target);\n                    _this.quickToolObj.audioQTBar.showPopup(args.pageX - 50, target.getBoundingClientRect().top + 34, target);\n                }, 400);\n            }\n            else {\n                this.quickToolObj.audioQTBar.showPopup(args.pageX - 50, target.getBoundingClientRect().top + 34, target);\n            }\n        }\n    };\n    Audio.prototype.hideAudioQuickToolbar = function () {\n        if (!isNullOrUndefined(this.contentModule.getEditPanel().querySelector('.' + classes.CLS_AUD_FOCUS))) {\n            removeClass([this.contentModule.getEditPanel().querySelector('.' + classes.CLS_AUD_FOCUS)], classes.CLS_AUD_FOCUS);\n            if (!isNOU(this.audEle)) {\n                this.audEle.style.outline = '';\n            }\n            if (this.quickToolObj && this.quickToolObj.audioQTBar && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n                this.quickToolObj.audioQTBar.hidePopup();\n            }\n        }\n    };\n    Audio.prototype.insertingAudio = function (e) {\n        this.insertAudio(e);\n        if (!isNullOrUndefined(this.dialogObj)) {\n            this.dialogObj.element.style.maxHeight = 'inherit';\n            var dialogContent = this.dialogObj.element.querySelector('.e-audio-content');\n            if (!isNullOrUndefined(this.parent.insertAudioSettings.path) || this.parent.editorMode === 'HTML') {\n                document.getElementById(this.rteID + '_insertAudio').focus();\n            }\n            else {\n                dialogContent.querySelector('.e-audio-url').focus();\n            }\n        }\n    };\n    Audio.prototype.clearDialogObj = function () {\n        if (this.uploadObj && !this.uploadObj.isDestroyed) {\n            this.uploadObj.destroy();\n            detach(this.uploadObj.element);\n            this.uploadObj = null;\n        }\n        if (this.button && !this.button.isDestroyed) {\n            this.button.destroy();\n            detach(this.button.element);\n            this.button = null;\n        }\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            this.dialogObj.destroy();\n            detach(this.dialogObj.element);\n            this.dialogObj = null;\n        }\n    };\n    Audio.prototype.insertAudio = function (e) {\n        var _this = this;\n        if (this.dialogObj) {\n            this.dialogObj.hide({ returnValue: true });\n            return;\n        }\n        var audioDialog = this.parent.createElement('div', { className: 'e-rte-audio-dialog', id: this.rteID + '_audio' });\n        this.parent.rootContainer.appendChild(audioDialog);\n        var audioInsert = this.i10n.getConstant('dialogInsert');\n        var audiolinkCancel = this.i10n.getConstant('dialogCancel');\n        var audioHeader = this.i10n.getConstant('audioHeader');\n        var selection = e.selection;\n        var selectObj = { selfAudio: this, selection: e.selection, args: e.args, selectParent: e.selectParent };\n        var dialogModel = {\n            header: audioHeader,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px',\n            isModal: Browser.isDevice,\n            buttons: [{\n                    click: this.insertAudioUrl.bind(selectObj),\n                    buttonModel: { content: audioInsert, cssClass: 'e-flat e-insertAudio', isPrimary: true, disabled: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: audiolinkCancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                if (_this.isAudioUploaded) {\n                    if (_this.dialogObj.element.querySelector('.e-file-abort-btn')) {\n                        _this.dialogObj.element.querySelector('.e-file-abort-btn').click();\n                    }\n                    else {\n                        _this.uploadObj.remove();\n                    }\n                }\n                _this.parent.isBlur = false;\n                if (event && !isNOU(event.event) && event.event.returnValue) {\n                    if (_this.parent.editorMode === 'HTML') {\n                        selection.restore();\n                    }\n                }\n                _this.clearDialogObj();\n                _this.dialogRenderObj.close(event);\n            }\n        };\n        var dialogContent = this.parent.createElement('div', { className: 'e-audio-content' });\n        if (!isNullOrUndefined(this.parent.insertAudioSettings.path) || this.parent.editorMode === 'HTML') {\n            dialogContent.appendChild(this.audioUpload(e));\n        }\n        var linkHeader = this.parent.createElement('div', { className: 'e-audioheader' });\n        var linkHeaderText = this.i10n.getConstant('audioLinkHeader');\n        if (this.parent.editorMode === 'HTML') {\n            linkHeader.innerHTML = linkHeaderText;\n        }\n        dialogContent.appendChild(linkHeader);\n        dialogContent.appendChild(this.audioUrlPopup(e));\n        if (e.selectNode && e.selectNode[0].nodeType === 1 && this.isAudioElem(e.selectNode[0])) {\n            dialogModel.header = this.parent.localeObj.getConstant('editAudioHeader');\n            dialogModel.content = dialogContent;\n        }\n        else {\n            dialogModel.content = dialogContent;\n        }\n        this.dialogObj = this.dialogRenderObj.render(dialogModel);\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(audioDialog);\n        if (e.selectNode && e.selectNode[0].nodeType === 1 && this.isAudioElem(e.selectNode[0]) && (e.name === 'insertAudio')) {\n            this.dialogObj.element.querySelector('.e-insertAudio').textContent = this.parent.localeObj.getConstant('dialogUpdate');\n        }\n        audioDialog.style.maxHeight = 'inherit';\n        if (this.quickToolObj) {\n            if (this.quickToolObj.audioQTBar && document.body.contains(this.quickToolObj.audioQTBar.element)) {\n                this.quickToolObj.audioQTBar.hidePopup();\n            }\n            if (this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n                this.quickToolObj.inlineQTBar.hidePopup();\n            }\n            if (this.quickToolObj.textQTBar && this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n                this.quickToolObj.textQTBar.hidePopup();\n            }\n        }\n    };\n    Audio.prototype.audioUrlPopup = function (e) {\n        var _this = this;\n        var audioUrl = this.parent.createElement('div', { className: 'audioUrl' });\n        var placeUrl = this.i10n.getConstant('audioUrl');\n        this.inputUrl = this.parent.createElement('input', {\n            className: 'e-input e-audio-url',\n            attrs: { placeholder: placeUrl, spellcheck: 'false', 'aria-label': this.i10n.getConstant('audioLinkHeader') }\n        });\n        this.inputUrl.addEventListener('input', function () {\n            if (!isNOU(_this.inputUrl)) {\n                if (_this.inputUrl.value.length === 0) {\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                }\n                else {\n                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                }\n            }\n        });\n        if (e.selectNode && this.isAudioElem(e.selectNode[0])) {\n            var regex = new RegExp(/([^\\S]|^)(((https?:\\/\\/)|(www\\.))(\\S+))/gi);\n            var sourceElement = e.selectNode[0].querySelector('source');\n            this.inputUrl.value = sourceElement.src.match(regex) ? sourceElement.src : '';\n        }\n        audioUrl.appendChild(this.inputUrl);\n        return audioUrl;\n    };\n    Audio.prototype.audioUpload = function (e) {\n        var _this = this;\n        var save;\n        var selectParent;\n        // eslint-disable-next-line\n        var proxy = this;\n        var iframe = proxy.parent.iframeSettings.enable;\n        if (proxy.parent.editorMode === 'HTML' && (!iframe && isNullOrUndefined(closest(e.selection.range.startContainer.parentNode, '[id='\n            // eslint-disable-next-line\n            + \"'\" + this.parent.contentModule.getPanel().id + \"'\" + ']'))\n            || (iframe && !hasClass(e.selection.range.startContainer.parentNode.ownerDocument.querySelector('body'), 'e-lib')))) {\n            this.contentModule.getEditPanel().focus();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            save = this.parent.formatter.editorManager.nodeSelection.save(range, this.parent.contentModule.getDocument());\n            selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n        }\n        else {\n            save = e.selection;\n            selectParent = e.selectParent;\n        }\n        var uploadParentEle = this.parent.createElement('div', { className: 'e-aud-uploadwrap e-droparea' });\n        var deviceAudioUpMsg = this.i10n.getConstant('audioDeviceUploadMessage');\n        var audioUpMsg = this.i10n.getConstant('audioUploadMessage');\n        var span = this.parent.createElement('span', { className: 'e-droptext' });\n        var spanMsg = this.parent.createElement('span', {\n            className: 'e-rte-upload-text', innerHTML: ((Browser.isDevice) ? deviceAudioUpMsg : audioUpMsg)\n        });\n        span.appendChild(spanMsg);\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-browsebtn', id: this.rteID + '_insertAudio', attrs: { autofocus: 'true', type: 'button' }\n        });\n        span.appendChild(btnEle);\n        uploadParentEle.appendChild(span);\n        var browserMsg = this.i10n.getConstant('browse');\n        this.button = new Button({ content: browserMsg, enableRtl: this.parent.enableRtl });\n        this.button.isStringTemplate = true;\n        this.button.createElement = this.parent.createElement;\n        this.button.appendTo(btnEle);\n        var btnClick = (Browser.isDevice) ? span : btnEle;\n        EventHandler.add(btnClick, 'click', this.fileSelect, this);\n        var uploadEle = this.parent.createElement('input', {\n            id: this.rteID + '_upload', attrs: { type: 'File', name: 'UploadFiles' }\n        });\n        uploadParentEle.appendChild(uploadEle);\n        var fileName;\n        var selectArgs;\n        var filesData;\n        this.uploadObj = new Uploader({\n            asyncSettings: { saveUrl: this.parent.insertAudioSettings.saveUrl, removeUrl: this.parent.insertAudioSettings.removeUrl },\n            dropArea: span, multiple: false, enableRtl: this.parent.enableRtl,\n            allowedExtensions: this.parent.insertAudioSettings.allowedTypes.toString(),\n            selected: function (e) {\n                proxy.isAudioUploaded = true;\n                selectArgs = e;\n                // eslint-disable-next-line\n                filesData = e.filesData;\n                _this.parent.trigger(events.fileSelected, selectArgs, function (selectArgs) {\n                    if (!selectArgs.cancel) {\n                        _this.checkExtension(selectArgs.filesData[0]);\n                        fileName = selectArgs.filesData[0].name;\n                        if (_this.parent.editorMode === 'HTML' && isNullOrUndefined(_this.parent.insertAudioSettings.path)) {\n                            var reader_1 = new FileReader();\n                            // eslint-disable-next-line\n                            reader_1.addEventListener('load', function (e) {\n                                var url = _this.parent.insertAudioSettings.saveFormat === 'Base64' ? reader_1.result :\n                                    URL.createObjectURL(convertToBlob(reader_1.result));\n                                proxy.uploadUrl = {\n                                    url: url, selection: save, fileName: fileName,\n                                    selectParent: selectParent\n                                };\n                                proxy.inputUrl.setAttribute('disabled', 'true');\n                                if (isNullOrUndefined(proxy.parent.insertAudioSettings.saveUrl) && _this.isAllowedTypes\n                                    && !isNullOrUndefined(_this.dialogObj)) {\n                                    _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                                }\n                            });\n                            reader_1.readAsDataURL(selectArgs.filesData[0].rawFile);\n                        }\n                    }\n                });\n            },\n            beforeUpload: function (args) {\n                _this.parent.trigger(events.beforeFileUpload, args);\n            },\n            uploading: function (e) {\n                if (!_this.parent.isServerRendered) {\n                    _this.parent.trigger(events.fileUploading, e);\n                }\n            },\n            success: function (e) {\n                _this.parent.trigger(events.fileUploadSuccess, e, function (e) {\n                    if (!isNullOrUndefined(_this.parent.insertAudioSettings.path)) {\n                        var url = _this.parent.insertAudioSettings.path + e.file.name;\n                        // eslint-disable-next-line\n                        var value = { url: url, selection: save };\n                        proxy.uploadUrl = {\n                            url: url, selection: save, fileName: fileName, selectParent: selectParent\n                        };\n                        proxy.inputUrl.setAttribute('disabled', 'true');\n                    }\n                    if (e.operation === 'upload' && !isNullOrUndefined(_this.dialogObj)) {\n                        _this.dialogObj.getButtons(0).element.removeAttribute('disabled');\n                    }\n                });\n            },\n            failure: function (e) {\n                _this.parent.trigger(events.fileUploadFailed, e);\n            },\n            removing: function () {\n                // eslint-disable-next-line\n                _this.parent.trigger(events.fileRemoving, e, function (e) {\n                    proxy.isAudioUploaded = false;\n                    _this.dialogObj.getButtons(0).element.disabled = true;\n                    proxy.inputUrl.removeAttribute('disabled');\n                    if (proxy.uploadUrl) {\n                        proxy.uploadUrl.url = '';\n                    }\n                });\n            }\n        });\n        this.uploadObj.isStringTemplate = true;\n        this.uploadObj.createElement = this.parent.createElement;\n        this.uploadObj.appendTo(uploadEle);\n        return uploadParentEle;\n    };\n    Audio.prototype.checkExtension = function (e) {\n        if (this.uploadObj.allowedExtensions) {\n            if (this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf(('.' + e.type).toLocaleLowerCase()) === -1) {\n                this.dialogObj.getButtons(0).element.setAttribute('disabled', 'disabled');\n                this.isAllowedTypes = false;\n            }\n            else {\n                this.isAllowedTypes = true;\n            }\n        }\n    };\n    Audio.prototype.fileSelect = function () {\n        this.dialogObj.element.getElementsByClassName('e-file-select-wrap')[0].querySelector('button').click();\n        return false;\n    };\n    // eslint-disable-next-line\n    Audio.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.dialogObj.hide({ returnValue: true });\n        if (this.isAudioUploaded) {\n            this.uploadObj.removing();\n        }\n    };\n    // eslint-disable-next-line\n    Audio.prototype.insertAudioUrl = function (e) {\n        var proxy = this.selfAudio;\n        //let audioSelectParent: Node = proxy.uploadUrl.selectParent[0];\n        proxy.isAudioUploaded = false;\n        var url = proxy.inputUrl.value;\n        if (proxy.parent.formatter.getUndoRedoStack().length === 0) {\n            proxy.parent.formatter.saveData();\n        }\n        if (!isNullOrUndefined(proxy.uploadUrl) && proxy.uploadUrl.url !== '') {\n            proxy.uploadUrl.cssClass = (proxy.parent.insertAudioSettings.layoutOption === 'Inline' ?\n                classes.CLS_AUDIOINLINE : classes.CLS_AUDIOBREAK);\n            proxy.dialogObj.hide({ returnValue: false });\n            if (proxy.dialogObj !== null) {\n                return;\n            }\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, proxy.uploadUrl);\n            proxy.uploadUrl.url = '';\n        }\n        else if (url !== '') {\n            if (proxy.parent.editorMode === 'HTML' && isNullOrUndefined(closest(\n            // eslint-disable-next-line\n            this.selection.range.startContainer.parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))) {\n                proxy.contentModule.getEditPanel().focus();\n                var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n                this.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n                this.selectParent = proxy.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            }\n            var name_1 = proxy.parent.editorMode === 'HTML' ? url.split('/')[url.split('/').length - 1] : '';\n            var value = {\n                cssClass: (proxy.parent.insertAudioSettings.layoutOption === 'Inline' ? classes.CLS_AUDIOINLINE : classes.CLS_AUDIOBREAK),\n                url: url, selection: this.selection, fileName: name_1,\n                selectParent: this.selectParent\n            };\n            proxy.dialogObj.hide({ returnValue: false });\n            if (proxy.dialogObj !== null) {\n                return;\n            }\n            proxy.parent.formatter.process(proxy.parent, this.args, this.args.originalEvent, value);\n        }\n    };\n    /* eslint-disable */\n    /**\n     * Destroys the ToolBar.\n     *\n     * @method destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    /* eslint-enable */\n    Audio.prototype.destroy = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.prevSelectedAudEle = undefined;\n        if (this.showPopupTime) {\n            clearTimeout(this.showPopupTime);\n            this.showPopupTime = null;\n        }\n        this.removeEventListener();\n        this.clearDialogObj();\n        this.isDestroyed = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Audio.prototype.getModuleName = function () {\n        return 'audio';\n    };\n    return Audio;\n}());\nexport { Audio };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}