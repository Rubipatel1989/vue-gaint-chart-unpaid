{"ast":null,"code":"import * as CONSTANT from './../base/constant';\nimport * as EVENTS from './../../common/constant';\n/**\n * Link internal component\n *\n * @hidden\n\n */\nvar ClearFormat = /** @class */function () {\n  /**\n   * Constructor for creating the clear format plugin\n   *\n   * @param {MarkdownParser} parent - specifies the parent element\n   * @hidden\n    */\n  function ClearFormat(parent) {\n    this.parent = parent;\n    this.selection = this.parent.markdownSelection;\n    this.addEventListener();\n  }\n  ClearFormat.prototype.addEventListener = function () {\n    this.parent.observer.on(CONSTANT.CLEAR_COMMAND, this.clear, this);\n    this.parent.observer.on(EVENTS.INTERNAL_DESTROY, this.destroy, this);\n  };\n  ClearFormat.prototype.removeEventListener = function () {\n    this.parent.observer.off(CONSTANT.CLEAR_COMMAND, this.clear);\n    this.parent.observer.off(EVENTS.INTERNAL_DESTROY, this.destroy);\n  };\n  ClearFormat.prototype.replaceRegex = function (data) {\n    /* eslint-disable */\n    return data.replace(/\\*/ig, '\\\\*').replace(/\\&/ig, '\\\\&').replace(/\\-/ig, '\\\\-').replace(/\\^/ig, '\\\\^').replace(/\\$/ig, '\\\\$').replace(/\\./ig, '\\\\.').replace(/\\|/ig, '\\\\|').replace(/\\?/ig, '\\\\?').replace(/\\+/ig, '\\\\+').replace(/\\-/ig, '\\\\-').replace(/\\&/ig, '\\\\&');\n    /* eslint-enable */\n  };\n  ClearFormat.prototype.clearSelectionTags = function (text) {\n    var data = this.parent.selectionTags;\n    var keys = Object.keys(data);\n    for (var num = 0; num < keys.length; num++) {\n      var key = keys[num];\n      if (Object.prototype.hasOwnProperty.call(data, key) && data[\"\" + key] !== '') {\n        var expString = this.replaceRegex(data[\"\" + key]);\n        var regExp = void 0;\n        var startExp = data[\"\" + key].length;\n        var endExp = data[\"\" + key] === '<sup>' || data[\"\" + key] === '<sub>' ? data[\"\" + key].length + 1 : data[\"\" + key].length;\n        if (data[\"\" + key] === '<sup>') {\n          // eslint-disable-next-line\n          regExp = new RegExp('<sup>(.*?)<\\/sup>', 'ig');\n        } else if (data[\"\" + key] === '<sub>') {\n          // eslint-disable-next-line\n          regExp = new RegExp('<sub>(.*?)<\\/sub>', 'ig');\n        } else {\n          var regExpr = RegExp;\n          regExp = new regExpr(expString + '(.*?)' + expString, 'ig');\n        }\n        var val = text.match(regExp);\n        for (var index = 0; val && index < val.length && val[index] !== ''; index++) {\n          // eslint-disable-next-line max-len\n          text = text.replace(val[index], val[index].substr(startExp, val[index].length - endExp - startExp));\n        }\n      }\n    }\n    return text;\n  };\n  ClearFormat.prototype.clearFormatTags = function (text) {\n    var lines = text.split('\\n');\n    return this.clearFormatLines(lines);\n  };\n  ClearFormat.prototype.clearFormatLines = function (lines) {\n    var tags = [this.parent.formatTags, this.parent.listTags];\n    var str = '';\n    for (var len = 0; len < lines.length; len++) {\n      for (var num = 0; num < tags.length; num++) {\n        var data = tags[num];\n        var keys = Object.keys(data);\n        for (var index = 0; index < keys.length; index++) {\n          var key = keys[index];\n          if (Object.prototype.hasOwnProperty.call(data, key) && data[\"\" + key] !== '') {\n            if (lines[len].indexOf(data[\"\" + key]) === 0) {\n              lines[len] = lines[len].replace(data[\"\" + key], '');\n              lines[len] = this.clearFormatLines([lines[len]]);\n            }\n          }\n        }\n      }\n      str = str + lines[len] + (len !== lines.length - 1 ? '\\n' : '');\n    }\n    return str;\n  };\n  ClearFormat.prototype.clear = function (e) {\n    var textArea = this.parent.element;\n    textArea.focus();\n    var start = textArea.selectionStart;\n    var end = textArea.selectionEnd;\n    var text = this.selection.getSelectedText(textArea);\n    text = this.clearSelectionTags(text);\n    text = this.clearFormatTags(text);\n    textArea.value = textArea.value.substr(0, start) + text + textArea.value.substr(end, textArea.value.length);\n    this.parent.markdownSelection.setSelection(textArea, start, start + text.length);\n    this.restore(textArea, start, start + text.length, e);\n  };\n  ClearFormat.prototype.restore = function (textArea, start, end, event) {\n    this.selection.save(start, end);\n    this.selection.restore(textArea);\n    if (event && event.callBack) {\n      event.callBack({\n        requestType: event.subCommand,\n        selectedText: this.selection.getSelectedText(textArea),\n        editorMode: 'Markdown',\n        event: event.event\n      });\n    }\n  };\n  ClearFormat.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n  return ClearFormat;\n}();\nexport { ClearFormat };","map":{"version":3,"names":["CONSTANT","EVENTS","ClearFormat","parent","selection","markdownSelection","addEventListener","prototype","observer","on","CLEAR_COMMAND","clear","INTERNAL_DESTROY","destroy","removeEventListener","off","replaceRegex","data","replace","clearSelectionTags","text","selectionTags","keys","Object","num","length","key","hasOwnProperty","call","expString","regExp","startExp","endExp","RegExp","regExpr","val","match","index","substr","clearFormatTags","lines","split","clearFormatLines","tags","formatTags","listTags","str","len","indexOf","e","textArea","element","focus","start","selectionStart","end","selectionEnd","getSelectedText","value","setSelection","restore","event","save","callBack","requestType","subCommand","selectedText","editorMode"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/markdown-parser/plugin/clearformat.js"],"sourcesContent":["import * as CONSTANT from './../base/constant';\nimport * as EVENTS from './../../common/constant';\n/**\n * Link internal component\n *\n * @hidden\n\n */\nvar ClearFormat = /** @class */ (function () {\n    /**\n     * Constructor for creating the clear format plugin\n     *\n     * @param {MarkdownParser} parent - specifies the parent element\n     * @hidden\n\n     */\n    function ClearFormat(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    ClearFormat.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.CLEAR_COMMAND, this.clear, this);\n        this.parent.observer.on(EVENTS.INTERNAL_DESTROY, this.destroy, this);\n    };\n    ClearFormat.prototype.removeEventListener = function () {\n        this.parent.observer.off(CONSTANT.CLEAR_COMMAND, this.clear);\n        this.parent.observer.off(EVENTS.INTERNAL_DESTROY, this.destroy);\n    };\n    ClearFormat.prototype.replaceRegex = function (data) {\n        /* eslint-disable */\n        return data.replace(/\\*/ig, '\\\\*').replace(/\\&/ig, '\\\\&')\n            .replace(/\\-/ig, '\\\\-').replace(/\\^/ig, '\\\\^')\n            .replace(/\\$/ig, '\\\\$').replace(/\\./ig, '\\\\.')\n            .replace(/\\|/ig, '\\\\|').replace(/\\?/ig, '\\\\?')\n            .replace(/\\+/ig, '\\\\+').replace(/\\-/ig, '\\\\-')\n            .replace(/\\&/ig, '\\\\&');\n        /* eslint-enable */\n    };\n    ClearFormat.prototype.clearSelectionTags = function (text) {\n        var data = this.parent.selectionTags;\n        var keys = Object.keys(data);\n        for (var num = 0; num < keys.length; num++) {\n            var key = keys[num];\n            if (Object.prototype.hasOwnProperty.call(data, key) && data[\"\" + key] !== '') {\n                var expString = this.replaceRegex(data[\"\" + key]);\n                var regExp = void 0;\n                var startExp = data[\"\" + key].length;\n                var endExp = (data[\"\" + key] === '<sup>' || data[\"\" + key] === '<sub>') ? data[\"\" + key].length + 1 : data[\"\" + key].length;\n                if (data[\"\" + key] === '<sup>') {\n                    // eslint-disable-next-line\n                    regExp = new RegExp('<sup>(.*?)<\\/sup>', 'ig');\n                }\n                else if (data[\"\" + key] === '<sub>') {\n                    // eslint-disable-next-line\n                    regExp = new RegExp('<sub>(.*?)<\\/sub>', 'ig');\n                }\n                else {\n                    var regExpr = RegExp;\n                    regExp = new regExpr(expString + '(.*?)' + expString, 'ig');\n                }\n                var val = text.match(regExp);\n                for (var index = 0; val && index < val.length && val[index] !== ''; index++) {\n                    // eslint-disable-next-line max-len\n                    text = text.replace(val[index], val[index].substr(startExp, val[index].length - endExp - startExp));\n                }\n            }\n        }\n        return text;\n    };\n    ClearFormat.prototype.clearFormatTags = function (text) {\n        var lines = text.split('\\n');\n        return this.clearFormatLines(lines);\n    };\n    ClearFormat.prototype.clearFormatLines = function (lines) {\n        var tags = [this.parent.formatTags, this.parent.listTags];\n        var str = '';\n        for (var len = 0; len < lines.length; len++) {\n            for (var num = 0; num < tags.length; num++) {\n                var data = tags[num];\n                var keys = Object.keys(data);\n                for (var index = 0; index < keys.length; index++) {\n                    var key = keys[index];\n                    if (Object.prototype.hasOwnProperty.call(data, key) && data[\"\" + key] !== '') {\n                        if (lines[len].indexOf(data[\"\" + key]) === 0) {\n                            lines[len] = lines[len].replace(data[\"\" + key], '');\n                            lines[len] = this.clearFormatLines([lines[len]]);\n                        }\n                    }\n                }\n            }\n            str = str + lines[len] + ((len !== lines.length - 1) ? '\\n' : '');\n        }\n        return str;\n    };\n    ClearFormat.prototype.clear = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = this.selection.getSelectedText(textArea);\n        text = this.clearSelectionTags(text);\n        text = this.clearFormatTags(text);\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, start, start + text.length);\n        this.restore(textArea, start, start + text.length, e);\n    };\n    ClearFormat.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    ClearFormat.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return ClearFormat;\n}());\nexport { ClearFormat };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}