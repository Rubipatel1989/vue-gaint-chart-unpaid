{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { removeClass, addClass, extend, EventHandler } from '@syncfusion/ej2-base';\nimport { closest, classList, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren, isComplexField, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */function () {\n  /**\n   * Constructor for the Grid detail template module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} locator - specifes the serviceLocator\n   * @hidden\n   */\n  function DetailRow(parent, locator) {\n    //Internal variables\n    this.aria = new AriaService();\n    this.childRefs = [];\n    this.parent = parent;\n    this.serviceLocator = locator;\n    this.focus = locator.getService('focus');\n    this.addEventListener();\n  }\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  DetailRow.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    EventHandler.add(this.parent.element, 'auxclick', this.auxilaryclickHandler, this);\n    this.parent.on(events.click, this.clickHandler, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    this.parent.on(events.expandChildGrid, this.expand, this);\n    this.parent.on(events.columnVisibilityChanged, this.refreshColSpan, this);\n    this.parent.on(events.destroy, this.destroyChildGrids, this);\n    this.parent.on(events.destroyChildGrid, this.destroyChildGrids, this);\n  };\n  DetailRow.prototype.clickHandler = function (e) {\n    if ((e.target.classList.contains('e-icon-grightarrow') || e.target.classList.contains('e-icon-gdownarrow')) && !this.parent.allowGrouping) {\n      e.preventDefault();\n    }\n    this.toogleExpandcollapse(closest(e.target, 'td'));\n  };\n  DetailRow.prototype.auxilaryclickHandler = function (e) {\n    if ((e.target.classList.contains('e-icon-grightarrow') || e.target.classList.contains('e-icon-gdownarrow')) && !this.parent.allowGrouping && e.button === 1) {\n      e.preventDefault();\n    }\n  };\n  DetailRow.prototype.toogleExpandcollapse = function (target) {\n    this.l10n = this.serviceLocator.getService('localization');\n    var gObj = this.parent;\n    var table = this.parent.getContentTable();\n    var lastrowIdx = this.parent.getCurrentViewRecords().length - 1;\n    var parent = 'parentDetails';\n    var childGrid;\n    var isExpanded = target && target.classList.contains('e-detailrowcollapse');\n    if (!(target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) || target && target.classList.contains('e-masked-cell')) {\n      return;\n    }\n    var tr = target.parentElement;\n    var uid = tr.getAttribute('data-uid');\n    var rowObj = gObj.getRowObjectFromUID(uid);\n    var needToRefresh = false;\n    var nextRow = this.parent.getContentTable().querySelector(literals.tbody).children[tr.rowIndex + 1];\n    if (target.classList.contains('e-detailrowcollapse')) {\n      var data_1 = rowObj.data;\n      if (this.isDetailRow(nextRow)) {\n        nextRow.style.display = '';\n        gObj.notify(events.detailStateChange, {\n          data: data_1,\n          childGrid: gObj.childGrid,\n          detailElement: target,\n          isExpanded: isExpanded\n        });\n        needToRefresh = true;\n      } else if (gObj.getDetailTemplate() || gObj.childGrid) {\n        var rowId = getUid('grid-row');\n        var detailRow = this.parent.createElement('tr', {\n          className: 'e-detailrow',\n          attrs: {\n            'data-uid': rowId,\n            role: 'row'\n          }\n        });\n        var detailCell_1 = this.parent.createElement('th', {\n          className: 'e-detailcell',\n          attrs: {\n            'scope': 'col',\n            role: 'columnheader'\n          }\n        });\n        var colSpan = this.parent.getVisibleColumns().length;\n        if (this.parent.allowRowDragAndDrop) {\n          colSpan++;\n        }\n        detailCell_1.setAttribute('colspan', colSpan.toString());\n        var row = new Row({\n          isDataRow: true,\n          isExpand: true,\n          uid: rowId,\n          isDetailRow: true,\n          cells: [new Cell({\n            cellType: CellType.Indent\n          }), new Cell({\n            isDataCell: true,\n            visible: true\n          })]\n        });\n        row.parentUid = rowObj.uid;\n        for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n          detailRow.appendChild(this.parent.createElement('td', {\n            className: 'e-indentcell'\n          }));\n          row.cells.unshift(new Cell({\n            cellType: CellType.Indent\n          }));\n        }\n        detailRow.appendChild(this.parent.createElement('th', {\n          className: 'e-detailindentcell',\n          attrs: {\n            'scope': 'col'\n          }\n        }));\n        detailRow.appendChild(detailCell_1);\n        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n        var isReactCompiler = void 0;\n        var isReactChild = void 0;\n        if (gObj.detailTemplate) {\n          isReactCompiler = this.parent.isReact && typeof gObj.detailTemplate !== 'string' && !(gObj.detailTemplate.prototype && gObj.detailTemplate.prototype.CSPTemplate);\n          isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj && this.parent.parentDetails.parentInstObj.isReact;\n          var detailTemplateID = gObj.element.id + 'detailTemplate';\n          if (isReactCompiler || isReactChild) {\n            gObj.getDetailTemplate()(data_1, gObj, 'detailTemplate', detailTemplateID, null, null, detailCell_1);\n            this.parent.renderTemplates(function () {\n              gObj.trigger(events.detailDataBound, {\n                detailElement: detailCell_1,\n                data: data_1,\n                childGrid: childGrid\n              });\n            });\n          } else {\n            appendChildren(detailCell_1, gObj.getDetailTemplate()(data_1, gObj, 'detailTemplate', detailTemplateID, undefined, undefined, undefined, this.parent['root']));\n          }\n        } else {\n          childGrid = new Grid(this.getGridModel(gObj, rowObj, gObj.printMode));\n          childGrid.root = gObj.root ? gObj.root : gObj;\n          this.childRefs.push(childGrid);\n          if (childGrid.query) {\n            childGrid.query = childGrid.query.clone();\n          }\n          childGrid[\"\" + parent] = {\n            parentID: gObj.element.id,\n            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n            parentKeyField: gObj.childGrid.queryString,\n            parentKeyFieldValue: gObj.childGrid.queryString && isComplexField(gObj.childGrid.queryString) ? getObject(gObj.childGrid.queryString, data_1) : data_1[gObj.childGrid.queryString],\n            parentRowData: data_1\n          };\n          if (gObj.isReact || gObj.isVue) {\n            childGrid.parentDetails.parentInstObj = gObj;\n          } else if (gObj.parentDetails && gObj.parentDetails.parentInstObj && (gObj.parentDetails.parentInstObj.isReact || gObj.parentDetails.parentInstObj.isVue)) {\n            childGrid.parentDetails.parentInstObj = gObj.parentDetails.parentInstObj;\n          }\n          childGrid.isLegacyTemplate = gObj.isReact || gObj.isLegacyTemplate;\n          if (gObj.isPrinting) {\n            childGrid.isPrinting = true;\n            childGrid.on(events.contentReady, this.promiseResolve(childGrid), this);\n            childGrid.on(events.onEmpty, this.promiseResolve(childGrid), this);\n          }\n          rowObj.childGrid = childGrid;\n          var modules = childGrid.getInjectedModules();\n          var injectedModues = gObj.getInjectedModules();\n          if (!modules || modules.length !== injectedModues.length) {\n            childGrid.setInjectedModules(injectedModues);\n          }\n          var gridElem = this.parent.createElement('div', {\n            id: 'child' + parents(tr, 'e-grid').length + '_grid' + tr.rowIndex + getUid(''),\n            className: 'e-childgrid'\n          });\n          detailCell_1.appendChild(gridElem);\n          childGrid.appendTo(gridElem);\n        }\n        detailRow.appendChild(detailCell_1);\n        if (tr.nextSibling) {\n          tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n        } else {\n          tr.parentNode.appendChild(detailRow);\n        }\n        var rowElems = gObj.getRows();\n        var rowObjs = gObj.getRowsObject();\n        rowElems.splice(rowElems.indexOf(tr) + 1, 0, detailRow);\n        rowObjs.splice(rowObjs.indexOf(rowObj) + 1, 0, row);\n        if (!isReactCompiler || !isReactChild) {\n          gObj.trigger(events.detailDataBound, {\n            detailElement: detailCell_1,\n            data: data_1,\n            childGrid: childGrid\n          });\n        }\n        gObj.notify(events.detailDataBound, {\n          rows: rowObjs\n        });\n      }\n      classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n      classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n      rowObj.isExpand = true;\n      if (target.classList.contains('e-lastrowcell') && this.parent.getContent().clientHeight > table.scrollHeight) {\n        removeClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n        var detailrowIdx = table.querySelector(literals.tbody).getElementsByClassName('e-detailrow').length - 1;\n        addClass(table.querySelector(literals.tbody).getElementsByClassName('e-detailrow')[parseInt(detailrowIdx.toString(), 10)].childNodes, ['e-lastrowcell']);\n        this.lastrowcell = true;\n      }\n      this.aria.setExpand(target, true);\n      target.firstElementChild.setAttribute('title', this.l10n.getConstant('Expanded'));\n    } else {\n      if (this.isDetailRow(nextRow)) {\n        nextRow.style.display = 'none';\n        gObj.notify(events.detailStateChange, {\n          data: rowObj.data,\n          childGrid: gObj.childGrid,\n          detailElement: target,\n          isExpanded: isExpanded\n        });\n      }\n      classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n      classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n      if (parseInt(tr.getAttribute(literals.dataRowIndex), 10) === lastrowIdx && this.lastrowcell) {\n        addClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n        this.lastrowcell = false;\n      }\n      rowObj.isExpand = false;\n      needToRefresh = true;\n      this.aria.setExpand(target, false);\n      target.firstElementChild.setAttribute('title', this.l10n.getConstant('Collapsed'));\n    }\n    if (!isNullOrUndefined(gObj.detailTemplate) || gObj.childGrid && needToRefresh) {\n      gObj.updateVisibleExpandCollapseRows();\n      gObj.notify(events.refreshExpandandCollapse, {\n        rows: gObj.getRowsObject()\n      });\n    }\n    if (this.parent.allowTextWrap && this.parent.height === 'auto') {\n      if (this.parent.getContentTable().scrollHeight > this.parent.getContent().clientHeight) {\n        this.parent.scrollModule.setPadding();\n      } else {\n        this.parent.scrollModule.removePadding();\n      }\n    }\n  };\n  /**\n   * @hidden\n   * @param {IGrid} gObj - specifies the grid Object\n   * @param {Row<Column>}rowObj - specifies the row object\n   * @param {string} printMode - specifies the printmode\n   * @returns {Object} returns the object\n   */\n  DetailRow.prototype.getGridModel = function (gObj, rowObj, printMode) {\n    var gridModel;\n    if (gObj.isPrinting && rowObj.isExpand && gObj.expandedRows && gObj.expandedRows[rowObj.index] && gObj.expandedRows[rowObj.index].gridModel) {\n      gObj.expandedRows[rowObj.index].gridModel.hierarchyPrintMode = gObj.childGrid.hierarchyPrintMode;\n      gridModel = extend({}, gObj.expandedRows[rowObj.index].gridModel, gObj.childGrid, true);\n    } else {\n      if (gObj.isPrinting && gObj.childGrid.allowPaging) {\n        gObj.childGrid.allowPaging = printMode === 'CurrentPage';\n      }\n      gridModel = extend({}, {}, gObj.childGrid, true);\n    }\n    return gridModel;\n  };\n  DetailRow.prototype.promiseResolve = function (grid) {\n    var _this = this;\n    return function () {\n      grid.off(events.contentReady, _this.promiseResolve);\n      grid.off(events.onEmpty, _this.promiseResolve);\n      grid.notify(events.hierarchyPrint, {});\n    };\n  };\n  DetailRow.prototype.isDetailRow = function (row) {\n    return row && row.classList.contains('e-detailrow');\n  };\n  DetailRow.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n    if (this.parent.isDestroyed || !gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n    EventHandler.remove(this.parent.element, 'auxclick', this.auxilaryclickHandler);\n    this.parent.off(events.click, this.clickHandler);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.keyPressed, this.keyPressHandler);\n    this.parent.off(events.expandChildGrid, this.expand);\n    this.parent.off(events.columnVisibilityChanged, this.refreshColSpan);\n    this.parent.off(events.destroy, this.destroyChildGrids);\n    this.parent.off(events.destroyChildGrid, this.destroyChildGrids);\n  };\n  DetailRow.prototype.getTDfromIndex = function (index, className) {\n    var tr = !isNullOrUndefined(index) ? this.parent.getDataRows()[parseInt(index.toString(), 10)] : undefined;\n    if (tr && tr.querySelector(className)) {\n      return tr.querySelector(className);\n    }\n    return null;\n  };\n  /**\n   * Expands a detail row with the given target.\n   *\n   * @param  {Element} target - Defines the collapsed element to expand.\n   * @returns {void}\n   */\n  DetailRow.prototype.expand = function (target) {\n    if (!isNaN(target)) {\n      target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n    }\n    if (target && target.classList.contains('e-detailrowcollapse')) {\n      this.toogleExpandcollapse(target);\n    }\n  };\n  /**\n   * Collapses a detail row with the given target.\n   *\n   * @param  {Element} target - Defines the expanded element to collapse.\n   * @returns {void}\n   */\n  DetailRow.prototype.collapse = function (target) {\n    if (!isNaN(target)) {\n      target = this.getTDfromIndex(target, '.e-detailrowexpand');\n    }\n    if (target && target.classList.contains('e-detailrowexpand')) {\n      this.toogleExpandcollapse(target);\n    }\n  };\n  /**\n   * Expands all the detail rows of the Grid.\n   *\n   * @returns {void}\n   */\n  DetailRow.prototype.expandAll = function () {\n    this.expandCollapse(true);\n    this.parent.trigger(events.actionComplete, {\n      requestType: 'expandAllComplete',\n      type: events.actionComplete,\n      moduleObj: this\n    });\n  };\n  /**\n   * Collapses all the detail rows of the Grid.\n   *\n   * @returns {void}\n   */\n  DetailRow.prototype.collapseAll = function () {\n    this.expandCollapse(false);\n    this.parent.trigger(events.actionComplete, {\n      requestType: 'collapseAllComplete',\n      type: events.actionComplete,\n      moduleObj: this\n    });\n  };\n  DetailRow.prototype.expandCollapse = function (isExpand) {\n    var td;\n    var rows = this.parent.getDataRows();\n    for (var i = 0, len = rows.length; i < len; i++) {\n      td = rows[parseInt(i.toString(), 10)].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n      if (isExpand) {\n        this.expand(td);\n      } else {\n        this.collapse(td);\n      }\n    }\n  };\n  DetailRow.prototype.keyPressHandler = function (e) {\n    var gObj = this.parent;\n    var isMacLike = /(Mac)/i.test(navigator.platform);\n    if (isMacLike && e.metaKey) {\n      if (e.action === 'downArrow') {\n        e.action = 'ctrlDownArrow';\n      } else if (e.action === 'upArrow') {\n        e.action = 'ctrlUpArrow';\n      }\n    }\n    switch (e.action) {\n      case 'ctrlDownArrow':\n        this.expandAll();\n        break;\n      case 'ctrlUpArrow':\n        this.collapseAll();\n        break;\n      case 'altUpArrow':\n      case 'altDownArrow':\n        // eslint-disable-next-line no-case-declarations\n        var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n        if (selected.length) {\n          var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n          var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n          if (e.action === 'altDownArrow') {\n            this.expand(td);\n          } else {\n            this.collapse(td);\n          }\n        }\n        break;\n      case 'enter':\n        if (this.parent.isEdit) {\n          return;\n        }\n        // eslint-disable-next-line no-case-declarations\n        var element = this.focus.getFocusedElement();\n        if (element && (element.classList.contains('e-icon-grightarrow') || element.classList.contains('e-icon-gdownarrow'))) {\n          element = element.parentElement;\n        }\n        if (element && !element.classList.contains('e-detailrowcollapse') && !element.classList.contains('e-detailrowexpand')) {\n          break;\n        }\n        this.toogleExpandcollapse(element);\n        break;\n    }\n  };\n  DetailRow.prototype.refreshColSpan = function () {\n    var detailrows = this.parent.contentModule.getTable().querySelectorAll('tr.e-detailrow');\n    var colSpan = this.parent.getVisibleColumns().length;\n    for (var i = 0; i < detailrows.length; i++) {\n      detailrows[parseInt(i.toString(), 10)].querySelector('.e-detailcell').setAttribute('colspan', colSpan + '');\n    }\n  };\n  DetailRow.prototype.destroyChildGrids = function () {\n    var rows = this.parent.getRowsObject();\n    for (var i = 0; i < rows.length; i++) {\n      rows[parseInt(i.toString(), 10)].childGrid = null;\n    }\n    for (var i = 0; i < this.childRefs.length; i++) {\n      if (!this.childRefs[parseInt(i.toString(), 10)].isDestroyed) {\n        this.childRefs[parseInt(i.toString(), 10)].destroy();\n      }\n    }\n    this.childRefs = [];\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   * @private\n   */\n  DetailRow.prototype.getModuleName = function () {\n    return 'detailRow';\n  };\n  return DetailRow;\n}();\nexport { DetailRow };","map":{"version":3,"names":["removeClass","addClass","extend","EventHandler","closest","classList","isNullOrUndefined","Grid","parents","getUid","appendChildren","isComplexField","getObject","events","AriaService","Row","Cell","CellType","literals","DetailRow","parent","locator","aria","childRefs","serviceLocator","focus","getService","addEventListener","prototype","isDestroyed","add","element","auxilaryclickHandler","on","click","clickHandler","destroy","keyPressed","keyPressHandler","expandChildGrid","expand","columnVisibilityChanged","refreshColSpan","destroyChildGrids","destroyChildGrid","e","target","contains","allowGrouping","preventDefault","toogleExpandcollapse","button","l10n","gObj","table","getContentTable","lastrowIdx","getCurrentViewRecords","length","childGrid","isExpanded","tr","parentElement","uid","getAttribute","rowObj","getRowObjectFromUID","needToRefresh","nextRow","querySelector","tbody","children","rowIndex","data_1","data","isDetailRow","style","display","notify","detailStateChange","detailElement","getDetailTemplate","rowId","detailRow","createElement","className","attrs","role","detailCell_1","colSpan","getVisibleColumns","allowRowDragAndDrop","setAttribute","toString","row","isDataRow","isExpand","cells","cellType","Indent","isDataCell","visible","parentUid","i","len","groupSettings","columns","appendChild","unshift","parentNode","insertBefore","nextSibling","isReactCompiler","isReactChild","detailTemplate","isReact","CSPTemplate","parentDetails","parentInstObj","detailTemplateID","id","renderTemplates","trigger","detailDataBound","undefined","getGridModel","printMode","root","push","query","clone","parentID","parentPrimaryKeys","getPrimaryKeyFieldNames","parentKeyField","queryString","parentKeyFieldValue","parentRowData","isVue","isLegacyTemplate","isPrinting","contentReady","promiseResolve","onEmpty","modules","getInjectedModules","injectedModues","setInjectedModules","gridElem","appendTo","rowElems","getRows","rowObjs","getRowsObject","splice","indexOf","rows","firstElementChild","getContent","clientHeight","scrollHeight","querySelectorAll","detailrowIdx","getElementsByClassName","parseInt","childNodes","lastrowcell","setExpand","getConstant","dataRowIndex","updateVisibleExpandCollapseRows","refreshExpandandCollapse","allowTextWrap","height","scrollModule","setPadding","removePadding","gridModel","expandedRows","index","hierarchyPrintMode","allowPaging","grid","_this","off","hierarchyPrint","gridElement","gridHeader","gridContent","remove","getTDfromIndex","getDataRows","isNaN","collapse","expandAll","expandCollapse","actionComplete","requestType","type","moduleObj","collapseAll","td","isMacLike","test","navigator","platform","metaKey","action","selected","allowSelection","getSelectedRowIndexes","dataRow","isEdit","getFocusedElement","detailrows","contentModule","getTable","getModuleName"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-grids/src/grid/actions/detail-row.js"],"sourcesContent":["import { removeClass, addClass, extend, EventHandler } from '@syncfusion/ej2-base';\nimport { closest, classList, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren, isComplexField, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} locator - specifes the serviceLocator\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.childRefs = [];\n        this.parent = parent;\n        this.serviceLocator = locator;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    DetailRow.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.parent.element, 'auxclick', this.auxilaryclickHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.expandChildGrid, this.expand, this);\n        this.parent.on(events.columnVisibilityChanged, this.refreshColSpan, this);\n        this.parent.on(events.destroy, this.destroyChildGrids, this);\n        this.parent.on(events.destroyChildGrid, this.destroyChildGrids, this);\n    };\n    DetailRow.prototype.clickHandler = function (e) {\n        if ((e.target.classList.contains('e-icon-grightarrow') || e.target.classList.contains('e-icon-gdownarrow'))\n            && !this.parent.allowGrouping) {\n            e.preventDefault();\n        }\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    DetailRow.prototype.auxilaryclickHandler = function (e) {\n        if ((e.target.classList.contains('e-icon-grightarrow') || e.target.classList.contains('e-icon-gdownarrow'))\n            && !this.parent.allowGrouping && (e.button === 1)) {\n            e.preventDefault();\n        }\n    };\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        this.l10n = this.serviceLocator.getService('localization');\n        var gObj = this.parent;\n        var table = this.parent.getContentTable();\n        var lastrowIdx = this.parent.getCurrentViewRecords().length - 1;\n        var parent = 'parentDetails';\n        var childGrid;\n        var isExpanded = target && target.classList.contains('e-detailrowcollapse');\n        if (!(target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand')))\n            || (target && target.classList.contains('e-masked-cell'))) {\n            return;\n        }\n        var tr = target.parentElement;\n        var uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(uid);\n        var needToRefresh = false;\n        var nextRow = this.parent.getContentTable().querySelector(literals.tbody).children[tr.rowIndex + 1];\n        if (target.classList.contains('e-detailrowcollapse')) {\n            var data_1 = rowObj.data;\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = '';\n                gObj.notify(events.detailStateChange, { data: data_1,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n                needToRefresh = true;\n            }\n            else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                var rowId = getUid('grid-row');\n                var detailRow = this.parent.createElement('tr', { className: 'e-detailrow', attrs: { 'data-uid': rowId, role: 'row' } });\n                var detailCell_1 = this.parent.createElement('th', { className: 'e-detailcell', attrs: { 'scope': 'col', role: 'columnheader' } });\n                var colSpan = this.parent.getVisibleColumns().length;\n                if (this.parent.allowRowDragAndDrop) {\n                    colSpan++;\n                }\n                detailCell_1.setAttribute('colspan', colSpan.toString());\n                var row = new Row({\n                    isDataRow: true,\n                    isExpand: true,\n                    uid: rowId,\n                    isDetailRow: true,\n                    cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                });\n                row.parentUid = rowObj.uid;\n                for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                    detailRow.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n                    row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                }\n                detailRow.appendChild(this.parent.createElement('th', { className: 'e-detailindentcell', attrs: { 'scope': 'col' } }));\n                detailRow.appendChild(detailCell_1);\n                tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                var isReactCompiler = void 0;\n                var isReactChild = void 0;\n                if (gObj.detailTemplate) {\n                    isReactCompiler = this.parent.isReact && typeof (gObj.detailTemplate) !== 'string' &&\n                        !(gObj.detailTemplate.prototype && gObj.detailTemplate.prototype.CSPTemplate);\n                    isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj &&\n                        this.parent.parentDetails.parentInstObj.isReact;\n                    var detailTemplateID = gObj.element.id + 'detailTemplate';\n                    if (isReactCompiler || isReactChild) {\n                        gObj.getDetailTemplate()(data_1, gObj, 'detailTemplate', detailTemplateID, null, null, detailCell_1);\n                        this.parent.renderTemplates(function () {\n                            gObj.trigger(events.detailDataBound, { detailElement: detailCell_1, data: data_1, childGrid: childGrid });\n                        });\n                    }\n                    else {\n                        appendChildren(detailCell_1, gObj.getDetailTemplate()(data_1, gObj, 'detailTemplate', detailTemplateID, undefined, undefined, undefined, this.parent['root']));\n                    }\n                }\n                else {\n                    childGrid = new Grid(this.getGridModel(gObj, rowObj, gObj.printMode));\n                    childGrid.root = gObj.root ? gObj.root : gObj;\n                    this.childRefs.push(childGrid);\n                    if (childGrid.query) {\n                        childGrid.query = childGrid.query.clone();\n                    }\n                    childGrid[\"\" + parent] = {\n                        parentID: gObj.element.id,\n                        parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                        parentKeyField: gObj.childGrid.queryString,\n                        parentKeyFieldValue: gObj.childGrid.queryString && isComplexField(gObj.childGrid.queryString) ?\n                            getObject(gObj.childGrid.queryString, data_1) : data_1[gObj.childGrid.queryString],\n                        parentRowData: data_1\n                    };\n                    if (gObj.isReact || gObj.isVue) {\n                        childGrid.parentDetails.parentInstObj = gObj;\n                    }\n                    else if (gObj.parentDetails && gObj.parentDetails.parentInstObj && (gObj.parentDetails.parentInstObj.isReact\n                        || gObj.parentDetails.parentInstObj.isVue)) {\n                        childGrid.parentDetails.parentInstObj = gObj.parentDetails.parentInstObj;\n                    }\n                    childGrid.isLegacyTemplate = gObj.isReact\n                        || gObj.isLegacyTemplate;\n                    if (gObj.isPrinting) {\n                        childGrid.isPrinting = true;\n                        childGrid.on(events.contentReady, this.promiseResolve(childGrid), this);\n                        childGrid.on(events.onEmpty, this.promiseResolve(childGrid), this);\n                    }\n                    rowObj.childGrid = childGrid;\n                    var modules = childGrid.getInjectedModules();\n                    var injectedModues = gObj.getInjectedModules();\n                    if (!modules || modules.length !== injectedModues.length) {\n                        childGrid.setInjectedModules(injectedModues);\n                    }\n                    var gridElem = this.parent.createElement('div', {\n                        id: 'child' + parents(tr, 'e-grid').length +\n                            '_grid' + tr.rowIndex + getUid(''), className: 'e-childgrid'\n                    });\n                    detailCell_1.appendChild(gridElem);\n                    childGrid.appendTo(gridElem);\n                }\n                detailRow.appendChild(detailCell_1);\n                if (tr.nextSibling) {\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                }\n                else {\n                    tr.parentNode.appendChild(detailRow);\n                }\n                var rowElems = gObj.getRows();\n                var rowObjs = gObj.getRowsObject();\n                rowElems.splice(rowElems.indexOf(tr) + 1, 0, detailRow);\n                rowObjs.splice(rowObjs.indexOf(rowObj) + 1, 0, row);\n                if (!isReactCompiler || !isReactChild) {\n                    gObj.trigger(events.detailDataBound, { detailElement: detailCell_1, data: data_1, childGrid: childGrid });\n                }\n                gObj.notify(events.detailDataBound, { rows: rowObjs });\n            }\n            classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n            classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n            rowObj.isExpand = true;\n            if (target.classList.contains('e-lastrowcell') && this.parent.getContent().clientHeight > table.scrollHeight) {\n                removeClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                var detailrowIdx = table.querySelector(literals.tbody).getElementsByClassName('e-detailrow').length - 1;\n                addClass(table.querySelector(literals.tbody).getElementsByClassName('e-detailrow')[parseInt(detailrowIdx.toString(), 10)].childNodes, ['e-lastrowcell']);\n                this.lastrowcell = true;\n            }\n            this.aria.setExpand(target, true);\n            target.firstElementChild.setAttribute('title', this.l10n.getConstant('Expanded'));\n        }\n        else {\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = 'none';\n                gObj.notify(events.detailStateChange, { data: rowObj.data,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n            }\n            classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n            classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n            if (parseInt(tr.getAttribute(literals.dataRowIndex), 10) === lastrowIdx && this.lastrowcell) {\n                addClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                this.lastrowcell = false;\n            }\n            rowObj.isExpand = false;\n            needToRefresh = true;\n            this.aria.setExpand(target, false);\n            target.firstElementChild.setAttribute('title', this.l10n.getConstant('Collapsed'));\n        }\n        if (!isNullOrUndefined(gObj.detailTemplate) || (gObj.childGrid && needToRefresh)) {\n            gObj.updateVisibleExpandCollapseRows();\n            gObj.notify(events.refreshExpandandCollapse, { rows: gObj.getRowsObject() });\n        }\n        if (this.parent.allowTextWrap && this.parent.height === 'auto') {\n            if (this.parent.getContentTable().scrollHeight > this.parent.getContent().clientHeight) {\n                this.parent.scrollModule.setPadding();\n            }\n            else {\n                this.parent.scrollModule.removePadding();\n            }\n        }\n    };\n    /**\n     * @hidden\n     * @param {IGrid} gObj - specifies the grid Object\n     * @param {Row<Column>}rowObj - specifies the row object\n     * @param {string} printMode - specifies the printmode\n     * @returns {Object} returns the object\n     */\n    DetailRow.prototype.getGridModel = function (gObj, rowObj, printMode) {\n        var gridModel;\n        if (gObj.isPrinting && rowObj.isExpand && gObj.expandedRows &&\n            gObj.expandedRows[rowObj.index] && gObj.expandedRows[rowObj.index].gridModel) {\n            gObj.expandedRows[rowObj.index].gridModel.hierarchyPrintMode = gObj.childGrid.hierarchyPrintMode;\n            gridModel = extend({}, gObj.expandedRows[rowObj.index].gridModel, gObj.childGrid, true);\n        }\n        else {\n            if (gObj.isPrinting && gObj.childGrid.allowPaging) {\n                gObj.childGrid.allowPaging = printMode === 'CurrentPage';\n            }\n            gridModel = extend({}, {}, gObj.childGrid, true);\n        }\n        return gridModel;\n    };\n    DetailRow.prototype.promiseResolve = function (grid) {\n        var _this = this;\n        return function () {\n            grid.off(events.contentReady, _this.promiseResolve);\n            grid.off(events.onEmpty, _this.promiseResolve);\n            grid.notify(events.hierarchyPrint, {});\n        };\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.' + literals.gridHeader) &&\n            !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, 'auxclick', this.auxilaryclickHandler);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.expandChildGrid, this.expand);\n        this.parent.off(events.columnVisibilityChanged, this.refreshColSpan);\n        this.parent.off(events.destroy, this.destroyChildGrids);\n        this.parent.off(events.destroyChildGrid, this.destroyChildGrids);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = !isNullOrUndefined(index) ? this.parent.getDataRows()[parseInt(index.toString(), 10)] : undefined;\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     *\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @returns {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     *\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @returns {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of the Grid.\n     *\n     * @returns {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n        this.parent.trigger(events.actionComplete, { requestType: 'expandAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    /**\n     * Collapses all the detail rows of the Grid.\n     *\n     * @returns {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n        this.parent.trigger(events.actionComplete, { requestType: 'collapseAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[parseInt(i.toString(), 10)].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            if (isExpand) {\n                this.expand(td);\n            }\n            else {\n                this.collapse(td);\n            }\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        var isMacLike = /(Mac)/i.test(navigator.platform);\n        if (isMacLike && e.metaKey) {\n            if (e.action === 'downArrow') {\n                e.action = 'ctrlDownArrow';\n            }\n            else if (e.action === 'upArrow') {\n                e.action = 'ctrlUpArrow';\n            }\n        }\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                // eslint-disable-next-line no-case-declarations\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    if (e.action === 'altDownArrow') {\n                        this.expand(td);\n                    }\n                    else {\n                        this.collapse(td);\n                    }\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                // eslint-disable-next-line no-case-declarations\n                var element = this.focus.getFocusedElement();\n                if (element && (element.classList.contains('e-icon-grightarrow') || element.classList.contains('e-icon-gdownarrow'))) {\n                    element = element.parentElement;\n                }\n                if (element && !element.classList.contains('e-detailrowcollapse') &&\n                    !element.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    DetailRow.prototype.refreshColSpan = function () {\n        var detailrows = this.parent.contentModule.getTable().querySelectorAll('tr.e-detailrow');\n        var colSpan = this.parent.getVisibleColumns().length;\n        for (var i = 0; i < detailrows.length; i++) {\n            detailrows[parseInt(i.toString(), 10)].querySelector('.e-detailcell').setAttribute('colspan', colSpan + '');\n        }\n    };\n    DetailRow.prototype.destroyChildGrids = function () {\n        var rows = this.parent.getRowsObject();\n        for (var i = 0; i < rows.length; i++) {\n            rows[parseInt(i.toString(), 10)].childGrid = null;\n        }\n        for (var i = 0; i < this.childRefs.length; i++) {\n            if (!this.childRefs[parseInt(i.toString(), 10)].isDestroyed) {\n                this.childRefs[parseInt(i.toString(), 10)].destroy();\n            }\n        }\n        this.childRefs = [];\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}