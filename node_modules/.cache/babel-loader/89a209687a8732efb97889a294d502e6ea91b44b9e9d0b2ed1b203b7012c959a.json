{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { debounce, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, scrollToCursor, setEditFrameFocus } from '../../common/util';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoManager = /** @class */function () {\n  function UndoRedoManager(parent, options) {\n    this.undoRedoStack = [];\n    this.parent = parent;\n    this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n    this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n    this.addEventListener();\n  }\n  UndoRedoManager.prototype.addEventListener = function () {\n    this.debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n    this.parent.observer.on(EVENTS.KEY_UP_HANDLER, this.debounceListener, this);\n    this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n    this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n    this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    this.parent.observer.on(EVENTS.INTERNAL_DESTROY, this.destroy, this);\n  };\n  UndoRedoManager.prototype.onPropertyChanged = function (props) {\n    for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'undoRedoSteps':\n          this.undoRedoSteps = props.newProp.undoRedoSteps;\n          break;\n        case 'undoRedoTimer':\n          this.undoRedoTimer = props.newProp.undoRedoTimer;\n          break;\n      }\n    }\n  };\n  UndoRedoManager.prototype.removeEventListener = function () {\n    this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n    this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n    this.parent.observer.off(EVENTS.ACTION, this.onAction);\n    this.parent.observer.off(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged);\n    this.parent.observer.off(EVENTS.INTERNAL_DESTROY, this.destroy);\n    this.debounceListener = null;\n  };\n  /**\n   * onAction method\n   *\n   * @param {IHtmlSubCommands} e - specifies the sub command\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.onAction = function (e) {\n    if (e.subCommand === 'Undo') {\n      this.undo(e);\n    } else {\n      this.redo(e);\n    }\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.destroy = function () {\n    this.removeEventListener();\n    this.element = null;\n    this.steps = null;\n    this.undoRedoStack = [];\n    this.undoRedoSteps = null;\n    this.undoRedoTimer = null;\n  };\n  UndoRedoManager.prototype.keyDown = function (e) {\n    var event = e.event;\n    // eslint-disable-next-line\n    var proxy = this;\n    switch (event.action) {\n      case 'undo':\n        event.preventDefault();\n        proxy.undo(e);\n        break;\n      case 'redo':\n        event.preventDefault();\n        proxy.redo(e);\n        break;\n    }\n  };\n  UndoRedoManager.prototype.keyUp = function (e) {\n    if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n      this.saveData(e);\n    }\n  };\n  UndoRedoManager.prototype.getTextContentFromFragment = function (fragment) {\n    var textContent = '';\n    for (var i = 0; i < fragment.childNodes.length; i++) {\n      var childNode = fragment.childNodes[i];\n      if (childNode.nodeType === Node.TEXT_NODE) {\n        textContent += childNode.textContent;\n      } else if (childNode.nodeType === Node.ELEMENT_NODE) {\n        textContent += this.getTextContentFromFragment(childNode);\n      }\n    }\n    return textContent;\n  };\n  UndoRedoManager.prototype.isElementStructureEqual = function (previousFragment, currentFragment) {\n    if (previousFragment.childNodes.length !== currentFragment.childNodes.length) {\n      return false;\n    }\n    for (var i = 0; i < previousFragment.childNodes.length; i++) {\n      var previousFragmentNode = previousFragment.childNodes[i];\n      var currentFragmentNode = currentFragment.childNodes[i];\n      if (!previousFragmentNode || !currentFragmentNode) {\n        return false;\n      }\n      if (previousFragmentNode.nodeType !== currentFragmentNode.nodeType) {\n        return false;\n      }\n      if (previousFragmentNode.outerHTML !== currentFragmentNode.outerHTML) {\n        return false;\n      }\n    }\n    return true;\n  };\n  /**\n   * RTE collection stored html format.\n   *\n   * @function saveData\n   * @param {KeyboardEvent} e - specifies the keyboard event\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.saveData = function (e) {\n    if (!this.parent.currentDocument) {\n      return;\n    }\n    var range = new NodeSelection(this.parent.editableElement).getRange(this.parent.currentDocument);\n    var currentContainer = this.parent.editableElement === range.startContainer.parentElement ? range.startContainer.parentElement : range.startContainer;\n    for (var i = currentContainer.childNodes.length - 1; i >= 0; i--) {\n      if (!isNullOrUndefined(currentContainer.childNodes[i]) && currentContainer.childNodes[i].nodeName === '#text' && currentContainer.childNodes[i].textContent.length === 0 && currentContainer.childNodes[i].nodeName !== 'IMG' && currentContainer.childNodes[i].nodeName !== 'BR' && currentContainer.childNodes[i].nodeName && 'HR') {\n        detach(currentContainer.childNodes[i]);\n      }\n    }\n    range = new NodeSelection(this.parent.editableElement).getRange(this.parent.currentDocument);\n    var save = new NodeSelection(this.parent.editableElement).save(range, this.parent.currentDocument);\n    var clonedElement = this.parent.editableElement.cloneNode(true);\n    var fragment = document.createDocumentFragment();\n    while (clonedElement.firstChild) {\n      fragment.appendChild(clonedElement.firstChild);\n    }\n    var changEle = {\n      text: fragment,\n      range: save\n    };\n    if (this.undoRedoStack.length >= this.steps) {\n      this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n    }\n    if (this.undoRedoStack.length > 1 && this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed && this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset && this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset && this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer && this.getTextContentFromFragment(this.undoRedoStack[this.undoRedoStack.length - 1].text).trim() === this.getTextContentFromFragment(changEle.text).trim() && this.isElementStructureEqual(this.undoRedoStack[this.undoRedoStack.length - 1].text, changEle.text)) {\n      return;\n    }\n    this.undoRedoStack.push(changEle);\n    this.steps = this.undoRedoStack.length - 1;\n    if (this.steps > this.undoRedoSteps) {\n      this.undoRedoStack.shift();\n      this.steps--;\n    }\n    if (e && e.callBack) {\n      e.callBack();\n    }\n  };\n  /**\n   * Undo the editable text.\n   *\n   * @function undo\n   * @param {IHtmlSubCommands} e - specifies the sub commands\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.undo = function (e) {\n    if (this.steps > 0) {\n      var range = this.undoRedoStack[this.steps - 1].range;\n      var removedContent = this.undoRedoStack[this.steps - 1].text;\n      this.parent.editableElement.innerHTML = '';\n      this.parent.editableElement.appendChild(removedContent.cloneNode(true));\n      this.parent.editableElement.focus();\n      scrollToCursor(this.parent.currentDocument, this.parent.editableElement);\n      if (isIDevice()) {\n        setEditFrameFocus(this.parent.editableElement, e.selector);\n      }\n      range.restore();\n      this.steps--;\n      if (e.callBack) {\n        e.callBack({\n          requestType: 'Undo',\n          editorMode: 'HTML',\n          range: range,\n          elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n          event: e.event\n        });\n      }\n    }\n  };\n  /**\n   * Redo the editable text.\n   *\n   * @param {IHtmlSubCommands} e - specifies the sub commands\n   * @function redo\n   * @returns {void}\n   * @hidden\n    */\n  UndoRedoManager.prototype.redo = function (e) {\n    if (this.undoRedoStack[this.steps + 1] != null) {\n      var range = this.undoRedoStack[this.steps + 1].range;\n      var addedContent = this.undoRedoStack[this.steps + 1].text;\n      this.parent.editableElement.innerHTML = '';\n      this.parent.editableElement.appendChild(addedContent.cloneNode(true));\n      this.parent.editableElement.focus();\n      scrollToCursor(this.parent.currentDocument, this.parent.editableElement);\n      if (isIDevice()) {\n        setEditFrameFocus(this.parent.editableElement, e.selector);\n      }\n      range.restore();\n      this.steps++;\n      if (e.callBack) {\n        e.callBack({\n          requestType: 'Redo',\n          editorMode: 'HTML',\n          range: range,\n          elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n          event: e.event\n        });\n      }\n    }\n  };\n  /**\n   * getUndoStatus method\n   *\n   * @returns {boolean} - returns the boolean value\n   * @hidden\n    */\n  UndoRedoManager.prototype.getUndoStatus = function () {\n    var status = {\n      undo: false,\n      redo: false\n    };\n    if (this.steps > 0) {\n      status.undo = true;\n    }\n    if (this.undoRedoStack[this.steps + 1] != null) {\n      status.redo = true;\n    }\n    return status;\n  };\n  return UndoRedoManager;\n}();\nexport { UndoRedoManager };","map":{"version":3,"names":["debounce","isNullOrUndefined","detach","NodeSelection","EVENTS","isIDevice","scrollToCursor","setEditFrameFocus","UndoRedoManager","parent","options","undoRedoStack","undoRedoSteps","undoRedoTimer","addEventListener","prototype","debounceListener","keyUp","observer","on","KEY_UP_HANDLER","KEY_DOWN_HANDLER","keyDown","ACTION","onAction","MODEL_CHANGED_PLUGIN","onPropertyChanged","INTERNAL_DESTROY","destroy","props","_i","_a","Object","keys","newProp","length","prop","removeEventListener","off","e","subCommand","undo","redo","element","steps","event","proxy","action","preventDefault","keyCode","ctrlKey","saveData","getTextContentFromFragment","fragment","textContent","i","childNodes","childNode","nodeType","Node","TEXT_NODE","ELEMENT_NODE","isElementStructureEqual","previousFragment","currentFragment","previousFragmentNode","currentFragmentNode","outerHTML","currentDocument","range","editableElement","getRange","currentContainer","startContainer","parentElement","nodeName","save","clonedElement","cloneNode","document","createDocumentFragment","firstChild","appendChild","changEle","text","slice","collapsed","startOffset","endOffset","trim","push","shift","callBack","removedContent","innerHTML","focus","selector","restore","requestType","editorMode","elements","nodeSelection","getSelectedNodes","addedContent","getUndoStatus","status"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/editor-manager/plugin/undo.js"],"sourcesContent":["import { debounce, isNullOrUndefined, detach } from '@syncfusion/ej2-base';\nimport { NodeSelection } from './../../selection/selection';\nimport * as EVENTS from './../../common/constant';\nimport { isIDevice, scrollToCursor, setEditFrameFocus } from '../../common/util';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoManager = /** @class */ (function () {\n    function UndoRedoManager(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.addEventListener();\n    }\n    UndoRedoManager.prototype.addEventListener = function () {\n        this.debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, this.debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n        this.parent.observer.on(EVENTS.INTERNAL_DESTROY, this.destroy, this);\n    };\n    UndoRedoManager.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoManager.prototype.removeEventListener = function () {\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, this.keyUp);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n        this.parent.observer.off(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged);\n        this.parent.observer.off(EVENTS.INTERNAL_DESTROY, this.destroy);\n        this.debounceListener = null;\n    };\n    /**\n     * onAction method\n     *\n     * @param {IHtmlSubCommands} e - specifies the sub command\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.destroy = function () {\n        this.removeEventListener();\n        this.element = null;\n        this.steps = null;\n        this.undoRedoStack = [];\n        this.undoRedoSteps = null;\n        this.undoRedoTimer = null;\n    };\n    UndoRedoManager.prototype.keyDown = function (e) {\n        var event = e.event;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoManager.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    UndoRedoManager.prototype.getTextContentFromFragment = function (fragment) {\n        var textContent = '';\n        for (var i = 0; i < fragment.childNodes.length; i++) {\n            var childNode = fragment.childNodes[i];\n            if (childNode.nodeType === Node.TEXT_NODE) {\n                textContent += childNode.textContent;\n            }\n            else if (childNode.nodeType === Node.ELEMENT_NODE) {\n                textContent += this.getTextContentFromFragment(childNode);\n            }\n        }\n        return textContent;\n    };\n    UndoRedoManager.prototype.isElementStructureEqual = function (previousFragment, currentFragment) {\n        if (previousFragment.childNodes.length !== currentFragment.childNodes.length) {\n            return false;\n        }\n        for (var i = 0; i < previousFragment.childNodes.length; i++) {\n            var previousFragmentNode = previousFragment.childNodes[i];\n            var currentFragmentNode = currentFragment.childNodes[i];\n            if (!previousFragmentNode || !currentFragmentNode) {\n                return false;\n            }\n            if (previousFragmentNode.nodeType !== currentFragmentNode.nodeType) {\n                return false;\n            }\n            if (previousFragmentNode.outerHTML !== currentFragmentNode.outerHTML) {\n                return false;\n            }\n        }\n        return true;\n    };\n    /**\n     * RTE collection stored html format.\n     *\n     * @function saveData\n     * @param {KeyboardEvent} e - specifies the keyboard event\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.saveData = function (e) {\n        if (!this.parent.currentDocument) {\n            return;\n        }\n        var range = new NodeSelection(this.parent.editableElement).getRange(this.parent.currentDocument);\n        var currentContainer = this.parent.editableElement === range.startContainer.parentElement ?\n            range.startContainer.parentElement : range.startContainer;\n        for (var i = currentContainer.childNodes.length - 1; i >= 0; i--) {\n            if (!isNullOrUndefined(currentContainer.childNodes[i]) && currentContainer.childNodes[i].nodeName === '#text' &&\n                currentContainer.childNodes[i].textContent.length === 0 && currentContainer.childNodes[i].nodeName !== 'IMG' &&\n                currentContainer.childNodes[i].nodeName !== 'BR' && currentContainer.childNodes[i].nodeName && 'HR') {\n                detach(currentContainer.childNodes[i]);\n            }\n        }\n        range = new NodeSelection(this.parent.editableElement).getRange(this.parent.currentDocument);\n        var save = new NodeSelection(this.parent.editableElement).save(range, this.parent.currentDocument);\n        var clonedElement = this.parent.editableElement.cloneNode(true);\n        var fragment = document.createDocumentFragment();\n        while (clonedElement.firstChild) {\n            fragment.appendChild(clonedElement.firstChild);\n        }\n        var changEle = { text: fragment, range: save };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.collapsed === range.collapsed)\n            && (this.undoRedoStack[this.undoRedoStack.length - 1].range.startOffset === save.range.startOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.endOffset === save.range.endOffset) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].range.range.startContainer === save.range.startContainer) &&\n            (this.getTextContentFromFragment(this.undoRedoStack[this.undoRedoStack.length - 1].text).trim() ===\n                this.getTextContentFromFragment(changEle.text).trim()) &&\n            this.isElementStructureEqual(this.undoRedoStack[this.undoRedoStack.length - 1].text, changEle.text)) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     *\n     * @function undo\n     * @param {IHtmlSubCommands} e - specifies the sub commands\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            var range = this.undoRedoStack[this.steps - 1].range;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.editableElement.innerHTML = '';\n            this.parent.editableElement.appendChild(removedContent.cloneNode(true));\n            this.parent.editableElement.focus();\n            scrollToCursor(this.parent.currentDocument, this.parent.editableElement);\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps--;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Undo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * Redo the editable text.\n     *\n     * @param {IHtmlSubCommands} e - specifies the sub commands\n     * @function redo\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            var range = this.undoRedoStack[this.steps + 1].range;\n            var addedContent = this.undoRedoStack[this.steps + 1].text;\n            this.parent.editableElement.innerHTML = '';\n            this.parent.editableElement.appendChild(addedContent.cloneNode(true));\n            this.parent.editableElement.focus();\n            scrollToCursor(this.parent.currentDocument, this.parent.editableElement);\n            if (isIDevice()) {\n                setEditFrameFocus(this.parent.editableElement, e.selector);\n            }\n            range.restore();\n            this.steps++;\n            if (e.callBack) {\n                e.callBack({\n                    requestType: 'Redo',\n                    editorMode: 'HTML',\n                    range: range,\n                    elements: this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),\n                    event: e.event\n                });\n            }\n        }\n    };\n    /**\n     * getUndoStatus method\n     *\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n\n     */\n    UndoRedoManager.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoManager;\n}());\nexport { UndoRedoManager };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}