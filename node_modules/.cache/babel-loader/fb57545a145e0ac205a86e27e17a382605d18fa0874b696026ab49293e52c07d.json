{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport { createElement, detach, closest, Browser, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml, hasClass } from '../base/util';\nimport { removeClassWithAttr } from '../../common/util';\n/**\n * `Table` module is used to handle table actions.\n */\nvar Table = /** @class */function () {\n  function Table(parent, serviceLocator) {\n    this.ensureInsideTableList = true;\n    this.pageX = null;\n    this.pageY = null;\n    this.moveEle = null;\n    this.currentColumnResize = '';\n    this.resizeEndTime = 0;\n    this.isTableMoveActive = false;\n    this.isResizeBind = true;\n    this.parent = parent;\n    this.rteID = parent.element.id;\n    this.l10n = serviceLocator.getService('rteLocale');\n    this.rendererFactory = serviceLocator.getService('rendererFactory');\n    this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n    this.addEventListener();\n    this.isDestroyed = false;\n  }\n  Table.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.createTable, this.renderDlgContent, this);\n    this.parent.on(events.initialEnd, this.afterRender, this);\n    this.parent.on(events.dynamicModule, this.afterRender, this);\n    this.parent.on(events.showTableDialog, this.showDialog, this);\n    this.parent.on(events.closeTableDialog, this.closeDialog, this);\n    this.parent.on(events.docClick, this.docClick, this);\n    this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n    this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n    this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n    this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n    this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n    this.parent.on(events.keyDown, this.keyDown, this);\n    this.parent.on(events.keyUp, this.keyUp, this);\n    this.parent.on(events.mouseUp, this.selectionTable, this);\n    this.parent.on(events.tableModulekeyUp, this.tableModulekeyUp, this);\n    this.parent.on(events.bindCssClass, this.setCssClass, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.afterKeyDown, this.afterKeyDown, this);\n  };\n  Table.prototype.removeEventListener = function () {\n    this.parent.off(events.createTable, this.renderDlgContent);\n    this.parent.off(events.initialEnd, this.afterRender);\n    this.parent.off(events.dynamicModule, this.afterRender);\n    this.parent.off(events.docClick, this.docClick);\n    this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n    this.parent.off(events.showTableDialog, this.showDialog);\n    this.parent.off(events.closeTableDialog, this.closeDialog);\n    this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n    this.parent.off(events.clearDialogObj, this.clearDialogObj);\n    this.parent.off(events.tableToolbarAction, this.onToolbarAction);\n    this.parent.off(events.dropDownSelect, this.dropdownSelect);\n    this.parent.off(events.mouseDown, this.cellSelect);\n    this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n    this.parent.off(events.keyDown, this.keyDown);\n    this.parent.off(events.keyUp, this.keyUp);\n    this.parent.off(events.mouseUp, this.selectionTable);\n    this.parent.off(events.tableModulekeyUp, this.tableModulekeyUp);\n    this.parent.off(events.bindCssClass, this.setCssClass);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.afterKeyDown, this.afterKeyDown);\n    if (!Browser.isDevice && this.parent.tableSettings.resize) {\n      EventHandler.remove(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper);\n      EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart);\n    }\n  };\n  Table.prototype.updateCss = function (currentObj, e) {\n    if (currentObj && e.cssClass) {\n      if (isNullOrUndefined(e.oldCssClass)) {\n        currentObj.setProperties({\n          cssClass: (currentObj.cssClass + ' ' + e.cssClass).trim()\n        });\n      } else {\n        currentObj.setProperties({\n          cssClass: (currentObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim()\n        });\n      }\n    }\n  };\n  Table.prototype.setCssClass = function (e) {\n    if (this.popupObj && e.cssClass) {\n      if (isNullOrUndefined(e.oldCssClass)) {\n        addClass([this.popupObj.element], e.cssClass);\n      } else {\n        removeClassWithAttr([this.popupObj.element], e.oldCssClass);\n        addClass([this.popupObj.element], e.cssClass);\n      }\n    }\n    this.updateCss(this.createTableButton, e);\n    this.updateCss(this.editdlgObj, e);\n    var numericTextBoxObj = [this.columnTextBox, this.rowTextBox, this.tableWidthNum, this.tableCellPadding, this.tableCellSpacing];\n    for (var i = 0; i < numericTextBoxObj.length; i++) {\n      this.updateCss(numericTextBoxObj[i], e);\n    }\n  };\n  Table.prototype.selectionTable = function (e) {\n    var target = e.args.target;\n    if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n      this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n    }\n  };\n  Table.prototype.afterRender = function () {\n    if (isNullOrUndefined(this.contentModule)) {\n      this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n      this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n      this.parent.on(events.mouseDown, this.cellSelect, this);\n      if (this.parent.tableSettings.resize) {\n        EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n      }\n      if (!Browser.isDevice && this.parent.tableSettings.resize) {\n        EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n      }\n    }\n  };\n  Table.prototype.dropdownSelect = function (e) {\n    var item = e.item;\n    if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n      return;\n    }\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n    var args = {\n      args: e,\n      selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n      selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n    };\n    switch (item.subCommand) {\n      case 'InsertRowBefore':\n      case 'InsertRowAfter':\n        this.addRow(args.selection, e);\n        break;\n      case 'InsertColumnLeft':\n      case 'InsertColumnRight':\n        this.addColumn(args.selection, e);\n        break;\n      case 'DeleteColumn':\n      case 'DeleteRow':\n        this.removeRowColumn(args.selection, e);\n        break;\n      case 'AlignTop':\n      case 'AlignMiddle':\n      case 'AlignBottom':\n        this.verticalAlign(args, e);\n        break;\n      case 'Dashed':\n      case 'Alternate':\n      case 'Custom':\n        this.tableStyles(args, item.subCommand);\n        break;\n      case 'Merge':\n      case 'VerticalSplit':\n      case 'HorizontalSplit':\n        this.UpdateCells(args.selection, e);\n        break;\n    }\n  };\n  Table.prototype.UpdateCells = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      subCommand: e.item.subCommand\n    });\n    this.hideTableQuickToolbar();\n  };\n  Table.prototype.keyUp = function (e) {\n    var target = e.args.target;\n    if (e.args.key.toLocaleLowerCase() === 'escape' && target && target.classList && this.popupObj && !closest(target, '[id=' + '\\'' + this.popupObj.element.id + '\\'' + ']') && this.popupObj) {\n      var createTableToolbarBtn = this.popupObj.relateTo;\n      if (createTableToolbarBtn.nodeName !== 'BUTTON') {\n        createTableToolbarBtn = createTableToolbarBtn.querySelector('span.e-create-table');\n        createTableToolbarBtn = createTableToolbarBtn.parentElement;\n      }\n      this.popupObj.hide();\n      if (createTableToolbarBtn) {\n        createTableToolbarBtn.focus();\n      }\n    }\n  };\n  Table.prototype.keyDown = function (e) {\n    var event = e.args;\n    // eslint-disable-next-line\n    var proxy = this;\n    switch (event.action) {\n      case 'escape':\n        break;\n      case 'insert-table':\n        this.openDialog(true, e);\n        event.preventDefault();\n        break;\n    }\n    if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule && event.code !== 'KeyK') {\n      var selection = void 0;\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n      ele = ele && ele.tagName !== 'TD' && ele.tagName !== 'TH' ? ele.parentElement : ele;\n      if (event.keyCode === 8 || event.keyCode === 46 || event.ctrlKey && event.keyCode === 88) {\n        if (ele && ele.tagName === 'TBODY') {\n          if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n            selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n          }\n          event.preventDefault();\n          proxy.removeTable(selection, event, true);\n        } else if (ele && ele.querySelectorAll('table').length > 0) {\n          this.removeResizeElement();\n          this.hideTableQuickToolbar();\n        }\n      }\n      if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n        var closestTd = closest(ele, 'td');\n        ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n      }\n      if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n        var selectedEndCell = this.contentModule.getEditPanel().querySelectorAll('.e-cell-select-end');\n        if ((isNOU(this.activeCell) || this.activeCell !== ele) && !isNOU(selectedEndCell) && selectedEndCell.length === 0) {\n          this.activeCell = ele;\n        }\n        if (!isNOU(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n          selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n        }\n        if (!event.shiftKey || event.shiftKey && event.keyCode === 9) {\n          switch (event.keyCode) {\n            case 9:\n            case 37:\n            case 39:\n              this.removeCellSelectClasses();\n              proxy.tabSelection(event, selection, ele);\n              break;\n            case 40:\n            case 38:\n              this.removeCellSelectClasses();\n              proxy.tableArrowNavigation(event, selection, ele);\n              break;\n          }\n        }\n      }\n    }\n    if (event.shiftKey && (event.keyCode === 39 || event.keyCode === 37 || event.keyCode === 38 || event.keyCode === 40)) {\n      this.keyDownEventInstance = event;\n      EventHandler.add(this.parent.contentModule.getDocument(), 'selectionchange', this.tableCellsKeyboardSelection, this);\n    }\n    if (event.ctrlKey && event.key === 'a') {\n      this.handleSelectAll();\n    }\n    if ((event.code === 'Delete' && event.which === 46 || event.code === 'Backspace' && event.which === 8) && this.parent.editorMode === 'HTML') {\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      if (range.startContainer.nodeType === Node.ELEMENT_NODE && range.startContainer.nodeName === 'DIV' && range.startContainer.classList.contains('e-table-fake-selection')) {\n        this.deleteTable();\n        event.preventDefault();\n      } else {\n        var table = event.code === 'Delete' && event.which === 46 ? this.getAdjacentTableElement(range, true) : this.getAdjacentTableElement(range, false);\n        if (table) {\n          this.updateTableSelection(table);\n          event.preventDefault();\n        }\n      }\n    } else {\n      var isShiftEnter = event.shiftKey && event.key === 'Enter';\n      var isActionKey = classes.ALLOWED_ACTIONKEYS.indexOf(event.key) !== -1;\n      if (isShiftEnter || isActionKey || event.key && event.key.length === 1) {\n        var table = this.parent.contentModule.getEditPanel().querySelector('table.e-cell-select');\n        if (table) {\n          if (event.keyCode === 39 || event.keyCode === 37) {\n            this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(), table, 0);\n          } else {\n            var firstTd = table.querySelector('tr').cells[0];\n            this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), firstTd, firstTd, 0, 0);\n          }\n        }\n        this.removeTableSelection();\n      }\n    }\n  };\n  Table.prototype.tableCellsKeyboardSelection = function (e) {\n    EventHandler.remove(this.parent.contentModule.getDocument(), 'selectionchange', this.tableCellsKeyboardSelection);\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n    var event = this.keyDownEventInstance;\n    var isMultiSelect = !isNullOrUndefined(range) && !isNullOrUndefined(range.commonAncestorContainer) && range.commonAncestorContainer.nodeType === Node.ELEMENT_NODE && (range.commonAncestorContainer.tagName === 'TR' || range.commonAncestorContainer.tagName === 'TBODY') && !isNullOrUndefined(this.activeCell);\n    var selectedEndCell = this.contentModule.getEditPanel().querySelectorAll('.e-cell-select-end');\n    if (!isNullOrUndefined(selectedEndCell) && selectedEndCell.length > 0) {\n      this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.contentModule.getDocument());\n      this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(), selectedEndCell[0], selectedEndCell[0], 0, 0);\n      this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), selectedEndCell[0], 0);\n    }\n    if (isMultiSelect || !isNullOrUndefined(selectedEndCell) && selectedEndCell.length > 0) {\n      var cells = this.getCorrespondingColumns();\n      var cell = !isNullOrUndefined(selectedEndCell) && selectedEndCell.length > 0 ? selectedEndCell[0] : this.activeCell;\n      var activeIndexes = this.getCorrespondingIndex(cell, cells);\n      var activeCellRowIndex = activeIndexes[0];\n      var activeCellColIndex = activeIndexes[1];\n      var target = void 0;\n      if (event.keyCode === 39) {\n        if (activeCellColIndex < cells[0].length - 1) {\n          target = cells[activeCellRowIndex][activeCellColIndex + 1];\n        } else if (activeCellRowIndex < cells.length - 1) {\n          target = cells[activeCellRowIndex + 1][activeCellColIndex];\n          if (selectedEndCell.length === 0 && activeCellRowIndex < cells.length - 1) {\n            this.activeCell = cells[activeCellRowIndex][0];\n          }\n        } else {\n          this.resetTableSelection();\n        }\n      } else if (event.keyCode === 37) {\n        if (0 < activeCellColIndex) {\n          target = cells[activeCellRowIndex][activeCellColIndex - 1];\n        } else if (0 < activeCellRowIndex) {\n          target = cells[activeCellRowIndex - 1][activeCellColIndex];\n          if (selectedEndCell.length === 0 && 0 < activeCellRowIndex) {\n            this.activeCell = cells[activeCellRowIndex][cells[activeCellRowIndex].length - 1];\n          }\n        } else {\n          this.resetTableSelection();\n        }\n      } else if (event.keyCode === 38) {\n        if (0 < activeCellRowIndex) {\n          target = cells[activeCellRowIndex - 1][activeCellColIndex];\n        } else {\n          this.resetTableSelection();\n        }\n      } else if (event.keyCode === 40) {\n        if (activeCellRowIndex < cells.length - 1) {\n          target = cells[activeCellRowIndex + 1][activeCellColIndex];\n        } else {\n          this.resetTableSelection();\n        }\n      }\n      if (target) {\n        this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', {\n          event: {\n            target: target\n          },\n          selectNode: [this.activeCell]\n        });\n      }\n    }\n    if (selectedEndCell.length > 0) {\n      event.preventDefault();\n      e.preventDefault();\n    }\n  };\n  Table.prototype.resetTableSelection = function () {\n    var selectedEndCell = this.contentModule.getEditPanel().querySelectorAll('.e-cell-select-end');\n    if (!isNullOrUndefined(selectedEndCell) && selectedEndCell.length > 0) {\n      this.parent.formatter.editorManager.nodeSelection.setSelectionNode(this.parent.contentModule.getDocument(), this.curTable);\n    }\n    this.activeCell = null;\n    this.removeCellSelectClasses();\n    this.removeTableSelection();\n  };\n  Table.prototype.getCorrespondingColumns = function () {\n    var elementArray = [];\n    var colspan = 0;\n    var allRows = this.curTable.rows;\n    for (var i = 0; i <= allRows.length - 1; i++) {\n      var ele = allRows[i];\n      var index = 0;\n      for (var j = 0; j <= ele.children.length - 1; j++) {\n        var colEle = ele.children[j];\n        for (var ele_1 = colEle, colspan_1 = parseInt(ele_1.getAttribute('colspan'), 10) || 1, rowSpan = parseInt(ele_1.getAttribute('rowspan'), 10) || 1, rowIndex = i; rowIndex < i + rowSpan; rowIndex++) {\n          for (var colIndex = index; colIndex < index + colspan_1; colIndex++) {\n            if (!elementArray[rowIndex]) {\n              elementArray[rowIndex] = [];\n            }\n            if (elementArray[rowIndex][colIndex]) {\n              index++;\n            } else {\n              elementArray[rowIndex][colIndex] = colEle;\n            }\n          }\n        }\n        index += colspan;\n      }\n    }\n    return elementArray;\n  };\n  Table.prototype.getCorrespondingIndex = function (cell, allCells) {\n    for (var i = 0; i < allCells.length; i++) {\n      for (var j = 0; j < allCells[i].length; j++) {\n        if (allCells[i][j] === cell) {\n          return [i, j];\n        }\n      }\n    }\n    return [];\n  };\n  Table.prototype.getAdjacentTableElement = function (range, isdelKey) {\n    if (!range.collapsed || !isdelKey && this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n      return null;\n    }\n    var nodeCollection = this.getNodeCollection(range);\n    var startContainer = range.collapsed && this.parent.contentModule.getEditPanel() === range.startContainer && nodeCollection && nodeCollection.length > 0 && nodeCollection[0] ? nodeCollection[0] : range.startContainer;\n    var adjacentElement = this.getSelectedTableEle(nodeCollection);\n    var isBrEle = this.getBrElement(range, nodeCollection);\n    if (startContainer && startContainer.nodeType === Node.ELEMENT_NODE) {\n      if (startContainer.tagName === 'IMG' || startContainer.querySelector('img') || startContainer.tagName === 'AUDIO' || startContainer.querySelector('audio') || startContainer.tagName === 'VIDEO' || startContainer.querySelector('video') || startContainer.querySelector('.e-video-clickelem')) {\n        var compareRange = this.contentModule.getDocument().createRange();\n        compareRange.collapse(true);\n        compareRange.selectNodeContents(startContainer);\n        var nodeIndex = this.parent.formatter.editorManager.nodeSelection.getIndex(startContainer);\n        if (isdelKey && compareRange.startOffset >= range.startOffset || !isdelKey && (startContainer.tagName !== 'IMG' && compareRange.startOffset !== range.startOffset || startContainer.tagName === 'IMG' && nodeIndex !== range.startOffset)) {\n          return null;\n        }\n      }\n    }\n    if (startContainer && startContainer.nodeType === Node.TEXT_NODE) {\n      if (isdelKey) {\n        if (range.endOffset !== range.endContainer.textContent.length) {\n          if (range.endOffset !== range.endContainer.textContent.trim().length) {\n            return null;\n          }\n        }\n      } else if (range.startOffset !== 0) {\n        return null;\n      }\n    }\n    if (startContainer && startContainer.nodeType === Node.ELEMENT_NODE && startContainer.tagName === 'TABLE') {\n      adjacentElement = startContainer;\n    }\n    if (adjacentElement) {\n      var currentEleIndex = this.parent.formatter.editorManager.nodeSelection.getIndex(adjacentElement);\n      if (!(range.startOffset === currentEleIndex && isdelKey || range.startOffset !== currentEleIndex && !isdelKey)) {\n        adjacentElement = null;\n      }\n    }\n    if (!adjacentElement && startContainer) {\n      adjacentElement = this.getAdjacentElementFromDom(startContainer, isBrEle, isdelKey);\n    }\n    if (adjacentElement && adjacentElement.nodeType === Node.ELEMENT_NODE && adjacentElement.tagName === 'TABLE') {\n      this.setSelection(adjacentElement, isBrEle);\n      return adjacentElement;\n    }\n    return null;\n  };\n  Table.prototype.getAdjacentElementFromDom = function (startContainer, isBrEle, isdelKey) {\n    var adjacentElement;\n    var parentElement = isBrEle ? isBrEle : startContainer.parentNode;\n    var currentElement = startContainer;\n    while (parentElement && !adjacentElement && parentElement.parentNode) {\n      var childNodes = Array.from(parentElement.childNodes);\n      var startContainerIndex = childNodes.indexOf(currentElement);\n      if (startContainerIndex !== -1 && (isdelKey && startContainerIndex < childNodes.length - 1 || !isdelKey && startContainerIndex > 0)) {\n        adjacentElement = childNodes[isdelKey ? startContainerIndex + 1 : startContainerIndex - 1];\n      } else {\n        adjacentElement = isdelKey ? parentElement.nextSibling : parentElement.previousSibling;\n        currentElement = parentElement;\n      }\n      if (!isBrEle && startContainer.nodeType === Node.TEXT_NODE && adjacentElement && adjacentElement.tagName && adjacentElement.tagName.toUpperCase() === 'BR') {\n        isBrEle = currentElement = parentElement = adjacentElement;\n        adjacentElement = null;\n      }\n      if (!isBrEle && adjacentElement && !(adjacentElement.nodeType === Node.ELEMENT_NODE && adjacentElement.tagName === 'TABLE') && !isNullOrUndefined(adjacentElement.textContent) && !adjacentElement.textContent.trim()) {\n        currentElement = parentElement = adjacentElement.parentNode;\n        adjacentElement = null;\n      }\n      if (adjacentElement && adjacentElement.tagName && ['UL', 'OL', 'LI'].indexOf(adjacentElement.tagName.toUpperCase()) !== -1) {\n        adjacentElement = this.getAdjacentElementFromList(adjacentElement, isdelKey);\n        if (!adjacentElement) {\n          return null;\n        }\n      }\n      if (parentElement && parentElement.tagName && parentElement.tagName.toUpperCase() === 'LI' && !isdelKey) {\n        adjacentElement = parentElement;\n      }\n      parentElement = parentElement.parentNode;\n    }\n    return adjacentElement;\n  };\n  Table.prototype.getAdjacentElementFromList = function (adjacentElement, isdelKey) {\n    while (adjacentElement) {\n      if (adjacentElement.tagName && ['UL', 'OL', 'LI'].indexOf(adjacentElement.tagName.toUpperCase()) === -1) {\n        if (!(adjacentElement.nodeType === Node.ELEMENT_NODE && adjacentElement.tagName === 'TABLE')) {\n          adjacentElement = isdelKey ? adjacentElement.firstChild : adjacentElement.lastChild;\n        }\n        break;\n      }\n      adjacentElement = isdelKey ? adjacentElement.firstChild : adjacentElement.lastChild;\n    }\n    return adjacentElement;\n  };\n  Table.prototype.getNodeCollection = function (range) {\n    var nodes = [];\n    if (range.collapsed && this.parent.contentModule.getEditPanel() === range.startContainer && range.startContainer.childNodes.length > 0) {\n      var index = Math.max(0, Math.min(range.startContainer.childNodes.length - 1, range.endOffset - 1));\n      nodes.push(range.startContainer.childNodes[index]);\n    } else {\n      nodes = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n    }\n    return nodes;\n  };\n  Table.prototype.getSelectedTableEle = function (nodeCollection) {\n    if (nodeCollection && nodeCollection.length > 0) {\n      for (var _i = 0, _a = Array.from(nodeCollection); _i < _a.length; _i++) {\n        var element = _a[_i];\n        if (element && element.tagName === 'TABLE') {\n          return element;\n        }\n      }\n    }\n    return null;\n  };\n  Table.prototype.getBrElement = function (range, nodeCollection) {\n    if (range.endContainer.tagName === 'BR') {\n      return range.endContainer;\n    }\n    if (nodeCollection.length === 1 && nodeCollection[0] && nodeCollection[0].tagName === 'BR') {\n      return nodeCollection[0];\n    }\n    return null;\n  };\n  Table.prototype.setSelection = function (nextElement, isBrEle) {\n    if (!nextElement.classList.contains('e-cell-select')) {\n      this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n      if (isBrEle) {\n        if (isBrEle.parentNode && isBrEle.parentNode.childNodes.length === 1 && isBrEle.parentNode.firstChild.nodeName === 'BR') {\n          detach(isBrEle.parentNode);\n        } else {\n          detach(isBrEle);\n        }\n      }\n      var fakeSelectionEle = this.parent.createElement('div', {\n        className: 'e-table-fake-selection'\n      });\n      fakeSelectionEle.setAttribute('contenteditable', 'false');\n      this.contentModule.getEditPanel().appendChild(fakeSelectionEle);\n      this.parent.formatter.editorManager.nodeSelection.setSelectionNode(this.contentModule.getDocument(), fakeSelectionEle);\n    }\n  };\n  Table.prototype.removeAllFakeSelectionEles = function () {\n    var fakeSelectionEles = this.parent.contentModule.getEditPanel().querySelectorAll('.e-table-fake-selection');\n    if (fakeSelectionEles && fakeSelectionEles.length > 0) {\n      fakeSelectionEles.forEach(function (element) {\n        detach(element);\n      });\n    }\n  };\n  Table.prototype.deleteTable = function () {\n    var table = this.parent.contentModule.getEditPanel().querySelector('table.e-cell-select');\n    this.removeResizeElement();\n    if (table) {\n      var brElement = document.createElement('br');\n      var containerEle = brElement;\n      if (this.parent.enterKey === 'DIV') {\n        containerEle = document.createElement('div');\n        containerEle.appendChild(brElement);\n      } else if (this.parent.enterKey === 'P') {\n        containerEle = document.createElement('p');\n        containerEle.appendChild(brElement);\n      }\n      table.parentNode.replaceChild(containerEle, table);\n      this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), containerEle, containerEle, 0, 0);\n      this.removeTableSelection();\n    }\n  };\n  Table.prototype.removeTableSelection = function () {\n    var table = this.parent.contentModule.getEditPanel().querySelector('table.e-cell-select');\n    if (table) {\n      removeClassWithAttr([table], classes.CLS_TABLE_SEL);\n    }\n    this.removeAllFakeSelectionEles();\n  };\n  Table.prototype.updateTableSelection = function (table) {\n    addClass([table], 'e-cell-select');\n  };\n  Table.prototype.handleSelectAll = function () {\n    this.cancelResizeAction();\n    var selectedCells = this.parent.inputElement.querySelectorAll('.' + classes.CLS_TABLE_SEL);\n    removeClassWithAttr(selectedCells, classes.CLS_TABLE_SEL);\n    this.removeTableSelection();\n  };\n  Table.prototype.tableModulekeyUp = function (e) {\n    if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n      ele = ele && ele.tagName !== 'TD' && ele.tagName !== 'TH' ? ele.parentElement : ele;\n      if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n        var closestTd = closest(ele, 'td');\n        ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n      }\n      var eventArgs = e.args;\n      if (this.previousTableElement !== ele && !isNullOrUndefined(this.previousTableElement) && !eventArgs.shiftKey && (eventArgs.keyCode === 39 || eventArgs.keyCode === 37 || eventArgs.keyCode === 38 || eventArgs.keyCode === 40)) {\n        removeClassWithAttr([this.previousTableElement], classes.CLS_TABLE_SEL);\n        this.removeTableSelection();\n      }\n    }\n  };\n  Table.prototype.openDialog = function (isInternal, e) {\n    if (!isInternal) {\n      this.parent.contentModule.getEditPanel().focus();\n    }\n    if (this.parent.editorMode === 'HTML') {\n      var docElement = this.parent.contentModule.getDocument();\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(docElement);\n      var selection = this.parent.formatter.editorManager.nodeSelection.save(range, docElement);\n      var args = {\n        originalEvent: e ? e.args : {\n          action: 'insert-table'\n        },\n        item: {\n          command: 'Table',\n          subCommand: 'CreateTable'\n        },\n        name: !isInternal ? 'showDialog' : null\n      };\n      this.insertTableDialog({\n        self: this,\n        args: args,\n        selection: selection\n      });\n    }\n  };\n  Table.prototype.showDialog = function () {\n    this.openDialog(false);\n    this.setCssClass({\n      cssClass: this.parent.getCssClass()\n    });\n  };\n  Table.prototype.closeDialog = function () {\n    if (this.editdlgObj) {\n      this.editdlgObj.hide({\n        returnValue: true\n      });\n    }\n  };\n  Table.prototype.onToolbarAction = function (args) {\n    var item = args.args.item;\n    switch (item.subCommand) {\n      case 'TableHeader':\n        this.tableHeader(args.selection, args.args);\n        break;\n      case 'TableRemove':\n        this.removeTable(args.selection, args.args);\n        break;\n      case 'TableEditProperties':\n        this.editTable(args);\n        break;\n    }\n  };\n  Table.prototype.verticalAlign = function (args, e) {\n    var tdEle = closest(args.selectParent[0], 'th') || closest(args.selectParent[0], 'td');\n    if (tdEle) {\n      this.parent.formatter.process(this.parent, e, e, {\n        tableCell: tdEle,\n        subCommand: e.item.subCommand\n      });\n    }\n  };\n  Table.prototype.tableStyles = function (args, command) {\n    var table = closest(args.selectParent[0], 'table');\n    if (command === 'Dashed') {\n      /* eslint-disable */\n      this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR) ? removeClassWithAttr([this.parent.element], classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n      table.classList.contains(classes.CLS_TB_DASH_BOR) ? removeClassWithAttr([this.parent.element], classes.CLS_TB_DASH_BOR) : table.classList.add(classes.CLS_TB_DASH_BOR);\n    }\n    if (command === 'Alternate') {\n      this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR) ? removeClassWithAttr([this.parent.element], classes.CLS_TB_ALT_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n      table.classList.contains(classes.CLS_TB_ALT_BOR) ? removeClassWithAttr([table], classes.CLS_TB_ALT_BOR) : table.classList.add(classes.CLS_TB_ALT_BOR);\n      /* eslint-enable */\n    }\n    if (args.args && args.args.item.cssClass) {\n      var classList = args.args.item.cssClass.split(' ');\n      for (var i = 0; i < classList.length; i++) {\n        if (table.classList.contains(classList[i])) {\n          removeClassWithAttr([table], classList[i]);\n        } else {\n          table.classList.add(classList[i]);\n        }\n      }\n    }\n    this.parent.formatter.saveData();\n    this.hideTableQuickToolbar();\n    this.parent.formatter.editorManager.nodeSelection.restore();\n  };\n  Table.prototype.insideList = function (range) {\n    var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n    var nodes = [];\n    for (var i = 0; i < blockNodes.length; i++) {\n      if (blockNodes[i].parentNode.tagName === 'LI') {\n        nodes.push(blockNodes[i].parentNode);\n      } else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' && blockNodes[i].childNodes[0].tagName !== 'OL' && blockNodes[i].childNodes[0].tagName !== 'UL') {\n        nodes.push(blockNodes[i]);\n      }\n    }\n    if (nodes.length > 1 || nodes.length && range.startOffset === 0 && range.endOffset === 0) {\n      this.ensureInsideTableList = true;\n      return true;\n    } else {\n      this.ensureInsideTableList = false;\n      return false;\n    }\n  };\n  Table.prototype.removeEmptyTextNodes = function (element) {\n    var children = element.childNodes;\n    for (var i = children.length - 1; i >= 0; i--) {\n      var node = children[i];\n      if (node.nodeType === Node.TEXT_NODE && node.nodeValue.trim() === '') {\n        element.removeChild(node);\n      }\n    }\n  };\n  Table.prototype.tabSelection = function (event, selection, ele) {\n    var allHeadBodyTRElements = ele.closest('table').querySelectorAll('thead, tbody, tr');\n    for (var i = 0; i < allHeadBodyTRElements.length; i++) {\n      this.removeEmptyTextNodes(allHeadBodyTRElements[i]);\n    }\n    this.previousTableElement = ele;\n    var insideList = this.insideList(selection.range);\n    if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 || insideList) {\n      return;\n    }\n    event.preventDefault();\n    removeClassWithAttr([ele], classes.CLS_TABLE_SEL);\n    this.removeTableSelection();\n    if (!event.shiftKey && event.keyCode !== 37) {\n      var nextElement = !isNullOrUndefined(ele.nextSibling) ? ele.nextSibling : !isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] : !isNullOrUndefined(closest(ele, 'table').nextSibling) ? closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td' ? closest(ele, 'table').nextSibling : ele : ele;\n      if (ele === nextElement && ele.nodeName === 'TH') {\n        nextElement = closest(ele, 'table').rows[1].cells[0];\n      }\n      if (event.keyCode === 39 && ele === nextElement) {\n        nextElement = closest(ele, 'table').nextSibling;\n      }\n      if (nextElement) {\n        // eslint-disable-next-line\n        nextElement.textContent.trim() !== '' && closest(nextElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), nextElement) : selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n      }\n      if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n        ele.classList.add(classes.CLS_TABLE_SEL);\n        this.addRow(selection, event, true);\n        removeClassWithAttr([ele], classes.CLS_TABLE_SEL);\n        this.removeTableSelection();\n        nextElement = nextElement.parentElement.nextSibling ? nextElement.parentElement.nextSibling.firstChild : nextElement.parentElement.firstChild;\n        // eslint-disable-next-line\n        nextElement.textContent.trim() !== '' && closest(nextElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), nextElement) : selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n      }\n    } else {\n      var prevElement = !isNullOrUndefined(ele.previousSibling) ? ele.previousSibling : !isNullOrUndefined(closest(ele, 'tr').previousSibling) ? closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] : !isNullOrUndefined(closest(ele, 'table').previousSibling) ? closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td' ? closest(ele, 'table').previousSibling : ele : ele;\n      if (ele === prevElement && ele.cellIndex === 0 && closest(ele, 'table').tHead) {\n        var clsTble = closest(ele, 'table');\n        prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n      }\n      if (event.keyCode === 37 && ele === prevElement) {\n        prevElement = closest(ele, 'table').previousSibling;\n      }\n      if (prevElement) {\n        // eslint-disable-next-line\n        prevElement.textContent.trim() !== '' && closest(prevElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), prevElement) : selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n      }\n    }\n  };\n  Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n    var selText = selection.range.startContainer;\n    if (event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' || selText.parentNode && selText.parentNode.nodeName !== 'TD') || event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' || selText.parentNode && selText.parentNode.nodeName !== 'TD')) {\n      return;\n    }\n    event.preventDefault();\n    removeClassWithAttr([ele], classes.CLS_TABLE_SEL);\n    this.removeTableSelection();\n    if (event.keyCode === 40) {\n      ele = !isNullOrUndefined(closest(ele, 'tr').nextElementSibling) ? closest(ele, 'tr').nextElementSibling.children[ele.cellIndex] : closest(ele, 'table').tHead && ele.nodeName === 'TH' ? closest(ele, 'table').rows[1].cells[ele.cellIndex] : !isNullOrUndefined(closest(ele, 'table').nextSibling) ? closest(ele, 'table').nextSibling : ele;\n    } else {\n      ele = !isNullOrUndefined(closest(ele, 'tr').previousElementSibling) ? closest(ele, 'tr').previousElementSibling.children[ele.cellIndex] : closest(ele, 'table').tHead && ele.nodeName !== 'TH' ? closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] : !isNullOrUndefined(closest(ele, 'table').previousSibling) ? closest(ele, 'table').previousSibling : ele;\n    }\n    if (ele) {\n      selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n    }\n  };\n  Table.prototype.setBGColor = function (args) {\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n    // eslint-disable-next-line\n    var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n    // eslint-disable-next-line\n    var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n    for (var i = 0; i < selectedCells.length; i++) {\n      selectedCells[i].style.backgroundColor = args.item.value;\n    }\n    this.parent.formatter.saveData();\n    this.hideTableQuickToolbar();\n  };\n  Table.prototype.hideTableQuickToolbar = function () {\n    if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n      this.quickToolObj.tableQTBar.hidePopup();\n    }\n  };\n  Table.prototype.tableHeader = function (selection, e) {\n    this.parent.formatter.process(this.parent, e, e.originalEvent, {\n      selection: selection,\n      subCommand: e.item.subCommand\n    });\n  };\n  Table.prototype.getAnchorNode = function (element) {\n    var selectParent = closest(element, 'a');\n    return selectParent ? selectParent : element;\n  };\n  Table.prototype.editAreaClickHandler = function (e) {\n    if (this.parent.readonly || !isNOU(closest(e.args.target, '.e-img-caption'))) {\n      return;\n    }\n    var args = e.args;\n    var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n    if (args.which === 2 || showOnRightClick && args.which === 1 || !showOnRightClick && args.which === 3) {\n      return;\n    }\n    if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n      this.quickToolObj = this.parent.quickToolbarModule;\n      var target = args.target;\n      this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n      var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n      if (isPopupOpen) {\n        return;\n      }\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n      var closestTable = closest(target, 'table');\n      var startNode = this.parent.getRange().startContainer.parentElement;\n      var endNode = this.parent.getRange().endContainer.parentElement;\n      var isAnchorEle = this.getAnchorNode(target);\n      var currentTime = new Date().getTime();\n      if (target && target.nodeName !== 'A' && isAnchorEle.nodeName !== 'A' && target.nodeName !== 'IMG' && target.nodeName !== 'VIDEO' && !target.classList.contains(classes.CLS_CLICKELEM) && target.nodeName !== 'AUDIO' && startNode === endNode && (target.nodeName === 'TD' || target.nodeName === 'TH' || target.nodeName === 'TABLE' || closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)) && !(range.startContainer.nodeType === 3 && !range.collapsed) && currentTime - this.resizeEndTime > 100) {\n        var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n        var pageX = void 0;\n        var pageY = void 0;\n        if (Browser.isDevice && e.args.touches) {\n          pageX = this.parent.iframeSettings.enable ? window.pageXOffset + this.parent.element.getBoundingClientRect().left + e.args.changedTouches[0].clientX : e.args.changedTouches[0].pageX;\n          pageY = this.parent.iframeSettings.enable ? window.pageYOffset + this.parent.element.getBoundingClientRect().top + (!this.parent.inlineMode.enable ? this.parent.toolbarModule.getToolbarHeight() : 0) + e.args.changedTouches[0].clientY : e.args.changedTouches[0].pageY;\n        } else {\n          pageX = this.parent.iframeSettings.enable ? window.pageXOffset + this.parent.element.getBoundingClientRect().left + args.clientX : args.pageX;\n          pageY = this.parent.iframeSettings.enable ? window.pageYOffset + this.parent.element.getBoundingClientRect().top + this.parent.toolbarModule.getToolbarHeight() + args.clientY : args.pageY;\n        }\n        this.quickToolObj.tableQTBar.showPopup(pageX, pageY, target);\n        this.parent.formatter.editorManager.nodeSelection.restore();\n      } else {\n        this.hideTableQuickToolbar();\n      }\n    }\n  };\n  Table.prototype.tableCellSelect = function (e) {\n    var target = e.target;\n    var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n    var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n    var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n    Array.prototype.forEach.call(list, function (item) {\n      var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n      var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n      removeClassWithAttr([item], 'e-active');\n      if (parentIndex <= row && cellIndex <= col) {\n        addClass([item], 'e-active');\n      }\n    });\n    this.tblHeader.innerHTML = col + 1 + 'x' + (row + 1);\n  };\n  Table.prototype.tableMouseUp = function () {\n    this.unwireTableSelectionEvents();\n    this.isTableMoveActive = false;\n  };\n  Table.prototype.tableMouseLeave = function () {\n    this.unwireTableSelectionEvents();\n    this.isTableMoveActive = false;\n    this.resetTableSelection();\n  };\n  // eslint-disable-next-line\n  Table.prototype.tableCellLeave = function (e) {\n    removeClassWithAttr(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n    addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n    this.tblHeader.innerHTML = 1 + 'x' + 1;\n  };\n  Table.prototype.tableCellClick = function (e) {\n    var target = e.target;\n    var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n    var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n    this.self.tableInsert(row, col, e, this);\n  };\n  Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n    var proxy = selectionObj.self ? selectionObj.self : this;\n    var startContainer = selectionObj.selection.range.startContainer;\n    if (startContainer.nodeName === 'P' && startContainer.textContent.trim() === '' && !(startContainer.childNodes.length > 0)) {\n      startContainer.innerHTML = '<br />';\n    }\n    var parentNode = startContainer.parentNode;\n    if (proxy.parent.editorMode === 'HTML' && (proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib') ||\n    // eslint-disable-next-line\n    !proxy.parent.iframeSettings.enable && isNOU(closest(parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']')))) {\n      proxy.contentModule.getEditPanel().focus();\n      var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n      selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n    }\n    var value = {\n      rows: row,\n      columns: col,\n      width: {\n        minWidth: proxy.parent.tableSettings.minWidth,\n        maxWidth: proxy.parent.tableSettings.maxWidth,\n        width: proxy.parent.tableSettings.width\n      },\n      selection: selectionObj.selection\n    };\n    if (proxy.popupObj) {\n      var rows = Array.prototype.slice.call(e.target.parentElement.parentElement.children);\n      for (var i = 0; i < rows.length; i++) {\n        EventHandler.remove(rows[i], 'mouseleave', this.tableCellLeave);\n        var cells = Array.prototype.slice.call(rows[i].children);\n        for (var j = 0; j < cells.length; j++) {\n          EventHandler.remove(cells[j], 'mousemove', this.tableCellSelect);\n          EventHandler.remove(cells[j], 'mouseup', this.tableCellClick);\n        }\n      }\n      proxy.popupObj.hide();\n    }\n    if (proxy.editdlgObj) {\n      proxy.editdlgObj.hide();\n    }\n    var x = window.scrollX;\n    var y = window.scrollY;\n    proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n    proxy.contentModule.getEditPanel().focus();\n    window.scrollTo(x, y);\n    proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n    var selection = proxy.parent.formatter.editorManager.nodeSelection.get(proxy.contentModule.getDocument());\n    if (!isNullOrUndefined(selection) && !isNullOrUndefined(selection.anchorNode) && selection.anchorNode.nodeType === Node.ELEMENT_NODE && (selection.anchorNode.tagName === 'TD' || selection.anchorNode.tagName === 'TH')) {\n      proxy.curTable = closest(selection.anchorNode, 'table');\n      proxy.activeCell = selection.anchorNode;\n    }\n  };\n  Table.prototype.cellSelect = function (e) {\n    var target = e.args.target;\n    var tdNode = closest(target, 'td,th');\n    target = target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode) ? tdNode : target;\n    if (!isNOU(this.activeCell) && e.args.shiftKey && !isNOU(target) && !isNOU(target.tagName) && (target.tagName === 'TD' || target.tagName === 'TH') && this.activeCell !== target) {\n      this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', {\n        event: e.args,\n        selectNode: [this.activeCell]\n      });\n      e.args.preventDefault();\n      return;\n    }\n    if (!(this.parent.quickToolbarSettings.showOnRightClick && e.args.which === 3 && target.classList.contains(classes.CLS_TABLE_SEL))) {\n      if (this.isTableMoveActive) {\n        this.unwireTableSelectionEvents();\n        this.isTableMoveActive = false;\n      }\n      this.activeCell = null;\n      this.removeCellSelectClasses();\n      this.removeTableSelection();\n    }\n    if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n      addClass([target], classes.CLS_TABLE_SEL);\n      this.activeCell = target;\n      this.curTable = this.curTable ? this.curTable : closest(target, 'table');\n      this.wireTableSelectionEvents();\n      this.isTableMoveActive = true;\n      this.removeResizeElement();\n      if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n        detach(this.helper);\n      }\n    }\n    if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n      this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n    }\n  };\n  Table.prototype.wireTableSelectionEvents = function () {\n    EventHandler.add(this.curTable, 'mousemove', this.tableMove, this);\n    EventHandler.add(this.curTable, 'mouseup', this.tableMouseUp, this);\n    EventHandler.add(this.curTable, 'mouseleave', this.tableMouseLeave, this);\n  };\n  Table.prototype.unwireTableSelectionEvents = function () {\n    EventHandler.remove(this.curTable, 'mousemove', this.tableMove);\n    EventHandler.remove(this.curTable, 'mouseup', this.tableMouseUp);\n    EventHandler.remove(this.curTable, 'mouseleave', this.tableMouseLeave);\n  };\n  Table.prototype.removeCellSelectClasses = function () {\n    removeClassWithAttr(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL_END);\n    removeClassWithAttr(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_MULTI_CELL);\n    removeClassWithAttr(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n  };\n  Table.prototype.tableMove = function (event) {\n    this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', {\n      event: event,\n      selectNode: [this.activeCell]\n    });\n  };\n  Table.prototype.resizeHelper = function (e) {\n    if (this.parent.readonly) {\n      return;\n    }\n    if (this.isTableMoveActive) {\n      return;\n    }\n    if (e && e.buttons && e.buttons > 0) {\n      return;\n    }\n    var target = e.target || e.targetTouches[0].target;\n    var closestTable = closest(target, 'table.e-rte-table, table.e-rte-paste-table, table.e-rte-custom-table');\n    var isResizing = this.parent.contentModule.getEditPanel().querySelectorAll('.e-table-box.e-rbox-select, .e-table-rhelper.e-column-helper, .e-table-rhelper.e-row-helper').length > 0;\n    if (!isResizing && !isNOU(this.curTable) && !isNOU(closestTable) && closestTable !== this.curTable && this.parent.contentModule.getEditPanel().contains(closestTable)) {\n      this.removeResizeElement();\n      this.removeHelper(e);\n      this.cancelResizeAction();\n    }\n    if (!isResizing && (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH')) {\n      this.curTable = closestTable && this.parent.contentModule.getEditPanel().contains(closestTable) && (target.nodeName === 'TD' || target.nodeName === 'TH') ? closestTable : target;\n      this.removeResizeElement();\n      this.tableResizeEleCreation(this.curTable, e);\n    }\n  };\n  Table.prototype.tableResizeEleCreation = function (table, e) {\n    this.parent.preventDefaultResize(e);\n    var columns = this.calMaxCol(this.curTable);\n    var rows = [];\n    for (var i = 0; i < table.rows.length; i++) {\n      for (var j = 0; j < table.rows[i].cells.length; j++) {\n        if (!table.rows[i].cells[j].hasAttribute('rowspan')) {\n          rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, table.rows[i].cells.length)[j]);\n          break;\n        }\n      }\n    }\n    var height = parseInt(getComputedStyle(table).height, 10);\n    var width = parseInt(getComputedStyle(table).width, 10);\n    var pos = this.calcPos(table);\n    for (var i = 0; columns.length >= i; i++) {\n      var colReEle = this.parent.createElement('span', {\n        attrs: {\n          'data-col': i.toString(),\n          'unselectable': 'on',\n          'contenteditable': 'false'\n        }\n      });\n      colReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_COL_RES);\n      if (columns.length === i) {\n        colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top + 'px; left:' + ((columns[i - 1].classList.contains('e-multi-cells-select') ? 0 : pos.left) + this.calcPos(columns[i - 1]).left + columns[i - 1].offsetWidth - 2) + 'px;';\n      } else {\n        colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top + 'px; left:' + ((columns[i].classList.contains('e-multi-cells-select') ? 0 : pos.left) + this.calcPos(columns[i]).left - 2) + 'px;';\n      }\n      this.contentModule.getEditPanel().appendChild(colReEle);\n    }\n    for (var i = 0; rows.length > i; i++) {\n      var rowReEle = this.parent.createElement('span', {\n        attrs: {\n          'data-row': i.toString(),\n          'unselectable': 'on',\n          'contenteditable': 'false'\n        }\n      });\n      rowReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_ROW_RES);\n      var rowPosLeft = !isNOU(table.getAttribute('cellspacing')) || table.getAttribute('cellspacing') !== '' ? 0 : this.calcPos(rows[i]).left;\n      rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' + (this.calcPos(rows[i]).top + (rows[i].classList.contains('e-multi-cells-select') ? 0 : pos.top) + rows[i].offsetHeight - 2) + 'px; left:' + (rowPosLeft + pos.left) + 'px;';\n      this.contentModule.getEditPanel().appendChild(rowReEle);\n    }\n    var tableReBox = this.parent.createElement('span', {\n      className: classes.CLS_TB_BOX_RES + this.parent.getCssClass(true),\n      attrs: {\n        'data-col': columns.length.toString(),\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      }\n    });\n    tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) + 'px; left:' + (pos.left + width - 4) + 'px;';\n    if (Browser.isDevice) {\n      tableReBox.classList.add('e-rmob');\n    }\n    this.contentModule.getEditPanel().appendChild(tableReBox);\n  };\n  Table.prototype.removeResizeElement = function () {\n    var item = this.parent.contentModule.getEditPanel().querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box');\n    if (item.length > 0) {\n      for (var i = 0; i < item.length; i++) {\n        detach(item[i]);\n      }\n    }\n  };\n  Table.prototype.calcPos = function (elem) {\n    var parentOffset = {\n      top: 0,\n      left: 0\n    };\n    var offset = elem.getBoundingClientRect();\n    var doc = elem.ownerDocument;\n    var offsetParent = elem.offsetParent || doc.documentElement;\n    var isNestedTable = false;\n    while (offsetParent && (offsetParent === doc.body || offsetParent === doc.documentElement) && offsetParent.style.position === 'static') {\n      offsetParent = offsetParent.parentNode;\n    }\n    if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n      offsetParent = closest(offsetParent, '.e-rte-content');\n      isNestedTable = true;\n    }\n    if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n      parentOffset = offsetParent.getBoundingClientRect();\n    }\n    if (isNestedTable) {\n      isNestedTable = false;\n      var topValue = this.parent.inputElement && this.parent.inputElement.scrollTop > 0 ? this.parent.inputElement.scrollTop + offset.top - parentOffset.top : offset.top - parentOffset.top;\n      var leftValue = this.parent.inputElement && this.parent.inputElement.scrollLeft > 0 ? this.parent.inputElement.scrollLeft + offset.left - parentOffset.left : offset.left - parentOffset.left;\n      return {\n        top: topValue,\n        left: leftValue\n      };\n    } else {\n      return {\n        top: elem.offsetTop,\n        left: elem.offsetLeft\n      };\n    }\n  };\n  Table.prototype.getPointX = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageX;\n    } else {\n      return e.pageX;\n    }\n  };\n  Table.prototype.getPointY = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageY;\n    } else {\n      return e.pageY;\n    }\n  };\n  Table.prototype.resizeStart = function (e) {\n    var _this = this;\n    if (this.parent.readonly) {\n      return;\n    }\n    if (Browser.isDevice) {\n      this.resizeHelper(e);\n    }\n    var target = e.target;\n    if (target.classList.contains(classes.CLS_TB_COL_RES) || target.classList.contains(classes.CLS_TB_ROW_RES) || target.classList.contains(classes.CLS_TB_BOX_RES)) {\n      this.resetResizeHelper(this.curTable);\n      e.preventDefault();\n      this.parent.preventDefaultResize(e);\n      removeClassWithAttr(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n      this.removeTableSelection();\n      this.pageX = this.getPointX(e);\n      this.pageY = this.getPointY(e);\n      this.resizeBtnInit();\n      this.hideTableQuickToolbar();\n      if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n        this.resizeBtnStat.column = true;\n        if (parseInt(target.getAttribute('data-col'), 10) === this.calMaxCol(this.curTable).length) {\n          this.currentColumnResize = 'last';\n          this.colIndex = parseInt(target.getAttribute('data-col'), 10) - 1;\n          this.columnEle = this.calMaxCol(this.curTable)[this.colIndex];\n        } else {\n          if (parseInt(target.getAttribute('data-col'), 10) === 0) {\n            this.currentColumnResize = 'first';\n          } else {\n            this.currentColumnResize = 'middle';\n            var cellColl = this.curTable.rows[0].cells;\n            var cellCount = 0;\n            for (var cell = 0; cell < cellColl.length; cell++) {\n              cellCount = cellCount + cellColl[cell].colSpan;\n            }\n            var sizes = new Array(cellCount);\n            var colGroupEle = createElement('colgroup');\n            var rowSpanCells = new Map();\n            for (var i = 0; i < this.curTable.rows.length; i++) {\n              var currentColIndex = 0;\n              for (var k = 0; k < this.curTable.rows[i].cells.length; k++) {\n                for (var l = 1; l < this.curTable.rows[i].cells[k].rowSpan; l++) {\n                  var key = \"\" + (i + l) + currentColIndex;\n                  rowSpanCells.set(key, this.curTable.rows[i].cells[k]);\n                }\n                var cellIndex = this.getCellIndex(rowSpanCells, i, k);\n                if (cellIndex > currentColIndex) {\n                  currentColIndex = cellIndex;\n                }\n                var width = this.curTable.rows[i].cells[k].offsetWidth;\n                if (!sizes[currentColIndex] || width < sizes[currentColIndex]) {\n                  sizes[currentColIndex] = width;\n                }\n                currentColIndex += 1 + this.curTable.rows[i].cells[k].colSpan - 1;\n              }\n            }\n            for (var size = 0; size < sizes.length; size++) {\n              var cell = createElement('col');\n              cell.appendChild(createElement('br'));\n              cell.style.width = this.convertPixelToPercentage(sizes[size], parseInt(getComputedStyle(this.curTable).width, 10)) + '%';\n              colGroupEle.appendChild(cell);\n            }\n            this.curTable.insertBefore(colGroupEle, this.curTable.firstChild);\n            for (var i = 0; i < this.curTable.rows.length; i++) {\n              for (var k = 0; k < this.curTable.rows[i].cells.length; k++) {\n                this.curTable.rows[i].cells[k].style.width = '';\n              }\n            }\n          }\n          this.colIndex = parseInt(target.getAttribute('data-col'), 10);\n          this.columnEle = this.calMaxCol(this.curTable)[this.colIndex];\n        }\n        this.moveEle = e.target;\n        this.appendHelper();\n      }\n      if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n        this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n        this.resizeBtnStat.row = true;\n        this.appendHelper();\n      }\n      if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n        this.resizeBtnStat.tableBox = true;\n      }\n      if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n        this.helper.classList.add('e-reicon');\n        EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n        EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n      } else {\n        var args = {\n          event: e,\n          requestType: 'Table'\n        };\n        this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n          if (resizeStartArgs.cancel) {\n            _this.cancelResizeAction();\n          }\n        });\n      }\n      if (this.isResizeBind) {\n        EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n        EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        this.isResizeBind = false;\n      }\n    }\n  };\n  Table.prototype.getCellIndex = function (rowSpanCells, rowIndex, colIndex) {\n    var cellKey = \"\" + rowIndex + colIndex;\n    var spannedCell = rowSpanCells.get(cellKey);\n    if (spannedCell) {\n      return this.getCellIndex(rowSpanCells, rowIndex, colIndex + spannedCell.colSpan);\n    } else {\n      return colIndex;\n    }\n  };\n  Table.prototype.removeHelper = function (e) {\n    var cls = e.target.classList;\n    if (!cls.contains('e-reicon') && this.helper) {\n      EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n      EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n      if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n        detach(this.helper);\n      }\n      this.pageX = null;\n      this.helper = null;\n    }\n  };\n  Table.prototype.appendHelper = function () {\n    this.helper = this.parent.createElement('div', {\n      className: 'e-table-rhelper' + this.parent.getCssClass(true)\n    });\n    if (Browser.isDevice) {\n      this.helper.classList.add('e-reicon');\n    }\n    this.contentModule.getEditPanel().appendChild(this.helper);\n    this.setHelperHeight();\n  };\n  Table.prototype.setHelperHeight = function () {\n    var pos = this.calcPos(this.curTable);\n    if (this.resizeBtnStat.column) {\n      this.helper.classList.add('e-column-helper');\n      this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' + pos.top + 'px; left:' + (pos.left + this.calcPos(this.columnEle).left + (this.currentColumnResize === 'last' ? this.columnEle.offsetWidth : 0) - 1) + 'px;';\n    } else {\n      this.helper.classList.add('e-row-helper');\n      this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' + (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight - 1) + 'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n    }\n  };\n  Table.prototype.updateHelper = function () {\n    var pos = this.calcPos(this.curTable);\n    if (this.resizeBtnStat.column) {\n      var left = pos.left + this.calcPos(this.columnEle).left + (this.currentColumnResize === 'last' ? this.columnEle.offsetWidth : 0) - 1;\n      this.helper.style.left = left + 'px';\n      this.helper.style.height = this.curTable.offsetHeight + 'px';\n    } else {\n      var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight - 1;\n      this.helper.style.top = top_1 + 'px';\n    }\n  };\n  Table.prototype.calMaxCol = function (curTable) {\n    var cellColl = curTable.rows[0].cells;\n    var cellCount = 0;\n    for (var cell = 0; cell < cellColl.length; cell++) {\n      cellCount = cellCount + cellColl[cell].colSpan;\n    }\n    var cells = new Array(cellCount);\n    var rowSpanCells = new Map();\n    for (var i = 0; i < curTable.rows.length; i++) {\n      var currentColIndex = 0;\n      for (var k = 0; k < curTable.rows[i].cells.length; k++) {\n        for (var l = 1; l < curTable.rows[i].cells[k].rowSpan; l++) {\n          var key = \"\" + (i + l) + currentColIndex;\n          rowSpanCells.set(key, curTable.rows[i].cells[k]);\n        }\n        var cellIndex = this.getCellIndex(rowSpanCells, i, k);\n        if (cellIndex > currentColIndex) {\n          currentColIndex = cellIndex;\n        }\n        var width = curTable.rows[i].cells[k].offsetWidth;\n        if (!cells[currentColIndex] || width < cells[currentColIndex].offsetWidth) {\n          cells[currentColIndex] = curTable.rows[i].cells[k];\n        }\n        currentColIndex += 1 + curTable.rows[i].cells[k].colSpan - 1;\n      }\n    }\n    return cells;\n  };\n  Table.prototype.resizing = function (e) {\n    var _this = this;\n    var pageX = this.getPointX(e);\n    var pageY = this.getPointY(e);\n    var mouseX = this.parent.enableRtl ? -(pageX - this.pageX) : pageX - this.pageX;\n    var mouseY = this.parent.enableRtl ? -(pageY - this.pageY) : pageY - this.pageY;\n    this.pageX = pageX;\n    this.pageY = pageY;\n    var maxiumWidth;\n    var currentTdElement = this.curTable.closest('td');\n    var args = {\n      event: e,\n      requestType: 'table'\n    };\n    this.parent.trigger(events.onResize, args, function (resizingArgs) {\n      if (resizingArgs.cancel) {\n        _this.cancelResizeAction();\n      } else {\n        var tableReBox = _this.contentModule.getEditPanel().querySelector('.e-table-box');\n        var tableWidth = parseInt(getComputedStyle(_this.curTable).width, 10);\n        var tableHeight = !isNaN(parseInt(_this.curTable.style.height, 10)) ? parseInt(_this.curTable.style.height, 10) : parseInt(getComputedStyle(_this.curTable).height, 10);\n        var paddingSize = +getComputedStyle(_this.contentModule.getEditPanel()).paddingRight.match(/\\d/g).join('');\n        var rteWidth = _this.contentModule.getEditPanel().offsetWidth - (_this.contentModule.getEditPanel().offsetWidth - _this.contentModule.getEditPanel().clientWidth) - paddingSize * 2;\n        var widthCompare = void 0;\n        if (!isNOU(_this.curTable.parentElement.closest('table')) && !isNOU(_this.curTable.closest('td')) && _this.contentModule.getEditPanel().contains(_this.curTable.closest('td'))) {\n          var currentTd = _this.curTable.closest('td');\n          var currentTDPad = +getComputedStyle(currentTd).paddingRight.match(/\\d/g).join('');\n          // Padding of the current table with the parent element multiply with 2.\n          widthCompare = currentTd.offsetWidth - (currentTd.offsetWidth - currentTd.clientWidth) - currentTDPad * 2;\n        } else {\n          widthCompare = rteWidth;\n        }\n        if (_this.resizeBtnStat.column) {\n          if (_this.curTable.closest('li')) {\n            widthCompare = _this.curTable.closest('li').offsetWidth;\n          }\n          var colGroup = _this.curTable.querySelectorAll('colgroup > col');\n          var currentTableWidth = void 0;\n          if (_this.curTable.style.width !== '' && _this.curTable.style.width.includes('%')) {\n            currentTableWidth = parseFloat(_this.curTable.style.width.split('%')[0]);\n          } else {\n            currentTableWidth = _this.getCurrentTableWidth(_this.curTable.offsetWidth, _this.parent.inputElement.offsetWidth);\n          }\n          var currentCol = _this.calMaxCol(_this.curTable)[_this.colIndex];\n          var currentColResizableWidth = _this.getCurrentColWidth(currentCol, tableWidth);\n          if (_this.currentColumnResize === 'first') {\n            mouseX = mouseX - 0.75; //This was done for to make the gripper and the table first/last column will be close.\n            _this.removeResizeElement();\n            if (currentTdElement) {\n              maxiumWidth = _this.curTable.getBoundingClientRect().right - _this.calcPos(currentTdElement).left;\n              _this.curTable.style.maxWidth = maxiumWidth + 'px';\n            }\n            // Below the value '100' is the 100% width of the parent element.\n            if ((mouseX !== 0 && 5 < currentColResizableWidth || mouseX < 0) && currentTableWidth <= 100 && _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) <= 100) {\n              var firstColumnsCell = _this.findFirstLastColCells(_this.curTable, true);\n              _this.curTable.style.width = _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) > 100 ? 100 + '%' : _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) + '%';\n              var differenceWidth = currentTableWidth - _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare);\n              var preMarginLeft = 0;\n              var widthType = _this.curTable.style.width.indexOf('%') > -1;\n              if (!widthType && _this.curTable.offsetWidth > _this.contentModule.getEditPanel().offsetWidth) {\n                _this.curTable.style.width = rteWidth + 'px';\n                return;\n              }\n              if (widthType && parseFloat(_this.curTable.style.width.split('%')[0]) > 100) {\n                _this.curTable.style.width = '100%';\n                return;\n              }\n              if (!isNOU(_this.curTable.style.marginLeft) && _this.curTable.style.marginLeft !== '') {\n                var regex = /[-+]?\\d*\\.\\d+|\\d+/;\n                var value = _this.curTable.style.marginLeft.match(regex);\n                if (!isNOU(value)) {\n                  preMarginLeft = parseFloat(value[0]);\n                }\n              }\n              var currentMarginLeft = preMarginLeft + differenceWidth;\n              if (currentMarginLeft && currentMarginLeft > 100) {\n                var width = parseFloat(_this.curTable.style.width);\n                currentMarginLeft = 100 - width;\n              }\n              // For table pasted from word, Margin left can be anything so we are avoiding the below process.\n              if (!_this.curTable.classList.contains('e-rte-paste-table') && currentMarginLeft && currentMarginLeft < 1) {\n                _this.curTable.style.marginLeft = null;\n                _this.curTable.style.width = '100%';\n                return;\n              }\n              _this.curTable.style.marginLeft = 'calc(' + (_this.curTable.style.width === '100%' ? 0 : currentMarginLeft) + '%)';\n              for (var i = 0; i < firstColumnsCell.length; i++) {\n                var currentColumnCellWidth = _this.getCurrentColWidth(firstColumnsCell[i], tableWidth);\n                firstColumnsCell[i].style.width = currentColumnCellWidth - differenceWidth + '%';\n              }\n            }\n          } else if (_this.currentColumnResize === 'last') {\n            mouseX = mouseX + 0.75; //This was done for to make the gripper and the table first/last column will be close.\n            _this.removeResizeElement();\n            if (currentTdElement) {\n              maxiumWidth = currentTdElement.getBoundingClientRect().right - _this.curTable.getBoundingClientRect().left;\n              _this.curTable.style.maxWidth = maxiumWidth + 'px';\n            }\n            // Below the value '100' is the 100% width of the parent element.\n            if ((mouseX !== 0 && 5 < currentColResizableWidth || mouseX > 0) && currentTableWidth <= 100 && _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) <= 100) {\n              var lastColumnsCell = _this.findFirstLastColCells(_this.curTable, false);\n              _this.curTable.style.width = _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) > 100 ? 100 + '%' : _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) + '%';\n              var differenceWidth = currentTableWidth - _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare);\n              for (var i = 0; i < lastColumnsCell.length; i++) {\n                var currentColumnCellWidth = _this.getCurrentColWidth(lastColumnsCell[i], tableWidth);\n                lastColumnsCell[i].style.width = currentColumnCellWidth - differenceWidth + '%';\n              }\n            }\n          } else {\n            var actualwid = colGroup[_this.colIndex].offsetWidth - mouseX;\n            // eslint-disable-next-line\n            var totalwid = colGroup[_this.colIndex].offsetWidth + colGroup[_this.colIndex - 1].offsetWidth;\n            if (totalwid - actualwid > 20 && actualwid > 20) {\n              var leftColumnWidth = totalwid - actualwid;\n              var rightColWidth = actualwid;\n              colGroup[_this.colIndex - 1].style.width = _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n              colGroup[_this.colIndex].style.width = _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n            }\n          }\n          _this.updateHelper();\n        } else if (_this.resizeBtnStat.row) {\n          _this.parent.preventDefaultResize(e);\n          var tableTrElementPixel = [];\n          var currentTableTrElement = _this.curTable.querySelectorAll('tr');\n          for (var i = 0; i < currentTableTrElement.length; i++) {\n            if (_this.rowEle !== currentTableTrElement[i]) {\n              tableTrElementPixel[i] = parseFloat(currentTableTrElement[i].clientHeight.toString());\n            }\n          }\n          _this.curTable.style.height = parseFloat(_this.curTable.clientHeight.toString()) + (mouseY > 0 ? 0 : mouseY) + 'px';\n          for (var i = 0; i < currentTableTrElement.length; i++) {\n            if (_this.rowEle === currentTableTrElement[i]) {\n              currentTableTrElement[i].style.height = parseFloat(currentTableTrElement[i].clientHeight.toString()) + mouseY + 'px';\n            } else {\n              currentTableTrElement[i].style.height = tableTrElementPixel[i] + 'px';\n            }\n          }\n          if (!isNOU(tableReBox)) {\n            tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) + 'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n          }\n          _this.updateHelper();\n        } else if (_this.resizeBtnStat.tableBox) {\n          if (currentTdElement) {\n            var tableBoxPosition = _this.curTable.getBoundingClientRect().left - currentTdElement.getBoundingClientRect().left;\n            maxiumWidth = Math.abs(tableBoxPosition - currentTdElement.getBoundingClientRect().width) - 5;\n            _this.curTable.style.maxWidth = maxiumWidth + 'px';\n          }\n          _this.curTable.style.height = tableHeight + mouseY + 'px';\n          if (!isNOU(tableReBox)) {\n            tableReBox.classList.add('e-rbox-select');\n            tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + parseInt(getComputedStyle(_this.curTable).height, 10) - 4) + 'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n          }\n          if (_this.curTable.closest('li')) {\n            widthCompare = _this.curTable.closest('li').offsetWidth;\n          }\n          var widthType = _this.curTable.style.width.indexOf('%') > -1;\n          if (widthType && parseFloat(_this.curTable.style.width.split('%')[0]) > 100) {\n            _this.curTable.style.width = '100%';\n            return;\n          }\n          if (!widthType && _this.curTable.offsetWidth > _this.contentModule.getEditPanel().offsetWidth) {\n            _this.curTable.style.width = rteWidth + 'px';\n            return;\n          }\n          _this.curTable.style.width = widthType ? _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) + '%' : tableWidth + mouseX + 'px';\n        }\n      }\n    });\n  };\n  Table.prototype.getCurrentColWidth = function (col, tableWidth) {\n    var currentColWidth = 0;\n    if (col.style.width !== '' && col.style.width.includes('%')) {\n      currentColWidth = parseFloat(col.style.width.split('%')[0]);\n    } else {\n      currentColWidth = this.convertPixelToPercentage(col.offsetWidth, tableWidth);\n    }\n    return currentColWidth;\n  };\n  Table.prototype.getCurrentTableWidth = function (tableWidth, parentWidth) {\n    var currentTableWidth = 0;\n    currentTableWidth = tableWidth / parentWidth * 100;\n    return currentTableWidth;\n  };\n  Table.prototype.findFirstLastColCells = function (table, isFirst) {\n    var resultColumns = [];\n    var rows = table.rows;\n    var rowSpanCellIndexs = [];\n    var _loop_1 = function (i) {\n      var cellIndex = isFirst ? 0 : rows[i].cells.length - 1;\n      var column = rows[i].cells[cellIndex];\n      for (var rowSpan = 1; rowSpan < column.rowSpan; rowSpan++) {\n        var key = i + rowSpan + \"-\" + cellIndex;\n        rowSpanCellIndexs.push(key);\n      }\n      var spannedCellKey = i + \"-\" + cellIndex;\n      if (rowSpanCellIndexs.length === 0 || isFirst && rowSpanCellIndexs.indexOf(spannedCellKey) === -1 || !isFirst && rowSpanCellIndexs.indexOf(spannedCellKey) === -1 && rowSpanCellIndexs.every(function (key) {\n        return key.split('-')[0] !== i.toString();\n      })) {\n        resultColumns.push(column);\n      }\n    };\n    for (var i = 0; i < rows.length; i++) {\n      _loop_1(i);\n    }\n    return resultColumns;\n  };\n  Table.prototype.convertPixelToPercentage = function (value, offsetValue) {\n    return value / offsetValue * 100;\n  };\n  Table.prototype.cancelResizeAction = function () {\n    this.isResizeBind = true;\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n    this.removeResizeElement();\n  };\n  Table.prototype.resizeEnd = function (e) {\n    this.resizeBtnInit();\n    this.isResizeBind = true;\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n    if (this.contentModule.getEditPanel().querySelector('.e-table-box') && this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n      this.removeResizeElement();\n    }\n    if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n      detach(this.helper);\n      this.helper = null;\n    }\n    this.resetResizeHelper(this.curTable);\n    this.pageX = null;\n    this.pageY = null;\n    this.moveEle = null;\n    var currentTableTrElement = this.curTable.querySelectorAll('tr');\n    var tableTrPercentage = [];\n    for (var i = 0; i < currentTableTrElement.length; i++) {\n      var percentage = parseFloat(currentTableTrElement[i].clientHeight.toString()) / parseFloat(this.curTable.clientHeight.toString()) * 100;\n      tableTrPercentage[i] = percentage;\n    }\n    for (var i = 0; i < currentTableTrElement.length; i++) {\n      if (currentTableTrElement[i].parentElement.nodeName === 'THEAD') {\n        currentTableTrElement[i].parentElement.style.height = tableTrPercentage[i] + '%';\n        currentTableTrElement[i].style.height = tableTrPercentage[i] + '%';\n      } else {\n        currentTableTrElement[i].style.height = tableTrPercentage[i] + '%';\n      }\n    }\n    var args = {\n      event: e,\n      requestType: 'table'\n    };\n    this.parent.trigger(events.resizeStop, args);\n    this.parent.formatter.saveData();\n    this.resizeEndTime = new Date().getTime();\n  };\n  Table.prototype.resetResizeHelper = function (curTable) {\n    var colHelper = this.parent.element.querySelectorAll('.e-table-rhelper.e-column-helper');\n    Array.from(colHelper).forEach(function (element) {\n      if (element.parentNode) {\n        element.parentNode.removeChild(element);\n      }\n    });\n    var rowHelper = this.parent.element.querySelectorAll('.e-table-rhelper.e-row-helper');\n    Array.from(rowHelper).forEach(function (element) {\n      if (element.parentNode) {\n        element.parentNode.removeChild(element);\n      }\n    });\n    if (!curTable.style.width) {\n      curTable.style.width = curTable.offsetWidth + 'px';\n    }\n    var colGroup = curTable.querySelector('colgroup');\n    if (colGroup) {\n      for (var i = 0; i < curTable.rows.length; i++) {\n        for (var k = 0; k < curTable.rows[i].cells.length; k++) {\n          var width = this.convertPixelToPercentage(curTable.rows[i].cells[k].offsetWidth, parseInt(getComputedStyle(curTable).width, 10)) + '%';\n          curTable.rows[i].cells[k].style.width = width;\n        }\n      }\n      curTable.removeChild(colGroup);\n    }\n  };\n  Table.prototype.resizeBtnInit = function () {\n    return this.resizeBtnStat = {\n      column: false,\n      row: false,\n      tableBox: false\n    };\n  };\n  Table.prototype.addRow = function (selectCell, e, tabkey) {\n    var cmd;\n    if (tabkey) {\n      cmd = {\n        item: {\n          command: 'Table',\n          subCommand: 'InsertRowAfter'\n        }\n      };\n    }\n    var value = {\n      selection: selectCell,\n      subCommand: tabkey ? cmd.item.subCommand : e.item.subCommand\n    };\n    this.parent.formatter.process(this.parent, tabkey ? cmd : e, e, value);\n  };\n  Table.prototype.addColumn = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      width: this.parent.tableSettings.width,\n      subCommand: e.item.subCommand\n    });\n  };\n  Table.prototype.removeRowColumn = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      subCommand: e.item.subCommand\n    });\n    this.hideTableQuickToolbar();\n  };\n  Table.prototype.removeTable = function (selection, args, delKey) {\n    var cmd;\n    if (delKey) {\n      cmd = {\n        item: {\n          command: 'Table',\n          subCommand: 'TableRemove'\n        }\n      };\n    }\n    var value = {\n      selection: selection,\n      subCommand: delKey ? cmd.item.subCommand : args.item.subCommand\n    };\n    this.parent.formatter.process(this.parent, delKey ? cmd : args, args.originalEvent, value);\n    this.contentModule.getEditPanel().focus();\n    if (this.parent.inputElement.innerHTML === null || this.parent.inputElement.innerHTML === '') {\n      if (this.parent.enterKey === 'DIV') {\n        this.contentModule.getEditPanel().innerHTML = '<div><br/></div>';\n      } else if (this.parent.enterKey === 'BR') {\n        this.contentModule.getEditPanel().innerHTML = '<br/>';\n      } else {\n        this.contentModule.getEditPanel().innerHTML = '<p><br/></p>';\n      }\n    }\n    this.removeResizeElement();\n    this.hideTableQuickToolbar();\n  };\n  Table.prototype.renderDlgContent = function (args) {\n    var _this = this;\n    var argsTarget = args.args.originalEvent.target;\n    if (Browser.isDevice || this.parent.inlineMode.enable || !isNullOrUndefined(closest(argsTarget, '.e-rte-text-popup'))) {\n      this.insertTableDialog(args);\n      return;\n    }\n    if (this.popupObj) {\n      this.popupObj.hide();\n      return;\n    }\n    this.hideTableQuickToolbar();\n    var header = '1X1';\n    var insertbtn = this.l10n.getConstant('inserttablebtn');\n    this.dlgDiv = this.parent.createElement('div', {\n      className: 'e-rte-table-popup' + this.parent.getCssClass(true),\n      id: this.rteID + '_table'\n    });\n    this.tblHeader = this.parent.createElement('div', {\n      className: 'e-rte-popup-header' + this.parent.getCssClass(true)\n    });\n    this.tblHeader.innerHTML = header;\n    this.dlgDiv.appendChild(this.tblHeader);\n    var tableDiv = this.parent.createElement('div', {\n      className: 'e-rte-table-span' + this.parent.getCssClass(true)\n    });\n    this.drawTable(tableDiv, args);\n    this.dlgDiv.appendChild(tableDiv);\n    this.dlgDiv.appendChild(this.parent.createElement('span', {\n      className: 'e-span-border' + this.parent.getCssClass(true)\n    }));\n    var btnEle = this.parent.createElement('button', {\n      className: 'e-insert-table-btn' + this.parent.getCssClass(true),\n      id: this.rteID + '_insertTable',\n      attrs: {\n        type: 'button',\n        tabindex: '0'\n      }\n    });\n    if (!isNOU(this.parent.getToolbarElement().querySelector('.e-expended-nav'))) {\n      this.parent.getToolbarElement().querySelector('.e-expended-nav').setAttribute('tabindex', '1');\n    }\n    this.dlgDiv.appendChild(btnEle);\n    this.createTableButton = new Button({\n      iconCss: 'e-icons e-create-table',\n      content: insertbtn,\n      cssClass: 'e-flat' + this.parent.getCssClass(true),\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.createTableButton.isStringTemplate = true;\n    this.createTableButton.appendTo(btnEle);\n    EventHandler.add(btnEle, 'click', this.insertTableDialog, {\n      self: this,\n      args: args.args,\n      selection: args.selection\n    });\n    this.parent.getToolbar().parentElement.appendChild(this.dlgDiv);\n    var target = args.args.originalEvent.target;\n    target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n    this.popupObj = new Popup(this.dlgDiv, {\n      targetType: 'relative',\n      relateTo: target,\n      collision: {\n        X: 'fit',\n        Y: 'none'\n      },\n      offsetY: 8,\n      viewPortElement: this.parent.element,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      enableRtl: this.parent.enableRtl,\n      zIndex: 10001,\n      // eslint-disable-next-line\n      close: function (event) {\n        EventHandler.remove(btnEle, 'click', _this.insertTableDialog);\n        detach(btnEle);\n        if (_this.createTableButton && !_this.createTableButton.isDestroyed) {\n          _this.createTableButton.destroy();\n          _this.createTableButton.element = null;\n          _this.createTableButton = null;\n        }\n        _this.parent.isBlur = false;\n        _this.popupObj.destroy();\n        detach(_this.popupObj.element);\n        _this.popupObj = null;\n      }\n    });\n    addClass([this.popupObj.element], 'e-popup-open');\n    if (!isNOU(this.parent.cssClass)) {\n      addClass([this.popupObj.element], this.parent.getCssClass());\n    }\n    btnEle.focus();\n    this.popupObj.refreshPosition(target);\n  };\n  Table.prototype.onIframeMouseDown = function () {\n    if (this.popupObj) {\n      this.popupObj.hide();\n    }\n    if (this.parent.inlineMode.enable && this.editdlgObj) {\n      this.editdlgObj.hide();\n    }\n    if (!isNOU(this.parent) && !isNOU(this.parent.contentModule) && !isNOU(this.parent.contentModule.getEditPanel())) {\n      this.removeResizeElement();\n    }\n  };\n  Table.prototype.docClick = function (e) {\n    var target = e.args.target;\n    // eslint-disable-next-line\n    if (target && target.classList && (this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']') || this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)) && !target.classList.contains('e-create-table') && target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n      if (this.popupObj) {\n        this.popupObj.hide();\n      }\n      if (this.editdlgObj) {\n        this.parent.notify(events.documentClickClosedBy, {\n          closedBy: 'outside click'\n        });\n        this.editdlgObj.hide();\n      }\n      this.parent.isBlur = true;\n      dispatchEvent(this.parent.element, 'focusout');\n    }\n    var closestEle = closest(target, 'td');\n    var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n    if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist && closest(target, '.e-rte-quick-popup') === null && target.offsetParent && !target.offsetParent.classList.contains('e-quick-dropdown') && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup') && !closest(target, '.e-rte-elements')) {\n      var isToolbarClick = target && target.closest('.e-toolbar') ? true : false;\n      if (!isToolbarClick) {\n        this.removeCellSelectClasses();\n      }\n      this.removeTableSelection();\n      if (!Browser.isIE) {\n        this.hideTableQuickToolbar();\n      }\n    }\n    if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) && !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n      this.removeResizeElement();\n    }\n  };\n  Table.prototype.drawTable = function (tableDiv, args) {\n    var rowDiv;\n    var tableCell;\n    for (var row = 0; row < 3; row++) {\n      rowDiv = this.parent.createElement('div', {\n        className: 'e-rte-table-row' + this.parent.getCssClass(true),\n        attrs: {\n          'data-column': '' + row\n        }\n      });\n      EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n      for (var col = 0; col < 10; col++) {\n        tableCell = this.parent.createElement('div', {\n          className: 'e-rte-tablecell e-default' + this.parent.getCssClass(true),\n          attrs: {\n            'data-cell': '' + col\n          }\n        });\n        rowDiv.appendChild(tableCell);\n        tableCell.style.display = 'inline-block';\n        if (col === 0 && row === 0) {\n          addClass([tableCell], 'e-active');\n        }\n        EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n        EventHandler.add(tableCell, 'mouseup', this.tableCellClick, {\n          self: this,\n          args: args.args,\n          selection: args.selection\n        });\n      }\n      tableDiv.appendChild(rowDiv);\n    }\n  };\n  Table.prototype.editTable = function (args) {\n    var _this = this;\n    this.createDialog(args);\n    var editContent = this.tableDlgContent(args);\n    var update = this.l10n.getConstant('dialogUpdate');\n    var cancel = this.l10n.getConstant('dialogCancel');\n    var editHeader = this.l10n.getConstant('tableEditHeader');\n    this.editdlgObj.setProperties({\n      height: 'initial',\n      width: '290px',\n      content: editContent,\n      header: editHeader,\n      buttons: [{\n        click: this.applyProperties.bind(this, args),\n        buttonModel: {\n          content: update,\n          cssClass: 'e-flat e-size-update' + this.parent.getCssClass(true),\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          _this.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel' + this.parent.getCssClass(true),\n          content: cancel\n        }\n      }],\n      cssClass: this.editdlgObj.cssClass + ' e-rte-edit-table-prop-dialog'\n    });\n    this.editdlgObj.element.style.maxHeight = 'none';\n    this.editdlgObj.content.querySelector('input').focus();\n    this.hideTableQuickToolbar();\n  };\n  Table.prototype.insertTableDialog = function (args) {\n    var proxy = this.self ? this.self : this;\n    if (proxy.popupObj) {\n      proxy.popupObj.hide();\n    }\n    proxy.createDialog(args);\n    var dlgContent = proxy.tableCellDlgContent();\n    var insert = proxy.l10n.getConstant('dialogInsert');\n    var cancel = proxy.l10n.getConstant('dialogCancel');\n    if (isNullOrUndefined(proxy.editdlgObj)) {\n      return;\n    }\n    proxy.editdlgObj.setProperties({\n      height: 'initial',\n      width: '290px',\n      content: dlgContent,\n      buttons: [{\n        click: proxy.customTable.bind(this, args),\n        buttonModel: {\n          content: insert,\n          cssClass: 'e-flat e-insert-table' + ' ' + proxy.parent.cssClass,\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          proxy.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel' + ' ' + proxy.parent.cssClass,\n          content: cancel\n        }\n      }]\n    });\n    if (!isNOU(proxy.parent.cssClass)) {\n      proxy.editdlgObj.setProperties({\n        cssClass: proxy.parent.cssClass\n      });\n    }\n    proxy.editdlgObj.element.style.maxHeight = 'none';\n    proxy.editdlgObj.content.querySelector('input').focus();\n  };\n  Table.prototype.tableCellDlgContent = function () {\n    var tableColumn = this.l10n.getConstant('columns');\n    var tableRow = this.l10n.getConstant('rows');\n    var tableWrap = this.parent.createElement('div', {\n      className: 'e-cell-wrap' + this.parent.getCssClass(true)\n    });\n    var content = '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" ' + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column' + this.parent.getCssClass(true) + '\"/></div>' + '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row' + this.parent.getCssClass(true) + '\" /></div>';\n    var contentElem = parseHtml(content);\n    tableWrap.appendChild(contentElem);\n    this.columnTextBox = new NumericTextBox({\n      format: 'n0',\n      min: 1,\n      value: 3,\n      placeholder: tableColumn,\n      floatLabelType: 'Auto',\n      max: 50,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      cssClass: this.parent.getCssClass()\n    });\n    this.columnTextBox.isStringTemplate = true;\n    this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n    this.rowTextBox = new NumericTextBox({\n      format: 'n0',\n      min: 1,\n      value: 3,\n      placeholder: tableRow,\n      floatLabelType: 'Auto',\n      max: 1000,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      cssClass: this.parent.getCssClass()\n    });\n    this.rowTextBox.isStringTemplate = true;\n    this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n    return tableWrap;\n  };\n  Table.prototype.clearDialogObj = function () {\n    if (this.editdlgObj) {\n      this.editdlgObj.destroy();\n      detach(this.editdlgObj.element);\n      this.editdlgObj = null;\n    }\n  };\n  // eslint-disable-next-line\n  Table.prototype.createDialog = function (args) {\n    var _this = this;\n    if (this.editdlgObj) {\n      this.editdlgObj.hide({\n        returnValue: true\n      });\n      return;\n    }\n    var tableDialog = this.parent.createElement('div', {\n      className: 'e-rte-edit-table' + this.parent.getCssClass(true),\n      id: this.rteID + '_tabledialog'\n    });\n    this.parent.rootContainer.appendChild(tableDialog);\n    var insert = this.l10n.getConstant('dialogInsert');\n    var cancel = this.l10n.getConstant('dialogCancel');\n    var header = this.l10n.getConstant('tabledialogHeader');\n    var dialogModel = {\n      header: header,\n      cssClass: classes.CLS_RTE_ELEMENTS + this.parent.getCssClass(true),\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      showCloseIcon: true,\n      closeOnEscape: true,\n      width: Browser.isDevice ? '290px' : '340px',\n      height: 'initial',\n      position: {\n        X: 'center',\n        Y: Browser.isDevice ? 'center' : 'top'\n      },\n      isModal: Browser.isDevice,\n      buttons: [{\n        buttonModel: {\n          content: insert,\n          cssClass: 'e-flat e-insert-table' + this.parent.getCssClass(true),\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          _this.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel' + this.parent.getCssClass(true),\n          content: cancel\n        }\n      }],\n      target: Browser.isDevice ? document.body : this.parent.element,\n      animationSettings: {\n        effect: 'None'\n      },\n      close: function (event) {\n        _this.parent.isBlur = false;\n        _this.editdlgObj.destroy();\n        detach(_this.editdlgObj.element);\n        _this.dialogRenderObj.close(event);\n        _this.editdlgObj = null;\n      }\n    };\n    this.editdlgObj = this.dialogRenderObj.render(dialogModel);\n    this.editdlgObj.appendTo(tableDialog);\n    if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n      this.quickToolObj.inlineQTBar.hidePopup();\n    }\n    if (this.quickToolObj && this.quickToolObj.textQTBar && this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n      this.quickToolObj.textQTBar.hidePopup();\n    }\n  };\n  Table.prototype.customTable = function (args, e) {\n    var proxy = this.self ? this.self : this;\n    if (proxy && proxy.rowTextBox && proxy.rowTextBox.value && proxy.columnTextBox && proxy.columnTextBox.value) {\n      var argument = Browser.isDevice || !isNullOrUndefined(args.args) && !isNullOrUndefined(args.args.originalEvent) && args.args.originalEvent.action === 'insert-table' || proxy.parent.inlineMode.enable || !isNullOrUndefined(proxy.parent.quickToolbarSettings.text) && !(args instanceof PointerEvent) ? args : this;\n      proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n    }\n  };\n  // eslint-disable-next-line\n  Table.prototype.cancelDialog = function (e) {\n    this.parent.isBlur = false;\n    this.editdlgObj.hide({\n      returnValue: true\n    });\n  };\n  // eslint-disable-next-line\n  Table.prototype.applyProperties = function (args, e) {\n    var dialogEle = this.editdlgObj.element;\n    var table = closest(args.selectNode[0], 'table');\n    table.style.width = dialogEle.querySelector('.e-table-width') ? dialogEle.querySelector('.e-table-width').value + 'px' : table.style.width;\n    if (dialogEle.querySelector('.e-cell-padding') && dialogEle.querySelector('.e-cell-padding').value !== '') {\n      var tdElm = table.querySelectorAll('td');\n      for (var i = 0; i < tdElm.length; i++) {\n        var padVal = '';\n        if (tdElm[i].style.padding === '') {\n          padVal = tdElm[i].getAttribute('style') + ' padding:' + dialogEle.querySelector('.e-cell-padding').value + 'px;';\n        } else {\n          tdElm[i].style.padding = dialogEle.querySelector('.e-cell-padding').value + 'px';\n          padVal = tdElm[i].getAttribute('style');\n        }\n        tdElm[i].setAttribute('style', padVal);\n      }\n    }\n    table.cellSpacing = dialogEle.querySelector('.e-cell-spacing') ? dialogEle.querySelector('.e-cell-spacing').value : table.cellSpacing;\n    if (!isNOU(table.cellSpacing) && table.cellSpacing !== '0') {\n      addClass([table], classes.CLS_TABLE_BORDER);\n    } else {\n      removeClassWithAttr([table], classes.CLS_TABLE_BORDER);\n    }\n    this.parent.formatter.saveData();\n    this.editdlgObj.hide({\n      returnValue: true\n    });\n  };\n  Table.prototype.tableDlgContent = function (e) {\n    var selectNode = e.selectParent[0];\n    var tableWidth = this.l10n.getConstant('tableWidth');\n    var cellPadding = this.l10n.getConstant('cellpadding');\n    var cellSpacing = this.l10n.getConstant('cellspacing');\n    var tableWrap = this.parent.createElement('div', {\n      className: 'e-table-sizewrap' + this.parent.getCssClass(true)\n    });\n    var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n    var padVal = closest(selectNode, 'td').style.padding;\n    var brdSpcVal = closest(selectNode, 'table').getAttribute('cellspacing');\n    var content = '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width' + this.parent.getCssClass(true) + '\" ' + ' /></div>' + '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding' + this.parent.getCssClass(true) + '\" />' + ' </div><div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing' + this.parent.getCssClass(true) + '\" /></div>';\n    var contentElem = parseHtml(content);\n    tableWrap.appendChild(contentElem);\n    this.tableWidthNum = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      value: widthVal,\n      placeholder: tableWidth,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.tableWidthNum.isStringTemplate = true;\n    this.tableWidthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n    this.tableCellPadding = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      // eslint-disable-next-line\n      value: padVal !== '' ? parseInt(padVal, null) : 0,\n      placeholder: cellPadding,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.tableCellPadding.isStringTemplate = true;\n    this.tableCellPadding.appendTo(tableWrap.querySelector('#cellPadding'));\n    this.tableCellSpacing = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      // eslint-disable-next-line\n      value: brdSpcVal !== '' && !isNOU(brdSpcVal) ? parseInt(brdSpcVal, null) : 0,\n      placeholder: cellSpacing,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.tableCellSpacing.isStringTemplate = true;\n    this.tableCellSpacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n    return tableWrap;\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n  Table.prototype.destroy = function () {\n    if (this.isDestroyed) {\n      return;\n    }\n    if (this.resizeIconPositionTime) {\n      clearTimeout(this.resizeIconPositionTime);\n      this.resizeIconPositionTime = null;\n    }\n    this.removeEventListener();\n    EventHandler.remove(this.parent.contentModule.getDocument(), 'selectionchange', this.tableCellsKeyboardSelection);\n    if (this.curTable) {\n      EventHandler.remove(this.curTable, 'mouseleave', this.tableMouseLeave);\n    }\n    if (this.tableCellSpacing && !this.tableCellSpacing.isDestroyed) {\n      this.tableCellSpacing.destroy();\n      this.tableCellSpacing = null;\n    }\n    if (this.tableCellPadding && !this.tableCellPadding.isDestroyed) {\n      this.tableCellPadding.destroy();\n      this.tableCellPadding = null;\n    }\n    if (this.tableWidthNum && !this.tableWidthNum.isDestroyed) {\n      this.tableWidthNum.destroy();\n      this.tableWidthNum = null;\n    }\n    if (this.rowTextBox && !this.rowTextBox.isDestroyed) {\n      this.rowTextBox.destroy();\n      this.rowTextBox = null;\n    }\n    if (this.columnTextBox && !this.columnTextBox.isDestroyed) {\n      this.columnTextBox.destroy();\n      this.columnTextBox = null;\n    }\n    if (this.createTableButton && !this.createTableButton.isDestroyed) {\n      this.createTableButton.destroy();\n      this.createTableButton = null;\n    }\n    this.isDestroyed = true;\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   */\n  Table.prototype.getModuleName = function () {\n    return 'table';\n  };\n  Table.prototype.afterKeyDown = function () {\n    var _this = this;\n    if (this.curTable) {\n      this.resizeIconPositionTime = setTimeout(function () {\n        _this.updateResizeIconPosition();\n      }, 1);\n    }\n  };\n  Table.prototype.updateResizeIconPosition = function () {\n    var tableReBox = this.parent.contentModule.getEditPanel().querySelector('.e-table-box');\n    if (!isNOU(tableReBox)) {\n      var tablePosition = this.calcPos(this.curTable);\n      tableReBox.style.cssText = 'top: ' + (tablePosition.top + parseInt(getComputedStyle(this.curTable).height, 10) - 4) + 'px; left:' + (tablePosition.left + parseInt(getComputedStyle(this.curTable).width, 10) - 4) + 'px;';\n    }\n  };\n  return Table;\n}();\nexport { Table };","map":{"version":3,"names":["createElement","detach","closest","Browser","isNullOrUndefined","isNOU","EventHandler","addClass","Popup","Button","events","RenderType","NumericTextBox","classes","dispatchEvent","parseHtml","hasClass","removeClassWithAttr","Table","parent","serviceLocator","ensureInsideTableList","pageX","pageY","moveEle","currentColumnResize","resizeEndTime","isTableMoveActive","isResizeBind","rteID","element","id","l10n","getService","rendererFactory","dialogRenderObj","addEventListener","isDestroyed","prototype","on","createTable","renderDlgContent","initialEnd","afterRender","dynamicModule","showTableDialog","showDialog","closeTableDialog","closeDialog","docClick","iframeMouseDown","onIframeMouseDown","editAreaClick","editAreaClickHandler","clearDialogObj","tableToolbarAction","onToolbarAction","dropDownSelect","dropdownSelect","keyDown","keyUp","mouseUp","selectionTable","tableModulekeyUp","bindCssClass","setCssClass","destroy","afterKeyDown","removeEventListener","off","mouseDown","cellSelect","tableColorPickerChanged","setBGColor","isDevice","tableSettings","resize","remove","contentModule","getEditPanel","resizeHelper","touchStartEvent","resizeStart","updateCss","currentObj","e","cssClass","oldCssClass","setProperties","trim","replace","popupObj","createTableButton","editdlgObj","numericTextBoxObj","columnTextBox","rowTextBox","tableWidthNum","tableCellPadding","tableCellSpacing","i","length","target","args","info","name","tagName","setAttribute","getRenderer","Content","add","item","document","body","contains","querySelector","command","range","formatter","editorManager","nodeSelection","getRange","getDocument","selection","save","selectParent","getParentNodeCollection","subCommand","addRow","addColumn","removeRowColumn","verticalAlign","tableStyles","UpdateCells","selectCell","process","hideTableQuickToolbar","key","toLocaleLowerCase","classList","createTableToolbarBtn","relateTo","nodeName","parentElement","hide","focus","event","proxy","action","openDialog","preventDefault","code","ele","keyCode","ctrlKey","removeTable","querySelectorAll","removeResizeElement","closestTd","inputElement","selectedEndCell","activeCell","shiftKey","removeCellSelectClasses","tabSelection","tableArrowNavigation","keyDownEventInstance","tableCellsKeyboardSelection","handleSelectAll","which","editorMode","startContainer","nodeType","Node","ELEMENT_NODE","deleteTable","table","getAdjacentTableElement","updateTableSelection","isShiftEnter","isActionKey","ALLOWED_ACTIONKEYS","indexOf","setCursorPoint","firstTd","cells","setSelectionText","removeTableSelection","isMultiSelect","commonAncestorContainer","Clear","getCorrespondingColumns","cell","activeIndexes","getCorrespondingIndex","activeCellRowIndex","activeCellColIndex","resetTableSelection","observer","notify","selectNode","setSelectionNode","curTable","elementArray","colspan","allRows","rows","index","j","children","colEle","ele_1","colspan_1","parseInt","getAttribute","rowSpan","rowIndex","colIndex","allCells","isdelKey","collapsed","quickToolObj","tableQTBar","nodeCollection","getNodeCollection","adjacentElement","getSelectedTableEle","isBrEle","getBrElement","compareRange","createRange","collapse","selectNodeContents","nodeIndex","getIndex","startOffset","TEXT_NODE","endOffset","endContainer","textContent","currentEleIndex","getAdjacentElementFromDom","setSelection","parentNode","currentElement","childNodes","Array","from","startContainerIndex","nextSibling","previousSibling","toUpperCase","getAdjacentElementFromList","firstChild","lastChild","nodes","Math","max","min","push","_i","_a","nextElement","fakeSelectionEle","className","appendChild","removeAllFakeSelectionEles","fakeSelectionEles","forEach","brElement","containerEle","enterKey","replaceChild","CLS_TABLE_SEL","cancelResizeAction","selectedCells","eventArgs","previousTableElement","isInternal","docElement","originalEvent","insertTableDialog","self","getCssClass","returnValue","tableHeader","editTable","tdEle","tableCell","CLS_TB_DASH_BOR","CLS_TB_ALT_BOR","split","saveData","restore","insideList","blockNodes","domNode","removeEmptyTextNodes","node","nodeValue","removeChild","allHeadBodyTRElements","toLowerCase","prevElement","cellIndex","tHead","clsTble","selText","nextElementSibling","previousElementSibling","style","backgroundColor","value","hidePopup","getAnchorNode","readonly","showOnRightClick","quickToolbarSettings","quickToolbarModule","isPopupOpen","closestTable","startNode","endNode","isAnchorEle","currentTime","Date","getTime","CLS_CLICKELEM","range_1","touches","iframeSettings","enable","window","pageXOffset","getBoundingClientRect","left","changedTouches","clientX","pageYOffset","top","inlineMode","toolbarModule","getToolbarHeight","clientY","showPopup","tableCellSelect","row","slice","call","col","list","dlgDiv","parentIndex","tblHeader","innerHTML","tableMouseUp","unwireTableSelectionEvents","tableMouseLeave","tableCellLeave","tableCellClick","tableInsert","selectionObj","ownerDocument","getPanel","columns","width","minWidth","maxWidth","x","scrollX","y","scrollY","scrollTo","get","anchorNode","tdNode","wireTableSelectionEvents","helper","tableMove","CLS_TABLE_SEL_END","CLS_TABLE_MULTI_CELL","buttons","targetTouches","isResizing","removeHelper","tableResizeEleCreation","preventDefaultResize","calMaxCol","hasAttribute","height","getComputedStyle","pos","calcPos","colReEle","attrs","toString","CLS_RTE_TABLE_RESIZE","CLS_TB_COL_RES","cssText","offsetWidth","rowReEle","CLS_TB_ROW_RES","rowPosLeft","offsetHeight","tableReBox","CLS_TB_BOX_RES","elem","parentOffset","offset","doc","offsetParent","documentElement","isNestedTable","position","topValue","scrollTop","leftValue","scrollLeft","offsetTop","offsetLeft","getPointX","getPointY","_this","resetResizeHelper","resizeBtnInit","resizeBtnStat","column","columnEle","cellColl","cellCount","colSpan","sizes","colGroupEle","rowSpanCells","Map","currentColIndex","k","l","set","getCellIndex","size","convertPixelToPercentage","insertBefore","appendHelper","rowEle","tableBox","requestType","trigger","resizeStartArgs","cancel","touchMoveEvent","resizing","touchEndEvent","resizeEnd","cellKey","spannedCell","cls","setHelperHeight","updateHelper","top_1","mouseX","enableRtl","mouseY","maxiumWidth","currentTdElement","onResize","resizingArgs","tableWidth","tableHeight","isNaN","paddingSize","paddingRight","match","join","rteWidth","clientWidth","widthCompare","currentTd","currentTDPad","colGroup","currentTableWidth","includes","parseFloat","getCurrentTableWidth","currentCol","currentColResizableWidth","getCurrentColWidth","right","firstColumnsCell","findFirstLastColCells","differenceWidth","preMarginLeft","widthType","marginLeft","regex","currentMarginLeft","currentColumnCellWidth","lastColumnsCell","actualwid","totalwid","leftColumnWidth","rightColWidth","tableTrElementPixel","currentTableTrElement","clientHeight","tableBoxPosition","abs","currentColWidth","parentWidth","isFirst","resultColumns","rowSpanCellIndexs","_loop_1","spannedCellKey","every","offsetValue","tableTrPercentage","percentage","resizeStop","colHelper","rowHelper","tabkey","cmd","delKey","argsTarget","header","insertbtn","getConstant","tableDiv","drawTable","btnEle","type","tabindex","getToolbarElement","iconCss","content","locale","isStringTemplate","appendTo","getToolbar","targetType","collision","X","Y","offsetY","viewPortElement","zIndex","close","isBlur","refreshPosition","documentClickClosedBy","closedBy","closestEle","isExist","isToolbarClick","isIE","rowDiv","display","createDialog","editContent","tableDlgContent","update","editHeader","click","applyProperties","bind","buttonModel","isPrimary","cancelDialog","maxHeight","dlgContent","tableCellDlgContent","insert","customTable","tableColumn","tableRow","tableWrap","contentElem","format","placeholder","floatLabelType","tableDialog","rootContainer","dialogModel","CLS_RTE_ELEMENTS","showCloseIcon","closeOnEscape","isModal","animationSettings","effect","render","inlineQTBar","textQTBar","argument","text","PointerEvent","dialogEle","tdElm","padVal","padding","cellSpacing","CLS_TABLE_BORDER","cellPadding","widthVal","getClientRects","brdSpcVal","resizeIconPositionTime","clearTimeout","getModuleName","setTimeout","updateResizeIconPosition","tablePosition"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/table-module.js"],"sourcesContent":["import { createElement, detach, closest, Browser, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml, hasClass } from '../base/util';\nimport { removeClassWithAttr } from '../../common/util';\n/**\n * `Table` module is used to handle table actions.\n */\nvar Table = /** @class */ (function () {\n    function Table(parent, serviceLocator) {\n        this.ensureInsideTableList = true;\n        this.pageX = null;\n        this.pageY = null;\n        this.moveEle = null;\n        this.currentColumnResize = '';\n        this.resizeEndTime = 0;\n        this.isTableMoveActive = false;\n        this.isResizeBind = true;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.l10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n        this.isDestroyed = false;\n    }\n    Table.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.createTable, this.renderDlgContent, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.dynamicModule, this.afterRender, this);\n        this.parent.on(events.showTableDialog, this.showDialog, this);\n        this.parent.on(events.closeTableDialog, this.closeDialog, this);\n        this.parent.on(events.docClick, this.docClick, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n        this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n        this.parent.on(events.keyDown, this.keyDown, this);\n        this.parent.on(events.keyUp, this.keyUp, this);\n        this.parent.on(events.mouseUp, this.selectionTable, this);\n        this.parent.on(events.tableModulekeyUp, this.tableModulekeyUp, this);\n        this.parent.on(events.bindCssClass, this.setCssClass, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.afterKeyDown, this.afterKeyDown, this);\n    };\n    Table.prototype.removeEventListener = function () {\n        this.parent.off(events.createTable, this.renderDlgContent);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.dynamicModule, this.afterRender);\n        this.parent.off(events.docClick, this.docClick);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.showTableDialog, this.showDialog);\n        this.parent.off(events.closeTableDialog, this.closeDialog);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.clearDialogObj, this.clearDialogObj);\n        this.parent.off(events.tableToolbarAction, this.onToolbarAction);\n        this.parent.off(events.dropDownSelect, this.dropdownSelect);\n        this.parent.off(events.mouseDown, this.cellSelect);\n        this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n        this.parent.off(events.keyDown, this.keyDown);\n        this.parent.off(events.keyUp, this.keyUp);\n        this.parent.off(events.mouseUp, this.selectionTable);\n        this.parent.off(events.tableModulekeyUp, this.tableModulekeyUp);\n        this.parent.off(events.bindCssClass, this.setCssClass);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.afterKeyDown, this.afterKeyDown);\n        if (!Browser.isDevice && this.parent.tableSettings.resize) {\n            EventHandler.remove(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper);\n            EventHandler.remove(this.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart);\n        }\n    };\n    Table.prototype.updateCss = function (currentObj, e) {\n        if (currentObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass + ' ' + e.cssClass).trim() });\n            }\n            else {\n                currentObj.setProperties({ cssClass: (currentObj.cssClass.replace(e.oldCssClass, '').trim() + ' ' + e.cssClass).trim() });\n            }\n        }\n    };\n    Table.prototype.setCssClass = function (e) {\n        if (this.popupObj && e.cssClass) {\n            if (isNullOrUndefined(e.oldCssClass)) {\n                addClass([this.popupObj.element], e.cssClass);\n            }\n            else {\n                removeClassWithAttr([this.popupObj.element], e.oldCssClass);\n                addClass([this.popupObj.element], e.cssClass);\n            }\n        }\n        this.updateCss(this.createTableButton, e);\n        this.updateCss(this.editdlgObj, e);\n        var numericTextBoxObj = [\n            this.columnTextBox, this.rowTextBox, this.tableWidthNum, this.tableCellPadding, this.tableCellSpacing\n        ];\n        for (var i = 0; i < numericTextBoxObj.length; i++) {\n            this.updateCss(numericTextBoxObj[i], e);\n        }\n    };\n    Table.prototype.selectionTable = function (e) {\n        var target = e.args.target;\n        if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n            this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n        }\n    };\n    Table.prototype.afterRender = function () {\n        if (isNullOrUndefined(this.contentModule)) {\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n            this.parent.on(events.mouseDown, this.cellSelect, this);\n            if (this.parent.tableSettings.resize) {\n                EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n            }\n            if (!Browser.isDevice && this.parent.tableSettings.resize) {\n                EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n            }\n        }\n    };\n    Table.prototype.dropdownSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var args = {\n            args: e,\n            selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n            selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n        };\n        switch (item.subCommand) {\n            case 'InsertRowBefore':\n            case 'InsertRowAfter':\n                this.addRow(args.selection, e);\n                break;\n            case 'InsertColumnLeft':\n            case 'InsertColumnRight':\n                this.addColumn(args.selection, e);\n                break;\n            case 'DeleteColumn':\n            case 'DeleteRow':\n                this.removeRowColumn(args.selection, e);\n                break;\n            case 'AlignTop':\n            case 'AlignMiddle':\n            case 'AlignBottom':\n                this.verticalAlign(args, e);\n                break;\n            case 'Dashed':\n            case 'Alternate':\n            case 'Custom':\n                this.tableStyles(args, item.subCommand);\n                break;\n            case 'Merge':\n            case 'VerticalSplit':\n            case 'HorizontalSplit':\n                this.UpdateCells(args.selection, e);\n                break;\n        }\n    };\n    Table.prototype.UpdateCells = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.keyUp = function (e) {\n        var target = e.args.target;\n        if (e.args.key.toLocaleLowerCase() === 'escape' && target && target.classList && (this.popupObj && !closest(target, '[id=' + '\\'' + this.popupObj.element.id + '\\'' + ']')) && this.popupObj) {\n            var createTableToolbarBtn = this.popupObj.relateTo;\n            if (createTableToolbarBtn.nodeName !== 'BUTTON') {\n                createTableToolbarBtn = createTableToolbarBtn.querySelector('span.e-create-table');\n                createTableToolbarBtn = createTableToolbarBtn.parentElement;\n            }\n            this.popupObj.hide();\n            if (createTableToolbarBtn) {\n                createTableToolbarBtn.focus();\n            }\n        }\n    };\n    Table.prototype.keyDown = function (e) {\n        var event = e.args;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'escape':\n                break;\n            case 'insert-table':\n                this.openDialog(true, e);\n                event.preventDefault();\n                break;\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule\n            && event.code !== 'KeyK') {\n            var selection = void 0;\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? ele.parentElement : ele;\n            if ((event.keyCode === 8 || event.keyCode === 46) ||\n                (event.ctrlKey && event.keyCode === 88)) {\n                if (ele && ele.tagName === 'TBODY') {\n                    if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n                        selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n                    }\n                    event.preventDefault();\n                    proxy.removeTable(selection, event, true);\n                }\n                else if (ele && ele.querySelectorAll('table').length > 0) {\n                    this.removeResizeElement();\n                    this.hideTableQuickToolbar();\n                }\n            }\n            if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n                var closestTd = closest(ele, 'td');\n                ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n            }\n            if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n                var selectedEndCell = this.contentModule.getEditPanel().querySelectorAll('.e-cell-select-end');\n                if ((isNOU(this.activeCell) || this.activeCell !== ele) && !isNOU(selectedEndCell) && selectedEndCell.length === 0) {\n                    this.activeCell = ele;\n                }\n                if (!isNOU(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n                    selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n                }\n                if (!event.shiftKey ||\n                    (event.shiftKey && event.keyCode === 9)) {\n                    switch (event.keyCode) {\n                        case 9:\n                        case 37:\n                        case 39:\n                            this.removeCellSelectClasses();\n                            proxy.tabSelection(event, selection, ele);\n                            break;\n                        case 40:\n                        case 38:\n                            this.removeCellSelectClasses();\n                            proxy.tableArrowNavigation(event, selection, ele);\n                            break;\n                    }\n                }\n            }\n        }\n        if (event.shiftKey && (event.keyCode === 39 ||\n            event.keyCode === 37\n            || event.keyCode === 38 || event.keyCode === 40)) {\n            this.keyDownEventInstance = event;\n            EventHandler.add(this.parent.contentModule.getDocument(), 'selectionchange', this.tableCellsKeyboardSelection, this);\n        }\n        if (event.ctrlKey && event.key === 'a') {\n            this.handleSelectAll();\n        }\n        if (((event.code === 'Delete' && event.which === 46) || (event.code === 'Backspace' && event.which === 8)) && this.parent.editorMode === 'HTML') {\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            if (range.startContainer.nodeType === Node.ELEMENT_NODE && range.startContainer.nodeName === 'DIV' && range.startContainer.classList.contains('e-table-fake-selection')) {\n                this.deleteTable();\n                event.preventDefault();\n            }\n            else {\n                var table = (event.code === 'Delete' && event.which === 46) ? this.getAdjacentTableElement(range, true) : this.getAdjacentTableElement(range, false);\n                if (table) {\n                    this.updateTableSelection(table);\n                    event.preventDefault();\n                }\n            }\n        }\n        else {\n            var isShiftEnter = event.shiftKey && event.key === 'Enter';\n            var isActionKey = classes.ALLOWED_ACTIONKEYS.indexOf(event.key) !== -1;\n            if (isShiftEnter || isActionKey || (event.key && event.key.length === 1)) {\n                var table = this.parent.contentModule.getEditPanel().querySelector('table.e-cell-select');\n                if (table) {\n                    if (event.keyCode === 39 || event.keyCode === 37) {\n                        this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(), table, 0);\n                    }\n                    else {\n                        var firstTd = table.querySelector('tr').cells[0];\n                        this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), firstTd, firstTd, 0, 0);\n                    }\n                }\n                this.removeTableSelection();\n            }\n        }\n    };\n    Table.prototype.tableCellsKeyboardSelection = function (e) {\n        EventHandler.remove(this.parent.contentModule.getDocument(), 'selectionchange', this.tableCellsKeyboardSelection);\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var event = this.keyDownEventInstance;\n        var isMultiSelect = !isNullOrUndefined(range) && !isNullOrUndefined(range.commonAncestorContainer) &&\n            range.commonAncestorContainer.nodeType === Node.ELEMENT_NODE\n            && (range.commonAncestorContainer.tagName === 'TR'\n                || range.commonAncestorContainer.tagName === 'TBODY') && !isNullOrUndefined(this.activeCell);\n        var selectedEndCell = this.contentModule.getEditPanel().querySelectorAll('.e-cell-select-end');\n        if (!isNullOrUndefined(selectedEndCell) && selectedEndCell.length > 0) {\n            this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.contentModule.getDocument());\n            this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(), selectedEndCell[0], selectedEndCell[0], 0, 0);\n            this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(), selectedEndCell[0], 0);\n        }\n        if (isMultiSelect || (!isNullOrUndefined(selectedEndCell) && selectedEndCell.length > 0)) {\n            var cells = this.getCorrespondingColumns();\n            var cell = !isNullOrUndefined(selectedEndCell)\n                && selectedEndCell.length > 0 ? selectedEndCell[0] : this.activeCell;\n            var activeIndexes = this.getCorrespondingIndex(cell, cells);\n            var activeCellRowIndex = activeIndexes[0];\n            var activeCellColIndex = activeIndexes[1];\n            var target = void 0;\n            if (event.keyCode === 39) {\n                if (activeCellColIndex < cells[0].length - 1) {\n                    target = cells[activeCellRowIndex][(activeCellColIndex + 1)];\n                }\n                else if (activeCellRowIndex < cells.length - 1) {\n                    target = cells[(activeCellRowIndex + 1)][activeCellColIndex];\n                    if (selectedEndCell.length === 0 && activeCellRowIndex < cells.length - 1) {\n                        this.activeCell = cells[activeCellRowIndex][0];\n                    }\n                }\n                else {\n                    this.resetTableSelection();\n                }\n            }\n            else if (event.keyCode === 37) {\n                if (0 < activeCellColIndex) {\n                    target = cells[activeCellRowIndex][(activeCellColIndex - 1)];\n                }\n                else if (0 < activeCellRowIndex) {\n                    target = cells[(activeCellRowIndex - 1)][activeCellColIndex];\n                    if (selectedEndCell.length === 0 && 0 < activeCellRowIndex) {\n                        this.activeCell = cells[activeCellRowIndex][(cells[activeCellRowIndex].length - 1)];\n                    }\n                }\n                else {\n                    this.resetTableSelection();\n                }\n            }\n            else if (event.keyCode === 38) {\n                if (0 < activeCellRowIndex) {\n                    target = cells[(activeCellRowIndex - 1)][activeCellColIndex];\n                }\n                else {\n                    this.resetTableSelection();\n                }\n            }\n            else if (event.keyCode === 40) {\n                if (activeCellRowIndex < cells.length - 1) {\n                    target = cells[(activeCellRowIndex + 1)][activeCellColIndex];\n                }\n                else {\n                    this.resetTableSelection();\n                }\n            }\n            if (target) {\n                this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', {\n                    event: { target: target },\n                    selectNode: [this.activeCell]\n                });\n            }\n        }\n        if (selectedEndCell.length > 0) {\n            event.preventDefault();\n            e.preventDefault();\n        }\n    };\n    Table.prototype.resetTableSelection = function () {\n        var selectedEndCell = this.contentModule.getEditPanel().querySelectorAll('.e-cell-select-end');\n        if (!isNullOrUndefined(selectedEndCell) && selectedEndCell.length > 0) {\n            this.parent.formatter.editorManager.nodeSelection.setSelectionNode(this.parent.contentModule.getDocument(), this.curTable);\n        }\n        this.activeCell = null;\n        this.removeCellSelectClasses();\n        this.removeTableSelection();\n    };\n    Table.prototype.getCorrespondingColumns = function () {\n        var elementArray = [];\n        var colspan = 0;\n        var allRows = this.curTable.rows;\n        for (var i = 0; i <= allRows.length - 1; i++) {\n            var ele = allRows[i];\n            var index = 0;\n            for (var j = 0; j <= ele.children.length - 1; j++) {\n                var colEle = ele.children[j];\n                for (var ele_1 = colEle, colspan_1 = parseInt(ele_1.getAttribute('colspan'), 10) || 1, rowSpan = parseInt(ele_1.getAttribute('rowspan'), 10) || 1, rowIndex = i; rowIndex < i + rowSpan; rowIndex++) {\n                    for (var colIndex = index; colIndex < index + colspan_1; colIndex++) {\n                        if (!elementArray[rowIndex]) {\n                            elementArray[rowIndex] = [];\n                        }\n                        if (elementArray[rowIndex][colIndex]) {\n                            index++;\n                        }\n                        else {\n                            elementArray[rowIndex][colIndex] = colEle;\n                        }\n                    }\n                }\n                index += colspan;\n            }\n        }\n        return elementArray;\n    };\n    Table.prototype.getCorrespondingIndex = function (cell, allCells) {\n        for (var i = 0; i < allCells.length; i++) {\n            for (var j = 0; j < allCells[i].length; j++) {\n                if (allCells[i][j] === cell) {\n                    return [i, j];\n                }\n            }\n        }\n        return [];\n    };\n    Table.prototype.getAdjacentTableElement = function (range, isdelKey) {\n        if (!range.collapsed || (!isdelKey && this.quickToolObj && this.quickToolObj.tableQTBar\n            && document.body.contains(this.quickToolObj.tableQTBar.element))) {\n            return null;\n        }\n        var nodeCollection = this.getNodeCollection(range);\n        var startContainer = (range.collapsed && this.parent.contentModule.getEditPanel() === range.startContainer\n            && nodeCollection && nodeCollection.length > 0 && nodeCollection[0] ?\n            nodeCollection[0] : range.startContainer);\n        var adjacentElement = this.getSelectedTableEle(nodeCollection);\n        var isBrEle = this.getBrElement(range, nodeCollection);\n        if (startContainer && startContainer.nodeType === Node.ELEMENT_NODE) {\n            if (startContainer.tagName === 'IMG' || startContainer.querySelector('img') || startContainer.tagName === 'AUDIO'\n                || startContainer.querySelector('audio') || startContainer.tagName === 'VIDEO' || startContainer.querySelector('video')\n                || startContainer.querySelector('.e-video-clickelem')) {\n                var compareRange = this.contentModule.getDocument().createRange();\n                compareRange.collapse(true);\n                compareRange.selectNodeContents(startContainer);\n                var nodeIndex = this.parent.formatter.editorManager.nodeSelection.getIndex(startContainer);\n                if ((isdelKey && compareRange.startOffset >= range.startOffset) ||\n                    (!isdelKey && (startContainer.tagName !== 'IMG' && compareRange.startOffset !== range.startOffset\n                        || startContainer.tagName === 'IMG' && nodeIndex !== range.startOffset))) {\n                    return null;\n                }\n            }\n        }\n        if (startContainer && startContainer.nodeType === Node.TEXT_NODE) {\n            if (isdelKey) {\n                if (range.endOffset !== range.endContainer.textContent.length) {\n                    if (range.endOffset !== range.endContainer.textContent.trim().length) {\n                        return null;\n                    }\n                }\n            }\n            else if (range.startOffset !== 0) {\n                return null;\n            }\n        }\n        if (startContainer && startContainer.nodeType === Node.ELEMENT_NODE && startContainer.tagName === 'TABLE') {\n            adjacentElement = startContainer;\n        }\n        if (adjacentElement) {\n            var currentEleIndex = this.parent.formatter.editorManager.nodeSelection.getIndex(adjacentElement);\n            if (!((range.startOffset === currentEleIndex && isdelKey) || (range.startOffset !== currentEleIndex && !isdelKey))) {\n                adjacentElement = null;\n            }\n        }\n        if (!adjacentElement && startContainer) {\n            adjacentElement = this.getAdjacentElementFromDom(startContainer, isBrEle, isdelKey);\n        }\n        if (adjacentElement && adjacentElement.nodeType === Node.ELEMENT_NODE && adjacentElement.tagName === 'TABLE') {\n            this.setSelection(adjacentElement, isBrEle);\n            return adjacentElement;\n        }\n        return null;\n    };\n    Table.prototype.getAdjacentElementFromDom = function (startContainer, isBrEle, isdelKey) {\n        var adjacentElement;\n        var parentElement = (isBrEle ? isBrEle : startContainer.parentNode);\n        var currentElement = startContainer;\n        while (parentElement && !adjacentElement && parentElement.parentNode) {\n            var childNodes = Array.from(parentElement.childNodes);\n            var startContainerIndex = childNodes.indexOf(currentElement);\n            if (startContainerIndex !== -1 && ((isdelKey && startContainerIndex < childNodes.length - 1)\n                || (!isdelKey && startContainerIndex > 0))) {\n                adjacentElement = (childNodes[isdelKey ? startContainerIndex + 1 : startContainerIndex - 1]);\n            }\n            else {\n                adjacentElement = (isdelKey ? parentElement.nextSibling : parentElement.previousSibling);\n                currentElement = parentElement;\n            }\n            if (!isBrEle && startContainer.nodeType === Node.TEXT_NODE && adjacentElement && adjacentElement.tagName && adjacentElement.tagName.toUpperCase() === 'BR') {\n                isBrEle = currentElement = parentElement = adjacentElement;\n                adjacentElement = null;\n            }\n            if (!isBrEle && adjacentElement && !(adjacentElement.nodeType === Node.ELEMENT_NODE && adjacentElement.tagName === 'TABLE') && !isNullOrUndefined(adjacentElement.textContent) && !adjacentElement.textContent.trim()) {\n                currentElement = parentElement = adjacentElement.parentNode;\n                adjacentElement = null;\n            }\n            if (adjacentElement && adjacentElement.tagName && ['UL', 'OL', 'LI'].indexOf(adjacentElement.tagName.toUpperCase()) !== -1) {\n                adjacentElement = this.getAdjacentElementFromList(adjacentElement, isdelKey);\n                if (!adjacentElement) {\n                    return null;\n                }\n            }\n            if (parentElement && parentElement.tagName && parentElement.tagName.toUpperCase() === 'LI' && !isdelKey) {\n                adjacentElement = parentElement;\n            }\n            parentElement = parentElement.parentNode;\n        }\n        return adjacentElement;\n    };\n    Table.prototype.getAdjacentElementFromList = function (adjacentElement, isdelKey) {\n        while (adjacentElement) {\n            if (adjacentElement.tagName && ['UL', 'OL', 'LI'].indexOf(adjacentElement.tagName.toUpperCase()) === -1) {\n                if (!(adjacentElement.nodeType === Node.ELEMENT_NODE && adjacentElement.tagName === 'TABLE')) {\n                    adjacentElement = (isdelKey ? adjacentElement.firstChild : adjacentElement.lastChild);\n                }\n                break;\n            }\n            adjacentElement = (isdelKey ? adjacentElement.firstChild : adjacentElement.lastChild);\n        }\n        return adjacentElement;\n    };\n    Table.prototype.getNodeCollection = function (range) {\n        var nodes = [];\n        if (range.collapsed && this.parent.contentModule.getEditPanel() === range.startContainer\n            && range.startContainer.childNodes.length > 0) {\n            var index = Math.max(0, Math.min(range.startContainer.childNodes.length - 1, range.endOffset - 1));\n            nodes.push(range.startContainer.childNodes[index]);\n        }\n        else {\n            nodes = this.parent.formatter.editorManager.nodeSelection.getNodeCollection(range);\n        }\n        return nodes;\n    };\n    Table.prototype.getSelectedTableEle = function (nodeCollection) {\n        if (nodeCollection && nodeCollection.length > 0) {\n            for (var _i = 0, _a = Array.from(nodeCollection); _i < _a.length; _i++) {\n                var element = _a[_i];\n                if (element && element.tagName === 'TABLE') {\n                    return element;\n                }\n            }\n        }\n        return null;\n    };\n    Table.prototype.getBrElement = function (range, nodeCollection) {\n        if (range.endContainer.tagName === 'BR') {\n            return range.endContainer;\n        }\n        if (nodeCollection.length === 1 && nodeCollection[0]\n            && nodeCollection[0].tagName === 'BR') {\n            return nodeCollection[0];\n        }\n        return null;\n    };\n    Table.prototype.setSelection = function (nextElement, isBrEle) {\n        if (!nextElement.classList.contains('e-cell-select')) {\n            this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n            if (isBrEle) {\n                if (isBrEle.parentNode && isBrEle.parentNode.childNodes.length === 1 && isBrEle.parentNode.firstChild.nodeName === 'BR') {\n                    detach(isBrEle.parentNode);\n                }\n                else {\n                    detach(isBrEle);\n                }\n            }\n            var fakeSelectionEle = this.parent.createElement('div', { className: 'e-table-fake-selection' });\n            fakeSelectionEle.setAttribute('contenteditable', 'false');\n            this.contentModule.getEditPanel().appendChild(fakeSelectionEle);\n            this.parent.formatter.editorManager.nodeSelection.setSelectionNode(this.contentModule.getDocument(), fakeSelectionEle);\n        }\n    };\n    Table.prototype.removeAllFakeSelectionEles = function () {\n        var fakeSelectionEles = this.parent.contentModule.getEditPanel().querySelectorAll('.e-table-fake-selection');\n        if (fakeSelectionEles && fakeSelectionEles.length > 0) {\n            fakeSelectionEles.forEach(function (element) {\n                detach(element);\n            });\n        }\n    };\n    Table.prototype.deleteTable = function () {\n        var table = this.parent.contentModule.getEditPanel().querySelector('table.e-cell-select');\n        this.removeResizeElement();\n        if (table) {\n            var brElement = document.createElement('br');\n            var containerEle = brElement;\n            if (this.parent.enterKey === 'DIV') {\n                containerEle = document.createElement('div');\n                containerEle.appendChild(brElement);\n            }\n            else if (this.parent.enterKey === 'P') {\n                containerEle = document.createElement('p');\n                containerEle.appendChild(brElement);\n            }\n            table.parentNode.replaceChild(containerEle, table);\n            this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(), containerEle, containerEle, 0, 0);\n            this.removeTableSelection();\n        }\n    };\n    Table.prototype.removeTableSelection = function () {\n        var table = this.parent.contentModule.getEditPanel().querySelector('table.e-cell-select');\n        if (table) {\n            removeClassWithAttr([table], classes.CLS_TABLE_SEL);\n        }\n        this.removeAllFakeSelectionEles();\n    };\n    Table.prototype.updateTableSelection = function (table) {\n        addClass([table], 'e-cell-select');\n    };\n    Table.prototype.handleSelectAll = function () {\n        this.cancelResizeAction();\n        var selectedCells = this.parent.inputElement.querySelectorAll('.' + classes.CLS_TABLE_SEL);\n        removeClassWithAttr(selectedCells, classes.CLS_TABLE_SEL);\n        this.removeTableSelection();\n    };\n    Table.prototype.tableModulekeyUp = function (e) {\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule) {\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? ele.parentElement : ele;\n            if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n                var closestTd = closest(ele, 'td');\n                ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n            }\n            var eventArgs = e.args;\n            if (this.previousTableElement !== ele && !isNullOrUndefined(this.previousTableElement)\n                && !eventArgs.shiftKey && (eventArgs.keyCode === 39 || eventArgs.keyCode === 37 ||\n                eventArgs.keyCode === 38 || eventArgs.keyCode === 40)) {\n                removeClassWithAttr([this.previousTableElement], classes.CLS_TABLE_SEL);\n                this.removeTableSelection();\n            }\n        }\n    };\n    Table.prototype.openDialog = function (isInternal, e) {\n        if (!isInternal) {\n            this.parent.contentModule.getEditPanel().focus();\n        }\n        if (this.parent.editorMode === 'HTML') {\n            var docElement = this.parent.contentModule.getDocument();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(docElement);\n            var selection = this.parent.formatter.editorManager.nodeSelection.save(range, docElement);\n            var args = {\n                originalEvent: e ? e.args : { action: 'insert-table' },\n                item: {\n                    command: 'Table',\n                    subCommand: 'CreateTable'\n                },\n                name: !isInternal ? 'showDialog' : null\n            };\n            this.insertTableDialog({ self: this, args: args, selection: selection });\n        }\n    };\n    Table.prototype.showDialog = function () {\n        this.openDialog(false);\n        this.setCssClass({ cssClass: this.parent.getCssClass() });\n    };\n    Table.prototype.closeDialog = function () {\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n        }\n    };\n    Table.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'TableHeader':\n                this.tableHeader(args.selection, args.args);\n                break;\n            case 'TableRemove':\n                this.removeTable(args.selection, args.args);\n                break;\n            case 'TableEditProperties':\n                this.editTable(args);\n                break;\n        }\n    };\n    Table.prototype.verticalAlign = function (args, e) {\n        var tdEle = closest(args.selectParent[0], 'th') || closest(args.selectParent[0], 'td');\n        if (tdEle) {\n            this.parent.formatter.process(this.parent, e, e, { tableCell: tdEle, subCommand: e.item.subCommand });\n        }\n    };\n    Table.prototype.tableStyles = function (args, command) {\n        var table = closest(args.selectParent[0], 'table');\n        if (command === 'Dashed') {\n            /* eslint-disable */\n            (this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR)) ?\n                removeClassWithAttr([this.parent.element], classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n            (table.classList.contains(classes.CLS_TB_DASH_BOR)) ? removeClassWithAttr([this.parent.element], classes.CLS_TB_DASH_BOR) :\n                table.classList.add(classes.CLS_TB_DASH_BOR);\n        }\n        if (command === 'Alternate') {\n            (this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR)) ?\n                removeClassWithAttr([this.parent.element], classes.CLS_TB_ALT_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n            (table.classList.contains(classes.CLS_TB_ALT_BOR)) ? removeClassWithAttr([table], classes.CLS_TB_ALT_BOR) :\n                table.classList.add(classes.CLS_TB_ALT_BOR);\n            /* eslint-enable */\n        }\n        if (args.args && args.args.item.cssClass) {\n            var classList = args.args.item.cssClass.split(' ');\n            for (var i = 0; i < classList.length; i++) {\n                if (table.classList.contains(classList[i])) {\n                    removeClassWithAttr([table], (classList[i]));\n                }\n                else {\n                    table.classList.add(classList[i]);\n                }\n            }\n        }\n        this.parent.formatter.saveData();\n        this.hideTableQuickToolbar();\n        this.parent.formatter.editorManager.nodeSelection.restore();\n    };\n    Table.prototype.insideList = function (range) {\n        var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n        var nodes = [];\n        for (var i = 0; i < blockNodes.length; i++) {\n            if (blockNodes[i].parentNode.tagName === 'LI') {\n                nodes.push(blockNodes[i].parentNode);\n            }\n            else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                    blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                nodes.push(blockNodes[i]);\n            }\n        }\n        if (nodes.length > 1 || nodes.length && ((range.startOffset === 0 && range.endOffset === 0))) {\n            this.ensureInsideTableList = true;\n            return true;\n        }\n        else {\n            this.ensureInsideTableList = false;\n            return false;\n        }\n    };\n    Table.prototype.removeEmptyTextNodes = function (element) {\n        var children = element.childNodes;\n        for (var i = children.length - 1; i >= 0; i--) {\n            var node = children[i];\n            if (node.nodeType === Node.TEXT_NODE && node.nodeValue.trim() === '') {\n                element.removeChild(node);\n            }\n        }\n    };\n    Table.prototype.tabSelection = function (event, selection, ele) {\n        var allHeadBodyTRElements = ele.closest('table').querySelectorAll('thead, tbody, tr');\n        for (var i = 0; i < allHeadBodyTRElements.length; i++) {\n            this.removeEmptyTextNodes(allHeadBodyTRElements[i]);\n        }\n        this.previousTableElement = ele;\n        var insideList = this.insideList(selection.range);\n        if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 ||\n            insideList) {\n            return;\n        }\n        event.preventDefault();\n        removeClassWithAttr([ele], classes.CLS_TABLE_SEL);\n        this.removeTableSelection();\n        if (!event.shiftKey && event.keyCode !== 37) {\n            var nextElement = (!isNullOrUndefined(ele.nextSibling)) ? ele.nextSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ?\n                        (closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td') ?\n                            closest(ele, 'table').nextSibling : ele : ele);\n            if (ele === nextElement && ele.nodeName === 'TH') {\n                nextElement = closest(ele, 'table').rows[1].cells[0];\n            }\n            if (event.keyCode === 39 && ele === nextElement) {\n                nextElement = closest(ele, 'table').nextSibling;\n            }\n            if (nextElement) {\n                // eslint-disable-next-line\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n            if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n                ele.classList.add(classes.CLS_TABLE_SEL);\n                this.addRow(selection, event, true);\n                removeClassWithAttr([ele], classes.CLS_TABLE_SEL);\n                this.removeTableSelection();\n                nextElement = nextElement.parentElement.nextSibling ? nextElement.parentElement.nextSibling.firstChild :\n                    nextElement.parentElement.firstChild;\n                // eslint-disable-next-line\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n        }\n        else {\n            var prevElement = (!isNullOrUndefined(ele.previousSibling)) ? ele.previousSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').previousSibling) ?\n                    closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ?\n                        (closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td') ? closest(ele, 'table').previousSibling :\n                            ele : ele);\n            if (ele === prevElement && ele.cellIndex === 0 &&\n                closest(ele, 'table').tHead) {\n                var clsTble = closest(ele, 'table');\n                prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n            }\n            if (event.keyCode === 37 && ele === prevElement) {\n                prevElement = closest(ele, 'table').previousSibling;\n            }\n            if (prevElement) {\n                // eslint-disable-next-line\n                (prevElement.textContent.trim() !== '' && closest(prevElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), prevElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n            }\n        }\n    };\n    Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n        var selText = selection.range.startContainer;\n        if ((event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' ||\n            selText.parentNode && selText.parentNode.nodeName !== 'TD')) ||\n            (event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' ||\n                selText.parentNode && selText.parentNode.nodeName !== 'TD'))) {\n            return;\n        }\n        event.preventDefault();\n        removeClassWithAttr([ele], classes.CLS_TABLE_SEL);\n        this.removeTableSelection();\n        if (event.keyCode === 40) {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').nextElementSibling)) ?\n                closest(ele, 'tr').nextElementSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName === 'TH') ?\n                    closest(ele, 'table').rows[1].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ? closest(ele, 'table').nextSibling :\n                        ele;\n        }\n        else {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').previousElementSibling)) ?\n                closest(ele, 'tr').previousElementSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName !== 'TH') ?\n                    closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ? closest(ele, 'table').previousSibling :\n                        ele;\n        }\n        if (ele) {\n            selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n        }\n    };\n    Table.prototype.setBGColor = function (args) {\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        // eslint-disable-next-line\n        var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n        // eslint-disable-next-line\n        var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n        for (var i = 0; i < selectedCells.length; i++) {\n            selectedCells[i].style.backgroundColor = args.item.value;\n        }\n        this.parent.formatter.saveData();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.hideTableQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n            this.quickToolObj.tableQTBar.hidePopup();\n        }\n    };\n    Table.prototype.tableHeader = function (selection, e) {\n        this.parent.formatter.process(this.parent, e, e.originalEvent, { selection: selection, subCommand: e.item.subCommand });\n    };\n    Table.prototype.getAnchorNode = function (element) {\n        var selectParent = closest(element, 'a');\n        return (selectParent ? selectParent : element);\n    };\n    Table.prototype.editAreaClickHandler = function (e) {\n        if (this.parent.readonly || !isNOU(closest(e.args.target, '.e-img-caption'))) {\n            return;\n        }\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n            if (isPopupOpen) {\n                return;\n            }\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n            var closestTable = closest(target, 'table');\n            var startNode = this.parent.getRange().startContainer.parentElement;\n            var endNode = this.parent.getRange().endContainer.parentElement;\n            var isAnchorEle = this.getAnchorNode(target);\n            var currentTime = new Date().getTime();\n            if (target && target.nodeName !== 'A' && isAnchorEle.nodeName !== 'A' && target.nodeName !== 'IMG' && target.nodeName !== 'VIDEO' && !target.classList.contains(classes.CLS_CLICKELEM) &&\n                target.nodeName !== 'AUDIO' && startNode === endNode && (target.nodeName === 'TD' || target.nodeName === 'TH' ||\n                target.nodeName === 'TABLE' || (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)))\n                && !(range.startContainer.nodeType === 3 && !range.collapsed) &&\n                currentTime - this.resizeEndTime > 100) {\n                var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                var pageX = void 0;\n                var pageY = void 0;\n                if (Browser.isDevice && e.args.touches) {\n                    pageX = (this.parent.iframeSettings.enable) ? window.pageXOffset + this.parent.element.getBoundingClientRect().left +\n                        e.args.changedTouches[0].clientX : e.args.changedTouches[0].pageX;\n                    pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset + this.parent.element.getBoundingClientRect().top +\n                        (!this.parent.inlineMode.enable ? this.parent.toolbarModule.getToolbarHeight() : 0)\n                        + e.args.changedTouches[0].clientY : e.args.changedTouches[0].pageY;\n                }\n                else {\n                    pageX = (this.parent.iframeSettings.enable) ? window.pageXOffset\n                        + this.parent.element.getBoundingClientRect().left + args.clientX : args.pageX;\n                    pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset + this.parent.element.getBoundingClientRect().top +\n                        this.parent.toolbarModule.getToolbarHeight() + args.clientY : args.pageY;\n                }\n                this.quickToolObj.tableQTBar.showPopup(pageX, pageY, target);\n                this.parent.formatter.editorManager.nodeSelection.restore();\n            }\n            else {\n                this.hideTableQuickToolbar();\n            }\n        }\n    };\n    Table.prototype.tableCellSelect = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n        var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n        Array.prototype.forEach.call(list, function (item) {\n            var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n            var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n            removeClassWithAttr([item], 'e-active');\n            if (parentIndex <= row && cellIndex <= col) {\n                addClass([item], 'e-active');\n            }\n        });\n        this.tblHeader.innerHTML = (col + 1) + 'x' + (row + 1);\n    };\n    Table.prototype.tableMouseUp = function () {\n        this.unwireTableSelectionEvents();\n        this.isTableMoveActive = false;\n    };\n    Table.prototype.tableMouseLeave = function () {\n        this.unwireTableSelectionEvents();\n        this.isTableMoveActive = false;\n        this.resetTableSelection();\n    };\n    // eslint-disable-next-line\n    Table.prototype.tableCellLeave = function (e) {\n        removeClassWithAttr(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n        addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n        this.tblHeader.innerHTML = 1 + 'x' + 1;\n    };\n    Table.prototype.tableCellClick = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n        this.self.tableInsert(row, col, e, this);\n    };\n    Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n        var proxy = (selectionObj.self) ? selectionObj.self : this;\n        var startContainer = selectionObj.selection.range.startContainer;\n        if (startContainer.nodeName === 'P' && startContainer.textContent.trim() === '' && !(startContainer.childNodes.length > 0)) {\n            startContainer.innerHTML = '<br />';\n        }\n        var parentNode = startContainer.parentNode;\n        if (proxy.parent.editorMode === 'HTML' &&\n            ((proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')) ||\n                // eslint-disable-next-line\n                (!proxy.parent.iframeSettings.enable && isNOU(closest(parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))))) {\n            proxy.contentModule.getEditPanel().focus();\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n            selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n        }\n        var value = {\n            rows: row, columns: col, width: {\n                minWidth: proxy.parent.tableSettings.minWidth,\n                maxWidth: proxy.parent.tableSettings.maxWidth,\n                width: proxy.parent.tableSettings.width\n            },\n            selection: selectionObj.selection\n        };\n        if (proxy.popupObj) {\n            var rows = Array.prototype.slice.call(e.target.parentElement.parentElement.children);\n            for (var i = 0; i < rows.length; i++) {\n                EventHandler.remove(rows[i], 'mouseleave', this.tableCellLeave);\n                var cells = Array.prototype.slice.call(rows[i].children);\n                for (var j = 0; j < cells.length; j++) {\n                    EventHandler.remove(cells[j], 'mousemove', this.tableCellSelect);\n                    EventHandler.remove(cells[j], 'mouseup', this.tableCellClick);\n                }\n            }\n            proxy.popupObj.hide();\n        }\n        if (proxy.editdlgObj) {\n            proxy.editdlgObj.hide();\n        }\n        var x = window.scrollX;\n        var y = window.scrollY;\n        proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n        proxy.contentModule.getEditPanel().focus();\n        window.scrollTo(x, y);\n        proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n        var selection = proxy.parent.formatter.editorManager.nodeSelection.get(proxy.contentModule.getDocument());\n        if (!isNullOrUndefined(selection) && !isNullOrUndefined(selection.anchorNode) &&\n            selection.anchorNode.nodeType === Node.ELEMENT_NODE && (selection.anchorNode.tagName === 'TD'\n            || selection.anchorNode.tagName === 'TH')) {\n            proxy.curTable = closest(selection.anchorNode, 'table');\n            proxy.activeCell = selection.anchorNode;\n        }\n    };\n    Table.prototype.cellSelect = function (e) {\n        var target = e.args.target;\n        var tdNode = closest(target, 'td,th');\n        target = (target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode)) ?\n            tdNode : target;\n        if (!isNOU(this.activeCell) && e.args.shiftKey && !isNOU(target) && !isNOU(target.tagName)\n            && (target.tagName === 'TD' || target.tagName === 'TH') && this.activeCell !== target) {\n            this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', { event: e.args, selectNode: [this.activeCell] });\n            e.args.preventDefault();\n            return;\n        }\n        if (!(this.parent.quickToolbarSettings.showOnRightClick && e.args.which === 3 &&\n            target.classList.contains(classes.CLS_TABLE_SEL))) {\n            if (this.isTableMoveActive) {\n                this.unwireTableSelectionEvents();\n                this.isTableMoveActive = false;\n            }\n            this.activeCell = null;\n            this.removeCellSelectClasses();\n            this.removeTableSelection();\n        }\n        if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n            addClass([target], classes.CLS_TABLE_SEL);\n            this.activeCell = target;\n            this.curTable = (this.curTable) ? this.curTable : closest(target, 'table');\n            this.wireTableSelectionEvents();\n            this.isTableMoveActive = true;\n            this.removeResizeElement();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n        }\n        if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) &&\n            closest(target, 'table').tagName === 'TABLE') {\n            this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n        }\n    };\n    Table.prototype.wireTableSelectionEvents = function () {\n        EventHandler.add(this.curTable, 'mousemove', this.tableMove, this);\n        EventHandler.add(this.curTable, 'mouseup', this.tableMouseUp, this);\n        EventHandler.add(this.curTable, 'mouseleave', this.tableMouseLeave, this);\n    };\n    Table.prototype.unwireTableSelectionEvents = function () {\n        EventHandler.remove(this.curTable, 'mousemove', this.tableMove);\n        EventHandler.remove(this.curTable, 'mouseup', this.tableMouseUp);\n        EventHandler.remove(this.curTable, 'mouseleave', this.tableMouseLeave);\n    };\n    Table.prototype.removeCellSelectClasses = function () {\n        removeClassWithAttr(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL_END);\n        removeClassWithAttr(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_MULTI_CELL);\n        removeClassWithAttr(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n    };\n    Table.prototype.tableMove = function (event) {\n        this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', { event: event, selectNode: [this.activeCell] });\n    };\n    Table.prototype.resizeHelper = function (e) {\n        if (this.parent.readonly) {\n            return;\n        }\n        if (this.isTableMoveActive) {\n            return;\n        }\n        if (e && e.buttons && e.buttons > 0) {\n            return;\n        }\n        var target = e.target || e.targetTouches[0].target;\n        var closestTable = closest(target, 'table.e-rte-table, table.e-rte-paste-table, table.e-rte-custom-table');\n        var isResizing = this.parent.contentModule.getEditPanel().querySelectorAll('.e-table-box.e-rbox-select, .e-table-rhelper.e-column-helper, .e-table-rhelper.e-row-helper').length > 0;\n        if (!isResizing && !isNOU(this.curTable) && !isNOU(closestTable) && closestTable !== this.curTable &&\n            this.parent.contentModule.getEditPanel().contains(closestTable)) {\n            this.removeResizeElement();\n            this.removeHelper(e);\n            this.cancelResizeAction();\n        }\n        if (!isResizing && (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH')) {\n            this.curTable = (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable))\n                && (target.nodeName === 'TD' || target.nodeName === 'TH') ?\n                closestTable : target;\n            this.removeResizeElement();\n            this.tableResizeEleCreation(this.curTable, e);\n        }\n    };\n    Table.prototype.tableResizeEleCreation = function (table, e) {\n        this.parent.preventDefaultResize(e);\n        var columns = this.calMaxCol(this.curTable);\n        var rows = [];\n        for (var i = 0; i < table.rows.length; i++) {\n            for (var j = 0; j < table.rows[i].cells.length; j++) {\n                if (!table.rows[i].cells[j].hasAttribute('rowspan')) {\n                    rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, table.rows[i].cells.length)[j]);\n                    break;\n                }\n            }\n        }\n        var height = parseInt(getComputedStyle(table).height, 10);\n        var width = parseInt(getComputedStyle(table).width, 10);\n        var pos = this.calcPos(table);\n        for (var i = 0; columns.length >= i; i++) {\n            var colReEle = this.parent.createElement('span', {\n                attrs: {\n                    'data-col': (i).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            colReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_COL_RES);\n            if (columns.length === i) {\n                colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top +\n                    'px; left:' + ((columns[i - 1].classList.contains('e-multi-cells-select') ? 0 : pos.left) + this.calcPos(columns[i - 1]).left + columns[i - 1].offsetWidth - 2) + 'px;';\n            }\n            else {\n                colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top +\n                    'px; left:' + ((columns[i].classList.contains('e-multi-cells-select') ? 0 : pos.left) + this.calcPos(columns[i]).left - 2) + 'px;';\n            }\n            this.contentModule.getEditPanel().appendChild(colReEle);\n        }\n        for (var i = 0; rows.length > i; i++) {\n            var rowReEle = this.parent.createElement('span', {\n                attrs: {\n                    'data-row': (i).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            rowReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_ROW_RES);\n            var rowPosLeft = !isNOU(table.getAttribute('cellspacing')) || table.getAttribute('cellspacing') !== '' ?\n                0 : this.calcPos(rows[i]).left;\n            rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' +\n                (this.calcPos(rows[i]).top + (rows[i].classList.contains('e-multi-cells-select') ? 0 : pos.top) + rows[i].offsetHeight - 2) +\n                'px; left:' + (rowPosLeft + pos.left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(rowReEle);\n        }\n        var tableReBox = this.parent.createElement('span', {\n            className: classes.CLS_TB_BOX_RES + this.parent.getCssClass(true), attrs: {\n                'data-col': columns.length.toString(), 'unselectable': 'on', 'contenteditable': 'false'\n            }\n        });\n        tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) +\n            'px; left:' + (pos.left + width - 4) + 'px;';\n        if (Browser.isDevice) {\n            tableReBox.classList.add('e-rmob');\n        }\n        this.contentModule.getEditPanel().appendChild(tableReBox);\n    };\n    Table.prototype.removeResizeElement = function () {\n        var item = this.parent.contentModule.getEditPanel().\n            querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box');\n        if (item.length > 0) {\n            for (var i = 0; i < item.length; i++) {\n                detach(item[i]);\n            }\n        }\n    };\n    Table.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        var isNestedTable = false;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n            offsetParent = closest(offsetParent, '.e-rte-content');\n            isNestedTable = true;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        if (isNestedTable) {\n            isNestedTable = false;\n            var topValue = this.parent.inputElement && this.parent.inputElement.scrollTop > 0 ?\n                (this.parent.inputElement.scrollTop + offset.top) - parentOffset.top : offset.top - parentOffset.top;\n            var leftValue = this.parent.inputElement && this.parent.inputElement.scrollLeft > 0 ?\n                (this.parent.inputElement.scrollLeft + offset.left) - parentOffset.left : offset.left - parentOffset.left;\n            return {\n                top: topValue,\n                left: leftValue\n            };\n        }\n        else {\n            return {\n                top: elem.offsetTop,\n                left: elem.offsetLeft\n            };\n        }\n    };\n    Table.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Table.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Table.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (this.parent.readonly) {\n            return;\n        }\n        if (Browser.isDevice) {\n            this.resizeHelper(e);\n        }\n        var target = e.target;\n        if (target.classList.contains(classes.CLS_TB_COL_RES) ||\n            target.classList.contains(classes.CLS_TB_ROW_RES) ||\n            target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            this.resetResizeHelper(this.curTable);\n            e.preventDefault();\n            this.parent.preventDefaultResize(e);\n            removeClassWithAttr(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n            this.removeTableSelection();\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            this.resizeBtnInit();\n            this.hideTableQuickToolbar();\n            if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n                this.resizeBtnStat.column = true;\n                if (parseInt(target.getAttribute('data-col'), 10) === this.calMaxCol(this.curTable).length) {\n                    this.currentColumnResize = 'last';\n                    this.colIndex = parseInt(target.getAttribute('data-col'), 10) - 1;\n                    this.columnEle = this.calMaxCol(this.curTable)[this.colIndex];\n                }\n                else {\n                    if (parseInt(target.getAttribute('data-col'), 10) === 0) {\n                        this.currentColumnResize = 'first';\n                    }\n                    else {\n                        this.currentColumnResize = 'middle';\n                        var cellColl = this.curTable.rows[0].cells;\n                        var cellCount = 0;\n                        for (var cell = 0; cell < cellColl.length; cell++) {\n                            cellCount = cellCount + cellColl[cell].colSpan;\n                        }\n                        var sizes = new Array(cellCount);\n                        var colGroupEle = createElement('colgroup');\n                        var rowSpanCells = new Map();\n                        for (var i = 0; i < this.curTable.rows.length; i++) {\n                            var currentColIndex = 0;\n                            for (var k = 0; k < this.curTable.rows[i].cells.length; k++) {\n                                for (var l = 1; l < this.curTable.rows[i].cells[k].rowSpan; l++) {\n                                    var key = \"\" + (i + l) + currentColIndex;\n                                    rowSpanCells.set(key, this.curTable.rows[i].cells[k]);\n                                }\n                                var cellIndex = this.getCellIndex(rowSpanCells, i, k);\n                                if (cellIndex > currentColIndex) {\n                                    currentColIndex = cellIndex;\n                                }\n                                var width = this.curTable.rows[i].cells[k].offsetWidth;\n                                if (!sizes[currentColIndex] || width < sizes[currentColIndex]) {\n                                    sizes[currentColIndex] = width;\n                                }\n                                currentColIndex += 1 + this.curTable.rows[i].cells[k].colSpan - 1;\n                            }\n                        }\n                        for (var size = 0; size < sizes.length; size++) {\n                            var cell = createElement('col');\n                            cell.appendChild(createElement('br'));\n                            cell.style.width = this.convertPixelToPercentage(sizes[size], parseInt(getComputedStyle(this.curTable).width, 10)) + '%';\n                            colGroupEle.appendChild(cell);\n                        }\n                        this.curTable.insertBefore(colGroupEle, this.curTable.firstChild);\n                        for (var i = 0; i < this.curTable.rows.length; i++) {\n                            for (var k = 0; k < this.curTable.rows[i].cells.length; k++) {\n                                this.curTable.rows[i].cells[k].style.width = '';\n                            }\n                        }\n                    }\n                    this.colIndex = parseInt(target.getAttribute('data-col'), 10);\n                    this.columnEle = this.calMaxCol(this.curTable)[this.colIndex];\n                }\n                this.moveEle = e.target;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n                this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n                this.resizeBtnStat.row = true;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n                this.resizeBtnStat.tableBox = true;\n            }\n            if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n                this.helper.classList.add('e-reicon');\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = { event: e, requestType: 'Table' };\n                this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n                    if (resizeStartArgs.cancel) {\n                        _this.cancelResizeAction();\n                    }\n                });\n            }\n            if (this.isResizeBind) {\n                EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n                EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n                this.isResizeBind = false;\n            }\n        }\n    };\n    Table.prototype.getCellIndex = function (rowSpanCells, rowIndex, colIndex) {\n        var cellKey = \"\" + rowIndex + colIndex;\n        var spannedCell = rowSpanCells.get(cellKey);\n        if (spannedCell) {\n            return this.getCellIndex(rowSpanCells, rowIndex, colIndex + spannedCell.colSpan);\n        }\n        else {\n            return colIndex;\n        }\n    };\n    Table.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains('e-reicon')) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n            this.pageX = null;\n            this.helper = null;\n        }\n    };\n    Table.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: 'e-table-rhelper' + this.parent.getCssClass(true)\n        });\n        if (Browser.isDevice) {\n            this.helper.classList.add('e-reicon');\n        }\n        this.contentModule.getEditPanel().appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Table.prototype.setHelperHeight = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            this.helper.classList.add('e-column-helper');\n            this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' +\n                pos.top + 'px; left:' + ((pos.left + this.calcPos(this.columnEle).left) +\n                (this.currentColumnResize === 'last' ? this.columnEle.offsetWidth : 0) - 1) + 'px;';\n        }\n        else {\n            this.helper.classList.add('e-row-helper');\n            this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' +\n                (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight - 1) +\n                'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n        }\n    };\n    Table.prototype.updateHelper = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            var left = (pos.left + this.calcPos(this.columnEle).left) +\n                (this.currentColumnResize === 'last' ? this.columnEle.offsetWidth : 0) - 1;\n            this.helper.style.left = left + 'px';\n            this.helper.style.height = this.curTable.offsetHeight + 'px';\n        }\n        else {\n            var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight - 1;\n            this.helper.style.top = top_1 + 'px';\n        }\n    };\n    Table.prototype.calMaxCol = function (curTable) {\n        var cellColl = curTable.rows[0].cells;\n        var cellCount = 0;\n        for (var cell = 0; cell < cellColl.length; cell++) {\n            cellCount = cellCount + cellColl[cell].colSpan;\n        }\n        var cells = new Array(cellCount);\n        var rowSpanCells = new Map();\n        for (var i = 0; i < curTable.rows.length; i++) {\n            var currentColIndex = 0;\n            for (var k = 0; k < curTable.rows[i].cells.length; k++) {\n                for (var l = 1; l < curTable.rows[i].cells[k].rowSpan; l++) {\n                    var key = \"\" + (i + l) + currentColIndex;\n                    rowSpanCells.set(key, curTable.rows[i].cells[k]);\n                }\n                var cellIndex = this.getCellIndex(rowSpanCells, i, k);\n                if (cellIndex > currentColIndex) {\n                    currentColIndex = cellIndex;\n                }\n                var width = curTable.rows[i].cells[k].offsetWidth;\n                if (!cells[currentColIndex] || width < cells[currentColIndex].offsetWidth) {\n                    cells[currentColIndex] = curTable.rows[i].cells[k];\n                }\n                currentColIndex += 1 + curTable.rows[i].cells[k].colSpan - 1;\n            }\n        }\n        return cells;\n    };\n    Table.prototype.resizing = function (e) {\n        var _this = this;\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.parent.enableRtl) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.parent.enableRtl) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        this.pageX = pageX;\n        this.pageY = pageY;\n        var maxiumWidth;\n        var currentTdElement = this.curTable.closest('td');\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.onResize, args, function (resizingArgs) {\n            if (resizingArgs.cancel) {\n                _this.cancelResizeAction();\n            }\n            else {\n                var tableReBox = _this.contentModule.getEditPanel().querySelector('.e-table-box');\n                var tableWidth = parseInt(getComputedStyle(_this.curTable).width, 10);\n                var tableHeight = !isNaN(parseInt(_this.curTable.style.height, 10)) ?\n                    parseInt(_this.curTable.style.height, 10) : parseInt(getComputedStyle(_this.curTable).height, 10);\n                var paddingSize = +getComputedStyle(_this.contentModule.getEditPanel()).paddingRight.match(/\\d/g).join('');\n                var rteWidth = _this.contentModule.getEditPanel().offsetWidth -\n                    (_this.contentModule.getEditPanel().offsetWidth -\n                        _this.contentModule.getEditPanel().clientWidth) - paddingSize * 2;\n                var widthCompare = void 0;\n                if (!isNOU(_this.curTable.parentElement.closest('table')) && !isNOU(_this.curTable.closest('td')) &&\n                    _this.contentModule.getEditPanel().contains(_this.curTable.closest('td'))) {\n                    var currentTd = _this.curTable.closest('td');\n                    var currentTDPad = +getComputedStyle(currentTd).paddingRight.match(/\\d/g).join('');\n                    // Padding of the current table with the parent element multiply with 2.\n                    widthCompare = currentTd.offsetWidth - (currentTd.offsetWidth - currentTd.clientWidth) - currentTDPad * 2;\n                }\n                else {\n                    widthCompare = rteWidth;\n                }\n                if (_this.resizeBtnStat.column) {\n                    if (_this.curTable.closest('li')) {\n                        widthCompare = _this.curTable.closest('li').offsetWidth;\n                    }\n                    var colGroup = _this.curTable.querySelectorAll('colgroup > col');\n                    var currentTableWidth = void 0;\n                    if (_this.curTable.style.width !== '' && _this.curTable.style.width.includes('%')) {\n                        currentTableWidth = parseFloat(_this.curTable.style.width.split('%')[0]);\n                    }\n                    else {\n                        currentTableWidth = _this.getCurrentTableWidth(_this.curTable.offsetWidth, _this.parent.inputElement.offsetWidth);\n                    }\n                    var currentCol = _this.calMaxCol(_this.curTable)[_this.colIndex];\n                    var currentColResizableWidth = _this.getCurrentColWidth(currentCol, tableWidth);\n                    if (_this.currentColumnResize === 'first') {\n                        mouseX = mouseX - 0.75; //This was done for to make the gripper and the table first/last column will be close.\n                        _this.removeResizeElement();\n                        if (currentTdElement) {\n                            maxiumWidth = _this.curTable.getBoundingClientRect().right - _this.calcPos(currentTdElement).left;\n                            _this.curTable.style.maxWidth = maxiumWidth + 'px';\n                        }\n                        // Below the value '100' is the 100% width of the parent element.\n                        if (((mouseX !== 0 && 5 < currentColResizableWidth) || mouseX < 0) && currentTableWidth <= 100 &&\n                            _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) <= 100) {\n                            var firstColumnsCell = _this.findFirstLastColCells(_this.curTable, true);\n                            _this.curTable.style.width = _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) > 100 ? (100 + '%') :\n                                (_this.convertPixelToPercentage(tableWidth - mouseX, widthCompare) + '%');\n                            var differenceWidth = currentTableWidth - _this.convertPixelToPercentage(tableWidth - mouseX, widthCompare);\n                            var preMarginLeft = 0;\n                            var widthType = _this.curTable.style.width.indexOf('%') > -1;\n                            if (!widthType && _this.curTable.offsetWidth > _this.contentModule.getEditPanel().offsetWidth) {\n                                _this.curTable.style.width = rteWidth + 'px';\n                                return;\n                            }\n                            if (widthType && parseFloat(_this.curTable.style.width.split('%')[0]) > 100) {\n                                _this.curTable.style.width = '100%';\n                                return;\n                            }\n                            if (!isNOU(_this.curTable.style.marginLeft) && _this.curTable.style.marginLeft !== '') {\n                                var regex = /[-+]?\\d*\\.\\d+|\\d+/;\n                                var value = _this.curTable.style.marginLeft.match(regex);\n                                if (!isNOU(value)) {\n                                    preMarginLeft = parseFloat(value[0]);\n                                }\n                            }\n                            var currentMarginLeft = preMarginLeft + differenceWidth;\n                            if (currentMarginLeft && currentMarginLeft > 100) {\n                                var width = parseFloat(_this.curTable.style.width);\n                                currentMarginLeft = 100 - width;\n                            }\n                            // For table pasted from word, Margin left can be anything so we are avoiding the below process.\n                            if (!_this.curTable.classList.contains('e-rte-paste-table') && currentMarginLeft && currentMarginLeft < 1) {\n                                _this.curTable.style.marginLeft = null;\n                                _this.curTable.style.width = '100%';\n                                return;\n                            }\n                            _this.curTable.style.marginLeft = 'calc(' + (_this.curTable.style.width === '100%' ? 0 : currentMarginLeft) + '%)';\n                            for (var i = 0; i < firstColumnsCell.length; i++) {\n                                var currentColumnCellWidth = _this.getCurrentColWidth(firstColumnsCell[i], tableWidth);\n                                firstColumnsCell[i].style.width = (currentColumnCellWidth - differenceWidth) + '%';\n                            }\n                        }\n                    }\n                    else if (_this.currentColumnResize === 'last') {\n                        mouseX = mouseX + 0.75; //This was done for to make the gripper and the table first/last column will be close.\n                        _this.removeResizeElement();\n                        if (currentTdElement) {\n                            maxiumWidth = currentTdElement.getBoundingClientRect().right - _this.curTable.getBoundingClientRect().left;\n                            _this.curTable.style.maxWidth = maxiumWidth + 'px';\n                        }\n                        // Below the value '100' is the 100% width of the parent element.\n                        if (((mouseX !== 0 && 5 < currentColResizableWidth) || mouseX > 0) &&\n                            currentTableWidth <= 100 && _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) <= 100) {\n                            var lastColumnsCell = _this.findFirstLastColCells(_this.curTable, false);\n                            _this.curTable.style.width = _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) > 100 ? (100 + '%') : (_this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) + '%');\n                            var differenceWidth = currentTableWidth - _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare);\n                            for (var i = 0; i < lastColumnsCell.length; i++) {\n                                var currentColumnCellWidth = _this.getCurrentColWidth(lastColumnsCell[i], tableWidth);\n                                lastColumnsCell[i].style.width = (currentColumnCellWidth - differenceWidth) + '%';\n                            }\n                        }\n                    }\n                    else {\n                        var actualwid = colGroup[_this.colIndex].offsetWidth - mouseX;\n                        // eslint-disable-next-line\n                        var totalwid = colGroup[_this.colIndex].offsetWidth + colGroup[_this.colIndex - 1].offsetWidth;\n                        if ((totalwid - actualwid) > 20 && actualwid > 20) {\n                            var leftColumnWidth = totalwid - actualwid;\n                            var rightColWidth = actualwid;\n                            colGroup[_this.colIndex - 1].style.width = _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n                            colGroup[_this.colIndex].style.width = _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n                        }\n                    }\n                    _this.updateHelper();\n                }\n                else if (_this.resizeBtnStat.row) {\n                    _this.parent.preventDefaultResize(e);\n                    var tableTrElementPixel = [];\n                    var currentTableTrElement = _this.curTable.querySelectorAll('tr');\n                    for (var i = 0; i < currentTableTrElement.length; i++) {\n                        if (_this.rowEle !== currentTableTrElement[i]) {\n                            tableTrElementPixel[i] = (parseFloat(currentTableTrElement[i].clientHeight.toString()));\n                        }\n                    }\n                    _this.curTable.style.height = (parseFloat(_this.curTable.clientHeight.toString()) + ((mouseY > 0) ? 0 : mouseY)) + 'px';\n                    for (var i = 0; i < currentTableTrElement.length; i++) {\n                        if (_this.rowEle === currentTableTrElement[i]) {\n                            currentTableTrElement[i].style.height = (parseFloat(currentTableTrElement[i].clientHeight.toString()) + mouseY) + 'px';\n                        }\n                        else {\n                            currentTableTrElement[i].style.height = tableTrElementPixel[i] + 'px';\n                        }\n                    }\n                    if (!isNOU(tableReBox)) {\n                        tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) +\n                            'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n                    }\n                    _this.updateHelper();\n                }\n                else if (_this.resizeBtnStat.tableBox) {\n                    if (currentTdElement) {\n                        var tableBoxPosition = _this.curTable.getBoundingClientRect().left\n                            - currentTdElement.getBoundingClientRect().left;\n                        maxiumWidth = Math.abs(tableBoxPosition - currentTdElement.getBoundingClientRect().width) - 5;\n                        _this.curTable.style.maxWidth = maxiumWidth + 'px';\n                    }\n                    _this.curTable.style.height = tableHeight + mouseY + 'px';\n                    if (!isNOU(tableReBox)) {\n                        tableReBox.classList.add('e-rbox-select');\n                        tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + parseInt(getComputedStyle(_this.curTable).height, 10) - 4) +\n                            'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n                    }\n                    if (_this.curTable.closest('li')) {\n                        widthCompare = _this.curTable.closest('li').offsetWidth;\n                    }\n                    var widthType = _this.curTable.style.width.indexOf('%') > -1;\n                    if (widthType && parseFloat(_this.curTable.style.width.split('%')[0]) > 100) {\n                        _this.curTable.style.width = '100%';\n                        return;\n                    }\n                    if (!widthType && _this.curTable.offsetWidth > _this.contentModule.getEditPanel().offsetWidth) {\n                        _this.curTable.style.width = rteWidth + 'px';\n                        return;\n                    }\n                    _this.curTable.style.width = widthType ? _this.convertPixelToPercentage(tableWidth + mouseX, widthCompare) + '%'\n                        : tableWidth + mouseX + 'px';\n                }\n            }\n        });\n    };\n    Table.prototype.getCurrentColWidth = function (col, tableWidth) {\n        var currentColWidth = 0;\n        if (col.style.width !== '' && col.style.width.includes('%')) {\n            currentColWidth = parseFloat(col.style.width.split('%')[0]);\n        }\n        else {\n            currentColWidth = this.convertPixelToPercentage(col.offsetWidth, tableWidth);\n        }\n        return currentColWidth;\n    };\n    Table.prototype.getCurrentTableWidth = function (tableWidth, parentWidth) {\n        var currentTableWidth = 0;\n        currentTableWidth = tableWidth / parentWidth * 100;\n        return currentTableWidth;\n    };\n    Table.prototype.findFirstLastColCells = function (table, isFirst) {\n        var resultColumns = [];\n        var rows = table.rows;\n        var rowSpanCellIndexs = [];\n        var _loop_1 = function (i) {\n            var cellIndex = isFirst ? 0 : rows[i].cells.length - 1;\n            var column = rows[i].cells[cellIndex];\n            for (var rowSpan = 1; rowSpan < column.rowSpan; rowSpan++) {\n                var key = i + rowSpan + \"-\" + cellIndex;\n                rowSpanCellIndexs.push(key);\n            }\n            var spannedCellKey = i + \"-\" + cellIndex;\n            if (rowSpanCellIndexs.length === 0 || (isFirst && rowSpanCellIndexs.indexOf(spannedCellKey) === -1) || (!isFirst && rowSpanCellIndexs.indexOf(spannedCellKey) === -1 && rowSpanCellIndexs.every(function (key) { return key.split('-')[0] !== i.toString(); }))) {\n                resultColumns.push(column);\n            }\n        };\n        for (var i = 0; i < rows.length; i++) {\n            _loop_1(i);\n        }\n        return resultColumns;\n    };\n    Table.prototype.convertPixelToPercentage = function (value, offsetValue) {\n        return (value / offsetValue) * 100;\n    };\n    Table.prototype.cancelResizeAction = function () {\n        this.isResizeBind = true;\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        this.removeResizeElement();\n    };\n    Table.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        this.isResizeBind = true;\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.contentModule.getEditPanel().querySelector('.e-table-box') &&\n            this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n            this.removeResizeElement();\n        }\n        if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n            detach(this.helper);\n            this.helper = null;\n        }\n        this.resetResizeHelper(this.curTable);\n        this.pageX = null;\n        this.pageY = null;\n        this.moveEle = null;\n        var currentTableTrElement = this.curTable.querySelectorAll('tr');\n        var tableTrPercentage = [];\n        for (var i = 0; i < currentTableTrElement.length; i++) {\n            var percentage = (parseFloat(currentTableTrElement[i].clientHeight.toString())\n                / parseFloat(this.curTable.clientHeight.toString())) * 100;\n            tableTrPercentage[i] = percentage;\n        }\n        for (var i = 0; i < currentTableTrElement.length; i++) {\n            if (currentTableTrElement[i].parentElement.nodeName === 'THEAD') {\n                currentTableTrElement[i].parentElement.style.height = tableTrPercentage[i] + '%';\n                currentTableTrElement[i].style.height = tableTrPercentage[i] + '%';\n            }\n            else {\n                currentTableTrElement[i].style.height = tableTrPercentage[i] + '%';\n            }\n        }\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.resizeStop, args);\n        this.parent.formatter.saveData();\n        this.resizeEndTime = new Date().getTime();\n    };\n    Table.prototype.resetResizeHelper = function (curTable) {\n        var colHelper = this.parent.element.querySelectorAll('.e-table-rhelper.e-column-helper');\n        Array.from(colHelper).forEach(function (element) {\n            if (element.parentNode) {\n                element.parentNode.removeChild(element);\n            }\n        });\n        var rowHelper = this.parent.element.querySelectorAll('.e-table-rhelper.e-row-helper');\n        Array.from(rowHelper).forEach(function (element) {\n            if (element.parentNode) {\n                element.parentNode.removeChild(element);\n            }\n        });\n        if (!curTable.style.width) {\n            curTable.style.width = curTable.offsetWidth + 'px';\n        }\n        var colGroup = curTable.querySelector('colgroup');\n        if (colGroup) {\n            for (var i = 0; i < curTable.rows.length; i++) {\n                for (var k = 0; k < curTable.rows[i].cells.length; k++) {\n                    var width = this.convertPixelToPercentage(curTable.rows[i].cells[k].offsetWidth, parseInt(getComputedStyle(curTable).width, 10)) + '%';\n                    curTable.rows[i].cells[k].style.width = width;\n                }\n            }\n            curTable.removeChild(colGroup);\n        }\n    };\n    Table.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { column: false, row: false, tableBox: false };\n    };\n    Table.prototype.addRow = function (selectCell, e, tabkey) {\n        var cmd;\n        if (tabkey) {\n            cmd = {\n                item: { command: 'Table', subCommand: 'InsertRowAfter' }\n            };\n        }\n        var value = {\n            selection: selectCell,\n            subCommand: (tabkey) ? cmd.item.subCommand : e.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (tabkey) ? cmd : e, e, value);\n    };\n    Table.prototype.addColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, width: this.parent.tableSettings.width, subCommand: e.item.subCommand });\n    };\n    Table.prototype.removeRowColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.removeTable = function (selection, args, delKey) {\n        var cmd;\n        if (delKey) {\n            cmd = { item: { command: 'Table', subCommand: 'TableRemove' } };\n        }\n        var value = {\n            selection: selection,\n            subCommand: (delKey) ? cmd.item.subCommand : args.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (delKey) ? cmd : args, args.originalEvent, value);\n        this.contentModule.getEditPanel().focus();\n        if (this.parent.inputElement.innerHTML === null || this.parent.inputElement.innerHTML === '') {\n            if (this.parent.enterKey === 'DIV') {\n                this.contentModule.getEditPanel().innerHTML = '<div><br/></div>';\n            }\n            else if (this.parent.enterKey === 'BR') {\n                this.contentModule.getEditPanel().innerHTML = '<br/>';\n            }\n            else {\n                this.contentModule.getEditPanel().innerHTML = '<p><br/></p>';\n            }\n        }\n        this.removeResizeElement();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.renderDlgContent = function (args) {\n        var _this = this;\n        var argsTarget = args.args.originalEvent.target;\n        if (Browser.isDevice || this.parent.inlineMode.enable || !isNullOrUndefined(closest(argsTarget, '.e-rte-text-popup'))) {\n            this.insertTableDialog(args);\n            return;\n        }\n        if (this.popupObj) {\n            this.popupObj.hide();\n            return;\n        }\n        this.hideTableQuickToolbar();\n        var header = '1X1';\n        var insertbtn = this.l10n.getConstant('inserttablebtn');\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-rte-table-popup' + this.parent.getCssClass(true), id: this.rteID + '_table' });\n        this.tblHeader = this.parent.createElement('div', { className: 'e-rte-popup-header' + this.parent.getCssClass(true) });\n        this.tblHeader.innerHTML = header;\n        this.dlgDiv.appendChild(this.tblHeader);\n        var tableDiv = this.parent.createElement('div', { className: 'e-rte-table-span' + this.parent.getCssClass(true) });\n        this.drawTable(tableDiv, args);\n        this.dlgDiv.appendChild(tableDiv);\n        this.dlgDiv.appendChild(this.parent.createElement('span', { className: 'e-span-border' + this.parent.getCssClass(true) }));\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-insert-table-btn' + this.parent.getCssClass(true), id: this.rteID + '_insertTable',\n            attrs: { type: 'button', tabindex: '0' }\n        });\n        if (!isNOU(this.parent.getToolbarElement().querySelector('.e-expended-nav'))) {\n            this.parent.getToolbarElement().querySelector('.e-expended-nav').setAttribute('tabindex', '1');\n        }\n        this.dlgDiv.appendChild(btnEle);\n        this.createTableButton = new Button({\n            iconCss: 'e-icons e-create-table', content: insertbtn, cssClass: 'e-flat' + this.parent.getCssClass(true),\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.createTableButton.isStringTemplate = true;\n        this.createTableButton.appendTo(btnEle);\n        EventHandler.add(btnEle, 'click', this.insertTableDialog, { self: this, args: args.args, selection: args.selection });\n        this.parent.getToolbar().parentElement.appendChild(this.dlgDiv);\n        var target = args.args.originalEvent.target;\n        target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n        this.popupObj = new Popup(this.dlgDiv, {\n            targetType: 'relative',\n            relateTo: target,\n            collision: { X: 'fit', Y: 'none' },\n            offsetY: 8,\n            viewPortElement: this.parent.element,\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            // eslint-disable-next-line\n            close: function (event) {\n                EventHandler.remove(btnEle, 'click', _this.insertTableDialog);\n                detach(btnEle);\n                if (_this.createTableButton && !_this.createTableButton.isDestroyed) {\n                    _this.createTableButton.destroy();\n                    _this.createTableButton.element = null;\n                    _this.createTableButton = null;\n                }\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n                _this.popupObj = null;\n            }\n        });\n        addClass([this.popupObj.element], 'e-popup-open');\n        if (!isNOU(this.parent.cssClass)) {\n            addClass([this.popupObj.element], this.parent.getCssClass());\n        }\n        btnEle.focus();\n        this.popupObj.refreshPosition(target);\n    };\n    Table.prototype.onIframeMouseDown = function () {\n        if (this.popupObj) {\n            this.popupObj.hide();\n        }\n        if (this.parent.inlineMode.enable && this.editdlgObj) {\n            this.editdlgObj.hide();\n        }\n        if (!isNOU(this.parent) && !isNOU(this.parent.contentModule) && !isNOU(this.parent.contentModule.getEditPanel())) {\n            this.removeResizeElement();\n        }\n    };\n    Table.prototype.docClick = function (e) {\n        var target = e.args.target;\n        // eslint-disable-next-line\n        if (target && target.classList && ((this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']') ||\n            (this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)))) && !target.classList.contains('e-create-table') &&\n            target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n            if (this.popupObj) {\n                this.popupObj.hide();\n            }\n            if (this.editdlgObj) {\n                this.parent.notify(events.documentClickClosedBy, { closedBy: 'outside click' });\n                this.editdlgObj.hide();\n            }\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        var closestEle = closest(target, 'td');\n        var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n        if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist &&\n            closest(target, '.e-rte-quick-popup') === null && target.offsetParent &&\n            !target.offsetParent.classList.contains('e-quick-dropdown') &&\n            !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup')\n            && !closest(target, '.e-rte-elements')) {\n            var isToolbarClick = target && target.closest('.e-toolbar') ? true : false;\n            if (!isToolbarClick) {\n                this.removeCellSelectClasses();\n            }\n            this.removeTableSelection();\n            if (!Browser.isIE) {\n                this.hideTableQuickToolbar();\n            }\n        }\n        if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) &&\n            !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            this.removeResizeElement();\n        }\n    };\n    Table.prototype.drawTable = function (tableDiv, args) {\n        var rowDiv;\n        var tableCell;\n        for (var row = 0; row < 3; row++) {\n            rowDiv = this.parent.createElement('div', { className: 'e-rte-table-row' + this.parent.getCssClass(true), attrs: { 'data-column': '' + row } });\n            EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n            for (var col = 0; col < 10; col++) {\n                tableCell = this.parent.createElement('div', { className: 'e-rte-tablecell e-default' + this.parent.getCssClass(true), attrs: { 'data-cell': '' + col } });\n                rowDiv.appendChild(tableCell);\n                tableCell.style.display = 'inline-block';\n                if (col === 0 && row === 0) {\n                    addClass([tableCell], 'e-active');\n                }\n                EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n                EventHandler.add(tableCell, 'mouseup', this.tableCellClick, { self: this, args: args.args, selection: args.selection });\n            }\n            tableDiv.appendChild(rowDiv);\n        }\n    };\n    Table.prototype.editTable = function (args) {\n        var _this = this;\n        this.createDialog(args);\n        var editContent = this.tableDlgContent(args);\n        var update = this.l10n.getConstant('dialogUpdate');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var editHeader = this.l10n.getConstant('tableEditHeader');\n        this.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: editContent, header: editHeader,\n            buttons: [{\n                    click: this.applyProperties.bind(this, args),\n                    buttonModel: { content: update, cssClass: 'e-flat e-size-update' + this.parent.getCssClass(true), isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel' + this.parent.getCssClass(true), content: cancel }\n                }],\n            cssClass: this.editdlgObj.cssClass + ' e-rte-edit-table-prop-dialog'\n        });\n        this.editdlgObj.element.style.maxHeight = 'none';\n        this.editdlgObj.content.querySelector('input').focus();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.insertTableDialog = function (args) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        proxy.createDialog(args);\n        var dlgContent = proxy.tableCellDlgContent();\n        var insert = proxy.l10n.getConstant('dialogInsert');\n        var cancel = proxy.l10n.getConstant('dialogCancel');\n        if (isNullOrUndefined(proxy.editdlgObj)) {\n            return;\n        }\n        proxy.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: dlgContent,\n            buttons: [{\n                    click: proxy.customTable.bind(this, args),\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table' + ' ' + proxy.parent.cssClass, isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        proxy.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel' + ' ' + proxy.parent.cssClass, content: cancel }\n                }]\n        });\n        if (!isNOU(proxy.parent.cssClass)) {\n            proxy.editdlgObj.setProperties({ cssClass: proxy.parent.cssClass });\n        }\n        proxy.editdlgObj.element.style.maxHeight = 'none';\n        proxy.editdlgObj.content.querySelector('input').focus();\n    };\n    Table.prototype.tableCellDlgContent = function () {\n        var tableColumn = this.l10n.getConstant('columns');\n        var tableRow = this.l10n.getConstant('rows');\n        var tableWrap = this.parent.createElement('div', { className: 'e-cell-wrap' + this.parent.getCssClass(true) });\n        var content = '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" '\n            + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column' + this.parent.getCssClass(true) + '\"/></div>'\n            + '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row' + this.parent.getCssClass(true) + '\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        this.columnTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableColumn,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n            cssClass: this.parent.getCssClass()\n        });\n        this.columnTextBox.isStringTemplate = true;\n        this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n        this.rowTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableRow,\n            floatLabelType: 'Auto',\n            max: 1000,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale,\n            cssClass: this.parent.getCssClass()\n        });\n        this.rowTextBox.isStringTemplate = true;\n        this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n        return tableWrap;\n    };\n    Table.prototype.clearDialogObj = function () {\n        if (this.editdlgObj) {\n            this.editdlgObj.destroy();\n            detach(this.editdlgObj.element);\n            this.editdlgObj = null;\n        }\n    };\n    // eslint-disable-next-line\n    Table.prototype.createDialog = function (args) {\n        var _this = this;\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n            return;\n        }\n        var tableDialog = this.parent.createElement('div', {\n            className: 'e-rte-edit-table' + this.parent.getCssClass(true), id: this.rteID + '_tabledialog'\n        });\n        this.parent.rootContainer.appendChild(tableDialog);\n        var insert = this.l10n.getConstant('dialogInsert');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var header = this.l10n.getConstant('tabledialogHeader');\n        var dialogModel = {\n            header: header,\n            cssClass: classes.CLS_RTE_ELEMENTS + this.parent.getCssClass(true),\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px', height: 'initial',\n            position: { X: 'center', Y: (Browser.isDevice) ? 'center' : 'top' },\n            isModal: Browser.isDevice,\n            buttons: [{\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table' + this.parent.getCssClass(true), isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel' + this.parent.getCssClass(true), content: cancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.editdlgObj.destroy();\n                detach(_this.editdlgObj.element);\n                _this.dialogRenderObj.close(event);\n                _this.editdlgObj = null;\n            }\n        };\n        this.editdlgObj = this.dialogRenderObj.render(dialogModel);\n        this.editdlgObj.appendTo(tableDialog);\n        if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n            this.quickToolObj.inlineQTBar.hidePopup();\n        }\n        if (this.quickToolObj && this.quickToolObj.textQTBar &&\n            this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)) {\n            this.quickToolObj.textQTBar.hidePopup();\n        }\n    };\n    Table.prototype.customTable = function (args, e) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy && proxy.rowTextBox && proxy.rowTextBox.value && proxy.columnTextBox && proxy.columnTextBox.value) {\n            var argument = ((Browser.isDevice || (!isNullOrUndefined(args.args)\n                && !isNullOrUndefined(args.args.originalEvent) &&\n                args.args.originalEvent.action === 'insert-table')\n                || proxy.parent.inlineMode.enable ||\n                ((!isNullOrUndefined(proxy.parent.quickToolbarSettings.text)) && !(args instanceof PointerEvent))) ? args :\n                this);\n            proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n        }\n    };\n    // eslint-disable-next-line\n    Table.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    // eslint-disable-next-line\n    Table.prototype.applyProperties = function (args, e) {\n        var dialogEle = this.editdlgObj.element;\n        var table = closest(args.selectNode[0], 'table');\n        table.style.width = dialogEle.querySelector('.e-table-width') ? dialogEle.querySelector('.e-table-width').value + 'px'\n            : table.style.width;\n        if (dialogEle.querySelector('.e-cell-padding') && dialogEle.querySelector('.e-cell-padding').value !== '') {\n            var tdElm = table.querySelectorAll('td');\n            for (var i = 0; i < tdElm.length; i++) {\n                var padVal = '';\n                if (tdElm[i].style.padding === '') {\n                    padVal = tdElm[i].getAttribute('style') + ' padding:' +\n                        dialogEle.querySelector('.e-cell-padding').value + 'px;';\n                }\n                else {\n                    tdElm[i].style.padding = dialogEle.querySelector('.e-cell-padding').value + 'px';\n                    padVal = tdElm[i].getAttribute('style');\n                }\n                tdElm[i].setAttribute('style', padVal);\n            }\n        }\n        table.cellSpacing = dialogEle.querySelector('.e-cell-spacing') ? dialogEle.querySelector('.e-cell-spacing').value\n            : table.cellSpacing;\n        if (!isNOU(table.cellSpacing) && table.cellSpacing !== '0') {\n            addClass([table], classes.CLS_TABLE_BORDER);\n        }\n        else {\n            removeClassWithAttr([table], classes.CLS_TABLE_BORDER);\n        }\n        this.parent.formatter.saveData();\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    Table.prototype.tableDlgContent = function (e) {\n        var selectNode = e.selectParent[0];\n        var tableWidth = this.l10n.getConstant('tableWidth');\n        var cellPadding = this.l10n.getConstant('cellpadding');\n        var cellSpacing = this.l10n.getConstant('cellspacing');\n        var tableWrap = this.parent.createElement('div', { className: 'e-table-sizewrap' + this.parent.getCssClass(true) });\n        var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n        var padVal = closest(selectNode, 'td').style.padding;\n        var brdSpcVal = closest(selectNode, 'table').getAttribute('cellspacing');\n        var content = '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width' + this.parent.getCssClass(true) + '\" '\n            + ' /></div>' + '<div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding' + this.parent.getCssClass(true) + '\" />'\n            + ' </div><div class=\"e-rte-field' + this.parent.getCssClass(true) + '\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing' + this.parent.getCssClass(true) + '\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        this.tableWidthNum = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: widthVal,\n            placeholder: tableWidth,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.tableWidthNum.isStringTemplate = true;\n        this.tableWidthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n        this.tableCellPadding = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            // eslint-disable-next-line\n            value: padVal !== '' ? parseInt(padVal, null) : 0,\n            placeholder: cellPadding,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.tableCellPadding.isStringTemplate = true;\n        this.tableCellPadding.appendTo(tableWrap.querySelector('#cellPadding'));\n        this.tableCellSpacing = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            // eslint-disable-next-line\n            value: brdSpcVal !== '' && !isNOU(brdSpcVal) ? parseInt(brdSpcVal, null) : 0,\n            placeholder: cellSpacing,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.tableCellSpacing.isStringTemplate = true;\n        this.tableCellSpacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n        return tableWrap;\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    Table.prototype.destroy = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (this.resizeIconPositionTime) {\n            clearTimeout(this.resizeIconPositionTime);\n            this.resizeIconPositionTime = null;\n        }\n        this.removeEventListener();\n        EventHandler.remove(this.parent.contentModule.getDocument(), 'selectionchange', this.tableCellsKeyboardSelection);\n        if (this.curTable) {\n            EventHandler.remove(this.curTable, 'mouseleave', this.tableMouseLeave);\n        }\n        if (this.tableCellSpacing && !this.tableCellSpacing.isDestroyed) {\n            this.tableCellSpacing.destroy();\n            this.tableCellSpacing = null;\n        }\n        if (this.tableCellPadding && !this.tableCellPadding.isDestroyed) {\n            this.tableCellPadding.destroy();\n            this.tableCellPadding = null;\n        }\n        if (this.tableWidthNum && !this.tableWidthNum.isDestroyed) {\n            this.tableWidthNum.destroy();\n            this.tableWidthNum = null;\n        }\n        if (this.rowTextBox && !this.rowTextBox.isDestroyed) {\n            this.rowTextBox.destroy();\n            this.rowTextBox = null;\n        }\n        if (this.columnTextBox && !this.columnTextBox.isDestroyed) {\n            this.columnTextBox.destroy();\n            this.columnTextBox = null;\n        }\n        if (this.createTableButton && !this.createTableButton.isDestroyed) {\n            this.createTableButton.destroy();\n            this.createTableButton = null;\n        }\n        this.isDestroyed = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     */\n    Table.prototype.getModuleName = function () {\n        return 'table';\n    };\n    Table.prototype.afterKeyDown = function () {\n        var _this = this;\n        if (this.curTable) {\n            this.resizeIconPositionTime = setTimeout(function () {\n                _this.updateResizeIconPosition();\n            }, 1);\n        }\n    };\n    Table.prototype.updateResizeIconPosition = function () {\n        var tableReBox = this.parent.contentModule.getEditPanel().querySelector('.e-table-box');\n        if (!isNOU(tableReBox)) {\n            var tablePosition = this.calcPos(this.curTable);\n            tableReBox.style.cssText = 'top: ' + (tablePosition.top + parseInt(getComputedStyle(this.curTable).height, 10) - 4) +\n                'px; left:' + (tablePosition.left + parseInt(getComputedStyle(this.curTable).width, 10) - 4) + 'px;';\n        }\n    };\n    return Table;\n}());\nexport { Table };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}