{"ast":null,"code":"import { removeClass, selectAll, isNullOrUndefined as isNOU, EventHandler } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_EXPAND_OPEN, CLS_TB_ITEM, CLS_ACTIVE, CLS_RTE_SOURCE_CODE_TXTAREA } from '../base/classes';\nimport * as CONSTANT from '../../common/constant';\nimport { RenderType } from '../base/enum';\nimport { KeyboardEvents } from '../actions/keyboard';\n/**\n * Content module is used to render Rich Text Editor content\n *\n * @hidden\n\n */\nvar ViewSource = /** @class */function () {\n  /**\n   * Constructor for view source module\n   *\n   * @param {IRichTextEditor} parent - specifies the parent element.\n   * @param {ServiceLocator} locator - specifies the locator.\n   * @returns {void}\n   */\n  function ViewSource(parent, locator) {\n    this.parent = parent;\n    var serviceLocator = locator;\n    this.rendererFactory = serviceLocator.getService('rendererFactory');\n    this.addEventListener();\n  }\n  ViewSource.prototype.addEventListener = function () {\n    this.parent.on(events.sourceCode, this.sourceCode, this);\n    this.parent.on(events.initialEnd, this.onInitialEnd, this);\n    this.parent.on(events.updateSource, this.updateSourceCode, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n  ViewSource.prototype.onInitialEnd = function () {\n    this.parent.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown, this);\n  };\n  ViewSource.prototype.removeEventListener = function () {\n    this.unWireEvent();\n    this.parent.off(events.sourceCode, this.sourceCode);\n    this.parent.off(events.updateSource, this.updateSourceCode);\n    this.parent.off(events.initialEnd, this.onInitialEnd);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown);\n  };\n  ViewSource.prototype.getSourceCode = function () {\n    return this.parent.createElement('textarea', {\n      className: CLS_RTE_SOURCE_CODE_TXTAREA + this.parent.getCssClass(true)\n    });\n  };\n  ViewSource.prototype.wireEvent = function (element) {\n    this.keyboardModule = new KeyboardEvents(element, {\n      keyAction: this.previewKeyDown.bind(this),\n      keyConfigs: this.parent.formatter.keyConfig,\n      eventName: 'keydown'\n    });\n    EventHandler.add(this.previewElement, 'mousedown', this.mouseDownHandler, this);\n  };\n  ViewSource.prototype.unWireEvent = function () {\n    if (this.previewElement) {\n      EventHandler.remove(this.previewElement, 'mousedown', this.mouseDownHandler);\n    }\n    if (this.keyboardModule && !this.keyboardModule.isDestroyed) {\n      this.keyboardModule.destroy();\n    }\n  };\n  ViewSource.prototype.wireBaseKeyDown = function () {\n    this.parent.keyboardModule = new KeyboardEvents(this.contentModule.getEditPanel(), {\n      keyAction: this.parent.keyDown.bind(this.parent),\n      keyConfigs: this.parent.formatter.keyConfig,\n      eventName: 'keydown'\n    });\n  };\n  ViewSource.prototype.unWireBaseKeyDown = function () {\n    this.parent.keyboardModule.destroy();\n  };\n  ViewSource.prototype.mouseDownHandler = function (e) {\n    this.parent.notify(events.sourceCodeMouseDown, {\n      args: e\n    });\n  };\n  ViewSource.prototype.previewKeyDown = function (event) {\n    switch (event.action) {\n      case 'html-source':\n        this.updateSourceCode(event);\n        event.preventDefault();\n        break;\n      case 'toolbar-focus':\n        if (this.parent.toolbarSettings.enable && this.parent.getToolbarElement()) {\n          var firstActiveItem = this.parent.getToolbarElement().querySelector('.e-toolbar-item:not(.e-overlay)[title]');\n          firstActiveItem.firstElementChild.removeAttribute('tabindex');\n          firstActiveItem.firstElementChild.focus();\n        }\n        break;\n    }\n  };\n  ViewSource.prototype.onKeyDown = function (e) {\n    switch (e.event.action) {\n      case 'html-source':\n        e.event.preventDefault();\n        this.sourceCode(e);\n        e.callBack({\n          requestType: 'SourceCode',\n          editorMode: 'HTML',\n          event: e.event\n        });\n        break;\n    }\n  };\n  /**\n   * sourceCode method\n   *\n   * @param {ClickEventArgs} args - specifies the click event.\n   * @returns {void}\n   * @hidden\n    */\n  ViewSource.prototype.sourceCode = function (args) {\n    var _this = this;\n    this.parent.notify(events.hidePopup, {});\n    this.parent.isBlur = false;\n    this.parent.trigger(events.actionBegin, {\n      requestType: 'SourceCode',\n      targetItem: 'SourceCode',\n      args: args,\n      cancel: false\n    }, function (actionBeginArgs) {\n      if (!actionBeginArgs.cancel) {\n        var tbItems = selectAll('.' + CLS_TB_ITEM, _this.parent.element);\n        _this.contentModule = _this.rendererFactory.getRenderer(RenderType.Content);\n        var height = _this.parent.inputElement.getBoundingClientRect().height;\n        _this.parent.rootContainer.classList.add('e-source-code-enabled');\n        _this.parent.notify(events.updateToolbarItem, {\n          targetItem: 'SourceCode',\n          updateItem: 'Preview',\n          baseToolbar: _this.parent.getBaseToolbarObject()\n        });\n        if (isNOU(_this.previewElement)) {\n          _this.previewElement = _this.getSourceCode();\n        }\n        _this.parent.updateValueData();\n        var rteContent = void 0;\n        if (isNOU(_this.parent.element.querySelector('#' + _this.parent.getID() + '_source-view'))) {\n          rteContent = _this.parent.createElement('div', {\n            className: 'e-source-content',\n            id: _this.parent.getID() + '_source-view',\n            attrs: {\n              style: 'height:' + height + 'px'\n            }\n          });\n        } else {\n          rteContent = _this.parent.element.querySelector('#' + _this.parent.getID() + '_source-view');\n          rteContent.style.height = height + 'px';\n        }\n        rteContent.appendChild(_this.previewElement);\n        _this.parent.rootContainer.appendChild(rteContent);\n        _this.getPanel().value = _this.getTextAreaValue();\n        _this.parent.isBlur = false;\n        _this.parent.disableToolbarItem(_this.parent.toolbarSettings.items);\n        _this.parent.enableToolbarItem('SourceCode');\n        if (_this.parent.getToolbar()) {\n          removeClass([_this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        removeClass(tbItems, [CLS_ACTIVE]);\n        _this.wireEvent(_this.previewElement);\n        _this.unWireBaseKeyDown();\n        _this.previewElement.focus();\n        _this.parent.updateValue();\n        _this.parent.trigger(events.actionComplete, {\n          requestType: 'SourceCode',\n          targetItem: 'SourceCode',\n          args: args\n        });\n        _this.parent.invokeChangeEvent();\n        if (!isNOU(_this.parent.saveInterval) && _this.parent.saveInterval > 0 && _this.parent.autoSaveOnIdle) {\n          _this.codeViewTimeInterval = setInterval(function () {\n            _this.parent.notify(events.updateValueOnIdle, {});\n          }, _this.parent.saveInterval);\n        }\n      }\n    });\n  };\n  /**\n   * updateSourceCode method\n   *\n   * @param {ClickEventArgs} args - specifies the click event.\n   * @returns {void}\n   * @hidden\n    */\n  ViewSource.prototype.updateSourceCode = function (args) {\n    var _this = this;\n    this.parent.isBlur = false;\n    this.parent.trigger(events.actionBegin, {\n      requestType: 'Preview',\n      targetItem: 'Preview',\n      args: args,\n      cancel: false\n    }, function (actionBeginArgs) {\n      if (!actionBeginArgs.cancel) {\n        _this.parent.rootContainer.classList.remove('e-source-code-enabled');\n        var editHTML = _this.getPanel();\n        _this.parent.notify(events.updateToolbarItem, {\n          targetItem: 'Preview',\n          updateItem: 'SourceCode',\n          baseToolbar: _this.parent.getBaseToolbarObject()\n        });\n        var serializeValue = _this.parent.serializeValue(editHTML.value);\n        var value = void 0;\n        if (serializeValue === null || serializeValue === '') {\n          if (_this.parent.enterKey === 'DIV') {\n            value = '<div><br/></div>';\n          } else if (_this.parent.enterKey === 'BR') {\n            value = '<br/>';\n          } else {\n            value = '<p><br/></p>';\n          }\n        } else {\n          value = serializeValue;\n        }\n        _this.contentModule.getEditPanel().innerHTML = value;\n        _this.parent.isBlur = false;\n        _this.parent.enableToolbarItem(_this.parent.toolbarSettings.items);\n        if (_this.parent.getToolbar()) {\n          removeClass([_this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n        }\n        _this.unWireEvent();\n        _this.wireBaseKeyDown();\n        _this.contentModule.getEditPanel().focus();\n        _this.parent.updateValue();\n        _this.parent.trigger(events.actionComplete, {\n          requestType: 'Preview',\n          targetItem: 'Preview',\n          args: args\n        });\n        _this.parent.formatter.enableUndo(_this.parent);\n        _this.parent.addAudioVideoWrapper();\n        clearTimeout(_this.codeViewTimeInterval);\n        _this.parent.invokeChangeEvent();\n        _this.parent.notify(events.tableclass, {});\n      }\n    });\n  };\n  ViewSource.prototype.getTextAreaValue = function () {\n    return this.contentModule.getEditPanel().innerHTML === '<p><br></p>' || this.contentModule.getEditPanel().innerHTML === '<div><br></div>' || this.contentModule.getEditPanel().innerHTML === '<br>' || this.contentModule.getEditPanel().childNodes.length === 1 && this.contentModule.getEditPanel().childNodes[0].tagName === 'P' && this.contentModule.getEditPanel().innerHTML.length === 7 || this.contentModule.getEditPanel().childNodes[0].tagName === 'DIV' && this.contentModule.getEditPanel().innerHTML.length === 11 ? '' : this.parent.value;\n  };\n  /**\n   * getPanel method\n   *\n   * @returns {HTMLTextAreaElement} - Specifies the Souce codetext area element.\n   * @hidden\n    */\n  ViewSource.prototype.getPanel = function () {\n    return this.parent.element && this.parent.element.querySelector('.e-rte-srctextarea');\n  };\n  /**\n   * Destroy the entire RichTextEditor.\n   *\n   * @returns {void}\n   * @hidden\n    */\n  ViewSource.prototype.destroy = function () {\n    if (isNOU(this.parent)) {\n      return;\n    }\n    this.removeEventListener();\n  };\n  return ViewSource;\n}();\nexport { ViewSource };","map":{"version":3,"names":["removeClass","selectAll","isNullOrUndefined","isNOU","EventHandler","events","CLS_EXPAND_OPEN","CLS_TB_ITEM","CLS_ACTIVE","CLS_RTE_SOURCE_CODE_TXTAREA","CONSTANT","RenderType","KeyboardEvents","ViewSource","parent","locator","serviceLocator","rendererFactory","getService","addEventListener","prototype","on","sourceCode","initialEnd","onInitialEnd","updateSource","updateSourceCode","destroy","formatter","editorManager","observer","KEY_DOWN_HANDLER","onKeyDown","removeEventListener","unWireEvent","off","getSourceCode","createElement","className","getCssClass","wireEvent","element","keyboardModule","keyAction","previewKeyDown","bind","keyConfigs","keyConfig","eventName","add","previewElement","mouseDownHandler","remove","isDestroyed","wireBaseKeyDown","contentModule","getEditPanel","keyDown","unWireBaseKeyDown","e","notify","sourceCodeMouseDown","args","event","action","preventDefault","toolbarSettings","enable","getToolbarElement","firstActiveItem","querySelector","firstElementChild","removeAttribute","focus","callBack","requestType","editorMode","_this","hidePopup","isBlur","trigger","actionBegin","targetItem","cancel","actionBeginArgs","tbItems","getRenderer","Content","height","inputElement","getBoundingClientRect","rootContainer","classList","updateToolbarItem","updateItem","baseToolbar","getBaseToolbarObject","updateValueData","rteContent","getID","id","attrs","style","appendChild","getPanel","value","getTextAreaValue","disableToolbarItem","items","enableToolbarItem","getToolbar","updateValue","actionComplete","invokeChangeEvent","saveInterval","autoSaveOnIdle","codeViewTimeInterval","setInterval","updateValueOnIdle","editHTML","serializeValue","enterKey","innerHTML","enableUndo","addAudioVideoWrapper","clearTimeout","tableclass","childNodes","length","tagName"],"sources":["/var/www/vue/vue-gantt-chart/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/view-source.js"],"sourcesContent":["import { removeClass, selectAll, isNullOrUndefined as isNOU, EventHandler } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { CLS_EXPAND_OPEN, CLS_TB_ITEM, CLS_ACTIVE, CLS_RTE_SOURCE_CODE_TXTAREA } from '../base/classes';\nimport * as CONSTANT from '../../common/constant';\nimport { RenderType } from '../base/enum';\nimport { KeyboardEvents } from '../actions/keyboard';\n/**\n * Content module is used to render Rich Text Editor content\n *\n * @hidden\n\n */\nvar ViewSource = /** @class */ (function () {\n    /**\n     * Constructor for view source module\n     *\n     * @param {IRichTextEditor} parent - specifies the parent element.\n     * @param {ServiceLocator} locator - specifies the locator.\n     * @returns {void}\n     */\n    function ViewSource(parent, locator) {\n        this.parent = parent;\n        var serviceLocator = locator;\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    ViewSource.prototype.addEventListener = function () {\n        this.parent.on(events.sourceCode, this.sourceCode, this);\n        this.parent.on(events.initialEnd, this.onInitialEnd, this);\n        this.parent.on(events.updateSource, this.updateSourceCode, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    ViewSource.prototype.onInitialEnd = function () {\n        this.parent.formatter.editorManager.observer.on(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown, this);\n    };\n    ViewSource.prototype.removeEventListener = function () {\n        this.unWireEvent();\n        this.parent.off(events.sourceCode, this.sourceCode);\n        this.parent.off(events.updateSource, this.updateSourceCode);\n        this.parent.off(events.initialEnd, this.onInitialEnd);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.formatter.editorManager.observer.off(CONSTANT.KEY_DOWN_HANDLER, this.onKeyDown);\n    };\n    ViewSource.prototype.getSourceCode = function () {\n        return this.parent.createElement('textarea', { className: CLS_RTE_SOURCE_CODE_TXTAREA + this.parent.getCssClass(true) });\n    };\n    ViewSource.prototype.wireEvent = function (element) {\n        this.keyboardModule = new KeyboardEvents(element, {\n            keyAction: this.previewKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n        EventHandler.add(this.previewElement, 'mousedown', this.mouseDownHandler, this);\n    };\n    ViewSource.prototype.unWireEvent = function () {\n        if (this.previewElement) {\n            EventHandler.remove(this.previewElement, 'mousedown', this.mouseDownHandler);\n        }\n        if (this.keyboardModule && !this.keyboardModule.isDestroyed) {\n            this.keyboardModule.destroy();\n        }\n    };\n    ViewSource.prototype.wireBaseKeyDown = function () {\n        this.parent.keyboardModule = new KeyboardEvents(this.contentModule.getEditPanel(), {\n            keyAction: this.parent.keyDown.bind(this.parent), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n        });\n    };\n    ViewSource.prototype.unWireBaseKeyDown = function () {\n        this.parent.keyboardModule.destroy();\n    };\n    ViewSource.prototype.mouseDownHandler = function (e) {\n        this.parent.notify(events.sourceCodeMouseDown, { args: e });\n    };\n    ViewSource.prototype.previewKeyDown = function (event) {\n        switch (event.action) {\n            case 'html-source':\n                this.updateSourceCode(event);\n                event.preventDefault();\n                break;\n            case 'toolbar-focus':\n                if (this.parent.toolbarSettings.enable && this.parent.getToolbarElement()) {\n                    var firstActiveItem = this.parent.getToolbarElement().querySelector('.e-toolbar-item:not(.e-overlay)[title]');\n                    firstActiveItem.firstElementChild.removeAttribute('tabindex');\n                    firstActiveItem.firstElementChild.focus();\n                }\n                break;\n        }\n    };\n    ViewSource.prototype.onKeyDown = function (e) {\n        switch (e.event.action) {\n            case 'html-source':\n                e.event.preventDefault();\n                this.sourceCode(e);\n                e.callBack({\n                    requestType: 'SourceCode',\n                    editorMode: 'HTML',\n                    event: e.event\n                });\n                break;\n        }\n    };\n    /**\n     * sourceCode method\n     *\n     * @param {ClickEventArgs} args - specifies the click event.\n     * @returns {void}\n     * @hidden\n\n     */\n    ViewSource.prototype.sourceCode = function (args) {\n        var _this = this;\n        this.parent.notify(events.hidePopup, {});\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args, cancel: false }, function (actionBeginArgs) {\n            if (!actionBeginArgs.cancel) {\n                var tbItems = selectAll('.' + CLS_TB_ITEM, _this.parent.element);\n                _this.contentModule = _this.rendererFactory.getRenderer(RenderType.Content);\n                var height = _this.parent.inputElement.getBoundingClientRect().height;\n                _this.parent.rootContainer.classList.add('e-source-code-enabled');\n                _this.parent.notify(events.updateToolbarItem, {\n                    targetItem: 'SourceCode', updateItem: 'Preview',\n                    baseToolbar: _this.parent.getBaseToolbarObject()\n                });\n                if (isNOU(_this.previewElement)) {\n                    _this.previewElement = _this.getSourceCode();\n                }\n                _this.parent.updateValueData();\n                var rteContent = void 0;\n                if (isNOU(_this.parent.element.querySelector('#' + _this.parent.getID() + '_source-view'))) {\n                    rteContent = _this.parent.createElement('div', {\n                        className: 'e-source-content', id: _this.parent.getID() + '_source-view',\n                        attrs: { style: 'height:' + height + 'px' }\n                    });\n                }\n                else {\n                    rteContent = _this.parent.element.querySelector('#' + _this.parent.getID() + '_source-view');\n                    rteContent.style.height = height + 'px';\n                }\n                rteContent.appendChild(_this.previewElement);\n                _this.parent.rootContainer.appendChild(rteContent);\n                _this.getPanel().value = _this.getTextAreaValue();\n                _this.parent.isBlur = false;\n                _this.parent.disableToolbarItem(_this.parent.toolbarSettings.items);\n                _this.parent.enableToolbarItem('SourceCode');\n                if (_this.parent.getToolbar()) {\n                    removeClass([_this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n                }\n                removeClass(tbItems, [CLS_ACTIVE]);\n                _this.wireEvent(_this.previewElement);\n                _this.unWireBaseKeyDown();\n                _this.previewElement.focus();\n                _this.parent.updateValue();\n                _this.parent.trigger(events.actionComplete, { requestType: 'SourceCode', targetItem: 'SourceCode', args: args });\n                _this.parent.invokeChangeEvent();\n                if (!isNOU(_this.parent.saveInterval) && _this.parent.saveInterval > 0 && _this.parent.autoSaveOnIdle) {\n                    _this.codeViewTimeInterval = setInterval(function () { _this.parent.notify(events.updateValueOnIdle, {}); }, _this.parent.saveInterval);\n                }\n            }\n        });\n    };\n    /**\n     * updateSourceCode method\n     *\n     * @param {ClickEventArgs} args - specifies the click event.\n     * @returns {void}\n     * @hidden\n\n     */\n    ViewSource.prototype.updateSourceCode = function (args) {\n        var _this = this;\n        this.parent.isBlur = false;\n        this.parent.trigger(events.actionBegin, { requestType: 'Preview', targetItem: 'Preview', args: args, cancel: false }, function (actionBeginArgs) {\n            if (!actionBeginArgs.cancel) {\n                _this.parent.rootContainer.classList.remove('e-source-code-enabled');\n                var editHTML = _this.getPanel();\n                _this.parent.notify(events.updateToolbarItem, {\n                    targetItem: 'Preview', updateItem: 'SourceCode',\n                    baseToolbar: _this.parent.getBaseToolbarObject()\n                });\n                var serializeValue = _this.parent.serializeValue(editHTML.value);\n                var value = void 0;\n                if (serializeValue === null || serializeValue === '') {\n                    if (_this.parent.enterKey === 'DIV') {\n                        value = '<div><br/></div>';\n                    }\n                    else if (_this.parent.enterKey === 'BR') {\n                        value = '<br/>';\n                    }\n                    else {\n                        value = '<p><br/></p>';\n                    }\n                }\n                else {\n                    value = serializeValue;\n                }\n                _this.contentModule.getEditPanel().innerHTML = value;\n                _this.parent.isBlur = false;\n                _this.parent.enableToolbarItem(_this.parent.toolbarSettings.items);\n                if (_this.parent.getToolbar()) {\n                    removeClass([_this.parent.getToolbar()], [CLS_EXPAND_OPEN]);\n                }\n                _this.unWireEvent();\n                _this.wireBaseKeyDown();\n                _this.contentModule.getEditPanel().focus();\n                _this.parent.updateValue();\n                _this.parent.trigger(events.actionComplete, { requestType: 'Preview', targetItem: 'Preview', args: args });\n                _this.parent.formatter.enableUndo(_this.parent);\n                _this.parent.addAudioVideoWrapper();\n                clearTimeout(_this.codeViewTimeInterval);\n                _this.parent.invokeChangeEvent();\n                _this.parent.notify(events.tableclass, {});\n            }\n        });\n    };\n    ViewSource.prototype.getTextAreaValue = function () {\n        return (this.contentModule.getEditPanel().innerHTML === '<p><br></p>') ||\n            (this.contentModule.getEditPanel().innerHTML === '<div><br></div>') ||\n            (this.contentModule.getEditPanel().innerHTML === '<br>') ||\n            (this.contentModule.getEditPanel().childNodes.length === 1 &&\n                (this.contentModule.getEditPanel().childNodes[0].tagName === 'P' &&\n                    this.contentModule.getEditPanel().innerHTML.length === 7) ||\n                (this.contentModule.getEditPanel().childNodes[0].tagName === 'DIV' &&\n                    this.contentModule.getEditPanel().innerHTML.length === 11)) ? '' : this.parent.value;\n    };\n    /**\n     * getPanel method\n     *\n     * @returns {HTMLTextAreaElement} - Specifies the Souce codetext area element.\n     * @hidden\n\n     */\n    ViewSource.prototype.getPanel = function () {\n        return this.parent.element && this.parent.element.querySelector('.e-rte-srctextarea');\n    };\n    /**\n     * Destroy the entire RichTextEditor.\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    ViewSource.prototype.destroy = function () {\n        if (isNOU(this.parent)) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    return ViewSource;\n}());\nexport { ViewSource };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}